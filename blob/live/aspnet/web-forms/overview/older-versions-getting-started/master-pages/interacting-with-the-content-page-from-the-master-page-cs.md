---
uid: web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
title: Interaktion mit der Seite Inhalt aus der Gestaltungsvorlage (c#) | Microsoft Docs
author: rick-anderson
description: Untersucht, wie Methoden aufrufen, legen Sie Eigenschaften usw. der Inhaltsseite aus Code in der Masterseite.
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/11/2008
ms.topic: article
ms.assetid: 3282df5e-516c-4972-8666-313828b90fb5
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
msc.type: authoredcontent
ms.openlocfilehash: 923d291d84a47e64b31d99bcb13cfe53e5806444
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/10/2017
---
<a name="interacting-with-the-content-page-from-the-master-page-c"></a><span data-ttu-id="c1c8b-103">Interaktion mit der Seite Inhalt aus der Gestaltungsvorlage (c#)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-103">Interacting with the Content Page from the Master Page (C#)</span></span>
====================
<span data-ttu-id="c1c8b-104">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="c1c8b-105">[Herunterladen von Code](http://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) oder [PDF herunterladen](http://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-105">[Download Code](http://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) or [Download PDF](http://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span></span>

> <span data-ttu-id="c1c8b-106">Untersucht, wie Methoden aufrufen, legen Sie Eigenschaften usw. der Inhaltsseite aus Code in der Masterseite.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-106">Examines how to call methods, set properties, etc. of the Content Page from code in the Master Page.</span></span>


## <a name="introduction"></a><span data-ttu-id="c1c8b-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="c1c8b-107">Introduction</span></span>

<span data-ttu-id="c1c8b-108">Das vorherigen Lernprogramm untersucht, wie programmgesteuerte Interaktion mit Gestaltungsvorlage Inhaltsseite haben.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-108">The preceding tutorial examined how to have the content page programmatically interact with its master page.</span></span> <span data-ttu-id="c1c8b-109">Wie bereits erwähnt, wurden die Gestaltungsvorlage Einbeziehung ein GridView-Steuerelements, das die fünf zuletzt aufgeführt hinzugefügt Produkte.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-109">Recall that we updated the master page to include a GridView control that listed the five most recently added products.</span></span> <span data-ttu-id="c1c8b-110">Danach haben wir eine Inhaltsseite, in der der Benutzer ein neues Produkt hinzufügen konnte, erstellt.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-110">We then created a content page from which the user could add a new product.</span></span> <span data-ttu-id="c1c8b-111">Inhaltsseite musste beim Hinzufügen eines neuen Produkts, weisen Sie die Gestaltungsvorlage an die GridView zu aktualisieren, damit, dass das Produkt gerade hinzugefügten enthalten würde.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-111">Upon adding a new product, the content page needed to instruct the master page to refresh its GridView so that it would include the just-added product.</span></span> <span data-ttu-id="c1c8b-112">Diese Funktionalität wurde erreicht, indem die Gestaltungsvorlage, aktualisiert die Daten an die GridView gebunden eine öffentliche Methode hinzugefügt, und dann Aufrufen dieser Methode aus der Seite Inhalt.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-112">This functionality was accomplished by adding a public method to the master page that refreshed the data bound to the GridView, and then invoking that method from the content page.</span></span>

<span data-ttu-id="c1c8b-113">Die am häufigsten verwendete Form des Inhalts und der Gestaltungsvorlage Interaktion stammt aus der Seite Inhalt.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-113">The most common form of content and master page interaction originates from the content page.</span></span> <span data-ttu-id="c1c8b-114">Allerdings es ist möglich, für die Gestaltungsvorlage auf die Seite für den aktuellen Inhalte in Aktion Rouse verwaltet, und solche Funktionen notwendig sein, wenn die Gestaltungsvorlage Elemente der Benutzeroberfläche enthält, mit denen Benutzer Daten ändern, die auch auf der Seite Inhalt angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-114">However, it is possible for the master page to rouse the current content page into action, and such functionality may be needed if the master page contains user interface elements that enable users to modify data that is also displayed on the content page.</span></span> <span data-ttu-id="c1c8b-115">Nehmen wir eine Inhaltsseite, zeigt der Produkte in einer GridView steuern und eine Masterseite, die eine Schaltfläche enthält steuern, die beim Klicken auf, verdoppelt die Preise aller Produkte.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-115">Consider a content page that displays the products information in a GridView control and a master page that includes a Button control that, when clicked, doubles the prices of all products.</span></span> <span data-ttu-id="c1c8b-116">Ähnlich wie das Beispiel in dem vorherigen Lernprogramm gilt die GridView muss nach der doppelten Preis aktualisiert werden, auf die Schaltfläche geklickt wird, damit die neuen Preise angezeigt, aber in diesem Szenario ist es die Gestaltungsvorlage, die auf die Seite Inhalte in Aktion Rouse verwaltet muss.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-116">Much like the example in the preceding tutorial, the GridView needs to be refreshed after the double price Button is clicked so that it displays the new prices, but in this scenario it's the master page that needs to rouse the content page into action.</span></span>

<span data-ttu-id="c1c8b-117">In diesem Lernprogramm wird untersucht, wie die Gestaltungsvorlage in der Inhaltsseite definierte Funktion aufgerufen haben.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-117">This tutorial explores how to have the master page invoke functionality defined in the content page.</span></span>

### <a name="instigating-programmatic-interaction-via-an-event-and-event-handlers"></a><span data-ttu-id="c1c8b-118">Betreffende programmgesteuerte Interaktion über ein Ereignis und Ereignishandler</span><span class="sxs-lookup"><span data-stu-id="c1c8b-118">Instigating Programmatic Interaction via an Event and Event Handlers</span></span>

<span data-ttu-id="c1c8b-119">Aufrufen der Inhaltsseite Funktionen von einer Masterseite ist schwieriger als umgekehrt.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-119">Invoking content page functionality from a master page is more challenging than the other way around.</span></span> <span data-ttu-id="c1c8b-120">Da eine Inhaltsseite eine Masterseite hat, wenn die programmgesteuerte Interaktion von Inhaltsseite Clientabfragen zurückzugeben kennen wir öffentliche Methoden und Eigenschaften zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-120">Because a content page has a single master page, when instigating the programmatic interaction from the content page we know what public methods and properties are at our disposal.</span></span> <span data-ttu-id="c1c8b-121">Eine Masterseite kann jedoch vielen verschiedenen Inhaltsseiten, jeweils über einen eigenen Satz von Eigenschaften und Methoden verfügen.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-121">A master page, however, can have many different content pages, each with its own set of properties and methods.</span></span> <span data-ttu-id="c1c8b-122">Wie kann, wir schreiben dann Code in die Masterseite führen Sie eine Aktion in der Inhaltsseite, wenn es nicht wissen, welche Inhaltsseite bis zur Laufzeit aufgerufen wird?</span><span class="sxs-lookup"><span data-stu-id="c1c8b-122">How, then, can we write code in the master page to perform some action in its content page when we don't know what content page will be invoked until runtime?</span></span>

<span data-ttu-id="c1c8b-123">Erwägen Sie eine ASP.NET Web-Steuerelement, z. B. das Schaltflächen-Steuerelement aus.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-123">Consider an ASP.NET Web control, such as the Button control.</span></span> <span data-ttu-id="c1c8b-124">Ein Button-Steuerelement kann auf eine beliebige Anzahl von ASP.NET-Seiten angezeigt werden und benötigt einen Mechanismus, mit dem sie der Seite Warnungen erhalten kann, dass er auf den geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-124">A Button control can appear on any number of ASP.NET pages and needs a mechanism by which it can alert the page that it has been clicked.</span></span> <span data-ttu-id="c1c8b-125">Dies erfolgt mit *Ereignisse*.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-125">This is accomplished using *events*.</span></span> <span data-ttu-id="c1c8b-126">Insbesondere das Schaltflächen-Steuerelement löst die `Click` Ereignis wenn darauf geklickt wird; die ASP.NET-Seite mit der Schaltfläche optional auf reagieren kann diese Benachrichtigung über eine *Ereignishandler*.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-126">In particular, the Button control raises its `Click` event when it is clicked; the ASP.NET page that contains the Button can optionally respond to that notification via an *event handler*.</span></span>

<span data-ttu-id="c1c8b-127">Dieses gleiche Muster kann verwendet werden, eine Masterseite Trigger-Funktionalität in seiner Inhaltsseiten haben:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-127">This same pattern can be used to have a master page trigger functionality in its content pages:</span></span>

1. <span data-ttu-id="c1c8b-128">Fügen Sie ein Ereignis der Masterseite.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-128">Add an event to the master page.</span></span>
2. <span data-ttu-id="c1c8b-129">Lösen Sie das Ereignis, wenn die Gestaltungsvorlage für die Kommunikation mit der Seite Inhalt muss.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-129">Raise the event whenever the master page needs to communicate with its content page.</span></span> <span data-ttu-id="c1c8b-130">Z. B. wenn die Gestaltungsvorlage muss seine Inhaltsseite ein Hinweis, dass der Benutzer die Preise verdoppelt hat, würde seine Ereignis ausgelöst werden unmittelbar nach dem verdoppelt die Preise aufweisen.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-130">For example, if the master page needs to alert its content page that the user has doubled the prices, its event would be raised immediately after the prices have been doubled.</span></span>
3. <span data-ttu-id="c1c8b-131">Erstellen Sie einen Ereignishandler in diese Inhaltsseiten, die Maßnahmen ergreifen müssen.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-131">Create an event handler in those content pages that need to take some action.</span></span>

<span data-ttu-id="c1c8b-132">Diese Rest dieses Lernprogramms implementiert das Beispiel beschrieben, die in der Einführung. steuern, nämlich Inhaltsseite, die die Produkte in der Datenbank aufgeführt sind und einer Masterseite, die eine Schaltfläche enthält, um die Preise doppelklicken.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-132">This remainder of this tutorial implements the example outlined in the Introduction; namely, a content page that lists the products in the database and a master page that includes a Button control to double the prices.</span></span>

## <a name="step-1-displaying-products-in-a-content-page"></a><span data-ttu-id="c1c8b-133">Schritt 1: Anzeigen von Produkten in einer Inhaltsseite</span><span class="sxs-lookup"><span data-stu-id="c1c8b-133">Step 1: Displaying Products in a Content Page</span></span>

<span data-ttu-id="c1c8b-134">Erste Order Of Geschäftsverkehr ist auf eine Inhaltsseite zu erstellen, die die Produkte aus der Northwind-Datenbank aufgeführt sind.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-134">Our first order of business is to create a content page that lists the products from the Northwind database.</span></span> <span data-ttu-id="c1c8b-135">(Wir dem Projekt die Northwind-Datenbank hinzugefügt, in dem vorherigen Lernprogramm [ *Interaktion mit der Masterseite von der Inhaltsseite*](interacting-with-the-master-page-from-the-content-page-cs.md).) Starten, indem Sie eine neue ASP.NET-Seite, um die `~/Admin` Ordner mit dem Namen `Products.aspx`, sodass Sie sicher, dass so binden Sie es der `Site.master` Masterseite.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-135">(We added the Northwind database to the project in the preceding tutorial, [*Interacting with the Master Page from the Content Page*](interacting-with-the-master-page-from-the-content-page-cs.md).) Start by adding a new ASP.NET page to the `~/Admin` folder named `Products.aspx`, making sure to bind it to the `Site.master` master page.</span></span> <span data-ttu-id="c1c8b-136">Abbildung 1 zeigt im Projektmappen-Explorer aus, nachdem dieser Seite auf der Website hinzugefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-136">Figure 1 shows the Solution Explorer after this page has been added to the website.</span></span>


<span data-ttu-id="c1c8b-137">[![Fügen Sie eine neue ASP.NET-Seite, um den Ordner Admin](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-137">[![Add a New ASP.NET Page to the Admin Folder](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span></span>

<span data-ttu-id="c1c8b-138">**Abbildung 01**: Fügen Sie eine neue ASP.NET-Seite, um die `Admin` Ordner ([klicken Sie hier, um das Bild in voller Größe angezeigt](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="c1c8b-138">**Figure 01**: Add a New ASP.NET Page to the `Admin` Folder ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span></span>


<span data-ttu-id="c1c8b-139">Denken Sie daran, dass in der [ *Titel, Meta-Tags und andere HTML-Header angeben, der Gestaltungsvorlage* ](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) Lernprogramm wir eine benutzerdefinierte Basisseite-Klasse, die mit dem Namen erstellt `BasePage` , die den Titel der Seite generiert wird, ist er nicht Festlegen Sie explizit.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-139">Recall that in the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial we created a custom base page class named `BasePage` that generates the page's title if it is not explicitly set.</span></span> <span data-ttu-id="c1c8b-140">Wechseln Sie zu der `Products.aspx` Seite des Code-Behind-Klasse, und Ihr abgeleitet sein `BasePage` (anstelle von aus `System.Web.UI.Page`).</span><span class="sxs-lookup"><span data-stu-id="c1c8b-140">Go to the `Products.aspx` page's code-behind class and have it derive from `BasePage` (instead of from `System.Web.UI.Page`).</span></span>

<span data-ttu-id="c1c8b-141">Aktualisieren Sie schließlich die `Web.sitemap` Datei, die einen Eintrag in dieser Lektion hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-141">Finally, update the `Web.sitemap` file to include an entry for this lesson.</span></span> <span data-ttu-id="c1c8b-142">Fügen Sie das folgende Markup unterhalb der `<siteMapNode>` für den Inhalt zur Interaktion der Master-Seite Lektion:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-142">Add the following markup beneath the `<siteMapNode>` for the Content to Master Page Interaction lesson:</span></span>


[!code-xml[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample1.xml)]

<span data-ttu-id="c1c8b-143">Das Hinzufügen dieses `<siteMapNode>` Elements in den Lektionen wiedergegeben wird (siehe Abbildung 5).</span><span class="sxs-lookup"><span data-stu-id="c1c8b-143">The addition of this `<siteMapNode>` element is reflected in the Lessons list (see Figure 5).</span></span>

<span data-ttu-id="c1c8b-144">Zurück zu `Products.aspx`.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-144">Return to `Products.aspx`.</span></span> <span data-ttu-id="c1c8b-145">Im Inhaltssteuerelement für `MainContent`, fügen Sie eine GridView-Steuerelement hinzu, und nennen Sie sie `ProductsGrid`.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-145">In the Content control for `MainContent`, add a GridView control and name it `ProductsGrid`.</span></span> <span data-ttu-id="c1c8b-146">Die GridView zu binden, um ein neues SqlDataSource-Steuerelement mit dem Namen `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-146">Bind the GridView to a new SqlDataSource control named `ProductsDataSource`.</span></span>


<span data-ttu-id="c1c8b-147">[![Die GridView zu binden, zu einem neuen SqlDataSource-Steuerelement](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-147">[![Bind the GridView to a New SqlDataSource Control](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span></span>

<span data-ttu-id="c1c8b-148">**Abbildung 02**: GridView zu binden, um ein neues SqlDataSource-Steuerelement ([klicken Sie hier, um das Bild in voller Größe angezeigt](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="c1c8b-148">**Figure 02**: Bind the GridView to a New SqlDataSource Control  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span></span>


<span data-ttu-id="c1c8b-149">Konfigurieren Sie den Assistenten so, dass sie die Northwind-Datenbank verwendet.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-149">Configure the wizard so that it uses the Northwind database.</span></span> <span data-ttu-id="c1c8b-150">Wenn Sie das vorherige Lernprogramm durchgearbeitet haben Sie bereits eine Verbindungszeichenfolge mit dem Namen `NorthwindConnectionString` in `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-150">If you worked through the previous tutorial then you should already have a connection string named `NorthwindConnectionString` in `Web.config`.</span></span> <span data-ttu-id="c1c8b-151">Wählen Sie diese Verbindungszeichenfolge aus der Dropdown-Liste, wie in Abbildung 3 gezeigt.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-151">Choose this connection string from the drop-down list, as shown in Figure 3.</span></span>


<span data-ttu-id="c1c8b-152">[![Konfigurieren Sie die SqlDataSource Verwendung der Northwind-Datenbank](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-152">[![Configure the SqlDataSource to Use the Northwind Database](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span></span>

<span data-ttu-id="c1c8b-153">**Abbildung 03**: Konfigurieren der SqlDataSource Verwendung der Northwind-Datenbank ([klicken Sie hier, um das Bild in voller Größe angezeigt](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="c1c8b-153">**Figure 03**: Configure the SqlDataSource to Use the Northwind Database  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span></span>


<span data-ttu-id="c1c8b-154">Geben Sie anschließend des Datenquellensteuerelements `SELECT` Erklärung die Products-Tabelle aus der Dropdown-Liste auswählen und die Rückgabe der `ProductName` und `UnitPrice` Spalten (siehe Abbildung 4).</span><span class="sxs-lookup"><span data-stu-id="c1c8b-154">Next, specify the data source control's `SELECT` statement by choosing the Products table from the drop-down list and returning the `ProductName` and `UnitPrice` columns (see Figure 4).</span></span> <span data-ttu-id="c1c8b-155">Klicken Sie auf Weiter, und beenden Sie dann zum Abschließen des Assistenten für die Datenquelle konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-155">Click Next and then Finish to complete the Configure Data Source wizard.</span></span>


<span data-ttu-id="c1c8b-156">[![ProductName und UnitPrice Felder aus der Tabelle Products zurückgegeben.](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-156">[![Return the ProductName and UnitPrice Fields from the Products Table](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span></span>

<span data-ttu-id="c1c8b-157">**Abbildung 04**: Zurückgeben der `ProductName` und `UnitPrice` Felder aus der `Products` Tabelle ([klicken Sie hier, um das Bild in voller Größe angezeigt](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="c1c8b-157">**Figure 04**: Return the `ProductName` and `UnitPrice` Fields from the `Products` Table  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span></span>


<span data-ttu-id="c1c8b-158">Das ist alles vorhanden ist!</span><span class="sxs-lookup"><span data-stu-id="c1c8b-158">That's all there is to it!</span></span> <span data-ttu-id="c1c8b-159">Nach Abschluss des Assistenten fügt Visual Studio zwei BoundFields an die GridView, die zwei Felder zurückgegebenes SqlDataSource-Steuerelement zu spiegeln.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-159">After completing the wizard Visual Studio adds two BoundFields to the GridView to mirror the two fields returned by the SqlDataSource control.</span></span> <span data-ttu-id="c1c8b-160">Die GridView und SqlDataSource-Steuerelemente Markup folgt.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-160">The GridView and SqlDataSource controls' markup follows.</span></span> <span data-ttu-id="c1c8b-161">Abbildung 5 zeigt die Ergebnisse, wenn Sie über einen Browser angezeigt.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-161">Figure 5 shows the results when viewed through a browser.</span></span>


[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample2.aspx)]


<span data-ttu-id="c1c8b-162">[![Jedes Produkt ihren Preis aufgeführt, die GridView](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-162">[![Each Product and its Price is Listed in the GridView](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span></span>

<span data-ttu-id="c1c8b-163">**Abbildung 05**: jedes Produkt ihren Preis aufgeführt, die GridView ([klicken Sie hier, um das Bild in voller Größe angezeigt](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="c1c8b-163">**Figure 05**: Each Product and its Price is Listed in the GridView  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png))</span></span>


> [!NOTE]
> <span data-ttu-id="c1c8b-164">Wahlweise können die Darstellung der GridView bereinigen.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-164">Feel free to clean up the appearance of the GridView.</span></span> <span data-ttu-id="c1c8b-165">Einige Vorschläge enthalten die Formatierung des angezeigten UnitPrice-Wertes als Währung und mithilfe von Hintergrundfarben und Schriftarten zum Optimieren der Darstellung des Datenblatts.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-165">Some suggestions include formatting the displayed UnitPrice value as a currency and using background colors and fonts to improve the grid's appearance.</span></span> <span data-ttu-id="c1c8b-166">Weitere Informationen zum Anzeigen und Formatieren von Daten in ASP.NET finden Sie in meinem [arbeiten mit Tutorial Datenreihe](../../data-access/index.md).</span><span class="sxs-lookup"><span data-stu-id="c1c8b-166">For more information on displaying and formatting data in ASP.NET, refer to my [Working with Data tutorial series](../../data-access/index.md).</span></span>


## <a name="step-2-adding-a-double-prices-button-to-the-master-page"></a><span data-ttu-id="c1c8b-167">Schritt 2: Hinzufügen einer doppelten Preise-Schaltfläche auf der Seite "Master"</span><span class="sxs-lookup"><span data-stu-id="c1c8b-167">Step 2: Adding a Double Prices Button to the Master Page</span></span>

<span data-ttu-id="c1c8b-168">Unsere nächste Aufgabe ist das Hinzufügen einer Schaltfläche Websteuerelement mit dem übergeordneten Seite, die beim Klicken auf doppelt auf den Preis aller Produkte in der Datenbank wird.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-168">Our next task is to add a Button Web control to the master page that, when clicked, will double the price of all products in the database.</span></span> <span data-ttu-id="c1c8b-169">Öffnen der `Site.master` Seite "master", und ziehen Sie eine Schaltfläche aus der Toolbox in den Designer, und platzieren es unterhalb der `RecentProductsDataSource` SqlDataSource-Steuerelement, die wir im vorherigen Lernprogramm hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-169">Open the `Site.master` master page and drag a Button from the Toolbox onto the Designer, placing it beneath the `RecentProductsDataSource` SqlDataSource control we added in the previous tutorial.</span></span> <span data-ttu-id="c1c8b-170">Legen Sie der Schaltfläche `ID` Eigenschaft `DoublePrice` und seine `Text` -Eigenschaft auf "Doppelte Produktpreise".</span><span class="sxs-lookup"><span data-stu-id="c1c8b-170">Set the Button's `ID` property to `DoublePrice` and its `Text` property to "Double Product Prices".</span></span>

<span data-ttu-id="c1c8b-171">Fügen Sie ein SqlDataSource-Steuerelement auf der Masterseite benennen `DoublePricesDataSource`.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-171">Next, add a SqlDataSource control to the master page, naming it `DoublePricesDataSource`.</span></span> <span data-ttu-id="c1c8b-172">Diesen SqlDataSource wird zum Ausführen der `UPDATE` Anweisung alle Preise verdoppeln.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-172">This SqlDataSource will be used to execute the `UPDATE` statement to double all prices.</span></span> <span data-ttu-id="c1c8b-173">Insbesondere müssen wir Festlegen seiner `ConnectionString` und `UpdateCommand` Eigenschaften der entsprechenden Verbindungszeichenfolge und `UPDATE` Anweisung.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-173">Specifically, we need to set its `ConnectionString` and `UpdateCommand` properties to the appropriate connection string and `UPDATE` statement.</span></span> <span data-ttu-id="c1c8b-174">Wir müssen Sie diesen SqlDataSource-Steuerelement aufrufen `Update` Methode bei der `DoublePrice` Schaltfläche geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-174">Then we need to call this SqlDataSource control's `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="c1c8b-175">Festlegen der `ConnectionString` und `UpdateCommand` Eigenschaften, wählen Sie das SqlDataSource-Steuerelement, und fahren Sie mit dem Eigenschaftenfenster.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-175">To set the `ConnectionString` and `UpdateCommand` properties, select the SqlDataSource control and then go to the Properties window.</span></span> <span data-ttu-id="c1c8b-176">Die `ConnectionString` Eigenschaft aufgeführt, die bereits in gespeicherten Verbindungszeichenfolgen `Web.config` in einer Dropdownliste; wählen Sie die `NorthwindConnectionString` option wie in Abbildung 6 veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-176">The `ConnectionString` property lists those connection strings already stored in `Web.config` in a drop-down list; choose the `NorthwindConnectionString` option as shown in Figure 6.</span></span>


<span data-ttu-id="c1c8b-177">[![Konfigurieren Sie die SqlDataSource Verwendung der NorthwindConnectionString](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-177">[![Configure the SqlDataSource to Use the NorthwindConnectionString](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span></span>

<span data-ttu-id="c1c8b-178">**Abbildung 06**: Konfigurieren der SqlDataSource verwenden die `NorthwindConnectionString` ([klicken Sie hier, um das Bild in voller Größe angezeigt](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="c1c8b-178">**Figure 06**: Configure the SqlDataSource to Use the `NorthwindConnectionString` ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span></span>


<span data-ttu-id="c1c8b-179">Festlegen der `UpdateCommand` -Eigenschaft, suchen Sie im Fenster Eigenschaften die UpdateQuery-Option.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-179">To set the `UpdateCommand` property, locate the UpdateQuery option in the Properties window.</span></span> <span data-ttu-id="c1c8b-180">Diese Eigenschaft bei Auswahl dieser Option wird eine Schaltfläche mit Auslassungszeichen angezeigt; Klicken Sie auf diese Schaltfläche, um das Dialogfeld Befehls- und Parameter-Editor, siehe Abbildung 7 anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-180">This property, when selected, displays a button with ellipses; click this button to display the Command and Parameter Editor dialog box shown in Figure 7.</span></span> <span data-ttu-id="c1c8b-181">Geben Sie Folgendes `UPDATE` Anweisung in das Dialogfeld Textfeld ein:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-181">Type the following `UPDATE` statement into the dialog box's textbox:</span></span>


[!code-sql[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample3.sql)]

<span data-ttu-id="c1c8b-182">Bei der Ausführung dieser Anweisung Doppelklicken wird die `UnitPrice` Wert für jeden Datensatz in der `Products` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-182">This statement, when executed, will double the `UnitPrice` value for each record in the `Products` table.</span></span>


<span data-ttu-id="c1c8b-183">[![Festlegen des SqlDataSource UpdateCommand-Eigenschaft](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-183">[![Set SqlDataSource's UpdateCommand Property](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span></span>

<span data-ttu-id="c1c8b-184">**Abbildung 07**: Legen Sie SqlDataSource `UpdateCommand` Eigenschaft ([klicken Sie hier, um das Bild in voller Größe angezeigt](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="c1c8b-184">**Figure 07**: Set SqlDataSource's `UpdateCommand` Property  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span></span>


<span data-ttu-id="c1c8b-185">Nach dem Festlegen dieser Eigenschaften, sollte die Schaltfläche und SqlDataSource-Steuerelemente deklarativem Markup ähnlich der folgenden aussehen:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-185">After setting these properties, your Button and SqlDataSource controls' declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample4.aspx)]

<span data-ttu-id="c1c8b-186">Alle bleibt besteht im Aufrufen seiner `Update` Methode bei der `DoublePrice` Schaltfläche geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-186">All that remains is to call its `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="c1c8b-187">Erstellen einer `Click` -Ereignishandler für die `DoublePrice` Schaltfläche und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-187">Create a `Click` event handler for the `DoublePrice` Button and add the following code:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample5.cs)]

<span data-ttu-id="c1c8b-188">Um diese Funktion testen möchten, besuchen Sie die `~/Admin/Products.aspx` Seite, die wir in Schritt 1 erstellt haben, und klicken Sie auf die Schaltfläche "Doppelte Produktpreise".</span><span class="sxs-lookup"><span data-stu-id="c1c8b-188">To test this functionality, visit the `~/Admin/Products.aspx` page we created in Step 1 and click the "Double Product Prices" button.</span></span> <span data-ttu-id="c1c8b-189">Auf die Schaltfläche einen Postback verursacht und führt die `DoublePrice` Schaltfläche `Click` Ereignishandler, d. h. verdoppelt die Preise aller Produkte.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-189">Clicking the button causes a postback and executes the `DoublePrice` Button's `Click` event handler, doubling the prices of all products.</span></span> <span data-ttu-id="c1c8b-190">Klicken Sie dann die Seite erneut gerendert wird, und das Markup zurückgegeben und erneut im Browser angezeigt.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-190">The page is then re-rendered and the markup is returned and re-displayed in the browser.</span></span> <span data-ttu-id="c1c8b-191">Die GridView auf der Inhaltsseite aufgeführt jedoch die gleichen Preise vor "Doppelte Produktpreise" geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-191">The GridView in the content page, however, lists the same prices as before the "Double Product Prices" button was clicked.</span></span> <span data-ttu-id="c1c8b-192">Dies ist, da die Daten in die GridView anfänglich geladenen den Zustand im Ansichtszustand gespeichert wird hatte, sodass es nicht bei Postbacks neu geladen wird, wenn andernfalls aufgefordert.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-192">This is because the data initially loaded in the GridView had its state stored in view state, so it's not reloaded on postbacks unless instructed otherwise.</span></span> <span data-ttu-id="c1c8b-193">Wenn Sie eine andere Seite besuchen und wieder die `~/Admin/Products.aspx` Seite sehen Sie die aktualisierte Preise.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-193">If you visit a different page and then return to the `~/Admin/Products.aspx` page you'll see the updated prices.</span></span>

## <a name="step-3-raising-an-event-when-the-prices-are-doubled"></a><span data-ttu-id="c1c8b-194">Schritt 3: Wenn die Preise ein Ereignis auslösen werden verdoppelt.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-194">Step 3: Raising an Event When the Prices are Doubled</span></span>

<span data-ttu-id="c1c8b-195">Da die GridView in die `~/Admin/Products.aspx` Seite nicht sofort reflektiert der Preis verdoppelt, ein Benutzer eventuell verständlicherweise der Meinung, dass sie nicht auf die Schaltfläche "Doppelte Produktpreise" geklickt haben oder nicht erfolgreich war.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-195">Because the GridView in the `~/Admin/Products.aspx` page does not immediately reflect the price doubling, a user may understandably think that they did not click the "Double Product Prices" button, or that it didn't work.</span></span> <span data-ttu-id="c1c8b-196">Sie können versuchen, auf die Schaltfläche weitere Male verdoppelt die Preise wieder.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-196">They may try clicking the button a few more times, doubling the prices again and again.</span></span> <span data-ttu-id="c1c8b-197">Zum Beheben dieses wir das Raster im Inhalt müssen für die Seitenanzeige der neuen Preise sofort, nachdem sie verdoppelt werden.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-197">To fix this we need to have the grid in the content page display the new prices immediately after they are doubled.</span></span>

<span data-ttu-id="c1c8b-198">Wie weiter oben in diesem Lernprogramm erläutert wird, müssen wir ein Ereignis in die Masterseite auslösen, wenn der Benutzer klickt auf die `DoublePrice` Schaltfläche.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-198">As discussed earlier in this tutorial, we need to raise an event in the master page whenever the user clicks the `DoublePrice` Button.</span></span> <span data-ttu-id="c1c8b-199">Ein Ereignis ist eine Möglichkeit für eine Klasse (ein Ereignisherausgeber), ein anderes eine Reihe von anderen Klassen (Ereignisabonnenten) benachrichtigt wird, die etwas Interessantes aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-199">An event is a way for one class (an event publisher) to notify another a set of other classes (the event subscribers) that something interesting has occurred.</span></span> <span data-ttu-id="c1c8b-200">In diesem Beispiel wird die Gestaltungsvorlage der Ereignisherausgeber; Diese Inhaltsseiten für, wenn interessieren die `DoublePrice` geklickt wird als Abonnenten.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-200">In this example, the master page is the event publisher; those content pages that care about when the `DoublePrice` Button is clicked are the subscribers.</span></span>

<span data-ttu-id="c1c8b-201">Eine Klasse abonniert ein Ereignis durch das Erstellen einer *Ereignishandler*, dies ist eine Methode, die als Antwort auf ausgelösten Ereignisses ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-201">A class subscribes to an event by creating an *event handler*, which is a method that is executed in response to the event being raised.</span></span> <span data-ttu-id="c1c8b-202">Der Verleger definiert die Ereignisse, die er durch definieren löst einer *Ereignisdelegaten*.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-202">The publisher defines the events he raises by defining an *event delegate*.</span></span> <span data-ttu-id="c1c8b-203">Der Ereignisdelegat gibt an, welche Eingabeparameter der Ereignishandler zustimmen muss.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-203">The event delegate specifies what input parameters the event handler must accept.</span></span> <span data-ttu-id="c1c8b-204">In .NET Framework Ereignisdelegaten keinen Wert zurückgeben und akzeptieren zwei Eingabeparameter:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-204">In the .NET Framework, event delegates do not return any value and accept two input parameters:</span></span>

- <span data-ttu-id="c1c8b-205">Ein `Object`, identifiziert die Ereignisquelle und</span><span class="sxs-lookup"><span data-stu-id="c1c8b-205">An `Object`, which identifies the event source, and</span></span>
- <span data-ttu-id="c1c8b-206">Eine abgeleitete Klasse`System.EventArgs`</span><span class="sxs-lookup"><span data-stu-id="c1c8b-206">A class derived from `System.EventArgs`</span></span>

<span data-ttu-id="c1c8b-207">Der zweite Parameter, die an einen Ereignishandler übergeben kann zusätzliche Informationen zum Ereignis enthalten.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-207">The second parameter passed to an event handler can include additional information about the event.</span></span> <span data-ttu-id="c1c8b-208">Während die Base `EventArgs` Klasse übergibt nicht auf alle Informationen, die .NET Framework enthält eine Reihe von Klassen, mit denen erweitert `EventArgs` und umfasst zusätzliche Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-208">While the base `EventArgs` class does not pass along any information, the .NET Framework includes a number of classes that extend `EventArgs` and encompass additional properties.</span></span> <span data-ttu-id="c1c8b-209">Z. B. eine `CommandEventArgs` Instanz an, auf die reagiert Ereignishandler übergeben wird die `Command` Ereignis, und enthält zwei informative Eigenschaften: `CommandArgument` und `CommandName`.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-209">For example, a `CommandEventArgs` instance is passed to event handlers that respond to the `Command` event, and includes two informational properties: `CommandArgument` and `CommandName`.</span></span>

> [!NOTE]
> <span data-ttu-id="c1c8b-210">Weitere Informationen zum Erstellen, durch das Auslösen und Behandeln von Ereignissen finden Sie unter [Ereignissen und Delegaten](https://msdn.microsoft.com/en-us/library/17sde2xt.aspx) und [Ereignisdelegaten in einfachen englische](http://www.codeproject.com/KB/cs/eventdelegates.aspx).</span><span class="sxs-lookup"><span data-stu-id="c1c8b-210">For more information on creating, raising, and handling events, see [Events and Delegates](https://msdn.microsoft.com/en-us/library/17sde2xt.aspx) and [Event Delegates in Simple English](http://www.codeproject.com/KB/cs/eventdelegates.aspx).</span></span>


<span data-ttu-id="c1c8b-211">Zum definieren ein Ereignisses, verwenden die folgende Syntax:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-211">To define an event use the following syntax:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample6.cs)]

<span data-ttu-id="c1c8b-212">Da wir brauchen nur auf die Seite Inhalte warnen, wenn der Benutzer geklickt hat die `DoublePrice` Schaltfläche und müssen nicht auf zusätzliche Informationen zu übergeben, können wir den Ereignisdelegaten `EventHandler`, definiert einen Ereignishandler, die akzeptiert, als die zweite der Parameter ein Objekt des Typs `System.EventArgs`.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-212">Because we only need to alert the content page when the user has clicked the `DoublePrice` Button and do not need to pass along any other additional information, we can use the event delegate `EventHandler`, which defines an event handler that accepts as its second parameter an object of type `System.EventArgs`.</span></span> <span data-ttu-id="c1c8b-213">Um das Ereignis in die Masterseite zu erstellen, fügen Sie auf der Masterseite Code-Behind-Klasse die folgende Codezeile hinzu:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-213">To create the event in the master page, add the following line of code to the master page's code-behind class:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample7.cs)]

<span data-ttu-id="c1c8b-214">Der obige Code Fügt ein öffentliches Ereignis auf der Masterseite mit dem Namen `PricesDoubled`.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-214">The above code adds a public event to the master page named `PricesDoubled`.</span></span> <span data-ttu-id="c1c8b-215">Jetzt müssen wir lösen Sie dieses Ereignis nach dem verdoppelt die Preise aufweisen.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-215">We now need to raise this event after the prices have been doubled.</span></span> <span data-ttu-id="c1c8b-216">Verwenden zum Auslösen ein Ereignisses die folgende Syntax:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-216">To raise an event use the following syntax:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample8.cs)]

<span data-ttu-id="c1c8b-217">Wobei *Absender* und *EventArgs* sind die Werte, die an den Abonnenten-Ereignishandler übergeben werden sollen.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-217">Where *sender* and *eventArgs* are the values you want to pass to the subscriber's event handler.</span></span>

<span data-ttu-id="c1c8b-218">Update der `DoublePrice` `Click` -Ereignishandler durch den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-218">Update the `DoublePrice` `Click` event handler with the following code:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample9.cs)]

<span data-ttu-id="c1c8b-219">Wie zuvor die `Click` Ereignishandler startet durch Aufrufen der `DoublePricesDataSource` SqlDataSource-Steuerelement `Update` Methode, um die Preise aller Produkte doppelklicken.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-219">As before, the `Click` event handler starts by calling the `DoublePricesDataSource` SqlDataSource control's `Update` method to double the prices of all products.</span></span> <span data-ttu-id="c1c8b-220">Im Anschluss an, dass zwei Ergänzungen an den Ereignishandler vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-220">Following that there are two additions to the event handler.</span></span> <span data-ttu-id="c1c8b-221">Zunächst wird die `RecentProducts` GridView Daten werden aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-221">First, the `RecentProducts` GridView's data is refreshed.</span></span> <span data-ttu-id="c1c8b-222">Diese GridView Masterseite hinzugefügt wurde, in dem vorherigen Lernprogramm und zeigt die fünf zuletzt hinzugefügten Produkte.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-222">This GridView was added to the master page in the preceding tutorial and displays the five most recently-added products.</span></span> <span data-ttu-id="c1c8b-223">Wir müssen dieses Raster zu aktualisieren, sodass sie die gerade verdoppelt Preise für diese fünf Produkte angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-223">We need to refresh this grid so that it shows the just-doubled prices for these five products.</span></span> <span data-ttu-id="c1c8b-224">Nach, dass die `PricesDoubled` Ereignis wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-224">Following that, the `PricesDoubled` event is raised.</span></span> <span data-ttu-id="c1c8b-225">Ein Verweis auf die master-Seite selbst (`this`) wird an den Ereignishandler gesendet, die Ereignisquelle sowie ein leeres `EventArgs` Objekt gesendet wird, als die Ereignisargumente.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-225">A reference to the master page itself (`this`) is sent to the event handler as the event source and an empty `EventArgs` object is sent as the event arguments.</span></span>

## <a name="step-4-handling-the-event-in-the-content-page"></a><span data-ttu-id="c1c8b-226">Schritt 4: Behandlung des Ereignisses in der Inhaltsseite</span><span class="sxs-lookup"><span data-stu-id="c1c8b-226">Step 4: Handling the Event in the Content Page</span></span>

<span data-ttu-id="c1c8b-227">Zu diesem Zeitpunkt die Gestaltungsvorlage löst die `PricesDoubled` Ereignis immer die `DoublePrice` Button-Steuerelement geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-227">At this point the master page raises its `PricesDoubled` event whenever the `DoublePrice` Button control is clicked.</span></span> <span data-ttu-id="c1c8b-228">Allerdings Dies ist nur die Hälfte der Kampf – wir benötigen Sie für die Ereignisbehandlung in den Abonnenten.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-228">However, this is only half the battle - we still need to handle the event in the subscriber.</span></span> <span data-ttu-id="c1c8b-229">Dies umfasst zwei Schritte: Erstellen den Ereignishandler und Ereignis Verkabelungscode hinzufügen, sodass der Ereignishandler ausgeführt wird, wenn das Ereignis ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-229">This involves two steps: creating the event handler and adding event wiring code so that when the event is raised the event handler is executed.</span></span>

<span data-ttu-id="c1c8b-230">Erstellen einen Ereignishandler namens zunächst `Master_PricesDoubled`.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-230">Start by creating an event handler named `Master_PricesDoubled`.</span></span> <span data-ttu-id="c1c8b-231">Aufgrund wie wir definiert die `PricesDoubled` Ereignis in die Masterseite muss der Ereignishandler zwei Eingabeparameter Typen `Object` und `EventArgs`zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-231">Because of how we defined the `PricesDoubled` event in the master page the event handler's two input parameters must be of types `Object` and `EventArgs`, respectively.</span></span> <span data-ttu-id="c1c8b-232">Im Aufruf Ereignis-Handler die `ProductsGrid` GridView `DataBind` Methode, um die Daten in den Entwurfsbereich zu binden.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-232">In the event handler call the `ProductsGrid` GridView's `DataBind` method to rebind the data to the grid.</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample10.cs)]

<span data-ttu-id="c1c8b-233">Der Code für den Ereignishandler ist abgeschlossen, aber wir noch auf der Masterseite von Netzwerkdaten `PricesDoubled` Ereignis an diesen Ereignishandler.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-233">The code for the event handler is complete but we've yet to wire the master page's `PricesDoubled` event to this event handler.</span></span> <span data-ttu-id="c1c8b-234">Der Abonnent verbindet ein Ereignis mit einem Ereignishandler, über die folgende Syntax:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-234">The subscriber wires an event to an event handler via the following syntax:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample11.cs)]

<span data-ttu-id="c1c8b-235">*Publisher* ist ein Verweis auf das Objekt, das das Ereignis bietet *EventName*, und *MethodName* ist der Name des ereignishandlers definiert, in dem Abonnenten, die entsprechende Signatur aufweist um die *EventDelegate*.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-235">*publisher* is a reference to the object that offers the event *eventName*, and *methodName* is the name of the event handler defined in the subscriber that has a signature corresponding to the *eventDelegate*.</span></span> <span data-ttu-id="c1c8b-236">Das heißt, wenn das Ereignis Delegieren ist `EventHandler`, klicken Sie dann *MethodName* muss der Namen einer Methode auf dem Abonnenten, die keinen Wert zurückgibt und nimmt zwei Eingabeparameter Typen `Object` und `EventArgs`, bzw.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-236">In other words, if the event delegate is `EventHandler`, then *methodName* must be the name of a method in the subscriber that does not return a value and accepts two input parameters of types `Object` and `EventArgs`, respectively.</span></span>

<span data-ttu-id="c1c8b-237">Diese Verkabelung der Ereigniscode muss auf dem ersten Besuch der Seite und die nachfolgenden Postbacks ausgeführt werden und sollte auftreten, zu einem Zeitpunkt im Lebenszyklus Seite, die vor, wenn das Ereignis ausgelöst werden kann.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-237">This event wiring code must be executed on the first page visit and subsequent postbacks and should occur at a point in the page lifecycle that precedes when the event may be raised.</span></span> <span data-ttu-id="c1c8b-238">Ein guter Zeitpunkt hinzuzufügende Verkabelung der Ereigniscode ist in der Phase PreInit sehr frühen Zeitpunkt im Lebenszyklus Seite angezeigt.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-238">A good time to add event wiring code is in the PreInit stage, which occurs very early in the page lifecycle.</span></span>

<span data-ttu-id="c1c8b-239">Open `~/Admin/Products.aspx` , und erstellen Sie eine `Page_PreInit` Ereignishandler:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-239">Open `~/Admin/Products.aspx` and create a `Page_PreInit` event handler:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample12.cs)]

<span data-ttu-id="c1c8b-240">Um diesen Verkabelungscode abzuschließen benötigen wir einen programmgesteuerte Verweis auf die Gestaltungsvorlage aus der Seite Inhalt.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-240">In order to complete this wiring code we need a programmatic reference to the master page from the content page.</span></span> <span data-ttu-id="c1c8b-241">Wie im vorherigen Lernprogramm erwähnt, gibt es zwei Möglichkeiten:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-241">As noted in the previous tutorial, there are two ways to do this:</span></span>

- <span data-ttu-id="c1c8b-242">Durch die lose typisierten Umwandlung `Page.Master` Eigenschaft in den entsprechenden Masterseite-Typ oder</span><span class="sxs-lookup"><span data-stu-id="c1c8b-242">By casting the loosely-typed `Page.Master` property to the appropriate master page type, or</span></span>
- <span data-ttu-id="c1c8b-243">Durch Hinzufügen einer `@MasterType` -Direktive in der `.aspx` Seite, und klicken Sie dann mit der stark typisierten `Master` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-243">By adding a `@MasterType` directive in the `.aspx` page and then using the strongly-typed `Master` property.</span></span>

<span data-ttu-id="c1c8b-244">Ermöglicht die Verwendung des zweiten Ansatzes.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-244">Let's use the latter approach.</span></span> <span data-ttu-id="c1c8b-245">Fügen Sie die folgenden `@MasterType` -Direktive am Anfang der deklarativen Seitenmarkup:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-245">Add the following `@MasterType` directive to the top of the page's declarative markup:</span></span>


[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample13.aspx)]

<span data-ttu-id="c1c8b-246">Fügen Sie den folgenden Ereignis Verkabelungscode in die `Page_PreInit` Ereignishandler:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-246">Then add the following event wiring code in the `Page_PreInit` event handler:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample14.cs)]

<span data-ttu-id="c1c8b-247">Mit diesem Code werden die GridView auf der Inhaltsseite aktualisiert wird immer die `DoublePrice` Schaltfläche geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-247">With this code in place, the GridView in the content page is refreshed whenever the `DoublePrice` Button is clicked.</span></span>

<span data-ttu-id="c1c8b-248">Abbildung 8 und 9 veranschaulichen dieses Verhalten.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-248">Figures 8 and 9 illustrate this behavior.</span></span> <span data-ttu-id="c1c8b-249">Abbildung 8 zeigt die Seite beim ersten Mal besucht hat.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-249">Figure 8 shows the page when first visited.</span></span> <span data-ttu-id="c1c8b-250">Beachten Sie, die Werte in den beiden Preis der `RecentProducts` GridView (in der linken Spalte der Masterseite) und die `ProductsGrid` GridView (auf der Inhaltsseite).</span><span class="sxs-lookup"><span data-stu-id="c1c8b-250">Note that price values in both the `RecentProducts` GridView (in the left column of the master page) and the `ProductsGrid` GridView (in the content page).</span></span> <span data-ttu-id="c1c8b-251">Abbildung 9 zeigt die gleiche Seite unmittelbar nach der `DoublePrice` Schaltfläche geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-251">Figure 9 shows the same screen immediately after the `DoublePrice` Button has been clicked.</span></span> <span data-ttu-id="c1c8b-252">Wie Sie sehen können, werden die neuen Preise sofort in beide GridViews wiedergegeben.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-252">As you can see, the new prices are instantaneously reflected in both GridViews.</span></span>


<span data-ttu-id="c1c8b-253">[![Die anfängliche preiswerten](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-253">[![The Initial Price Values](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span></span>

<span data-ttu-id="c1c8b-254">**Abbildung 08**: die anfänglichen preiswerten ([klicken Sie hier, um das Bild in voller Größe angezeigt](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="c1c8b-254">**Figure 08**: The Initial Price Values  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span></span>


<span data-ttu-id="c1c8b-255">[![Die Just-Doubled Preise werden in der GridViews angezeigt.](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-255">[![The Just-Doubled Prices are Displayed in the GridViews](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span></span>

<span data-ttu-id="c1c8b-256">**Abbildung 09**: The Just-Doubled Preise werden in der GridViews angezeigt ([klicken Sie hier, um das Bild in voller Größe angezeigt](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="c1c8b-256">**Figure 09**: The Just-Doubled Prices are Displayed in the GridViews  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span></span>


## <a name="summary"></a><span data-ttu-id="c1c8b-257">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="c1c8b-257">Summary</span></span>

<span data-ttu-id="c1c8b-258">Im Idealfall einer Masterseite und die Inhaltsseiten vollständig voneinander getrennt sind, und Sie erfordern keine Ebene Interaktion.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-258">Ideally, a master page and its content pages are completely separate from one another and require no level of interaction.</span></span> <span data-ttu-id="c1c8b-259">Jedoch, wenn Sie eine Gestaltungsvorlage oder Inhaltsseite, das Daten anzeigt, die über die Gestaltungsvorlage oder Inhaltsseite geändert werden können, müssen Sie möglicherweise die Masterseite der Inhaltsseite (oder umgekehrt a) Warnung haben Wenn Daten geändert werden, damit die Anzeige aktualisiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-259">However, if you have a master page or content page that displays data that can be modified from the master page or content page, then you may need to have the master page alert the content page (or vice-a-versa) when data is modified so that the display can be updated.</span></span> <span data-ttu-id="c1c8b-260">In dem vorherigen Lernprogramm wurde erläutert, wie eine programmgesteuerte Interaktion mit Gestaltungsvorlage Inhaltsseite verfügen; In diesem Lernprogramm erläutert wir, wie eine Masterseite initiieren die Interaktion.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-260">In the preceding tutorial we saw how to have a content page programmatically interact with its master page; in this tutorial we looked at how to have a master page initiate the interaction.</span></span>

<span data-ttu-id="c1c8b-261">Während Sie den Inhalt oder die Masterseite programmgesteuerte Interaktion zwischen einem Inhalt und die Masterseite stammen kann, hängt verwendete Interaktionsmuster der Ursprung ab.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-261">While programmatic interaction between a content and master page can originate from either the content or master page, the interaction pattern used depends on the origination.</span></span> <span data-ttu-id="c1c8b-262">Die Unterschiede werden in den Umstand zurückzuführen, dass eine Inhaltsseite eine einzelne Masterseite enthält, aber einer Masterseite kann viele verschiedene Inhaltsseiten.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-262">The differences are due to the fact that a content page has a single master page, but a master page can have many different content pages.</span></span> <span data-ttu-id="c1c8b-263">Anstatt eine direkte Interaktion mit einer Inhaltsseite Gestaltungsvorlage ist ein besserer Ansatz die Masterseite Auslösen eines Ereignisses, um zu signalisieren, dass eine Aktion stattgefunden hat.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-263">Rather than having a master page directly interact with a content page, a better approach is to have the master page raise an event to signal that some action has taken place.</span></span> <span data-ttu-id="c1c8b-264">Diese Inhaltsseiten, dass die Aktion von Bedeutung sind Ereignishandler erstellen kann.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-264">Those content pages that care about the action can create event handlers.</span></span>

<span data-ttu-id="c1c8b-265">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="c1c8b-265">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="c1c8b-266">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="c1c8b-266">Further Reading</span></span>

<span data-ttu-id="c1c8b-267">Weitere Informationen zu den Themen in diesem Lernprogramm erläutert finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="c1c8b-267">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="c1c8b-268">Zugreifen auf und Aktualisieren von Daten in ASP.NET</span><span class="sxs-lookup"><span data-stu-id="c1c8b-268">Accessing and Updating Data in ASP.NET</span></span>](http://aspnet.4guysfromrolla.com/articles/011106-1.aspx)
- [<span data-ttu-id="c1c8b-269">Ereignisse und Delegaten</span><span class="sxs-lookup"><span data-stu-id="c1c8b-269">Events and Delegates</span></span>](https://msdn.microsoft.com/en-us/library/17sde2xt.aspx)
- [<span data-ttu-id="c1c8b-270">Übergeben von Informationen zwischen dem Inhalt und Masterseiten</span><span class="sxs-lookup"><span data-stu-id="c1c8b-270">Passing Information Between Content and Master Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/013107-1.aspx)
- [<span data-ttu-id="c1c8b-271">Arbeiten mit Daten in ASP.NET-Lernprogramme</span><span class="sxs-lookup"><span data-stu-id="c1c8b-271">Working with Data in ASP.NET Tutorials</span></span>](../../data-access/index.md)

### <a name="about-the-author"></a><span data-ttu-id="c1c8b-272">Informationen zum Autor</span><span class="sxs-lookup"><span data-stu-id="c1c8b-272">About the Author</span></span>

<span data-ttu-id="c1c8b-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor mehrerer ASP/ASP.NET-Büchern und Gründer von 4GuysFromRolla.com arbeitet mit Microsoft-Web-Technologien seit 1998.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="c1c8b-274">Scott fungiert als ein unabhängiger Berater, Trainer und Writer.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-274">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="c1c8b-275">Sein neueste Buch wird [ *Sams Schulen selbst ASP.NET 3.5 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="c1c8b-275">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="c1c8b-276">Scott erreicht werden kann, zur [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com) oder über seinen Blog unter [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="c1c8b-276">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="c1c8b-277">Besonderen Dank an</span><span class="sxs-lookup"><span data-stu-id="c1c8b-277">Special Thanks To</span></span>

<span data-ttu-id="c1c8b-278">Diese Reihe von Lernprogrammen wurde durch viele nützliche Bearbeiter überprüft.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-278">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="c1c8b-279">Lead Prüfer für dieses Lernprogramm wurde Suchi Banerjee.</span><span class="sxs-lookup"><span data-stu-id="c1c8b-279">Lead reviewer for this tutorial was Suchi Banerjee.</span></span> <span data-ttu-id="c1c8b-280">Meine bevorstehende MSDN-Artikel Überprüfen von Interesse?</span><span class="sxs-lookup"><span data-stu-id="c1c8b-280">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="c1c8b-281">Wenn dies der Fall ist, löschen Sie mich zeilenweise[mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-281">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="c1c8b-282">[Zurück](interacting-with-the-master-page-from-the-content-page-cs.md)
[Weiter](master-pages-and-asp-net-ajax-cs.md)</span><span class="sxs-lookup"><span data-stu-id="c1c8b-282">[Previous](interacting-with-the-master-page-from-the-content-page-cs.md)
[Next](master-pages-and-asp-net-ajax-cs.md)</span></span>
