---
uid: aspnet/overview/developing-apps-with-windows-azure/maintainable-azure-websites-managing-change-and-scale
title: "Praktische Übungseinheit: Azure-Websites verwaltbar: verwalten, ändern und Skalierung | Microsoft Docs"
author: rick-anderson
description: Microsoft Azure erleichtert das Erstellen und Bereitstellen von Websites bis hin zur Produktion. Aber Sie sind nicht fertig, sobald die Anwendung aktiv ist, Sie sind nur erste Schritte! Sie...
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/16/2014
ms.topic: article
ms.assetid: ecfd0eb4-c4ad-44e6-9db9-a2a66611ff6a
ms.technology: 
ms.prod: .net-framework
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/maintainable-azure-websites-managing-change-and-scale
msc.type: authoredcontent
ms.openlocfilehash: 3d24c633368abc14efcd9fcf200a4d05c5b182c9
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/24/2018
---
<a name="hands-on-lab-maintainable-azure-websites-managing-change-and-scale"></a><span data-ttu-id="386c8-105">Praktische Übungseinheit: Azure-Websites verwaltbar: verwalten, ändern und Skalierung</span><span class="sxs-lookup"><span data-stu-id="386c8-105">Hands on Lab: Maintainable Azure Websites: Managing Change and Scale</span></span>
====================
<span data-ttu-id="386c8-106">durch [Web Lager Team](https://twitter.com/webcamps)</span><span class="sxs-lookup"><span data-stu-id="386c8-106">by [Web Camps Team](https://twitter.com/webcamps)</span></span>

[<span data-ttu-id="386c8-107">Herunterladen von Web-Lager Training Kit</span><span class="sxs-lookup"><span data-stu-id="386c8-107">Download Web Camps Training Kit</span></span>](http://aka.ms/webcamps-training-kit)

> <span data-ttu-id="386c8-108">Microsoft Azure erleichtert das Erstellen und Bereitstellen von Websites bis hin zur Produktion.</span><span class="sxs-lookup"><span data-stu-id="386c8-108">Microsoft Azure makes it easy to build and deploy websites to production.</span></span> <span data-ttu-id="386c8-109">Aber Sie sind nicht fertig, sobald die Anwendung aktiv ist, Sie sind nur erste Schritte!</span><span class="sxs-lookup"><span data-stu-id="386c8-109">But you're not done when your application is live, you're just getting started!</span></span> <span data-ttu-id="386c8-110">Sie müssen die veränderten Anforderungen, Datenbankupdates, Skalierung und mehr zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="386c8-110">You'll need to handle changing requirements, database updates, scale, and more.</span></span> <span data-ttu-id="386c8-111">Glücklicherweise verfügt Azure App Service Sie behandelt, mit viele Features können Sie die reibungslose Ausführung Websites zu halten.</span><span class="sxs-lookup"><span data-stu-id="386c8-111">Fortunately, Azure App Service has you covered, with plenty of features to help you keep your sites running smoothly.</span></span>
> 
> <span data-ttu-id="386c8-112">Azure bietet sichere und flexible Entwicklung, Bereitstellung und Skalierungsoptionen für jede Größe Web-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="386c8-112">Azure offers secure and flexible development, deployment and scaling options for any size web application.</span></span> <span data-ttu-id="386c8-113">Nutzen Sie vorhandene Tools zum Erstellen und Bereitstellen von Anwendungen ohne den Aufwand der Verwaltung der Infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="386c8-113">Leverage your existing tools to create and deploy applications without the hassle of managing infrastructure.</span></span>
> 
> <span data-ttu-id="386c8-114">Bereitstellen einer Produktions-Web-Anwendung selbst in Minuten einfache Bereitstellung von Inhalten, die mit Ihrem bevorzugten Entwicklungstool erstellt.</span><span class="sxs-lookup"><span data-stu-id="386c8-114">Provision a production web application yourself in minutes by easily deploying content created using your favorite development tool.</span></span> <span data-ttu-id="386c8-115">Sie können eine vorhandene Website direkt aus der quellcodeverwaltung mit Unterstützung für bereitstellen **Git**, **GitHub**, **Bitbucket**, **TFS**, und sogar  **DropBox**.</span><span class="sxs-lookup"><span data-stu-id="386c8-115">You can deploy an existing site directly from source control with support for **Git**, **GitHub**, **Bitbucket**, **TFS**, and even **DropBox**.</span></span> <span data-ttu-id="386c8-116">Bereitstellen direkt über Ihre bevorzugte IDE oder über Skripts mit **PowerShell** in Windows oder **CLI** Tools auf allen Betriebssystemen ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="386c8-116">Deploy directly from your favorite IDE or from scripts using **PowerShell** in Windows or **CLI** tools running on any OS.</span></span> <span data-ttu-id="386c8-117">Nach der Bereitstellung zu halten Sie Ihre Standorte mit Unterstützung für die dauerhafte Bereitstellung ständig auf dem neuesten Stand.</span><span class="sxs-lookup"><span data-stu-id="386c8-117">Once deployed, keep your sites constantly up-to-date with support for continuous deployment.</span></span>
> 
> <span data-ttu-id="386c8-118">Azure bietet skalierbare und robuste cloudspeicher, Sicherung und Wiederherstellung Lösungen für alle Daten, Groß oder klein.</span><span class="sxs-lookup"><span data-stu-id="386c8-118">Azure provides scalable, durable cloud storage, backup, and recovery solutions for any data, big or small.</span></span> <span data-ttu-id="386c8-119">Können Sie Anwendungen Speicherdienste, z. B. Tabellen, Blobs und SQL-Datenbanken zu einer produktiven Umgebung bereitstellen möchten, die Skalierung der Anwendung in der Cloud.</span><span class="sxs-lookup"><span data-stu-id="386c8-119">When deploying applications to a production environment, storage services such as Tables, Blobs and SQL Databases, help you scale your application in the cloud.</span></span>
> 
> <span data-ttu-id="386c8-120">Mit SQL-Datenbanken ist es wichtig, Ihre produktive Datenbank aktuell zu halten, wenn Sie neue Versionen der Anwendung bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="386c8-120">With SQL Databases, it is important to keep your productive database up-to-date when deploying new versions of your application.</span></span> <span data-ttu-id="386c8-121">Dank an **Entity Framework Code First-Migrationen**, um Ihre Umgebungen in Minuten aktualisieren wurde die Entwicklung und Bereitstellung Ihres Datenmodells vereinfacht.</span><span class="sxs-lookup"><span data-stu-id="386c8-121">Thanks to **Entity Framework Code First Migrations**, the development and deployment of your data model has been simplified to update your environments in minutes.</span></span> <span data-ttu-id="386c8-122">Dieser praktischen Übungseinheit werden Sie in den anderen Themen an, die auftreten können, wenn Sie Ihre Web-app in produktionsumgebungen in Microsoft Azure bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="386c8-122">This hands-on lab will show you the different topics you could encounter when deploying your web app to production environments in Microsoft Azure.</span></span>
> 
> <span data-ttu-id="386c8-123">Alle Beispielcode und Codeausschnitte sind im Web Lager Training Kit unter enthalten [http://aka.ms/webcamps-training-kit](http://aka.ms/webcamps-training-kit).</span><span class="sxs-lookup"><span data-stu-id="386c8-123">All sample code and snippets are included in the Web Camps Training Kit, available at [http://aka.ms/webcamps-training-kit](http://aka.ms/webcamps-training-kit).</span></span>
> 
> <span data-ttu-id="386c8-124">Weitere ausführliche Beschreibung in diesem Thema finden Sie unter der [Building Real-World Cloud-Apps mit Azure-e-Book](building-real-world-cloud-apps-with-windows-azure/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="386c8-124">For more in-depth coverage of this topic, see the [Building Real-World Cloud Apps with Azure e-book](building-real-world-cloud-apps-with-windows-azure/introduction.md).</span></span>


<a id="Overview"></a>
## <a name="overview"></a><span data-ttu-id="386c8-125">Übersicht</span><span class="sxs-lookup"><span data-stu-id="386c8-125">Overview</span></span>

<a id="Objectives"></a>
### <a name="objectives"></a><span data-ttu-id="386c8-126">Ziele</span><span class="sxs-lookup"><span data-stu-id="386c8-126">Objectives</span></span>

<span data-ttu-id="386c8-127">In dieser praktischen Übungseinheit erfahren Sie, wie Sie:</span><span class="sxs-lookup"><span data-stu-id="386c8-127">In this hands-on lab, you will learn how to:</span></span>

- <span data-ttu-id="386c8-128">Aktivieren Sie die Entity Framework-Migrationen mit einem vorhandenen Modell</span><span class="sxs-lookup"><span data-stu-id="386c8-128">Enable Entity Framework Migrations with an existing model</span></span>
- <span data-ttu-id="386c8-129">Aktualisieren des Objektmodells und die Datenbank entsprechend mithilfe von Entity Framework-Migrationen</span><span class="sxs-lookup"><span data-stu-id="386c8-129">Update the object model and database accordingly using Entity Framework Migrations</span></span>
- <span data-ttu-id="386c8-130">Bereitstellen Sie auf Azure App Service mithilfe von Git</span><span class="sxs-lookup"><span data-stu-id="386c8-130">Deploy to Azure App Service using Git</span></span>
- <span data-ttu-id="386c8-131">Rollback zu einer vorherigen Bereitstellung über das Azure-Verwaltungsportal</span><span class="sxs-lookup"><span data-stu-id="386c8-131">Rollback to a previous deployment using the Azure Management portal</span></span>
- <span data-ttu-id="386c8-132">Mit der Skalierung einer Web-app in Azure-Speicher</span><span class="sxs-lookup"><span data-stu-id="386c8-132">Use Azure Storage to scale a web app</span></span>
- <span data-ttu-id="386c8-133">Konfigurieren Sie die automatische Skalierung für eine Web-app mit dem Azure-Verwaltungsportal</span><span class="sxs-lookup"><span data-stu-id="386c8-133">Configure auto-scaling for a web app using the Azure Management Portal</span></span>
- <span data-ttu-id="386c8-134">Erstellen Sie und konfigurieren Sie ein Testprojekt Auslastungstest in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="386c8-134">Create and configure a load test project in Visual Studio</span></span>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a><span data-ttu-id="386c8-135">Erforderliche Komponenten</span><span class="sxs-lookup"><span data-stu-id="386c8-135">Prerequisites</span></span>

<span data-ttu-id="386c8-136">Folgendes ist erforderlich, um diese praktische Übungseinheit:</span><span class="sxs-lookup"><span data-stu-id="386c8-136">The following is required to complete this hands-on lab:</span></span>

- <span data-ttu-id="386c8-137">[Visual Studio Express 2013 für Web](https://www.microsoft.com/visualstudio/) oder höher</span><span class="sxs-lookup"><span data-stu-id="386c8-137">[Visual Studio Express 2013 for Web](https://www.microsoft.com/visualstudio/) or greater</span></span>
- [<span data-ttu-id="386c8-138">Azure SDK für .NET 2.2</span><span class="sxs-lookup"><span data-stu-id="386c8-138">Azure SDK for .NET 2.2</span></span>](https://www.microsoft.com/windowsazure/sdk/)
- [<span data-ttu-id="386c8-139">GIT-Versionskontrollsystem</span><span class="sxs-lookup"><span data-stu-id="386c8-139">GIT Version Control System</span></span>](http://git-scm.com/download)
- <span data-ttu-id="386c8-140">Microsoft Azure-Abonnement</span><span class="sxs-lookup"><span data-stu-id="386c8-140">A Microsoft Azure subscription</span></span> 

    - <span data-ttu-id="386c8-141">Melden Sie sich für eine [kostenlose Testversion](http://aka.ms/watk-freetrial)</span><span class="sxs-lookup"><span data-stu-id="386c8-141">Sign up for a [Free Trial](http://aka.ms/watk-freetrial)</span></span>
    - <span data-ttu-id="386c8-142">Wenn Sie eine Visual Studio Professional Test Professional, Premium oder Ultimate mit MSDN oder MSDN-Plattformen Abonnenten sind, aktivieren Ihrer [MSDN Benefit](http://aka.ms/watk-msdn) jetzt zu starten, entwickeln und Testen von in Azure</span><span class="sxs-lookup"><span data-stu-id="386c8-142">If you are a Visual Studio Professional, Test Professional, Premium or Ultimate with MSDN or MSDN Platforms subscriber, activate your [MSDN benefit](http://aka.ms/watk-msdn) now to start developing and testing on Azure</span></span>
    - <span data-ttu-id="386c8-143">[BizSpark](http://aka.ms/watk-bizspark) Mitglieder erhalten automatisch die Azure nutzen, über die Visual Studio Ultimate mit MSDN-Abonnements</span><span class="sxs-lookup"><span data-stu-id="386c8-143">[BizSpark](http://aka.ms/watk-bizspark) members automatically receive the Azure benefit through their Visual Studio Ultimate with MSDN subscriptions</span></span>
    - <span data-ttu-id="386c8-144">Mitglieder der [Microsoft Partner Network](http://aka.ms/watk-mpn) Cloud Essentials-Programms erhalten monatlichen Azure gebührenfreie Gutschriften</span><span class="sxs-lookup"><span data-stu-id="386c8-144">Members of the [Microsoft Partner Network](http://aka.ms/watk-mpn) Cloud Essentials program receive monthly Azure credits at no charge</span></span>

<a id="Setup"></a>
### <a name="setup"></a><span data-ttu-id="386c8-145">Setup</span><span class="sxs-lookup"><span data-stu-id="386c8-145">Setup</span></span>

<span data-ttu-id="386c8-146">Um die Übungen in dieser praktischen Übungseinheit auszuführen, müssen Sie zunächst die Umgebung einrichten.</span><span class="sxs-lookup"><span data-stu-id="386c8-146">In order to run the exercises in this hands-on lab, you will need to set up your environment first.</span></span>

1. <span data-ttu-id="386c8-147">Öffnen Sie Windows-Explorer und Navigieren in des Labors **Quelle** Ordner.</span><span class="sxs-lookup"><span data-stu-id="386c8-147">Open Windows Explorer and browse to the lab's **Source** folder.</span></span>
2. <span data-ttu-id="386c8-148">Mit der rechten Maustaste auf **"Setup.cmd"** , und wählen Sie **als Administrator ausführen** um den Setupvorgang zu starten, die Ihrer Umgebung konfigurieren und installieren die Visual Studio-Codeausschnitte für diese Übungseinheit.</span><span class="sxs-lookup"><span data-stu-id="386c8-148">Right-click on **Setup.cmd** and select **Run as administrator** to launch the setup process that will configure your environment and install the Visual Studio code snippets for this lab.</span></span>
3. <span data-ttu-id="386c8-149">Wenn das Dialogfeld "Benutzerkontensteuerung" angezeigt wird, bestätigen Sie die Aktion aus, um den Vorgang fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="386c8-149">If the User Account Control dialog is shown, confirm the action to proceed.</span></span>

> [!NOTE]
> <span data-ttu-id="386c8-150">Stellen Sie sicher, dass Sie alle Abhängigkeiten für diese Umgebung aktiviert haben, bevor Sie das Setup ausführen.</span><span class="sxs-lookup"><span data-stu-id="386c8-150">Make sure you have checked all the dependencies for this lab before running the setup.</span></span>


<a id="CodeSnippets"></a>
### <a name="using-the-code-snippets"></a><span data-ttu-id="386c8-151">Verwenden die Codeausschnitte</span><span class="sxs-lookup"><span data-stu-id="386c8-151">Using the Code Snippets</span></span>

<span data-ttu-id="386c8-152">In der Lab-Dokument werden Sie aufgefordert, Codeblöcke einfügen.</span><span class="sxs-lookup"><span data-stu-id="386c8-152">Throughout the lab document, you will be instructed to insert code blocks.</span></span> <span data-ttu-id="386c8-153">Der Einfachheit halber die meisten dieser Code dient als Visual Studio-Codeausschnitte, die Sie in Visual Studio 2013 zu vermeiden, dass sie manuell hinzufügen aus zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="386c8-153">For your convenience, most of this code is provided as Visual Studio Code Snippets, which you can access from within Visual Studio 2013 to avoid having to add it manually.</span></span>

> [!NOTE]
> <span data-ttu-id="386c8-154">Jede Übung wird eine beginnend Projektmappe befindet sich im beiliegen der **beginnen** Ordner der Übung, die Ihnen ermöglicht, jede Übung unabhängig von den anderen folgen.</span><span class="sxs-lookup"><span data-stu-id="386c8-154">Each exercise is accompanied by a starting solution located in the **Begin** folder of the exercise that allows you to follow each exercise independently of the others.</span></span> <span data-ttu-id="386c8-155">Denken Sie daran, dass die Codeausschnitte, die während einer Übung hinzugefügt werden in diese Lösungen starten fehlen, werden und funktionieren möglicherweise nicht, bis die Übung abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="386c8-155">Please be aware that the code snippets that are added during an exercise are missing from these starting solutions and may not work until you have completed the exercise.</span></span> <span data-ttu-id="386c8-156">In den Quellcode für eine Übung, finden Sie auch eine **End** Ordner, der durch den Code, der aus den Schritten in der entsprechenden Übung führt Visual Studio-Projektmappe enthält.</span><span class="sxs-lookup"><span data-stu-id="386c8-156">Inside the source code for an exercise, you will also find an **End** folder containing a Visual Studio solution with the code that results from completing the steps in the corresponding exercise.</span></span> <span data-ttu-id="386c8-157">Sie können diese Lösungen als Leitfaden verwenden, wenn Sie weitere Hilfe benötigen, wie Sie mithilfe dieser praktischen Übungseinheit arbeiten.</span><span class="sxs-lookup"><span data-stu-id="386c8-157">You can use these solutions as guidance if you need additional help as you work through this hands-on lab.</span></span>


* * *

<a id="Exercises"></a>
## <a name="exercises"></a><span data-ttu-id="386c8-158">Übungen</span><span class="sxs-lookup"><span data-stu-id="386c8-158">Exercises</span></span>

<span data-ttu-id="386c8-159">Diese praktische Übungseinheit enthält die folgenden Übungen durcharbeiten:</span><span class="sxs-lookup"><span data-stu-id="386c8-159">This hands-on lab includes the following exercises:</span></span>

1. [<span data-ttu-id="386c8-160">Verwenden von Entity Framework-Migrationen</span><span class="sxs-lookup"><span data-stu-id="386c8-160">Using Entity Framework Migrations</span></span>](#Exercise1)
2. [<span data-ttu-id="386c8-161">Bereitstellen einer Web-App in die Stagingumgebung</span><span class="sxs-lookup"><span data-stu-id="386c8-161">Deploying a Web App to Staging</span></span>](#Exercise2)
3. [<span data-ttu-id="386c8-162">Ausführen des Rollbacks für Bereitstellung in der Produktion</span><span class="sxs-lookup"><span data-stu-id="386c8-162">Performing Deployment Rollback in Production</span></span>](#Exercise3)
4. [<span data-ttu-id="386c8-163">Skalierung mit dem Azure-Speicher</span><span class="sxs-lookup"><span data-stu-id="386c8-163">Scaling Using Azure Storage</span></span>](#Exercise4)
5. <span data-ttu-id="386c8-164">[Verwenden zur automatischen Skalierung für Web-Apps](#Exercise5) (Optional für Visual Studio 2013 Ultimate Edition)</span><span class="sxs-lookup"><span data-stu-id="386c8-164">[Using Autoscale for Web Apps](#Exercise5) (Optional for Visual Studio 2013 Ultimate edition)</span></span>

<span data-ttu-id="386c8-165">Geschätzte Zeit zum Abschließen dieser testumgebung: **75 Minuten**</span><span class="sxs-lookup"><span data-stu-id="386c8-165">Estimated time to complete this lab: **75 minutes**</span></span>

> [!NOTE]
> <span data-ttu-id="386c8-166">Wenn Sie Visual Studio zum ersten Mal starten, müssen Sie eine der vordefinierten Einstellungen Sammlungen auswählen.</span><span class="sxs-lookup"><span data-stu-id="386c8-166">When you first start Visual Studio, you must select one of the predefined settings collections.</span></span> <span data-ttu-id="386c8-167">Jede vordefinierte Sammlung dient zur einer bestimmten Entwicklungsstil und Fensterlayouts, Editor-Verhalten, IntelliSense-Codeausschnitte und Optionen des Dialogfelds bestimmt.</span><span class="sxs-lookup"><span data-stu-id="386c8-167">Each predefined collection is designed to match a particular development style and determines window layouts, editor behavior, IntelliSense code snippets, and dialog box options.</span></span> <span data-ttu-id="386c8-168">In dieser Übung wird beschrieben, die Aktionen erforderlich, um eine bestimmte Aufgabe in Visual Studio auszuführen, bei Verwendung der **allgemeine Entwicklungseinstellungen** Auflistung.</span><span class="sxs-lookup"><span data-stu-id="386c8-168">The procedures in this lab describe the actions necessary to accomplish a given task in Visual Studio when using the **General Development Settings** collection.</span></span> <span data-ttu-id="386c8-169">Wählen Sie eine Auflistung von unterschiedlichen Einstellungen für Ihre Entwicklungsumgebung möglicherweise Unterschiede in den Schritten, die Sie berücksichtigen sollten.</span><span class="sxs-lookup"><span data-stu-id="386c8-169">If you choose a different settings collection for your development environment, there may be differences in the steps that you should take into account.</span></span>


<a id="Exercise1"></a>
### <a name="exercise-1-using-entity-framework-migrations"></a><span data-ttu-id="386c8-170">Übung 1: Verwenden von Entity Framework-Migrationen</span><span class="sxs-lookup"><span data-stu-id="386c8-170">Exercise 1: Using Entity Framework Migrations</span></span>

<span data-ttu-id="386c8-171">Wenn Sie eine Anwendung entwickeln, kann Ihr Datenmodell mit der Zeit ändern.</span><span class="sxs-lookup"><span data-stu-id="386c8-171">When you are developing an application, your data model might change over time.</span></span> <span data-ttu-id="386c8-172">Diese Änderungen beeinträchtigen, die das vorhandene Modell in der Datenbank (Wenn Sie eine neue Version erstellen), und es ist wichtig, Ihre Datenbank auf dem neuesten Stand, um Fehler zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="386c8-172">These changes could affect the existing model in your database (if you are creating a new version) and it is important to keep your database up-to-date to prevent errors.</span></span>

<span data-ttu-id="386c8-173">Zur Vereinfachung der Überwachung dieser Änderungen in Ihrem Modell **Entity Framework Code First-Migrationen** automatisch erkennen von Änderungen, die Ihr Modell mit dem Schema verglichen wird, und bestimmte Code zum Aktualisieren der Datenbank generiert Erstellen neuer *Versionen* Ihrer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="386c8-173">To simplify the tracking of these changes in your model, **Entity Framework Code First Migrations** automatically detect changes comparing your model with the database schema and generates specific code to update your database, creating new *versions* of your database.</span></span>

<span data-ttu-id="386c8-174">Diese Übung zeigt Ihnen, zum Aktivieren der **Migrationen** für die Anwendung, und wie Sie leicht erkennen und Generieren von Änderungen, um die Datenbanken zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="386c8-174">This exercise shows you how to enable **Migrations** for your application and how you can easily detect and generate changes to update your databases.</span></span>

<a id="Ex1Task1"></a>
#### <a name="task-1--enabling-migrations"></a><span data-ttu-id="386c8-175">Aufgabe 1: Aktivieren von Migrationen</span><span class="sxs-lookup"><span data-stu-id="386c8-175">Task 1 – Enabling Migrations</span></span>

<span data-ttu-id="386c8-176">In dieser Aufgabe führen Sie durch die Schritte zum Aktivieren der **Entity Framework Code First-Migrationen** auf die **Meister Quiz** Datenbank, ändern das Modell und verstehen, wie diese Änderungen berücksichtigt werden die die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="386c8-176">In this task, you will go through the steps of enabling **Entity Framework Code First Migrations** to the **Geek Quiz** database, changing the model and understanding how those changes are reflected in the database.</span></span>

1. <span data-ttu-id="386c8-177">Öffnen Sie Visual Studio, und öffnen Sie die **GeekQuiz.sln** Projektmappendatei aus **Source\Ex1 UsingEntityFrameworkMigrations\Begin**.</span><span class="sxs-lookup"><span data-stu-id="386c8-177">Open Visual Studio and open the **GeekQuiz.sln** solution file from **Source\Ex1-UsingEntityFrameworkMigrations\Begin**.</span></span>
2. <span data-ttu-id="386c8-178">Erstellen Sie die Projektmappe, um das Herunterladen und Installieren der **NuGet** Abhängigkeiten-Paket.</span><span class="sxs-lookup"><span data-stu-id="386c8-178">Build the solution in order to download and install the **NuGet** package dependencies.</span></span> <span data-ttu-id="386c8-179">Zu diesem Zweck mit der rechten Maustaste in der Projektmappe, und klicken Sie auf **Projektmappe** oder drücken Sie **STRG + UMSCHALT + B**.</span><span class="sxs-lookup"><span data-stu-id="386c8-179">To do this, right-click the solution and click **Build Solution** or press **Ctrl + Shift + B**.</span></span>
3. <span data-ttu-id="386c8-180">Aus der **Tools** in Visual Studio, wählen Sie im Menü **Bibliothekspaket-Manager**, und klicken Sie dann auf **Package Manager Console**.</span><span class="sxs-lookup"><span data-stu-id="386c8-180">From the **Tools** menu in Visual Studio, select **Library Package Manager**, and then click **Package Manager Console**.</span></span>
4. <span data-ttu-id="386c8-181">In der **Package Manager Console**, geben Sie den folgenden Befehl aus, und drücken Sie dann die **EINGABETASTE**.</span><span class="sxs-lookup"><span data-stu-id="386c8-181">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span> <span data-ttu-id="386c8-182">Eine anfängliche Migration basierend auf dem vorhandenen Modell werden erstellt.</span><span class="sxs-lookup"><span data-stu-id="386c8-182">An initial migration based on the existing model will be created.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample1.ps1)]

    <span data-ttu-id="386c8-183">![Aktivieren von Migrationen](maintainable-azure-websites-managing-change-and-scale/_static/image1.png "Migrationen aktivieren")</span><span class="sxs-lookup"><span data-stu-id="386c8-183">![Enabling Migrations](maintainable-azure-websites-managing-change-and-scale/_static/image1.png "Enabling Migrations")</span></span>

    <span data-ttu-id="386c8-184">*Aktivieren von Migrationen*</span><span class="sxs-lookup"><span data-stu-id="386c8-184">*Enabling Migrations*</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-185">Mit diesem Befehl wird eine **Migrationen** Ordner Meister Quiz Projekt mit einer Datei namens **"Configuration.cs"**.</span><span class="sxs-lookup"><span data-stu-id="386c8-185">This command adds a **Migrations** folder to Geek Quiz project that contains a file called **Configuration.cs**.</span></span> <span data-ttu-id="386c8-186">Die **Konfiguration** -Klasse können Sie Migrationen für den Kontext Verhalten konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="386c8-186">The **Configuration** class allows you to configure how Migrations behaves for your context.</span></span>
5. <span data-ttu-id="386c8-187">Bei Migrationen aktiviert, müssen Sie aktualisieren die **Konfiguration** Klasse, um die Datenbank mit den anfänglichen Daten aufgefüllt, **Meister Quiz** erfordert.</span><span class="sxs-lookup"><span data-stu-id="386c8-187">With Migrations enabled, you need to update the **Configuration** class to populate the database with the initial data that **Geek Quiz** requires.</span></span> <span data-ttu-id="386c8-188">Unter **Migrationen**, ersetzen Sie die **"Configuration.cs"** Datei mit dem Element befindet sich der **Source\Assets** Ordner dieser Anleitung.</span><span class="sxs-lookup"><span data-stu-id="386c8-188">Under **Migrations**, replace the **Configuration.cs** file with the one located in the **Source\Assets** folder of this lab.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-189">Da **Migrationen** aufrufen, wird die **Ausgangswert** -Methode mit jedem Datenbankupdate müssen Sie darauf achten, dass die Datensätze in der Datenbank nicht dupliziert werden.</span><span class="sxs-lookup"><span data-stu-id="386c8-189">Since **Migrations** will call the **Seed** method with every database update, you need to be sure that records are not duplicated in the database.</span></span> <span data-ttu-id="386c8-190">Die **AddOrUpdate** Methode hilft doppelte Daten verhindert.</span><span class="sxs-lookup"><span data-stu-id="386c8-190">The **AddOrUpdate** method will help to prevent duplicate data.</span></span>
6. <span data-ttu-id="386c8-191">Um eine anfängliche Migration hinzuzufügen, geben Sie den folgenden Befehl ein, und drücken Sie dann **EINGABETASTE**.</span><span class="sxs-lookup"><span data-stu-id="386c8-191">To add an initial migration, enter the following command and then press **Enter**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-192">Stellen Sie sicher, dass es keine Datenbank mit dem Namen ist &quot;GeekQuizProd&quot; in der LocalDB-Instanz.</span><span class="sxs-lookup"><span data-stu-id="386c8-192">Make sure that there is no database named &quot;GeekQuizProd&quot; in your LocalDB instance.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample2.ps1)]

    <span data-ttu-id="386c8-193">![Hinzufügen von basisschemaänderungen Migrations](maintainable-azure-websites-managing-change-and-scale/_static/image2.png "hinzufügen basisschemaänderungen Migrations")</span><span class="sxs-lookup"><span data-stu-id="386c8-193">![Adding base schema migration](maintainable-azure-websites-managing-change-and-scale/_static/image2.png "Adding base schema migration")</span></span>

    <span data-ttu-id="386c8-194">*Hinzufügen von basisschemaänderungen Migrations*</span><span class="sxs-lookup"><span data-stu-id="386c8-194">*Adding base schema migration*</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-195">**Hinzufügen-Migration** wird das Gerüst für die nächste Migration basierend auf Änderungen, die Sie mit dem Modell vorgenommen haben, seit der Erstellung der letzten Migrations erstellen.</span><span class="sxs-lookup"><span data-stu-id="386c8-195">**Add-Migration** will scaffold the next migration based on changes you have made to your model since the last migration was created.</span></span> <span data-ttu-id="386c8-196">In diesem Fall entspricht der ersten Migration des Projekts, dabei werden hinzugefügt. die Skripts zum Erstellen der Tabellen, die definiert, der **TriviaContext** Klasse.</span><span class="sxs-lookup"><span data-stu-id="386c8-196">In this case, as it is the first migration of the project, it will add the scripts to create all the tables defined in the **TriviaContext** class.</span></span>
7. <span data-ttu-id="386c8-197">Führen Sie die Migration aus, um die Datenbank zu aktualisieren, indem Sie den folgenden Befehl ausführen.</span><span class="sxs-lookup"><span data-stu-id="386c8-197">Execute the migration to update the database by running the following command.</span></span> <span data-ttu-id="386c8-198">Für diesen Befehl geben Sie die **ausführlich** -Flag in die Zieldatenbank angewendeten SQL-Anweisungen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="386c8-198">For this command you will specify the **Verbose** flag to view the SQL statements being applied to the target database.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample3.ps1)]

    <span data-ttu-id="386c8-199">![Erstellen von Ausgangsdatenbank](maintainable-azure-websites-managing-change-and-scale/_static/image3.png "Ausgangsdatenbank erstellen")</span><span class="sxs-lookup"><span data-stu-id="386c8-199">![Creating initial database](maintainable-azure-websites-managing-change-and-scale/_static/image3.png "Creating initial database")</span></span>

    <span data-ttu-id="386c8-200">*Erstellen die ursprüngliche Datenbank*</span><span class="sxs-lookup"><span data-stu-id="386c8-200">*Creating initial database*</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-201">**Update-Database '** alle ausstehenden Migrationen auf die Datenbank anwenden.</span><span class="sxs-lookup"><span data-stu-id="386c8-201">**Update-Database** will apply any pending migrations to the database.</span></span> <span data-ttu-id="386c8-202">In diesem Fall wird die Datenbank mithilfe der Verbindungszeichenfolge in der Datei "Web.config" definierten erstellt.</span><span class="sxs-lookup"><span data-stu-id="386c8-202">In this case, it will create the database using the connection string defined in your web.config file.</span></span>
8. <span data-ttu-id="386c8-203">Wechseln Sie zu **Ansicht** , und öffnen Sie im Menü **Objekt-Explorer von SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="386c8-203">Go to **View** menu and open **SQL Server Object Explorer**.</span></span>

    <span data-ttu-id="386c8-204">![Öffnen Sie im Objekt-Explorer von SQL Server](maintainable-azure-websites-managing-change-and-scale/_static/image4.png "in SQL Server-Objekt-Explorer öffnen")</span><span class="sxs-lookup"><span data-stu-id="386c8-204">![Open in SQL Server Object Explorer](maintainable-azure-websites-managing-change-and-scale/_static/image4.png "Open in SQL Server Object Explorer")</span></span>

    <span data-ttu-id="386c8-205">*Öffnen Sie im Objekt-Explorer von SQL Server*</span><span class="sxs-lookup"><span data-stu-id="386c8-205">*Open in SQL Server Object Explorer*</span></span>
9. <span data-ttu-id="386c8-206">In der **Objekt-Explorer von SQL Server** Fenster Verbinden mit der LocalDB-Instanz, indem Sie mit der rechten Maustaste die **SQL Server** Knoten klicken und auswählen **SQL-Server hinzufügen...**  Option.</span><span class="sxs-lookup"><span data-stu-id="386c8-206">In the **SQL Server Object Explorer** window, connect to your LocalDB instance by right-clicking the **SQL Server** node and selecting **Add SQL Server...** option.</span></span>

    <span data-ttu-id="386c8-207">![Hinzufügen einer SQL Server-Instanz](maintainable-azure-websites-managing-change-and-scale/_static/image5.png "eine SQL Server-Instanz hinzufügen")</span><span class="sxs-lookup"><span data-stu-id="386c8-207">![Adding a SQL Server Instance](maintainable-azure-websites-managing-change-and-scale/_static/image5.png "Adding a SQL Server Instance")</span></span>

    <span data-ttu-id="386c8-208">*Hinzufügen einer SQL Server-Instanz auf SQL Server-Objekt-Explorer*</span><span class="sxs-lookup"><span data-stu-id="386c8-208">*Adding a SQL Server instance to SQL Server Object Explorer*</span></span>
10. <span data-ttu-id="386c8-209">Legen Sie die **Servernamen** auf *(Localdb) \v11.0* und lassen Sie **Windows-Authentifizierung** als Authentifizierungsmodus.</span><span class="sxs-lookup"><span data-stu-id="386c8-209">Set the **server name** to *(localdb)\v11.0* and leave **Windows Authentication** as your authentication mode.</span></span> <span data-ttu-id="386c8-210">Klicken Sie auf **verbinden** um den Vorgang fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="386c8-210">Click **Connect** to continue.</span></span>

    <span data-ttu-id="386c8-211">![Herstellen einer Verbindung mit LocalDB](maintainable-azure-websites-managing-change-and-scale/_static/image6.png "Herstellen einer Verbindung mit LocalDB")</span><span class="sxs-lookup"><span data-stu-id="386c8-211">![Connecting to LocalDB](maintainable-azure-websites-managing-change-and-scale/_static/image6.png "Connecting to LocalDB")</span></span>

    <span data-ttu-id="386c8-212">*Herstellen einer Verbindung mit LocalDB*</span><span class="sxs-lookup"><span data-stu-id="386c8-212">*Connecting to LocalDB*</span></span>
11. <span data-ttu-id="386c8-213">Öffnen der **GeekQuizProd** Datenbank und erweitern Sie die **Tabellen** Knoten.</span><span class="sxs-lookup"><span data-stu-id="386c8-213">Open the **GeekQuizProd** database and expand the **Tables** node.</span></span> <span data-ttu-id="386c8-214">Wie Sie sehen können, die **Update-Database** Befehl generiert alle Tabellen, die definiert, der **TriviaContext** Klasse.</span><span class="sxs-lookup"><span data-stu-id="386c8-214">As you can see, the **Update-Database** command generated all the tables defined in the **TriviaContext** class.</span></span> <span data-ttu-id="386c8-215">Suchen Sie die **Dbo. TriviaQuestions** Tabelle, und öffnen Sie den Knoten Columns.</span><span class="sxs-lookup"><span data-stu-id="386c8-215">Locate the **dbo.TriviaQuestions** table and open the columns node.</span></span> <span data-ttu-id="386c8-216">In der nächsten Aufgabe wird in dieser Tabelle eine neue Spalte hinzufügen und aktualisieren Sie die Datenbank mit **Migrationen**.</span><span class="sxs-lookup"><span data-stu-id="386c8-216">In the next task, you will add a new column to this table and update the database using **Migrations**.</span></span>

    <span data-ttu-id="386c8-217">![Faszinierende Fragen Spalten](maintainable-azure-websites-managing-change-and-scale/_static/image7.png "faszinierende Fragen Spalten")</span><span class="sxs-lookup"><span data-stu-id="386c8-217">![Trivia Questions Columns](maintainable-azure-websites-managing-change-and-scale/_static/image7.png "Trivia Questions Columns")</span></span>

    <span data-ttu-id="386c8-218">*Faszinierende Fragen Spalten*</span><span class="sxs-lookup"><span data-stu-id="386c8-218">*Trivia Questions Columns*</span></span>

<a id="Ex1Task2"></a>
#### <a name="task-2--updating-database-schema-using-migrations"></a><span data-ttu-id="386c8-219">Aufgabe 2 – Update Migrationen mit Datenbankschema</span><span class="sxs-lookup"><span data-stu-id="386c8-219">Task 2 – Updating Database Schema Using Migrations</span></span>

<span data-ttu-id="386c8-220">In dieser Aufgabe verwenden Sie **Entity Framework Code First-Migrationen** so erkennen eine Änderung in Ihrem Modell und generieren den erforderlichen Code zum Aktualisieren der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="386c8-220">In this task, you will use **Entity Framework Code First Migrations** to detect a change in your model and generate the necessary code to update the database.</span></span> <span data-ttu-id="386c8-221">Aktualisieren Sie die **TriviaQuestions** Entität, indem eine neue Eigenschaft hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="386c8-221">You will update the **TriviaQuestions** entity by adding a new property to it.</span></span> <span data-ttu-id="386c8-222">Dann führen Sie-Befehle zum Erstellen einer neuen Migrations aus, um die neue Spalte in der Tabelle enthalten.</span><span class="sxs-lookup"><span data-stu-id="386c8-222">Then you will run commands to create a new Migration to include the new column in the table.</span></span>

1. <span data-ttu-id="386c8-223">In **Projektmappen-Explorer**, doppelklicken Sie auf die **TriviaQuestion.cs** -Datei innerhalb der **Modelle** Ordner.</span><span class="sxs-lookup"><span data-stu-id="386c8-223">In **Solution Explorer**, double-click the **TriviaQuestion.cs** file located inside the **Models** folder.</span></span>
2. <span data-ttu-id="386c8-224">Hinzufügen einer neuen Eigenschaft mit dem Namen **Hinweis**, wie im folgenden Codeausschnitt gezeigt.</span><span class="sxs-lookup"><span data-stu-id="386c8-224">Add a new property named **Hint**, as shown in the following code snippet.</span></span>

    [!code-csharp[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample4.cs)]
3. <span data-ttu-id="386c8-225">In der **Package Manager Console**, geben Sie den folgenden Befehl aus, und drücken Sie dann die **EINGABETASTE**.</span><span class="sxs-lookup"><span data-stu-id="386c8-225">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span> <span data-ttu-id="386c8-226">Eine neue Migration wird die Änderung in unserem Modell reflektieren erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="386c8-226">A new migration will be created reflecting the change in our model.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample5.ps1)]

    <span data-ttu-id="386c8-227">![Hinzufügen-Migration](maintainable-azure-websites-managing-change-and-scale/_static/image8.png "hinzufügen-Migration")</span><span class="sxs-lookup"><span data-stu-id="386c8-227">![Add-Migration](maintainable-azure-websites-managing-change-and-scale/_static/image8.png "Add-Migration")</span></span>

    <span data-ttu-id="386c8-228">*Hinzufügen-Migration*</span><span class="sxs-lookup"><span data-stu-id="386c8-228">*Add-Migration*</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-229">Eine Migrationsdatei besteht aus zwei Methoden **einrichten** und **unten**.</span><span class="sxs-lookup"><span data-stu-id="386c8-229">A Migration file is composed of two methods, **Up** and **Down**.</span></span>
    > 
    > - <span data-ttu-id="386c8-230">Die **einrichten** Methode wird verwendet, um anzugeben, welche Änderungen von der aktuellen Version von unserer Anwendung müssen für die Datenbank angewendet.</span><span class="sxs-lookup"><span data-stu-id="386c8-230">The **Up** method will be used to specify what changes the current version of our application need to apply to the database.</span></span>
    > - <span data-ttu-id="386c8-231">Die **unten** wird verwendet, um die Änderungen umzukehren, wir, um hinzugefügt haben, die **einrichten** Methode.</span><span class="sxs-lookup"><span data-stu-id="386c8-231">The **Down** is used to reverse the changes we have added to the **Up** method.</span></span>
    > 
    > <span data-ttu-id="386c8-232">Wenn die Datenbankmigration zur Aktualisierung der Datenbank werden sie bei allen Migrationen ausgeführt, in der Reihenfolge, Timestamp, und nur solche, die seit dem letzten Update nicht verwendet wurden (die \_MigrationHistory-Tabelle der nachverfolgt welche Migrationen angewendet wurden).</span><span class="sxs-lookup"><span data-stu-id="386c8-232">When the Database Migration updates the database, it will run all migrations in the timestamp order, and only those that have not been used since the last update (The \_MigrationHistory table keeps track of which migrations have been applied).</span></span> <span data-ttu-id="386c8-233">Die **einrichten** bei allen Migrationen wird aufgerufen, und nehmen die Änderungen haben wir in der Datenbank angegeben.</span><span class="sxs-lookup"><span data-stu-id="386c8-233">The **Up** method of all migrations will be called and will make the changes we have specified to the database.</span></span> <span data-ttu-id="386c8-234">Wenn wir eine vorherige Migration zurückkehren möchten die **unten** Methode wird aufgerufen, um die Änderungen in umgekehrter Reihenfolge erneut.</span><span class="sxs-lookup"><span data-stu-id="386c8-234">If we decide to go back to a previous migration, the **Down** method will be called to redo the changes in a reverse order.</span></span>
4. <span data-ttu-id="386c8-235">In der **Package Manager Console**, geben Sie den folgenden Befehl aus, und drücken Sie dann die **EINGABETASTE**.</span><span class="sxs-lookup"><span data-stu-id="386c8-235">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample6.ps1)]
5. <span data-ttu-id="386c8-236">Die Ausgabe der **Update-Database** Befehl generiert ein **Alter Table** SQL-Anweisung, um eine neue Spalte hinzufügen der **TriviaQuestions** Tabelle, wie in der folgenden Abbildung gezeigt.</span><span class="sxs-lookup"><span data-stu-id="386c8-236">The output of the **Update-Database** command generated an **Alter Table** SQL statement to add a new column to the **TriviaQuestions** table, as shown in the image below.</span></span>

    <span data-ttu-id="386c8-237">![Hinzufügen von Spalte SQL-Anweisung generiert](maintainable-azure-websites-managing-change-and-scale/_static/image9.png "generierte Spalte SQL-Anweisung hinzufügen")</span><span class="sxs-lookup"><span data-stu-id="386c8-237">![Add column SQL statement generated](maintainable-azure-websites-managing-change-and-scale/_static/image9.png "Add column SQL statement generated")</span></span>

    <span data-ttu-id="386c8-238">*Hinzufügen von Spalte generierte SQL-Anweisung*</span><span class="sxs-lookup"><span data-stu-id="386c8-238">*Add column SQL statement generated*</span></span>
6. <span data-ttu-id="386c8-239">In **Objekt-Explorer von SQL Server**, aktualisieren Sie die **Dbo. TriviaQuestions** Tabelle, und überprüfen Sie, ob die neue **Hinweis** Spalte wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="386c8-239">In **SQL Server Object Explorer**, refresh the **dbo.TriviaQuestions** table and check that the new **Hint** column is displayed.</span></span>

    <span data-ttu-id="386c8-240">![Mit der neuen Spalte für den Hinweis](maintainable-azure-websites-managing-change-and-scale/_static/image10.png "neue Hinweis-Spalte anzeigen")</span><span class="sxs-lookup"><span data-stu-id="386c8-240">![Showing the new Hint Column](maintainable-azure-websites-managing-change-and-scale/_static/image10.png "Showing the new Hint Column")</span></span>

    <span data-ttu-id="386c8-241">*Der neue Hinweis Spalte anzeigen*</span><span class="sxs-lookup"><span data-stu-id="386c8-241">*Showing the new Hint Column*</span></span>
7. <span data-ttu-id="386c8-242">Wieder in die **TriviaQuestion.cs** fügen-Editor eine **StringLength** Einschränkung der *Hinweis* Eigenschaft, wie im folgenden Codeausschnitt gezeigt.</span><span class="sxs-lookup"><span data-stu-id="386c8-242">Back in the **TriviaQuestion.cs** editor, add a **StringLength** constraint to the *Hint* property, as shown in the following code snippet.</span></span>

    [!code-csharp[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample7.cs)]
8. <span data-ttu-id="386c8-243">In der **Package Manager Console**, geben Sie den folgenden Befehl aus, und drücken Sie dann die **EINGABETASTE**.</span><span class="sxs-lookup"><span data-stu-id="386c8-243">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample8.ps1)]
9. <span data-ttu-id="386c8-244">In der **Package Manager Console**, geben Sie den folgenden Befehl aus, und drücken Sie dann die **EINGABETASTE**.</span><span class="sxs-lookup"><span data-stu-id="386c8-244">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample9.ps1)]
10. <span data-ttu-id="386c8-245">Die Ausgabe der **Update-Database** Befehl generiert ein **Alter Table** SQL-Anweisung zum Aktualisieren der *Hinweis* Spalte vom Typ der **TriviaQuestions** Tabelle, wie in der folgenden Abbildung gezeigt.</span><span class="sxs-lookup"><span data-stu-id="386c8-245">The output of the **Update-Database** command generated an **Alter Table** SQL statement to update the *hint* column type of the **TriviaQuestions** table, as shown in the image below.</span></span>

    <span data-ttu-id="386c8-246">![Alter Column-SQL-Anweisung generiert](maintainable-azure-websites-managing-change-and-scale/_static/image11.png "Alter Column-SQL-Anweisung generiert")</span><span class="sxs-lookup"><span data-stu-id="386c8-246">![Alter column SQL statement generated](maintainable-azure-websites-managing-change-and-scale/_static/image11.png "Alter column SQL statement generated")</span></span>

    <span data-ttu-id="386c8-247">*Alter Column-SQL-Anweisung generiert*</span><span class="sxs-lookup"><span data-stu-id="386c8-247">*Alter column SQL statement generated*</span></span>
11. <span data-ttu-id="386c8-248">In **Objekt-Explorer von SQL Server**, aktualisieren Sie die **Dbo. TriviaQuestions** Tabelle, und überprüfen Sie, ob die **Hinweis** Spaltentyp **nvarchar(150)**.</span><span class="sxs-lookup"><span data-stu-id="386c8-248">In **SQL Server Object Explorer**, refresh the **dbo.TriviaQuestions** table and check that the **Hint** column type is **nvarchar(150)**.</span></span>

    <span data-ttu-id="386c8-249">![Mit der neuen Einschränkung](maintainable-azure-websites-managing-change-and-scale/_static/image12.png "mit der neuen Einschränkung")</span><span class="sxs-lookup"><span data-stu-id="386c8-249">![Showing the new constraint](maintainable-azure-websites-managing-change-and-scale/_static/image12.png "Showing the new constraint")</span></span>

    <span data-ttu-id="386c8-250">*Die neue Einschränkung anzeigen*</span><span class="sxs-lookup"><span data-stu-id="386c8-250">*Showing the new constraint*</span></span>

<a id="Exercise2"></a>
### <a name="exercise-2-deploying-a-web-app-to-staging"></a><span data-ttu-id="386c8-251">Übung 2: Bereitstellen einer Web-App in die Stagingumgebung</span><span class="sxs-lookup"><span data-stu-id="386c8-251">Exercise 2: Deploying a Web App to Staging</span></span>

<span data-ttu-id="386c8-252">**Web-Apps in Azure App Service** können Sie die Veröffentlichung in einer Stagingumgebung durchführen.</span><span class="sxs-lookup"><span data-stu-id="386c8-252">**Web Apps in Azure App Service** enables you to perform staged publishing.</span></span> <span data-ttu-id="386c8-253">Veröffentlichen in einer Stagingumgebung ein stagingwebsiteslot für jede standardproduktionswebsite erstellt und ermöglicht es Ihnen, diese Slots ohne Ausfallzeit austauschen.</span><span class="sxs-lookup"><span data-stu-id="386c8-253">Staged publishing creates a staging site slot for each default production site and enables you to swap these slots with no down time.</span></span> <span data-ttu-id="386c8-254">Dies ist besonders hilfreich ist, überprüfen die Änderungen vor dem Freigeben von öffentlich, inkrementell Websiteinhalt integrieren und Rollback, wenn Änderungen nicht ordnungsgemäß funktionieren.</span><span class="sxs-lookup"><span data-stu-id="386c8-254">This is really useful to validate changes before releasing to the public, incrementally integrate site content, and roll back if changes are not working as expected.</span></span>

<span data-ttu-id="386c8-255">Sie werden in dieser Übung Bereitstellen der **Meister Quiz** Anwendung in der Stagingumgebung Ihrer Web-App mithilfe der Git-quellcodeverwaltung.</span><span class="sxs-lookup"><span data-stu-id="386c8-255">In this exercise, you will deploy the **Geek Quiz** application to the staging environment of your web app using Git source control.</span></span> <span data-ttu-id="386c8-256">Zu diesem Zweck Sie Web-app erstellen und Bereitstellen der erforderlichen Komponenten auf das Verwaltungsportal, konfigurieren Sie eine **Git** Repository und übertragen Sie die Anwendung Quellcode, aus dem lokalen Computer um staging-Slot.</span><span class="sxs-lookup"><span data-stu-id="386c8-256">To do this, you will create the web app and provision the required components at the management portal, configure a **Git** repository and push the application source code from your local computer to the staging slot.</span></span> <span data-ttu-id="386c8-257">Aktualisieren Sie auch die Produktionsdatenbank mit der **Code First-Migrationen** Sie in der vorherigen Übung erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="386c8-257">You will also update your production database with the **Code First Migrations** you created in the previous exercise.</span></span> <span data-ttu-id="386c8-258">Führen Sie dann die Anwendung in dieser testumgebung, um den Vorgang zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="386c8-258">You will then execute the application in this test environment to verify its operation.</span></span> <span data-ttu-id="386c8-259">Wenn Sie zufrieden sind gemäß Ihren Erwartungen funktioniert, werden Sie die Anwendung bis hin zur Produktion heraufgestuft.</span><span class="sxs-lookup"><span data-stu-id="386c8-259">Once you are satisfied that it is working according to your expectations, you will promote the application to production.</span></span>

> [!NOTE]
> <span data-ttu-id="386c8-260">Zum Veröffentlichen in einer Stagingumgebung zu aktivieren, muss die Web-app in **Modus "Standard"**.</span><span class="sxs-lookup"><span data-stu-id="386c8-260">To enable staged publishing, the web app must be in **Standard mode**.</span></span> <span data-ttu-id="386c8-261">Beachten Sie, dass zusätzliche Kosten anfallen, wenn Sie Ihre Web-app in den Standardmodus ändern.</span><span class="sxs-lookup"><span data-stu-id="386c8-261">Note that additional charges will be incurred if you change your web app to Standard mode.</span></span> <span data-ttu-id="386c8-262">Weitere Informationen zur Preisgestaltung finden Sie unter [App Service-Preisen](https://azure.microsoft.com/pricing/details/app-service/).</span><span class="sxs-lookup"><span data-stu-id="386c8-262">For more information about pricing, see [App Service Pricing](https://azure.microsoft.com/pricing/details/app-service/).</span></span>


<a id="Ex2Task1"></a>
#### <a name="task-1--creating-a-web-app-in-azure-app-service"></a><span data-ttu-id="386c8-263">Aufgabe 1 – erstellen eine Web-App in Azure App Service</span><span class="sxs-lookup"><span data-stu-id="386c8-263">Task 1 – Creating a Web App in Azure App Service</span></span>

<span data-ttu-id="386c8-264">In dieser Aufgabe erstellen Sie eine Web-app in **Azure App Service** über das Verwaltungsportal.</span><span class="sxs-lookup"><span data-stu-id="386c8-264">In this task, you will create a web app in **Azure App Service** from the management portal.</span></span> <span data-ttu-id="386c8-265">Konfigurieren Sie auch eine **SQL-Datenbank** persistent Speichern von Anwendungsdaten und konfigurieren ein lokales Git-Repository für die Datenquellen-Steuerelements.</span><span class="sxs-lookup"><span data-stu-id="386c8-265">You will also configure a **SQL Database** to persist the application data, and configure a local Git repository for source control.</span></span>

1. <span data-ttu-id="386c8-266">Wechseln Sie zu der [Azure-Verwaltungsportal](https://manage.windowsazure.com) und melden Sie sich mit dem Microsoft-Konto, das Ihrem Abonnement zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="386c8-266">Go to the [Azure management portal](https://manage.windowsazure.com) and sign in using the Microsoft account associated with your subscription.</span></span>

    ![Melden Sie sich beim Azure-Verwaltungsportal](maintainable-azure-websites-managing-change-and-scale/_static/image13.png)

    <span data-ttu-id="386c8-268">*Melden Sie sich beim Azure-Verwaltungsportal*</span><span class="sxs-lookup"><span data-stu-id="386c8-268">*Sign in to the Azure management portal*</span></span>
2. <span data-ttu-id="386c8-269">Klicken Sie auf **neu** in der Befehlsleiste am unteren Rand der Seite.</span><span class="sxs-lookup"><span data-stu-id="386c8-269">Click **New** in the command bar at the bottom of the page.</span></span>

    <span data-ttu-id="386c8-270">![Erstellen eine neue Web-app](maintainable-azure-websites-managing-change-and-scale/_static/image14.png "erstellen eine neue Web-app")</span><span class="sxs-lookup"><span data-stu-id="386c8-270">![Creating a new web app](maintainable-azure-websites-managing-change-and-scale/_static/image14.png "Creating a new web app")</span></span>

    <span data-ttu-id="386c8-271">*Erstellen eine neue Web-app*</span><span class="sxs-lookup"><span data-stu-id="386c8-271">*Creating a new web app*</span></span>
3. <span data-ttu-id="386c8-272">Klicken Sie auf **berechnen**, **Website** und dann **Benutzerdefiniert erstellen**.</span><span class="sxs-lookup"><span data-stu-id="386c8-272">Click **Compute**, **Website** and then **Custom Create**.</span></span>

    <span data-ttu-id="386c8-273">![Erstellen eine neue Web-app verwenden, erstellen Sie benutzerdefinierte](maintainable-azure-websites-managing-change-and-scale/_static/image15.png "erstellen eine neue Web-app mithilfe von Benutzerdefiniert erstellen")</span><span class="sxs-lookup"><span data-stu-id="386c8-273">![Creating a new web app using Custom Create](maintainable-azure-websites-managing-change-and-scale/_static/image15.png "Creating a new web app using Custom Create")</span></span>

    <span data-ttu-id="386c8-274">*Erstellen eine neue Web-app mithilfe von Benutzerdefiniert erstellen*</span><span class="sxs-lookup"><span data-stu-id="386c8-274">*Creating a new web app using Custom Create*</span></span>
4. <span data-ttu-id="386c8-275">In der **neue Website - Benutzerdefiniert erstellen** Dialogfeld geben einen verfügbaren **URL** (z. B. *Meister Quiz*), wählen Sie einen Speicherort in der **Region** Dropdown-Liste aus, und wählen Sie **erstellen Sie eine neue SQL­Datenbank** in der **Datenbank** Dropdown-Liste.</span><span class="sxs-lookup"><span data-stu-id="386c8-275">In the **New Website - Custom Create** dialog box, provide an available **URL** (e.g. *geek-quiz*), select a location in the **Region** drop-down list, and select **Create a new SQL database** in the **Database** drop-down list.</span></span> <span data-ttu-id="386c8-276">Wählen Sie abschließend die **veröffentlichen aus der quellcodeverwaltung** Kontrollkästchen und klicken Sie auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="386c8-276">Finally, select the **Publish from source control** check box and click **Next**.</span></span>

    ![Anpassen der neuen Web-app](maintainable-azure-websites-managing-change-and-scale/_static/image16.png)

    <span data-ttu-id="386c8-278">*Anpassen der neuen Web-app*</span><span class="sxs-lookup"><span data-stu-id="386c8-278">*Customizing the new web app*</span></span>
5. <span data-ttu-id="386c8-279">Geben Sie die folgenden Informationen für die datenbankeinstellungen:</span><span class="sxs-lookup"><span data-stu-id="386c8-279">Specify the following information for the database settings:</span></span>

    - <span data-ttu-id="386c8-280">In der **Namen** Text Geben Sie einen Datenbanknamen an (z. B. *Geekquiz\_Db*)</span><span class="sxs-lookup"><span data-stu-id="386c8-280">In the **Name** text box, enter a database name (e.g. *geekquiz\_db*)</span></span>
    - <span data-ttu-id="386c8-281">Auf dem Server **Dropdownelement** Liste **neue SQL-Datenbankserver**.</span><span class="sxs-lookup"><span data-stu-id="386c8-281">In the Server **drop-down** list, select **New SQL database server**.</span></span> <span data-ttu-id="386c8-282">Alternativ können Sie einen vorhandenen Server auswählen.</span><span class="sxs-lookup"><span data-stu-id="386c8-282">Alternatively, you can select an existing server.</span></span>
    - <span data-ttu-id="386c8-283">In der **Datenbankbenutzername** und **Datenbankkennwort** Felder, geben Sie den Administratorbenutzernamen und das Kennwort für den SQL-Datenbankserver.</span><span class="sxs-lookup"><span data-stu-id="386c8-283">In the **Database username** and **Database password** boxes, enter the administrator username and password for the SQL database server.</span></span> <span data-ttu-id="386c8-284">Wenn Sie einen Server auswählen ist bereits vorhanden, Sie werden aufgefordert, das Kennwort.</span><span class="sxs-lookup"><span data-stu-id="386c8-284">If you select a server you have already created, you will be prompted for the password.</span></span>

    ![Datenbankeinstellungen angeben](maintainable-azure-websites-managing-change-and-scale/_static/image17.png)

    <span data-ttu-id="386c8-286">*Datenbankeinstellungen angeben*</span><span class="sxs-lookup"><span data-stu-id="386c8-286">*Specifying the database settings*</span></span>
6. <span data-ttu-id="386c8-287">Klicken Sie auf **Weiter**, um fortzufahren.</span><span class="sxs-lookup"><span data-stu-id="386c8-287">Click **Next** to continue.</span></span>
7. <span data-ttu-id="386c8-288">Wählen Sie **lokales Git-Repository** für die quellcodeverwaltung verwenden, und klicken Sie auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="386c8-288">Select **Local Git repository** for the source control to use and click **Next**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-289">Sie können für die bereitstellungsanmeldeinformationen (Benutzername und Kennwort) aufgefordert.</span><span class="sxs-lookup"><span data-stu-id="386c8-289">You may be prompted for the deployment credentials (a username and password).</span></span>

    ![Erstellen das Git-Repository](maintainable-azure-websites-managing-change-and-scale/_static/image18.png)

    <span data-ttu-id="386c8-291">*Erstellen das Git-repository*</span><span class="sxs-lookup"><span data-stu-id="386c8-291">*Creating the Git repository*</span></span>
8. <span data-ttu-id="386c8-292">Warten Sie, bis die neuen Web-app erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="386c8-292">Wait until the new web app is created.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-293">Azure bietet standardmäßig Domänen *azurewebsites.net* aber auch bietet Ihnen die Möglichkeit, benutzerdefinierte Domänen, die mit dem Azure-Verwaltungsportal festgelegt.</span><span class="sxs-lookup"><span data-stu-id="386c8-293">By default, Azure provides domains at *azurewebsites.net* but also gives you the possibility to set custom domains using the Azure management portal.</span></span> <span data-ttu-id="386c8-294">Allerdings können Sie nur benutzerdefinierte Domänen verwalten, wenn Sie bestimmte Azure App Service-Modi verwenden.</span><span class="sxs-lookup"><span data-stu-id="386c8-294">However, you can only manage custom domains if you are using certain Azure App Service modes.</span></span>
    > 
    > <span data-ttu-id="386c8-295">Azure App Service ist kostenlos, freigegeben, Basic, Standard und Premium-Editionen verfügbar.</span><span class="sxs-lookup"><span data-stu-id="386c8-295">Azure App Service is available in Free, Shared, Basic, Standard, and Premium editions.</span></span> <span data-ttu-id="386c8-296">Im Modus kostenlos und freigegeben alle Web-apps in einer Umgebung mit mehreren Mandanten ausgeführt und haben Kontingente für die Verwendung von CPU, Arbeitsspeicher und Netzwerk.</span><span class="sxs-lookup"><span data-stu-id="386c8-296">In Free and Shared mode, all web apps run in a multi-tenant environment and have quotas for CPU, Memory, and Network usage.</span></span> <span data-ttu-id="386c8-297">Die maximale Anzahl von kostenlose apps kann mit Ihrem Plan variieren.</span><span class="sxs-lookup"><span data-stu-id="386c8-297">The maximum number of free apps may vary with your plan.</span></span> <span data-ttu-id="386c8-298">Im Modus "Standard" Wählen Sie an, welche apps, die Ausführung auf dedizierten virtuellen Computern, die entsprechen in der standard-Azure-Serverressourcen.</span><span class="sxs-lookup"><span data-stu-id="386c8-298">In Standard mode, you choose which apps run on dedicated virtual machines that correspond to the standard Azure compute resources.</span></span> <span data-ttu-id="386c8-299">Finden Sie die Konfiguration der Web-app-Modus in den **Skalierung** Menü Ihrer Web-App.</span><span class="sxs-lookup"><span data-stu-id="386c8-299">You can find the web app mode configuration in the **Scale** menu of your web app.</span></span>
    > 
    > <span data-ttu-id="386c8-300">![Azure App Service-Modi](maintainable-azure-websites-managing-change-and-scale/_static/image19.png "-Azure App Service-Modi")</span><span class="sxs-lookup"><span data-stu-id="386c8-300">![Azure App Service Modes](maintainable-azure-websites-managing-change-and-scale/_static/image19.png "Azure App Service Modes")</span></span>
    > 
    > <span data-ttu-id="386c8-301">Bei Verwendung von **Shared** oder **Standard** -Modus werden benutzerdefinierte Domänen für Ihre Web-app zu verwalten, navigieren Sie zu Ihrer app **konfigurieren** Menü und klicken auf **Domänen verwalten** unter *Domänennamen*.</span><span class="sxs-lookup"><span data-stu-id="386c8-301">If you are using **Shared** or **Standard** mode, you will be able to manage custom domains for your web app by going to your app's **Configure** menu and clicking **Manage Domains** under *domain names*.</span></span>
    > 
    > <span data-ttu-id="386c8-302">![Verwalten von Domänen](maintainable-azure-websites-managing-change-and-scale/_static/image20.png "Verwalten von Domänen")</span><span class="sxs-lookup"><span data-stu-id="386c8-302">![Manage Domains](maintainable-azure-websites-managing-change-and-scale/_static/image20.png "Manage Domains")</span></span>
    > 
    > <span data-ttu-id="386c8-303">![Verwalten von benutzerdefinierten Domänen](maintainable-azure-websites-managing-change-and-scale/_static/image21.png "benutzerdefinierte Domänen verwalten")</span><span class="sxs-lookup"><span data-stu-id="386c8-303">![Manage Custom Domains](maintainable-azure-websites-managing-change-and-scale/_static/image21.png "Manage Custom Domains")</span></span>
9. <span data-ttu-id="386c8-304">Sobald die Web-app erstellt wurde, klicken Sie auf den Link unter der **URL** Spalte zum Überprüfen, dass die neuen Web-app ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="386c8-304">Once the web app is created, click the link under the **URL** column to check that the new web app is running.</span></span>

    ![Navigieren in der neuen Web-app](maintainable-azure-websites-managing-change-and-scale/_static/image22.png)

    <span data-ttu-id="386c8-306">*Navigieren in der neuen Web-app*</span><span class="sxs-lookup"><span data-stu-id="386c8-306">*Browsing to the new web app*</span></span>

    ![Web-app ausgeführt wird](maintainable-azure-websites-managing-change-and-scale/_static/image23.png)

    <span data-ttu-id="386c8-308">*Web-app ausgeführt wird*</span><span class="sxs-lookup"><span data-stu-id="386c8-308">*web app running*</span></span>

<a id="Ex2Task2"></a>
#### <a name="task-2--creating-the-production-sql-database"></a><span data-ttu-id="386c8-309">Aufgabe 2: Erstellen der SQL-Produktionsdatenbank</span><span class="sxs-lookup"><span data-stu-id="386c8-309">Task 2 – Creating the Production SQL Database</span></span>

<span data-ttu-id="386c8-310">In dieser Aufgabe verwenden Sie die **Entity Framework Code First-Migrationen** zum Erstellen der Datenbank als Ziel der **Azure SQL-Datenbank** Instanz, die Sie in der vorherigen Aufgabe erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="386c8-310">In this task, you will use the **Entity Framework Code First Migrations** to create the database targeting the **Azure SQL Database** instance you created in the previous task.</span></span>

1. <span data-ttu-id="386c8-311">Klicken Sie im Verwaltungsportal, navigieren Sie zu der Web-app, die Sie in der vorherigen Aufgabe erstellt haben, und wechseln Sie zu dessen **Dashboard**.</span><span class="sxs-lookup"><span data-stu-id="386c8-311">In the Management Portal, navigate to the web app you created in the previous task and go to its **Dashboard**.</span></span>
2. <span data-ttu-id="386c8-312">In der **Dashboard** auf **Verbindungszeichenfolgen anzeigen** Verknüpfung unter den **kurzer Blick** Abschnitt.</span><span class="sxs-lookup"><span data-stu-id="386c8-312">In the **Dashboard** page, click **View connection strings** link under the **quick glance** section.</span></span>

    <span data-ttu-id="386c8-313">![Anzeige von Verbindungszeichenfolgen](maintainable-azure-websites-managing-change-and-scale/_static/image24.png "Verbindungszeichenfolgen anzeigen")</span><span class="sxs-lookup"><span data-stu-id="386c8-313">![View connection strings](maintainable-azure-websites-managing-change-and-scale/_static/image24.png "View connection strings")</span></span>

    <span data-ttu-id="386c8-314">*Verbindungszeichenfolgen anzeigen*</span><span class="sxs-lookup"><span data-stu-id="386c8-314">*View connection strings*</span></span>
3. <span data-ttu-id="386c8-315">Kopieren der **Verbindungszeichenfolge** Wert und das Dialogfeld zu schließen.</span><span class="sxs-lookup"><span data-stu-id="386c8-315">Copy the **connection string** value and close the dialog box.</span></span>

    <span data-ttu-id="386c8-316">![Verbindungszeichenfolge in Azure-Verwaltungsportal](maintainable-azure-websites-managing-change-and-scale/_static/image25.png "Verbindungszeichenfolge im Azure-Verwaltungsportal")</span><span class="sxs-lookup"><span data-stu-id="386c8-316">![Connection String in Azure Management Portal](maintainable-azure-websites-managing-change-and-scale/_static/image25.png "Connection String in Azure Management Portal")</span></span>

    <span data-ttu-id="386c8-317">*Verbindungszeichenfolge in Azure-Verwaltungsportal*</span><span class="sxs-lookup"><span data-stu-id="386c8-317">*Connection String in Azure Management Portal*</span></span>
4. <span data-ttu-id="386c8-318">Klicken Sie auf **SQL-Datenbanken** auf die Liste der SQL-Datenbanken in Azure finden Sie unter</span><span class="sxs-lookup"><span data-stu-id="386c8-318">Click **SQL Databases** to see the list of SQL databases in Azure</span></span>

    <span data-ttu-id="386c8-319">![SQL-Datenbank im Menü](maintainable-azure-websites-managing-change-and-scale/_static/image26.png "im Menü die SQL-Datenbank")</span><span class="sxs-lookup"><span data-stu-id="386c8-319">![SQL Database menu](maintainable-azure-websites-managing-change-and-scale/_static/image26.png "SQL Database menu")</span></span>

    <span data-ttu-id="386c8-320">*Im Menü die SQL-Datenbank*</span><span class="sxs-lookup"><span data-stu-id="386c8-320">*SQL Database menu*</span></span>
5. <span data-ttu-id="386c8-321">Suchen Sie die Datenbank aus, die Sie in der vorherigen Aufgabe erstellt haben, und klicken Sie auf dem Server.</span><span class="sxs-lookup"><span data-stu-id="386c8-321">Locate the database you created in the previous task and click on the Server.</span></span>

    <span data-ttu-id="386c8-322">![SQL-Datenbankserver](maintainable-azure-websites-managing-change-and-scale/_static/image27.png "SQL-Datenbankserver")</span><span class="sxs-lookup"><span data-stu-id="386c8-322">![SQL Database server](maintainable-azure-websites-managing-change-and-scale/_static/image27.png "SQL Database server")</span></span>

    <span data-ttu-id="386c8-323">*SQL-Datenbankserver*</span><span class="sxs-lookup"><span data-stu-id="386c8-323">*SQL Database server*</span></span>
6. <span data-ttu-id="386c8-324">In der **Schnellstart** Seite des Servers, klicken Sie auf **konfigurieren**.</span><span class="sxs-lookup"><span data-stu-id="386c8-324">In the **Quick Start** page of the server, click on **Configure**.</span></span>

    <span data-ttu-id="386c8-325">![Konfigurieren Sie im Menü](maintainable-azure-websites-managing-change-and-scale/_static/image28.png "Menü konfigurieren")</span><span class="sxs-lookup"><span data-stu-id="386c8-325">![Configure menu](maintainable-azure-websites-managing-change-and-scale/_static/image28.png "Configure menu")</span></span>

    <span data-ttu-id="386c8-326">*Konfigurieren Sie im Menü*</span><span class="sxs-lookup"><span data-stu-id="386c8-326">*Configure menu*</span></span>
7. <span data-ttu-id="386c8-327">In der **zulässige IP-Adressen** Abschnitt, klicken Sie auf **zu den zulässigen IP-Adressen hinzufügen** Link, um die IP-Adresse für die Verbindung mit dem SQL-Datenbankserver zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="386c8-327">In the **Allowed IP addresses** section, click on **Add to the allowed IP addresses** link to enable your IP to connect to the SQL Database server.</span></span>

    <span data-ttu-id="386c8-328">![Zulässige IP-Adressen](maintainable-azure-websites-managing-change-and-scale/_static/image29.png "zulässige IP-Adressen")</span><span class="sxs-lookup"><span data-stu-id="386c8-328">![Allowed IP addresses](maintainable-azure-websites-managing-change-and-scale/_static/image29.png "Allowed IP addresses")</span></span>

    <span data-ttu-id="386c8-329">*Zulässige IP-Adressen*</span><span class="sxs-lookup"><span data-stu-id="386c8-329">*Allowed IP addresses*</span></span>
8. <span data-ttu-id="386c8-330">Klicken Sie auf **speichern** am unteren Rand der Seite zum Abschließen des Schritts.</span><span class="sxs-lookup"><span data-stu-id="386c8-330">Click **Save** at the bottom of the page to complete the step.</span></span>
9. <span data-ttu-id="386c8-331">Wechseln Sie zurück zu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="386c8-331">Switch back to Visual Studio.</span></span>
10. <span data-ttu-id="386c8-332">In der **Package Manager Console**, führen Sie den folgenden Befehl Ersetzen *[YOUR-VERBINDUNGSZEICHENFOLGE]* -Platzhalter durch die Verbindungszeichenfolge, die Sie kopiert, von Azure haben</span><span class="sxs-lookup"><span data-stu-id="386c8-332">In the **Package Manager Console**, execute the following command replacing *[YOUR-CONNECTION-STRING]* placeholder with the connection string you copied from Azure</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample10.ps1)]

    <span data-ttu-id="386c8-333">![Aktualisierungsdatenbank, die für Windows Azure SQL-Datenbank](maintainable-azure-websites-managing-change-and-scale/_static/image30.png "Datenbank aktualisieren, die für Windows Azure SQL-Datenbank")</span><span class="sxs-lookup"><span data-stu-id="386c8-333">![Update database targeting Windows Azure SQL Database](maintainable-azure-websites-managing-change-and-scale/_static/image30.png "Update database targeting Windows Azure SQL Database")</span></span>

    <span data-ttu-id="386c8-334">*Aktualisieren der Datenbank, die für Azure SQL-Datenbank*</span><span class="sxs-lookup"><span data-stu-id="386c8-334">*Update database targeting Azure SQL Database*</span></span>

<a id="Ex2Task3"></a>
#### <a name="task-3--deploying-geek-quiz-to-staging-using-git"></a><span data-ttu-id="386c8-335">Aufgabe 3: Bereitstellen von Meister Quiz in die Stagingumgebung mithilfe von Git</span><span class="sxs-lookup"><span data-stu-id="386c8-335">Task 3 – Deploying Geek Quiz to Staging Using Git</span></span>

<span data-ttu-id="386c8-336">In dieser Aufgabe aktivieren Sie in der Web-app Veröffentlichen in einer Stagingumgebung.</span><span class="sxs-lookup"><span data-stu-id="386c8-336">In this task, you will enable staged publishing in your web app.</span></span> <span data-ttu-id="386c8-337">Anschließend werden Sie Git verwenden, die Anwendung Meister Quiz direkt aus Ihrem lokalen Computer in der Stagingumgebung Ihrer Web-App veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="386c8-337">Then, you will use Git to publish the Geek Quiz application directly from your local computer to the staging environment of your web app.</span></span>

1. <span data-ttu-id="386c8-338">Wechseln Sie zurück zum Portal, und klicken Sie auf den Namen der Web-app unter der **Namen** Spalte die Verwaltungsseiten angezeigt.</span><span class="sxs-lookup"><span data-stu-id="386c8-338">Go back to the portal and click the name of the web app under the **Name** column to display the management pages.</span></span>

    ![Öffnen die Verwaltungsseiten der Web-app](maintainable-azure-websites-managing-change-and-scale/_static/image31.png)

    <span data-ttu-id="386c8-340">*Öffnen die Verwaltungsseiten der Web-app*</span><span class="sxs-lookup"><span data-stu-id="386c8-340">*Opening the web app management pages*</span></span>
2. <span data-ttu-id="386c8-341">Navigieren Sie zu der **Skalierung** Seite.</span><span class="sxs-lookup"><span data-stu-id="386c8-341">Navigate to the **Scale** page.</span></span> <span data-ttu-id="386c8-342">Klicken Sie unter der **allgemeine** Abschnitt **Standard** für die Konfiguration und klicken Sie auf **speichern** in der Befehlsleiste.</span><span class="sxs-lookup"><span data-stu-id="386c8-342">Under the **general** section, select **Standard** for the configuration and click **Save** in the command bar.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-343">Auszuführende alle Web-apps in der aktuellen Region und demselben Abonnement in **Standard** Modus, lassen Sie die **Alles auswählen** Kontrollkästchen der **Sites wählen** Konfiguration.</span><span class="sxs-lookup"><span data-stu-id="386c8-343">To run all web apps in the current region and subscription in **Standard** mode, leave the **Select All** check box selected in the **Choose Sites** configuration.</span></span> <span data-ttu-id="386c8-344">Andernfalls deaktivieren Sie die **Alles markieren** Kontrollkästchen.</span><span class="sxs-lookup"><span data-stu-id="386c8-344">Otherwise, clear the **Select All** check box.</span></span>

    <span data-ttu-id="386c8-345">![Aktualisieren der Web-app zum Modus "Standard"](maintainable-azure-websites-managing-change-and-scale/_static/image32.png "Aktualisieren der Web-app zum Modus "Standard"")</span><span class="sxs-lookup"><span data-stu-id="386c8-345">![Upgrading the web app to Standard mode](maintainable-azure-websites-managing-change-and-scale/_static/image32.png "Upgrading the web app to Standard mode")</span></span>

    <span data-ttu-id="386c8-346">*Aktualisieren der Web-App zum Modus "Standard"*</span><span class="sxs-lookup"><span data-stu-id="386c8-346">*Upgrading the Web App to Standard mode*</span></span>
3. <span data-ttu-id="386c8-347">Klicken Sie auf **Ja** um die Änderungen zu bestätigen.</span><span class="sxs-lookup"><span data-stu-id="386c8-347">Click **Yes** to confirm the changes.</span></span>

    <span data-ttu-id="386c8-348">![Bestätigen die Änderung in den Standardmodus](maintainable-azure-websites-managing-change-and-scale/_static/image33.png "fortsetzen, die mit Änderungen an der Web-app-Modus")</span><span class="sxs-lookup"><span data-stu-id="386c8-348">![Confirming the change to Standard mode](maintainable-azure-websites-managing-change-and-scale/_static/image33.png "Continuing with the changing of the web app mode")</span></span>

    <span data-ttu-id="386c8-349">*Bestätigen die Änderung an der Modus "Standard"*</span><span class="sxs-lookup"><span data-stu-id="386c8-349">*Confirming the change to Standard mode*</span></span>
4. <span data-ttu-id="386c8-350">Wechseln Sie zu der **Dashboard** Seite, und klicken Sie auf **Aktivieren einer Veröffentlichung Stagingumgebung** unter der **kurzer Blick** Abschnitt.</span><span class="sxs-lookup"><span data-stu-id="386c8-350">Go to the **Dashboard** page and click **Enable staged publishing** under the **quick glance** section.</span></span>

    <span data-ttu-id="386c8-351">![Aktivieren der Veröffentlichung in einer Stagingumgebung](maintainable-azure-websites-managing-change-and-scale/_static/image34.png "durch das Aktivieren einer Veröffentlichung Stagingumgebung")</span><span class="sxs-lookup"><span data-stu-id="386c8-351">![Enabling staged publishing](maintainable-azure-websites-managing-change-and-scale/_static/image34.png "Enabling staged publishing")</span></span>

    <span data-ttu-id="386c8-352">*Aktivieren der Veröffentlichung in Stagingumgebungen*</span><span class="sxs-lookup"><span data-stu-id="386c8-352">*Enabling staged publishing*</span></span>
5. <span data-ttu-id="386c8-353">Klicken Sie auf **Ja** Veröffentlichen in einer Stagingumgebung zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="386c8-353">Click **Yes** to enable staged publishing.</span></span>

    <span data-ttu-id="386c8-354">![Bestätigt die Publishing bereitgestellt](maintainable-azure-websites-managing-change-and-scale/_static/image35.png "klicken Sie auf Ja, zum Veröffentlichen in einer Stagingumgebung zu aktivieren.")</span><span class="sxs-lookup"><span data-stu-id="386c8-354">![Confirming staged publishing](maintainable-azure-websites-managing-change-and-scale/_static/image35.png "Clicking Yes to enable staged publishing")</span></span>

    <span data-ttu-id="386c8-355">*Bestätigen die Veröffentlichung in Stagingumgebungen*</span><span class="sxs-lookup"><span data-stu-id="386c8-355">*Confirming staged publishing*</span></span>
6. <span data-ttu-id="386c8-356">Erweitern Sie in der Liste der Web-apps die Markierung links vom Ihrer Web-app-Name der stagingwebsiteslot angezeigt.</span><span class="sxs-lookup"><span data-stu-id="386c8-356">In the list of web apps, expand the mark to the left of your web app name to display the staging site slot.</span></span> <span data-ttu-id="386c8-357">Es wurde der Name Ihrer Web-App, gefolgt von ***(staging)***.</span><span class="sxs-lookup"><span data-stu-id="386c8-357">It has the name of your web app followed by ***(staging)***.</span></span> <span data-ttu-id="386c8-358">Klicken Sie auf die Stagingsite, um zur Seite "Verwaltung" zu wechseln.</span><span class="sxs-lookup"><span data-stu-id="386c8-358">Click the staging site to go to the management page.</span></span>

    <span data-ttu-id="386c8-359">![Navigieren in den staging-Web-app](maintainable-azure-websites-managing-change-and-scale/_static/image36.png "Navigieren zu den staging-Web-app")</span><span class="sxs-lookup"><span data-stu-id="386c8-359">![Navigating to the staging web app](maintainable-azure-websites-managing-change-and-scale/_static/image36.png "Navigating to the staging web app")</span></span>

    <span data-ttu-id="386c8-360">*Navigieren Sie in der staging-App*</span><span class="sxs-lookup"><span data-stu-id="386c8-360">*Navigating to the staging app*</span></span>
7. <span data-ttu-id="386c8-361">Beachten Sie, dass diese He-Management-Seite wie jede andere WebApp-Verwaltungsseite aussieht.</span><span class="sxs-lookup"><span data-stu-id="386c8-361">Notice that he management page looks like any other web app's management page.</span></span> <span data-ttu-id="386c8-362">Navigieren Sie zu der **Bereitstellungen** Seite, und kopieren Sie die **Git-URL** Wert.</span><span class="sxs-lookup"><span data-stu-id="386c8-362">Navigate to the **Deployments** page and copy the **Git URL** value.</span></span> <span data-ttu-id="386c8-363">Sie werden weiter unten in dieser Übung verwendet.</span><span class="sxs-lookup"><span data-stu-id="386c8-363">You will use it later in this exercise.</span></span>

    ![Kopieren den Git-URL-Wert](maintainable-azure-websites-managing-change-and-scale/_static/image37.png)

    <span data-ttu-id="386c8-365">*Kopieren den Git-URL-Wert*</span><span class="sxs-lookup"><span data-stu-id="386c8-365">*Copying the Git URL value*</span></span>
8. <span data-ttu-id="386c8-366">Öffnen Sie ein neues **Git Bash** Konsole, und führen Sie die folgenden Befehle.</span><span class="sxs-lookup"><span data-stu-id="386c8-366">Open a new **Git Bash** console and execute the following commands.</span></span> <span data-ttu-id="386c8-367">Update der *[YOUR-ANWENDUNGSPFAD]* Platzhalter durch den Pfad zu der **GeekQuiz** Projektmappe befindet sich in der **Source\Ex1 DeployingWebSiteToStaging\Begin** Ordner "" Diese Übung.</span><span class="sxs-lookup"><span data-stu-id="386c8-367">Update the *[YOUR-APPLICATION-PATH]* placeholder with the path to the **GeekQuiz** solution, located in the **Source\Ex1-DeployingWebSiteToStaging\Begin** folder of this lab.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample11.cmd)]

    ![Git-Initialisierung und ersten Commits](maintainable-azure-websites-managing-change-and-scale/_static/image38.png)

    <span data-ttu-id="386c8-369">*Git-Initialisierung und ersten Commits*</span><span class="sxs-lookup"><span data-stu-id="386c8-369">*Git initialization and first commit*</span></span>
9. <span data-ttu-id="386c8-370">Führen Sie den folgenden Befehl aus, um Ihre Web-app mit der Remoteinstanz per Push übertragen **Git** Repository.</span><span class="sxs-lookup"><span data-stu-id="386c8-370">Run the following command to push your web app to the remote **Git** repository.</span></span> <span data-ttu-id="386c8-371">Ersetzen Sie den Platzhalter durch die URL, die Sie aus dem Verwaltungsportal erhalten haben.</span><span class="sxs-lookup"><span data-stu-id="386c8-371">Replace the placeholder with the URL you obtained from the management portal.</span></span> <span data-ttu-id="386c8-372">Sie werden aufgefordert, Ihr Kennwort für die Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="386c8-372">You will be prompted for your deployment password.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample12.cmd)]

    ![Auf Windows Azure übertragen](maintainable-azure-websites-managing-change-and-scale/_static/image39.png)

    <span data-ttu-id="386c8-374">*Auf Azure übertragen*</span><span class="sxs-lookup"><span data-stu-id="386c8-374">*Pushing to Azure*</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-375">Wenn Sie Inhalte auf dem FTP-Host oder die GIT-Repository einer Web-app bereitstellen, Sie müssen zur Authentifizierung verwenden die **bereitstellungsanmeldeinformationen** , die Sie erstellt haben, aus der Web-app **Schnellstart** oder **Dashboard**  Verwaltungsseiten.</span><span class="sxs-lookup"><span data-stu-id="386c8-375">When you deploy content to the FTP host or GIT repository of a web app, you must authenticate using the **deployment credentials** that you created from the web app's **Quick Start** or **Dashboard** management pages.</span></span> <span data-ttu-id="386c8-376">Wenn Sie nicht, dass Ihre Anmeldeinformationen für die Bereitstellung wissen können Sie problemlos mit dem Verwaltungsportal zurücksetzen.</span><span class="sxs-lookup"><span data-stu-id="386c8-376">If you do not know your deployment credentials you can easily reset them using the management portal.</span></span> <span data-ttu-id="386c8-377">Öffnen Sie die Web-app **Dashboard** Seite, und klicken Sie auf die **die bereitstellungsanmeldeinformationen für die zurücksetzen** Link.</span><span class="sxs-lookup"><span data-stu-id="386c8-377">Open the web app **Dashboard** page and click the **Reset your deployment credentials** link.</span></span> <span data-ttu-id="386c8-378">Geben Sie ein neues Kennwort ein, und klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="386c8-378">Provide a new password and click **OK**.</span></span> <span data-ttu-id="386c8-379">Anmeldeinformationen für die Bereitstellung gelten für die Verwendung mit allen Web-apps, die Ihrem Abonnement zugeordnet wurde.</span><span class="sxs-lookup"><span data-stu-id="386c8-379">Deployment credentials are valid for use with all web apps associated with your subscription.</span></span>
10. <span data-ttu-id="386c8-380">Um sicherzustellen, die Web-app in Azure erfolgreich verschoben wurde, kehren Sie zum Verwaltungsportal, und klicken Sie auf **Websites**.</span><span class="sxs-lookup"><span data-stu-id="386c8-380">In order to verify the web app was successfully pushed to Azure, go back to the management portal and click **Websites**.</span></span>
11. <span data-ttu-id="386c8-381">Suchen Sie Ihre Web-app, und erweitern Sie den Eintrag, um die stagingwebsiteslot anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="386c8-381">Locate your web app and expand the entry to display the staging site slot.</span></span> <span data-ttu-id="386c8-382">Klicken Sie auf die **Namen** um zur Seite "Verwaltung" zu wechseln.</span><span class="sxs-lookup"><span data-stu-id="386c8-382">Click its **Name** to go to the management page.</span></span>
12. <span data-ttu-id="386c8-383">Klicken Sie auf **Bereitstellungen** , finden Sie unter der **Bereitstellungsverlauf**.</span><span class="sxs-lookup"><span data-stu-id="386c8-383">Click **Deployments** to see the **deployment history**.</span></span> <span data-ttu-id="386c8-384">Stellen Sie sicher, dass es ist ein **aktive Bereitstellung** mit Ihrem  *&quot;anfängliche Commit&quot;*.</span><span class="sxs-lookup"><span data-stu-id="386c8-384">Verify that there is an **Active Deployment** with your *&quot;Initial Commit&quot;*.</span></span>

    ![Aktive Bereitstellung](maintainable-azure-websites-managing-change-and-scale/_static/image40.png)

    <span data-ttu-id="386c8-386">*Aktive Bereitstellung*</span><span class="sxs-lookup"><span data-stu-id="386c8-386">*Active deployment*</span></span>
13. <span data-ttu-id="386c8-387">Klicken Sie abschließend auf **Durchsuchen** in der Befehlsleiste, fahren Sie mit der Web-app.</span><span class="sxs-lookup"><span data-stu-id="386c8-387">Finally, click **Browse** in the command bar to go to the web app.</span></span>

    ![Durchsuchen von Web-app](maintainable-azure-websites-managing-change-and-scale/_static/image41.png)

    <span data-ttu-id="386c8-389">*Durchsuchen von Web-app*</span><span class="sxs-lookup"><span data-stu-id="386c8-389">*Browse web app*</span></span>
14. <span data-ttu-id="386c8-390">Wenn die Anwendung erfolgreich bereitgestellt wird, sehen Sie die Anmeldeseite Meister Quiz.</span><span class="sxs-lookup"><span data-stu-id="386c8-390">If the application is successfully deployed, you will see the Geek Quiz login page.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-391">Die URL der bereitgestellten Anwendung enthält den Namen der Ihre Web-app, gefolgt von *-staging*.</span><span class="sxs-lookup"><span data-stu-id="386c8-391">The address URL of the deployed application contains the name of your web app followed by *-staging*.</span></span>

    ![In der Stagingumgebung ausgeführte Anwendung](maintainable-azure-websites-managing-change-and-scale/_static/image42.png)

    <span data-ttu-id="386c8-393">*In der Stagingumgebung ausgeführte Anwendung*</span><span class="sxs-lookup"><span data-stu-id="386c8-393">*Application running in the staging environment*</span></span>
15. <span data-ttu-id="386c8-394">Wenn Sie die Anwendung vertraut machen möchten, klicken Sie auf **registrieren** um einen neuen Benutzer zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="386c8-394">If you wish to explore the application, click **Register** to register a new user.</span></span> <span data-ttu-id="386c8-395">Schließen Sie die Kontodetails, indem Sie einen Benutzernamen, e-Mail-Adresse und ein Kennwort eingeben.</span><span class="sxs-lookup"><span data-stu-id="386c8-395">Complete the account details by entering a user name, email address and password.</span></span> <span data-ttu-id="386c8-396">Im nächsten Schritt zeigt die Anwendung die erste Frage des Quiz.</span><span class="sxs-lookup"><span data-stu-id="386c8-396">Next, the application shows the first question of the quiz.</span></span> <span data-ttu-id="386c8-397">Beantworten Sie einige Fragen, um sicherzustellen, dass er wie erwartet funktioniert.</span><span class="sxs-lookup"><span data-stu-id="386c8-397">Answer a few questions to make sure it is working as expected.</span></span>

    ![Anwendung verwendet werden](maintainable-azure-websites-managing-change-and-scale/_static/image43.png)

    <span data-ttu-id="386c8-399">*Anwendung verwendet werden*</span><span class="sxs-lookup"><span data-stu-id="386c8-399">*Application ready to be used*</span></span>

<a id="Ex2Task4"></a>
#### <a name="task-4--promoting-the-web-app-to-production"></a><span data-ttu-id="386c8-400">Aufgabe 4: Heraufstufen der Web-App für die Produktion</span><span class="sxs-lookup"><span data-stu-id="386c8-400">Task 4 – Promoting the Web App to Production</span></span>

<span data-ttu-id="386c8-401">Nun, dass Sie überprüft haben, dass die Web-app in der Stagingumgebung ordnungsgemäß funktioniert, können Sie sie bis hin zur Produktion heraufzustufen.</span><span class="sxs-lookup"><span data-stu-id="386c8-401">Now that you have verified that the web app is working correctly in the staging environment, you are ready to promote it to production.</span></span> <span data-ttu-id="386c8-402">In dieser Aufgabe wird der stagingwebsiteslot mit dem Standort bereitstellungsslot ausgetauscht werden.</span><span class="sxs-lookup"><span data-stu-id="386c8-402">In this task, you will swap the staging site slot with the production site slot.</span></span>

1. <span data-ttu-id="386c8-403">Wechseln Sie zurück zum Verwaltungsportal, und wählen Sie den stagingslot-Website.</span><span class="sxs-lookup"><span data-stu-id="386c8-403">Go back to the management portal and select the staging site slot.</span></span> <span data-ttu-id="386c8-404">Klicken Sie auf **austauschen** in der Befehlsleiste.</span><span class="sxs-lookup"><span data-stu-id="386c8-404">Click **Swap** in the command bar.</span></span>

    ![Wechseln Sie zur Produktion](maintainable-azure-websites-managing-change-and-scale/_static/image44.png)

    <span data-ttu-id="386c8-406">*Wechseln Sie zur Produktion*</span><span class="sxs-lookup"><span data-stu-id="386c8-406">*Swap to production*</span></span>
2. <span data-ttu-id="386c8-407">Klicken Sie auf **Ja** im Dialogfeld zur Bestätigung der Swap-Vorgang fortsetzen.</span><span class="sxs-lookup"><span data-stu-id="386c8-407">Click **Yes** in the confirmation dialog box to proceed with the swap operation.</span></span> <span data-ttu-id="386c8-408">Den Inhalt des Produktionsstandorts mit dem Inhalt der staging-Website wird von Azure sofort ausgetauscht werden.</span><span class="sxs-lookup"><span data-stu-id="386c8-408">Azure will immediately swap the content of the production site with the content of the staging site.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-409">Einige Einstellungen aus der bereitgestellten Version automatisch die Produktionsversion (z. B. Verbindungszeichenfolge überschreibt, Handlerzuordnungen usw.) kopiert werden, aber andere Einstellungen werden nicht geändert (z. B. DNS-Endpunkte, SSL-Bindungen, usw.).</span><span class="sxs-lookup"><span data-stu-id="386c8-409">Some settings from the staged version will automatically be copied to the production version (e.g. connection string overrides, handler mappings, etc.) but other settings will not change (e.g. DNS endpoints, SSL bindings, etc.).</span></span>

    ![Swap-Vorgang bestätigen](maintainable-azure-websites-managing-change-and-scale/_static/image45.png)

    <span data-ttu-id="386c8-411">*Swap-Vorgang bestätigen*</span><span class="sxs-lookup"><span data-stu-id="386c8-411">*Confirming swap operation*</span></span>
3. <span data-ttu-id="386c8-412">Nachdem der Austausch abgeschlossen ist, wählen Sie den produktionsslot zu übergeben, und klicken Sie auf **Durchsuchen** in der Befehlsleiste des Produktionsstandorts zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="386c8-412">Once the swap is complete, select the production slot and click **Browse** in the command bar to open the production site.</span></span> <span data-ttu-id="386c8-413">Beachten Sie die URL in die Adressleiste ein.</span><span class="sxs-lookup"><span data-stu-id="386c8-413">Notice the URL in the address bar.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-414">Sie müssen möglicherweise aktualisieren Sie Ihren Browser, um den Zwischenspeicher zu löschen.</span><span class="sxs-lookup"><span data-stu-id="386c8-414">You might need to refresh your browser to clear cache.</span></span> <span data-ttu-id="386c8-415">In Internet Explorer hierzu können Sie durch Drücken von **STRG + R**.</span><span class="sxs-lookup"><span data-stu-id="386c8-415">In Internet Explorer, you can do this by pressing **CTRL+R**.</span></span>

    ![Web-app, die in der produktionsumgebung ausgeführt wird](maintainable-azure-websites-managing-change-and-scale/_static/image46.png)
4. <span data-ttu-id="386c8-417">In der **GitBash** -Konsole, aktualisieren Sie die remote-URL für den lokalen Git-Repository zum produktionsslot abzielen.</span><span class="sxs-lookup"><span data-stu-id="386c8-417">In the **GitBash** console, update the remote URL for the local Git repository to target the production slot.</span></span> <span data-ttu-id="386c8-418">Führen Sie hierzu den folgenden Befehl, und Ersetzen Sie die Platzhalter durch Ihren Benutzernamen für die Bereitstellung und der Name Ihrer Web-App ein.</span><span class="sxs-lookup"><span data-stu-id="386c8-418">To do this, run the following command replacing the placeholders with your deployment username and the name of your web app.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-419">In der folgenden Übung werden Sie Änderungen per Push auf des Produktionsstandorts statt der Stagingumgebung nur für die Einfachheit der Umgebung übertragen.</span><span class="sxs-lookup"><span data-stu-id="386c8-419">In the following exercises, you will push changes to the production site instead of staging just for the simplicity of the lab.</span></span> <span data-ttu-id="386c8-420">In einem realen Szenario wird empfohlen, die Änderungen in der Stagingumgebung zu überprüfen, bevor bis hin zur Produktion heraufgestuft.</span><span class="sxs-lookup"><span data-stu-id="386c8-420">In a real-world scenario, it is recommended to verify the changes in the staging environment before promoting to production.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample13.cmd)]

<a id="Exercise3"></a>
### <a name="exercise-3-performing-deployment-rollback-in-production"></a><span data-ttu-id="386c8-421">Übung 3: Ausführen des Rollbacks für Bereitstellung in der Produktion</span><span class="sxs-lookup"><span data-stu-id="386c8-421">Exercise 3: Performing Deployment Rollback in Production</span></span>

<span data-ttu-id="386c8-422">Es gibt Szenarien, in denen Sie keine staging-Slot ausführen hot-Austausch zwischen den Staging- und produktionsumgebungen, z. B. bei Verwendung mit **frei** oder **Shared** Modus.</span><span class="sxs-lookup"><span data-stu-id="386c8-422">There are scenarios where you do not have a staging slot to perform hot swap between staging and production, for example, if you are working with **Free** or **Shared** mode.</span></span> <span data-ttu-id="386c8-423">In jenen Szenarien sollten Sie Ihre Anwendung in einer testumgebung – entweder lokal oder an einem Remotestandort – Testen vor der Bereitstellung bis hin zur Produktion.</span><span class="sxs-lookup"><span data-stu-id="386c8-423">In those scenarios, you should test your application in a testing environment –either locally or in a remote site– before deploying to production.</span></span> <span data-ttu-id="386c8-424">Es ist jedoch möglich, dass ein Problem nicht erkannt wird, während der Testphase am Produktionsstandort auftreten kann.</span><span class="sxs-lookup"><span data-stu-id="386c8-424">However, it is possible that an issue not detected during the testing phase may arise in the production site.</span></span> <span data-ttu-id="386c8-425">In diesem Fall ist es wichtig, einen Mechanismus zum problemlos wechseln auf eine vorherige und stabiler und ausgereifter Version der Anwendung so schnell wie möglich zu verfügen.</span><span class="sxs-lookup"><span data-stu-id="386c8-425">In this case, it is important to have a mechanism to easily switch to a previous and more stable version of the application as quickly as possible.</span></span>

<span data-ttu-id="386c8-426">In **Azure App Service**, dauerhaften Bereitstellung über quellcodeverwaltung macht diese mögliche Dank der **erneut bereitstellen** Aktion im Verwaltungsportal verfügbar.</span><span class="sxs-lookup"><span data-stu-id="386c8-426">In **Azure App Service**, continuous deployment from source control makes this possible thanks to the **redeploy** action available in the management portal.</span></span> <span data-ttu-id="386c8-427">Azure verfolgt die per Push auf das Repository übertragen Commits zugeordneten Bereitstellungen und bietet eine Option aus, um die Anwendung mithilfe eines Ihrer vorherigen Bereitstellungen zu einem beliebigen Zeitpunkt erneut bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="386c8-427">Azure keeps track of the deployments associated with the commits pushed to the repository and provides an option to redeploy your application using any of your previous deployments, at any time.</span></span>

<span data-ttu-id="386c8-428">In dieser Übung führen Sie eine Änderung an den Code in der **Meister Quiz** Anwendung, die absichtlich Fügt eine *Fehler*.</span><span class="sxs-lookup"><span data-stu-id="386c8-428">In this exercise you will perform a change to the code in the **Geek Quiz** application that intentionally injects a *bug*.</span></span> <span data-ttu-id="386c8-429">Die Anwendung bis hin zur Produktion für die Fehlermeldung wird bereitgestellt, und klicken Sie dann Sie werden Nutzen der Funktion erneut bereitstellen, auf den vorherigen Zustand zurückgesetzt.</span><span class="sxs-lookup"><span data-stu-id="386c8-429">You will deploy the application to production to see the error, and then you will take advantage of the redeploy feature to go back to the previous state.</span></span>

<a id="Ex3Task1"></a>
#### <a name="task-1--updating-the-geek-quiz-application"></a><span data-ttu-id="386c8-430">Aufgabe 1: Aktualisieren der Meister Quiz-Anwendung</span><span class="sxs-lookup"><span data-stu-id="386c8-430">Task 1 – Updating the Geek Quiz Application</span></span>

<span data-ttu-id="386c8-431">In diesem Schritt gestalten Sie einen kleinen Teil des Codes von der **TriviaController** Klasse Teil der Logik zu extrahieren, die die ausgewählte Quiz-Option in eine neue Methode aus der Datenbank abruft.</span><span class="sxs-lookup"><span data-stu-id="386c8-431">In this task, you will refactor a small piece of code of the **TriviaController** class to extract part of the logic that retrieves the selected quiz option from the database into a new method.</span></span>

1. <span data-ttu-id="386c8-432">Wechseln Sie zu der Instanz von Visual Studio mit der **GeekQuiz** Lösung aus der vorherigen Übung.</span><span class="sxs-lookup"><span data-stu-id="386c8-432">Switch to the Visual Studio instance with the **GeekQuiz** solution from the previous exercise.</span></span>
2. <span data-ttu-id="386c8-433">In **Projektmappen-Explorer**öffnen die **TriviaController.cs** Datei innerhalb der **Controller** Ordner.</span><span class="sxs-lookup"><span data-stu-id="386c8-433">In **Solution Explorer**, open the **TriviaController.cs** file inside the **Controllers** folder.</span></span>
3. <span data-ttu-id="386c8-434">Suchen Sie die **StoreAsync** Methode, und wählen Sie der Code in der folgenden Abbildung hervorgehoben.</span><span class="sxs-lookup"><span data-stu-id="386c8-434">Locate the **StoreAsync** method and select the code highlighted in the following figure.</span></span>

    ![Wenn Sie den Code auswählen](maintainable-azure-websites-managing-change-and-scale/_static/image47.png)

    <span data-ttu-id="386c8-436">*Wenn Sie den Code auswählen*</span><span class="sxs-lookup"><span data-stu-id="386c8-436">*Selecting the code*</span></span>
4. <span data-ttu-id="386c8-437">Mit der rechten Maustaste in des ausgewählten Codes, erweitern Sie die **Umgestalten** Menü **Methode extrahieren...** .</span><span class="sxs-lookup"><span data-stu-id="386c8-437">Right-click the selected code, expand the **Refactor** menu and select **Extract Method...**.</span></span>

    ![Den Code extrahieren als eine neue Methode](maintainable-azure-websites-managing-change-and-scale/_static/image48.png)

    <span data-ttu-id="386c8-439">*Wählen die Extract-Methode*</span><span class="sxs-lookup"><span data-stu-id="386c8-439">*Selecting Extract Method*</span></span>
5. <span data-ttu-id="386c8-440">In der **Methode extrahieren** Dialogfeld Feld "Name" die neue Methode *MatchesOption* , und klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="386c8-440">In the **Extract Method** dialog box, name the new method *MatchesOption* and click **OK**.</span></span>

    ![Dabei werden der Methodenname](maintainable-azure-websites-managing-change-and-scale/_static/image49.png)

    <span data-ttu-id="386c8-442">*Angeben des Namens für die extrahierten-Methode*</span><span class="sxs-lookup"><span data-stu-id="386c8-442">*Specifying the name for the extracted method*</span></span>
6. <span data-ttu-id="386c8-443">Wird in der ausgewählte Code extrahiert die **MatchesOption** Methode.</span><span class="sxs-lookup"><span data-stu-id="386c8-443">The selected code is then extracted into the **MatchesOption** method.</span></span> <span data-ttu-id="386c8-444">Der resultierende Code wird im folgenden Codeausschnitt gezeigt.</span><span class="sxs-lookup"><span data-stu-id="386c8-444">The resulting code is shown in the following snippet.</span></span>

    [!code-csharp[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample14.cs)]
7. <span data-ttu-id="386c8-445">Drücken Sie **STRG + S** um die Änderungen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="386c8-445">Press **CTRL + S** to save the changes.</span></span>

<a id="Ex3Task2"></a>
#### <a name="task-2--redeploying-the-geek-quiz-application"></a><span data-ttu-id="386c8-446">Aufgabe 2 – die Meister Quiz Anwendung erneut bereitzustellen</span><span class="sxs-lookup"><span data-stu-id="386c8-446">Task 2 – Redeploying the Geek Quiz Application</span></span>

<span data-ttu-id="386c8-447">Sie werden jetzt die Änderungen mithilfe von Push übertragen, die in der vorherigen Aufgabe im Repository vorgenommen wird, die eine neue Bereitstellung in der produktionsumgebung ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="386c8-447">You will now push the changes you made in the previous task to the repository, which will trigger a new deployment to the production environment.</span></span> <span data-ttu-id="386c8-448">Klicken Sie dann, Fehlerbehebung Sie ein Problem mit der **F12-Entwicklungstools** von Internet Explorer bereitgestellt, und führen Sie dann einen Rollback auf die vorherige Bereitstellung aus dem Azure-Verwaltungsportal.</span><span class="sxs-lookup"><span data-stu-id="386c8-448">Then, you will troubleshot an issue using the **F12 development tools** provided by Internet Explorer, and then perform a rollback to the previous deployment from the Azure management portal.</span></span>

1. <span data-ttu-id="386c8-449">Öffnen Sie ein neues **Git Bash** Konsole, um die aktualisierte Anwendung auf Azure App Service bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="386c8-449">Open a new **Git Bash** console to deploy the updated application to Azure App Service.</span></span>
2. <span data-ttu-id="386c8-450">Führen Sie die folgenden Befehle, die Änderungen in Azure zu übertragen.</span><span class="sxs-lookup"><span data-stu-id="386c8-450">Execute the following commands to push the changes to Azure.</span></span> <span data-ttu-id="386c8-451">Update der *[YOUR-ANWENDUNGSPFAD]* Platzhalter durch den Pfad zu der **GeekQuiz** Lösung.</span><span class="sxs-lookup"><span data-stu-id="386c8-451">Update the *[YOUR-APPLICATION-PATH]* placeholder with the path to the **GeekQuiz** solution.</span></span> <span data-ttu-id="386c8-452">Sie werden aufgefordert, Ihr Kennwort für die Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="386c8-452">You will be prompted for your deployment password.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample15.cmd)]

    ![Der Speicherort der umgestaltete Code in Azure](maintainable-azure-websites-managing-change-and-scale/_static/image50.png)

    <span data-ttu-id="386c8-454">*Der Speicherort der umgestaltete Code in Azure*</span><span class="sxs-lookup"><span data-stu-id="386c8-454">*Pushing refactored code to Azure*</span></span>
3. <span data-ttu-id="386c8-455">Öffnen Sie Internet Explorer, und navigieren Sie zu Ihrer Web-app (z. B. `http://<your-web-site>.azurewebsites.net`).</span><span class="sxs-lookup"><span data-stu-id="386c8-455">Open Internet Explorer and navigate to your web app (e.g. `http://<your-web-site>.azurewebsites.net`).</span></span> <span data-ttu-id="386c8-456">Melden Sie sich mit den zuvor erstellten Anmeldeinformationen.</span><span class="sxs-lookup"><span data-stu-id="386c8-456">Log in using the previously created credentials.</span></span>
4. <span data-ttu-id="386c8-457">Drücken Sie **F12** um die Entwicklungstools zu starten, wählen die **Netzwerk** Registerkarte, und klicken Sie auf die **wiedergeben** Schaltfläche zum Starten der Aufzeichnung.</span><span class="sxs-lookup"><span data-stu-id="386c8-457">Press **F12** to launch the development tools, select the **Network** tab and click the **Play** button to start recording.</span></span>

    <span data-ttu-id="386c8-458">![Starten des Netzwerk-Aufzeichnung](maintainable-azure-websites-managing-change-and-scale/_static/image51.png "Netzwerk Aufzeichnung starten")</span><span class="sxs-lookup"><span data-stu-id="386c8-458">![Starting network recording](maintainable-azure-websites-managing-change-and-scale/_static/image51.png "Starting network recording")</span></span>

    <span data-ttu-id="386c8-459">*Netzwerk-Aufzeichnung starten*</span><span class="sxs-lookup"><span data-stu-id="386c8-459">*Starting network recording*</span></span>
5. <span data-ttu-id="386c8-460">Eine Option für das Quiz auswählen.</span><span class="sxs-lookup"><span data-stu-id="386c8-460">Select any option of the quiz.</span></span> <span data-ttu-id="386c8-461">Sie sehen, dass nichts passiert.</span><span class="sxs-lookup"><span data-stu-id="386c8-461">You will see that nothing happens.</span></span>
6. <span data-ttu-id="386c8-462">In der **F12** Fenster, den Eintrag, der die HTTP POST-Anforderung enthält eine HTTP **500** Ergebnis.</span><span class="sxs-lookup"><span data-stu-id="386c8-462">In the **F12** window, the entry corresponding to the POST HTTP request shows an HTTP **500** result.</span></span>

    ![HTTP 500 Fehler](maintainable-azure-websites-managing-change-and-scale/_static/image52.png)

    <span data-ttu-id="386c8-464">*HTTP 500 Fehler*</span><span class="sxs-lookup"><span data-stu-id="386c8-464">*HTTP 500 error*</span></span>
7. <span data-ttu-id="386c8-465">Wählen Sie die **Konsole** Registerkarte. Mit den Details der Ursache ist ein Fehler protokolliert.</span><span class="sxs-lookup"><span data-stu-id="386c8-465">Select the **Console** tab. An error is logged with the details of the cause.</span></span>

    ![Protokollierte Fehler](maintainable-azure-websites-managing-change-and-scale/_static/image53.png)

    <span data-ttu-id="386c8-467">*Protokollierte Fehler*</span><span class="sxs-lookup"><span data-stu-id="386c8-467">*Logged error*</span></span>
8. <span data-ttu-id="386c8-468">Suchen Sie nach dem Detailabschnitt des Fehlers.</span><span class="sxs-lookup"><span data-stu-id="386c8-468">Locate the details part of the error.</span></span> <span data-ttu-id="386c8-469">Es ist offensichtlich, wird dieser Fehler durch den Code, der Sie ein Commit in den vorherigen Schritten Umgestaltung verursacht.</span><span class="sxs-lookup"><span data-stu-id="386c8-469">Clearly, this error is caused by the code refactoring you committed in the previous steps.</span></span>

    <span data-ttu-id="386c8-470">`Details: LINQ to Entities does not recognize the method 'Boolean MatchesOption ...`</span><span class="sxs-lookup"><span data-stu-id="386c8-470">`Details: LINQ to Entities does not recognize the method 'Boolean MatchesOption ...`.</span></span>
9. <span data-ttu-id="386c8-471">Schließen Sie den Browser nicht.</span><span class="sxs-lookup"><span data-stu-id="386c8-471">Do not close the browser.</span></span>
10. <span data-ttu-id="386c8-472">Wechseln Sie in einer neuen Browserinstanz zu den [Azure-Verwaltungsportal](https://manage.windowsazure.com) und melden Sie sich mit dem Microsoft-Konto, das Ihrem Abonnement zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="386c8-472">In a new browser instance, navigate to the [Azure management portal](https://manage.windowsazure.com) and sign in using the Microsoft account associated with your subscription.</span></span>
11. <span data-ttu-id="386c8-473">Wählen Sie **Websites** , und klicken Sie auf die Web-app, die Sie in der Übung 2 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="386c8-473">Select **Websites** and click the web app you created in Exercise 2.</span></span>
12. <span data-ttu-id="386c8-474">Navigieren Sie zu der **Bereitstellungen** Seite.</span><span class="sxs-lookup"><span data-stu-id="386c8-474">Navigate to the **Deployments** page.</span></span> <span data-ttu-id="386c8-475">Beachten Sie, dass alle ausgeführten Commits in der Bereitstellungsverlauf aufgeführt sind.</span><span class="sxs-lookup"><span data-stu-id="386c8-475">Notice that all the commits performed are listed in the deployment history.</span></span>

    ![Liste der vorhandenen Bereitstellungen](maintainable-azure-websites-managing-change-and-scale/_static/image54.png)

    <span data-ttu-id="386c8-477">*Liste der vorhandenen Bereitstellungen*</span><span class="sxs-lookup"><span data-stu-id="386c8-477">*List of existing deployments*</span></span>
13. <span data-ttu-id="386c8-478">Wählen Sie die letzten Commit aus, und klicken Sie auf **erneut bereitstellen** in der Befehlszeile.</span><span class="sxs-lookup"><span data-stu-id="386c8-478">Select the previous commit and click **Redeploy** on the command bar.</span></span>

    ![Erneutes Bereitstellen des vorherigen Commits](maintainable-azure-websites-managing-change-and-scale/_static/image55.png)

    <span data-ttu-id="386c8-480">*Erneutes Bereitstellen des vorherigen Commits*</span><span class="sxs-lookup"><span data-stu-id="386c8-480">*Redeploying the previous commit*</span></span>
14. <span data-ttu-id="386c8-481">Wenn Sie dazu aufgefordert werden, um zu bestätigen, klicken Sie auf **Ja**.</span><span class="sxs-lookup"><span data-stu-id="386c8-481">When prompted to confirm, click **Yes**.</span></span>

    ![Bestätigen die erneute Bereitstellung](maintainable-azure-websites-managing-change-and-scale/_static/image56.png)
15. <span data-ttu-id="386c8-483">Wenn die Bereitstellung abgeschlossen ist, wechseln Sie zurück an die Browserinstanz mit Ihrer Web-app, und drücken Sie **STRG + F5**.</span><span class="sxs-lookup"><span data-stu-id="386c8-483">When the deployment completes, switch back to the browser instance with your web app and press **CTRL + F5**.</span></span>
16. <span data-ttu-id="386c8-484">Klicken Sie auf eine der Optionen.</span><span class="sxs-lookup"><span data-stu-id="386c8-484">Click any of the options.</span></span> <span data-ttu-id="386c8-485">Die Flip Animation jetzt erfolgen soll und das Ergebnis (*richtigen/falschen*) wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="386c8-485">The flip animation will now take place and the result (*correct/incorrect*) will be displayed.</span></span>
17. <span data-ttu-id="386c8-486">(Optional) Wechseln Sie zu der **Git Bash** Konsole, und führen Sie die folgenden Befehle, um die letzten Commit wiederherzustellen.</span><span class="sxs-lookup"><span data-stu-id="386c8-486">(Optional) Switch to the **Git Bash** console and execute the following commands to revert to the previous commit.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-487">Diese Befehle erstellen einen neuen Commit, der alle Änderungen in das Git-Repository wird rückgängig gemacht, die in der fehlerhaften Commit vorgenommen wurden.</span><span class="sxs-lookup"><span data-stu-id="386c8-487">These commands create a new commit that undoes all changes in the Git repository that were made in the bad commit.</span></span> <span data-ttu-id="386c8-488">Azure die Anwendung mit der neuen Commit klicken Sie dann erneut bereit.</span><span class="sxs-lookup"><span data-stu-id="386c8-488">Azure will then redeploy the application using the new commit.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample16.cmd)]

<a id="Exercise4"></a>
### <a name="exercise-4-scaling-using-azure-storage"></a><span data-ttu-id="386c8-489">Übung 4: Skalierung mit dem Azure-Speicher</span><span class="sxs-lookup"><span data-stu-id="386c8-489">Exercise 4: Scaling Using Azure Storage</span></span>

<span data-ttu-id="386c8-490">**BLOBs** sind die einfachste Methode zum Speichern großer Mengen unstrukturierter Text-oder Binärdaten, z. B. Video, Audio und Images.</span><span class="sxs-lookup"><span data-stu-id="386c8-490">**Blobs** are the simplest way to store large amounts of unstructured text or binary data such as video, audio and images.</span></span> <span data-ttu-id="386c8-491">Verschieben die statische Inhalte Ihrer Anwendung in den Speicher, wird Ihre Anwendung skalieren, indem Sie die Bilder oder Dokumente direkt an den Browser bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="386c8-491">Moving the static content of your application to Storage, helps to scale your application by serving images or documents directly to the browser.</span></span>

<span data-ttu-id="386c8-492">In dieser Übung wird den statischen Inhalt der Anwendung, um einen Blob-Container verschoben werden.</span><span class="sxs-lookup"><span data-stu-id="386c8-492">In this exercise, you will move the static content of your application to a Blob container.</span></span> <span data-ttu-id="386c8-493">Konfigurieren die Anwendung hinzufügen wird ein **ASP.NET URL rewrite Regel** in der **"Web.config"** Ihres Inhalts an den Blob-Container umleiten.</span><span class="sxs-lookup"><span data-stu-id="386c8-493">Then you will configure your application to add an **ASP.NET URL rewrite rule** in the **Web.config** to redirect your content to the Blob container.</span></span>

<a id="Ex4Task1"></a>
#### <a name="task-1--creating-an-azure-storage-account"></a><span data-ttu-id="386c8-494">Aufgabe 1 – erstellen ein Azure Storage-Konto</span><span class="sxs-lookup"><span data-stu-id="386c8-494">Task 1 – Creating an Azure Storage Account</span></span>

<span data-ttu-id="386c8-495">In dieser Aufgabe erfahren Sie, wie Sie ein neues Speicherkonto mithilfe des Verwaltungsportals erstellen.</span><span class="sxs-lookup"><span data-stu-id="386c8-495">In this task you will learn how to create a new storage account using the management portal.</span></span>

1. <span data-ttu-id="386c8-496">Navigieren Sie zu der [Azure-Verwaltungsportal](https://manage.windowsazure.com) und melden Sie sich mit dem Microsoft-Konto, das Ihrem Abonnement zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="386c8-496">Navigate to the [Azure management portal](https://manage.windowsazure.com) and sign in using the Microsoft account associated with your subscription.</span></span>
2. <span data-ttu-id="386c8-497">Wählen Sie **neue | Datendienste | Speicher | Schnellerfassung** beim Starten der Erstellung eines neuen Speicherkontos.</span><span class="sxs-lookup"><span data-stu-id="386c8-497">Select **New | Data Services | Storage | Quick Create** to start creating a new storage account.</span></span> <span data-ttu-id="386c8-498">Geben Sie einen eindeutigen Namen für das Konto, und wählen Sie eine **Region** aus der Liste.</span><span class="sxs-lookup"><span data-stu-id="386c8-498">Enter a unique name for the account and select a **Region** from the list.</span></span> <span data-ttu-id="386c8-499">Klicken Sie auf **Speicherkonto erstellen** um den Vorgang fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="386c8-499">Click **Create Storage Account** to continue.</span></span>

    <span data-ttu-id="386c8-500">![Erstellen eines neuen Speicherkontos](maintainable-azure-websites-managing-change-and-scale/_static/image57.png "ein neues Speicherkonto erstellen")</span><span class="sxs-lookup"><span data-stu-id="386c8-500">![Creating a new Storage Account](maintainable-azure-websites-managing-change-and-scale/_static/image57.png "Creating a new Storage Account")</span></span>

    <span data-ttu-id="386c8-501">*Erstellen eines neuen Speicherkontos*</span><span class="sxs-lookup"><span data-stu-id="386c8-501">*Creating a new storage account*</span></span>
3. <span data-ttu-id="386c8-502">In der **Speicher** Abschnitt, warten Sie, bis ändert sich der Status des neuen Speicherkontos zu *Online* weiterzuverwenden mit den folgenden Schritt aus.</span><span class="sxs-lookup"><span data-stu-id="386c8-502">In the **Storage** section, wait until the status of the new storage account changes to *Online* in order to continue with the following step.</span></span>

    <span data-ttu-id="386c8-503">![Erstellte Speicherkonto](maintainable-azure-websites-managing-change-and-scale/_static/image58.png "erstellte Speicherkonto")</span><span class="sxs-lookup"><span data-stu-id="386c8-503">![Storage Account created](maintainable-azure-websites-managing-change-and-scale/_static/image58.png "Storage Account created")</span></span>

    <span data-ttu-id="386c8-504">*Erstellte Speicherkonto*</span><span class="sxs-lookup"><span data-stu-id="386c8-504">*Storage Account created*</span></span>
4. <span data-ttu-id="386c8-505">Klicken Sie auf den Namen des Speicherkontos, und klicken Sie dann auf die **Dashboard** Link am oberen Rand der Seite.</span><span class="sxs-lookup"><span data-stu-id="386c8-505">Click on the storage account name and then click the **Dashboard** link at the top of the page.</span></span> <span data-ttu-id="386c8-506">Die **Dashboard** Seite bietet Ihnen Informationen über den Status des Kontos und die Dienstendpunkte, die in Ihren Anwendungen verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="386c8-506">The **Dashboard** page provides you with information about the status of the account and the service endpoints that can be used within your applications.</span></span>

    <span data-ttu-id="386c8-507">![Anzeigen von Speicherkonto-Dashboard](maintainable-azure-websites-managing-change-and-scale/_static/image59.png "Speicherkonto-Dashboard anzeigen")</span><span class="sxs-lookup"><span data-stu-id="386c8-507">![Displaying the Storage Account Dashboard](maintainable-azure-websites-managing-change-and-scale/_static/image59.png "Displaying the Storage Account Dashboard")</span></span>

    <span data-ttu-id="386c8-508">*Anzeigen von Speicherkonto-Dashboard*</span><span class="sxs-lookup"><span data-stu-id="386c8-508">*Displaying the Storage Account Dashboard*</span></span>
5. <span data-ttu-id="386c8-509">Klicken Sie auf die **Zugriffstastenverwaltung** Schaltfläche in der Navigationsleiste.</span><span class="sxs-lookup"><span data-stu-id="386c8-509">Click the **Manage Access Keys** button in the navigation bar.</span></span>

    <span data-ttu-id="386c8-510">![Schaltfläche "Zugriffsschlüssel verwalten"](maintainable-azure-websites-managing-change-and-scale/_static/image60.png "Zugriffstastenverwaltung-Schaltfläche")</span><span class="sxs-lookup"><span data-stu-id="386c8-510">![Manage Access Keys button](maintainable-azure-websites-managing-change-and-scale/_static/image60.png "Manage Access Keys button")</span></span>

    <span data-ttu-id="386c8-511">*Verwalten von Zugriffstasten-Schaltfläche*</span><span class="sxs-lookup"><span data-stu-id="386c8-511">*Manage Access Keys button*</span></span>
6. <span data-ttu-id="386c8-512">In der **Zugriffsschlüssel verwalten** (Dialogfeld), kopieren die **Speicherkontoname** und **primärer Zugriffsschlüssel** , wie Sie in der folgenden Übung benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="386c8-512">In the **Manage Access Keys** dialog box, copy the **Storage Account Name** and **Primary Access Key** as you will need them in the following exercise.</span></span> <span data-ttu-id="386c8-513">Schließen Sie dann das Dialogfeld.</span><span class="sxs-lookup"><span data-stu-id="386c8-513">Then, close the dialog box.</span></span>

    <span data-ttu-id="386c8-514">![Verwalten Zugriffsschlüssel Dialogfeld](maintainable-azure-websites-managing-change-and-scale/_static/image61.png "Zugriffsschlüssel verwalten (Dialogfeld)")</span><span class="sxs-lookup"><span data-stu-id="386c8-514">![Manage Access Key dialog box](maintainable-azure-websites-managing-change-and-scale/_static/image61.png "Manage Access Key dialog box")</span></span>

    <span data-ttu-id="386c8-515">*Verwalten des Zugriffsschlüssels (Dialogfeld)*</span><span class="sxs-lookup"><span data-stu-id="386c8-515">*Manage Access Key dialog box*</span></span>

<a id="Ex4Task2"></a>
#### <a name="task-2--uploading-an-asset-to-azure-blob-storage"></a><span data-ttu-id="386c8-516">Aufgabe 2: Hochladen eines Medienobjekts in Azure Blob-Speicher</span><span class="sxs-lookup"><span data-stu-id="386c8-516">Task 2 – Uploading an Asset to Azure Blob Storage</span></span>

<span data-ttu-id="386c8-517">In dieser Aufgabe verwenden Sie das Server-Explorer-Fenster in Visual Studio für die Verbindung mit Ihrem Speicherkonto.</span><span class="sxs-lookup"><span data-stu-id="386c8-517">In this task, you will use the Server Explorer window from Visual Studio to connect to your storage account.</span></span> <span data-ttu-id="386c8-518">Anschließend erstellen Sie einen Blob-Container und Hochladen einer Datei mit dem Logo Meister Quiz in den Container.</span><span class="sxs-lookup"><span data-stu-id="386c8-518">You will then create a blob container and upload a file with the Geek Quiz logo to the container.</span></span>

1. <span data-ttu-id="386c8-519">Wechseln Sie zu der Instanz von Visual Studio mit der **GeekQuiz** Lösung aus der vorherigen Übung.</span><span class="sxs-lookup"><span data-stu-id="386c8-519">Switch to the Visual Studio instance with the **GeekQuiz** solution from the previous exercise.</span></span>
2. <span data-ttu-id="386c8-520">Wählen Sie in der Menüleiste **Ansicht** , und klicken Sie dann auf **Server-Explorer**.</span><span class="sxs-lookup"><span data-stu-id="386c8-520">From the menu bar, select **View** and then click **Server Explorer**.</span></span>
3. <span data-ttu-id="386c8-521">In **Server-Explorer**, mit der rechten Maustaste die **Azure** Knoten, und wählen **mit Azure verbinden...** . Melden Sie sich mit dem Microsoft-Konto, das Ihrem Abonnement zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="386c8-521">In **Server Explorer**, right-click the **Azure** node and select **Connect to Azure...**. Sign in using the Microsoft account associated with your subscription.</span></span>

    ![Herstellen einer Verbindung mit Windows Azure](maintainable-azure-websites-managing-change-and-scale/_static/image62.png)

    <span data-ttu-id="386c8-523">*Herstellen einer Verbindung mit Azure*</span><span class="sxs-lookup"><span data-stu-id="386c8-523">*Connect to Azure*</span></span>
4. <span data-ttu-id="386c8-524">Erweitern Sie die **Azure** Knoten mit der rechten Maustaste **Speicher** , und wählen Sie **Externspeicher anfügen...** .</span><span class="sxs-lookup"><span data-stu-id="386c8-524">Expand the **Azure** node, right-click **Storage** and select **Attach External Storage...**.</span></span>
5. <span data-ttu-id="386c8-525">In der **neues Speicherkonto hinzufügen** Dialogfeld Geben Sie die **Kontoname** und **kontoschlüssel** Sie erworben haben, in der vorherigen Aufgabe und auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="386c8-525">In the **Add New Storage Account** dialog box, enter the **Account name** and **Account key** you obtained in the previous task and click **OK**.</span></span>

    ![Neues Speicherkonto Dialogfeld "hinzufügen"](maintainable-azure-websites-managing-change-and-scale/_static/image63.png)

    <span data-ttu-id="386c8-527">*Neues Speicherkonto Dialogfeld "hinzufügen"*</span><span class="sxs-lookup"><span data-stu-id="386c8-527">*Add New Storage Account dialog box*</span></span>
6. <span data-ttu-id="386c8-528">Ihr Speicherkonto sollte angezeigt werden, unter der **Speicher** Knoten.</span><span class="sxs-lookup"><span data-stu-id="386c8-528">Your storage account should appear under the **Storage** node.</span></span> <span data-ttu-id="386c8-529">Erweitern Sie Ihr Speicherkonto an, mit der rechten Maustaste **Blobs** , und wählen Sie **Blob-Container erstellen...** .</span><span class="sxs-lookup"><span data-stu-id="386c8-529">Expand your storage account, right-click **Blobs** and select **Create Blob Container...**.</span></span>

    <span data-ttu-id="386c8-530">![Blob-Container erstellen](maintainable-azure-websites-managing-change-and-scale/_static/image64.png "Blob-Container erstellen")</span><span class="sxs-lookup"><span data-stu-id="386c8-530">![Create Blob Container](maintainable-azure-websites-managing-change-and-scale/_static/image64.png "Create Blob Container")</span></span>

    <span data-ttu-id="386c8-531">*Blob-Container erstellen*</span><span class="sxs-lookup"><span data-stu-id="386c8-531">*Create Blob Container*</span></span>
7. <span data-ttu-id="386c8-532">In der **Erstellen eines Blobcontainers** Dialogfeld Feld, geben Sie einen Namen für den Blob-Container aus, und klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="386c8-532">In the **Create Blob Container** dialog box, enter a name for the blob container and click **OK**.</span></span>

    <span data-ttu-id="386c8-533">![Dialogfeld für Blob-Container erstellen](maintainable-azure-websites-managing-change-and-scale/_static/image65.png "Blob-Container erstellen (Dialogfeld)")</span><span class="sxs-lookup"><span data-stu-id="386c8-533">![Create Blob Container dialog box](maintainable-azure-websites-managing-change-and-scale/_static/image65.png "Create Blob Container dialog box")</span></span>

    <span data-ttu-id="386c8-534">*Erstellen von Blob-Container (Dialogfeld)*</span><span class="sxs-lookup"><span data-stu-id="386c8-534">*Create Blob Container dialog box*</span></span>
8. <span data-ttu-id="386c8-535">Die neuen Blob-Container hinzugefügt werden sollen, um die **Blobs** Knoten.</span><span class="sxs-lookup"><span data-stu-id="386c8-535">The new blob container should be added to the **Blobs** node.</span></span> <span data-ttu-id="386c8-536">Ändern Sie die Zugriffsberechtigungen in den Container für den Container als öffentliches Profil festzulegen.</span><span class="sxs-lookup"><span data-stu-id="386c8-536">Change the access permissions in the container to make the container public.</span></span> <span data-ttu-id="386c8-537">Zu diesem Zweck Maustaste die **Bilder** Container, und wählen **Eigenschaften**.</span><span class="sxs-lookup"><span data-stu-id="386c8-537">To do this, right-click the **images** container and select **Properties**.</span></span>

    <span data-ttu-id="386c8-538">![erstellt Abbilder für Containereigenschaften](maintainable-azure-websites-managing-change-and-scale/_static/image66.png "Bilder Containereigenschaften")</span><span class="sxs-lookup"><span data-stu-id="386c8-538">![images container properties](maintainable-azure-websites-managing-change-and-scale/_static/image66.png "images container properties")</span></span>

    <span data-ttu-id="386c8-539">*Bilder Containereigenschaften*</span><span class="sxs-lookup"><span data-stu-id="386c8-539">*Images container properties*</span></span>
9. <span data-ttu-id="386c8-540">In der **Eigenschaften** legen die **öffentlichen Lesezugriff** auf **Container**.</span><span class="sxs-lookup"><span data-stu-id="386c8-540">In the **Properties** window, set the **Public Read Access** to **Container**.</span></span>

    <span data-ttu-id="386c8-541">![Öffentlichen Lesezugriff auf die Änderung](maintainable-azure-websites-managing-change-and-scale/_static/image67.png "öffentlichen Lesezugriff auf die Änderung")</span><span class="sxs-lookup"><span data-stu-id="386c8-541">![Changing public read access property](maintainable-azure-websites-managing-change-and-scale/_static/image67.png "Changing public read access property")</span></span>

    <span data-ttu-id="386c8-542">*Ändern von öffentlichen Lesezugriff-Eigenschaft*</span><span class="sxs-lookup"><span data-stu-id="386c8-542">*Changing public read access property*</span></span>
10. <span data-ttu-id="386c8-543">Wenn Sie aufgefordert werden, wenn Sie sicher sind, klicken Sie zum Ändern der Eigenschaft öffentlichen Zugriff werden sollen **Ja**.</span><span class="sxs-lookup"><span data-stu-id="386c8-543">When prompted if you are sure you want to change the public access property, click **Yes**.</span></span>

    <span data-ttu-id="386c8-544">![Microsoft Visual Studio-Warnung](maintainable-azure-websites-managing-change-and-scale/_static/image68.png "Microsoft Visual Studio-Warnung")</span><span class="sxs-lookup"><span data-stu-id="386c8-544">![Microsoft Visual Studio warning](maintainable-azure-websites-managing-change-and-scale/_static/image68.png "Microsoft Visual Studio warning")</span></span>

    <span data-ttu-id="386c8-545">*Microsoft Visual Studio-Warnung*</span><span class="sxs-lookup"><span data-stu-id="386c8-545">*Microsoft Visual Studio warning*</span></span>
11. <span data-ttu-id="386c8-546">In **Server-Explorer**, mit der rechten Maustaste die **Bilder** Blob-Container, und wählen **Blob-Container anzeigen**.</span><span class="sxs-lookup"><span data-stu-id="386c8-546">In **Server Explorer**, right-click in the **images** blob container and select **View Blob Container**.</span></span>

    <span data-ttu-id="386c8-547">![Anzeigen von Blob-Container](maintainable-azure-websites-managing-change-and-scale/_static/image69.png "Blob-Container anzeigen")</span><span class="sxs-lookup"><span data-stu-id="386c8-547">![View Blob Container](maintainable-azure-websites-managing-change-and-scale/_static/image69.png "View Blob Container")</span></span>

    <span data-ttu-id="386c8-548">*Blob-Container anzeigen*</span><span class="sxs-lookup"><span data-stu-id="386c8-548">*View Blob Container*</span></span>
12. <span data-ttu-id="386c8-549">Der Image-Container sollte in einem neuen Fenster geöffnet, und eine Legende ohne Einträge angezeigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="386c8-549">The images container should open in a new window and a legend with no entries should be shown.</span></span> <span data-ttu-id="386c8-550">Klicken Sie auf die **hochladen** Symbol, um eine Datei in den Blob-Container hochzuladen.</span><span class="sxs-lookup"><span data-stu-id="386c8-550">Click the **upload** icon to upload a file to the blob container.</span></span>

    <span data-ttu-id="386c8-551">![Der Image-Container ohne Einträge](maintainable-azure-websites-managing-change-and-scale/_static/image70.png "Image-Container ohne Einträge")</span><span class="sxs-lookup"><span data-stu-id="386c8-551">![Images container with no entries](maintainable-azure-websites-managing-change-and-scale/_static/image70.png "Images container with no entries")</span></span>

    <span data-ttu-id="386c8-552">*Der Image-Container ohne Einträge*</span><span class="sxs-lookup"><span data-stu-id="386c8-552">*Images container with no entries*</span></span>
13. <span data-ttu-id="386c8-553">In der **Blob hochladen** Dialogfeld Feld, navigieren Sie zu der **Bestand** Ordner die Umgebung fertiggestellt.</span><span class="sxs-lookup"><span data-stu-id="386c8-553">In the **Upload Blob** dialog box, navigate to the **Assets** folder of the lab.</span></span> <span data-ttu-id="386c8-554">Wählen Sie die **Logo big.png** Datei, und klicken Sie auf **öffnen**.</span><span class="sxs-lookup"><span data-stu-id="386c8-554">Select the **logo-big.png** file and click **Open**.</span></span>
14. <span data-ttu-id="386c8-555">Warten Sie, bis die Datei hochgeladen wurde.</span><span class="sxs-lookup"><span data-stu-id="386c8-555">Wait until the file is uploaded.</span></span> <span data-ttu-id="386c8-556">Wenn der Upload abgeschlossen ist, sollte die Datei im Container Bilder aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="386c8-556">When the upload completes, the file should be listed in the images container.</span></span> <span data-ttu-id="386c8-557">Der Eintrag in der Maustaste, und wählen **URL kopieren**.</span><span class="sxs-lookup"><span data-stu-id="386c8-557">Right-click the file entry and select **Copy URL**.</span></span>

    <span data-ttu-id="386c8-558">![Kopieren von Blob-URL](maintainable-azure-websites-managing-change-and-scale/_static/image71.png "Kopieren von Blob-Datei-URL")</span><span class="sxs-lookup"><span data-stu-id="386c8-558">![Copy blob URL](maintainable-azure-websites-managing-change-and-scale/_static/image71.png "Copy blob file URL")</span></span>

    <span data-ttu-id="386c8-559">*Kopieren von Blob-URL*</span><span class="sxs-lookup"><span data-stu-id="386c8-559">*Copy blob URL*</span></span>
15. <span data-ttu-id="386c8-560">Öffnen Sie Internet Explorer, und fügen Sie die URL.</span><span class="sxs-lookup"><span data-stu-id="386c8-560">Open Internet Explorer and paste the URL.</span></span> <span data-ttu-id="386c8-561">Die folgende Abbildung sollte im Browser angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="386c8-561">The following image should be shown in the browser.</span></span>

    <span data-ttu-id="386c8-562">![Blob-Speicher von Windows-Logo big.png Bereitstellungsabbilds unter](maintainable-azure-websites-managing-change-and-scale/_static/image72.png "Logo big.png Image aus dem Speicher")</span><span class="sxs-lookup"><span data-stu-id="386c8-562">![logo-big.png image from Windows Blob Storage](maintainable-azure-websites-managing-change-and-scale/_static/image72.png "logo-big.png image from storage")</span></span>

    <span data-ttu-id="386c8-563">*logo-big.png image from Azure Blob Storage*</span><span class="sxs-lookup"><span data-stu-id="386c8-563">*logo-big.png image from Azure Blob Storage*</span></span>

<a id="Ex4Task3"></a>
#### <a name="task-3--updating-the-solution-to-consume-static-content-from-azure-blob-storage"></a><span data-ttu-id="386c8-564">Aufgabe 3: aktualisieren die Lösung, um statischen Inhalt von Azure Blob-Speicher nutzen.</span><span class="sxs-lookup"><span data-stu-id="386c8-564">Task 3 – Updating the Solution to Consume Static Content from Azure Blob Storage</span></span>

<span data-ttu-id="386c8-565">In dieser Aufgabe Konfigurieren Sie die **GeekQuiz** Lösung nutzen Sie das Bild hochgeladen in Azure Blob Storage (statt dem Image befindet sich in der Web-app) durch Hinzufügen einer ASP.NET URL-neuschreibungsregel in der **"Web.config"**Datei.</span><span class="sxs-lookup"><span data-stu-id="386c8-565">In this task, you will configure the **GeekQuiz** solution to consume the image uploaded to Azure Blob Storage (instead of the image located in the web app) by adding an ASP.NET URL rewrite rule in the **web.config** file.</span></span>

1. <span data-ttu-id="386c8-566">Öffnen Sie in Visual Studio die **"Web.config"** Datei innerhalb der **GeekQuiz** Projekt, und suchen Sie die  **&lt;"System.Webserver"&gt;**  Element.</span><span class="sxs-lookup"><span data-stu-id="386c8-566">In Visual Studio, open the **Web.config** file inside the **GeekQuiz** project and locate the **&lt;system.webServer&gt;** element.</span></span>
2. <span data-ttu-id="386c8-567">Fügen Sie den folgenden Code zum Hinzufügen eine URL-rewrite Regel, aktualisieren den Platzhalter mit den Namen des Speicherkontos.</span><span class="sxs-lookup"><span data-stu-id="386c8-567">Add the following code to add an URL rewrite rule, updating the placeholder with your storage account name.</span></span>

    <span data-ttu-id="386c8-568">(Codeausschnitt - *WebSitesInProduction - Ex4 - UrlRewriteRule*)</span><span class="sxs-lookup"><span data-stu-id="386c8-568">(Code Snippet - *WebSitesInProduction - Ex4 - UrlRewriteRule*)</span></span>

    [!code-xml[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample17.xml)]

    > [!NOTE]
    > <span data-ttu-id="386c8-569">URLs versteht man eingehende Webanforderungen durch Controlleraktionsmethoden abfangen und die Anforderung zu einer anderen Ressource umleiten.</span><span class="sxs-lookup"><span data-stu-id="386c8-569">URL rewriting is the process of intercepting an incoming Web request and redirecting the request to a different resource.</span></span> <span data-ttu-id="386c8-570">Die Regeln umschreiben URL weist das Umschreiben von Modul, wenn eine Anforderung umgeleitet werden muss, und, in denen sollten umgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="386c8-570">The URL rewriting rules tells the rewriting engine when a request needs to be redirected, and where should they be redirected.</span></span> <span data-ttu-id="386c8-571">Eine Umschreiben von Regel besteht aus zwei Zeichenfolgen: das entsprechende Muster, in der angeforderten URL gesucht (normalerweise mithilfe von regulären Ausdrücken), und Ersetzen Sie das Muster, wenn die Zeichenfolge gefunden.</span><span class="sxs-lookup"><span data-stu-id="386c8-571">A rewriting rule is composed of two strings: the pattern to look for in the requested URL (usually, using regular expressions), and the string to replace the pattern with, if found.</span></span> <span data-ttu-id="386c8-572">Weitere Informationen finden Sie unter [URLs in ASP.NET](https://msdn.microsoft.com/library/ms972974.aspx).</span><span class="sxs-lookup"><span data-stu-id="386c8-572">For more information, see [URL Rewriting in ASP.NET](https://msdn.microsoft.com/library/ms972974.aspx).</span></span>
3. <span data-ttu-id="386c8-573">Drücken Sie **STRG + S** um die Änderungen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="386c8-573">Press **CTRL + S** to save the changes.</span></span>
4. <span data-ttu-id="386c8-574">Öffnen Sie ein neues **Git Bash** Konsole, um die aktualisierte Anwendung auf Azure App Service bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="386c8-574">Open a new **Git Bash** console to deploy the updated application to Azure App Service.</span></span>
5. <span data-ttu-id="386c8-575">Führen Sie die folgenden Befehle, die Änderungen in Azure zu übertragen.</span><span class="sxs-lookup"><span data-stu-id="386c8-575">Execute the following commands to push the changes to Azure.</span></span> <span data-ttu-id="386c8-576">Update der *[YOUR-ANWENDUNGSPFAD]* Platzhalter durch den Pfad zu der **GeekQuiz** Lösung.</span><span class="sxs-lookup"><span data-stu-id="386c8-576">Update the *[YOUR-APPLICATION-PATH]* placeholder with the path to the **GeekQuiz** solution.</span></span> <span data-ttu-id="386c8-577">Sie werden aufgefordert, Ihr Kennwort für die Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="386c8-577">You will be prompted for your deployment password.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample18.cmd)]

    ![Update wird in Azure bereitstellen.](maintainable-azure-websites-managing-change-and-scale/_static/image73.png)

    <span data-ttu-id="386c8-579">*Update wird in Azure bereitstellen.*</span><span class="sxs-lookup"><span data-stu-id="386c8-579">*Deploying update to Azure*</span></span>

<a id="Ex4Task4"></a>
#### <a name="task-4--verification"></a><span data-ttu-id="386c8-580">Aufgabe 4: Überprüfung</span><span class="sxs-lookup"><span data-stu-id="386c8-580">Task 4 – Verification</span></span>

<span data-ttu-id="386c8-581">In dieser Aufgabe verwenden Sie **Internet Explorer** zum Durchsuchen der **Meister Quiz** Anwendung, und überprüfen Sie, dass die URL-rewrite-Regel für Bilder funktioniert, und Sie werden umgeleitet, auf das Abbild auf gehostete **Azure-Blob Speicher**.</span><span class="sxs-lookup"><span data-stu-id="386c8-581">In this task you will use **Internet Explorer** to browse the **Geek Quiz** application and check that the URL rewrite rule for images works and you are redirected to the image hosted on **Azure Blob Storage**.</span></span>

1. <span data-ttu-id="386c8-582">Öffnen Sie Internet Explorer, und navigieren Sie zu Ihrer Web-app (z. B. `http://<your-web-site>.azurewebsites.net`).</span><span class="sxs-lookup"><span data-stu-id="386c8-582">Open Internet Explorer and navigate to your web app (e.g. `http://<your-web-site>.azurewebsites.net`).</span></span> <span data-ttu-id="386c8-583">Melden Sie sich mit den zuvor erstellten Anmeldeinformationen.</span><span class="sxs-lookup"><span data-stu-id="386c8-583">Log in using the previously created credentials.</span></span>

    <span data-ttu-id="386c8-584">![Zeigt die Meister Quiz Web-app mit dem Image](maintainable-azure-websites-managing-change-and-scale/_static/image74.png "Meister Quiz Web-app mit dem Image anzeigen")</span><span class="sxs-lookup"><span data-stu-id="386c8-584">![Showing the Geek Quiz web app with the image](maintainable-azure-websites-managing-change-and-scale/_static/image74.png "Showing the Geek Quiz web app with the image")</span></span>

    <span data-ttu-id="386c8-585">*Zeigt die Meister Quiz Web-app mit dem image*</span><span class="sxs-lookup"><span data-stu-id="386c8-585">*Showing the Geek Quiz web app with the image*</span></span>
2. <span data-ttu-id="386c8-586">Drücken Sie **F12** um die Entwicklungstools zu starten, wählen die **Netzwerk** Registerkarte und beginnen mit der Aufzeichnung.</span><span class="sxs-lookup"><span data-stu-id="386c8-586">Press **F12** to launch the development tools, select the **Network** tab and start recording.</span></span>

    <span data-ttu-id="386c8-587">![Starten des Netzwerk-Aufzeichnung](maintainable-azure-websites-managing-change-and-scale/_static/image75.png "Netzwerk Aufzeichnung starten")</span><span class="sxs-lookup"><span data-stu-id="386c8-587">![Starting network recording](maintainable-azure-websites-managing-change-and-scale/_static/image75.png "Starting network recording")</span></span>

    <span data-ttu-id="386c8-588">*Netzwerk-Aufzeichnung starten*</span><span class="sxs-lookup"><span data-stu-id="386c8-588">*Starting network recording*</span></span>
3. <span data-ttu-id="386c8-589">Drücken Sie **STRG + F5** zum Aktualisieren der Webseite.</span><span class="sxs-lookup"><span data-stu-id="386c8-589">Press **CTRL + F5** to refresh the web page.</span></span>
4. <span data-ttu-id="386c8-590">Sobald die Seite vollständig geladen wurde, sehen Sie eine HTTP-Anforderung für die **/img/logo-big.png** URL mit einem HTTP- **301** Ergebnis (Redirect) und eine andere Anforderung zum `http://[YOUR-STORAGE-ACCOUNT].blob.core.windows.net/images/logo-big.png` URL mit dem HTTP- **200** Ergebnis.</span><span class="sxs-lookup"><span data-stu-id="386c8-590">Once the page has finished loading, you should see an HTTP request for the **/img/logo-big.png** URL with an HTTP **301** result (redirect) and another request for `http://[YOUR-STORAGE-ACCOUNT].blob.core.windows.net/images/logo-big.png` URL with a HTTP **200** result.</span></span>

    <span data-ttu-id="386c8-591">![Überprüfen die URL-Umleitung](maintainable-azure-websites-managing-change-and-scale/_static/image76.png "angezeigt, die mit der Umleitung Entwicklungstools")</span><span class="sxs-lookup"><span data-stu-id="386c8-591">![Verifying the URL redirect](maintainable-azure-websites-managing-change-and-scale/_static/image76.png "Showing the redirect in Dev Tools")</span></span>

    <span data-ttu-id="386c8-592">*Überprüfen die URL-Umleitung*</span><span class="sxs-lookup"><span data-stu-id="386c8-592">*Verifying the URL redirect*</span></span>

<a id="Exercise5"></a>
### <a name="exercise-5-using-autoscale-for-web-apps"></a><span data-ttu-id="386c8-593">Übung 5: Automatische Skalierung für Web-Apps verwenden</span><span class="sxs-lookup"><span data-stu-id="386c8-593">Exercise 5: Using Autoscale for Web Apps</span></span>

> [!NOTE]
> <span data-ttu-id="386c8-594">In dieser Übung ist optional, da sie Unterstützung für den erfordert &amp; Leistungstests, die nur **Visual Studio 2013 Ultimate Edition**.</span><span class="sxs-lookup"><span data-stu-id="386c8-594">This exercise is optional, since it requires support for Web Load &amp; Performance Testing which is only available for **Visual Studio 2013 Ultimate Edition**.</span></span> <span data-ttu-id="386c8-595">Weitere Informationen zu bestimmten Funktionen von Visual Studio 2013 Versionsvergleich [hier](https://www.microsoft.com/visualstudio/eng/products/compare).</span><span class="sxs-lookup"><span data-stu-id="386c8-595">For more information on specific Visual Studio 2013 features, compare versions [here](https://www.microsoft.com/visualstudio/eng/products/compare).</span></span>


<span data-ttu-id="386c8-596">**Azure App Service Web Apps** bietet die automatische Skalierung für webapps, die im **Modus "Standard"**.</span><span class="sxs-lookup"><span data-stu-id="386c8-596">**Azure App Service Web Apps** provides the Autoscale feature for web apps running in **Standard Mode**.</span></span> <span data-ttu-id="386c8-597">Automatische Skalierung ermöglicht Azure die Anzahl der Instanzen eines je nach Auslastung Ihrer Web-app automatisch zu skalieren.</span><span class="sxs-lookup"><span data-stu-id="386c8-597">Autoscale lets Azure automatically scale the instance count of your web app depending on the load.</span></span> <span data-ttu-id="386c8-598">Wenn automatische Skalierung aktiviert ist, wird Azure überprüft, einmal alle fünf Minuten die CPU Ihrer Web-app und Instanzen nach Bedarf zu diesem Zeitpunkt hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="386c8-598">When Autoscale is enabled, Azure checks the CPU of your web app once every five minutes and adds instances as needed at that point in time.</span></span> <span data-ttu-id="386c8-599">Wenn die CPU-Auslastung nicht ausreicht, wird Azure Instanzen einmal alle zwei Stunden entfernen, um sicherzustellen, dass die Leistung Ihrer Web-App nicht beeinträchtigt wird.</span><span class="sxs-lookup"><span data-stu-id="386c8-599">If the CPU usage is low, Azure will remove instances once every two hours to ensure that the performance of your web app is not degraded.</span></span>

<span data-ttu-id="386c8-600">In dieser Übung führen Sie über die erforderlichen Schritte zum Konfigurieren der **zur automatischen Skalierung** feature für die **Meister Quiz** Web-app.</span><span class="sxs-lookup"><span data-stu-id="386c8-600">In this exercise you will go through the steps required to configure the **Autoscale** feature for the **Geek Quiz** web app.</span></span> <span data-ttu-id="386c8-601">Diese Funktion überprüft durch Ausführen eines Auslastungstests von Visual Studio zum Generieren von genügend CPU-Auslastung der Anwendung ein Upgrade der Instanz ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="386c8-601">You will verify this feature by running a Visual Studio load test to generate enough CPU load on the application to trigger an instance upgrade.</span></span>

<a id="Ex5Task1"></a>
#### <a name="task-1--configuring-autoscale-based-on-the-cpu-metric"></a><span data-ttu-id="386c8-602">Aufgabe 1: Konfigurieren von automatischen Skalierung basierend auf der CPU-Metrik</span><span class="sxs-lookup"><span data-stu-id="386c8-602">Task 1 – Configuring Autoscale Based on the CPU Metric</span></span>

<span data-ttu-id="386c8-603">In dieser Aufgabe verwenden Sie das Azure-Verwaltungsportal auf um die Funktion für automatische Skalierung für die Web-app zu aktivieren, die Sie in der Übung 2 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="386c8-603">In this task you will use the Azure management portal to enable the Autoscale feature for the web app you created in Exercise 2.</span></span>

1. <span data-ttu-id="386c8-604">In der [Azure-Verwaltungsportal](https://manage.windowsazure.com/)Option **Websites** , und klicken Sie auf die Web-app, die Sie in der Übung 2 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="386c8-604">In the [Azure management portal](https://manage.windowsazure.com/), select **Websites** and click the web app you created in Exercise 2.</span></span>
2. <span data-ttu-id="386c8-605">Navigieren Sie zu der **Skalierung** Seite.</span><span class="sxs-lookup"><span data-stu-id="386c8-605">Navigate to the **Scale** page.</span></span> <span data-ttu-id="386c8-606">Klicken Sie unter der **Kapazität** Abschnitt **CPU** für die **nach Metrik skalieren** Konfiguration.</span><span class="sxs-lookup"><span data-stu-id="386c8-606">Under the **capacity** section, select **CPU** for the **Scale by Metric** configuration.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-607">Für die Skalierung nach CPU aus, passt die Anzahl der Instanzen, die die app verwendet, wenn die CPU-Auslastung ändert dynamisch von Azure an.</span><span class="sxs-lookup"><span data-stu-id="386c8-607">When scaling by CPU, Azure dynamically adjusts the number of instances that the app uses if the CPU usage changes.</span></span>

    <span data-ttu-id="386c8-608">![Auswahl zur Skalierung nach CPU](maintainable-azure-websites-managing-change-and-scale/_static/image77.png "die CPU-Metrik für die automatische Skalierung auswählen")</span><span class="sxs-lookup"><span data-stu-id="386c8-608">![Selecting to scale by CPU](maintainable-azure-websites-managing-change-and-scale/_static/image77.png "Selecting the CPU metric for auto scaling")</span></span>

    <span data-ttu-id="386c8-609">*Skalierung nach CPU auswählen*</span><span class="sxs-lookup"><span data-stu-id="386c8-609">*Selecting to scale by CPU*</span></span>
3. <span data-ttu-id="386c8-610">Ändern der **Ziel-CPU** Konfiguration **20**-**40** Prozent.</span><span class="sxs-lookup"><span data-stu-id="386c8-610">Change the **Target CPU** configuration to **20**-**40** percent.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-611">Dieser Bereich stellt die durchschnittliche CPU-Nutzung für Ihre Web-app dar.</span><span class="sxs-lookup"><span data-stu-id="386c8-611">This range represents the average CPU usage for your web app.</span></span> <span data-ttu-id="386c8-612">Azure hinzu oder Entfernen von Instanzen, um Ihre Web-app in diesem Bereich bleibt.</span><span class="sxs-lookup"><span data-stu-id="386c8-612">Azure will add or remove instances to keep your web app in this range.</span></span> <span data-ttu-id="386c8-613">Die minimale und maximale Anzahl der Instanzen, die für die Skalierung verwendet wird angegeben, der **Instanzenanzahl** Konfiguration.</span><span class="sxs-lookup"><span data-stu-id="386c8-613">The minimum and maximum number of instances used for scaling is specified in the **Instance Count** configuration.</span></span> <span data-ttu-id="386c8-614">Azure geht nie oberhalb oder über diesen Grenzwert hinaus.</span><span class="sxs-lookup"><span data-stu-id="386c8-614">Azure will never go above or beyond that limit.</span></span>
    > 
    > <span data-ttu-id="386c8-615">Die Standardeinstellung **Ziel-CPU** Werte nur für die im Rahmen dieser Übung geändert werden.</span><span class="sxs-lookup"><span data-stu-id="386c8-615">The default **Target CPU** values are modified just for the purposes of this lab.</span></span> <span data-ttu-id="386c8-616">Durch Konfigurieren des CPU-Bereichs mit kleinen Werten, werden Sie sich die Chancen erhöhen Trigger automatische Skalierung, wenn eine moderate Last für die Anwendung befindet.</span><span class="sxs-lookup"><span data-stu-id="386c8-616">By configuring the CPU range with small values, you are increasing the chances to trigger Autoscale when a moderate load is placed on the application.</span></span>

    <span data-ttu-id="386c8-617">![Ändern die Ziel-CPU, als 20 bis 40 Prozent](maintainable-azure-websites-managing-change-and-scale/_static/image78.png "Ändern des Ziels-CPU, um zwischen 20 und 40 Prozent liegen.")</span><span class="sxs-lookup"><span data-stu-id="386c8-617">![Changing the target CPU to be between 20 and 40 percent](maintainable-azure-websites-managing-change-and-scale/_static/image78.png "Changing the target CPU to be between 20 and 40 percent")</span></span>

    <span data-ttu-id="386c8-618">*Ändern der Ziel-CPU, um 20 bis 40 Prozent zu sein.*</span><span class="sxs-lookup"><span data-stu-id="386c8-618">*Changing the Target CPU to be between 20 and 40 percent*</span></span>
4. <span data-ttu-id="386c8-619">Klicken Sie auf **speichern** in der Befehlsleiste, um die Änderungen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="386c8-619">Click **Save** in the command bar to save the changes.</span></span>

<a id="Ex5Task2"></a>
#### <a name="task-2--load-testing-with-visual-studio"></a><span data-ttu-id="386c8-620">Aufgabe 2 – Auslastungstests mit Visual Studio</span><span class="sxs-lookup"><span data-stu-id="386c8-620">Task 2 – Load Testing with Visual Studio</span></span>

<span data-ttu-id="386c8-621">Nun, dass **zur automatischen Skalierung** wurde konfiguriert, erstellen Sie eine **Webleistungs- und Test-Projekt geladen** in Visual Studio einige CPU-Auslastung für Ihre Web-app generiert.</span><span class="sxs-lookup"><span data-stu-id="386c8-621">Now that **Autoscale** has been configured, you will create a **Web Performance and Load Test Project** in Visual Studio to generate some CPU load on your web app.</span></span>

1. <span data-ttu-id="386c8-622">Open **Visual Studio Ultimate 2013** , und wählen Sie **Datei | Neue | Projekt...**  um eine neue Projektmappe zu starten.</span><span class="sxs-lookup"><span data-stu-id="386c8-622">Open **Visual Studio Ultimate 2013** and select **File | New | Project...** to start a new solution.</span></span>

    <span data-ttu-id="386c8-623">![Erstellen eines neuen Projekts](maintainable-azure-websites-managing-change-and-scale/_static/image79.png "Erstellen eines neuen Projekts")</span><span class="sxs-lookup"><span data-stu-id="386c8-623">![Creating a new project](maintainable-azure-websites-managing-change-and-scale/_static/image79.png "Creating a new project")</span></span>

    <span data-ttu-id="386c8-624">*Erstellen eines neuen Projekts*</span><span class="sxs-lookup"><span data-stu-id="386c8-624">*Creating a new project*</span></span>
2. <span data-ttu-id="386c8-625">In der **neues Projekt** wählen Sie im Dialogfeld **Webleistungs- und Auslastungstestprojekt** unter der **Visual C# | Test** Registerkarte. Stellen Sie sicher, dass **.NET Framework 4.5** ist ausgewählt, nennen Sie das Projekt *WebAndLoadTestProject*, wählen Sie eine **Speicherort** , und klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="386c8-625">In the **New Project** dialog box, select **Web Performance and Load Test Project** under the **Visual C# | Test** tab. Make sure **.NET Framework 4.5** is selected, name the project *WebAndLoadTestProject*, choose a **Location** and click **OK**.</span></span>

    <span data-ttu-id="386c8-626">![Erstellen eines neuen Projekts für Web- und Auslastungstests](maintainable-azure-websites-managing-change-and-scale/_static/image80.png "Erstellen eines neuen Projekts für Web- und Auslastungstests")</span><span class="sxs-lookup"><span data-stu-id="386c8-626">![Creating a new Web and Load Test project](maintainable-azure-websites-managing-change-and-scale/_static/image80.png "Creating a new Web and Load Test project")</span></span>

    <span data-ttu-id="386c8-627">*Erstellen eines neuen Projekts für Web- und Auslastungstests*</span><span class="sxs-lookup"><span data-stu-id="386c8-627">*Creating a new Web and Load Test project*</span></span>
3. <span data-ttu-id="386c8-628">In der **WebTest1.webtest** mit der rechten Maustaste die **WebTest1** Knoten, und klicken Sie auf **anfordern hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="386c8-628">In the **WebTest1.webtest** Right-click the **WebTest1** node and click **Add Request**.</span></span>

    <span data-ttu-id="386c8-629">![Hinzufügen einer Anforderung WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image81.png "WebTest1 eine Anforderung hinzugefügt")</span><span class="sxs-lookup"><span data-stu-id="386c8-629">![Adding a request to WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image81.png "Adding a request to WebTest1")</span></span>

    <span data-ttu-id="386c8-630">*Hinzufügen einer Anforderung WebTest1*</span><span class="sxs-lookup"><span data-stu-id="386c8-630">*Adding a request to WebTest1*</span></span>
4. <span data-ttu-id="386c8-631">In der **Eigenschaften** Fenster für den neuen Anforderungsknoten aktualisiert die **Url** Eigenschaft, um auf die URL Ihrer Web-App zu verweisen (z. B.  *[http://geek-quiz.azurewebsites.net/](http://geek-quiz.azurewebsites.net/)* ).</span><span class="sxs-lookup"><span data-stu-id="386c8-631">In the **Properties** window of the new request node, update the **Url** property to point to the URL of your web app (e.g. *[http://geek-quiz.azurewebsites.net/](http://geek-quiz.azurewebsites.net/)*).</span></span>

    <span data-ttu-id="386c8-632">![Ändern der Url-Eigenschaft](maintainable-azure-websites-managing-change-and-scale/_static/image82.png "Ändern der Url-Eigenschaft")</span><span class="sxs-lookup"><span data-stu-id="386c8-632">![Changing the Url property](maintainable-azure-websites-managing-change-and-scale/_static/image82.png "Changing the Url property")</span></span>

    <span data-ttu-id="386c8-633">*Ändern der Url-Eigenschaft*</span><span class="sxs-lookup"><span data-stu-id="386c8-633">*Changing the Url property*</span></span>
5. <span data-ttu-id="386c8-634">In der **WebTest1.webtest** Fenster mit der rechten Maustaste **WebTest1** , und klicken Sie auf **Schleife hinzufügen...** .</span><span class="sxs-lookup"><span data-stu-id="386c8-634">In the **WebTest1.webtest** window, right-click **WebTest1** and click **Add Loop...**.</span></span>

    <span data-ttu-id="386c8-635">![Hinzufügen einer Schleife zu WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image83.png "Hinzufügen einer Schleife zu WebTest1")</span><span class="sxs-lookup"><span data-stu-id="386c8-635">![Adding a loop to WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image83.png "Adding a loop to WebTest1")</span></span>

    <span data-ttu-id="386c8-636">*Hinzufügen einer Schleife zu WebTest1*</span><span class="sxs-lookup"><span data-stu-id="386c8-636">*Adding a loop to WebTest1*</span></span>
6. <span data-ttu-id="386c8-637">In der **Bedingungsregel hinzufügen und Elemente zur Schleife** wählen Sie im Dialogfeld die **For-Schleife** -Regel und ändern Sie die folgenden Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="386c8-637">In the **Add Conditional Rule and Items to Loop** dialog box, select the **For Loop** rule and modify the following properties.</span></span>

    1. <span data-ttu-id="386c8-638">**Beenden Sie Wert:** 1000</span><span class="sxs-lookup"><span data-stu-id="386c8-638">**Terminating value:** 1000</span></span>
    2. <span data-ttu-id="386c8-639">**Kontext der Parametername:** Iterator</span><span class="sxs-lookup"><span data-stu-id="386c8-639">**Context Parameter Name:** Iterator</span></span>
    3. <span data-ttu-id="386c8-640">**Inkrementwert:** 1</span><span class="sxs-lookup"><span data-stu-id="386c8-640">**Increment Value:** 1</span></span>

    <span data-ttu-id="386c8-641">![Auswählen der For-Schleife-Regel, und aktualisieren Sie die Eigenschaften](maintainable-azure-websites-managing-change-and-scale/_static/image84.png "Sie die For-Schleife-Regel auswählen und Aktualisieren der Eigenschaften")</span><span class="sxs-lookup"><span data-stu-id="386c8-641">![Selecting the For Loop rule and updating the properties](maintainable-azure-websites-managing-change-and-scale/_static/image84.png "Selecting the For Loop rule and updating the properties")</span></span>

    <span data-ttu-id="386c8-642">*Auswählen der For-Schleife-Regel, und Aktualisieren der Eigenschaften*</span><span class="sxs-lookup"><span data-stu-id="386c8-642">*Selecting the For Loop rule and updating the properties*</span></span>
7. <span data-ttu-id="386c8-643">Klicken Sie unter der **Elemente in der Schleife** Abschnitt, wählen Sie die Anforderung, die Sie zuvor das erste und letzte Element, für die Schleife werden erstellt.</span><span class="sxs-lookup"><span data-stu-id="386c8-643">Under the **Items in loop** section, select the request you created previously to be the first and last item for the loop.</span></span> <span data-ttu-id="386c8-644">Klicken Sie auf **OK** um den Vorgang fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="386c8-644">Click **OK** to continue.</span></span>

    <span data-ttu-id="386c8-645">![Auswahl der ersten und letzten Elemente für die Schleife](maintainable-azure-websites-managing-change-and-scale/_static/image85.png "Auswahl der ersten und letzten Elemente für die Schleife")</span><span class="sxs-lookup"><span data-stu-id="386c8-645">![Selecting the first and last items for the loop](maintainable-azure-websites-managing-change-and-scale/_static/image85.png "Selecting the first and last items for the loop")</span></span>

    <span data-ttu-id="386c8-646">*Auswahl der ersten und letzten Elemente für die Schleife*</span><span class="sxs-lookup"><span data-stu-id="386c8-646">*Selecting the first and last items for the loop*</span></span>
8. <span data-ttu-id="386c8-647">In **Projektmappen-Explorer**, mit der rechten Maustaste die **WebAndLoadTestProject** Projekt, erweitern Sie die **hinzufügen** Menü **Auslastungstest...** .</span><span class="sxs-lookup"><span data-stu-id="386c8-647">In **Solution Explorer**, right-click the **WebAndLoadTestProject** project, expand the **Add** menu and select **Load Test...**.</span></span>

    <span data-ttu-id="386c8-648">![Das Projekt WebAndLoadTestProject einen Auslastungstest hinzugefügt](maintainable-azure-websites-managing-change-and-scale/_static/image86.png "WebAndLoadTestProject-Projekt einen Auslastungstest hinzugefügt")</span><span class="sxs-lookup"><span data-stu-id="386c8-648">![Adding a Load Test to the WebAndLoadTestProject project](maintainable-azure-websites-managing-change-and-scale/_static/image86.png "Adding a Load Test to the WebAndLoadTestProject project")</span></span>

    <span data-ttu-id="386c8-649">*Hinzufügen eines Auslastungstests zum WebAndLoadTestProject-Projekt*</span><span class="sxs-lookup"><span data-stu-id="386c8-649">*Adding a Load Test to the WebAndLoadTestProject project*</span></span>
9. <span data-ttu-id="386c8-650">In der **Assistent für neuen Auslastungstest** (Dialogfeld), klicken Sie auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="386c8-650">In the **New Load Test Wizard** dialog box, click **Next**.</span></span>

    <span data-ttu-id="386c8-651">![Assistent für neuen Auslastungstest](maintainable-azure-websites-managing-change-and-scale/_static/image87.png "Assistent für neuen Auslastungstest")</span><span class="sxs-lookup"><span data-stu-id="386c8-651">![New Load Test Wizard](maintainable-azure-websites-managing-change-and-scale/_static/image87.png "New Load Test Wizard")</span></span>

    <span data-ttu-id="386c8-652">*Assistent für neuen Auslastungstest*</span><span class="sxs-lookup"><span data-stu-id="386c8-652">*New Load Test Wizard*</span></span>
10. <span data-ttu-id="386c8-653">In der **Szenario** Seite **verwenden Sie keine Reaktionszeiten ein** , und klicken Sie auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="386c8-653">In the **Scenario** page, select **Do not use think times** and click **Next**.</span></span>

    <span data-ttu-id="386c8-654">![Auswählen von Verwendung von Reaktionszeiten](maintainable-azure-websites-managing-change-and-scale/_static/image88.png "auswählen, für die Verwendung von Reaktionszeiten")</span><span class="sxs-lookup"><span data-stu-id="386c8-654">![Selecting not to use think times](maintainable-azure-websites-managing-change-and-scale/_static/image88.png "Selecting not to use think times")</span></span>

    <span data-ttu-id="386c8-655">*Verwendung von Reaktionszeiten auswählen*</span><span class="sxs-lookup"><span data-stu-id="386c8-655">*Selecting not to use think times*</span></span>
11. <span data-ttu-id="386c8-656">In der **Auslastungsmuster** Seite, stellen Sie sicher, dass die **Konstante Auslastung** ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="386c8-656">In the **Load Pattern** page, make sure that the **Constant Load** option is selected.</span></span> <span data-ttu-id="386c8-657">Ändern der **Benutzeranzahl** auf **250** Benutzer und klicken Sie auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="386c8-657">Change the **User Count** setting to **250** users and click **Next**.</span></span>

    <span data-ttu-id="386c8-658">![Ändern die Benutzeranzahl auf 250](maintainable-azure-websites-managing-change-and-scale/_static/image89.png "ändern die Benutzeranzahl auf 250")</span><span class="sxs-lookup"><span data-stu-id="386c8-658">![Changing the user count to 250](maintainable-azure-websites-managing-change-and-scale/_static/image89.png "Changing the user count to 250")</span></span>

    <span data-ttu-id="386c8-659">*Ändern die Benutzeranzahl auf 250*</span><span class="sxs-lookup"><span data-stu-id="386c8-659">*Changing the user count to 250*</span></span>
12. <span data-ttu-id="386c8-660">In der **Testmischungsmodell** Seite **basierend auf sequenzieller Testreihenfolge Reihenfolge** , und klicken Sie auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="386c8-660">In the **Test Mix Model** page, select **Based on sequential test order** and click **Next**.</span></span>

    <span data-ttu-id="386c8-661">![Wählen das Testmischungsmodell](maintainable-azure-websites-managing-change-and-scale/_static/image90.png "das Testmischungsmodell auswählen")</span><span class="sxs-lookup"><span data-stu-id="386c8-661">![Selecting the test mix model](maintainable-azure-websites-managing-change-and-scale/_static/image90.png "Selecting the test mix model")</span></span>

    <span data-ttu-id="386c8-662">*Wählen das Testmischungsmodell*</span><span class="sxs-lookup"><span data-stu-id="386c8-662">*Selecting the test mix model*</span></span>
13. <span data-ttu-id="386c8-663">In der **Testmischungsmodell** auf **hinzufügen...**  der Mischung einen Test hinzu.</span><span class="sxs-lookup"><span data-stu-id="386c8-663">In the **Test Mix Model** page, click **Add...** to add a test to the mix.</span></span>

    <span data-ttu-id="386c8-664">![Hinzufügen eines Tests zu testmischung](maintainable-azure-websites-managing-change-and-scale/_static/image91.png "ein Tests zu testmischung hinzufügen")</span><span class="sxs-lookup"><span data-stu-id="386c8-664">![Adding a test to the test mix](maintainable-azure-websites-managing-change-and-scale/_static/image91.png "Adding a test to the test mix")</span></span>

    <span data-ttu-id="386c8-665">*Hinzufügen eines Tests zu testmischung*</span><span class="sxs-lookup"><span data-stu-id="386c8-665">*Adding a test to the test mix*</span></span>
14. <span data-ttu-id="386c8-666">In der **Tests hinzufügen** (Dialogfeld), doppelklicken Sie auf **WebTest1** hinzuzufügende des Tests, die **ausgewählter Tests** Liste.</span><span class="sxs-lookup"><span data-stu-id="386c8-666">In the **Add Tests** dialog box, double-click **WebTest1** to add the test to the **Selected tests** list.</span></span> <span data-ttu-id="386c8-667">Klicken Sie auf **OK** um den Vorgang fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="386c8-667">Click **OK** to continue.</span></span>

    <span data-ttu-id="386c8-668">![Hinzufügen von Tests WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image92.png "WebTest1 Test hinzufügen")</span><span class="sxs-lookup"><span data-stu-id="386c8-668">![Adding the WebTest1 test](maintainable-azure-websites-managing-change-and-scale/_static/image92.png "Adding the WebTest1 test")</span></span>

    <span data-ttu-id="386c8-669">*Den Test WebTest1 hinzufügen*</span><span class="sxs-lookup"><span data-stu-id="386c8-669">*Adding the WebTest1 test*</span></span>
15. <span data-ttu-id="386c8-670">In der **Testmischung** auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="386c8-670">Back in the **Test Mix** page, click **Next**.</span></span>

    <span data-ttu-id="386c8-671">![Abschließen der Seite "Testmischung"](maintainable-azure-websites-managing-change-and-scale/_static/image93.png "Abschließen der Seite "Testmischung"")</span><span class="sxs-lookup"><span data-stu-id="386c8-671">![Completing the Test Mix page](maintainable-azure-websites-managing-change-and-scale/_static/image93.png "Completing the Test Mix page")</span></span>

    <span data-ttu-id="386c8-672">*Abschließen der Seite "Testmischung"*</span><span class="sxs-lookup"><span data-stu-id="386c8-672">*Completing the Test Mix page*</span></span>
16. <span data-ttu-id="386c8-673">In der **Netzwerkmischung** auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="386c8-673">In the **Network Mix** page, click **Next**.</span></span>

    <span data-ttu-id="386c8-674">![Als Nächstes auf der Seite Netzwerkmischung auf](maintainable-azure-websites-managing-change-and-scale/_static/image94.png "Klick als Nächstes auf der Seite Netzwerkmischung")</span><span class="sxs-lookup"><span data-stu-id="386c8-674">![Clicking next in the Network Mix page](maintainable-azure-websites-managing-change-and-scale/_static/image94.png "Clicking next in the Network Mix page")</span></span>

    <span data-ttu-id="386c8-675">*Klicken Sie auf Weiter, auf der Seite Netzwerkmischung*</span><span class="sxs-lookup"><span data-stu-id="386c8-675">*Clicking next in the Network Mix page*</span></span>
17. <span data-ttu-id="386c8-676">In der **Browsermischung** Seite **Internet Explorer 10.0** als Browsertyp und auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="386c8-676">In the **Browser Mix** page, select **Internet Explorer 10.0** as the browser type and click **Next**.</span></span>

    <span data-ttu-id="386c8-677">![Auswählen des Browsertyps](maintainable-azure-websites-managing-change-and-scale/_static/image95.png "den Browsertyp auswählen")</span><span class="sxs-lookup"><span data-stu-id="386c8-677">![Selecting the browser type](maintainable-azure-websites-managing-change-and-scale/_static/image95.png "Selecting the browser type")</span></span>

    <span data-ttu-id="386c8-678">*Den Browsertyp auswählen*</span><span class="sxs-lookup"><span data-stu-id="386c8-678">*Selecting the browser type*</span></span>
18. <span data-ttu-id="386c8-679">In der **Indikatorensätze** auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="386c8-679">In the **Counter Sets** page, click **Next**.</span></span>

    <span data-ttu-id="386c8-680">![Klicken auf der Seite Indikatorensätze Weiter](maintainable-azure-websites-managing-change-and-scale/_static/image96.png "Weiter klicken, auf der Seite Indikatorensätze")</span><span class="sxs-lookup"><span data-stu-id="386c8-680">![Clicking Next in the Counter Sets page](maintainable-azure-websites-managing-change-and-scale/_static/image96.png "Clicking Next in the Counter Sets page")</span></span>

    <span data-ttu-id="386c8-681">*Klicken Sie auf Weiter, auf der Seite Indikatorensätze*</span><span class="sxs-lookup"><span data-stu-id="386c8-681">*Clicking Next in the Counter Sets page*</span></span>
19. <span data-ttu-id="386c8-682">In der **Testlaufeinstellungen** Seite der **Dauer des Auslastungstests** auf **5 Minuten** , und klicken Sie auf **Fertig stellen**.</span><span class="sxs-lookup"><span data-stu-id="386c8-682">In the **Run Settings** page, set the **Load test duration** to **5 minutes** and click **Finish**.</span></span>

    <span data-ttu-id="386c8-683">![Festlegen der Dauer des Auslastungstests auf 5 Minuten](maintainable-azure-websites-managing-change-and-scale/_static/image97.png "Festlegen der Dauer des Auslastungstests auf 5 Minuten")</span><span class="sxs-lookup"><span data-stu-id="386c8-683">![Setting the load test duration to 5 minutes](maintainable-azure-websites-managing-change-and-scale/_static/image97.png "Setting the load test duration to 5 minutes")</span></span>

    <span data-ttu-id="386c8-684">*Festlegen der Dauer des Auslastungstests auf 5 Minuten*</span><span class="sxs-lookup"><span data-stu-id="386c8-684">*Setting the load test duration to 5 minutes*</span></span>
20. <span data-ttu-id="386c8-685">In **Projektmappen-Explorer**, doppelklicken Sie auf die **Local.settings** Datei, um die testeinstellungen zu untersuchen.</span><span class="sxs-lookup"><span data-stu-id="386c8-685">In **Solution Explorer**, double-click the **Local.settings** file to explore the test settings.</span></span> <span data-ttu-id="386c8-686">Standardmäßig verwendet Visual Studio Ihrem lokalen Computer zum Ausführen der Tests.</span><span class="sxs-lookup"><span data-stu-id="386c8-686">By default, Visual Studio uses your local computer to run the tests.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-687">Alternativ können Sie das Testprojekt zum Ausführen von Auslastungstests in der Cloud mithilfe konfigurieren **Visual Studio Online (VSO)**.</span><span class="sxs-lookup"><span data-stu-id="386c8-687">Alternatively, you can configure your test project to run the load tests in the cloud using **Visual Studio Online (VSO)**.</span></span> <span data-ttu-id="386c8-688">VSO stellt eine Cloud-basierten Last testen Diensts, die eine realistischere Auslastung simuliert, die lokale Umgebung Einschränkungen wie CPU-Kapazität, Speicherplatz und Netzwerkbandbreite zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="386c8-688">VSO provides a cloud-based load testing service that simulates a more realistic load, avoiding local environment constraints like CPU capacity, available memory and network bandwidth.</span></span> <span data-ttu-id="386c8-689">Weitere Informationen zur Verwendung von VSO zum Ausführen von Auslastungstests finden Sie unter [in diesem Artikel](https://www.visualstudio.com/get-started/load-test-your-app-vs).</span><span class="sxs-lookup"><span data-stu-id="386c8-689">For more information about using VSO to run load tests, see [this article](https://www.visualstudio.com/get-started/load-test-your-app-vs).</span></span>

    ![Testeinstellungen](maintainable-azure-websites-managing-change-and-scale/_static/image98.png)

<a id="Ex5Task3"></a>
#### <a name="task-3--autoscale-verification"></a><span data-ttu-id="386c8-691">Aufgabe 3: Überprüfung der automatischen Skalierung</span><span class="sxs-lookup"><span data-stu-id="386c8-691">Task 3 – Autoscale Verification</span></span>

<span data-ttu-id="386c8-692">Sie werden nun führen Sie den Auslastungstest aus, den Sie in der vorherigen Aufgabe erstellt haben, wie Ihre Web-app unter Last verhält.</span><span class="sxs-lookup"><span data-stu-id="386c8-692">You will now execute the load test you created in the previous task and see how your web app behaves under load.</span></span>

1. <span data-ttu-id="386c8-693">In **Projektmappen-Explorer**, doppelklicken Sie auf **"LoadTest1.LoadTest"** Auslastungstest zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="386c8-693">In **Solution Explorer**, double-click **LoadTest1.loadtest** to open the load test.</span></span>

    <span data-ttu-id="386c8-694">![Öffnen "LoadTest1.LoadTest"](maintainable-azure-websites-managing-change-and-scale/_static/image99.png ""LoadTest1.LoadTest" Öffnen")</span><span class="sxs-lookup"><span data-stu-id="386c8-694">![Opening LoadTest1.loadtest](maintainable-azure-websites-managing-change-and-scale/_static/image99.png "Opening LoadTest1.loadtest")</span></span>

    <span data-ttu-id="386c8-695">*Die "LoadTest1.LoadTest" Öffnen*</span><span class="sxs-lookup"><span data-stu-id="386c8-695">*Opening LoadTest1.loadtest*</span></span>
2. <span data-ttu-id="386c8-696">In der **"LoadTest1.LoadTest"** Fenster, klicken Sie auf die erste Schaltfläche in der Toolbox auf den Auslastungstest ausführen.</span><span class="sxs-lookup"><span data-stu-id="386c8-696">In the **LoadTest1.loadtest** window, click the first button in the toolbox to run the load test.</span></span>

    <span data-ttu-id="386c8-697">![Ausführen des Auslastungstests](maintainable-azure-websites-managing-change-and-scale/_static/image100.png "Ausführen des Auslastungstests")</span><span class="sxs-lookup"><span data-stu-id="386c8-697">![Running the load test](maintainable-azure-websites-managing-change-and-scale/_static/image100.png "Running the load test")</span></span>

    <span data-ttu-id="386c8-698">*Ausführen des Auslastungstests*</span><span class="sxs-lookup"><span data-stu-id="386c8-698">*Running the load test*</span></span>
3. <span data-ttu-id="386c8-699">Warten Sie, bis der Auslastungstest abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="386c8-699">Wait until the load test completes.</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-700">Der Auslastungstest wird mehrere Benutzer, die gleichzeitig senden von Anfragen an die Web-app simuliert.</span><span class="sxs-lookup"><span data-stu-id="386c8-700">The load test simulates multiple users that send requests to the web app simultaneously.</span></span> <span data-ttu-id="386c8-701">Wenn der Test ausgeführt wird, können Sie die verfügbaren Leistungsindikatoren zum Erkennen von Fehlern, Warnungen und andere Informationen im Zusammenhang mit der Auslastungstestlauf überwachen.</span><span class="sxs-lookup"><span data-stu-id="386c8-701">When the test is running, you can monitor the available counters to detect any errors, warnings or other information related to your load test run.</span></span>

    <span data-ttu-id="386c8-702">![Auslastungstest ausführen](maintainable-azure-websites-managing-change-and-scale/_static/image101.png "warten, bis der Auslastungstest abgeschlossen ist")</span><span class="sxs-lookup"><span data-stu-id="386c8-702">![Load test running](maintainable-azure-websites-managing-change-and-scale/_static/image101.png "Waiting until the load test completes")</span></span>

    <span data-ttu-id="386c8-703">*Auslastungstest*</span><span class="sxs-lookup"><span data-stu-id="386c8-703">*Load test running*</span></span>
4. <span data-ttu-id="386c8-704">Nachdem der Test abgeschlossen ist, wechseln Sie zurück zum Verwaltungsportal, und navigieren Sie zu der **Skalierung** Ihre Web-app auf der Seite.</span><span class="sxs-lookup"><span data-stu-id="386c8-704">Once the test completes, go back to the management portal and navigate to the **Scale** page of your web app.</span></span> <span data-ttu-id="386c8-705">Klicken Sie unter der **Kapazität** Abschnitt Daraufhin sollte im Diagramm eine neue Instanz automatisch bereitgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="386c8-705">Under the **capacity** section, you should see in the graph that a new instance was automatically deployed.</span></span>

    ![Neue-Instanz automatisch bereitgestellt.](maintainable-azure-websites-managing-change-and-scale/_static/image102.png)

    <span data-ttu-id="386c8-707">*Neue-Instanz automatisch bereitgestellt.*</span><span class="sxs-lookup"><span data-stu-id="386c8-707">*New instance automatically deployed*</span></span>

    > [!NOTE]
    > <span data-ttu-id="386c8-708">Dauert möglicherweise einige Minuten, damit die Änderungen im Diagramm angezeigt (drücken Sie **STRG + F5** in regelmäßigen Abständen, um die Seite zu aktualisieren).</span><span class="sxs-lookup"><span data-stu-id="386c8-708">It may take several minutes for the changes to appear in the graph (press **CTRL + F5** periodically to refresh the page).</span></span> <span data-ttu-id="386c8-709">Wenn Sie die Änderungen nicht angezeigt werden, können Sie Folgendes versuchen:</span><span class="sxs-lookup"><span data-stu-id="386c8-709">If you do not see any changes, you can try the following:</span></span>
    > 
    > - <span data-ttu-id="386c8-710">Die Dauer des Auslastungstests erhöhen (z. B. um **10 Minuten**)</span><span class="sxs-lookup"><span data-stu-id="386c8-710">Increase the duration of the load test (e.g. to **10 minutes**)</span></span>
    > - <span data-ttu-id="386c8-711">Reduzieren Sie die maximalen und minimalen Werte der **Ziel-CPU** Bereich in der Konfiguration zur automatischen Skalierung Ihrer Web-App</span><span class="sxs-lookup"><span data-stu-id="386c8-711">Reduce the maximum and minimum values of the **Target CPU** range in the Autoscale configuration of your web app</span></span>
    > - <span data-ttu-id="386c8-712">Ausführen des Auslastungstests in der Cloud mit **Visual Studio Online**.</span><span class="sxs-lookup"><span data-stu-id="386c8-712">Run the load test in the cloud with **Visual Studio Online**.</span></span> <span data-ttu-id="386c8-713">Weitere Informationen [hier](https://www.visualstudio.com/get-started/load-test-your-app-vs.aspx)</span><span class="sxs-lookup"><span data-stu-id="386c8-713">More information [here](https://www.visualstudio.com/get-started/load-test-your-app-vs.aspx)</span></span>

* * *

<a id="Summary"></a>
## <a name="summary"></a><span data-ttu-id="386c8-714">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="386c8-714">Summary</span></span>

<span data-ttu-id="386c8-715">In dieser praktischen Übungseinheit haben Sie gelernt, wie zum Einrichten und Ihre Anwendung in Produktion Web-apps in Azure bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="386c8-715">In this hands-on lab, you learned how to set up and deploy your application to production web apps in Azure.</span></span> <span data-ttu-id="386c8-716">Sie begonnen haben, erkennen und aktualisieren die Datenbanken auf Grundlage **Entity Framework Code First-Migrationen**, klicken Sie dann durch die Bereitstellung neuer Versionen Ihres Standorts mithilfe Fortsetzung **Git** und Ausführen von Rollbacks zu der neueste stabile Version Ihres Standorts.</span><span class="sxs-lookup"><span data-stu-id="386c8-716">You started by detecting and updating your databases using **Entity Framework Code First Migrations**, then continued by deploying new versions of your site using **Git** and performing rollbacks to the latest stable version of your site.</span></span> <span data-ttu-id="386c8-717">Darüber hinaus haben Sie gelernt, wie beim Skalieren Ihrer app Speicher verwendet, um Ihre statischen Inhalte in einem Blob-Container zu verschieben.</span><span class="sxs-lookup"><span data-stu-id="386c8-717">Additionally, you learned how to scale your app using Storage to move your static content to a Blob container.</span></span>
