---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
title: "Erste Schritte mit Entity Framework 4.0-Datenbank zunächst und ASP.NET 4 Web Forms - Teil 2 | Microsoft Docs"
author: tdykstra
description: Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mit dem Entity Framework. Die beispielanwendung ist...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: fb63a326-a4ae-4b0c-a4f5-412327197216
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
msc.type: authoredcontent
ms.openlocfilehash: 4e2a3176aaedccd40ef6b619efa3c4052dd8470b
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/10/2017
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-2"></a><span data-ttu-id="7b223-104">Erste Schritte mit Entity Framework 4.0-Datenbank zunächst und ASP.NET 4 WebForms - Teil 2</span><span class="sxs-lookup"><span data-stu-id="7b223-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 2</span></span>
====================
<span data-ttu-id="7b223-105">Durch [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="7b223-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="7b223-106">Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mit dem Entity Framework 4.0 und Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="7b223-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="7b223-107">Informationen über die Reihe von Lernprogrammen finden Sie unter [im ersten Lernprogramm, in der Reihe](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="7b223-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="the-entitydatasource-control"></a><span data-ttu-id="7b223-108">EntityDataSource-Steuerelements</span><span class="sxs-lookup"><span data-stu-id="7b223-108">The EntityDataSource Control</span></span>

<span data-ttu-id="7b223-109">Im vorherigen Lernprogramm haben Sie eine Website, eine Datenbank und ein Datenmodell erstellt.</span><span class="sxs-lookup"><span data-stu-id="7b223-109">In the previous tutorial you created a web site, a database, and a data model.</span></span> <span data-ttu-id="7b223-110">In diesem Lernprogramm arbeiten Sie mit der `EntityDataSource` -Steuerelement, das ASP.NET zu erhalten, sodass ein Entity Framework-Datenmodells arbeiten erleichtern.</span><span class="sxs-lookup"><span data-stu-id="7b223-110">In this tutorial you work with the `EntityDataSource` control that ASP.NET provides in order to make it easy to work with an Entity Framework data model.</span></span> <span data-ttu-id="7b223-111">Erstellen Sie eine `GridView` Steuerelement zum Anzeigen und Bearbeiten von Daten zu Studenten, eine `DetailsView` Steuerelement zum Hinzufügen von neuen Studenten und ein `DropDownList` Steuerelement für die Auswahl einer Abteilung (die Sie später für die Anzeige von zugeordneten Kurse verwendet werden).</span><span class="sxs-lookup"><span data-stu-id="7b223-111">You'll create a `GridView` control for displaying and editing student data, a `DetailsView` control for adding new students, and a `DropDownList` control for selecting a department (which you'll use later for displaying associated courses).</span></span>

<span data-ttu-id="7b223-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span></span>

<span data-ttu-id="7b223-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span></span>

<span data-ttu-id="7b223-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span></span>

<span data-ttu-id="7b223-115">Beachten Sie, dass in dieser Anwendung Sie wird nicht werden hinzufügen Validierung von Benutzereingaben zu Seiten, die die Datenbank zu aktualisieren, und einige der Fehlerbehandlung weniger robust werden als erforderlich ist, in einer produktionsanwendung.</span><span class="sxs-lookup"><span data-stu-id="7b223-115">Note that in this application you won't be adding input validation to pages that update the database, and some of the error handling will not be as robust as would be required in a production application.</span></span> <span data-ttu-id="7b223-116">Behält das Lernprogramm konzentriert sich auf das Entity Framework und verhindert, dass er zu lang.</span><span class="sxs-lookup"><span data-stu-id="7b223-116">That keeps the tutorial focused on the Entity Framework and keeps it from getting too long.</span></span> <span data-ttu-id="7b223-117">Weitere Informationen dazu, wie diese Funktionen zu einer Anwendung hinzufügen, finden Sie unter [Validieren von Benutzereingaben in ASP.NET Web Pages](https://msdn.microsoft.com/en-us/library/7kh55542.aspx) und [Error Handling in ASP.NET Webseiten und Anwendungen](https://msdn.microsoft.com/en-us/library/w16865z6.aspx).</span><span class="sxs-lookup"><span data-stu-id="7b223-117">For details about how to add these features to your application, see [Validating User Input in ASP.NET Web Pages](https://msdn.microsoft.com/en-us/library/7kh55542.aspx) and [Error Handling in ASP.NET Pages and Applications](https://msdn.microsoft.com/en-us/library/w16865z6.aspx).</span></span>

## <a name="adding-and-configuring-the-entitydatasource-control"></a><span data-ttu-id="7b223-118">Hinzufügen und Konfigurieren des EntityDataSource-Steuerelements</span><span class="sxs-lookup"><span data-stu-id="7b223-118">Adding and Configuring the EntityDataSource Control</span></span>

<span data-ttu-id="7b223-119">Sie beginnen, indem Sie konfigurieren eine `EntityDataSource` Steuerelement lesen `Person` Entitäten aus der `People` Entitätenmenge.</span><span class="sxs-lookup"><span data-stu-id="7b223-119">You'll begin by configuring an `EntityDataSource` control to read `Person` entities from the `People` entity set.</span></span>

<span data-ttu-id="7b223-120">Stellen Sie sicher, dass Sie Visual Studio geöffnet haben, und, dass Sie mit dem Projekt arbeiten, ist Sie in Teil 1 erstellt.</span><span class="sxs-lookup"><span data-stu-id="7b223-120">Make sure you have Visual Studio open and that you're working with the project you created in part 1.</span></span> <span data-ttu-id="7b223-121">Wenn Sie seit der Erstellung des Datenmodells oder seit der letzten Änderung, das Sie vorgenommen haben, das Projekt erstellt haben, erstellen Sie jetzt das Projekt.</span><span class="sxs-lookup"><span data-stu-id="7b223-121">If you haven't built the project since you created the data model or since the last change you made to it, build the project now.</span></span> <span data-ttu-id="7b223-122">Änderungen am Datenmodell sind nicht zur Verfügung gestellt Designer erst das Projekt erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="7b223-122">Changes to the data model are not made available to the designer until the project is built.</span></span>

<span data-ttu-id="7b223-123">Erstellen Sie eine neue Webseite mit den **Webformular mit Gestaltungsvorlage** Vorlage, und nennen Sie sie *Students.aspx*.</span><span class="sxs-lookup"><span data-stu-id="7b223-123">Create a new web page using the **Web Form using Master Page** template, and name it *Students.aspx*.</span></span>

<span data-ttu-id="7b223-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span></span>

<span data-ttu-id="7b223-125">Geben Sie *Site.Master* als die Gestaltungsvorlage.</span><span class="sxs-lookup"><span data-stu-id="7b223-125">Specify *Site.Master* as the master page.</span></span> <span data-ttu-id="7b223-126">Alle Seiten, die Sie für diese Lernprogramme erstellen verwendet diese Masterseite.</span><span class="sxs-lookup"><span data-stu-id="7b223-126">All of the pages you create for these tutorials will use this master page.</span></span>

<span data-ttu-id="7b223-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span></span>

<span data-ttu-id="7b223-128">In **Quelle** anzeigen, Hinzufügen einer `h2` Überschrift, um die `Content` Steuerelement namens `Content2`, wie im folgenden Beispiel gezeigt:</span><span class="sxs-lookup"><span data-stu-id="7b223-128">In **Source** view, add an `h2` heading to the `Content` control named `Content2`, as shown in the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample1.aspx)]

<span data-ttu-id="7b223-129">Aus der **Daten** auf der Registerkarte die **Toolbox**, ziehen Sie ein `EntityDataSource` auf der Seite zu steuern, legen Sie es unterhalb der Überschrift und ändern Sie die ID in `StudentsEntityDataSource`:</span><span class="sxs-lookup"><span data-stu-id="7b223-129">From the **Data** tab of the **Toolbox**, drag an `EntityDataSource` control to the page, drop it below the heading, and change the ID to `StudentsEntityDataSource`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample2.aspx)]

<span data-ttu-id="7b223-130">Wechseln Sie zur **Entwurf** anzeigen, klicken Sie auf das Datenquellensteuerelement Smarttag, und klicken Sie dann auf **Datenquelle konfigurieren** zum Starten der **Datenquelle konfigurieren** Assistenten.</span><span class="sxs-lookup"><span data-stu-id="7b223-130">Switch to **Design** view, click the data source control's smart tag, and then click **Configure Data Source** to launch the **Configure Data Source** wizard.</span></span>

<span data-ttu-id="7b223-131">[![Image01 abgerufen wird](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span></span>

<span data-ttu-id="7b223-132">In der **ObjectContext konfigurieren** Schritt des Assistenten, wählen **den Eintrag SchoolEntities** als Wert für **Verbindung mit dem Namen**, und wählen Sie **den Eintrag SchoolEntities**als die **DefaultContainerName** Wert.</span><span class="sxs-lookup"><span data-stu-id="7b223-132">In the **Configure ObjectContext** wizard step, select **SchoolEntities** as the value for **Named Connection**, and select **SchoolEntities** as the **DefaultContainerName** value.</span></span> <span data-ttu-id="7b223-133">Klicken Sie dann auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="7b223-133">Then click **Next**.</span></span>

<span data-ttu-id="7b223-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span></span>

<span data-ttu-id="7b223-135">Hinweis: Wenn Sie das folgende Dialogfeld an diesem Punkt erhalten, müssen Sie zum Erstellen des Projekts, bevor Sie fortfahren.</span><span class="sxs-lookup"><span data-stu-id="7b223-135">Note: If you get the following dialog box at this point, you have to build the project before proceeding.</span></span>

<span data-ttu-id="7b223-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span></span>

<span data-ttu-id="7b223-137">In der **Datenauswahl konfigurieren** Schritt wählen **Personen** als Wert für **EntitySetName**.</span><span class="sxs-lookup"><span data-stu-id="7b223-137">In the **Configure Data Selection** step, select **People** as the value for **EntitySetName**.</span></span> <span data-ttu-id="7b223-138">Unter **wählen**, stellen Sie sicher, dass die **wählen Sie ein** ll Kontrollkästchen aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="7b223-138">Under **Select**, make sure the **Select A** ll check box is selected.</span></span> <span data-ttu-id="7b223-139">Wählen Sie dann die Optionen zum Aktivieren von aktualisieren und löschen.</span><span class="sxs-lookup"><span data-stu-id="7b223-139">Then select the options to enable update and delete.</span></span> <span data-ttu-id="7b223-140">Wenn Sie fertig sind, klicken Sie auf **Fertig stellen**.</span><span class="sxs-lookup"><span data-stu-id="7b223-140">When you're done, click **Finish**.</span></span>

<span data-ttu-id="7b223-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span></span>

## <a name="configuring-database-rules-to-allow-deletion"></a><span data-ttu-id="7b223-142">Konfigurieren von Datenbankregeln, um löschen zu ermöglichen</span><span class="sxs-lookup"><span data-stu-id="7b223-142">Configuring Database Rules to Allow Deletion</span></span>

<span data-ttu-id="7b223-143">Sie erstellen eine Seite, die Benutzer Studenten löschen kann die `Person` Tabelle, die drei Beziehungen zu anderen Tabellen hat (`Course`, `StudentGrade`, und `OfficeAssignment`).</span><span class="sxs-lookup"><span data-stu-id="7b223-143">You'll be creating a page that lets users delete students from the `Person` table, which has three relationships with other tables (`Course`, `StudentGrade`, and `OfficeAssignment`).</span></span> <span data-ttu-id="7b223-144">Wird standardmäßig die Datenbank wird verhindert, dass Sie löschen eine Zeile in `Person` verknüpfte Zeilen in einem der anderen Tabellen vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="7b223-144">By default, the database will prevent you from deleting a row in `Person` if there are related rows in one of the other tables.</span></span> <span data-ttu-id="7b223-145">Sie können die zugehörigen Zeilen manuell zuerst löschen, oder Sie können konfigurieren, dass die Datenbank, um diese automatisch gelöscht, wenn Sie löschen eine `Person` Zeile.</span><span class="sxs-lookup"><span data-stu-id="7b223-145">You can manually delete the related rows first, or you can configure the database to delete them automatically when you delete a `Person` row.</span></span> <span data-ttu-id="7b223-146">Für Studentendatensätze in diesem Lernprogramm konfigurieren Sie die Datenbank, um die verknüpften Daten automatisch zu löschen.</span><span class="sxs-lookup"><span data-stu-id="7b223-146">For student records in this tutorial, you'll configure the database to delete the related data automatically.</span></span> <span data-ttu-id="7b223-147">Da Studenten Zeilen verknüpft haben, können nur in der `StudentGrade` Tabelle, müssen Sie nur eine der drei Beziehungen konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="7b223-147">Because students can have related rows only in the `StudentGrade` table, you need to configure only one of the three relationships.</span></span>

<span data-ttu-id="7b223-148">Bei Verwendung der *School.mdf* Datei, die Sie aus dem Projekt heruntergeladen haben, die für dieses Lernprogramm geht, können Sie diesen Abschnitt überspringen, da diese Änderungen an der Konfiguration wurden bereits geschehen.</span><span class="sxs-lookup"><span data-stu-id="7b223-148">If you're using the *School.mdf* file that you downloaded from the project that goes with this tutorial, you can skip this section because these configuration changes have already been done.</span></span> <span data-ttu-id="7b223-149">Wenn Sie die Datenbank durch Ausführen eines Skripts erstellt haben, können konfigurieren Sie die Datenbank durch Ausführen der folgenden Verfahren.</span><span class="sxs-lookup"><span data-stu-id="7b223-149">If you created the database by running a script, configure the database by performing the following procedures.</span></span>

<span data-ttu-id="7b223-150">In **Server-Explorer**, öffnen Sie das Datenbankdiagramm, die Sie in Teil 1 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="7b223-150">In **Server Explorer**, open the database diagram that you created in part 1.</span></span> <span data-ttu-id="7b223-151">Mit der rechten Maustaste in der Beziehung zwischen `Person` und `StudentGrade` (die Linie zwischen Tabellen), und wählen Sie dann **Eigenschaften**.</span><span class="sxs-lookup"><span data-stu-id="7b223-151">Right-click the relationship between `Person` and `StudentGrade` (the line between tables), and then select **Properties**.</span></span>

<span data-ttu-id="7b223-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span></span>

<span data-ttu-id="7b223-153">In der **Eigenschaften** Fenster, erweitern Sie **INSERT- und UPDATE-Spezifikation** und legen Sie die **DeleteRule** Eigenschaft **Cascade**.</span><span class="sxs-lookup"><span data-stu-id="7b223-153">In the **Properties** window, expand **INSERT and UPDATE Specification** and set the **DeleteRule** property to **Cascade**.</span></span>

<span data-ttu-id="7b223-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span></span>

<span data-ttu-id="7b223-155">Speichern Sie und schließen Sie das Diagramm.</span><span class="sxs-lookup"><span data-stu-id="7b223-155">Save and close the diagram.</span></span> <span data-ttu-id="7b223-156">Wenn Sie gefragt werden, ob Sie die Datenbank aktualisieren möchten, klicken Sie auf **Ja**.</span><span class="sxs-lookup"><span data-stu-id="7b223-156">If you're asked whether you want to update the database, click **Yes**.</span></span>

<span data-ttu-id="7b223-157">Um sicherzustellen, dass das Modell Entitäten, die im Arbeitsspeicher verfolgt mit die Datenbank ausgeführten synchron sind, müssen Sie die entsprechende Regeln im Datenmodell festlegen.</span><span class="sxs-lookup"><span data-stu-id="7b223-157">To make sure that the model keeps entities that are in memory in sync with what the database is doing, you must set corresponding rules in the data model.</span></span> <span data-ttu-id="7b223-158">Open *SchoolModel.edmx*, mit der rechten Maustaste die Assoziationslinie zwischen `Person` und `StudentGrade`, und wählen Sie dann **Eigenschaften**.</span><span class="sxs-lookup"><span data-stu-id="7b223-158">Open *SchoolModel.edmx*, right-click the association line between `Person` and `StudentGrade`, and then select **Properties**.</span></span>

<span data-ttu-id="7b223-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span></span>

<span data-ttu-id="7b223-160">In der **Eigenschaften** legen **End1 OnDelete-** auf **Cascade**.</span><span class="sxs-lookup"><span data-stu-id="7b223-160">In the **Properties** window, set **End1 OnDelete** to **Cascade**.</span></span>

<span data-ttu-id="7b223-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span></span>

<span data-ttu-id="7b223-162">Speichern und schließen Sie die *SchoolModel.edmx* Datei, und klicken Sie dann das Projekt neu.</span><span class="sxs-lookup"><span data-stu-id="7b223-162">Save and close the *SchoolModel.edmx* file, and then rebuild the project.</span></span>

<span data-ttu-id="7b223-163">Wenn die Datenbank geändert wird, müssen Sie im Allgemeinen mehrere Optionen zum Einrichten des Modells zu synchronisieren:</span><span class="sxs-lookup"><span data-stu-id="7b223-163">In general, when the database changes, you have several choices for how to sync up the model:</span></span>

- <span data-ttu-id="7b223-164">Für bestimmte Arten von Änderungen (z. B. hinzufügen oder Aktualisieren von Tabellen, Sichten oder gespeicherte Prozeduren), mit der rechten Maustaste in den Designer, und wählen **Modell aus der Datenbank aktualisieren** Designer stellen automatisch die Änderungen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="7b223-164">For certain kinds of changes (such as adding or refreshing tables, views, or stored procedures), right-click in the designer and select **Update Model from Database** to have the designer make the changes automatically.</span></span>
- <span data-ttu-id="7b223-165">Generieren Sie das Datenmodell.</span><span class="sxs-lookup"><span data-stu-id="7b223-165">Regenerate the data model.</span></span>
- <span data-ttu-id="7b223-166">Stellen Sie die manuelle Aktualisierungen, wie diese.</span><span class="sxs-lookup"><span data-stu-id="7b223-166">Make manual updates like this one.</span></span>

<span data-ttu-id="7b223-167">In diesem Fall konnte haben das Modell generiert oder aktualisiert die Tabellen, die von der beziehungsänderung betroffen sind, müssen dann aber würde die Feldnamen Änderung erneut durchgeführt (aus `FirstName` auf `FirstMidName`).</span><span class="sxs-lookup"><span data-stu-id="7b223-167">In this case, you could have regenerated the model or refreshed the tables affected by the relationship change, but then you'd have to make the field-name change again (from `FirstName` to `FirstMidName`).</span></span>

## <a name="using-a-gridview-control-to-read-and-update-entities"></a><span data-ttu-id="7b223-168">Verwenden eine GridView-Steuerelements zum Lesen und Aktualisieren von Entitäten</span><span class="sxs-lookup"><span data-stu-id="7b223-168">Using a GridView Control to Read and Update Entities</span></span>

<span data-ttu-id="7b223-169">In diesem Abschnitt wird anhand einer `GridView` Steuerelement zum Anzeigen, aktualisieren oder löschen Studenten.</span><span class="sxs-lookup"><span data-stu-id="7b223-169">In this section you'll use a `GridView` control to display, update, or delete students.</span></span>

<span data-ttu-id="7b223-170">Öffnen oder wechseln Sie zur *Students.aspx* und wechseln Sie zur **Entwurf** anzeigen.</span><span class="sxs-lookup"><span data-stu-id="7b223-170">Open or switch to *Students.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="7b223-171">Aus der **Daten** auf der Registerkarte die **Toolbox**, ziehen Sie eine `GridView` Steuerelement rechts neben der `EntityDataSource` steuern, benennen Sie sie `StudentsGridView`, klicken Sie auf das Smarttag, und wählen Sie dann  **StudentsEntityDataSource** als Datenquelle.</span><span class="sxs-lookup"><span data-stu-id="7b223-171">From the **Data** tab of the **Toolbox**, drag a `GridView` control to the right of the `EntityDataSource` control, name it `StudentsGridView`, click the smart tag, and then select **StudentsEntityDataSource** as the data source.</span></span>

<span data-ttu-id="7b223-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span></span>

<span data-ttu-id="7b223-173">Klicken Sie auf **Schema aktualisieren** (klicken Sie auf **Ja** Wenn Sie aufgefordert werden, um zu bestätigen), klicken Sie dann auf **Paging aktivieren**, **Sortieren aktivieren**, **Bearbeitung aktivieren**, und **löschen aktivieren**.</span><span class="sxs-lookup"><span data-stu-id="7b223-173">Click **Refresh Schema** (click **Yes** if you're prompted to confirm), then click **Enable Paging**, **Enable Sorting**, **Enable Editing**, and **Enable Deleting**.</span></span>

<span data-ttu-id="7b223-174">Klicken Sie auf **Spalten bearbeiten**.</span><span class="sxs-lookup"><span data-stu-id="7b223-174">Click **Edit Columns**.</span></span>

<span data-ttu-id="7b223-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span></span>

<span data-ttu-id="7b223-176">In der **ausgewählte Felder** löschen **PersonID**, **LastName**, und **HireDate**.</span><span class="sxs-lookup"><span data-stu-id="7b223-176">In the **Selected fields** box, delete **PersonID**, **LastName**, and **HireDate**.</span></span> <span data-ttu-id="7b223-177">Sie nicht in der Regel eine Datensatzschlüssel für Benutzer anzeigen, Einstellungsdatum ist nicht relevant für Studenten, und bringen Sie beide Teile des Namens in einem Feld, sodass Sie nur eines der Felder für die Dinge.)</span><span class="sxs-lookup"><span data-stu-id="7b223-177">You typically don't display a record key to users, hire date is not relevant to students, and you'll put both parts of the name in one field, so you only need one of the name fields.)</span></span>

<span data-ttu-id="7b223-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span></span>

<span data-ttu-id="7b223-179">Wählen Sie die **FirstMidName** Feld, und klicken Sie dann auf **dieses Feld in ein TemplateField konvertieren**.</span><span class="sxs-lookup"><span data-stu-id="7b223-179">Select the **FirstMidName** field and then click **Convert this field into a TemplateField**.</span></span>

<span data-ttu-id="7b223-180">Führen Sie dieselben Aktionen für **EnrollmentDate**.</span><span class="sxs-lookup"><span data-stu-id="7b223-180">Do the same for **EnrollmentDate**.</span></span>

<span data-ttu-id="7b223-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span></span>

<span data-ttu-id="7b223-182">Klicken Sie auf **OK** und wechseln Sie zur **Quelle** anzeigen.</span><span class="sxs-lookup"><span data-stu-id="7b223-182">Click **OK** and then switch to **Source** view.</span></span> <span data-ttu-id="7b223-183">Die verbleibenden Änderungen wird einfacher, direkt im Markup.</span><span class="sxs-lookup"><span data-stu-id="7b223-183">The remaining changes will be easier to do directly in markup.</span></span> <span data-ttu-id="7b223-184">Die `GridView` Markup sieht wie im folgenden Beispiel steuern.</span><span class="sxs-lookup"><span data-stu-id="7b223-184">The `GridView` control markup now looks like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample3.aspx)]

<span data-ttu-id="7b223-185">Die erste Spalte nach dem Befehlsfeld, der derzeit ein Vorlagenfeld ist zeigt den Vornamen an.</span><span class="sxs-lookup"><span data-stu-id="7b223-185">The first column after the command field is a template field that currently displays the first name.</span></span> <span data-ttu-id="7b223-186">Ändern Sie das Markup für dieses Feld "Vorlage" wie im folgenden Beispiel aussehen:</span><span class="sxs-lookup"><span data-stu-id="7b223-186">Change the markup for this template field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample4.aspx)]

<span data-ttu-id="7b223-187">Im Anzeigemodus zwei `Label` Steuerelemente zeigen Sie die erste und letzte Bezeichnung.</span><span class="sxs-lookup"><span data-stu-id="7b223-187">In display mode, two `Label` controls display the first and last name.</span></span> <span data-ttu-id="7b223-188">In den Bearbeitungsmodus wechseln werden zwei Textfelder bereitgestellt, damit Sie die vor- und Nachnamen ändern können.</span><span class="sxs-lookup"><span data-stu-id="7b223-188">In edit mode, two text boxes are provided so you can change the first and last name.</span></span> <span data-ttu-id="7b223-189">Wie bei der `Label` Steuerelemente im Anzeigemodus, verwenden Sie `Bind` und `Eval` würden Sie Ausdrücke, wie Sie mit ASP.NET-Datensteuerelementen für Datenquellen, die direkt mit Datenbanken herstellen.</span><span class="sxs-lookup"><span data-stu-id="7b223-189">As with the `Label` controls in display mode, you use `Bind` and `Eval` expressions exactly as you would with ASP.NET data source controls that connect directly to databases.</span></span> <span data-ttu-id="7b223-190">Der einzige Unterschied ist, dass Sie die Eigenschaften der Entität anstatt Datenbankspalten angegeben sind.</span><span class="sxs-lookup"><span data-stu-id="7b223-190">The only difference is that you're specifying entity properties instead of database columns.</span></span>

<span data-ttu-id="7b223-191">Die letzte Spalte ist eine Vorlagenfeld, das Registrierungsdatum anzeigt.</span><span class="sxs-lookup"><span data-stu-id="7b223-191">The last column is a template field that displays the enrollment date.</span></span> <span data-ttu-id="7b223-192">Ändern Sie das Markup für dieses Feld, wie im folgenden Beispiel aussehen:</span><span class="sxs-lookup"><span data-stu-id="7b223-192">Change the markup for this field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample5.aspx)]

<span data-ttu-id="7b223-193">In beiden anzeigen und bearbeiten-Modus die Formatzeichenfolge "{0, d}" bewirkt, dass das Datum im Format "kurzes Datum" angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="7b223-193">In both display and edit mode, the format string "{0,d}" causes the date to be displayed in the "short date" format.</span></span> <span data-ttu-id="7b223-194">(Der Computer möglicherweise konfiguriert werden anders als die Bilder in diesem Lernprogramm erläuterten-Format anzuzeigen.)</span><span class="sxs-lookup"><span data-stu-id="7b223-194">(Your computer might be configured to display this format differently from the screen images shown in this tutorial.)</span></span>

<span data-ttu-id="7b223-195">Beachten Sie, dass in jedem dieser Vorlage Felder können der Designer verwendet eine `Bind` Ausdruck, durch die standardmäßige, aber Sie geändert haben, um eine `Eval` Ausdruck in der `ItemTemplate` Elemente.</span><span class="sxs-lookup"><span data-stu-id="7b223-195">Notice that in each of these template fields, the designer used a `Bind` expression by default, but you've changed that to an `Eval` expression in the `ItemTemplate` elements.</span></span> <span data-ttu-id="7b223-196">Die `Bind` Ausdruck werden die Daten in `GridView` Eigenschaften für den Fall, dass Sie benötigen Zugriff auf die Daten im Code zu steuern.</span><span class="sxs-lookup"><span data-stu-id="7b223-196">The `Bind` expression makes the data available in `GridView` control properties in case you need to access the data in code.</span></span> <span data-ttu-id="7b223-197">In dieser Seite müssen Sie Zugriff auf diese Daten im Code, damit Sie verwenden können `Eval`, dies ist effizienter.</span><span class="sxs-lookup"><span data-stu-id="7b223-197">In this page you don't need to access this data in code, so you can use `Eval`, which is more efficient.</span></span> <span data-ttu-id="7b223-198">Weitere Informationen finden Sie unter [Abrufen Ihrer Daten außerhalb des Data-Steuerelemente](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span><span class="sxs-lookup"><span data-stu-id="7b223-198">For more information, see [Getting your data out of the data controls](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span></span>

## <a name="revising-entitydatasource-control-markup-to-improve-performance"></a><span data-ttu-id="7b223-199">Überarbeiten EntityDataSource-Steuerelement-Markup zum Verbessern der Leistung</span><span class="sxs-lookup"><span data-stu-id="7b223-199">Revising EntityDataSource Control Markup to Improve Performance</span></span>

<span data-ttu-id="7b223-200">In das Markup für die `EntityDataSource` steuern, entfernen Sie die `ConnectionString` und `DefaultContainerName` -Attribute, und Ersetzen Sie sie durch eine `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` Attribut.</span><span class="sxs-lookup"><span data-stu-id="7b223-200">In the markup for the `EntityDataSource` control, remove the `ConnectionString` and `DefaultContainerName` attributes and replace them with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="7b223-201">Dies ist eine Änderung, Sie nehmen jedes Mal, wenn Sie erstellen, ein `EntityDataSource` zu steuern, es sei denn, Sie müssen eine Verbindung zu verwenden, die sich von der unterscheidet, die in der Objektkontextklasse hartcodiert ist.</span><span class="sxs-lookup"><span data-stu-id="7b223-201">This is a change you should make every time you create an `EntityDataSource` control, unless you need to use a connection that is different from the one that's hard-coded in the object context class.</span></span> <span data-ttu-id="7b223-202">Mithilfe der `ContextTypeName` Attribut bietet folgende Vorteile:</span><span class="sxs-lookup"><span data-stu-id="7b223-202">Using the `ContextTypeName` attribute provides the following benefits:</span></span>

- <span data-ttu-id="7b223-203">Bessere Leistung.</span><span class="sxs-lookup"><span data-stu-id="7b223-203">Better performance.</span></span> <span data-ttu-id="7b223-204">Wenn die `EntityDataSource` Steuerelement initialisiert das Modell mithilfe der `ConnectionString` und `DefaultContainerName` Attribute, es werden zusätzliche Aufgaben zum Laden der Metadaten für jede Anforderung ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="7b223-204">When the `EntityDataSource` control initializes the data model using the `ConnectionString` and `DefaultContainerName` attributes, it performs additional work to load metadata on every request.</span></span> <span data-ttu-id="7b223-205">Dies ist nicht erforderlich, wenn Sie angeben, die `ContextTypeName` Attribut.</span><span class="sxs-lookup"><span data-stu-id="7b223-205">This isn't necessary if you specify the `ContextTypeName` attribute.</span></span>
- <span data-ttu-id="7b223-206">Verzögertes Laden ist standardmäßig aktiviert, in dem generierten Kontext Objektklassen (wie z. B. `SchoolEntities` in diesem Lernprogramm) in Entity Framework 4.0.</span><span class="sxs-lookup"><span data-stu-id="7b223-206">Lazy loading is turned on by default in generated object context classes (such as `SchoolEntities` in this tutorial) in Entity Framework 4.0.</span></span> <span data-ttu-id="7b223-207">Dies bedeutet, dass Navigationseigenschaften mit verbundenen Daten automatisch geladen werden rechts bei Bedarf.</span><span class="sxs-lookup"><span data-stu-id="7b223-207">This means that navigation properties are loaded with related data automatically right when you need it.</span></span> <span data-ttu-id="7b223-208">Verzögertes Laden wird weiter unten in diesem Lernprogramm ausführlicher erläutert.</span><span class="sxs-lookup"><span data-stu-id="7b223-208">Lazy loading is explained in more detail later in this tutorial.</span></span>
- <span data-ttu-id="7b223-209">Alle Anpassungen, die auf die Objektkontextklasse angewendet haben (in diesem Fall die `SchoolEntities` Klasse) stehen, Steuerelemente, mit denen die `EntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="7b223-209">Any customizations that you've applied to the object context class (in this case, the `SchoolEntities` class) will be available to controls that use the `EntityDataSource` control.</span></span> <span data-ttu-id="7b223-210">Anpassen der Context-Klasse des Objekts ist ein-Thema für fortgeschrittene, die in diesem Lernprogramm Reihe nicht behandelt wird.</span><span class="sxs-lookup"><span data-stu-id="7b223-210">Customizing the object context class is an advanced topic that is not covered in this tutorial series.</span></span> <span data-ttu-id="7b223-211">Weitere Informationen finden Sie unter [Erweitern von Entity Framework generierten Typen](https://msdn.microsoft.com/en-us/library/dd456844.aspx).</span><span class="sxs-lookup"><span data-stu-id="7b223-211">For more information, see [Extending Entity Framework Generated Types](https://msdn.microsoft.com/en-us/library/dd456844.aspx).</span></span>

<span data-ttu-id="7b223-212">Das Markup wird jetzt dem folgenden Beispiel entsprechen (die Reihenfolge der Eigenschaften möglicherweise unterschiedliche):</span><span class="sxs-lookup"><span data-stu-id="7b223-212">The markup will now resemble the following example (the order of the properties might be different):</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample6.aspx)]

<span data-ttu-id="7b223-213">Die `EnableFlattening` Attribut bezieht sich auf eine Funktion, die in früheren Versionen von Entity Framework erforderlich war, da Fremdschlüsselspalten als Eigenschaften der Entität nicht verfügbar gemacht wurden.</span><span class="sxs-lookup"><span data-stu-id="7b223-213">The `EnableFlattening` attribute refers to a feature that was needed in earlier versions of the Entity Framework because foreign key columns were not exposed as entity properties.</span></span> <span data-ttu-id="7b223-214">Die aktuelle Version ermöglicht das verwenden *foreign Key-Zuordnungen*, was bedeutet, dass Fremdschlüsseleigenschaften für alle bis m: n-Zuordnungen verfügbar gemacht werden.</span><span class="sxs-lookup"><span data-stu-id="7b223-214">The current version makes it possible to use *foreign key associations*, which means foreign key properties are exposed for all but many-to-many associations.</span></span> <span data-ttu-id="7b223-215">Wenn die Entitäten Fremdschlüsseleigenschaften und keine haben [komplexe Typen](https://msdn.microsoft.com/en-us/library/bb738472.aspx), lassen Sie dieses Attribut `False`.</span><span class="sxs-lookup"><span data-stu-id="7b223-215">If your entities have foreign key properties and no [complex types](https://msdn.microsoft.com/en-us/library/bb738472.aspx), you can leave this attribute set to `False`.</span></span> <span data-ttu-id="7b223-216">Das Attribut nicht von der Markuperweiterung entfernt werden, da der Standardwert ist `True`.</span><span class="sxs-lookup"><span data-stu-id="7b223-216">Don't remove the attribute from the markup, because the default value is `True`.</span></span> <span data-ttu-id="7b223-217">Weitere Informationen finden Sie unter [vereinfachen von Objekten (EntityDataSource)](https://msdn.microsoft.com/en-us/library/ee404746.aspx).</span><span class="sxs-lookup"><span data-stu-id="7b223-217">For more information, see [Flattening Objects (EntityDataSource)](https://msdn.microsoft.com/en-us/library/ee404746.aspx).</span></span>

<span data-ttu-id="7b223-218">Führen Sie die Seite, und Sie sehen eine Liste der Schüler und Mitarbeiter (Sie müssen für Studenten einfach in den nächsten Lernprogrammen ' filter ').</span><span class="sxs-lookup"><span data-stu-id="7b223-218">Run the page and you see a list of students and employees (you'll filter for just students in the next tutorial).</span></span> <span data-ttu-id="7b223-219">Die vor- und Nachname werden zusammen angezeigt.</span><span class="sxs-lookup"><span data-stu-id="7b223-219">The first name and last name are displayed together.</span></span>

<span data-ttu-id="7b223-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span></span>

<span data-ttu-id="7b223-221">Um die Anzeige zu sortieren, klicken Sie auf einen Spaltennamen an.</span><span class="sxs-lookup"><span data-stu-id="7b223-221">To sort the display, click a column name.</span></span>

<span data-ttu-id="7b223-222">Klicken Sie auf **bearbeiten** in einer Zeile.</span><span class="sxs-lookup"><span data-stu-id="7b223-222">Click **Edit** in any row.</span></span> <span data-ttu-id="7b223-223">Textfelder werden angezeigt, in dem Sie die vor- und Nachnamen ändern können.</span><span class="sxs-lookup"><span data-stu-id="7b223-223">Text boxes are displayed where you can change the first and last name.</span></span>

<span data-ttu-id="7b223-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span></span>

<span data-ttu-id="7b223-225">Die **löschen** Schaltfläche auch funktioniert.</span><span class="sxs-lookup"><span data-stu-id="7b223-225">The **Delete** button also works.</span></span> <span data-ttu-id="7b223-226">Klicken Sie auf "löschen", für die Zeile, die ein Registrierungsdatum verfügt nicht mehr angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="7b223-226">Click delete for a row that has an enrollment date and the row disappears.</span></span> <span data-ttu-id="7b223-227">(Zeilen ohne eine Registrierungsdatum Dozenten und erhalten Sie möglicherweise einen Fehler der referenziellen Integrität.</span><span class="sxs-lookup"><span data-stu-id="7b223-227">(Rows without an enrollment date represent instructors and you may get a referential integrity error.</span></span> <span data-ttu-id="7b223-228">In den nächsten Lernprogrammen müssen Sie diese Liste, sodass nur Studenten filtern.)</span><span class="sxs-lookup"><span data-stu-id="7b223-228">In the next tutorial you'll filter this list to include just students.)</span></span>

## <a name="displaying-data-from-a-navigation-property"></a><span data-ttu-id="7b223-229">Anzeigen von Daten von einer Navigationseigenschaft aus</span><span class="sxs-lookup"><span data-stu-id="7b223-229">Displaying Data from a Navigation Property</span></span>

<span data-ttu-id="7b223-230">Angenommen, Sie möchten wissen, wie viele Kurse ist jeder Student jetzt bei registriert.</span><span class="sxs-lookup"><span data-stu-id="7b223-230">Now suppose you want to know how many courses each student is enrolled in.</span></span> <span data-ttu-id="7b223-231">Das Entity Framework stellt diese Informationen in den `StudentGrades` Navigationseigenschaft der `Person` Entität.</span><span class="sxs-lookup"><span data-stu-id="7b223-231">The Entity Framework provides that information in the `StudentGrades` navigation property of the `Person` entity.</span></span> <span data-ttu-id="7b223-232">Da eine Student in einen Kurs registriert werden, ohne dass eine Klasse zugewiesen aufgrund des Datenbankentwurfs nicht möglich, für dieses Lernprogramm können Sie davon ausgehen, dass eine Zeile der `StudentGrade` Tabellenzeile, die mit einem Kurs anfallen entspricht dem in diesem Kurs registriert wird.</span><span class="sxs-lookup"><span data-stu-id="7b223-232">Because the database design does not allow a student to be enrolled in a course without having a grade assigned, for this tutorial you can assume that having a row in the `StudentGrade` table row that is associated with a course is the same as being enrolled in the course.</span></span> <span data-ttu-id="7b223-233">(Die `Courses` Navigationseigenschaft ist nur für Lehrkräfte.)</span><span class="sxs-lookup"><span data-stu-id="7b223-233">(The `Courses` navigation property is only for instructors.)</span></span>

<span data-ttu-id="7b223-234">Bei Verwendung der `ContextTypeName` Attribut von der `EntityDataSource` -Steuerelement, das Entity Framework automatisch Ruft Informationen für eine Navigationseigenschaft beim Zugriff auf diese Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="7b223-234">When you use the `ContextTypeName` attribute of the `EntityDataSource` control, the Entity Framework automatically retrieves information for a navigation property when you access that property.</span></span> <span data-ttu-id="7b223-235">Hierbei spricht *verzögertes Laden*.</span><span class="sxs-lookup"><span data-stu-id="7b223-235">This is called *lazy loading*.</span></span> <span data-ttu-id="7b223-236">Dies kann jedoch ineffizient sein, da es einen separaten Aufruf von der Datenbank führt, die jedes Mal zusätzliche Informationen benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="7b223-236">However, this can be inefficient, because it results in a separate call to the database each time additional information is needed.</span></span> <span data-ttu-id="7b223-237">Wenn Sie Daten aus der Navigationseigenschaft für jede Entität zurückgegebenes benötigen die `EntityDataSource` -Steuerelement, es ist jedoch effizienter, die verknüpften Daten zusammen mit der Entität selbst in einem einzigen Aufruf der Datenbank abgerufen.</span><span class="sxs-lookup"><span data-stu-id="7b223-237">If you need data from the navigation property for every entity returned by the `EntityDataSource` control, it's more efficient to retrieve the related data along with the entity itself in a single call to the database.</span></span> <span data-ttu-id="7b223-238">Hierbei spricht *unverzüglichem Laden*, und geben Sie für eine Navigationseigenschaft unverzüglichem Laden durch Festlegen der `Include` Eigenschaft von der `EntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="7b223-238">This is called *eager loading*, and you specify eager loading for a navigation property by setting the `Include` property of the `EntityDataSource` control.</span></span>

<span data-ttu-id="7b223-239">In *Students.aspx*, die Anzahl der Kurse für jede Student angezeigt werden sollen, sodass unverzüglichem Laden ist die beste Wahl.</span><span class="sxs-lookup"><span data-stu-id="7b223-239">In *Students.aspx*, you want to show the number of courses for every student, so eager loading is the best choice.</span></span> <span data-ttu-id="7b223-240">Wenn Sie alle Studenten anzeigen, jedoch mit der Anzahl der Kurse wurden möglicherweise nur für einige davon (, müsste das Schreiben von Code neben dem Markup), verzögertes Laden eine bessere Wahl sein.</span><span class="sxs-lookup"><span data-stu-id="7b223-240">If you were displaying all students but showing the number of courses only for a few of them (which would require writing some code in addition to the markup), lazy loading might be a better choice.</span></span>

<span data-ttu-id="7b223-241">Öffnen oder wechseln Sie zur *Students.aspx*, wechseln Sie zur **Entwurf** wählen `StudentsEntityDataSource`, und klicken Sie in der **Eigenschaften** Fenster Satz der **Include**Eigenschaft **StudentGrades**.</span><span class="sxs-lookup"><span data-stu-id="7b223-241">Open or switch to *Students.aspx*, switch to **Design** view, select `StudentsEntityDataSource`, and in the **Properties** window set the **Include** property to **StudentGrades**.</span></span> <span data-ttu-id="7b223-242">(Wenn Sie mehrere Navigationseigenschaften abrufen möchten, geben Sie deren Namen durch Kommas getrennt – z. B. **StudentGrades, Kursen**.)</span><span class="sxs-lookup"><span data-stu-id="7b223-242">(If you wanted to get multiple navigation properties, you could specify their names separated by commas — for example, **StudentGrades, Courses**.)</span></span>

<span data-ttu-id="7b223-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span></span>

<span data-ttu-id="7b223-244">Wechseln Sie zur **Quelle** anzeigen.</span><span class="sxs-lookup"><span data-stu-id="7b223-244">Switch to **Source** view.</span></span> <span data-ttu-id="7b223-245">In der `StudentsGridView` -Steuerelement, nach dem letzten `asp:TemplateField` -Element, das folgende Vorlagenfeld der neuen hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="7b223-245">In the `StudentsGridView` control, after the last `asp:TemplateField` element, add the following new template field:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample7.aspx)]

<span data-ttu-id="7b223-246">In der `Eval` Ausdruck können Sie die Navigationseigenschaft verweisen `StudentGrades`.</span><span class="sxs-lookup"><span data-stu-id="7b223-246">In the `Eval` expression, you can reference the navigation property `StudentGrades`.</span></span> <span data-ttu-id="7b223-247">Da diese Eigenschaft eine Auflistung enthält, hat eine `Count` -Eigenschaft, die Sie verwenden können, um die Anzahl der Kurse anzeigen, in dem die Studenten registriert ist.</span><span class="sxs-lookup"><span data-stu-id="7b223-247">Because this property contains a collection, it has a `Count` property that you can use to display the number of courses in which the student is enrolled.</span></span> <span data-ttu-id="7b223-248">In einem späteren Lernprogramm sehen Sie, wie Daten von Navigationseigenschaften dargestellt, die einzelne Entitäten anstelle von Sammlungen enthalten.</span><span class="sxs-lookup"><span data-stu-id="7b223-248">In a later tutorial you'll see how to display data from navigation properties that contain single entities instead of collections.</span></span> <span data-ttu-id="7b223-249">(Beachten Sie, das nicht `BoundField` Elemente zum Anzeigen von Daten von Navigationseigenschaften.)</span><span class="sxs-lookup"><span data-stu-id="7b223-249">(Note that you cannot use `BoundField` elements to display data from navigation properties.)</span></span>

<span data-ttu-id="7b223-250">Führen Sie die Seite, und Sie nun sehen, wie viele Kurse Student registriert ist.</span><span class="sxs-lookup"><span data-stu-id="7b223-250">Run the page and you now see how many courses each student is enrolled in.</span></span>

<span data-ttu-id="7b223-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span></span>

## <a name="using-a-detailsview-control-to-insert-entities"></a><span data-ttu-id="7b223-252">Verwenden ein DetailsView-Steuerelement zum Einfügen von Entitäten</span><span class="sxs-lookup"><span data-stu-id="7b223-252">Using a DetailsView Control to Insert Entities</span></span>

<span data-ttu-id="7b223-253">Der nächste Schritt besteht, um eine Seite zu erstellen, verfügt ein `DetailsView` Steuerelement, mit denen Sie die neue Studenten hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="7b223-253">The next step is to create a page that has a `DetailsView` control that will let you add new students.</span></span> <span data-ttu-id="7b223-254">Schließen Sie den Browser, und klicken Sie dann erstellen Sie eine neue Webseite mit den *Site.Master* Masterseite.</span><span class="sxs-lookup"><span data-stu-id="7b223-254">Close the browser and then create a new web page using the *Site.Master* master page.</span></span> <span data-ttu-id="7b223-255">Nennen Sie die Seite *StudentsAdd.aspx*, und wechseln Sie zur **Quelle** anzeigen.</span><span class="sxs-lookup"><span data-stu-id="7b223-255">Name the page *StudentsAdd.aspx*, and then switch to **Source** view.</span></span>

<span data-ttu-id="7b223-256">Fügen Sie das folgende Markup ersetzt das vorhandene Markup für die `Content` Steuerelement namens `Content2`:</span><span class="sxs-lookup"><span data-stu-id="7b223-256">Add the following markup to replace the existing markup for the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample8.aspx)]

<span data-ttu-id="7b223-257">Dieses Markup erstellt einen `EntityDataSource` Steuerelement, das mit dem Umwandlungsoperator im erstellten *Students.aspx*, außer dass es einfügen kann.</span><span class="sxs-lookup"><span data-stu-id="7b223-257">This markup creates an `EntityDataSource` control that is similar to the one you created in *Students.aspx*, except it enables insertion.</span></span> <span data-ttu-id="7b223-258">Wie bei der `GridView` zu steuern, die gebundenen Felder von der `DetailsView` Steuerelement codiert werden, genau so, wie sie für ein Steuerelement, das direkt mit einer Datenbank verbunden werden würde, mit dem Unterschied, dass sie die Eigenschaften der Entität verweisen.</span><span class="sxs-lookup"><span data-stu-id="7b223-258">As with the `GridView` control, the bound fields of the `DetailsView` control are coded exactly as they would be for a data control that connects directly to a database, except that they reference entity properties.</span></span> <span data-ttu-id="7b223-259">In diesem Fall die `DetailsView` Steuerelement dient nur für das Einfügen von Zeilen, damit Sie den Standardmodus, um festgelegt haben `Insert`.</span><span class="sxs-lookup"><span data-stu-id="7b223-259">In this case, the `DetailsView` control is used only for inserting rows, so you have set the default mode to `Insert`.</span></span>

<span data-ttu-id="7b223-260">Führen Sie die Seite, und fügen Sie einen neuen Studenten hinzu.</span><span class="sxs-lookup"><span data-stu-id="7b223-260">Run the page and add a new student.</span></span>

<span data-ttu-id="7b223-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span></span>

<span data-ttu-id="7b223-262">Keine Aktion ausgeführt, nachdem Sie einen neuen Studenten einfügen, aber wenn Sie jetzt ausführen *Students.aspx*, sehen Sie die neuen Student-Informationen.</span><span class="sxs-lookup"><span data-stu-id="7b223-262">Nothing will happen after you insert a new student, but if you now run *Students.aspx*, you'll see the new student information.</span></span>

## <a name="displaying-data-in-a-drop-down-list"></a><span data-ttu-id="7b223-263">Anzeigen von Daten in eine Dropdown-Liste</span><span class="sxs-lookup"><span data-stu-id="7b223-263">Displaying Data in a Drop-Down List</span></span>

<span data-ttu-id="7b223-264">In den folgenden Schritten fügen Sie Databind eine `DropDownList` Steuerelement, um eine Entitätenmenge, die mit einer `EntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="7b223-264">In the following steps you'll databind a `DropDownList` control to an entity set using an `EntityDataSource` control.</span></span> <span data-ttu-id="7b223-265">In diesem Teil des Lernprogramms nicht Sie viel mit dieser Liste.</span><span class="sxs-lookup"><span data-stu-id="7b223-265">In this part of the tutorial, you won't do much with this list.</span></span> <span data-ttu-id="7b223-266">Im weiteren Verlauf jedoch verwenden die Liste Sie können Benutzer wählen Sie eine Abteilung anzuzeigenden Kurse der Abteilung zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="7b223-266">In subsequent parts, though, you'll use the list to let users select a department to display courses associated with the department.</span></span>

<span data-ttu-id="7b223-267">Erstellen Sie eine neue Webseite mit dem Namen *Courses.aspx*.</span><span class="sxs-lookup"><span data-stu-id="7b223-267">Create a new web page named *Courses.aspx*.</span></span> <span data-ttu-id="7b223-268">In **Quelle** anzuzeigen, fügen Sie eine Spaltenüberschrift, um die `Content` Steuerelement mit dem Namen `Content2`:</span><span class="sxs-lookup"><span data-stu-id="7b223-268">In **Source** view, add a heading to the `Content` control that's named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample9.aspx)]

<span data-ttu-id="7b223-269">In **Entwurf** anzeigen, Hinzufügen einer `EntityDataSource` Steuerelement auf der Seite "wie zuvor, mit Ausnahme von diesmal nennen Sie sie `DepartmentsEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="7b223-269">In **Design** view, add an `EntityDataSource` control to the page as you did before, except this time name it `DepartmentsEntityDataSource`.</span></span> <span data-ttu-id="7b223-270">Wählen Sie **Abteilungen** als die **EntitySetName** -Wert aus, und wählen Sie nur die **"DepartmentID"** und **Namen** Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="7b223-270">Select **Departments** as the **EntitySetName** value, and select only the **DepartmentID** and **Name** properties.</span></span>

<span data-ttu-id="7b223-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span></span>

<span data-ttu-id="7b223-272">Aus der **Standard** auf der Registerkarte die **Toolbox**, ziehen Sie eine `DropDownList` auf der Seite zu steuern, benennen Sie sie `DepartmentsDropDownList`, klicken Sie auf das Smarttag, und wählen **Datenquelle auswählen** an Starten Sie die **DataSource-Konfigurations-Assistenten**.</span><span class="sxs-lookup"><span data-stu-id="7b223-272">From the **Standard** tab of the **Toolbox**, drag a `DropDownList` control to the page, name it `DepartmentsDropDownList`, click the smart tag, and select **Choose Data Source** to start the **DataSource Configuration Wizard**.</span></span>

<span data-ttu-id="7b223-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span></span>

<span data-ttu-id="7b223-274">In der **wählen Sie eine Datenquelle** Schritt wählen **DepartmentsEntityDataSource** als Datenquelle, klicken Sie auf **Schema aktualisieren**, und wählen Sie dann **Namen** als das Feld "Daten" angezeigt und **"DepartmentID"** als Datenfeld Wert.</span><span class="sxs-lookup"><span data-stu-id="7b223-274">In the **Choose a Data Source** step, select **DepartmentsEntityDataSource** as the data source, click **Refresh Schema**, and then select **Name** as the data field to display and **DepartmentID** as the value data field.</span></span> <span data-ttu-id="7b223-275">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="7b223-275">Click **OK**.</span></span>

<span data-ttu-id="7b223-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span></span>

<span data-ttu-id="7b223-277">Die Methode, die Sie verwenden man das Steuerelement mit dem Entity Framework ist der identisch mit anderen ASP.NET-Daten Datenquellensteuerelemente, außer dass Sie Entitäten und Eigenschaften der Entität angegeben haben.</span><span class="sxs-lookup"><span data-stu-id="7b223-277">The method you use to databind the control using the Entity Framework is the same as with other ASP.NET data source controls except you're specifying entities and entity properties.</span></span>

<span data-ttu-id="7b223-278">Wechseln Sie zur **Quelle** anzeigen und hinzufügen "Wählen Sie eine Abteilung:" direkt vor der `DropDownList` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="7b223-278">Switch to **Source** view and add "Select a department:" immediately before the `DropDownList` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample10.aspx)]

<span data-ttu-id="7b223-279">Zur Erinnerung, ändern Sie das Markup für die `EntityDataSource` Steuerelement zu diesem Zeitpunkt durch Ersetzen der `ConnectionString` und `DefaultContainerName` Attribute mit einer `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` Attribut.</span><span class="sxs-lookup"><span data-stu-id="7b223-279">As a reminder, change the markup for the `EntityDataSource` control at this point by replacing the `ConnectionString` and `DefaultContainerName` attributes with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="7b223-280">Es ist oft sinnvoll, bis gewartet wird, nachdem Sie das datengebundene Steuerelement erstellt haben, das mit den Datenquellen-Steuerelement verknüpft ist, bevor Sie ändern die `EntityDataSource` Markup zu steuern, da nach dem vornehmen der Änderung der Designer nicht Sie mit bereitstellen, wird eine **aktualisieren Schema** -Option in das datengebundene Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="7b223-280">It's often best to wait until after you've created the data-bound control that is linked to the data source control before you change the `EntityDataSource` control markup, because after you make the change, the designer will not provide you with a **Refresh Schema** option in the data-bound control.</span></span>

<span data-ttu-id="7b223-281">Führen Sie die Seite, und Sie können eine Abteilung aus der Dropdown Liste auswählen.</span><span class="sxs-lookup"><span data-stu-id="7b223-281">Run the page and you can select a department from the drop-down list.</span></span>

<span data-ttu-id="7b223-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="7b223-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span></span>

<span data-ttu-id="7b223-283">Dies schließt die Einführung in die Verwendung der `EntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="7b223-283">This completes the introduction to using the `EntityDataSource` control.</span></span> <span data-ttu-id="7b223-284">Arbeiten mit diesem Steuerelement wird im Allgemeinen unterscheidet sich von der Arbeit mit anderen ASP.NET-Daten Datenquellen-Steuerelementen, mit dem Unterschied, dass Sie Entitäten und Eigenschaften anstelle von Tabellen und Spalten verweisen.</span><span class="sxs-lookup"><span data-stu-id="7b223-284">Working with this control is generally no different from working with other ASP.NET data source controls, except that you reference entities and properties instead of tables and columns.</span></span> <span data-ttu-id="7b223-285">Die einzige Ausnahme ist, wenn Sie Navigationseigenschaften zugreifen möchten.</span><span class="sxs-lookup"><span data-stu-id="7b223-285">The only exception is when you want to access navigation properties.</span></span> <span data-ttu-id="7b223-286">In den nächsten Lernprogrammen sehen Sie, dass Sie die Syntax mit verwenden `EntityDataSource` Steuerelement möglicherweise auch aus anderen Steuerelementen für Datenquellen unterscheiden, wenn Sie filtern, gruppieren und Sortieren von Daten.</span><span class="sxs-lookup"><span data-stu-id="7b223-286">In the next tutorial you'll see that the syntax you use with `EntityDataSource` control might also differ from other data source controls when you filter, group, and order data.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="7b223-287">[Zurück](the-entity-framework-and-aspnet-getting-started-part-1.md)
[Weiter](the-entity-framework-and-aspnet-getting-started-part-3.md)</span><span class="sxs-lookup"><span data-stu-id="7b223-287">[Previous](the-entity-framework-and-aspnet-getting-started-part-1.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-3.md)</span></span>
