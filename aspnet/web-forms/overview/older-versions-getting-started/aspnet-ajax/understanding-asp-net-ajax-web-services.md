---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
title: Grundlegendes zu ASP.NET AJAX-Webdienste | Microsoft Docs
author: scottcate
description: Webdienste sind ein wesentlicher Bestandteil von .NET Framework, die eine plattformübergreifende-Lösung zum Austauschen von Daten zwischen verteilten Systemen zu erstellen. Obwohl Web...
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/28/2008
ms.topic: article
ms.assetid: 3332d6e7-e2e1-4144-b805-e71d51e7e415
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
msc.type: authoredcontent
ms.openlocfilehash: 0b9f61f895fea1960ebd25780454b86d5c3ba1bb
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
ms.locfileid: "30889341"
---
<a name="understanding-aspnet-ajax-web-services"></a><span data-ttu-id="9a75e-104">Grundlegendes zu ASP.NET AJAX-Webdienste</span><span class="sxs-lookup"><span data-stu-id="9a75e-104">Understanding ASP.NET AJAX Web Services</span></span>
====================
<span data-ttu-id="9a75e-105">durch [Scott Kate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="9a75e-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="9a75e-106">PDF herunterladen</span><span class="sxs-lookup"><span data-stu-id="9a75e-106">Download PDF</span></span>](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial05_Web_Services_with_MS_Ajax_cs.pdf)

> <span data-ttu-id="9a75e-107">Webdienste sind ein wesentlicher Bestandteil von .NET Framework, die eine plattformübergreifende-Lösung zum Austauschen von Daten zwischen verteilten Systemen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-107">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="9a75e-108">Obwohl Webdienste normalerweise verwendet werden, um unterschiedliche Betriebssysteme, Objektmodelle und Programmiersprachen zum Senden und Empfangen von Daten zu ermöglichen, können sie auch dynamisch Einfügen von Daten in einer ASP.NET AJAX-Seite oder Senden von Daten von einer Seite mit einem Back-End-System verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-108">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="9a75e-109">All dies kann erfolgen, ohne zurückzugreifen, um Vorgänge postback.</span><span class="sxs-lookup"><span data-stu-id="9a75e-109">All of this can be done without resorting to postback operations.</span></span>


## <a name="calling-web-services-with-aspnet-ajax"></a><span data-ttu-id="9a75e-110">Aufrufen von Webdiensten mit ASP.NET-AJAX</span><span class="sxs-lookup"><span data-stu-id="9a75e-110">Calling Web Services with ASP.NET AJAX</span></span>

<span data-ttu-id="9a75e-111">Dan Wahlin</span><span class="sxs-lookup"><span data-stu-id="9a75e-111">Dan Wahlin</span></span>

<span data-ttu-id="9a75e-112">Webdienste sind ein wesentlicher Bestandteil von .NET Framework, die eine plattformübergreifende-Lösung zum Austauschen von Daten zwischen verteilten Systemen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-112">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="9a75e-113">Obwohl Webdienste normalerweise verwendet werden, um unterschiedliche Betriebssysteme, Objektmodelle und Programmiersprachen zum Senden und Empfangen von Daten zu ermöglichen, können sie auch dynamisch Einfügen von Daten in einer ASP.NET AJAX-Seite oder Senden von Daten von einer Seite mit einem Back-End-System verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-113">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="9a75e-114">All dies kann erfolgen, ohne zurückzugreifen, um Vorgänge postback.</span><span class="sxs-lookup"><span data-stu-id="9a75e-114">All of this can be done without resorting to postback operations.</span></span>

<span data-ttu-id="9a75e-115">UpdatePanel von ASP.NET AJAX-Steuerelement eine einfache Möglichkeit, AJAX bietet eine ASP.NET-Seite zu aktivieren, möglicherweise gibt es Zeiten, wenn Sie dynamisch auf die Daten auf dem Server zuzugreifen, ohne Verwendung eines UpdatePanels müssen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-115">While the ASP.NET AJAX UpdatePanel control provides a simple way to AJAX enable any ASP.NET page, there may be times when you need to dynamically access data on the server without using an UpdatePanel.</span></span> <span data-ttu-id="9a75e-116">In diesem Artikel wird erläutert, wie dies ausgeführt, durch das Erstellen und Verwenden von Webdiensten in ASP.NET AJAX-Seiten angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-116">In this article you'll see how to accomplish this by creating and consuming Web Services within ASP.NET AJAX pages.</span></span>

<span data-ttu-id="9a75e-117">Dieser Artikel konzentriert sich auf Funktionen, die in die wichtigsten ASP.NET AJAX-Erweiterungen als auch ein Webdienst aktiviert-Steuerelement in der ASP.NET AJAX-Toolkit wird aufgerufen, die AutoCompleteExtender verfügbar.</span><span class="sxs-lookup"><span data-stu-id="9a75e-117">This article will focus on functionality available in the core ASP.NET AJAX Extensions as well as a Web Service enabled control in the ASP.NET AJAX Toolkit called the AutoCompleteExtender.</span></span> <span data-ttu-id="9a75e-118">Zu den behandelten Themen gehören AJAX-aktivierten Webdiensten definieren, Erstellen von Proxys und Aufrufen von Webdiensten mit JavaScript.</span><span class="sxs-lookup"><span data-stu-id="9a75e-118">Topics covered include defining AJAX-enabled Web Services, creating client proxies and calling Web Services with JavaScript.</span></span> <span data-ttu-id="9a75e-119">Sie sehen auch, wie Webdienstaufrufe direkt mit ASP.NET-Seitenmethoden hergestellt werden können.</span><span class="sxs-lookup"><span data-stu-id="9a75e-119">You'll also see how Web Service calls can be made directly to ASP.NET page methods.</span></span>

## <a name="web-services-configuration"></a><span data-ttu-id="9a75e-120">Web Services-Konfiguration</span><span class="sxs-lookup"><span data-stu-id="9a75e-120">Web Services Configuration</span></span>

<span data-ttu-id="9a75e-121">Wenn ein neues Projekt für die Website mit Visual Studio 2008 erstellt wird, wurde die Datei "Web.config" diverse neue Mitglieder, die für Benutzer früherer Versionen von Visual Studio nicht vertraut sind.</span><span class="sxs-lookup"><span data-stu-id="9a75e-121">When a new Web Site project is created with Visual Studio 2008, the web.config file has a number of new additions that may be unfamiliar to users of previous versions of Visual Studio.</span></span> <span data-ttu-id="9a75e-122">Einige dieser Änderungen zuordnen das Präfix "Asp" für ASP.NET AJAX-Steuerelemente, damit diese Seiten verwendet werden können, während andere erforderliche HttpHandlers und HttpModules definieren.</span><span class="sxs-lookup"><span data-stu-id="9a75e-122">Some of these modifications map the "asp" prefix to ASP.NET AJAX controls so they can be used in pages while others define required HttpHandlers and HttpModules.</span></span> <span data-ttu-id="9a75e-123">Änderungen an den programmbeispiel 1 zeigt die `<httpHandlers>` Element in "Web.config", die Webdienstaufrufe betroffen sind.</span><span class="sxs-lookup"><span data-stu-id="9a75e-123">Listing 1 shows modifications made to the `<httpHandlers>` element in web.config that affects Web Service calls.</span></span> <span data-ttu-id="9a75e-124">Die Standard-HttpHandler zum Verarbeiten von ASMX-Aufrufe verwendet entfernt und durch eine ScriptHandlerFactory-Klasse befindet sich in der Assembly System.Web.Extensions.dll ersetzt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-124">The default HttpHandler used to process .asmx calls is removed and replaced with a ScriptHandlerFactory class located in the System.Web.Extensions.dll assembly.</span></span> <span data-ttu-id="9a75e-125">System.Web.Extensions.dll enthält alle die Kernfunktionen von ASP.NET AJAX verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9a75e-125">System.Web.Extensions.dll contains all of the core functionality used by ASP.NET AJAX.</span></span>

<span data-ttu-id="9a75e-126">**Programmbeispiel 1. ASP.NET AJAX Webdienstkonfiguration Handler**</span><span class="sxs-lookup"><span data-stu-id="9a75e-126">**Listing 1. ASP.NET AJAX Web Service Handler Configuration**</span></span>

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample1.xml)]

<span data-ttu-id="9a75e-127">Diese Ersetzung HttpHandler wird hergestellt, damit JavaScript Object Notation (JSON) Aufrufe von ASP.NET AJAX-Seiten mit .NET Web Services erfolgen kann, mit einem JavaScript-Webdienst-Proxy.</span><span class="sxs-lookup"><span data-stu-id="9a75e-127">This HttpHandler replacement is made in order to allow JavaScript Object Notation (JSON) calls to be made from ASP.NET AJAX pages to .NET Web Services using a JavaScript Web Service proxy.</span></span> <span data-ttu-id="9a75e-128">ASP.NET AJAX sendet JSON-Nachrichten mit Web Services, im Gegensatz zu den standard (SOAP, Simple Object Access Protocol)-Aufrufe, die in der Regel zugeordneten Webdienste.</span><span class="sxs-lookup"><span data-stu-id="9a75e-128">ASP.NET AJAX sends JSON messages to Web Services as opposed to the standard Simple Object Access Protocol (SOAP) calls typically associated with Web Services.</span></span> <span data-ttu-id="9a75e-129">Dies führt zu kleineren Anforderungs- und Antwortnachrichten, die insgesamt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-129">This results in smaller request and response messages overall.</span></span> <span data-ttu-id="9a75e-130">Darüber hinaus können für eine effizientere Verarbeitung von clientseitigen Daten seit die ASP.NET AJAX JavaScript-Bibliothek zum Arbeiten mit JSON-Objekten optimiert ist.</span><span class="sxs-lookup"><span data-stu-id="9a75e-130">It also allows for more efficient client-side processing of data since the ASP.NET AJAX JavaScript library is optimized to work with JSON objects.</span></span> <span data-ttu-id="9a75e-131">Auflisten von 2 und 3 auflisten zeigen Beispiele für Web Service-Anforderung und Antwort-Nachrichten in JSON-Format serialisiert.</span><span class="sxs-lookup"><span data-stu-id="9a75e-131">Listing 2 and Listing 3 show examples of Web Service request and response messages serialized to JSON format.</span></span> <span data-ttu-id="9a75e-132">Die Anforderungsnachricht in auflisten 2 veranschaulichte übergibt einen Country-Parameter mit einem Wert von "Belgien" aus, während die Antwortnachricht in 3 auflisten ein Array von Customer-Objekten und die zugehörigen Eigenschaften übergeben.</span><span class="sxs-lookup"><span data-stu-id="9a75e-132">The request message shown in Listing 2 passes a country parameter with a value of "Belgium" while the response message in Listing 3 passes an array of Customer objects and their associated properties.</span></span>

<span data-ttu-id="9a75e-133">**Auflisten von 2. Webdienst-Anforderungsnachricht in JSON serialisiert**</span><span class="sxs-lookup"><span data-stu-id="9a75e-133">**Listing 2. Web Service Request Message Serialized to JSON**</span></span>

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample2.json)]

> <span data-ttu-id="9a75e-134">*> [!NOTE] der Name des Vorgangs wird als Teil der URL zum Webdienst definiert. Darüber hinaus sind Anforderungsnachrichten nicht immer über JSON übermittelt. Web Services können ScriptMethod-Attributs nutzen, mit dem UseHttpGet-Parameter auf True festgelegt, wodurch über zu übergebenden Parameter an eine die Abfragezeichenfolgen-Parameter.*</span><span class="sxs-lookup"><span data-stu-id="9a75e-134">*> [!NOTE] the operation name is defined as part of the URL to the web service; additionally, request messages are not always submitted via JSON. Web Services can utilize the ScriptMethod attribute with the UseHttpGet parameter set to true, which causes parameters to be passed via a the query string parameters.*</span></span>


<span data-ttu-id="9a75e-135">**Auflisten von 3. Webdienst-Antwortnachricht in JSON serialisiert**</span><span class="sxs-lookup"><span data-stu-id="9a75e-135">**Listing 3. Web Service Response Message Serialized to JSON**</span></span>

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample3.json)]

<span data-ttu-id="9a75e-136">Im nächsten Abschnitt sehen Sie, wie Webdienste der Behandlung von JSON-Anforderungsnachrichten und antwortet mit einfachen und komplexen Typen kann erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-136">In the next section you'll see how to create Web Services capable of handling JSON request messages and responding with both simple and complex types.</span></span>

## <a name="creating-ajax-enabled-web-services"></a><span data-ttu-id="9a75e-137">Erstellen von AJAX-aktivierten Webdiensten</span><span class="sxs-lookup"><span data-stu-id="9a75e-137">Creating AJAX-Enabled Web Services</span></span>

<span data-ttu-id="9a75e-138">Das ASP.NET AJAX-Framework bietet mehrere Möglichkeiten zum Aufrufen von Webdiensten.</span><span class="sxs-lookup"><span data-stu-id="9a75e-138">The ASP.NET AJAX framework provides several different ways to call Web Services.</span></span> <span data-ttu-id="9a75e-139">Sie können die AutoCompleteExtender-Steuerelement (verfügbar in der ASP.NET AJAX-Toolkit) oder für JavaScript verwenden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-139">You can use the AutoCompleteExtender control (available in the ASP.NET AJAX Toolkit) or JavaScript.</span></span> <span data-ttu-id="9a75e-140">Sie müssen jedoch vor dem Aufrufen eines Diensts AJAX-fähigen es so, dass er von Client-Skriptcode aufgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="9a75e-140">However, before calling a service you have to AJAX-enable it so that it can be called by client-script code.</span></span>

<span data-ttu-id="9a75e-141">Unabhängig davon, ob Sie mit ASP.NET Web Services vertraut sind, finden Sie es einfach zu erstellen und aktivieren Sie AJAX-Dienste.</span><span class="sxs-lookup"><span data-stu-id="9a75e-141">Whether or not you're new to ASP.NET Web Services, you'll find it straightforward to create and AJAX-enable services.</span></span> <span data-ttu-id="9a75e-142">.NET Framework unterstützt die Erstellung von ASP.NET-Webdiensten seit der Erstveröffentlichung 2002 und ASP.NET AJAX-Erweiterungen bieten zusätzliche AJAX-Funktionen, die auf .NET Framework Reihe von Funktionen aufbaut.</span><span class="sxs-lookup"><span data-stu-id="9a75e-142">The .NET framework has supported the creation of ASP.NET Web Services since its initial release in 2002 and the ASP.NET AJAX Extensions provide additional AJAX functionality that builds upon the .NET framework's default set of features.</span></span> <span data-ttu-id="9a75e-143">Visual Studio .NET 2008 Beta 2 verfügt über integrierte Unterstützung für ASMX-Webdienst-Dateien zu erstellen und automatisch die zugehörigen Code-beside-Klassen von der System.Web.Services.WebService-Klasse abgeleitet ist.</span><span class="sxs-lookup"><span data-stu-id="9a75e-143">Visual Studio .NET 2008 Beta 2 has built-in support for creating .asmx Web Service files and automatically derives associated code beside classes from the System.Web.Services.WebService class.</span></span> <span data-ttu-id="9a75e-144">Hinzufügen von Methoden in der Klasse müssen Sie das WebMethod-Attribut in der Reihenfolge für die sie durch den Webdienst Consumer aufgerufen werden anwenden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-144">As you add methods into the class you must apply the WebMethod attribute in order for them to be called by Web Service consumers.</span></span>

<span data-ttu-id="9a75e-145">Auflisten von 4 zeigt ein Beispiel für das WebMethod-Attribut an eine Methode mit dem Namen GetCustomersByCountry() anwenden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-145">Listing 4 shows an example of applying the WebMethod attribute to a method named GetCustomersByCountry().</span></span>

<span data-ttu-id="9a75e-146">**Auflisten von 4. Verwenden das WebMethod-Attribut in einem Webdienst**</span><span class="sxs-lookup"><span data-stu-id="9a75e-146">**Listing 4. Using the WebMethod Attribute in a Web Service**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample4.cs)]

<span data-ttu-id="9a75e-147">Die Methode GetCustomersByCountry() einen Land-Parameter akzeptiert und gibt ein Kunde Objektarray zurück.</span><span class="sxs-lookup"><span data-stu-id="9a75e-147">The GetCustomersByCountry() method accepts a country parameter and returns a Customer object array.</span></span> <span data-ttu-id="9a75e-148">Der Wert für das Land an die Methode übergebenen ist weitergeleitet, auf eine Business-Ebenen-Klasse die wiederum ruft eine Ebene Datenklasse zum Abrufen der Daten aus der Datenbank füllen mit Daten, die Kunden-Objekteigenschaften und gibt das Array zurück.</span><span class="sxs-lookup"><span data-stu-id="9a75e-148">The country value passed into the method is forwarded to a business layer class which in turn calls a data layer class to retrieve the data from the database, fill the Customer object properties with data and return the array.</span></span>

## <a name="using-the-scriptservice-attribute"></a><span data-ttu-id="9a75e-149">Mithilfe des Attributs ScriptService</span><span class="sxs-lookup"><span data-stu-id="9a75e-149">Using the ScriptService Attribute</span></span>

<span data-ttu-id="9a75e-150">Beim Hinzufügen der WebMethod-Attribut ermöglicht, die GetCustomersByCountry()-Methode dass, die von Clients aufgerufen werden, die standard-SOAP-Nachrichten an den Webdienst zu senden, lässt es nicht JSON-Aufrufe an von ASP.NET AJAX-Anwendungen gebrauchsfertigen erfolgen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-150">While adding the WebMethod attribute allows the GetCustomersByCountry() method to be called by clients that send standard SOAP messages to the Web Service, it doesn't allow JSON calls to be made from ASP.NET AJAX applications out of the box.</span></span> <span data-ttu-id="9a75e-151">Um JSON-Aufrufe auf Sie anwenden, die ASP.NET AJAX-Erweiterung erfolgen ermöglichen `ScriptService` -Attribut auf die Webdienst-Klasse.</span><span class="sxs-lookup"><span data-stu-id="9a75e-151">To allow JSON calls to be made you have to apply the ASP.NET AJAX Extension's `ScriptService` attribute to the Web Service class.</span></span> <span data-ttu-id="9a75e-152">Dies ermöglicht eine Web-Dienst zum Senden von Antwortnachrichten, die mit JSON formatiert und clientseitigem Skript zum Aufrufen des Diensts durch Senden von JSON-Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="9a75e-152">This enables a Web Service to send response messages formatted using JSON and allows client-side script to call a service by sending JSON messages.</span></span>

<span data-ttu-id="9a75e-153">Auflisten von 5 zeigt ein Beispiel für das ScriptService-Attribut auf einen Webdienst-Klasse, die mit dem Namen CustomersService angewendet.</span><span class="sxs-lookup"><span data-stu-id="9a75e-153">Listing 5 shows an example of applying the ScriptService attribute to a Web Service class named CustomersService.</span></span>

<span data-ttu-id="9a75e-154">**Auflisten von 5. Mithilfe des Attributs ScriptService AJAX-Aktivieren eines Webdiensts**</span><span class="sxs-lookup"><span data-stu-id="9a75e-154">**Listing 5. Using the ScriptService Attribute to AJAX-enable a Web Service**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample5.cs)]

<span data-ttu-id="9a75e-155">Das Attribut ScriptService fungiert als ein Marker, der angibt, dass es von AJAX-Skript-Code aufgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="9a75e-155">The ScriptService attribute acts as a marker that indicates it can be called from AJAX script code.</span></span> <span data-ttu-id="9a75e-156">Es werden keine tatsächlich die JSON-Serialisierung oder Deserialisierung Aufgaben verarbeitet, die im Hintergrund auftreten.</span><span class="sxs-lookup"><span data-stu-id="9a75e-156">It doesn't actually handle any of the JSON serialization or deserialization tasks that occur behind the scenes.</span></span> <span data-ttu-id="9a75e-157">Führen den Großteil der JSON-Verarbeitung, die ScriptHandlerFactory (in "Web.config" konfiguriert) und anderen verwandten Klassen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-157">The ScriptHandlerFactory (configured in web.config) and other related classes do the bulk of JSON processing.</span></span>

## <a name="using-the-scriptmethod-attribute"></a><span data-ttu-id="9a75e-158">Verwenden das ScriptMethod-Attribut</span><span class="sxs-lookup"><span data-stu-id="9a75e-158">Using the ScriptMethod Attribute</span></span>

<span data-ttu-id="9a75e-159">Das ScriptService-Attribut ist das einzige ASP.NET AJAX-Attribut, das in einem Webdienst .NET nacheinander dafür von ASP.NET AJAX-Seiten zu verwendende definiert werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-159">The ScriptService attribute is the only ASP.NET AJAX attribute that has to be defined in a .NET Web Service in order for it to be used by ASP.NET AJAX pages.</span></span> <span data-ttu-id="9a75e-160">Ein weiteres Attribut mit dem Namen ScriptMethod kann jedoch auch direkt für Webmethoden in einem Dienst angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-160">However, another attribute named ScriptMethod can also be applied directly to Web Methods in a service.</span></span> <span data-ttu-id="9a75e-161">ScriptMethod definiert drei Eigenschaften einschließlich `UseHttpGet`, `ResponseFormat` und `XmlSerializeString`.</span><span class="sxs-lookup"><span data-stu-id="9a75e-161">ScriptMethod defines three properties including `UseHttpGet`, `ResponseFormat` and `XmlSerializeString`.</span></span> <span data-ttu-id="9a75e-162">Ändern der Werte dieser Eigenschaften kann nützlich sein, in Fällen, in denen der Typ der Anforderung akzeptiert werden, indem eine Webmethode in "GET", geändert werden, wenn eine Webmethode in Form von unformatierten XML-Daten zurückgeben muss ein `XmlDocument` oder `XmlElement` Objekt oder bei Rückgabe von Daten aus einer  Dienst sollte immer als XML-Objekt statt JSON serialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-162">Changing the values of these properties can be useful in cases where the type of request accepted by a Web Method needs to be changed to GET, when a Web Method needs to return raw XML data in the form of an `XmlDocument` or `XmlElement` object or when data returned from a service should always be serialized as XML instead of JSON.</span></span>

<span data-ttu-id="9a75e-163">Die Eigenschaft kann verwendet werden, wenn eine Webmethode annehmen soll UseHttpGet GET-Anforderungen im Gegensatz zur POST-Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-163">The UseHttpGet property can be used when a Web Method should accept GET requests as opposed to POST requests.</span></span> <span data-ttu-id="9a75e-164">Anforderungen werden gesendet, dass die Eingabeparameter der Webmethode eine URL mit Abfragezeichenfolgen-Parameter konvertiert.</span><span class="sxs-lookup"><span data-stu-id="9a75e-164">Requests are sent using a URL with Web Method input parameters converted to QueryString parameters.</span></span> <span data-ttu-id="9a75e-165">Die UseHttpGet-Eigenschaft standardmäßig auf "false" und sollte nur festgelegt werden, um `true` bei Operationen sind bekanntermaßen Safe und wenn vertrauliche Daten nicht an einen Webdienst übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="9a75e-165">The UseHttpGet property defaults to false and should only be set to `true` when operations are known to be safe and when sensitive data is not passed to a Web Service.</span></span> <span data-ttu-id="9a75e-166">Auflisten von 6 zeigt ein Beispiel mit dem ScriptMethod-Attribut mit der UseHttpGet-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="9a75e-166">Listing 6 shows an example of using the ScriptMethod attribute with the UseHttpGet property.</span></span>

<span data-ttu-id="9a75e-167">**Auflisten von 6. Verwenden die ScriptMethod-Attributs, mit der UseHttpGet-Eigenschaft.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-167">**Listing 6. Using the ScriptMethod attribute with the UseHttpGet property.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample6.cs)]

<span data-ttu-id="9a75e-168">Ein Beispiel für die Header gesendet, wenn in 6 auflisten dargestellten HttpGetEcho Webmethode aufgerufen wird werden weiter angezeigt:</span><span class="sxs-lookup"><span data-stu-id="9a75e-168">An example of the headers sent when the HttpGetEcho Web Method shown in Listing 6 is called are shown next:</span></span>

`GET /CustomerViewer/DemoService.asmx/HttpGetEcho?input=%22Input Value%22 HTTP/1.1`

<span data-ttu-id="9a75e-169">Zusätzlich zum Zulassen von Webmethoden, HTTP-GET-Anforderungen zu akzeptieren, kann auch ScriptMethod-Attribut verwendet werden, wenn XML-Antworten aus einem Dienst anstelle von JSON zurückgegeben werden müssen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-169">In addition to allowing Web Methods to accept HTTP GET requests, the ScriptMethod attribute can also be used when XML responses need to be returned from a service rather than JSON.</span></span> <span data-ttu-id="9a75e-170">Beispielsweise kann einen Webdienst abrufen ein RSS-Feeds von einem Remotestandort aus und gibt es als ein XmlDocument oder XmlElement-Objekt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-170">For example, a Web Service may retrieve an RSS feed from a remote site and return it as an XmlDocument or XmlElement object.</span></span> <span data-ttu-id="9a75e-171">Verarbeiten der XML-können Daten dann auf dem Client auftreten.</span><span class="sxs-lookup"><span data-stu-id="9a75e-171">Processing of the XML data can then occur on the client.</span></span>

<span data-ttu-id="9a75e-172">Auflisten von 7 zeigt ein Beispiel Antwortformat-Eigenschaft verwenden, um anzugeben, dass die XML-Daten von einer Web-Methode zurückgegeben werden soll.</span><span class="sxs-lookup"><span data-stu-id="9a75e-172">Listing 7 shows an example of using the ResponseFormat property to specify that XML data should be returned from a Web Method.</span></span>

<span data-ttu-id="9a75e-173">**Auflisten von 7. Verwenden die ScriptMethod-Attributs, mit der Eigenschaft Antwortformat.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-173">**Listing 7. Using the ScriptMethod attribute with the ResponseFormat property.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample7.cs)]

<span data-ttu-id="9a75e-174">Das Antwortformat-Eigenschaft kann auch zusammen mit der XmlSerializeString-Eigenschaft verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-174">The ResponseFormat property can also be used along with the XmlSerializeString property.</span></span> <span data-ttu-id="9a75e-175">Die XmlSerializeString-Eigenschaft hat den Standardwert "false", was bedeutet, dass alle zurückgeben, mit Ausnahme von Zeichenfolgen, die von einer Web-Methode zurückgegebenen Typen als XML serialisiert werden bei der `ResponseFormat` -Eigenschaftensatz auf `ResponseFormat.Xml`.</span><span class="sxs-lookup"><span data-stu-id="9a75e-175">The XmlSerializeString property has a default value of false which means that all return types except strings returned from a Web Method are serialized as XML when the `ResponseFormat` property is set to `ResponseFormat.Xml`.</span></span> <span data-ttu-id="9a75e-176">Wenn `XmlSerializeString` festgelegt ist, um `true`, alle Typen, die von einer Web-Methode zurückgegeben werden als Zeichenfolgentypen einschließlich XML serialisiert.</span><span class="sxs-lookup"><span data-stu-id="9a75e-176">When `XmlSerializeString` is set to `true`, all types returned from a Web Method are serialized as XML including string types.</span></span> <span data-ttu-id="9a75e-177">Wenn das Antwortformat-Eigenschaft einen Wert aufweist `ResponseFormat.Json` XmlSerializeString-Eigenschaft wird ignoriert.</span><span class="sxs-lookup"><span data-stu-id="9a75e-177">If the ResponseFormat property has a value of `ResponseFormat.Json` the XmlSerializeString property is ignored.</span></span>

<span data-ttu-id="9a75e-178">Auflisten von 8 wird gezeigt, wie die Eigenschaft XmlSerializeString gezwungen Zeichenfolgen als XML serialisiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="9a75e-178">Listing 8 shows an example of using the XmlSerializeString property to force strings to be serialized as XML.</span></span>

<span data-ttu-id="9a75e-179">**Auflisten von 8. Verwenden das ScriptMethod-Attribut mit XmlSerializeString-Eigenschaft**</span><span class="sxs-lookup"><span data-stu-id="9a75e-179">**Listing 8. Using the ScriptMethod attribute with the XmlSerializeString property**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample8.cs)]

<span data-ttu-id="9a75e-180">Der Rückgabewert des Aufrufs der Webmethode GetXmlString Siehe auflisten von 8 wird weiter angezeigt:</span><span class="sxs-lookup"><span data-stu-id="9a75e-180">The value returned from calling the GetXmlString Web Method shown in Listing 8 is shown next:</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample9.cs)]

<span data-ttu-id="9a75e-181">Obwohl das JSON-Standardformat die Gesamtgröße des Anforderungs-und Antwortnachrichten minimiert und schneller durch ASP.NET AJAX-Clients in einer Weise browserübergreifende belegt, kann das Antwortformat und XmlSerializeString Eigenschaften verwendet, wenn Client Anwendungen, z. B. Internet Explorer 5 oder höher erwarten, dass XML-Daten aus einer Webmethode zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-181">Although the default JSON format minimizes the overall size of request and response messages and is more readily consumed by ASP.NET AJAX clients in a cross-browser manner, the ResponseFormat and XmlSerializeString properties can be utilized when client applications such as Internet Explorer 5 or higher expect XML data to be returned from a Web Method.</span></span>

## <a name="working-with-complex-types"></a><span data-ttu-id="9a75e-182">Arbeiten mit komplexen Typen</span><span class="sxs-lookup"><span data-stu-id="9a75e-182">Working with Complex Types</span></span>

<span data-ttu-id="9a75e-183">Auflisten von 5 angezeigt werden. ein Beispiel für einen komplexen Typ mit dem Namen Customer, die von einem Webdienst zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="9a75e-183">Listing 5 showed an example of returning a complex type named Customer from a Web Service.</span></span> <span data-ttu-id="9a75e-184">Die Customer-Klasse definiert verschiedene einfache Typen intern als Eigenschaften, z. B. FirstName und LastName.</span><span class="sxs-lookup"><span data-stu-id="9a75e-184">The Customer class defines several different simple types internally as properties such as FirstName and LastName.</span></span> <span data-ttu-id="9a75e-185">Komplexe Typen als Eingabeparameter verwendet, oder Rückgabetyp auf eine Webmethode AJAX-aktivierten vor dem Senden an die Clientseite automatisch in JSON serialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-185">Complex types used as an input parameter or return type on an AJAX-enabled Web Method are automatically serialized into JSON before being sent to the client-side.</span></span> <span data-ttu-id="9a75e-186">Allerdings sind geschachtelte komplexe Typen (die intern in einem anderen Typ definiert) nicht an dem Client als eigenständige Objekte standardmäßig verfügbar.</span><span class="sxs-lookup"><span data-stu-id="9a75e-186">However, nested complex types (those defined internally within another type) are not made available to the client as standalone objects by default.</span></span>

<span data-ttu-id="9a75e-187">In Fällen, in ein geschachtelter komplexer Typ, der von einem Webdienst verwendet auch in einer Registerkarte "Client" verwendet werden muss, kann das ASP.NET AJAX-GenerateScriptType-Attribut mit dem Webdienst hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-187">In cases where a nested complex type used by a Web Service must also be used in a client page, the ASP.NET AJAX GenerateScriptType attribute can be added to the Web Service.</span></span> <span data-ttu-id="9a75e-188">Die CustomerDetails-Klasse, die im Codebeispiel 9 gezeigt enthält z. B. Adresse und Gender-Eigenschaften die ***geschachtelte komplexe Typen darstellen.***</span><span class="sxs-lookup"><span data-stu-id="9a75e-188">For example, the CustomerDetails class shown in Listing 9 contains Address and Gender properties which ***represent nested complex types.***</span></span>

<span data-ttu-id="9a75e-189">**Auflisten von 9. Die hier gezeigte CustomerDetails-Klasse enthält zwei geschachtelte komplexe Typen.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-189">**Listing 9. The CustomerDetails class shown here contains two nested complex types.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample10.cs)]

<span data-ttu-id="9a75e-190">Die Adresse und Gender-Objekte, die innerhalb der CustomerDetails-Klasse, die im Codebeispiel 9 gezeigt definiert wird nicht automatisch zur Verfügung gestellt werden für die Verwendung auf der Clientseite über JavaScript sie geschachtelte Typen sind (Adresse ist eine Klasse und Geschlecht ist eine Enumeration).</span><span class="sxs-lookup"><span data-stu-id="9a75e-190">The Address and Gender objects defined within the CustomerDetails class shown in Listing 9 won't automatically be made available for use on the client-side via JavaScript since they are nested types (Address is a class and Gender is an enumeration).</span></span> <span data-ttu-id="9a75e-191">In Situationen, in denen ein geschachtelter Typ, der innerhalb eines Webdiensts muss auf der Clientseite verfügbar, die zuvor erwähnte GenerateScriptType-Attribut verwendet werden kann (Siehe auflisten von 10).</span><span class="sxs-lookup"><span data-stu-id="9a75e-191">In situations where a nested type used within a Web Service must be available on the client-side, the GenerateScriptType attribute mentioned earlier can be used (see Listing 10).</span></span> <span data-ttu-id="9a75e-192">Dieses Attribut kann mehrere Male in Fällen hinzugefügt werden, in denen unterschiedliche geschachtelte komplexe Typen von einem Dienst zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-192">This attribute can be added multiple times in cases where different nested complex types are returned from a service.</span></span> <span data-ttu-id="9a75e-193">Sie können auf die Webdienst-Klasse direkt oder über bestimmte Webmethoden angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-193">It can be applied directly to the Web Service class or above specific Web Methods.</span></span>

<span data-ttu-id="9a75e-194">**Auflisten von 10. Verwenden die GenerateScriptService-Attributs, um geschachtelte Typen definieren, die an den Client verfügbar sein sollen.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-194">**Listing 10. Using the GenerateScriptService attribute to define nested types that should be available to the client.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample11.cs)]

<span data-ttu-id="9a75e-195">Durch Anwenden der `GenerateScriptType` Attribut, um den Webdienst, die Adresse und das Geschlecht Typen wird automatisch zur Verfügung gestellt werden für die Verwendung durch die clientseitige ASP.NET AJAX JavaScript-Code.</span><span class="sxs-lookup"><span data-stu-id="9a75e-195">By applying the `GenerateScriptType` attribute to the Web Service, the Address and Gender types will automatically be made available for use by client-side ASP.NET AJAX JavaScript code.</span></span> <span data-ttu-id="9a75e-196">Auflisten von 11 ist ein Beispiel für den JavaScript-Code, die automatisch generiert und an den Client gesendet werden, durch Hinzufügen des GenerateScriptType-Attributs auf einen Webdienst angezeigt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-196">An example of the JavaScript that is automatically generated and sent to the client by adding the GenerateScriptType attribute on a Web Service is shown in Listing 11.</span></span> <span data-ttu-id="9a75e-197">Sie sehen, wie Sie geschachtelte komplexe Typen später in diesem Artikel.</span><span class="sxs-lookup"><span data-stu-id="9a75e-197">You'll see how to use nested complex types later in the article.</span></span>

<span data-ttu-id="9a75e-198">**Auflisten von 11. Geschachtelte komplexe Typen, die zu einer ASP.NET AJAX-Seite zur Verfügung gestellt.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-198">**Listing 11. Nested complex types made available to an ASP.NET AJAX page.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample12.cs)]

<span data-ttu-id="9a75e-199">Nun, dass Sie zum Erstellen von Webdiensten und richten sie den Zugriff auf ASP.NET AJAX-Seiten gesehen haben, werfen wir einen Blick auf das Erstellen und Verwenden von JavaScript-Proxys, damit Daten abgerufen oder an Webdienste gesendet werden können.</span><span class="sxs-lookup"><span data-stu-id="9a75e-199">Now that you've seen how to create Web Services and make them accessible to ASP.NET AJAX pages, let's take a look at how to create and use JavaScript proxies so that data can be retrieved or sent to Web Services.</span></span>

## <a name="creating-javascript-proxies"></a><span data-ttu-id="9a75e-200">Erstellen von JavaScript-Proxys</span><span class="sxs-lookup"><span data-stu-id="9a75e-200">Creating JavaScript Proxies</span></span>

<span data-ttu-id="9a75e-201">Aufrufen von einer standardmäßigen Webdienst (.NET oder eine andere Plattform) in der Regel umfasst das Erstellen ein Proxyobjekt, das Sie von der Komplexität des Sendens von SOAP-Anforderung und Antwort-Nachrichten schützt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-201">Calling a standard Web Service (.NET or another platform) typically involves creating a proxy object that shields you from the complexities of sending SOAP request and response messages.</span></span> <span data-ttu-id="9a75e-202">Mit ASP.NET AJAX-Webdienst aufrufen können JavaScript-Proxys werden erstellt und problemlos Dienste aufrufen, ohne befürchten serialisieren und Deserialisieren von JSON-Nachrichten verwendet.</span><span class="sxs-lookup"><span data-stu-id="9a75e-202">With ASP.NET AJAX Web Service calls, JavaScript proxies can be created and used to easily call services without worrying about serializing and deserializing JSON messages.</span></span> <span data-ttu-id="9a75e-203">JavaScript-Proxys können automatisch generiert werden, mithilfe von ASP.NET AJAX ScriptManager-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="9a75e-203">JavaScript proxies can be automatically generated by using the ASP.NET AJAX ScriptManager control.</span></span>

<span data-ttu-id="9a75e-204">Erstellen einen JavaScript-Proxy, der Webdienste aufrufen kann erfolgt mithilfe der ScriptManager-Services-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="9a75e-204">Creating a JavaScript proxy that can call Web Services is accomplished by using the ScriptManager's Services property.</span></span> <span data-ttu-id="9a75e-205">Diese Eigenschaft ermöglicht Ihnen, einen oder mehrere Dienste zu definieren, die eine ASP.NET AJAX-Seite zum Senden oder Empfangen von Daten ohne postback Vorgänge asynchron aufrufen können.</span><span class="sxs-lookup"><span data-stu-id="9a75e-205">This property allows you to define one or more services that an ASP.NET AJAX page can call asynchronously to send or receive data without requiring postback operations.</span></span> <span data-ttu-id="9a75e-206">Definieren Sie einen Dienst mithilfe von ASP.NET AJAX `ServiceReference` Steuerelement und weisen die Webdienst-URL an des Steuerelements `Path` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="9a75e-206">You define a service by using the ASP.NET AJAX `ServiceReference` control and assigning the Web Service URL to the control's `Path` property.</span></span> <span data-ttu-id="9a75e-207">Auflisten von 12 zeigt ein Beispiel für einen Dienst namens CustomersService.asmx verweisen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-207">Listing 12 shows an example of referencing a service named CustomersService.asmx.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample13.aspx)]

<span data-ttu-id="9a75e-208">**Auflisten von 12. Definieren einen Webdienst in einer ASP.NET AJAX-Seite verwendet.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-208">**Listing 12. Defining a Web Service used in an ASP.NET AJAX page.**</span></span>

<span data-ttu-id="9a75e-209">Hinzufügen eines Verweises auf die CustomersService.asmx über das ScriptManager-Steuerelement bewirkt, dass einen JavaScript-Proxy auf dynamisch generierte und von der Seite verwiesen werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-209">Adding a reference to the CustomersService.asmx through the ScriptManager control causes a JavaScript proxy to be dynamically generated and referenced by the page.</span></span> <span data-ttu-id="9a75e-210">Der Proxy mit eingebettet ist die &lt;Skript&gt; kennzeichnen und dynamisch geladen wird, in der Datei CustomersService.asmx aufrufen und dem Anhängen js bis zum Ende des Zertifikats.</span><span class="sxs-lookup"><span data-stu-id="9a75e-210">The proxy is embedded by using the &lt;script&gt; tag and dynamically loaded by calling the CustomersService.asmx file and appending /js to the end of it.</span></span> <span data-ttu-id="9a75e-211">Das folgende Beispiel zeigt, wie der JavaScript-Proxy auf der Seite eingebettet ist, beim Debuggen in "Web.config" muss deaktiviert sein:</span><span class="sxs-lookup"><span data-stu-id="9a75e-211">The following example shows how the JavaScript proxy is embedded in the page when debugging is disabled in web.config:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample14.html)]

> <span data-ttu-id="9a75e-212">*> [!NOTE] Wenn Sie möchten, um den eigentlichen Code der JavaScript-Proxy anzuzeigen, die generiert wird, Sie geben die an die gewünschte .NET Webdienst-URL in Internet Explorer-Adressfeld und js es am Ende anfügen können.*</span><span class="sxs-lookup"><span data-stu-id="9a75e-212">*> [!NOTE] If you'd like to see the actual JavaScript proxy code that is generated you can type the URL to the desired .NET Web Service into Internet Explorer's address box and append /js to the end of it.*</span></span>


<span data-ttu-id="9a75e-213">Wenn debugging in "Web.config" aktiviert ist, die auf der Seite als eine Debugversion des JavaScript-Proxys eingebettet werden gezeigt weiter:</span><span class="sxs-lookup"><span data-stu-id="9a75e-213">If debugging is enabled in web.config a debug version of the JavaScript proxy will be embedded in the page as shown next:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample15.html)]

<span data-ttu-id="9a75e-214">Der JavaScript-Proxy erstellt, indem die ScriptManager können auch direkt in die Seite eingebettet werden statt einen Verweis auf die &lt;Skript&gt; Tag Src-Attribut.</span><span class="sxs-lookup"><span data-stu-id="9a75e-214">The JavaScript proxy created by the ScriptManager can also be embedded directly into the page rather than referenced using the &lt;script&gt; tag's src attribute.</span></span> <span data-ttu-id="9a75e-215">Dies kann durch Festlegen des ServiceReference-Steuerelements InlineScript-Eigenschaft auf "true" (der Standardwert ist "false") erfolgen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-215">This can be done by setting the ServiceReference control's InlineScript property to true (the default is false).</span></span> <span data-ttu-id="9a75e-216">Dies kann nützlich sein, wenn ein Proxy für den gemeinsamen ist nicht über mehrere Seiten, und wenn Sie die Anzahl der Netzwerkaufrufe an den Server zu reduzieren möchten.</span><span class="sxs-lookup"><span data-stu-id="9a75e-216">This can be useful when a proxy isn't shared across multiple pages and when you'd like to reduce the number of network calls made to the server.</span></span> <span data-ttu-id="9a75e-217">Wenn InlineScript festgelegt ist, auf die Proxy-Skript "true" wird nicht vom Browser zwischengespeichert werden, sodass der Wert von "false" in Fällen empfohlen wird, in dem der Proxy von mehreren Seiten in einer ASP.NET AJAX-Anwendung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9a75e-217">When InlineScript is set to true the proxy script won't be cached by the browser so the default value of false is recommended in cases where the proxy is used by multiple pages in an ASP.NET AJAX application.</span></span> <span data-ttu-id="9a75e-218">Ein Beispiel für die Verwendung der InlineScript-Eigenschaft wird weiter angezeigt:</span><span class="sxs-lookup"><span data-stu-id="9a75e-218">An example of using the InlineScript property is shown next:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample16.aspx)]

## <a name="using-javascript-proxies"></a><span data-ttu-id="9a75e-219">Verwenden von JavaScript-Proxys</span><span class="sxs-lookup"><span data-stu-id="9a75e-219">Using JavaScript Proxies</span></span>

<span data-ttu-id="9a75e-220">Sobald eine ASP.NET AJAX-Seite, die über das ScriptManager-Steuerelement einen Webdienst verweist, ein Aufruf an den Webdienst vorgenommen werden kann und die zurückgegebenen Daten mithilfe von Rückruffunktionen verarbeitet werden können.</span><span class="sxs-lookup"><span data-stu-id="9a75e-220">Once a Web Service is referenced by an ASP.NET AJAX page using the ScriptManager control, a call can be made to the Web Service and the returned data can be handled using callback functions.</span></span> <span data-ttu-id="9a75e-221">Ein Webdienst wird von Verweisen auf den Namespace (falls vorhanden), Klassennamen und Name der Webmethode aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-221">A Web Service is called by referencing its namespace (if one exists), class name and Web Method name.</span></span> <span data-ttu-id="9a75e-222">Alle Parameter, die an den Webdienst übergeben können zusammen mit einer Rückruffunktion definiert werden, die die zurückgegebenen Daten behandelt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-222">Any parameters passed to the Web Service can be defined along with a callback function that handles the returned data.</span></span>

<span data-ttu-id="9a75e-223">Auflisten von 13 wird gezeigt, wie einen JavaScript-Proxy zum Aufrufen einer Web-Methode, die mit dem Namen GetCustomersByCountry() angezeigt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-223">An example of using a JavaScript proxy to call a Web Method named GetCustomersByCountry() is shown in Listing 13.</span></span> <span data-ttu-id="9a75e-224">Die GetCustomersByCountry()-Funktion wird aufgerufen, wenn ein Endbenutzer eine Schaltfläche auf der Seite klickt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-224">The GetCustomersByCountry() function is called when an end user clicks a button on the page.</span></span>

<span data-ttu-id="9a75e-225">**Auflisten von 13. Aufruf eines Webdiensts mit einem JavaScript-Proxy.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-225">**Listing 13. Calling a Web Service with a JavaScript proxy.**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample17.js)]

<span data-ttu-id="9a75e-226">Dieser Aufruf verweist auf den Namespace InterfaceTraining, CustomersService Klassen- und GetCustomersByCountry Web im Dienst definiert.</span><span class="sxs-lookup"><span data-stu-id="9a75e-226">This call references the InterfaceTraining namespace, CustomersService class and GetCustomersByCountry Web Method defined in the service.</span></span> <span data-ttu-id="9a75e-227">Übergibt einen Land-Wert, der aus einem Textfeld als auch eine Rückruffunktion, die mit dem Namen OnWSRequestComplete, die aufgerufen werden soll, wenn der asynchrone Aufruf für den Webdienst zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-227">It passes a country value obtained from a textbox as well as a callback function named OnWSRequestComplete that should be invoked when the asynchronous Web Service call returns.</span></span> <span data-ttu-id="9a75e-228">OnWSRequestComplete verarbeitet das Array von Customer-Objekten, die vom Dienst zurückgegebenen und wandelt sie in eine Tabelle, die auf der Seite angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="9a75e-228">OnWSRequestComplete handles the array of Customer objects returned from the service and converts them into a table that is displayed in the page.</span></span> <span data-ttu-id="9a75e-229">Die aus dem Aufruf generierte Ausgabe wird in Abbildung 1 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-229">The output generated from the call is shown in Figure 1.</span></span>


<span data-ttu-id="9a75e-230">[![Binden von Daten erhalten, indem ein asynchroner AJAX-Aufruf an einen Webdienst herstellen.](understanding-asp-net-ajax-web-services/_static/image2.png)](understanding-asp-net-ajax-web-services/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="9a75e-230">[![Binding data obtained by making an asynchronous AJAX call to a Web Service.](understanding-asp-net-ajax-web-services/_static/image2.png)](understanding-asp-net-ajax-web-services/_static/image1.png)</span></span>

<span data-ttu-id="9a75e-231">**Abbildung 1**: Binden von Daten erhalten, indem ein asynchroner AJAX-Aufruf an einen Webdienst herstellen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-231">**Figure 1**: Binding data obtained by making an asynchronous AJAX call to a Web Service.</span></span>  <span data-ttu-id="9a75e-232">([Klicken Sie hier, um das Bild in voller Größe angezeigt](understanding-asp-net-ajax-web-services/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="9a75e-232">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image3.png))</span></span>


<span data-ttu-id="9a75e-233">JavaScript-Proxys lassen sich auch unidirektionale Aufrufe an die Webdienste in Fällen, in denen eine Webmethode aufgerufen werden, jedoch der Proxy darf nicht auf eine Antwort warten.</span><span class="sxs-lookup"><span data-stu-id="9a75e-233">JavaScript proxies can also make one-way calls to Web Services in cases where a Web Method should be called but the proxy shouldn't wait for a response.</span></span> <span data-ttu-id="9a75e-234">Beispielsweise empfiehlt es sich zum Aufrufen eines Webdiensts zum Starten eines Prozesses, z. B. ein Ablauf, aber nicht nach dem Rückgabewert aus dem Dienst warten.</span><span class="sxs-lookup"><span data-stu-id="9a75e-234">For example, you may want to call a Web Service to start a process such as a work-flow but not wait for a return value from the service.</span></span> <span data-ttu-id="9a75e-235">In Fällen, in denen ein unidirektionaler Aufruf an einen Dienst vorgenommen werden muss, kann die Rückruffunktion auflisten 13 gezeigt einfach ausgelassen werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-235">In cases where a one-way call needs to be made to a service, the callback function shown in Listing 13 can simply be omitted.</span></span> <span data-ttu-id="9a75e-236">Da keine Rückruffunktion definiert ist wartet das Proxyobjekt nicht für den Webdienst, um Daten zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="9a75e-236">Since no callback function is defined the proxy object will not wait for the Web Service to return data.</span></span>

## <a name="handling-errors"></a><span data-ttu-id="9a75e-237">Behandeln von Fehlern</span><span class="sxs-lookup"><span data-stu-id="9a75e-237">Handling Errors</span></span>

<span data-ttu-id="9a75e-238">Asynchrone Rückrufe mit Web Services können auftreten, verschiedene Arten von Fehlern, z. B. das Netzwerk nicht verfügbar, die Web-Dienst nicht verfügbar ist oder eine Ausnahme zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="9a75e-238">Asynchronous callbacks to Web Services can encounter different types of errors such as the network being down, the Web Service being unavailable or an exception being returned.</span></span> <span data-ttu-id="9a75e-239">Glücklicherweise können JavaScript-Proxy-Objekte von ScriptManager generiert mehrere Rückrufe definiert werden, um Fehler und Ausfälle neben den weiter oben dargestellten Erfolgsrückruf zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="9a75e-239">Fortunately, JavaScript proxy objects generated by the ScriptManager allow multiple callbacks to be defined to handle errors and failures in addition to the success callback shown earlier.</span></span> <span data-ttu-id="9a75e-240">Eine Fehlerrückruf-Funktion kann unmittelbar auf die standard-Rückruffunktion im Aufruf der Webmethode definiert werden, wie im Codebeispiel 14 gezeigt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-240">An error callback function can be defined immediately after the standard callback function in the call to the Web Method as shown in Listing 14.</span></span>

<span data-ttu-id="9a75e-241">**Auflisten von 14. Definieren eine Rückruffunktion für Fehler, und Anzeigen von Fehlern.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-241">**Listing 14. Defining an error callback function and displaying errors.**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample18.js)]

<span data-ttu-id="9a75e-242">Alle Fehler, die auftreten, wenn der Webdienst aufgerufen wird werden ausgelöst, die Rückruffunktion OnWSRequestFailed() zum Aufruf der akzeptiert, dass ein Objekt, das den Fehler als Parameter darstellt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-242">Any errors that occur when the Web Service is called will trigger the OnWSRequestFailed() callback function to be called which accepts an object representing the error as a parameter.</span></span> <span data-ttu-id="9a75e-243">Die Error-Objekt stellt mehrere unterschiedliche Funktionen, um die Ursache des Fehlers zu bestimmen, sowie davon, ob für das Timeout des Aufrufs. Auflisten von 14 zeigt ein Beispiel der Verwendung der verschiedenen Fehlerfunktionen und Abbildung 2 zeigt ein Beispiel für die Ausgabe von den Funktionen generiert.</span><span class="sxs-lookup"><span data-stu-id="9a75e-243">The error object exposes several different functions to determine the cause of the error as well as whether or not the call timed out. Listing 14 shows an example of using the different error functions and Figure 2 shows an example of the output generated by the functions.</span></span>


<span data-ttu-id="9a75e-244">[![Durch Aufrufen von ASP.NET AJAX-Fehlerfunktionen generierte Ausgabe.](understanding-asp-net-ajax-web-services/_static/image5.png)](understanding-asp-net-ajax-web-services/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="9a75e-244">[![Output generated by calling ASP.NET AJAX error functions.](understanding-asp-net-ajax-web-services/_static/image5.png)](understanding-asp-net-ajax-web-services/_static/image4.png)</span></span>

<span data-ttu-id="9a75e-245">**Abbildung 2**: Ausgabe, die durch Aufrufen von ASP.NET AJAX-Fehlerfunktionen generiert.</span><span class="sxs-lookup"><span data-stu-id="9a75e-245">**Figure 2**: Output generated by calling ASP.NET AJAX error functions.</span></span>  <span data-ttu-id="9a75e-246">([Klicken Sie hier, um das Bild in voller Größe angezeigt](understanding-asp-net-ajax-web-services/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="9a75e-246">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image6.png))</span></span>


## <a name="handling-xml-data-returned-from-a-web-service"></a><span data-ttu-id="9a75e-247">Verarbeiten von XML-Daten von einem Webdienst zurückgegeben</span><span class="sxs-lookup"><span data-stu-id="9a75e-247">Handling XML Data Returned from a Web Service</span></span>

<span data-ttu-id="9a75e-248">Zuvor haben Sie gesehen, wie eine Webmethode unformatierte XML-Daten zurückgeben kann, mit dem Attribut "ScriptMethod" zusammen mit seiner Antwortformat-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="9a75e-248">Earlier you saw how a Web Method could return raw XML data by using the ScriptMethod attribute along with its ResponseFormat property.</span></span> <span data-ttu-id="9a75e-249">Wenn Antwortformat auf ResponseFormat.Xml festgelegt ist, werden vom Webdienst zurückgegebene Daten als XML und nicht in JSON serialisiert.</span><span class="sxs-lookup"><span data-stu-id="9a75e-249">When ResponseFormat is set to ResponseFormat.Xml, data returned from the Web Service is serialized as XML rather than JSON.</span></span> <span data-ttu-id="9a75e-250">Dies kann nützlich sein, wenn XML-Daten direkt an den Client für die mit JavaScript oder XSLT-Verarbeitung übergeben werden müssen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-250">This can be useful when XML data needs to be passed directly to the client for processing using JavaScript or XSLT.</span></span> <span data-ttu-id="9a75e-251">Zum aktuellen Zeitpunkt enthält InternetExplorer 5 oder höher das bewährte clientseitige Objektmodell für das Analysieren und Filtern von XML-Daten aufgrund der integrierten Unterstützung für MSXML.</span><span class="sxs-lookup"><span data-stu-id="9a75e-251">At the current time, Internet Explorer 5 or higher provides the best client-side object model for parsing and filtering XML data due to its built-in support for MSXML.</span></span>

<span data-ttu-id="9a75e-252">Abrufen von XML-Daten von einem Webdienst unterscheidet sich nicht als andere Datentypen abrufen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-252">Retrieving XML data from a Web Service is no different than retrieving other data types.</span></span> <span data-ttu-id="9a75e-253">Starten Sie durch den Aufruf des JavaScript-Proxys, um die entsprechende Funktion aufrufen und eine Rückruffunktion zu definieren.</span><span class="sxs-lookup"><span data-stu-id="9a75e-253">Start by invoking the JavaScript proxy to call the appropriate function and define a callback function.</span></span> <span data-ttu-id="9a75e-254">Nach der Rückkehr des Aufrufs können Sie dann die Daten in der Rückruffunktion verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="9a75e-254">Once the call returns you can then process the data in the callback function.</span></span>

<span data-ttu-id="9a75e-255">Auflisten von 15 zeigt ein Beispiel des Aufrufs einer Webmethode mit dem Namen GetRssFeed(), die ein XmlElement-Objekt zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-255">Listing 15 shows an example of calling a Web Method named GetRssFeed() that returns an XmlElement object.</span></span> <span data-ttu-id="9a75e-256">GetRssFeed() akzeptiert einen einzelnen Parameter, die die URL für den RSS-feed zum Abrufen von darstellen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-256">GetRssFeed() accepts a single parameter representing the URL for the RSS feed to retrieve.</span></span>

<span data-ttu-id="9a75e-257">**Auflisten von 15. Arbeiten mit XML-Daten von einem Webdienst zurückgegeben.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-257">**Listing 15. Working with XML data returned from a Web Service.**</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample19.html)]

<span data-ttu-id="9a75e-258">In diesem Beispiel wird eine URL an einen RSS-feed übergeben und die zurückgegebenen XML-Daten in der OnWSRequestComplete()-Funktion verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="9a75e-258">This example passes a URL to an RSS feed and processes the returned XML data in the OnWSRequestComplete() function.</span></span> <span data-ttu-id="9a75e-259">OnWSRequestComplete() überprüft zuerst, um festzustellen, ob der Browser Internet Explorer ist kennen, und zwar unabhängig davon, ob die MSXML-Parser verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="9a75e-259">OnWSRequestComplete() first checks to see if the browser is Internet Explorer to know whether or not the MSXML parser is available.</span></span> <span data-ttu-id="9a75e-260">Wenn dies der Fall, wird eine XPath-Anweisung verwendet, alle suchen &lt;Element&gt; Tags innerhalb des RSS-Feeds.</span><span class="sxs-lookup"><span data-stu-id="9a75e-260">If it is, an XPath statement is used to locate all &lt;item&gt; tags within the RSS feed.</span></span> <span data-ttu-id="9a75e-261">Jedes Element wird dann durchlaufen und den zugehörigen &lt;Titel&gt; und &lt;Link&gt; -Tags gespeichert und verarbeitet werden, um Daten für jedes Element angezeigt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-261">Each item is then iterated through and the associated &lt;title&gt; and &lt;link&gt; tags are located and processed to display each item's data.</span></span> <span data-ttu-id="9a75e-262">Abbildung 3 zeigt ein Beispiel für die Ausgabe generiert gehindert ein ASP.NET AJAX über eine JavaScript-Proxy der Webmethode GetRssFeed() aufrufen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-262">Figure 3 shows an example of the output generated from making an ASP.NET AJAX call through a JavaScript proxy to the GetRssFeed() Web Method.</span></span>

## <a name="handling-complex-types"></a><span data-ttu-id="9a75e-263">Behandlung von komplexen Typen</span><span class="sxs-lookup"><span data-stu-id="9a75e-263">Handling Complex Types</span></span>

<span data-ttu-id="9a75e-264">Komplexe Typen akzeptiert oder von einem Webdienst zurückgegeben werden automatisch über eine JavaScript-Proxy verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="9a75e-264">Complex types accepted or returned by a Web Service are automatically exposed through a JavaScript proxy.</span></span> <span data-ttu-id="9a75e-265">Geschachtelte komplexe Typen sind jedoch nicht direkt auf der Clientseite zugegriffen werden, es sei denn, das Attribut GenerateScriptType an den Dienst angewendet wird, wie bereits erwähnt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-265">However, nested complex types are not directly accessible on the client-side unless the GenerateScriptType attribute is applied to the service as discussed earlier.</span></span> <span data-ttu-id="9a75e-266">Warum sollten Sie einen geschachtelten komplexen Typ auf der Clientseite verwenden?</span><span class="sxs-lookup"><span data-stu-id="9a75e-266">Why would you want to use a nested complex type on the client-side?</span></span>

<span data-ttu-id="9a75e-267">Um diese Frage zu beantworten, wird davon ausgegangen Sie, dass eine ASP.NET AJAX-Seite zeigt der Kundendaten und Benutzern ermöglicht, die Adresse eines Kunden zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="9a75e-267">To answer this question, assume that an ASP.NET AJAX page displays customer data and allows end users to update a customer's address.</span></span> <span data-ttu-id="9a75e-268">Wenn der Webdienst gibt an, dass der Adresstyp (einem komplexen Typ innerhalb einer Klasse CustomerDetails definiert) an den Client gesendet werden kann, kann der Updatevorgang dahingehend in separate Funktionen für besseren Code erneut verwenden unterteilt werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-268">If the Web Service specifies that the Address type (a complex type defined within a CustomerDetails class) can be sent to the client then the update process can be divided into separate functions for better code re-use.</span></span>


<span data-ttu-id="9a75e-269">[![Ausgabe erstellen aus den Aufruf eines Webdiensts, die RSS-Daten zurückgibt.](understanding-asp-net-ajax-web-services/_static/image8.png)](understanding-asp-net-ajax-web-services/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="9a75e-269">[![Output creating from calling a Web Service that returns RSS data.](understanding-asp-net-ajax-web-services/_static/image8.png)](understanding-asp-net-ajax-web-services/_static/image7.png)</span></span>

<span data-ttu-id="9a75e-270">**Abbildung 3**: Ausgabe erstellen aus den Aufruf eines Webdiensts, die RSS-Daten zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-270">**Figure 3**: Output creating from calling a Web Service that returns RSS data.</span></span>  <span data-ttu-id="9a75e-271">([Klicken Sie hier, um das Bild in voller Größe angezeigt](understanding-asp-net-ajax-web-services/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="9a75e-271">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image9.png))</span></span>


<span data-ttu-id="9a75e-272">Auflisten von 16 zeigt ein Beispiel für Client-Side-Code, der ein Adressobjekt in einem Modellnamespace definierten aufruft füllt diese mit aktualisierten Daten und die Adresseigenschaft des CustomerDetails-Objekts zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-272">Listing 16 shows an example of client-side code that invokes an Address object defined in a Model namespace, fills it with updated data and assigns it to a CustomerDetails object's Address property.</span></span> <span data-ttu-id="9a75e-273">Die CustomerDetails-Objekt wird dann zur Verarbeitung an den Webdienst übergeben.</span><span class="sxs-lookup"><span data-stu-id="9a75e-273">The CustomerDetails object is then passed to the Web Service for processing.</span></span>

<span data-ttu-id="9a75e-274">**Auflisten von 16. Verwenden geschachtelte komplexe Typen**</span><span class="sxs-lookup"><span data-stu-id="9a75e-274">**Listing 16. Using nested complex types**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample20.js)]

## <a name="creating-and-using-page-methods"></a><span data-ttu-id="9a75e-275">Erstellen und Verwenden von Seitenmethoden</span><span class="sxs-lookup"><span data-stu-id="9a75e-275">Creating and Using Page Methods</span></span>

<span data-ttu-id="9a75e-276">Webdienste bieten eine hervorragende Möglichkeit, die mit einer Vielzahl von Clients einschließlich ASP.NET AJAX-Seiten aktionsentwicklung Dienste verfügbar zu machen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-276">Web Services provide an excellent way to expose re-useable services to a variety of clients including ASP.NET AJAX pages.</span></span> <span data-ttu-id="9a75e-277">Allerdings gibt es möglicherweise Fällen, in denen eine Seite zum Abrufen von Daten, die nicht einmal verwendet oder von anderen Seiten gemeinsam verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-277">However, there may be cases where a page needs to retrieve data that won't ever be used or shared by other pages.</span></span> <span data-ttu-id="9a75e-278">In diesem Fall mag erstellen eine ASMX-Datei, um die Seite für den Datenzugriff zu ermöglichen Ausgangsstruktur wie seit der Dienst nur von einer einzelnen Seite verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9a75e-278">In this case, making an .asmx file to allow the page to access the data may seem like overkill since the service is only used by a single page.</span></span>

<span data-ttu-id="9a75e-279">ASP.NET AJAX bietet es sich um einen anderen Mechanismus zum Erstellen von Web Service-ähnliche Aufrufe ohne eigenständige ASMX-Dateien erstellen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-279">ASP.NET AJAX provides another mechanism for making Web Service-like calls without creating standalone .asmx files.</span></span> <span data-ttu-id="9a75e-280">Dies erfolgt mithilfe eines Verfahrens als "Seitenmethoden" bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="9a75e-280">This is done by using a technique referred to as "page methods".</span></span> <span data-ttu-id="9a75e-281">Seitenmethoden werden statische (freigegebene in VB.NET) direkt in einer Seite oder Code-beside-Datei eingebettet, die das WebMethod-angewendet werden Attribut.</span><span class="sxs-lookup"><span data-stu-id="9a75e-281">Page methods are static (shared in VB.NET) methods embedded directly in a page or code-beside file that have the WebMethod attribute applied to them.</span></span> <span data-ttu-id="9a75e-282">Durch Anwenden der WebMethod-Attribut können sie aufgerufen werden mithilfe eines speziellen JavaScript-Objekts, das mit dem Namen PageMethods, die zur Laufzeit dynamisch erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="9a75e-282">By applying the WebMethod attribute they can be called using a special JavaScript object named PageMethods that gets dynamically created at runtime.</span></span> <span data-ttu-id="9a75e-283">Das Objekt PageMethods fungiert als Proxy, der Sie im Rahmen JSON-Serialisierung/Deserialisierung schützt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-283">The PageMethods object acts as a proxy that shields you from the JSON serialization/deserialization process.</span></span> <span data-ttu-id="9a75e-284">Beachten Sie, dass um verwenden jedoch stattdessen das PageMethods der ScriptManager EnablePageMethods-Eigenschaft auf "true" festgelegt werden muss.</span><span class="sxs-lookup"><span data-stu-id="9a75e-284">Note that in order to use the PageMethods object you must set the ScriptManager's EnablePageMethods property to true.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample21.aspx)]

<span data-ttu-id="9a75e-285">Auflisten von 17 zeigt ein Beispiel der Definition von zwei Seitenmethoden in einer ASP.NET Code-beside-Klasse.</span><span class="sxs-lookup"><span data-stu-id="9a75e-285">Listing 17 shows an example of defining two page methods in an ASP.NET code-beside class.</span></span> <span data-ttu-id="9a75e-286">Diese Methoden rufen Sie Daten aus einer Business-Ebene-Klasse befindet sich in der App\_Codeordner der Website.</span><span class="sxs-lookup"><span data-stu-id="9a75e-286">These methods retrieve data from a business layer class located in the App\_Code folder of the Website.</span></span>

<span data-ttu-id="9a75e-287">**Auflisten von 17. Seitenmethoden definieren.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-287">**Listing 17. Defining page methods.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample22.cs)]

<span data-ttu-id="9a75e-288">Wenn ScriptManager auf der Seite das Vorhandensein von Webmethoden erkennt generiert einen dynamischen Verweis auf den zuvor erwähnten PageMethods-Objekt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-288">When ScriptManager detects the presence of Web Methods in the page it generates a dynamic reference to the PageMethods object mentioned earlier.</span></span> <span data-ttu-id="9a75e-289">Aufrufen einer Web-Methode erfolgt durch Verweisen auf die PageMethods-Klasse, gefolgt vom Namen der Methode und alle erforderlichen Parameterdaten, die übergeben werden sollen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-289">Calling a Web Method is accomplished by referencing the PageMethods class followed by the name of the method and any necessary parameter data that should be passed.</span></span> <span data-ttu-id="9a75e-290">Auflisten von 18 zeigt Beispiele für die beiden weiter oben dargestellten Seitenmethoden aufrufen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-290">Listing 18 shows examples of calling the two page methods shown earlier.</span></span>

<span data-ttu-id="9a75e-291">**Auflisten von 18. Aufrufen von Seitenmethoden mit dem PageMethods JavaScript-Objekt.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-291">**Listing 18. Calling page methods with the PageMethods JavaScript object.**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample23.js)]

<span data-ttu-id="9a75e-292">Mit dem PageMethods-Objekt ist sehr ähnlich, mit der ein JavaScript-Proxy-Objekt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-292">Using the PageMethods object is very similar to using a JavaScript proxy object.</span></span> <span data-ttu-id="9a75e-293">Sie geben zuerst alle der Parameterdaten, die auf der Seitenmethode übergeben werden sollte, und definieren Sie dann die Rückruffunktion, die aufgerufen werden soll, wenn der asynchrone Aufruf zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="9a75e-293">You first specify all of the parameter data that should be passed to the page method and then define the callback function that should be called when the asynchronous call returns.</span></span> <span data-ttu-id="9a75e-294">Fehler beim Rückruf kann auch angegeben werden (Siehe auflisten von 14 für ein Beispiel für die Behandlung von Fehlern).</span><span class="sxs-lookup"><span data-stu-id="9a75e-294">A failure callback can also be specified (refer to Listing 14 for an example of handling failures).</span></span>

## <a name="the-autocompleteextender-and-the-aspnet-ajax-toolkit"></a><span data-ttu-id="9a75e-295">Die AutoCompleteExtender und das ASP.NET AJAX-Toolkit</span><span class="sxs-lookup"><span data-stu-id="9a75e-295">The AutoCompleteExtender and the ASP.NET AJAX Toolkit</span></span>

<span data-ttu-id="9a75e-296">Das ASP.NET AJAX-Toolkit (Nächten [ http://ajax.asp.net ](http://ajax.asp.net)) bietet mehrere Steuerelemente, die zum Zugriff auf Web-Dienste verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="9a75e-296">The ASP.NET AJAX Toolkit (available from [http://ajax.asp.net](http://ajax.asp.net)) offers several controls that can be used to access Web Services.</span></span> <span data-ttu-id="9a75e-297">Insbesondere das Toolkit enthält ein nützlich-Steuerelement namens `AutoCompleteExtender` , die zum Aufrufen von Webdiensten und Anzeigen von Daten in Seiten ohne überhaupt Schreiben von JavaScript-Code verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="9a75e-297">Specifically, the toolkit contains a useful control named `AutoCompleteExtender` that can be used to call Web Services and show data in pages without writing any JavaScript code at all.</span></span>

<span data-ttu-id="9a75e-298">Das Steuerelement AutoCompleteExtender kann verwendet werden, eines Textfelds vorhandene Funktionalität erweitern und unterstützen von Benutzern, die weitere Daten einfach zu suchen, die sie suchen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-298">The AutoCompleteExtender control can be used to extend existing functionality of a textbox and help users more easily locate data they're looking for.</span></span> <span data-ttu-id="9a75e-299">Wie sie in ein Textfeld eingeben, wird das Steuerelement kann verwendet werden, um einen Webdienst abzufragen und zeigt die Ergebnisse unterhalb des Textfelds, dynamisch.</span><span class="sxs-lookup"><span data-stu-id="9a75e-299">As they type into a textbox the control can be used to query a Web Service and shows results below the textbox dynamically.</span></span> <span data-ttu-id="9a75e-300">Abbildung 4 zeigt ein Beispiel mithilfe des Steuerelements AutoCompleteExtender Kunden-Ids für eine Anwendung Unterstützung anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-300">Figure 4 shows an example of using the AutoCompleteExtender control to display customer ids for a support application.</span></span> <span data-ttu-id="9a75e-301">Wie der Benutzer in das Textfeld ein andere Zeichen eingibt, werden verschiedene Elemente darunter auf Grundlage der Eingabe angezeigt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-301">As the user types different characters into the textbox, different items will be shown below it based upon their input.</span></span> <span data-ttu-id="9a75e-302">Benutzer können dann die gewünschten Kunden-Id auswählen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-302">Users can then select the desired customer id.</span></span>

<span data-ttu-id="9a75e-303">Mithilfe der AutoCompleteExtender innerhalb einer ASP.NET AJAX-Seite erfordert, dass die Assembly AjaxControlToolkit.dll Website Ordner "Bin" hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-303">Using the AutoCompleteExtender within an ASP.NET AJAX page requires that the AjaxControlToolkit.dll assembly be added to the Website's bin folder.</span></span> <span data-ttu-id="9a75e-304">Sobald die Toolkit-Assembly hinzugefügt wurde, sollten Sie in "Web.config" zu verweisen, sodass die darin enthaltenen Steuerelemente für alle Seiten in einer Anwendung zur Verfügung stehen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-304">Once the toolkit assembly has been added, you'll want to reference it in web.config so that the controls it contains are available to all pages in an application.</span></span> <span data-ttu-id="9a75e-305">Dies kann geschehen, indem die folgenden Tag in "Web.config" des hinzufügen &lt;Steuerelemente&gt; Tag:</span><span class="sxs-lookup"><span data-stu-id="9a75e-305">This can be done by adding the following tag within web.config's &lt;controls&gt; tag:</span></span>

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample24.xml)]

<span data-ttu-id="9a75e-306">In Fällen, in denen müssen Sie nur das Steuerelement in einer bestimmten Seite verwenden, können Sie darauf verweisen, durch die Reference-Direktive am Anfang einer Seite hinzufügen, als Nächstes, anstatt die Datei "Web.config" Aktualisieren dargestellt:</span><span class="sxs-lookup"><span data-stu-id="9a75e-306">In cases where you only need to use the control in a specific page you can reference it by adding the Reference directive to the top of a page as shown next rather than updating web.config:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample25.aspx)]


<span data-ttu-id="9a75e-307">[![Verwenden des AutoCompleteExtender-Steuerelements an.](understanding-asp-net-ajax-web-services/_static/image11.png)](understanding-asp-net-ajax-web-services/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="9a75e-307">[![Using the AutoCompleteExtender control.](understanding-asp-net-ajax-web-services/_static/image11.png)](understanding-asp-net-ajax-web-services/_static/image10.png)</span></span>

<span data-ttu-id="9a75e-308">**Abbildung 4**: Verwenden des AutoCompleteExtender-Steuerelements.</span><span class="sxs-lookup"><span data-stu-id="9a75e-308">**Figure 4**: Using the AutoCompleteExtender control.</span></span>  <span data-ttu-id="9a75e-309">([Klicken Sie hier, um das Bild in voller Größe angezeigt](understanding-asp-net-ajax-web-services/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="9a75e-309">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image12.png))</span></span>


<span data-ttu-id="9a75e-310">Nach die Website für die Verwendung von ASP.NET AJAX-Toolkit konfiguriert wurde, kann ein AutoCompleteExtender-Steuerelement in die Seite viel hinzugefügt, wie Sie ein reguläres ASP.NET-Serversteuerelement hinzufügen würden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-310">Once the Website has been configured to use the ASP.NET AJAX Toolkit, an AutoCompleteExtender control can be added into the page much like you'd add a regular ASP.NET server control.</span></span> <span data-ttu-id="9a75e-311">Auflisten von 19 zeigt ein Beispiel der Verwendung des Steuerelements an einen Webdienst aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-311">Listing 19 shows an example of using the control to call a Web Service.</span></span>

<span data-ttu-id="9a75e-312">**Auflisten von 19. Verwenden des ASP.NET AJAX-Toolkit AutoCompleteExtender-Steuerelements an.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-312">**Listing 19. Using the ASP.NET AJAX Toolkit AutoCompleteExtender control.**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample26.aspx)]

<span data-ttu-id="9a75e-313">Die AutoCompleteExtender verfügt über mehrere verschiedene Eigenschaften sowie die standard-ID und das Runat-Eigenschaften auf Serversteuerelemente gefunden.</span><span class="sxs-lookup"><span data-stu-id="9a75e-313">The AutoCompleteExtender has several different properties including the standard ID and runat properties found on server controls.</span></span> <span data-ttu-id="9a75e-314">Außerdem können Sie definieren, wie viele Zeichen, die ein Endbenutzer-Typen, bevor der Webdienst für Daten abgefragt wird.</span><span class="sxs-lookup"><span data-stu-id="9a75e-314">In addition to these, it allows you to define how many characters an end user types before the Web Service is queried for data.</span></span> <span data-ttu-id="9a75e-315">Auflisten von 19 gezeigt MinimumPrefixLength-Eigenschaft führt dazu, dass den Dienst aufgerufen werden, wenn ein Zeichen in das Textfeld eingegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="9a75e-315">The MinimumPrefixLength property shown in Listing 19 causes the service to be called each time a character is typed into the textbox.</span></span> <span data-ttu-id="9a75e-316">Sie sollten darauf achten, dass das Festlegen dieses Werts, da jedes Mal der Benutzer, ein Zeichen der Webdienst eingibt aufgerufen wird, um nach Werten gesucht, die mit den Zeichen im Textfeld übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-316">You'll want to be careful setting this value since each time the user types a character the Web Service will be called to search for values that match the characters in the textbox.</span></span> <span data-ttu-id="9a75e-317">Der Webdienst aufzurufende als auch das Ziel Webmethode werden bzw. mithilfe von ServicePath und ServiceMethod Eigenschaften definiert.</span><span class="sxs-lookup"><span data-stu-id="9a75e-317">The Web Service to call as well as the target Web Method are defined using the ServicePath and ServiceMethod properties respectively.</span></span> <span data-ttu-id="9a75e-318">Schließlich identifiziert die TargetControlID-Eigenschaft welche Textbox AutoCompleteExtender Steuerelements zu verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-318">Finally, the TargetControlID property identifies which textbox to hook the AutoCompleteExtender control to.</span></span>

<span data-ttu-id="9a75e-319">Der Webdienst aufgerufen werden muss das ScriptService-Attribut angewendet wird, wie bereits erwähnt und das Ziel Webmethode muss zwei Parameter, die mit dem Namen PrefixText und Count annehmen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-319">The Web Service being called must have the ScriptService attribute applied as discussed earlier and the target Web Method must accept two parameters named prefixText and count.</span></span> <span data-ttu-id="9a75e-320">Die PrefixText Parameter darstellt, die vom Benutzer eingegebenen Zeichen und der Count-Parameter darstellt, wie viele Elemente zum zurückgeben (der Standard ist 10).</span><span class="sxs-lookup"><span data-stu-id="9a75e-320">The prefixText parameter represents the characters typed by the end user and the count parameter represents how many items to return (the default is 10).</span></span> <span data-ttu-id="9a75e-321">Auflisten von 20 zeigt ein Beispiel der Webmethode GetCustomerIDs vom Auflisten von 19 weiter oben gezeigten AutoCompleteExtender Steuerelement aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-321">Listing 20 shows an example of the GetCustomerIDs Web Method called by the AutoCompleteExtender control shown earlier in Listing 19.</span></span> <span data-ttu-id="9a75e-322">Die Webmethode Ruft eine Business-Ebenen-Methode, die wiederum Aufrufe einer Methode Schicht, die verarbeitet werden, die Daten filtern und die übereinstimmenden Ergebnisse zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="9a75e-322">The Web Method calls a business layer method that in turn calls a data layer method that handles filtering the data and returning the matching results.</span></span> <span data-ttu-id="9a75e-323">Der Code für die Ebene Datenmethode ist 21 auflisten gezeigt.</span><span class="sxs-lookup"><span data-stu-id="9a75e-323">The code for the data layer method is shown in Listing 21.</span></span>

<span data-ttu-id="9a75e-324">**Auflisten von 20. Filtern von Daten aus dem Steuerelement AutoCompleteExtender gesendet.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-324">**Listing 20. Filtering data sent from the AutoCompleteExtender control.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample27.cs)]

<span data-ttu-id="9a75e-325">**Auflisten von 21. Filtern der Ergebnisse basierend auf Benutzereingaben Ende.**</span><span class="sxs-lookup"><span data-stu-id="9a75e-325">**Listing 21. Filtering results based upon end user input.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample28.cs)]

## <a name="conclusion"></a><span data-ttu-id="9a75e-326">Schlussbemerkung</span><span class="sxs-lookup"><span data-stu-id="9a75e-326">Conclusion</span></span>

<span data-ttu-id="9a75e-327">ASP.NET AJAX bietet hervorragende Unterstützung für Webdienste aufrufen, ohne das Schreiben umfangreichen benutzerdefinierten JavaScript-Code zur Behandlung der Anforderung und Antwort-Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="9a75e-327">ASP.NET AJAX provides excellent support for calling Web Services without writing a lot of custom JavaScript code to handle the request and response messages.</span></span> <span data-ttu-id="9a75e-328">In diesem Artikel haben Sie gesehen wie AJAX-fähigen .NET Web Services, um sie zum Verarbeiten von JSON-Nachrichten und zum Definieren von JavaScript-Proxys, die über das ScriptManager-Steuerelement zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="9a75e-328">In this article you've seen how to AJAX-enable .NET Web Services to enable them to process JSON messages and how to define JavaScript proxies using the ScriptManager control.</span></span> <span data-ttu-id="9a75e-329">Sie haben auch erfahren, wie die JavaScript-Proxys verwendet werden können, zum Aufrufen von Webdiensten, einfache und komplexe Typen verarbeiten, und Fehler behandeln.</span><span class="sxs-lookup"><span data-stu-id="9a75e-329">You've also seen how JavaScript proxies can be used to call Web Services, handle simple and complex types and deal with failures.</span></span> <span data-ttu-id="9a75e-330">Schließlich haben Sie gesehen, wie Seitenmethoden verwendet werden können, um den Prozess des Erstellens und Aufrufe des Webdiensts zu vereinfachen und wie das Steuerelement AutoCompleteExtender Hilfe für Endbenutzer bereitstellen kann, wie sie geben.</span><span class="sxs-lookup"><span data-stu-id="9a75e-330">Finally, you've seen how page methods can be used to simplify the process of creating and making Web Service calls and how the AutoCompleteExtender control can provide help to end users as they type.</span></span> <span data-ttu-id="9a75e-331">Zwar in ASP.NET AJAX verfügbar UpdatePanel sicherlich das Steuerelement Wahl für viele AJAX-Programmierer aufgrund seiner Einfachheit, kann das zu wissen, wie das Aufrufen von Webdiensten über JavaScript-Proxys in vielen Anwendungen nützlich sein.</span><span class="sxs-lookup"><span data-stu-id="9a75e-331">Although the UpdatePanel available in ASP.NET AJAX will certainly be the control of choice for many AJAX programmers due to its simplicity, knowing how to call Web Services through JavaScript proxies can be useful in many applications.</span></span>

## <a name="bio"></a><span data-ttu-id="9a75e-332">Lebenslauf</span><span class="sxs-lookup"><span data-stu-id="9a75e-332">Bio</span></span>

<span data-ttu-id="9a75e-333">Dan Wahlin (Microsoft Most Valuable Professional für ASP.NET und XML-Webdienste) ist .NET Development Dozenten und Architektur Berater zur technischen Training-Schnittstelle ([http://www.interfacett.com](http://www.interfacett.com)).</span><span class="sxs-lookup"><span data-stu-id="9a75e-333">Dan Wahlin (Microsoft Most Valuable Professional for ASP.NET and XML Web Services) is a .NET development instructor and architecture consultant at Interface Technical Training ([http://www.interfacett.com](http://www.interfacett.com)).</span></span> <span data-ttu-id="9a75e-334">Dan gegründet XML für Entwickler ASP.NET-Website ([www.XMLforASP.NET](http://www.XMLforASP.NET)), befindet sich auf die INETA Referent und spricht auf mehrere Konferenzen.</span><span class="sxs-lookup"><span data-stu-id="9a75e-334">Dan founded the XML for ASP.NET Developers Web site ([www.XMLforASP.NET](http://www.XMLforASP.NET)), is on the INETA Speaker's Bureau and speaks at several conferences.</span></span> <span data-ttu-id="9a75e-335">Dan Mitautor Professional Windows DNA (Wrox), ASP.NET: Tipps, Lernprogramme und Code (Sams), ASP.NET 1.1 Insider-Lösungen, Professional ASP.NET 2.0 AJAX (Wrox), ASP.NET 2.0 MVP Hacks und erstellte XML für ASP.NET-Entwickler, (Sams).</span><span class="sxs-lookup"><span data-stu-id="9a75e-335">Dan co-authored Professional Windows DNA (Wrox), ASP.NET: Tips, Tutorials and Code (Sams), ASP.NET 1.1 Insider Solutions, Professional ASP.NET 2.0 AJAX (Wrox), ASP.NET 2.0 MVP Hacks and authored XML for ASP.NET Developers (Sams).</span></span> <span data-ttu-id="9a75e-336">Wenn er nicht Code "," Artikel "oder" Bücher geschrieben wird, hat Dan schreiben und Musik aufzeichnen und Wiedergeben von Golf und Basketball mit seiner Frau und Kinder.</span><span class="sxs-lookup"><span data-stu-id="9a75e-336">When he's not writing code, articles or books, Dan enjoys writing and recording music and playing golf and basketball with his wife and kids.</span></span>

<span data-ttu-id="9a75e-337">Scott Cate arbeitet mit Microsoft-Web-Technologien seit 1997 und Präsidenten des myKB.com ist ([www.myKB.com](http://www.myKB.com)), in dem er zum Schreiben von ASP.NET spezialisiert-basierten Anwendungen, die Wissensdatenbank softwarelösungen konzentriert.</span><span class="sxs-lookup"><span data-stu-id="9a75e-337">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="9a75e-338">Scott hergestellt werden kann, per e-Mail an [ scott.cate@myKB.com ](mailto:scott.cate@myKB.com) oder seinen Blog unter [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="9a75e-338">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="9a75e-339">[Zurück](understanding-asp-net-ajax-localization.md)
> [Weiter](understanding-asp-net-ajax-debugging-capabilities.md)</span><span class="sxs-lookup"><span data-stu-id="9a75e-339">[Previous](understanding-asp-net-ajax-localization.md)
[Next](understanding-asp-net-ajax-debugging-capabilities.md)</span></span>
