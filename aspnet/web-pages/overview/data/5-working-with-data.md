---
uid: web-pages/overview/data/5-working-with-data
title: Einführung in die Arbeit mit einer Datenbank in der ASP.NET Web Pages (Razor) Standorte | Microsoft Docs
author: tfitzmac
description: In diesem Kapitel wird beschrieben, wie auf Daten aus einer Datenbank zugreifen, und zeigen Sie es mithilfe von ASP.NET Web Pages wird.
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/18/2014
ms.topic: article
ms.assetid: 673d502f-2c16-4a6f-bb63-dbfd9a77ef47
ms.technology: dotnet-webpages
ms.prod: .net-framework
msc.legacyurl: /web-pages/overview/data/5-working-with-data
msc.type: authoredcontent
ms.openlocfilehash: 563074cf3e60717c2e6c336a2c282b4203f73b8b
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
ms.locfileid: "30898907"
---
<a name="introduction-to-working-with-a-database-in-aspnet-web-pages-razor-sites"></a><span data-ttu-id="6d4f6-103">Einführung in die Arbeit mit einer Datenbank in der ASP.NET Web Pages (Razor)-Websites</span><span class="sxs-lookup"><span data-stu-id="6d4f6-103">Introduction to Working with a Database in ASP.NET Web Pages (Razor) Sites</span></span>
====================
<span data-ttu-id="6d4f6-104">durch [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="6d4f6-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="6d4f6-105">In diesem Artikel wird beschrieben, wie Microsoft WebMatrix-Tools verwenden, um eine Datenbank in einer ASP.NET Web Pages (Razor)-Website zu erstellen und zum Erstellen von Seiten, mit denen Sie die anzeigen, hinzufügen, bearbeiten und Löschen von Daten.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-105">This article describes how to use Microsoft WebMatrix tools to create a database in an ASP.NET Web Pages (Razor) website, and how to create pages that let you display, add, edit, and delete data.</span></span>
> 
> <span data-ttu-id="6d4f6-106">**Lernen Sie:**</span><span class="sxs-lookup"><span data-stu-id="6d4f6-106">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="6d4f6-107">Vorgehensweise: erstellen eine Datenbank.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-107">How to create a database.</span></span>
> - <span data-ttu-id="6d4f6-108">Herstellen der Verbindung mit einer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-108">How to connect to a database.</span></span>
> - <span data-ttu-id="6d4f6-109">Vorgehensweise beim Anzeigen von Daten in einer Webseite.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-109">How to display data in a web page.</span></span>
> - <span data-ttu-id="6d4f6-110">Zum Einfügen, aktualisieren und Löschen von Datenbank-Datensätze.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-110">How to insert, update, and delete database records.</span></span>
> 
> <span data-ttu-id="6d4f6-111">Dies sind die Funktionen, die im Artikel:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-111">These are the features introduced in the article:</span></span>
> 
> - <span data-ttu-id="6d4f6-112">Arbeiten mit einer Microsoft SQL Server Compact Edition-Datenbank.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-112">Working with a Microsoft SQL Server Compact Edition database.</span></span>
> - <span data-ttu-id="6d4f6-113">Arbeiten mit SQL-Abfragen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-113">Working with SQL queries.</span></span>
> - <span data-ttu-id="6d4f6-114">Der `Database`-Klasse.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-114">The `Database` class.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="6d4f6-115">In diesem Lernprogramm verwendeten Versionen der Software</span><span class="sxs-lookup"><span data-stu-id="6d4f6-115">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="6d4f6-116">ASP.NET Web Pages (Razor) 2</span><span class="sxs-lookup"><span data-stu-id="6d4f6-116">ASP.NET Web Pages (Razor) 2</span></span>
> - <span data-ttu-id="6d4f6-117">WebMatrix 2</span><span class="sxs-lookup"><span data-stu-id="6d4f6-117">WebMatrix 2</span></span>
>   
> 
> <span data-ttu-id="6d4f6-118">Dieses Lernprogramm funktioniert auch mit WebMatrix-3.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-118">This tutorial also works with WebMatrix 3.</span></span> <span data-ttu-id="6d4f6-119">Sie können ASP.NET Web Pages 3 und Visual Studio 2013 (oder Visual Studio Express 2013 für Web); die Benutzeroberfläche wird jedoch abweichen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-119">You can use ASP.NET Web Pages 3 and Visual Studio 2013 (or Visual Studio Express 2013 for Web); however, the user interface will be different.</span></span>


## <a name="introduction-to-databases"></a><span data-ttu-id="6d4f6-120">Einführung in Datenbanken</span><span class="sxs-lookup"><span data-stu-id="6d4f6-120">Introduction to Databases</span></span>

<span data-ttu-id="6d4f6-121">Angenommen Sie, ein typisches Adressbuch.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-121">Imagine a typical address book.</span></span> <span data-ttu-id="6d4f6-122">Für jeden Eintrag im Adressbuch (d. h. für jede Person) stehen Ihnen verschiedene Angaben wie z. B. Vorname, Nachname, Adresse, e-Mail-Adresse und Telefonnummer.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-122">For each entry in the address book (that is, for each person) you have several pieces of information such as first name, last name, address, email address, and phone number.</span></span>

<span data-ttu-id="6d4f6-123">Eine typische Möglichkeit zum Bilddaten wie folgt ist als eine Tabelle mit Zeilen und Spalten.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-123">A typical way to picture data like this is as a table with rows and columns.</span></span> <span data-ttu-id="6d4f6-124">In der Datenbanksprache wird jede Zeile häufig als Datensatz bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-124">In database terms, each row is often referred to as a record.</span></span> <span data-ttu-id="6d4f6-125">Jede Spalte (auch als Felder bezeichnet) enthält einen Wert für jeden Typ von Daten: Vorname, letzte Name und So weiter.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-125">Each column (sometimes referred to as fields) contains a value for each type of data: first name, last name, and so on.</span></span>

| <span data-ttu-id="6d4f6-126">**ID**</span><span class="sxs-lookup"><span data-stu-id="6d4f6-126">**ID**</span></span> | <span data-ttu-id="6d4f6-127">**FirstName**</span><span class="sxs-lookup"><span data-stu-id="6d4f6-127">**FirstName**</span></span> | <span data-ttu-id="6d4f6-128">**LastName**</span><span class="sxs-lookup"><span data-stu-id="6d4f6-128">**LastName**</span></span> | <span data-ttu-id="6d4f6-129">**Adresse**</span><span class="sxs-lookup"><span data-stu-id="6d4f6-129">**Address**</span></span> | <span data-ttu-id="6d4f6-130">**E-Mail**</span><span class="sxs-lookup"><span data-stu-id="6d4f6-130">**Email**</span></span> | <span data-ttu-id="6d4f6-131">**Telefonnummer**</span><span class="sxs-lookup"><span data-stu-id="6d4f6-131">**Phone**</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="6d4f6-132">1</span><span class="sxs-lookup"><span data-stu-id="6d4f6-132">1</span></span> | <span data-ttu-id="6d4f6-133">Jim</span><span class="sxs-lookup"><span data-stu-id="6d4f6-133">Jim</span></span> | <span data-ttu-id="6d4f6-134">Abrus</span><span class="sxs-lookup"><span data-stu-id="6d4f6-134">Abrus</span></span> | <span data-ttu-id="6d4f6-135">210 100th St SE Orcas WA 98031</span><span class="sxs-lookup"><span data-stu-id="6d4f6-135">210 100th St SE Orcas WA 98031</span></span> | jim@contoso.com | <span data-ttu-id="6d4f6-136">555 0100</span><span class="sxs-lookup"><span data-stu-id="6d4f6-136">555 0100</span></span> |
| <span data-ttu-id="6d4f6-137">2</span><span class="sxs-lookup"><span data-stu-id="6d4f6-137">2</span></span> | <span data-ttu-id="6d4f6-138">Oliver</span><span class="sxs-lookup"><span data-stu-id="6d4f6-138">Terry</span></span> | <span data-ttu-id="6d4f6-139">Adams</span><span class="sxs-lookup"><span data-stu-id="6d4f6-139">Adams</span></span> | <span data-ttu-id="6d4f6-140">1234 Main St. Seattle WA 99011</span><span class="sxs-lookup"><span data-stu-id="6d4f6-140">1234 Main St. Seattle WA 99011</span></span> | terry@cohowinery.com | <span data-ttu-id="6d4f6-141">555 0101</span><span class="sxs-lookup"><span data-stu-id="6d4f6-141">555 0101</span></span> |

<span data-ttu-id="6d4f6-142">Für die meisten-Datenbanktabellen enthalten sind muss die Tabelle eine Spalte aufweisen, die einen eindeutigen Bezeichner, z. B. eine Kundennummer, Kontonummer usw. enthält. Dies bezeichnet man der Tabelle *Primärschlüssel*, und Sie verwenden, um jede Zeile in der Tabelle zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-142">For most database tables, the table has to have a column that contains a unique identifier, like a customer number, account number, etc. This is known as the table's *primary key*, and you use it to identify each row in the table.</span></span> <span data-ttu-id="6d4f6-143">Im Beispiel ist die ID-Spalte der Primärschlüssel für das Adressbuch.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-143">In the example, the ID column is the primary key for the address book.</span></span>

<span data-ttu-id="6d4f6-144">Mit diesem Grundkenntnisse der Datenbanken können Sie Informationen zum Erstellen einer einfachen Datenbank und Vorgänge wie das Hinzufügen, ändern und Löschen von Daten.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-144">With this basic understanding of databases, you're ready to learn how to create a simple database and perform operations such as adding, modifying, and deleting data.</span></span>

> [!TIP] 
> 
> <span data-ttu-id="6d4f6-145">**Relationale Datenbanken**</span><span class="sxs-lookup"><span data-stu-id="6d4f6-145">**Relational Databases**</span></span>
> 
> <span data-ttu-id="6d4f6-146">Sie können Daten in vielen Möglichkeiten, z. B. Textdateien und Tabellen speichern.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-146">You can store data in lots of ways, including text files and spreadsheets.</span></span> <span data-ttu-id="6d4f6-147">Für die meisten Unternehmen verwendet werden, Daten in einer relationalen Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-147">For most business uses, though, data is stored in a relational database.</span></span>
> 
> <span data-ttu-id="6d4f6-148">In diesem Artikel wechseln nicht sehr tief in Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-148">This article doesn't go very deeply into databases.</span></span> <span data-ttu-id="6d4f6-149">Allerdings kann es ein wenig über diese verstehen nützlich.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-149">However, you might find it useful to understand a little about them.</span></span> <span data-ttu-id="6d4f6-150">In einer relationalen Datenbank ist die Informationen in separaten Tabellen logisch unterteilt.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-150">In a relational database, information is logically divided into separate tables.</span></span> <span data-ttu-id="6d4f6-151">Beispielsweise kann eine Datenbank für eine Schule separate Tabellen für Studenten und für Angebote Klasse enthalten.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-151">For example, a database for a school might contain separate tables for students and for class offerings.</span></span> <span data-ttu-id="6d4f6-152">Die Datenbank-Software (z. B. SQL Server) unterstützt leistungsstarke Befehle, mit denen Sie dynamisch bilden die Beziehungen zwischen Tabellen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-152">The database software (such as SQL Server) supports powerful commands that let you dynamically establish relationships between the tables.</span></span> <span data-ttu-id="6d4f6-153">Beispielsweise können Sie die relationale Datenbank, um eine logische Beziehung zwischen Klassen und Studenten herzustellen, um einen Zeitplan zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-153">For example, you can use the relational database to establish a logical relationship between students and classes in order to create a schedule.</span></span> <span data-ttu-id="6d4f6-154">Speichern von Daten in separaten Tabellen reduziert die Komplexität der Tabellenstruktur und verringert den Bedarf an redundante Daten in Tabellen zu halten.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-154">Storing data in separate tables reduces the complexity of the table structure and reduces the need to keep redundant data in tables.</span></span>


## <a name="creating-a-database"></a><span data-ttu-id="6d4f6-155">Erstellen einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="6d4f6-155">Creating a Database</span></span>

<span data-ttu-id="6d4f6-156">Dieses Verfahren veranschaulicht das Erstellen einer Datenbank mit dem Namen SmallBakery mithilfe von SQL Server Compact-Datenbank-Entwurfstools, die in WebMatrix enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-156">This procedure shows you how to create a database named SmallBakery by using the SQL Server Compact Database design tool that's included in WebMatrix.</span></span> <span data-ttu-id="6d4f6-157">Obwohl Sie eine Datenbank mithilfe von Code erstellen können, ist es häufiger vor, um die Datenbank und die Datenbanktabellen, die mit einem Entwurfstool wie WebMatrix erstellen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-157">Although you can create a database using code, it's more typical to create the database and database tables using a design tool like WebMatrix.</span></span>

1. <span data-ttu-id="6d4f6-158">Starten Sie WebMatrix, und klicken Sie auf der Seite "Schnellstart" auf **Websitevorlage aus**.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-158">Start WebMatrix, and on the Quick Start page, click **Site From Template**.</span></span>
2. <span data-ttu-id="6d4f6-159">Wählen Sie **leere Website**, und klicken Sie in der **Standortname** Feld Geben Sie "SmallBakery", und klicken Sie dann auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-159">Select **Empty Site**, and in the **Site Name** box enter "SmallBakery" and then click **OK**.</span></span> <span data-ttu-id="6d4f6-160">Die Website wird erstellt und in WebMatrix angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-160">The site is created and displayed in WebMatrix.</span></span>
3. <span data-ttu-id="6d4f6-161">Klicken Sie im linken Bereich auf die **Datenbanken** Arbeitsbereich.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-161">In the left pane, click the **Databases** workspace.</span></span>
4. <span data-ttu-id="6d4f6-162">Klicken Sie im Menüband auf **neue Datenbank**.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-162">In the ribbon, click **New Database**.</span></span> <span data-ttu-id="6d4f6-163">Mit dem gleichen Namen wie Ihr Standort wird eine leere Datenbank erstellt.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-163">An empty database is created with the same name as your site.</span></span>
5. <span data-ttu-id="6d4f6-164">Erweitern Sie im linken Bereich der **SmallBakery.sdf** Knoten, und klicken Sie dann auf **Tabellen**.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-164">In the left pane, expand the **SmallBakery.sdf** node and then click **Tables**.</span></span>
6. <span data-ttu-id="6d4f6-165">Klicken Sie im Menüband auf **neue Tabelle**.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-165">In the ribbon, click **New Table**.</span></span> <span data-ttu-id="6d4f6-166">WebMatrix wird den Tabellen-Designer geöffnet.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-166">WebMatrix opens the table designer.</span></span>

    ![[Image]](5-working-with-data/_static/image1.jpg)
7. <span data-ttu-id="6d4f6-168">Klicken Sie in der **Namen** Spalte, und geben Sie &quot;Id&quot;.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-168">Click in the **Name** column and enter &quot;Id&quot;.</span></span>
8. <span data-ttu-id="6d4f6-169">In der **Datentyp** Spalte **Int**.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-169">In the **Data Type** column, select **int**.</span></span>
9. <span data-ttu-id="6d4f6-170">Festlegen der **Primärschlüssel ist?** und **ist identifizieren?** Optionen **Ja**.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-170">Set the **Is Primary Key?** and **Is Identify?** options to **Yes**.</span></span>

    <span data-ttu-id="6d4f6-171">Wie der Name bereits vermuten lässt, **Primärschlüssel ist** weist der Datenbank, dafür Primärschlüssel der Tabelle.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-171">As the name suggests, **Is Primary Key** tells the database that this will be the table's primary key.</span></span> <span data-ttu-id="6d4f6-172">**Ist Identity** weist die Datenbank aus, um automatisch eine ID-Nummer für jeden neuen Eintrag zu erstellen und sie die nächste laufende Nummer (beginnend mit 1) zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-172">**Is Identity** tells the database to automatically create an ID number for every new record and to assign it the next sequential number (starting at 1).</span></span>
10. <span data-ttu-id="6d4f6-173">Klicken Sie auf die nächste Zeile.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-173">Click in the next row.</span></span> <span data-ttu-id="6d4f6-174">Der Editor startet die Definition einer neuen Spalte.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-174">The editor starts a new column definition.</span></span>
11. <span data-ttu-id="6d4f6-175">Geben Sie für den Namenswert &quot;Namen&quot;.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-175">For the Name value, enter &quot;Name&quot;.</span></span>
12. <span data-ttu-id="6d4f6-176">Für **Datentyp**, wählen Sie &quot;Nvarchar&quot; und die Länge auf 50 festgelegt.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-176">For **Data Type**, choose &quot;nvarchar&quot; and set the length to 50.</span></span> <span data-ttu-id="6d4f6-177">Die *Var* Teil `nvarchar` weist der Datenbank, dass die Daten für diese Spalte eine Zeichenfolge, deren Größe von Datensatz zu Datensatz variieren.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-177">The *var* part of `nvarchar` tells the database that the data for this column will be a string whose size might vary from record to record.</span></span> <span data-ttu-id="6d4f6-178">(Die *n* Präfix stellt *national*, gibt an, dass das Feld Zeichendaten enthalten kann, die alle Alphabet darstellt oder ein Schreibsystem &#8212; , also, dass das Feld Unicode-Daten enthält.)</span><span class="sxs-lookup"><span data-stu-id="6d4f6-178">(The *n* prefix represents *national*, indicating that the field can hold character data that represents any alphabet or writing system &#8212; that is, that the field holds Unicode data.)</span></span>
13. <span data-ttu-id="6d4f6-179">Legen Sie die **NULL-Werte zulassen** option **keine**.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-179">Set the **Allow Nulls** option to **No**.</span></span> <span data-ttu-id="6d4f6-180">Dadurch wird erzwungen, die die *Namen* Spalte ist nicht leer.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-180">This will enforce that the *Name* column is not left blank.</span></span>
14. <span data-ttu-id="6d4f6-181">Erstellen Sie mit der gleiche Vorgang, eine Spalte mit dem Namen *Beschreibung*.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-181">Using this same process, create a column named *Description*.</span></span> <span data-ttu-id="6d4f6-182">Legen Sie **Datentyp** "Nvarchar" und 50 für die Länge und **NULL-Werte zulassen** auf "false".</span><span class="sxs-lookup"><span data-stu-id="6d4f6-182">Set **Data Type** to "nvarchar" and 50 for the length, and set **Allow Nulls** to false.</span></span>
15. <span data-ttu-id="6d4f6-183">Erstellen Sie eine Spalte mit dem Namen *Preis*.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-183">Create a column named *Price*.</span></span> <span data-ttu-id="6d4f6-184">Legen Sie **-Datentyp "Money"** und **NULL-Werte zulassen** auf "false".</span><span class="sxs-lookup"><span data-stu-id="6d4f6-184">Set **Data Type to "money"** and set **Allow Nulls** to false.</span></span>
16. <span data-ttu-id="6d4f6-185">Benennen Sie im Feld oben auf die Tabelle &quot;Produkt&quot;.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-185">In the box at the top, name the table &quot;Product&quot;.</span></span>

    <span data-ttu-id="6d4f6-186">Wenn Sie fertig sind, wird die Definition sieht folgendermaßen aus:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-186">When you're done, the definition will look like this:</span></span>

    ![[Image]](5-working-with-data/_static/image2.jpg)
17. <span data-ttu-id="6d4f6-188">Drücken Sie STRG + S, um die Tabelle zu speichern.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-188">Press Ctrl+S to save the table.</span></span>

## <a name="adding-data-to-the-database"></a><span data-ttu-id="6d4f6-189">Hinzufügen von Daten in der Datenbank</span><span class="sxs-lookup"><span data-stu-id="6d4f6-189">Adding Data to the Database</span></span>

<span data-ttu-id="6d4f6-190">Jetzt können Sie Beispieldaten in der Datenbank hinzufügen, die Sie später in diesem Artikel verwenden müssen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-190">Now you can add some sample data to your database that you'll work with later in the article.</span></span>

1. <span data-ttu-id="6d4f6-191">Erweitern Sie im linken Bereich der **SmallBakery.sdf** Knoten, und klicken Sie dann auf **Tabellen**.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-191">In the left pane, expand the **SmallBakery.sdf** node and then click **Tables**.</span></span>
2. <span data-ttu-id="6d4f6-192">Mit der rechten Maustaste in der Product-Tabelle, und klicken Sie dann auf **Daten**.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-192">Right-click the Product table and then click **Data**.</span></span>
3. <span data-ttu-id="6d4f6-193">Klicken Sie im Bereich "Bearbeiten" Geben Sie die folgenden Datensätze:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-193">In the edit pane, enter the following records:</span></span>

    | <span data-ttu-id="6d4f6-194">**Name**</span><span class="sxs-lookup"><span data-stu-id="6d4f6-194">**Name**</span></span> | <span data-ttu-id="6d4f6-195">**Beschreibung**</span><span class="sxs-lookup"><span data-stu-id="6d4f6-195">**Description**</span></span> | <span data-ttu-id="6d4f6-196">**Price**</span><span class="sxs-lookup"><span data-stu-id="6d4f6-196">**Price**</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="6d4f6-197">Brot</span><span class="sxs-lookup"><span data-stu-id="6d4f6-197">Bread</span></span> | <span data-ttu-id="6d4f6-198">Integrierte frisch täglich.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-198">Baked fresh every day.</span></span> | <span data-ttu-id="6d4f6-199">2.99</span><span class="sxs-lookup"><span data-stu-id="6d4f6-199">2.99</span></span> |
    | <span data-ttu-id="6d4f6-200">Erdbeere Shortcake</span><span class="sxs-lookup"><span data-stu-id="6d4f6-200">Strawberry Shortcake</span></span> | <span data-ttu-id="6d4f6-201">In unserem Gartens mit organischem Erdbeeren erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-201">Made with organic strawberries from our garden.</span></span> | <span data-ttu-id="6d4f6-202">9.99</span><span class="sxs-lookup"><span data-stu-id="6d4f6-202">9.99</span></span> |
    | <span data-ttu-id="6d4f6-203">Apple-Kreisdiagramm</span><span class="sxs-lookup"><span data-stu-id="6d4f6-203">Apple Pie</span></span> | <span data-ttu-id="6d4f6-204">Die zweite nur für die Mom-Kreisdiagramm.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-204">Second only to your mom's pie.</span></span> | <span data-ttu-id="6d4f6-205">12.99</span><span class="sxs-lookup"><span data-stu-id="6d4f6-205">12.99</span></span> |
    | <span data-ttu-id="6d4f6-206">Pecan Kreis</span><span class="sxs-lookup"><span data-stu-id="6d4f6-206">Pecan Pie</span></span> | <span data-ttu-id="6d4f6-207">Wenn Sie Pecans möchten, ist dies für Sie.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-207">If you like pecans, this is for you.</span></span> | <span data-ttu-id="6d4f6-208">10.99</span><span class="sxs-lookup"><span data-stu-id="6d4f6-208">10.99</span></span> |
    | <span data-ttu-id="6d4f6-209">Zitronen-Kreisdiagramm</span><span class="sxs-lookup"><span data-stu-id="6d4f6-209">Lemon Pie</span></span> | <span data-ttu-id="6d4f6-210">Mit der besten Zitronen in der ganzen Welt vorgenommen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-210">Made with the best lemons in the world.</span></span> | <span data-ttu-id="6d4f6-211">11.99</span><span class="sxs-lookup"><span data-stu-id="6d4f6-211">11.99</span></span> |
    | <span data-ttu-id="6d4f6-212">Aber</span><span class="sxs-lookup"><span data-stu-id="6d4f6-212">Cupcakes</span></span> | <span data-ttu-id="6d4f6-213">Ihre Kinder und in Ihren "Kid" werden diese begeistert sein.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-213">Your kids and the kid in you will love these.</span></span> | <span data-ttu-id="6d4f6-214">7.99</span><span class="sxs-lookup"><span data-stu-id="6d4f6-214">7.99</span></span> |

    <span data-ttu-id="6d4f6-215">Denken Sie daran, dass Sie keine Eingabe für die *Id* Spalte.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-215">Remember that you don't have to enter anything for the *Id* column.</span></span> <span data-ttu-id="6d4f6-216">Beim Erstellen der *Id* Spalte festlegen seiner **ist Identity** Eigenschaft auf "true", wodurch sie automatisch ausgefüllt werden.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-216">When you created the *Id* column, you set its **Is Identity** property to true, which causes it to automatically be filled in.</span></span>

    <span data-ttu-id="6d4f6-217">Wenn Sie die Daten eingegeben haben, wird der Tabellen-Designer wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-217">When you're finished entering the data, the table designer will look like this:</span></span>

    ![[Image]](5-working-with-data/_static/image3.jpg)
4. <span data-ttu-id="6d4f6-219">Schließen Sie die Registerkarte, die Daten in der Datenbank enthält.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-219">Close the tab that contains the database data.</span></span>

## <a name="displaying-data-from-a-database"></a><span data-ttu-id="6d4f6-220">Anzeigen von Daten aus einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="6d4f6-220">Displaying Data from a Database</span></span>

<span data-ttu-id="6d4f6-221">Nachdem Sie eine Datenbank mit Daten darin ist, können Sie die Daten in einer ASP.NET Web-Seite anzeigen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-221">Once you've got a database with data in it, you can display the data in an ASP.NET web page.</span></span> <span data-ttu-id="6d4f6-222">Um die Zeilen der Tabelle zum Anzeigen auszuwählen, verwenden Sie eine SQL-Anweisung, um einen Befehl handelt, den Sie an die Datenbank übergeben.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-222">To select the table rows to display, you use a SQL statement, which is a command that you pass to the database.</span></span>

1. <span data-ttu-id="6d4f6-223">Klicken Sie im linken Bereich auf die **Dateien** Arbeitsbereich.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-223">In the left pane, click the **Files** workspace.</span></span>
2. <span data-ttu-id="6d4f6-224">Erstellen Sie im Stammverzeichnis der Website, eine neue CSHTML-Seite mit dem Namen *ListProducts.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-224">In the root of the website, create a new CSHTML page named *ListProducts.cshtml*.</span></span>
3. <span data-ttu-id="6d4f6-225">Ersetzen Sie das vorhandene Markup durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-225">Replace the existing markup with the following:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample1.cshtml)]

    <span data-ttu-id="6d4f6-226">Öffnen Sie in der ersten Codeblock, der *SmallBakery.sdf* Datei (Datenbank), die Sie zuvor erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-226">In the first code block, you open the *SmallBakery.sdf* file (database) that you created earlier.</span></span> <span data-ttu-id="6d4f6-227">Die `Database.Open` Methode setzt voraus, dass die *.sdf* Datei befindet sich in Ihrer Website *App\_Daten* Ordner.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-227">The `Database.Open` method assumes that the *.sdf* file is in your website's *App\_Data* folder.</span></span> <span data-ttu-id="6d4f6-228">(Beachten Sie, die Sie benötigen, geben Sie die *.sdf* Erweiterung &#8212; tatsächlich, wenn Sie dies tun, die `Open` -Methode funktioniert nicht,.)</span><span class="sxs-lookup"><span data-stu-id="6d4f6-228">(Notice that you don't need to specify the *.sdf* extension &#8212; in fact, if you do, the `Open` method won't work.)</span></span>

    > [!NOTE]
    > <span data-ttu-id="6d4f6-229">Die *App\_Daten* ist ein spezieller Ordner in ASP.NET, die zum Speichern der Datendateien verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-229">The *App\_Data* folder is a special folder in ASP.NET that's used to store data files.</span></span> <span data-ttu-id="6d4f6-230">Weitere Informationen finden Sie unter [Herstellen einer Verbindung mit einer Datenbank](#SB_ConnectingToADatabase) weiter unten in diesem Artikel.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-230">For more information, see [Connecting to a Database](#SB_ConnectingToADatabase) later in this article.</span></span>

    <span data-ttu-id="6d4f6-231">Stellen Sie eine Anforderung zum Abfragen der Datenbank mit der folgenden SQL `Select` Anweisung:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-231">You then make a request to query the database using the following SQL `Select` statement:</span></span>

    [!code-sql[Main](5-working-with-data/samples/sample2.sql)]

    <span data-ttu-id="6d4f6-232">In der Anweisung `Product` identifiziert die Tabelle, Abfrage.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-232">In the statement, `Product` identifies the table to query.</span></span> <span data-ttu-id="6d4f6-233">Die `*` Zeichen gibt an, dass die Abfrage alle Spalten aus der Tabelle zurückgeben soll.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-233">The `*` character specifies that the query should return all the columns from the table.</span></span> <span data-ttu-id="6d4f6-234">(Sie können auch Spalten einzeln auflisten durch Kommas getrennt werden, wenn Sie nur einige der Spalten finden Sie unter.) Die `Order By` -Klausel zeigt an, wie die Daten sortiert werden sollen &#8212; in diesem Fall durch die *Namen* Spalte.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-234">(You could also list columns individually, separated by commas, if you wanted to see only some of the columns.) The `Order By` clause indicates how the data should be sorted &#8212; in this case, by the *Name* column.</span></span> <span data-ttu-id="6d4f6-235">Dies bedeutet, dass die Daten in alphabetischer Reihenfolge basierend auf den Wert der sortiert werden die *Namen* Spalte für jede Zeile.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-235">This means that the data is sorted alphabetically based on the value of the *Name* column for each row.</span></span>

    <span data-ttu-id="6d4f6-236">Im Text der Seite erstellt das Markup eine HTML-Tabelle, die zum Anzeigen der Daten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-236">In the body of the page, the markup creates an HTML table that will be used to display the data.</span></span> <span data-ttu-id="6d4f6-237">Innerhalb der `<tbody>` Element, Sie verwenden eine `foreach` Schleife einzeln auf jede Datenzeile abgerufen, die von der Abfrage zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-237">Inside the `<tbody>` element, you use a `foreach` loop to individually get each data row that's returned by the query.</span></span> <span data-ttu-id="6d4f6-238">Für jede Datenzeile, die Sie Erstellen einer HTML-Tabellenzeile (`<tr>` Element).</span><span class="sxs-lookup"><span data-stu-id="6d4f6-238">For each data row, you create an HTML table row (`<tr>` element).</span></span> <span data-ttu-id="6d4f6-239">Anschließend Sie HTML-Tabellenzellen erstellen (`<td>` Elemente) für jede Spalte.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-239">Then you create HTML table cells (`<td>` elements) for each column.</span></span> <span data-ttu-id="6d4f6-240">Bei jedem der Schleife durchlaufen, die nächste verfügbare Zeile aus der Datenbank ist der `row` Variable (diese Einstellung wird der `foreach` Anweisung).</span><span class="sxs-lookup"><span data-stu-id="6d4f6-240">Each time you go through the loop, the next available row from the database is in the `row` variable (you set this up in the `foreach` statement).</span></span> <span data-ttu-id="6d4f6-241">Um eine einzelne Spalte aus der Zeile zu erhalten, können Sie `row.Name` oder `row.Description` oder einen beliebigen den Namen der Spalte ist.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-241">To get an individual column from the row, you can use `row.Name` or `row.Description` or whatever the name is of the column you want.</span></span>
4. <span data-ttu-id="6d4f6-242">Führen Sie die Seite in einem Browser aus.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-242">Run the page in a browser.</span></span> <span data-ttu-id="6d4f6-243">(Stellen Sie sicher, dass die Seite ist ausgewählt, der **Dateien** Arbeitsbereich vor der Ausführung.) Die Seite zeigt eine Liste wie folgt:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-243">(Make sure the page is selected in the **Files** workspace before you run it.) The page displays a list like the following:</span></span>

    ![[Image]](5-working-with-data/_static/image4.jpg)

> [!TIP] 
> 
> <span data-ttu-id="6d4f6-245">**Structured Query Language (SQL)**</span><span class="sxs-lookup"><span data-stu-id="6d4f6-245">**Structured Query Language (SQL)**</span></span>
> 
> <span data-ttu-id="6d4f6-246">SQL ist eine Programmiersprache, die in den meisten relationalen Datenbanken verwendet wird, um Daten in einer Datenbank zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-246">SQL is a language that's used in most relational databases for managing data in a database.</span></span> <span data-ttu-id="6d4f6-247">Es enthält Befehle, mit deren Hilfe Sie die Daten abzurufen und zu aktualisieren, und, mit deren Hilfe Sie erstellen, ändern und Verwalten von Datenbanktabellen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-247">It includes commands that let you retrieve data and update it, and that let you create, modify, and manage database tables.</span></span> <span data-ttu-id="6d4f6-248">SQL unterscheidet sich von einer Programmiersprache Ihrer Wahl (z. B. die gerade von Ihnen in WebMatrix verwendeten), da mit "SQL" oder die Idee dabei ist, dass Sie die Datenbank feststellen, was soll, und es Aufgabe der Datenbank ist, um zu erfahren, wie die Daten abgerufen und die Ausführung der Aufgabe.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-248">SQL is different than a programming language (like the one you're using in WebMatrix) because with SQL, the idea is that you tell the database what you want, and it's the database's job to figure out how to get the data or perform the task.</span></span> <span data-ttu-id="6d4f6-249">Nachfolgend sind Beispiele für einige SQL-Befehle und was sie tun:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-249">Here are examples of some SQL commands and what they do:</span></span>
> 
> `SELECT Id, Name, Price FROM Product WHERE Price > 10.00 ORDER BY Name`
> 
> <span data-ttu-id="6d4f6-250">Dies ruft die *Id*, *Namen*, und *Preis* Spalten aus Datensätzen in der *Produkt* Tabelle, wenn den Wert der *Preis* mehr als 10 ist, und die Ergebnisse zurückgibt, in alphabetischer Reihenfolge basierend auf den Werten der *Namen* Spalte.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-250">This fetches the *Id*, *Name*, and *Price* columns from records in the *Product* table if the value of *Price* is more than 10, and returns the results in alphabetical order based on the values of the *Name* column.</span></span> <span data-ttu-id="6d4f6-251">Dieser Befehl gibt ein Resultset zurück, die die Datensätze, die die Kriterien oder ein leeres Resultset zu erfüllen enthält, wenn keine Datensätze entsprechen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-251">This command will return a result set that contains the records that meet the criteria, or an empty set if no records match.</span></span>
> 
> `INSERT INTO Product (Name, Description, Price) VALUES ("Croissant", "A flaky delight", 1.99)`
> 
> <span data-ttu-id="6d4f6-252">Fügt einen neuen Datensatz in die *Produkt* Tabelle Festlegen der *Namen* Spalte &quot;Croissant&quot;, *Beschreibung* Spalte &quot; Eine arbeitende erfreuen&quot;, und der Preis 1.99.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-252">This inserts a new record into the *Product* table, setting the *Name* column to &quot;Croissant&quot;, the *Description* column to &quot;A flaky delight&quot;, and the price to 1.99.</span></span>
> 
> `DELETE FROM Product WHERE ExpirationDate < "01/01/2008"`
> 
> <span data-ttu-id="6d4f6-253">Dieser Befehl löscht Einträge in der *Produkt* Tabelle, deren Ablauf des Date-Spalte vor dem 1. Januar 2008 liegt.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-253">This command deletes records in the *Product* table whose expiration date column is earlier than January 1, 2008.</span></span> <span data-ttu-id="6d4f6-254">(Dies setzt voraus, dass die *Produkt* Tabelle besitzt eine Spalte, natürlich.) Das Datum wird im Format MM/TT/JJJJ hier eingegeben, aber es eingegeben werden in das Format, das für Ihr Gebietsschema verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-254">(This assumes that the *Product* table has such a column, of course.) The date is entered here in MM/DD/YYYY format, but it should be entered in the format that's used for your locale.</span></span>
> 
> <span data-ttu-id="6d4f6-255">Die `Insert Into` und `Delete` Befehle keine Resultsets zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-255">The `Insert Into` and `Delete` commands don't return result sets.</span></span> <span data-ttu-id="6d4f6-256">Stattdessen geben sie eine Zahl, die Sie informiert, wie viele Datensätze mit dem Befehl betroffen sind zurück.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-256">Instead, they return a number that tells you how many records were affected by the command.</span></span>
> 
> <span data-ttu-id="6d4f6-257">Für einige dieser Vorgänge (wie einfügen und Löschen von Datensätzen) muss der Prozess, der den Vorgang anfordert, wird in der Datenbank berechtigt.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-257">For some of these operations (like inserting and deleting records), the process that's requesting the operation has to have appropriate permissions in the database.</span></span> <span data-ttu-id="6d4f6-258">Dies ist deshalb für Produktionsdatenbanken häufig stehen Ihnen zum Angeben eines Benutzernamens und Kennworts beim Herstellen einer Verbindung mit der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-258">This is why for production databases you often have to supply a username and password when you connect to the database.</span></span>
> 
> <span data-ttu-id="6d4f6-259">Es gibt Dutzende von SQL-Befehle, die folgen einem Muster wie folgt jedoch.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-259">There are dozens of SQL commands, but they all follow a pattern like this.</span></span> <span data-ttu-id="6d4f6-260">Sie können SQL-Befehle erstellen Sie die Datenbanktabellen, die Anzahl der Datensätze in einer Tabelle, Preise berechnen und viele weitere Vorgänge ausführen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-260">You can use SQL commands to create database tables, count the number of records in a table, calculate prices, and perform many more operations.</span></span>


## <a name="inserting-data-in-a-database"></a><span data-ttu-id="6d4f6-261">Einfügen von Daten in einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="6d4f6-261">Inserting Data in a Database</span></span>

<span data-ttu-id="6d4f6-262">In diesem Abschnitt wird gezeigt, wie auf eine Seite zu erstellen, kann der Benutzer ein neues Produkt zum Hinzufügen, der *Produkt* Datenbanktabelle.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-262">This section shows how to create a page that lets users add a new product to the *Product* database table.</span></span> <span data-ttu-id="6d4f6-263">Nach dem Einfügen eines neuen Produktdatensatzes, die Seite zeigt die aktualisierte Tabelle mithilfe der *ListProducts.cshtml* Seite, die Sie im vorherigen Abschnitt erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-263">After a new product record is inserted, the page displays the updated table using the *ListProducts.cshtml* page that you created in the previous section.</span></span>

<span data-ttu-id="6d4f6-264">Die Seite enthält die Überprüfung, um sicherzustellen, dass die Daten, die der Benutzer eingibt, für die Datenbank gültig sind.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-264">The page includes validation to make sure that the data that the user enters is valid for the database.</span></span> <span data-ttu-id="6d4f6-265">Auf der Seite Code macht z. B. sicher, dass für alle erforderlichen Spalten ein Wert eingegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-265">For example, code in the page makes sure that a value has been entered for all required columns.</span></span>

1. <span data-ttu-id="6d4f6-266">Erstellen Sie eine neue CSHTML-Datei mit dem Namen der Website *InsertProducts.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-266">In the website, create a new CSHTML file named *InsertProducts.cshtml*.</span></span>
2. <span data-ttu-id="6d4f6-267">Ersetzen Sie das vorhandene Markup durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-267">Replace the existing markup with the following:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample3.cshtml)]

    <span data-ttu-id="6d4f6-268">Der Text der Seite enthält ein HTML-Formular mit drei Textfelder, mit die Benutzer ein Name, Beschreibung und Preis eingeben können.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-268">The body of the page contains an HTML form with three text boxes that let users enter a name, description, and price.</span></span> <span data-ttu-id="6d4f6-269">Wenn der Benutzer klicken auf die **einfügen** Schaltfläche, die der Code am oberen Rand der Seite öffnet eine Verbindung mit der *SmallBakery.sdf* Datenbank.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-269">When users click the **Insert** button, the code at the top of the page opens a connection to the *SmallBakery.sdf* database.</span></span> <span data-ttu-id="6d4f6-270">Sie erhalten dann die Werte, die der Benutzer mit übermittelt hat die `Request` Objekt, und weisen Sie diese Werte zu lokalen Variablen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-270">You then get the values that the user has submitted by using the `Request` object and assign those values to local variables.</span></span>

    <span data-ttu-id="6d4f6-271">Um zu überprüfen, dass der Benutzer einen Wert für jede erforderliche Spalte eingegeben haben, registrieren Sie jedes `<input>` Element, das Sie überprüfen möchten:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-271">To validate that the user entered a value for each required column, you register each `<input>` element that you want to validate:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample4.cs)]

    <span data-ttu-id="6d4f6-272">Die `Validation` Helper wird überprüft, ob es ein Wert in jedes der Felder, die Sie registriert haben.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-272">The `Validation` helper checks that there is a value in each of the fields that you've registered.</span></span> <span data-ttu-id="6d4f6-273">Sie können testen, ob alle Felder überprüft die Überprüfung bestanden `Validation.IsValid()`, die Sie in der Regel tun, bevor Sie die Informationen Sie vom Benutzer erhalten zu verarbeiten:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-273">You can test whether all the fields passed validation by checking `Validation.IsValid()`, which you typically do before you process the information you get from the user:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample5.cs)]

    <span data-ttu-id="6d4f6-274">(Die `&&` Operator bedeutet und – mit diesem Test wird *ist dies einer Formularübergabe und alle Felder haben die Überprüfung bestanden*.)</span><span class="sxs-lookup"><span data-stu-id="6d4f6-274">(The `&&` operator means AND — this test is *If this is a form submission AND all the fields have passed validation*.)</span></span>

    <span data-ttu-id="6d4f6-275">Wenn alle Spalten überprüft (keine leer waren), fahren Sie fort, und erstellen Sie eine SQL-Anweisung, um die Daten einzufügen, und führen Sie es als Nächstes dargestellt:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-275">If all the columns validated (none were empty), you go ahead and create a SQL statement to insert the data and then execute it as shown next:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample6.cs)]

    <span data-ttu-id="6d4f6-276">Für die einzufügenden Werte, die Sie einschließen Parameterplatzhalter (`@0`, `@1`, `@2`).</span><span class="sxs-lookup"><span data-stu-id="6d4f6-276">For the values to insert, you include parameter placeholders (`@0`, `@1`, `@2`).</span></span>

    > [!NOTE]
    > <span data-ttu-id="6d4f6-277">Als Sicherheitsmaßnahme müssen übergeben Sie Werte immer an eine SQL-Anweisung mit Parametern, wie Sie im vorherigen Beispiel sehen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-277">As a security precaution, always pass values to a SQL statement using parameters, as you see in the preceding example.</span></span> <span data-ttu-id="6d4f6-278">Dies bietet Ihnen die Möglichkeit zum Überprüfen der Daten des Benutzers sowie dient zum Schutz gegen versucht, böswillige Befehle an der Datenbank (auch als SQL Injection-Angriffen bezeichnet) zu senden.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-278">This gives you a chance to validate the user's data, plus it helps protect against attempts to send malicious commands to your database (sometimes referred to as SQL injection attacks).</span></span>

    <span data-ttu-id="6d4f6-279">Um die Abfrage auszuführen, verwenden Sie diese Anweisung übergeben, die Variablen, die die Werte als Ersatz für die Platzhalter enthalten:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-279">To execute the query, you use this statement, passing to it the variables that contain the values to substitute for the placeholders:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample7.cs)]

    <span data-ttu-id="6d4f6-280">Nach der `Insert Into` -Anweisung ausgeführt hat, senden Sie dem Benutzer zur Seite, die der Produkte, die mit dieser Zeile aufgeführt sind:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-280">After the `Insert Into` statement has executed, you send the user to the page that lists the products using this line:</span></span>

    [!code-javascript[Main](5-working-with-data/samples/sample8.js)]

    <span data-ttu-id="6d4f6-281">Wenn die Überprüfung war nicht erfolgreich, überspringen Sie die einfügen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-281">If validation didn't succeed, you skip the insert.</span></span> <span data-ttu-id="6d4f6-282">Stattdessen müssen Sie eine Hilfsmethode auf der Seite, die die kumulierte Fehlermeldungen (sofern vorhanden) angezeigt werden kann:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-282">Instead, you have a helper in the page that can display the accumulated error messages (if any):</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample9.cshtml)]

    <span data-ttu-id="6d4f6-283">Beachten Sie, dass der Style-Block im Markup eine CSS-Klassendefinition mit dem Namen enthält `.validation-summary-errors`.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-283">Notice that the style block in the markup includes a CSS class definition named `.validation-summary-errors`.</span></span> <span data-ttu-id="6d4f6-284">Dies ist der Name der CSS-Klasse, die standardmäßig für die `<div>` Element, das Validierungsfehler enthält.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-284">This is the name of the CSS class that's used by default for the `<div>` element that contains any validation errors.</span></span> <span data-ttu-id="6d4f6-285">In diesem Fall wird in CSS-Klasse gibt an, dass Zusammenfassung Validierungsfehler in Rot angezeigt werden und in Fettdruck, aber Sie definieren können, die `.validation-summary-errors` zum Anzeigen der keine Formatierung anwenden soll.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-285">In this case, the CSS class specifies that validation summary errors are displayed in red and in bold, but you can define the `.validation-summary-errors` class to display any formatting you like.</span></span>

### <a name="testing-the-insert-page"></a><span data-ttu-id="6d4f6-286">Testen die Seite "Einfügen"</span><span class="sxs-lookup"><span data-stu-id="6d4f6-286">Testing the Insert Page</span></span>

1. <span data-ttu-id="6d4f6-287">Die Seite in einem Browser anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-287">View the page in a browser.</span></span> <span data-ttu-id="6d4f6-288">Die Seite zeigt ein Formular, mit dem Umwandlungsoperator ist, die in der folgenden Abbildung dargestellt ist.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-288">The page displays a form that's similar to the one that's shown in the following illustration.</span></span>

    ![[Image]](5-working-with-data/_static/image5.jpg)
2. <span data-ttu-id="6d4f6-290">Geben Sie Werte für alle Spalten, aber stellen Sie sicher, dass Sie lassen die *Preis* Spalte leer.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-290">Enter values for all the columns, but make sure that you leave the *Price* column blank.</span></span>
3. <span data-ttu-id="6d4f6-291">Klicken Sie auf **einfügen**.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-291">Click **Insert**.</span></span> <span data-ttu-id="6d4f6-292">Die Seite zeigt eine Fehlermeldung an, wie in der folgenden Abbildung dargestellt.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-292">The page displays an error message, as shown in the following illustration.</span></span> <span data-ttu-id="6d4f6-293">(Keine neuer Datensatz wird erstellt.)</span><span class="sxs-lookup"><span data-stu-id="6d4f6-293">(No new record is created.)</span></span>

    ![[Image]](5-working-with-data/_static/image6.jpg)
4. <span data-ttu-id="6d4f6-295">Füllen Sie das Formular vollständig, und klicken Sie dann auf **einfügen**.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-295">Fill the form out completely, and then click **Insert**.</span></span> <span data-ttu-id="6d4f6-296">Dieses Mal die *ListProducts.cshtml* Seite wird angezeigt und zeigt den neuen Datensatz.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-296">This time, the *ListProducts.cshtml* page is displayed and shows the new record.</span></span>

## <a name="updating-data-in-a-database"></a><span data-ttu-id="6d4f6-297">Aktualisieren von Daten in einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="6d4f6-297">Updating Data in a Database</span></span>

<span data-ttu-id="6d4f6-298">Nachdem Daten in eine Tabelle eingegeben wurde, müssen Sie möglicherweise zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-298">After data has been entered into a table, you might need to update it.</span></span> <span data-ttu-id="6d4f6-299">Dieses Verfahren wird gezeigt, wie zwei Seiten erstellen, die den Werten ähneln, die Sie zum Einfügen von Daten weiter oben erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-299">This procedure shows you how to create two pages that are similar to the ones you created for data insertion earlier.</span></span> <span data-ttu-id="6d4f6-300">Die erste Seite Produkte angezeigt und ermöglicht Benutzern, die eine ändern auswählen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-300">The first page displays products and lets users select one to change.</span></span> <span data-ttu-id="6d4f6-301">Die zweite Seite kann die Benutzer tatsächlich nehmen die Änderungen vor, und speichern Sie sie.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-301">The second page lets the users actually make the edits and save them.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="6d4f6-302">**Wichtige** In eine Produktionswebsite Sie in der Regel einschränken, wer darf hat, um die Daten zu ändern.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-302">**Important** In a production website, you typically restrict who's allowed to make changes to the data.</span></span> <span data-ttu-id="6d4f6-303">Informationen zum Einrichten der Mitgliedschaft und zu den Möglichkeiten zum Autorisieren von Benutzern für Aufgaben auf der Website finden Sie unter [Sicherheit hinzufügen und die Mitgliedschaft in einer ASP.NET Web Pages-Website](https://go.microsoft.com/fwlink/?LinkId=202904).</span><span class="sxs-lookup"><span data-stu-id="6d4f6-303">For information about how to set up membership and about ways to authorize users to perform tasks on the site, see [Adding Security and Membership to an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202904).</span></span>


1. <span data-ttu-id="6d4f6-304">Erstellen Sie eine neue CSHTML-Datei mit dem Namen der Website *EditProducts.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-304">In the website, create a new CSHTML file named *EditProducts.cshtml*.</span></span>
2. <span data-ttu-id="6d4f6-305">Ersetzen Sie das vorhandene Markup in der Datei durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-305">Replace the existing markup in the file with the following:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample10.cshtml)]

    <span data-ttu-id="6d4f6-306">Der einzige Unterschied zwischen dieser Seite und die *ListProducts.cshtml* Seite zuvor stammt, dass die HTML-Tabelle auf dieser Seite eine zusätzliche Spalte enthält, die zeigt eine **bearbeiten** Link.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-306">The only difference between this page and the *ListProducts.cshtml* page from earlier is that the HTML table in this page includes an extra column that displays an **Edit** link.</span></span> <span data-ttu-id="6d4f6-307">Wenn Sie diesen Link klicken, gelangen Sie Sie auf die *UpdateProducts.cshtml* -Seite (die Sie als Nächstes erstellen) in dem Sie den ausgewählten Datensatz bearbeiten können.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-307">When you click this link, it takes you to the *UpdateProducts.cshtml* page (which you'll create next) where you can edit the selected record.</span></span>

    <span data-ttu-id="6d4f6-308">Sehen Sie sich den Code, erstellt der **bearbeiten** Link:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-308">Look at the code that creates the **Edit** link:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample11.cshtml)]

    <span data-ttu-id="6d4f6-309">Dies erstellt eine HTML `<a>` Element, dessen `href` Attribut dynamisch festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-309">This creates an HTML `<a>` element whose `href` attribute is set dynamically.</span></span> <span data-ttu-id="6d4f6-310">Die `href` Attribut gibt an, die Seite angezeigt, wenn der Benutzer auf den Link klickt.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-310">The `href` attribute specifies the page to display when the user clicks the link.</span></span> <span data-ttu-id="6d4f6-311">Sie übergibt außerdem die `Id` Wert der aktuellen Zeile auf den Link.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-311">It also passes the `Id` value of the current row to the link.</span></span> <span data-ttu-id="6d4f6-312">Wenn die Seite ausgeführt wird, könnte die Seitenquelle Links wie diese enthalten:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-312">When the page runs, the page source might contain links like these:</span></span>

    [!code-html[Main](5-working-with-data/samples/sample12.html)]

    <span data-ttu-id="6d4f6-313">Beachten Sie, dass die `href` -Attributsatz zur `UpdateProducts/n`, wobei *n* ist eine Produkt an.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-313">Notice that the `href` attribute is set to `UpdateProducts/n`, where *n* is a product number.</span></span> <span data-ttu-id="6d4f6-314">Wenn ein Benutzer einen dieser Links klickt, wird die ausgegebene URL etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-314">When a user clicks one of these links, the resulting URL will look something like this:</span></span>

    `http://localhost:18816/UpdateProducts/6`

    <span data-ttu-id="6d4f6-315">Das heißt, werden die Produktnummer bearbeitet werden in der URL übergeben.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-315">In other words, the product number to be edited will be passed in the URL.</span></span>
3. <span data-ttu-id="6d4f6-316">Die Seite in einem Browser anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-316">View the page in a browser.</span></span> <span data-ttu-id="6d4f6-317">Die Seite zeigt die Daten in einem Format wie folgt:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-317">The page displays the data in a format like this:</span></span>

    ![[Image]](5-working-with-data/_static/image7.jpg)

    <span data-ttu-id="6d4f6-319">Als Nächstes erstellen Sie die Seite, mit dem Benutzer die Daten zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-319">Next, you'll create the page that lets users actually update the data.</span></span> <span data-ttu-id="6d4f6-320">Die Seite "Updates" umfasst eine Überprüfung der zum Überprüfen der Daten, die der Benutzer eingibt.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-320">The update page includes validation to validate the data that the user enters.</span></span> <span data-ttu-id="6d4f6-321">Auf der Seite Code macht z. B. sicher, dass für alle erforderlichen Spalten ein Wert eingegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-321">For example, code in the page makes sure that a value has been entered for all required columns.</span></span>
4. <span data-ttu-id="6d4f6-322">Erstellen Sie eine neue CSHTML-Datei mit dem Namen der Website *UpdateProducts.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-322">In the website, create a new CSHTML file named *UpdateProducts.cshtml*.</span></span>
5. <span data-ttu-id="6d4f6-323">Ersetzen Sie das vorhandene Markup in der Datei durch Folgendes.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-323">Replace the existing markup in the file with the following.</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample13.cshtml)]

    <span data-ttu-id="6d4f6-324">Der Hauptteil der Seite "enthält ein HTML-Formular, in dem ein Produkt angezeigt wird und in dem Sie Benutzer bearbeiten können.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-324">The body of the page contains an HTML form where a product is displayed and where users can edit it.</span></span> <span data-ttu-id="6d4f6-325">Um zum Anzeigen des Produkts zu erhalten, verwenden Sie die folgende SQL-Anweisung:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-325">To get the product to display, you use this SQL statement:</span></span>

    [!code-sql[Main](5-working-with-data/samples/sample14.sql)]

    <span data-ttu-id="6d4f6-326">Dadurch werden ausgewählt, das Produkt, dessen ID entspricht dem Wert, der übergeben, der `@0` Parameter.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-326">This will select the product whose ID matches the value that's passed in the `@0` parameter.</span></span> <span data-ttu-id="6d4f6-327">(Da *Id* ist die primary key- und aus diesem Grund muss eindeutig sein, kann nur ein Produktdatensatz jemals auf diese Weise ausgewählt werden.) Zum Abrufen der ID-Wert für die Übergabe dieser `Select` -Anweisung, lesen Sie den Wert, der auf der Seite "als Teil der URL übergeben wird, mithilfe der folgenden Syntax:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-327">(Because *Id* is the primary key and therefore must be unique, only one product record can ever be selected this way.) To get the ID value to pass to this `Select` statement, you can read the value that's passed to the page as part of the URL, using the following syntax:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample15.cs)]

    <span data-ttu-id="6d4f6-328">Um tatsächlich Produktdatensatz abzurufen, verwenden Sie die `QuerySingle` -Methode, die nur ein Datensatz zurückgegeben wird:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-328">To actually fetch the product record, you use the `QuerySingle` method, which will return just one record:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample16.cs)]

    <span data-ttu-id="6d4f6-329">Die einzelne Zeile zurückgegeben wird, in dem `row` Variable.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-329">The single row is returned into the `row` variable.</span></span> <span data-ttu-id="6d4f6-330">Sie können Daten aus jeder Spalte abzurufen und weisen Sie diese lokalen Variablen wie folgt:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-330">You can get data out of each column and assign it to local variables like this:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample17.cs)]

    <span data-ttu-id="6d4f6-331">In das Markup für das Formular werden diese Werte automatisch in einzelne Textfelder angezeigt, mithilfe von eingebettetem Code wie folgt:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-331">In the markup for the form, these values are displayed automatically in individual text boxes by using embedded code like the following:</span></span>

    [!code-html[Main](5-working-with-data/samples/sample18.html)]

    <span data-ttu-id="6d4f6-332">Dieser Teil des Codes zeigt Produktdatensatz aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-332">That part of the code displays the product record to be updated.</span></span> <span data-ttu-id="6d4f6-333">Nachdem der Datensatz angezeigt wurde, kann der Benutzer die einzelne Spalten bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-333">Once the record has been displayed, the user can edit individual columns.</span></span>

    <span data-ttu-id="6d4f6-334">Wenn der Benutzer das Formular übermittelt, indem Sie auf die **Update** Schaltfläche, den Code in der `if(IsPost)` -Block ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-334">When the user submits the form by clicking the **Update** button, the code in the `if(IsPost)` block runs.</span></span> <span data-ttu-id="6d4f6-335">Dadurch wird der Benutzer Werte aus der `Request` Objekt, speichert die Werte in Variablen und überprüft, dass jede Spalte gefüllt wurde.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-335">This gets the user's values from the `Request` object, stores the values in variables, and validates that each column has been filled in.</span></span> <span data-ttu-id="6d4f6-336">Wenn die Clusterüberprüfung erfolgreich war, erstellt der Code die folgende SQL-Update-Anweisung aus:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-336">If validation passes, the code creates the following SQL Update statement:</span></span>

    [!code-sql[Main](5-working-with-data/samples/sample19.sql)]

    <span data-ttu-id="6d4f6-337">In einer SQL `Update` -Anweisung geben Sie jede Spalte zu aktualisieren und den Wert auf festgelegt ist, dass.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-337">In a SQL `Update` statement, you specify each column to update and the value to set it to.</span></span> <span data-ttu-id="6d4f6-338">In diesem Code werden die Werte angegeben, über die Parameterplatzhalter `@0`, `@1`, `@2`und so weiter.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-338">In this code, the values are specified using the parameter placeholders `@0`, `@1`, `@2`, and so on.</span></span> <span data-ttu-id="6d4f6-339">(Wie oben erwähnt aus Sicherheitsgründen sollten Sie immer Werte für eine SQL­Anweisung übergeben mit Parametern.)</span><span class="sxs-lookup"><span data-stu-id="6d4f6-339">(As noted earlier, for security, you should always pass values to a SQL statement by using parameters.)</span></span>

    <span data-ttu-id="6d4f6-340">Beim Aufrufen der `db.Execute` -Methode, übergeben Sie die Variablen, die die Werte in der Reihenfolge enthalten, die die Parameter in der SQL-Anweisung entspricht:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-340">When you call the `db.Execute` method, you pass the variables that contain the values in the order that corresponds to the parameters in the SQL statement:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample20.cs)]

    <span data-ttu-id="6d4f6-341">Nach der `Update` Anweisung ausgeführt wurde, rufen Sie die folgende Methode, um den Benutzer zur Bearbeitungsseite zurückgeleitet:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-341">After the `Update` statement has been executed, you call the following method in order to redirect the user back to the edit page:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample21.cshtml)]

    <span data-ttu-id="6d4f6-342">Der Effekt ist, dass eine aktualisierte Liste der Daten in der Datenbank angezeigt, und der Benutzer ein anderes Produkt bearbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-342">The effect is that the user sees an updated listing of the data in the database and can edit another product.</span></span>
6. <span data-ttu-id="6d4f6-343">Speichern Sie die Seite.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-343">Save the page.</span></span>
7. <span data-ttu-id="6d4f6-344">Führen Sie die *EditProducts.cshtml* Seite (nicht die Update-Seite), und klicken Sie dann auf **bearbeiten** , wählen Sie ein Produkt zu bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-344">Run the *EditProducts.cshtml* page (not the update page) and then click **Edit** to select a product to edit.</span></span> <span data-ttu-id="6d4f6-345">Die *UpdateProducts.cshtml* Seite wird angezeigt, mit dem Datensatz, die Sie ausgewählt haben.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-345">The *UpdateProducts.cshtml* page is displayed, showing the record you selected.</span></span>

    ![[Image]](5-working-with-data/_static/image8.jpg)
8. <span data-ttu-id="6d4f6-347">Eine Änderung vornehmen, und klicken Sie auf **Update**.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-347">Make a change and click **Update**.</span></span> <span data-ttu-id="6d4f6-348">Die Liste der Produkte wird mit der aktualisierten Daten erneut angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-348">The products list is shown again with your updated data.</span></span>

## <a name="deleting-data-in-a-database"></a><span data-ttu-id="6d4f6-349">Löschen von Daten in einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="6d4f6-349">Deleting Data in a Database</span></span>

<span data-ttu-id="6d4f6-350">In diesem Abschnitt wird gezeigt, wie können Benutzer löschen Sie ein Produkt aus der *Produkt* Datenbanktabelle.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-350">This section shows how to let users delete a product from the *Product* database table.</span></span> <span data-ttu-id="6d4f6-351">Das Beispiel besteht aus zwei Seiten.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-351">The example consists of two pages.</span></span> <span data-ttu-id="6d4f6-352">Wählen Sie auf der ersten Seite Benutzer einen Datensatz zu löschen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-352">In the first page, users select a record to delete.</span></span> <span data-ttu-id="6d4f6-353">Der Datensatz gelöscht werden, wird in einer zweiten Seite angezeigt, mit dem sie bestätigen, dass sie den Datensatz löschen möchten.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-353">The record to be deleted is then displayed in a second page that lets them confirm that they want to delete the record.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="6d4f6-354">**Wichtige** In eine Produktionswebsite Sie in der Regel einschränken, wer darf hat, um die Daten zu ändern.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-354">**Important** In a production website, you typically restrict who's allowed to make changes to the data.</span></span> <span data-ttu-id="6d4f6-355">Informationen über das Einrichten von Mitgliedschaft und Methoden zum Autorisieren von Benutzer zum Ausführen von Aufgaben auf der Website finden Sie unter [Sicherheit hinzufügen und die Mitgliedschaft in einer ASP.NET Web Pages-Website](https://go.microsoft.com/fwlink/?LinkId=202904).</span><span class="sxs-lookup"><span data-stu-id="6d4f6-355">For information about how to set up membership and about ways to authorize user to perform tasks on the site, see [Adding Security and Membership to an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202904).</span></span>


1. <span data-ttu-id="6d4f6-356">Erstellen Sie eine neue CSHTML-Datei mit dem Namen der Website *ListProductsForDelete.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-356">In the website, create a new CSHTML file named *ListProductsForDelete.cshtml*.</span></span>
2. <span data-ttu-id="6d4f6-357">Ersetzen Sie das vorhandene Markup durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-357">Replace the existing markup with the following:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample22.cshtml)]

    <span data-ttu-id="6d4f6-358">Auf dieser Seite ähnelt der *EditProducts.cshtml* Seite von oben.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-358">This page is similar to the *EditProducts.cshtml* page from earlier.</span></span> <span data-ttu-id="6d4f6-359">Jedoch, anstatt ein **bearbeiten** Link für jedes Produkt, es zeigt eine **löschen** Link.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-359">However, instead of displaying an **Edit** link for each product, it displays a **Delete** link.</span></span> <span data-ttu-id="6d4f6-360">Die **löschen** Link wird erstellt, mit dem folgenden eingebetteten Code in das Markup:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-360">The **Delete** link is created using the following embedded code in the markup:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample23.cshtml)]

    <span data-ttu-id="6d4f6-361">Dies erstellt eine URL, die wie folgt aussieht, wenn Benutzer auf den Link klicken:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-361">This creates a URL that looks like this when users click the link:</span></span>

    `http://<server>/DeleteProduct/4`

    <span data-ttu-id="6d4f6-362">Die URL aufruft, eine Seite mit dem Namen *DeleteProduct.cshtml* (die Sie als Nächstes erstellen) und übergibt sie die ID des Produkts zu löschen (in diesem Fall 4).</span><span class="sxs-lookup"><span data-stu-id="6d4f6-362">The URL calls a page named *DeleteProduct.cshtml* (which you'll create next) and passes it the ID of the product to delete (here, 4).</span></span>
3. <span data-ttu-id="6d4f6-363">Speichern Sie die Datei, aber lassen Sie es offen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-363">Save the file, but leave it open.</span></span>
4. <span data-ttu-id="6d4f6-364">Erstellen Sie eine andere CHTML-Datei mit dem Namen *DeleteProduct.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-364">Create another CHTML file named *DeleteProduct.cshtml*.</span></span> <span data-ttu-id="6d4f6-365">Ersetzen Sie den vorhandenen Inhalt durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-365">Replace the existing content with the following:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample24.cshtml)]

    <span data-ttu-id="6d4f6-366">Auf dieser Seite wird aufgerufen, indem *ListProductsForDelete.cshtml* und ermöglicht Benutzern, vergewissern Sie sich, dass sie ein Produkt löschen möchten.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-366">This page is called by *ListProductsForDelete.cshtml* and lets users confirm that they want to delete a product.</span></span> <span data-ttu-id="6d4f6-367">Um das Produkt zu löschenden aufzulisten, erhalten Sie die ID des Produkts, löschen Sie die URL mithilfe des folgenden Codes:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-367">To list the product to be deleted, you get the ID of the product to delete from the URL using the following code:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample25.cs)]

    <span data-ttu-id="6d4f6-368">Anschließend müssen Sie die Seite den Benutzer auf eine Schaltfläche, um den Datensatz zu löschen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-368">The page then asks the user to click a button to actually delete the record.</span></span> <span data-ttu-id="6d4f6-369">Dies ist eine Sicherheitsmaßnahme wichtig: Wenn Sie sicherheitsrelevante Vorgänge in Ihrer Website aktualisieren oder Löschen von Daten ausführen, diese Vorgänge sollten immer erfolgen mithilfe eines POST-Vorgangs nicht auf einen GET-Vorgang.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-369">This is an important security measure: when you perform sensitive operations in your website like updating or deleting data, these operations should always be done using a POST operation, not a GET operation.</span></span> <span data-ttu-id="6d4f6-370">Wenn Ihre Website festgelegt ist, damit ein Löschvorgang mit einem GET-Vorgang ausgeführt werden kann, kann jeder Benutzer eine URL wie übergeben `http://<server>/DeleteProduct/4` und beliebige Änderungen aus der Datenbank zu löschen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-370">If your site is set up so that a delete operation can be performed using a GET operation, anyone can pass a URL like `http://<server>/DeleteProduct/4` and delete anything they want from your database.</span></span> <span data-ttu-id="6d4f6-371">Durch Hinzufügen der Bestätigung und Codierung der Seite, damit der Löschvorgang ausgeführt werden kann, nur mithilfe einer POST-Anforderung, fügen Sie ein Maß an Sicherheit auf Ihrer Website.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-371">By adding the confirmation and coding the page so that the deletion can be performed only by using a POST, you add a measure of security to your site.</span></span>

    <span data-ttu-id="6d4f6-372">Der tatsächliche Löschvorgang erfolgt mithilfe des folgenden Codes, die zunächst verifiziert, dass dies eine Post-Vorgang ist und die ID nicht leer ist:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-372">The actual delete operation is performed using the following code, which first confirms that this is a post operation and that the ID isn't empty:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample26.cs)]

    <span data-ttu-id="6d4f6-373">Der Code führt eine SQL­Anweisung, die löscht den angegebenen Datensatz und dann wieder an die Auflistung Seite leitet den Benutzer.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-373">The code runs a SQL statement that deletes the specified record and then redirects the user back to the listing page.</span></span>
5. <span data-ttu-id="6d4f6-374">Führen Sie *ListProductsForDelete.cshtml* in einem Browser.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-374">Run *ListProductsForDelete.cshtml* in a browser.</span></span>

    ![[Image]](5-working-with-data/_static/image9.jpg)
6. <span data-ttu-id="6d4f6-376">Klicken Sie auf die **löschen** Link, um eines der Produkte.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-376">Click the **Delete** link for one of the products.</span></span> <span data-ttu-id="6d4f6-377">Die *DeleteProduct.cshtml* Seite wird angezeigt, um sicherzustellen, dass Sie diesen Datensatz löschen möchten.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-377">The *DeleteProduct.cshtml* page is displayed to confirm that you want to delete that record.</span></span>
7. <span data-ttu-id="6d4f6-378">Klicken Sie auf die **löschen** Schaltfläche.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-378">Click the **Delete** button.</span></span> <span data-ttu-id="6d4f6-379">Produktdatensatz wird gelöscht, und die Seite wird mit einer aktualisierten Produktliste aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-379">The product record is deleted and the page is refreshed with an updated product listing.</span></span>

> [!TIP]
> 
> <a id="SB_ConnectingToADatabase"></a>
> ### <a name="connecting-to-a-database"></a><span data-ttu-id="6d4f6-380">Herstellen einer Verbindung mit einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="6d4f6-380">Connecting to a Database</span></span>
> 
> <span data-ttu-id="6d4f6-381">Sie können eine Verbindung mit einer Datenbank auf zwei Arten herstellen.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-381">You can connect to a database in two ways.</span></span> <span data-ttu-id="6d4f6-382">Der erste Schritt besteht im Verwenden der `Database.Open` Methode und den Namen der Datenbankdatei angeben (weniger der *.sdf* Erweiterung):</span><span class="sxs-lookup"><span data-stu-id="6d4f6-382">The first is to use the `Database.Open` method and to specify the name of the database file (less the *.sdf* extension):</span></span>
> 
> `var db = Database.Open("SmallBakery");`
> 
> <span data-ttu-id="6d4f6-383">Die `Open` Methode setzt voraus, dass die. *Sdf* Datei befindet sich in der Website *App\_Daten* Ordner.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-383">The `Open` method assumes that the .*sdf* file is in the website's *App\_Data* folder.</span></span> <span data-ttu-id="6d4f6-384">Dieser Ordner ist speziell für die Aufnahme von Daten dient.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-384">This folder is designed specifically for holding data.</span></span> <span data-ttu-id="6d4f6-385">Beispielsweise kann die erforderlichen Berechtigungen für die Website zum Lesen und Schreiben von Daten ermöglichen, und als eine Sicherheitsmaßnahme WebMatrix lässt keine Zugriff auf Dateien aus diesem Ordner.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-385">For example, it has appropriate permissions to allow the website to read and write data, and as a security measure, WebMatrix does not allow access to files from this folder.</span></span>
> 
> <span data-ttu-id="6d4f6-386">Die zweite Möglichkeit ist die Verwendung eine Verbindungszeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-386">The second way is to use a connection string.</span></span> <span data-ttu-id="6d4f6-387">Eine Verbindungszeichenfolge enthält Informationen zum Herstellen einer Verbindung mit einer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-387">A connection string contains information about how to connect to a database.</span></span> <span data-ttu-id="6d4f6-388">Dies kann einen Pfad einschließen, oder er kann den Namen des SQL Server-Datenbank auf einem lokalen oder remote-Server zusammen mit einem Benutzernamen und das Kennwort für die Verbindung zu diesem Server enthalten.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-388">This can include a file path, or it can include the name of a SQL Server database on a local or remote server, along with a user name and password to connect to that server.</span></span> <span data-ttu-id="6d4f6-389">(Wenn Sie Daten in einer zentral verwalteten Version von SQL Server speichern, verwenden z. B. auf einem Hostinganbieter-Website Sie immer eine Verbindungszeichenfolge an den Verbindungsinformationen zur Datenbank.)</span><span class="sxs-lookup"><span data-stu-id="6d4f6-389">(If you keep data in a centrally managed version of SQL Server, such as on a hosting provider's site, you always use a connection string to specify the database connection information.)</span></span>
> 
> <span data-ttu-id="6d4f6-390">In WebMatrix Verbindungszeichenfolgen werden in der Regel gespeichert in einer XML-Datei mit dem Namen *"Web.config"*. Wie der Name schon sagt, können Sie eine *"Web.config"* Datei im Stammverzeichnis der Website zum Speichern der Website-Konfigurationsinformationen, einschließlich Verbindungszeichenfolgen, die Ihre Website erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-390">In WebMatrix, connection strings are usually stored in an XML file named *Web.config*. As the name implies, you can use a *Web.config* file in the root of your website to store the site's configuration information, including any connection strings that your site might require.</span></span> <span data-ttu-id="6d4f6-391">Ein Beispiel für eine Verbindungszeichenfolge in einer *"Web.config"* Datei könnte wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-391">An example of a connection string in a *Web.config* file might look like the following:</span></span>
> 
> [!code-xml[Main](5-working-with-data/samples/sample27.xml)]
> 
> <span data-ttu-id="6d4f6-392">Im Beispiel zeigt die Verbindungszeichenfolge zu einer Datenbank in einer Instanz von SQL Server, die auf einem Server an einer beliebigen Stelle ausgeführt wird (im Gegensatz zu einer lokalen *.sdf* Datei).</span><span class="sxs-lookup"><span data-stu-id="6d4f6-392">In the example, the connection string points to a database in an instance of SQL Server that's running on a server somewhere (as opposed to a local *.sdf* file).</span></span> <span data-ttu-id="6d4f6-393">Sie müssten zu ersetzen, die entsprechenden Namen für `myServer` und `myDatabase`, und geben Sie Datenwerte von SQL Server-Anmeldung für `username` und `password`.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-393">You would need to substitute the appropriate names for `myServer` and `myDatabase`, and specify SQL Server login values for `username` and `password`.</span></span> <span data-ttu-id="6d4f6-394">(Die Werte für Benutzername und Kennwort sind nicht unbedingt identisch als Ihre Windows-Anmeldeinformationen oder die Werte, die von Ihrem Hostinganbieter Sie zum Anmelden an ihren Servern akzeptiert hat.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-394">(The username and password values are not necessarily the same as your Windows credentials or as the values that your hosting provider has given you for logging in to their servers.</span></span> <span data-ttu-id="6d4f6-395">Erkundigen Sie sich der Administrator für die genauen Werte, die Sie benötigen.)</span><span class="sxs-lookup"><span data-stu-id="6d4f6-395">Check with the administrator for the exact values you need.)</span></span>
> 
> <span data-ttu-id="6d4f6-396">Die `Database.Open` Methode ist flexibel, da Sie entweder den Namen einer Datenbank übergeben können *.sdf* Datei oder den Namen einer Verbindungszeichenfolge, die in gespeichert ist die *"Web.config"* Datei.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-396">The `Database.Open` method is flexible, because it lets you pass either the name of a database *.sdf* file or the name of a connection string that's stored in the *Web.config* file.</span></span> <span data-ttu-id="6d4f6-397">Im folgenden Beispiel wird das Herstellen einer Verbindung mit der Datenbank mithilfe der Verbindungszeichenfolge, die im vorherigen Beispiel veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="6d4f6-397">The following example shows how to connect to the database using the connection string illustrated in the previous example:</span></span>
> 
> [!code-cshtml[Main](5-working-with-data/samples/sample28.cshtml)]
> 
> <span data-ttu-id="6d4f6-398">Wie bereits erwähnt, die `Database.Open` Methode können Sie einen Datenbanknamen oder eine Verbindungszeichenfolge zu übergeben, und es werden verwendet.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-398">As noted, the `Database.Open` method lets you pass either a database name or a connection string, and it'll figure out which to use.</span></span> <span data-ttu-id="6d4f6-399">Dies ist sehr nützlich, bei der Bereitstellung (Veröffentlichung) Ihrer Website.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-399">This is very useful when you deploy (publish) your website.</span></span> <span data-ttu-id="6d4f6-400">Können Sie eine *.sdf* in der Datei die *App\_Daten* Ordner, wenn Sie entwickeln und Testen Ihrer Website.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-400">You can use an *.sdf* file in the *App\_Data* folder when you're developing and testing your site.</span></span> <span data-ttu-id="6d4f6-401">Wenn Sie Ihre Website auf einen Produktionsserver verschieben, können Sie eine Verbindungszeichenfolge im Verwenden der *"Web.config"* Datei mit dem gleichen Namen wie Ihre *.sdf* Datei, aber verweist auf des Hostinganbieters &#8212;alle ohne den Code ändern.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-401">Then when you move your site to a production server, you can use a connection string in the *Web.config* file that has the same name as your *.sdf* file but that points to the hosting provider's database &#8212; all without having to change your code.</span></span>
> 
> <span data-ttu-id="6d4f6-402">Abschließend, wenn Sie direkt mit einer Verbindungszeichenfolge arbeiten möchten, können rufen Sie die `Database.OpenConnectionString` Methode und übergeben es die tatsächliche Verbindungszeichenfolge statt nur den Namen eines in der *"Web.config"* Datei.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-402">Finally, if you want to work directly with a connection string, you can call the `Database.OpenConnectionString` method and pass it the actual connection string instead of just the name of one in the *Web.config* file.</span></span> <span data-ttu-id="6d4f6-403">Dies ist möglicherweise hilfreich in Situationen, in denen aus irgendeinem Grund Sie keinen Zugriff auf die Verbindungszeichenfolge haben (oder Werte, z. B. die *.sdf* Dateiname), bis die Seite ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-403">This might be useful in situations where for some reason you don't have access to the connection string (or values in it, such as the *.sdf* file name) until the page is running.</span></span> <span data-ttu-id="6d4f6-404">Allerdings in den meisten Szenarien können Sie `Database.Open` wie in diesem Artikel beschrieben.</span><span class="sxs-lookup"><span data-stu-id="6d4f6-404">However, for most scenarios, you can use `Database.Open` as described in this article.</span></span>


## <a name="additional-resources"></a><span data-ttu-id="6d4f6-405">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="6d4f6-405">Additional Resources</span></span>

- [<span data-ttu-id="6d4f6-406">SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="6d4f6-406">SQL Server Compact</span></span>](https://www.microsoft.com/sqlserver/2008/en/us/compact.aspx)
- [<span data-ttu-id="6d4f6-407">Herstellen einer Verbindung mit einer SQL Server- oder MySQL-Datenbank in WebMatrix</span><span class="sxs-lookup"><span data-stu-id="6d4f6-407">Connecting to a SQL Server or MySQL Database in WebMatrix</span></span>](https://go.microsoft.com/fwlink/?LinkId=208661)
- [<span data-ttu-id="6d4f6-408">Überprüfen der Benutzereingabe in ASP.NET Web Pages-Websites</span><span class="sxs-lookup"><span data-stu-id="6d4f6-408">Validating User Input in ASP.NET Web Pages Sites</span></span>](https://go.microsoft.com/fwlink/?LinkId=253002)
