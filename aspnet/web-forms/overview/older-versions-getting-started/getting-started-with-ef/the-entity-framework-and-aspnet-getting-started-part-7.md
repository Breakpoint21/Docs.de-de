---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-7
title: Erste Schritte mit Entity Framework 4.0-Datenbank zunächst und ASP.NET 4 Web Forms - Teil 7 | Microsoft Docs
author: tdykstra
description: Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mit dem Entity Framework. Die beispielanwendung ist...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: f8afb245-b705-419c-8790-0b295e90d5e2
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-7
msc.type: authoredcontent
ms.openlocfilehash: cb84f4f3e130fedb3e2f1a17d630767ff65bfa05
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-7"></a><span data-ttu-id="4e488-104">Erste Schritte mit Entity Framework 4.0-Datenbank zunächst und ASP.NET 4 WebForms - Teil 7</span><span class="sxs-lookup"><span data-stu-id="4e488-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 7</span></span>
====================
<span data-ttu-id="4e488-105">durch [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="4e488-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="4e488-106">Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mit dem Entity Framework 4.0 und Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="4e488-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="4e488-107">Informationen über die Reihe von Lernprogrammen finden Sie unter [im ersten Lernprogramm, in der Reihe](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="4e488-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="using-stored-procedures"></a><span data-ttu-id="4e488-108">Verwenden von gespeicherten Prozeduren</span><span class="sxs-lookup"><span data-stu-id="4e488-108">Using Stored Procedures</span></span>

<span data-ttu-id="4e488-109">Im vorherigen Lernprogramm implementieren Sie eine Tabelle pro Hierarchie Vererbungsmuster.</span><span class="sxs-lookup"><span data-stu-id="4e488-109">In the previous tutorial you implemented a table-per-hierarchy inheritance pattern.</span></span> <span data-ttu-id="4e488-110">In diesem Lernprogramm erfahren Sie, wie Sie gespeicherte Prozeduren verwenden, um mehr Kontrolle über Zugriff auf die Datenbank zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="4e488-110">This tutorial will show you how to use stored procedures to gain more control over database access.</span></span>

<span data-ttu-id="4e488-111">Das Entity Framework können Sie angeben, dass gespeicherte Prozeduren für den Datenbankzugriff verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="4e488-111">The Entity Framework lets you specify that it should use stored procedures for database access.</span></span> <span data-ttu-id="4e488-112">Für jeden Entitätstyp können Sie eine gespeicherte Prozedur für erstellen, aktualisieren oder Löschen von Entitäten des Typs verwenden angeben.</span><span class="sxs-lookup"><span data-stu-id="4e488-112">For any entity type, you can specify a stored procedure to use for creating, updating, or deleting entities of that type.</span></span> <span data-ttu-id="4e488-113">Anschließend können Sie in das Datenmodell Verweise auf gespeicherte Prozeduren hinzufügen, die Sie verwenden können, um Aufgaben wie das Abrufen von Gruppen von Entitäten.</span><span class="sxs-lookup"><span data-stu-id="4e488-113">Then in the data model you can add references to stored procedures that you can use to perform tasks such as retrieving sets of entities.</span></span>

<span data-ttu-id="4e488-114">Verwenden von gespeicherten Prozeduren besteht eine häufige Anforderung für den Datenbankzugriff.</span><span class="sxs-lookup"><span data-stu-id="4e488-114">Using stored procedures is a common requirement for database access.</span></span> <span data-ttu-id="4e488-115">In einigen Fällen kann ein Datenbankadministrator erforderlich gespeicherte Prozeduren aus Sicherheitsgründen jeglicher Datenbankzugriff durchlaufen.</span><span class="sxs-lookup"><span data-stu-id="4e488-115">In some cases a database administrator may require that all database access go through stored procedures for security reasons.</span></span> <span data-ttu-id="4e488-116">In anderen Fällen möchten Sie möglicherweise von Geschäftslogik in einige der Prozesse erstellen, die das Entity Framework verwendet, wenn die Datenbank aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="4e488-116">In other cases you may want to build business logic into some of the processes that the Entity Framework uses when it updates the database.</span></span> <span data-ttu-id="4e488-117">Wenn eine Entität gelöscht wird sollten Sie es auf eine Datenbank "Archive" kopieren.</span><span class="sxs-lookup"><span data-stu-id="4e488-117">For example, whenever an entity is deleted you might want to copy it to an archive database.</span></span> <span data-ttu-id="4e488-118">Oder wenn eine Zeile aktualisiert wird Sie möglicherweise einer Zeile in einer Protokollierungstabelle von aufgezeichneten schreiben möchten, die Änderung vorgenommen hat.</span><span class="sxs-lookup"><span data-stu-id="4e488-118">Or whenever a row is updated you might want to write a row to a logging table that records who made the change.</span></span> <span data-ttu-id="4e488-119">Sie können diese Arten von Aufgaben in einer gespeicherten Prozedur ausführen, die aufgerufen wird, wenn das Entity Framework eine Entität löscht oder eine Entität aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="4e488-119">You can perform these kinds of tasks in a stored procedure that's called whenever the Entity Framework deletes an entity or updates an entity.</span></span>

<span data-ttu-id="4e488-120">Wie das vorherige Lernprogramm erstellen Sie keine neuen Seiten.</span><span class="sxs-lookup"><span data-stu-id="4e488-120">As in the previous tutorial, you'll not create any new pages.</span></span> <span data-ttu-id="4e488-121">Stattdessen ändern die Methode Sie, die das Entity Framework für einige der Seiten, die auf die Datenbank zugreift Sie bereits erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="4e488-121">Instead, you'll change the way the Entity Framework accesses the database for some of the pages you already created.</span></span>

<span data-ttu-id="4e488-122">In diesem Lernprogramm erstellen Sie gespeicherte Prozeduren in der Datenbank für das Einfügen von `Student` und `Instructor` Entitäten.</span><span class="sxs-lookup"><span data-stu-id="4e488-122">In this tutorial you'll create stored procedures in the database for inserting `Student` and `Instructor` entities.</span></span> <span data-ttu-id="4e488-123">Fügen Sie sie in das Datenmodell, und Sie müssen angeben, dass für das Entity Framework sie zum Hinzufügen von `Student` und `Instructor` Entitäten in der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="4e488-123">You'll add them to the data model, and you'll specify that the Entity Framework should use them for adding `Student` and `Instructor` entities to the database.</span></span> <span data-ttu-id="4e488-124">Erstellen Sie eine gespeicherte Prozedur, die Sie, zum Abrufen verwenden können auch `Course` Entitäten.</span><span class="sxs-lookup"><span data-stu-id="4e488-124">You'll also create a stored procedure that you can use to retrieve `Course` entities.</span></span>

## <a name="creating-stored-procedures-in-the-database"></a><span data-ttu-id="4e488-125">Erstellen von gespeicherten Prozeduren in der Datenbank</span><span class="sxs-lookup"><span data-stu-id="4e488-125">Creating Stored Procedures in the Database</span></span>

<span data-ttu-id="4e488-126">(Bei Verwendung der *School.mdf* Datei aus dem Projekt zum Download für dieses Lernprogramm zur Verfügung, können Sie diesen Abschnitt überspringen, da die gespeicherten Prozeduren vorhanden.)</span><span class="sxs-lookup"><span data-stu-id="4e488-126">(If you're using the *School.mdf* file from the project available for download with this tutorial, you can skip this section because the stored procedures already exist.)</span></span>

<span data-ttu-id="4e488-127">In **Server-Explorer**, erweitern Sie *School.mdf*, mit der rechten Maustaste **gespeicherte Prozeduren**, und wählen Sie **neue gespeicherte Prozedur hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="4e488-127">In **Server Explorer**, expand *School.mdf*, right-click **Stored Procedures**, and select **Add New Stored Procedure**.</span></span>

<span data-ttu-id="4e488-128">[![image15](the-entity-framework-and-aspnet-getting-started-part-7/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="4e488-128">[![image15](the-entity-framework-and-aspnet-getting-started-part-7/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image1.png)</span></span>

<span data-ttu-id="4e488-129">Kopieren Sie die folgenden SQL-Anweisungen, und fügen Sie sie in der gespeicherten Prozedur ein und Ersetzen Sie dabei das Gerüst eines gespeicherte Prozedur.</span><span class="sxs-lookup"><span data-stu-id="4e488-129">Copy the following SQL statements and paste them into the stored procedure window, replacing the skeleton stored procedure.</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample1.sql)]

<span data-ttu-id="4e488-130">[![image14](the-entity-framework-and-aspnet-getting-started-part-7/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="4e488-130">[![image14](the-entity-framework-and-aspnet-getting-started-part-7/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image3.png)</span></span>

<span data-ttu-id="4e488-131">`Student` Entitäten verfügen über vier Eigenschaften: `PersonID`, `LastName`, `FirstName`, und `EnrollmentDate`.</span><span class="sxs-lookup"><span data-stu-id="4e488-131">`Student` entities have four properties: `PersonID`, `LastName`, `FirstName`, and `EnrollmentDate`.</span></span> <span data-ttu-id="4e488-132">Generiert die Datenbank automatisch den ID-Wert, und die gespeicherte Prozedur akzeptiert Parameter für die anderen drei.</span><span class="sxs-lookup"><span data-stu-id="4e488-132">The database generates the ID value automatically, and the stored procedure accepts parameters for the other three.</span></span> <span data-ttu-id="4e488-133">Die gespeicherte Prozedur gibt den Wert des Schlüssels für die neue Zeile Datensatz zurück, sodass Entity Framework nachverfolgen, die in der Version der Entität von können, die im Arbeitsspeicher behält.</span><span class="sxs-lookup"><span data-stu-id="4e488-133">The stored procedure returns the value of the new row's record key so that the Entity Framework can keep track of that in the version of the entity it keeps in memory.</span></span>

<span data-ttu-id="4e488-134">Speichern Sie und schließen Sie das Fenster für die gespeicherte Prozedur.</span><span class="sxs-lookup"><span data-stu-id="4e488-134">Save and close the stored procedure window.</span></span>

<span data-ttu-id="4e488-135">Erstellen einer `InsertInstructor` gespeicherte Prozedur auf die gleiche Weise, die mithilfe der folgenden SQL-Anweisungen:</span><span class="sxs-lookup"><span data-stu-id="4e488-135">Create an `InsertInstructor` stored procedure in the same manner, using the following SQL statements:</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample2.sql)]

<span data-ttu-id="4e488-136">Erstellen Sie `Update` gespeicherten Systemprozeduren für die `Student` und `Instructor` Entitäten auch.</span><span class="sxs-lookup"><span data-stu-id="4e488-136">Create `Update` stored procedures for `Student` and `Instructor` entities also.</span></span> <span data-ttu-id="4e488-137">(Die Datenbank bereits eine `DeletePerson` gespeicherte Prozedur, die für beide funktionieren `Instructor` und `Student` Entitäten.)</span><span class="sxs-lookup"><span data-stu-id="4e488-137">(The database already has a `DeletePerson` stored procedure which will work for both `Instructor` and `Student` entities.)</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample3.sql)]

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample4.sql)]

<span data-ttu-id="4e488-138">In diesem Lernprogramm ordnen Sie alle drei Funktionen – INSERT-, Update- und Delete – für jeden Entitätstyp.</span><span class="sxs-lookup"><span data-stu-id="4e488-138">In this tutorial you'll map all three functions -- insert, update, and delete -- for each entity type.</span></span> <span data-ttu-id="4e488-139">Entity Framework, Version 4 können Sie nur einen zuordnen oder zwei dieser Funktionen zu gespeicherten Prozeduren ohne Zuordnung, die anderen, mit einer Ausnahme: Wenn Sie die Update-Funktion, aber nicht die Delete-Funktion zugeordnet sind, das Entity Framework löst eine Ausnahme bei der Sie der Versuch, eine Entität zu löschen.</span><span class="sxs-lookup"><span data-stu-id="4e488-139">The Entity Framework version 4 allows you to map just one or two of these functions to stored procedures without mapping the others, with one exception: if you map the update function but not the delete function, the Entity Framework will throw an exception when you attempt to delete an entity.</span></span> <span data-ttu-id="4e488-140">In Entity Framework, Version 3.5, Sie keine viel Flexibilität bei der Zuordnung gespeicherter Prozeduren: Wenn Sie eine bestimmte Funktion zugeordnet waren Sie ordnen Sie alle drei erforderlich.</span><span class="sxs-lookup"><span data-stu-id="4e488-140">In the Entity Framework version 3.5, you did not have this much flexibility in mapping stored procedures: if you mapped one function you were required to map all three.</span></span>

<span data-ttu-id="4e488-141">Um eine gespeicherte Prozedur zu erstellen, die Daten aktualisiert, sondern liest, erstellen Sie eine, die alle auswählt `Course` Entitäten, die mithilfe der folgenden SQL-Anweisungen:</span><span class="sxs-lookup"><span data-stu-id="4e488-141">To create a stored procedure that reads rather than updates data, create one that selects all `Course` entities, using the following SQL statements:</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample5.sql)]

## <a name="adding-the-stored-procedures-to-the-data-model"></a><span data-ttu-id="4e488-142">Die gespeicherten Prozeduren hinzufügen in das Datenmodell</span><span class="sxs-lookup"><span data-stu-id="4e488-142">Adding the Stored Procedures to the Data Model</span></span>

<span data-ttu-id="4e488-143">Die gespeicherten Prozeduren werden jetzt in der Datenbank definiert, aber sie müssen hinzugefügt werden, in das Datenmodell, um sie zu Entity Framework verfügbar zu machen.</span><span class="sxs-lookup"><span data-stu-id="4e488-143">The stored procedures are now defined in the database, but they must be added to the data model to make them available to the Entity Framework.</span></span> <span data-ttu-id="4e488-144">Open *SchoolModel.edmx*mit der rechten Maustaste auf die Entwurfsoberfläche, und wählen Sie **Modell aus der Datenbank aktualisieren**.</span><span class="sxs-lookup"><span data-stu-id="4e488-144">Open *SchoolModel.edmx*, right-click the design surface, and select **Update Model from Database**.</span></span> <span data-ttu-id="4e488-145">In der **hinzufügen** auf der Registerkarte die **Datenbankobjekte auswählen** Dialogfeld erweitern Sie **gespeicherte Prozeduren**, wählen Sie die neu erstellten gespeicherten Prozeduren und die `DeletePerson` gespeicherte Prozedur, und klicken Sie dann auf **Fertig stellen**.</span><span class="sxs-lookup"><span data-stu-id="4e488-145">In the **Add** tab of the **Choose Your Database Objects** dialog box, expand **Stored Procedures**, select the newly created stored procedures and the `DeletePerson` stored procedure, and then click **Finish**.</span></span>

<span data-ttu-id="4e488-146">[![image20](the-entity-framework-and-aspnet-getting-started-part-7/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="4e488-146">[![image20](the-entity-framework-and-aspnet-getting-started-part-7/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image5.png)</span></span>

## <a name="mapping-the-stored-procedures"></a><span data-ttu-id="4e488-147">Zuordnen von gespeicherten Prozeduren</span><span class="sxs-lookup"><span data-stu-id="4e488-147">Mapping the Stored Procedures</span></span>

<span data-ttu-id="4e488-148">Im Data Model-Designer mit der Maustaste die `Student` Entität, und wählen **Zuordnung der gespeicherten Prozedur**.</span><span class="sxs-lookup"><span data-stu-id="4e488-148">In the data model designer, right-click the `Student` entity and select **Stored Procedure Mapping**.</span></span>

<span data-ttu-id="4e488-149">[![image21](the-entity-framework-and-aspnet-getting-started-part-7/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="4e488-149">[![image21](the-entity-framework-and-aspnet-getting-started-part-7/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image7.png)</span></span>

<span data-ttu-id="4e488-150">Die **Mappingdetails** Fenster angezeigt wird, in dem Sie gespeicherte Prozeduren angeben können, die das Entity Framework zum Einfügen, aktualisieren und Löschen von Entitäten dieses Typs verwenden soll.</span><span class="sxs-lookup"><span data-stu-id="4e488-150">The **Mapping Details** window appears, in which you can specify stored procedures that the Entity Framework should use for inserting, updating, and deleting entities of this type.</span></span>

<span data-ttu-id="4e488-151">[![image22](the-entity-framework-and-aspnet-getting-started-part-7/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="4e488-151">[![image22](the-entity-framework-and-aspnet-getting-started-part-7/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image9.png)</span></span>

<span data-ttu-id="4e488-152">Legen Sie die **einfügen** -Funktion **InsertStudent**.</span><span class="sxs-lookup"><span data-stu-id="4e488-152">Set the **Insert** function to **InsertStudent**.</span></span> <span data-ttu-id="4e488-153">Das Fenster zeigt eine Liste der Parameter der gespeicherten Prozedur, von die jeder eine Entitätseigenschaft zugeordnet werden muss.</span><span class="sxs-lookup"><span data-stu-id="4e488-153">The window shows a list of stored procedure parameters, each of which must be mapped to an entity property.</span></span> <span data-ttu-id="4e488-154">Zwei Methoden werden automatisch zugeordnet, da die Namen identisch sind.</span><span class="sxs-lookup"><span data-stu-id="4e488-154">Two of these are mapped automatically because the names are the same.</span></span> <span data-ttu-id="4e488-155">Es ist keine Eigenschaft der Entität mit dem Namen `FirstName`, daher müssen Sie manuell auswählen `FirstMidName` aus einer Dropdown-Liste, die verfügbare Entitätsklasse Eigenschaften anzeigt.</span><span class="sxs-lookup"><span data-stu-id="4e488-155">There's no entity property named `FirstName`, so you must manually select `FirstMidName` from a drop-down list that shows available entity properties.</span></span> <span data-ttu-id="4e488-156">(Dies ist, da Sie den Namen des geändert die `FirstName` Eigenschaft `FirstMidName` im ersten Lernprogramm.)</span><span class="sxs-lookup"><span data-stu-id="4e488-156">(This is because you changed the name of the `FirstName` property to `FirstMidName` in the first tutorial.)</span></span>

<span data-ttu-id="4e488-157">[![image23](the-entity-framework-and-aspnet-getting-started-part-7/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="4e488-157">[![image23](the-entity-framework-and-aspnet-getting-started-part-7/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image11.png)</span></span>

<span data-ttu-id="4e488-158">In der gleichen **Mappingdetails** Fenster, die Zuordnung der `Update` -Funktion die `UpdateStudent` gespeicherte Prozedur (Stellen Sie sicher, dass Sie angeben `FirstMidName` als Parameterwert für `FirstName`, wie Sie für die `Insert` gespeicherte Systemprozedur) und die `Delete` -Funktion die `DeletePerson` gespeicherte Prozedur.</span><span class="sxs-lookup"><span data-stu-id="4e488-158">In the same **Mapping Details** window, map the `Update` function to the `UpdateStudent` stored procedure (make sure you specify `FirstMidName` as the parameter value for `FirstName`, as you did for the `Insert` stored procedure) and the `Delete` function to the `DeletePerson` stored procedure.</span></span>

<span data-ttu-id="4e488-159">[![image01](the-entity-framework-and-aspnet-getting-started-part-7/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="4e488-159">[![image01](the-entity-framework-and-aspnet-getting-started-part-7/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image13.png)</span></span>

<span data-ttu-id="4e488-160">Führen Sie dasselbe Verfahren zum Zuordnen der INSERT-, Update- und Delete-Prozeduren für Lehrkräfte auf die `Instructor` Entität.</span><span class="sxs-lookup"><span data-stu-id="4e488-160">Follow the same procedure to map the insert, update, and delete stored procedures for instructors to the `Instructor` entity.</span></span>

<span data-ttu-id="4e488-161">[![image02](the-entity-framework-and-aspnet-getting-started-part-7/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="4e488-161">[![image02](the-entity-framework-and-aspnet-getting-started-part-7/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image15.png)</span></span>

<span data-ttu-id="4e488-162">Für gespeicherte Prozeduren, die statt der Updatedaten gelesen werden, verwenden Sie die **Modellbrowser** Fenster aus, um die gespeicherte Prozedur auf die Entität zuordnen Geben Sie ihn zurück.</span><span class="sxs-lookup"><span data-stu-id="4e488-162">For stored procedures that read rather than update data, you use the **Model Browser** window to map the stored procedure to the entity type it returns.</span></span> <span data-ttu-id="4e488-163">Im Data Model-Designer mit der Maustaste des Entwurfs, die Entwurfsoberfläche, und wählen **Modellbrowser**.</span><span class="sxs-lookup"><span data-stu-id="4e488-163">In the data model designer, right-click the design surface and select **Model Browser**.</span></span> <span data-ttu-id="4e488-164">Öffnen Sie die **SchoolModel.Store** Knoten, und öffnen Sie dann die **gespeicherte Prozeduren** Knoten.</span><span class="sxs-lookup"><span data-stu-id="4e488-164">Open the **SchoolModel.Store** node and then open the **Stored Procedures** node.</span></span> <span data-ttu-id="4e488-165">Klicken Sie dann mit der rechten Maustaste die `GetCourses` gespeicherte Prozedur, und wählen Sie **Funktionsimport hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="4e488-165">Then right-click the `GetCourses` stored procedure and select **Add Function Import**.</span></span>

<span data-ttu-id="4e488-166">[![image24](the-entity-framework-and-aspnet-getting-started-part-7/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="4e488-166">[![image24](the-entity-framework-and-aspnet-getting-started-part-7/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image17.png)</span></span>

<span data-ttu-id="4e488-167">In der **Funktionsimport hinzufügen** Dialogfeld unter **gibt eine Auflistung von** wählen **Entitäten**, und wählen Sie dann `Course` als den Entitätstyp zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="4e488-167">In the **Add Function Import** dialog box, under **Returns a Collection Of** select **Entities**, and then select `Course` as the entity type returned.</span></span> <span data-ttu-id="4e488-168">Wenn Sie fertig sind, klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="4e488-168">When you're done, click **OK**.</span></span> <span data-ttu-id="4e488-169">Speichern und schließen Sie die *EDMX* Datei.</span><span class="sxs-lookup"><span data-stu-id="4e488-169">Save and close the *.edmx* file.</span></span>

<span data-ttu-id="4e488-170">[![image25](the-entity-framework-and-aspnet-getting-started-part-7/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="4e488-170">[![image25](the-entity-framework-and-aspnet-getting-started-part-7/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image19.png)</span></span>

## <a name="using-insert-update-and-delete-stored-procedures"></a><span data-ttu-id="4e488-171">Verwenden von Insert, aktualisieren und Löschen von gespeicherten Prozeduren</span><span class="sxs-lookup"><span data-stu-id="4e488-171">Using Insert, Update, and Delete Stored Procedures</span></span>

<span data-ttu-id="4e488-172">Gespeicherte Prozeduren zum Einfügen, aktualisieren und Löschen von Daten werden vom Entity Framework automatisch verwendet, nachdem Sie das Datenmodell hinzugefügt und diese zu den entsprechenden Entitäten zugeordnet haben.</span><span class="sxs-lookup"><span data-stu-id="4e488-172">Stored procedures to insert, update, and delete data are used by the Entity Framework automatically after you've added them to the data model and mapped them to the appropriate entities.</span></span> <span data-ttu-id="4e488-173">Sie können jetzt ausführen der *StudentsAdd.aspx* Seite und jedes Mal, wenn Sie einen neuen Studenten erstellt haben, wird das Entity Framework verwendet die `InsertStudent` gespeicherte Prozedur, um die neue Zeile hinzuzufügen der `Student` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="4e488-173">You can now run the *StudentsAdd.aspx* page, and every time you create a new student, the Entity Framework will use the `InsertStudent` stored procedure to add the new row to the `Student` table.</span></span>

<span data-ttu-id="4e488-174">[![image03](the-entity-framework-and-aspnet-getting-started-part-7/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="4e488-174">[![image03](the-entity-framework-and-aspnet-getting-started-part-7/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image21.png)</span></span>

<span data-ttu-id="4e488-175">Führen Sie die *Students.aspx* Seite und den neuen Studenten in der Liste angezeigt.</span><span class="sxs-lookup"><span data-stu-id="4e488-175">Run the *Students.aspx* page and the new student appears in the list.</span></span>

<span data-ttu-id="4e488-176">[![image04](the-entity-framework-and-aspnet-getting-started-part-7/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="4e488-176">[![image04](the-entity-framework-and-aspnet-getting-started-part-7/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image23.png)</span></span>

<span data-ttu-id="4e488-177">Ändern Sie den Namen, um sicherzustellen, dass die Update-Funktion, und löschen Sie dann die Studenten, um sicherzustellen, dass der Delete-Funktion funktioniert.</span><span class="sxs-lookup"><span data-stu-id="4e488-177">Change the name to verify that the update function works, and then delete the student to verify that the delete function works.</span></span>

<span data-ttu-id="4e488-178">[![image05](the-entity-framework-and-aspnet-getting-started-part-7/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="4e488-178">[![image05](the-entity-framework-and-aspnet-getting-started-part-7/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image25.png)</span></span>

## <a name="using-select-stored-procedures"></a><span data-ttu-id="4e488-179">Verwenden von Select gespeicherten Prozeduren</span><span class="sxs-lookup"><span data-stu-id="4e488-179">Using Select Stored Procedures</span></span>

<span data-ttu-id="4e488-180">Das Entity Framework nicht automatisch aus gespeicherten Prozeduren z. B. `GetCourses`, und Sie können nicht mit der `EntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="4e488-180">The Entity Framework does not automatically run stored procedures such as `GetCourses`, and you cannot use them with the `EntityDataSource` control.</span></span> <span data-ttu-id="4e488-181">Um sie zu verwenden, rufen Sie sie aus Code ein.</span><span class="sxs-lookup"><span data-stu-id="4e488-181">To use them, you call them from code.</span></span>

<span data-ttu-id="4e488-182">Öffnen der *InstructorsCourses.aspx.cs* Datei.</span><span class="sxs-lookup"><span data-stu-id="4e488-182">Open the *InstructorsCourses.aspx.cs* file.</span></span> <span data-ttu-id="4e488-183">Die `PopulateDropDownLists` Methode verwendet eine LINQ-to-Entities-Abfrage, um alle Kurs Entitäten abgerufen werden, damit sie die Liste durchlaufen und bestimmen, welche ein Kursleiter zugewiesen wird und welche nicht zugewiesen werden kann:</span><span class="sxs-lookup"><span data-stu-id="4e488-183">The `PopulateDropDownLists` method uses a LINQ-to-Entities query to retrieve all course entities so that it can loop through the list and determine which ones an instructor is assigned to and which ones are unassigned:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample6.cs)]

<span data-ttu-id="4e488-184">Ersetzen Sie dies durch den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="4e488-184">Replace this with the following code:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample7.cs)]

<span data-ttu-id="4e488-185">Die Seite nun verwendet der `GetCourses` gespeicherte Prozedur beim Abrufen der Liste aller Kurse.</span><span class="sxs-lookup"><span data-stu-id="4e488-185">The page now uses the `GetCourses` stored procedure to retrieve the list of all courses.</span></span> <span data-ttu-id="4e488-186">Führen Sie die Seite, um sicherzustellen, dass er funktioniert es hat sich nichts geändert.</span><span class="sxs-lookup"><span data-stu-id="4e488-186">Run the page to verify that it works as it did before.</span></span>

<span data-ttu-id="4e488-187">(Navigationseigenschaften von Entitäten, die abgerufen, indem eine gespeicherte Prozedur können mit den Daten im Zusammenhang mit diesen Entitäten, die je nach nicht automatisch aufgefüllt `ObjectContext` Standardeinstellungen.</span><span class="sxs-lookup"><span data-stu-id="4e488-187">(Navigation properties of entities retrieved by a stored procedure might not be automatically populated with the data related to those entities, depending on `ObjectContext` default settings.</span></span> <span data-ttu-id="4e488-188">Weitere Informationen finden Sie unter [Laden von verknüpften Objekten](https://msdn.microsoft.com/library/bb896272.aspx) in der MSDN Library.)</span><span class="sxs-lookup"><span data-stu-id="4e488-188">For more information, see [Loading Related Objects](https://msdn.microsoft.com/library/bb896272.aspx) in the MSDN Library.)</span></span>

<span data-ttu-id="4e488-189">In den nächsten Lernprogrammen erfahren Sie, wie Dynamic Data-Funktionen zu verwenden, um das Programm und Testen von Formatierung und Validierung Regeln erleichtern.</span><span class="sxs-lookup"><span data-stu-id="4e488-189">In the next tutorial, you'll learn how to use Dynamic Data functionality to make it easier to program and test data formatting and validation rules.</span></span> <span data-ttu-id="4e488-190">Statt anzugeben, auf jeder Webseite Regeln wie z. B. Formatzeichenfolgen Daten und davon, ob ein Feld erforderlich ist, können Sie diese Regeln in Daten darin enthaltenen Modellmetadaten angeben und sie automatisch auf jeder Seite angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="4e488-190">Instead of specifying on each web page rules such as data format strings and whether or not a field is required, you can specify such rules in data model metadata and they're automatically applied on every page.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4e488-191">[Zurück](the-entity-framework-and-aspnet-getting-started-part-6.md)
> [Weiter](the-entity-framework-and-aspnet-getting-started-part-8.md)</span><span class="sxs-lookup"><span data-stu-id="4e488-191">[Previous](the-entity-framework-and-aspnet-getting-started-part-6.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-8.md)</span></span>
