---
uid: mvc/overview/getting-started/getting-started-with-ef-using-mvc/advanced-entity-framework-scenarios-for-an-mvc-web-application
title: "Erweiterte Szenarien für Entity Framework 6 für ein MVC 5-Web-Anwendung (12 12) | Microsoft Docs"
author: tdykstra
description: Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET MVC 5-Anwendungen, die mit dem Entity Framework 6 Code First und Visual Studio erstellen...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/08/2014
ms.topic: article
ms.assetid: f35a9b0c-49ef-4cde-b06d-19d1543feb0b
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/getting-started/getting-started-with-ef-using-mvc/advanced-entity-framework-scenarios-for-an-mvc-web-application
msc.type: authoredcontent
ms.openlocfilehash: 85276377671b96e65406639c8584d9ebf8d77ff7
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/24/2018
---
<a name="advanced-entity-framework-6-scenarios-for-an-mvc-5-web-application-12-of-12"></a><span data-ttu-id="d80fd-103">Erweiterte Entity Framework 6 Szenarien für ein MVC 5-Web-Anwendung (12 12)</span><span class="sxs-lookup"><span data-stu-id="d80fd-103">Advanced Entity Framework 6 Scenarios for an MVC 5 Web Application (12 of 12)</span></span>
====================
<span data-ttu-id="d80fd-104">Durch [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="d80fd-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="d80fd-105">[Herunterladen des abgeschlossenen Projekts](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) oder [PDF herunterladen](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span><span class="sxs-lookup"><span data-stu-id="d80fd-105">[Download Completed Project](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) or [Download PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span></span>

> <span data-ttu-id="d80fd-106">Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET MVC 5-Anwendungen, die mit dem Entity Framework 6 Code First und Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="d80fd-106">The Contoso University sample web application demonstrates how to create ASP.NET MVC 5 applications using the Entity Framework 6 Code First and Visual Studio 2013.</span></span> <span data-ttu-id="d80fd-107">Informationen über die Reihe von Lernprogrammen finden Sie unter [im ersten Lernprogramm, in der Reihe](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="d80fd-107">For information about the tutorial series, see [the first tutorial in the series](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span>


<span data-ttu-id="d80fd-108">Im vorherigen Lernprogramm implementiert Sie Tabelle pro Hierarchie Vererbung.</span><span class="sxs-lookup"><span data-stu-id="d80fd-108">In the previous tutorial you implemented table-per-hierarchy inheritance.</span></span> <span data-ttu-id="d80fd-109">Dieses Lernprogramm enthält verschiedene Themen, in denen sind nützlich sein, wenn Sie die Grundlagen des Entwickelns von PHP-Webanwendungen, die mithilfe von Entity Framework Code First hinausgehen beachten führt.</span><span class="sxs-lookup"><span data-stu-id="d80fd-109">This tutorial includes introduces several topics that are useful to be aware of when you go beyond the basics of developing ASP.NET web applications that use Entity Framework Code First.</span></span> <span data-ttu-id="d80fd-110">Schrittweise Anweisungen führt Sie durch den Code und mithilfe von Visual Studio für die folgenden Themen:</span><span class="sxs-lookup"><span data-stu-id="d80fd-110">Step-by-step instructions walk you through the code and using Visual Studio for the following topics:</span></span>

- [<span data-ttu-id="d80fd-111">Ausführen von unformatierten SQL-Abfragen</span><span class="sxs-lookup"><span data-stu-id="d80fd-111">Performing raw SQL queries</span></span>](#rawsql)
- [<span data-ttu-id="d80fd-112">Ausführen von Abfragen keine Überwachung</span><span class="sxs-lookup"><span data-stu-id="d80fd-112">Performing no-tracking queries</span></span>](#notracking)
- [<span data-ttu-id="d80fd-113">Untersuchen von SQL an die Datenbank gesendet</span><span class="sxs-lookup"><span data-stu-id="d80fd-113">Examining SQL sent to the database</span></span>](#sql)

<span data-ttu-id="d80fd-114">Das Lernprogramm führt mehrere Themen mit kurze Einführungen gefolgt von Links und Ressourcen für Weitere Informationen:</span><span class="sxs-lookup"><span data-stu-id="d80fd-114">The tutorial introduces several topics with brief introductions followed by links to resources for more information:</span></span>

- [<span data-ttu-id="d80fd-115">Repository und die Einheit der Arbeit-Muster</span><span class="sxs-lookup"><span data-stu-id="d80fd-115">Repository and unit of work patterns</span></span>](#repo)
- [<span data-ttu-id="d80fd-116">Proxyklassen</span><span class="sxs-lookup"><span data-stu-id="d80fd-116">Proxy classes</span></span>](#proxies)
- [<span data-ttu-id="d80fd-117">Automatische änderungserkennung</span><span class="sxs-lookup"><span data-stu-id="d80fd-117">Automatic change detection</span></span>](#changedetection)
- [<span data-ttu-id="d80fd-118">Automatische Validierung</span><span class="sxs-lookup"><span data-stu-id="d80fd-118">Automatic validation</span></span>](#validation)
- [<span data-ttu-id="d80fd-119">EF-Tools für Visual Studio</span><span class="sxs-lookup"><span data-stu-id="d80fd-119">EF tools for Visual Studio</span></span>](#tools)
- [<span data-ttu-id="d80fd-120">Entity Framework-Quellcodes</span><span class="sxs-lookup"><span data-stu-id="d80fd-120">Entity Framework source code</span></span>](#source)

<span data-ttu-id="d80fd-121">Das Lernprogramm enthält auch die folgenden Abschnitte:</span><span class="sxs-lookup"><span data-stu-id="d80fd-121">The tutorial also includes the following sections:</span></span>

- [<span data-ttu-id="d80fd-122">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="d80fd-122">Summary</span></span>](#summary)
- [<span data-ttu-id="d80fd-123">Bestätigungen</span><span class="sxs-lookup"><span data-stu-id="d80fd-123">Acknowledgments</span></span>](#acknowledgments)
- [<span data-ttu-id="d80fd-124">Ein Hinweis zum VB</span><span class="sxs-lookup"><span data-stu-id="d80fd-124">A note about VB</span></span>](#vb)
- [<span data-ttu-id="d80fd-125">Häufige Fehler und -Lösungen oder problemumgehungen für Sie</span><span class="sxs-lookup"><span data-stu-id="d80fd-125">Common errors, and solutions or workarounds for them</span></span>](#errors)

<span data-ttu-id="d80fd-126">Für die meisten dieser Themen arbeiten Sie mit der Seiten, die Sie bereits erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="d80fd-126">For most of these topics, you'll work with pages that you already created.</span></span> <span data-ttu-id="d80fd-127">Um die unformatierten SQL verwenden, um massenaktualisierungen auszuführen erstellen Sie eine neue Seite, die die Anzahl der Gutschriften aller Kurse in der Datenbank aktualisiert:</span><span class="sxs-lookup"><span data-stu-id="d80fd-127">To use raw SQL to do bulk updates you'll create a new page that updates the number of credits of all courses in the database:</span></span>

![Update_Course_Credits_initial_page](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image1.png)

<a id="rawsql"></a>
## <a name="performing-raw-sql-queries"></a><span data-ttu-id="d80fd-129">Leistungsfähige unformatierten SQL-Abfragen</span><span class="sxs-lookup"><span data-stu-id="d80fd-129">Performing Raw SQL Queries</span></span>

<span data-ttu-id="d80fd-130">Der Entity Framework Code First-API enthält Methoden, die Ihnen ermöglichen, die SQL-Befehle direkt an die Datenbank übergeben.</span><span class="sxs-lookup"><span data-stu-id="d80fd-130">The Entity Framework Code First API includes methods that enable you to pass SQL commands directly to the database.</span></span> <span data-ttu-id="d80fd-131">Sie haben folgende Möglichkeiten:</span><span class="sxs-lookup"><span data-stu-id="d80fd-131">You have the following options:</span></span>

- <span data-ttu-id="d80fd-132">Verwenden der [DbSet.SqlQuery](https://msdn.microsoft.com/library/system.data.entity.dbset.sqlquery.aspx) Methode zum Abfragen, die Entitätstypen zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="d80fd-132">Use the [DbSet.SqlQuery](https://msdn.microsoft.com/library/system.data.entity.dbset.sqlquery.aspx) method for queries that return entity types.</span></span> <span data-ttu-id="d80fd-133">Die zurückgegebenen Objekte muss mit der vom erwarteten Typ der `DbSet` -Objekt, und sie werden automatisch nachverfolgt vom Kontext Datenbank, wenn Sie die Überwachung deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="d80fd-133">The returned objects must be of the type expected by the `DbSet` object, and they are automatically tracked by the database context unless you turn tracking off.</span></span> <span data-ttu-id="d80fd-134">(Finden Sie im folgenden Abschnitt zu den [AsNoTracking](https://msdn.microsoft.com/library/system.data.entity.dbextensions.asnotracking.aspx) Methode.)</span><span class="sxs-lookup"><span data-stu-id="d80fd-134">(See the following section about the [AsNoTracking](https://msdn.microsoft.com/library/system.data.entity.dbextensions.asnotracking.aspx) method.)</span></span>
- <span data-ttu-id="d80fd-135">Verwenden der [Database.SqlQuery](https://msdn.microsoft.com/library/system.data.entity.database.sqlquery.aspx) Methode für Abfragen, die Typen zurückgeben, die Entitäten nicht.</span><span class="sxs-lookup"><span data-stu-id="d80fd-135">Use the [Database.SqlQuery](https://msdn.microsoft.com/library/system.data.entity.database.sqlquery.aspx) method for queries that return types that aren't entities.</span></span> <span data-ttu-id="d80fd-136">Die zurückgegebenen Daten wird nicht von den Datenbankkontext nachverfolgt, auch wenn Sie diese Methode zum Abrufen von Entitätstypen verwenden.</span><span class="sxs-lookup"><span data-stu-id="d80fd-136">The returned data isn't tracked by the database context, even if you use this method to retrieve entity types.</span></span>
- <span data-ttu-id="d80fd-137">Verwenden der [Database.ExecuteSqlCommand](https://msdn.microsoft.com/library/gg679456.aspx) für nichtabfragebefehle.</span><span class="sxs-lookup"><span data-stu-id="d80fd-137">Use the [Database.ExecuteSqlCommand](https://msdn.microsoft.com/library/gg679456.aspx) for non-query commands.</span></span>

<span data-ttu-id="d80fd-138">Einer der Vorteile der Verwendung von Entity Framework ist, dass diese vermieden wird, den Code zu viel Wert auf eine bestimmte Methode zum Speichern von Daten zu binden.</span><span class="sxs-lookup"><span data-stu-id="d80fd-138">One of the advantages of using the Entity Framework is that it avoids tying your code too closely to a particular method of storing data.</span></span> <span data-ttu-id="d80fd-139">Dies geschieht durch Generieren von SQL-Abfragen und Befehle, die auch Sie freigibt, müssen sie selbst schreiben.</span><span class="sxs-lookup"><span data-stu-id="d80fd-139">It does this by generating SQL queries and commands for you, which also frees you from having to write them yourself.</span></span> <span data-ttu-id="d80fd-140">Aber herausragende Szenarien stehen, wenn müssen Sie bestimmte SQL-Abfragen ausführen, die Sie manuell erstellt haben, und diese Methoden können Sie solche Ausnahmen zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="d80fd-140">But there are exceptional scenarios when you need to run specific SQL queries that you have manually created, and these methods make it possible for you to handle such exceptions.</span></span>

<span data-ttu-id="d80fd-141">Wie immer "true" ist, wenn Sie SQL-Befehle in einer Webanwendung ausführen, müssen Sie Vorsichtsmaßnahmen treffen, Ihre Website vor SQL Injection-Angriffen schützen werden.</span><span class="sxs-lookup"><span data-stu-id="d80fd-141">As is always true when you execute SQL commands in a web application, you must take precautions to protect your site against SQL injection attacks.</span></span> <span data-ttu-id="d80fd-142">Eine Möglichkeit dazu besteht darin parametrisierte Abfragen zu verwenden, um sicherzustellen, dass Zeichenfolgen, die von einer Webseite übermittelten als SQL-Befehle interpretiert werden können.</span><span class="sxs-lookup"><span data-stu-id="d80fd-142">One way to do that is to use parameterized queries to make sure that strings submitted by a web page can't be interpreted as SQL commands.</span></span> <span data-ttu-id="d80fd-143">In diesem Lernprogramm verwenden Sie parametrisierte Abfragen beim Integrieren von Benutzereingaben in einer Abfrage.</span><span class="sxs-lookup"><span data-stu-id="d80fd-143">In this tutorial you'll use parameterized queries when integrating user input into a query.</span></span>

### <a name="calling-a-query-that-returns-entities"></a><span data-ttu-id="d80fd-144">Aufrufen einer Abfrage, die zurückgegeben Entitäten</span><span class="sxs-lookup"><span data-stu-id="d80fd-144">Calling a Query that Returns Entities</span></span>

<span data-ttu-id="d80fd-145">Die [DbSet&lt;TEntity&gt; ](https://msdn.microsoft.com/library/gg696460.aspx) -Klasse stellt eine Methode, die Sie verwenden können, zum Ausführen einer Abfrage, die eine Entität des Typs zurückgibt `TEntity`.</span><span class="sxs-lookup"><span data-stu-id="d80fd-145">The [DbSet&lt;TEntity&gt;](https://msdn.microsoft.com/library/gg696460.aspx) class provides a method that you can use to execute a query that returns an entity of type `TEntity`.</span></span> <span data-ttu-id="d80fd-146">Zu sehen, wie dies funktioniert ändern den Code in der `Details` Methode der `Department` Controller.</span><span class="sxs-lookup"><span data-stu-id="d80fd-146">To see how this works you'll change the code in the `Details` method of the `Department` controller.</span></span>

<span data-ttu-id="d80fd-147">In *DepartmentController.cs*in der `Details` -Methode, ersetzen die `db.Departments.FindAsync` Methodenaufruf mit einem `db.Departments.SqlQuery` -Methodenaufruf, wie im folgenden hervorgehobenen Code gezeigt:</span><span class="sxs-lookup"><span data-stu-id="d80fd-147">In *DepartmentController.cs*, in the `Details` method, replace the `db.Departments.FindAsync` method call with a `db.Departments.SqlQuery` method call, as shown in the following highlighted code:</span></span>

[!code-csharp[Main](advanced-entity-framework-scenarios-for-an-mvc-web-application/samples/sample1.cs?highlight=8-14)]

<span data-ttu-id="d80fd-148">Um sicherzustellen, dass der neue Code ordnungsgemäß funktioniert, wählen Sie die **Abteilungen** Registerkarte und dann **Details** für eines der Abteilungen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-148">To verify that the new code works correctly, select the **Departments** tab and then **Details** for one of the departments.</span></span>

![Department-Details](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image2.png)

### <a name="calling-a-query-that-returns-other-types-of-objects"></a><span data-ttu-id="d80fd-150">Aufrufen von einer Abfrage, zurückgibt andere Typen von Objekten</span><span class="sxs-lookup"><span data-stu-id="d80fd-150">Calling a Query that Returns Other Types of Objects</span></span>

<span data-ttu-id="d80fd-151">Zuvor haben Sie ein Student statistikraster für die Info-Seite, die die Anzahl der Schüler für jede Registrierungsdatum ergab erstellt.</span><span class="sxs-lookup"><span data-stu-id="d80fd-151">Earlier you created a student statistics grid for the About page that showed the number of students for each enrollment date.</span></span> <span data-ttu-id="d80fd-152">Der Code, die dies in tut *HomeController.cs* verwendet LINQ:</span><span class="sxs-lookup"><span data-stu-id="d80fd-152">The code that does this in *HomeController.cs* uses LINQ:</span></span>

[!code-csharp[Main](advanced-entity-framework-scenarios-for-an-mvc-web-application/samples/sample2.cs)]

<span data-ttu-id="d80fd-153">Angenommen Sie, Code schreiben, mit der diese Daten direkt in SQL, anstatt mit LINQ abgerufen werden sollen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-153">Suppose you want to write the code that retrieves this data directly in SQL rather than using LINQ.</span></span> <span data-ttu-id="d80fd-154">Hierzu müssen Sie beim Ausführen einer Abfrage, die einen anderen Wert als Entitätsobjekte zurückgibt, also müssen Sie verwenden die [Database.SqlQuery](https://msdn.microsoft.com/library/system.data.entity.database.sqlquery(v=VS.103).aspx) Methode.</span><span class="sxs-lookup"><span data-stu-id="d80fd-154">To do that you need to run a query that returns something other than entity objects, which means you need to use the [Database.SqlQuery](https://msdn.microsoft.com/library/system.data.entity.database.sqlquery(v=VS.103).aspx) method.</span></span>

<span data-ttu-id="d80fd-155">In *HomeController.cs*, ersetzen Sie die LINQ-Anweisung in die `About` Methode mit einer SQL-Anweisung, wie im folgenden hervorgehobenen Code gezeigt:</span><span class="sxs-lookup"><span data-stu-id="d80fd-155">In *HomeController.cs*, replace the LINQ statement in the `About` method with a SQL statement, as shown in the following highlighted code:</span></span>

[!code-csharp[Main](advanced-entity-framework-scenarios-for-an-mvc-web-application/samples/sample3.cs?highlight=3-18)]

<span data-ttu-id="d80fd-156">Führen Sie die Seite "Info".</span><span class="sxs-lookup"><span data-stu-id="d80fd-156">Run the About page.</span></span> <span data-ttu-id="d80fd-157">Es zeigt die gleichen Daten wie zuvor.</span><span class="sxs-lookup"><span data-stu-id="d80fd-157">It displays the same data it did before.</span></span>

![About_page](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image3.png)

### <a name="calling-an-update-query"></a><span data-ttu-id="d80fd-159">Aufrufen einer Update-Abfrage</span><span class="sxs-lookup"><span data-stu-id="d80fd-159">Calling an Update Query</span></span>

<span data-ttu-id="d80fd-160">Angenommen Sie, Sie möchten, dass Contoso University Administratoren in der Datenbank, z. B. das Ändern der Anzahl der Gutschriften für jeder Kurs massenänderungen ausführen kann.</span><span class="sxs-lookup"><span data-stu-id="d80fd-160">Suppose Contoso University administrators want to be able to perform bulk changes in the database, such as changing the number of credits for every course.</span></span> <span data-ttu-id="d80fd-161">Verfügt die Universität eine große Anzahl von Kurse, wäre es ineffizient, diese als Entitäten abrufen und ändern Sie sie einzeln.</span><span class="sxs-lookup"><span data-stu-id="d80fd-161">If the university has a large number of courses, it would be inefficient to retrieve them all as entities and change them individually.</span></span> <span data-ttu-id="d80fd-162">In diesem Abschnitt implementieren Sie eine Webseite, die dem Benutzer ermöglicht, geben Sie einen Faktor, um die Anzahl der Gutschriften für alle Kurse ändern, und fügen Sie die Änderung vornehmen, durch das Ausführen einer SQL `UPDATE` Anweisung.</span><span class="sxs-lookup"><span data-stu-id="d80fd-162">In this section you'll implement a web page that enables the user to specify a factor by which to change the number of credits for all courses, and you'll make the change by executing a SQL `UPDATE` statement.</span></span> <span data-ttu-id="d80fd-163">Die Webseite wird wie die folgende Abbildung aussehen:</span><span class="sxs-lookup"><span data-stu-id="d80fd-163">The web page will look like the following illustration:</span></span>

![Update_Course_Credits_initial_page](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image4.png)

<span data-ttu-id="d80fd-165">In *CourseContoller.cs*, hinzufügen `UpdateCourseCredits` Methoden für `HttpGet` und `HttpPost`:</span><span class="sxs-lookup"><span data-stu-id="d80fd-165">In *CourseContoller.cs*, add `UpdateCourseCredits` methods for `HttpGet` and `HttpPost`:</span></span>

[!code-csharp[Main](advanced-entity-framework-scenarios-for-an-mvc-web-application/samples/sample4.cs)]

<span data-ttu-id="d80fd-166">Wenn der Controller verarbeitet ein `HttpGet` Anforderung, nothing wird zurückgegeben, der `ViewBag.RowsAffected` Variable und die Ansicht zeigt ein leeres Textfeld und eine Schaltfläche "Absenden" wie in der vorherigen Abbildung dargestellt.</span><span class="sxs-lookup"><span data-stu-id="d80fd-166">When the controller processes an `HttpGet` request, nothing is returned in the `ViewBag.RowsAffected` variable, and the view displays an empty text box and a submit button, as shown in the preceding illustration.</span></span>

<span data-ttu-id="d80fd-167">Wenn die **Update** Schaltfläche geklickt wird, die `HttpPost` -Methode aufgerufen wird, und `multiplier` hat den Wert in das Textfeld eingegeben.</span><span class="sxs-lookup"><span data-stu-id="d80fd-167">When the **Update** button is clicked, the `HttpPost` method is called, and `multiplier` has the value entered in the text box.</span></span> <span data-ttu-id="d80fd-168">Der Code führt dann die SQL, die Kurse aktualisiert und gibt die Anzahl der betroffenen Zeilen in der Sicht in der `ViewBag.RowsAffected` Variable.</span><span class="sxs-lookup"><span data-stu-id="d80fd-168">The code then executes the SQL that updates courses and returns the number of affected rows to the view in the `ViewBag.RowsAffected` variable.</span></span> <span data-ttu-id="d80fd-169">Wenn die Sicht, ruft einen Wert ab Variable, es zeigt die Anzahl der Zeilen, die aktualisiert werden, anstatt das Textfeld und Senden-Schaltfläche, wie in der folgenden Abbildung gezeigt:</span><span class="sxs-lookup"><span data-stu-id="d80fd-169">When the view gets a value in that variable, it displays the number of rows updated instead of the text box and submit button, as shown in the following illustration:</span></span>

![Update_Course_Credits_rows_affected_page](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image5.png)

<span data-ttu-id="d80fd-171">In *CourseController.cs*, mit der rechten Maustaste eine der der `UpdateCourseCredits` Methoden, und klicken Sie dann auf **Ansicht hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="d80fd-171">In *CourseController.cs*, right-click one of the `UpdateCourseCredits` methods, and then click **Add View**.</span></span>

![Add_View_dialog_box_for_Update_Course_Credits](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image6.png)

<span data-ttu-id="d80fd-173">In *Views\Course\UpdateCourseCredits.cshtml*, den Code durch den folgenden Code ersetzen:</span><span class="sxs-lookup"><span data-stu-id="d80fd-173">In *Views\Course\UpdateCourseCredits.cshtml*, replace the template code with the following code:</span></span>

[!code-cshtml[Main](advanced-entity-framework-scenarios-for-an-mvc-web-application/samples/sample5.cshtml)]

<span data-ttu-id="d80fd-174">Führen Sie die `UpdateCourseCredits` Methode dazu die **Kurse** Registerkarte, klicken Sie dann hinzufügen "/ UpdateCourseCredits" am Ende der URL in die Adressleiste des Browsers (z. B.: `http://localhost:50205/Course/UpdateCourseCredits`).</span><span class="sxs-lookup"><span data-stu-id="d80fd-174">Run the `UpdateCourseCredits` method by selecting the **Courses** tab, then adding "/UpdateCourseCredits" to the end of the URL in the browser's address bar (for example: `http://localhost:50205/Course/UpdateCourseCredits`).</span></span> <span data-ttu-id="d80fd-175">Geben Sie eine Zahl in das Textfeld ein:</span><span class="sxs-lookup"><span data-stu-id="d80fd-175">Enter a number in the text box:</span></span>

![Update_Course_Credits_initial_page_with_2_entered](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image7.png)

<span data-ttu-id="d80fd-177">Klicken Sie auf **Aktualisieren**.</span><span class="sxs-lookup"><span data-stu-id="d80fd-177">Click **Update**.</span></span> <span data-ttu-id="d80fd-178">Daraufhin wird die Anzahl der betroffenen Zeilen:</span><span class="sxs-lookup"><span data-stu-id="d80fd-178">You see the number of rows affected:</span></span>

![Update_Course_Credits_rows_affected_page](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image8.png)

<span data-ttu-id="d80fd-180">Klicken Sie auf **zurück zur Listenansicht** um die Liste der Kurse mit der geänderte Anzahl von Gutschriften anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-180">Click **Back to List** to see the list of courses with the revised number of credits.</span></span>

![Courses_Index_page_showing_revised_credits](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image9.png)

<span data-ttu-id="d80fd-182">Weitere Informationen zu unformatierten SQL-Abfragen finden Sie unter [unformatierten SQL-Abfragen](https://msdn.microsoft.com/data/jj592907) auf MSDN.</span><span class="sxs-lookup"><span data-stu-id="d80fd-182">For more information about raw SQL queries, see [Raw SQL Queries](https://msdn.microsoft.com/data/jj592907) on MSDN.</span></span>

<a id="notracking"></a>
## <a name="no-tracking-queries"></a><span data-ttu-id="d80fd-183">No-Überwachungsabfragen</span><span class="sxs-lookup"><span data-stu-id="d80fd-183">No-Tracking Queries</span></span>

<span data-ttu-id="d80fd-184">Wenn ein Datenbankkontext Ruft die Tabellenzeilen ab und erstellt von Entitätsobjekten, die sie darstellen, werden von nachverfolgt standardmäßig er, ob die Entitäten im Arbeitsspeicher synchron, sind was in der Datenbank ist.</span><span class="sxs-lookup"><span data-stu-id="d80fd-184">When a database context retrieves table rows and creates entity objects that represent them, by default it keeps track of whether the entities in memory are in sync with what's in the database.</span></span> <span data-ttu-id="d80fd-185">Die Daten im Arbeitsspeicher als Cache fungiert und werden verwendet, wenn Sie eine Entität aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="d80fd-185">The data in memory acts as a cache and is used when you update an entity.</span></span> <span data-ttu-id="d80fd-186">Dieses Zwischenspeichern ist häufig in einer Webanwendung nicht erforderlich, da Kontext Instanzen sind in der Regel kurzlebige (ein neuer Schlüssel wird erstellt und freigegeben für jede Anforderung) sowie den Kontext, liest eine Entität ist in der Regel verworfen werden, bevor diese Entität erneut verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="d80fd-186">This caching is often unnecessary in a web application because context instances are typically short-lived (a new one is created and disposed for each request) and the context that reads an entity is typically disposed before that entity is used again.</span></span>

<span data-ttu-id="d80fd-187">Sie können die Überwachung von Entitätsobjekten im Arbeitsspeicher deaktivieren, mit der [AsNoTracking](https://msdn.microsoft.com/library/gg679352(v=vs.103).aspx) Methode.</span><span class="sxs-lookup"><span data-stu-id="d80fd-187">You can disable tracking of entity objects in memory by using the [AsNoTracking](https://msdn.microsoft.com/library/gg679352(v=vs.103).aspx) method.</span></span> <span data-ttu-id="d80fd-188">Typische Szenarios, in denen Sie möchten, die, umfassen Folgendes:</span><span class="sxs-lookup"><span data-stu-id="d80fd-188">Typical scenarios in which you might want to do that include the following:</span></span>

- <span data-ttu-id="d80fd-189">Eine Abfrage ruft solche eine große Datenmenge, die durch das Ausschalten Überwachung deutlich die Leistung steigern können.</span><span class="sxs-lookup"><span data-stu-id="d80fd-189">A query retrieves such a large volume of data that turning off tracking might noticeably enhance performance.</span></span>
- <span data-ttu-id="d80fd-190">Sie eine Entität anfügen, um es zu aktualisieren möchten, aber Sie zuvor die gleiche Entität für einen anderen Zweck abgerufen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-190">You want to attach an entity in order to update it, but you earlier retrieved the same entity for a different purpose.</span></span> <span data-ttu-id="d80fd-191">Da die Entität bereits vom Kontext Datenbank nachverfolgt wird, können Sie die Entität nicht anfügen, die Sie ändern möchten.</span><span class="sxs-lookup"><span data-stu-id="d80fd-191">Because the entity is already being tracked by the database context, you can't attach the entity that you want to change.</span></span> <span data-ttu-id="d80fd-192">Eine Möglichkeit für diese Situation ist die Verwendung der `AsNoTracking` Option mit der oben dargestellten Abfrage.</span><span class="sxs-lookup"><span data-stu-id="d80fd-192">One way to handle this situation is to use the `AsNoTracking` option with the earlier query.</span></span>

<span data-ttu-id="d80fd-193">Ein Beispiel für die Verwendung der [AsNoTracking](https://msdn.microsoft.com/library/gg679352(v=vs.103).aspx) -Methode finden Sie unter [die frühere Version dieses Lernprogramms](../../older-versions/getting-started-with-ef-5-using-mvc-4/advanced-entity-framework-scenarios-for-an-mvc-web-application.md).</span><span class="sxs-lookup"><span data-stu-id="d80fd-193">For an example that demonstrates how to use the [AsNoTracking](https://msdn.microsoft.com/library/gg679352(v=vs.103).aspx) method, see [the earlier version of this tutorial](../../older-versions/getting-started-with-ef-5-using-mvc-4/advanced-entity-framework-scenarios-for-an-mvc-web-application.md).</span></span> <span data-ttu-id="d80fd-194">Diese Version des Lernprogramms nicht das Flag "geändert" auf eine Entität Binder erstellte Modell in der Methode bearbeiten festlegen, damit sie nicht benötigt `AsNoTracking`.</span><span class="sxs-lookup"><span data-stu-id="d80fd-194">This version of the tutorial doesn't set the Modified flag on a model-binder-created entity in the Edit method, so it doesn't need `AsNoTracking`.</span></span>

<a id="sql"></a>
## <a name="examining-sql-sent-to-the-database"></a><span data-ttu-id="d80fd-195">Untersuchen von SQL an die Datenbank gesendet</span><span class="sxs-lookup"><span data-stu-id="d80fd-195">Examining SQL sent to the database</span></span>

<span data-ttu-id="d80fd-196">Manchmal ist es hilfreich, in der Lage, um den tatsächlichen SQL-Abfragen anzuzeigen, die an die Datenbank gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="d80fd-196">Sometimes it's helpful to be able to see the actual SQL queries that are sent to the database.</span></span> <span data-ttu-id="d80fd-197">In einer früheren Lernprogramm haben Sie gesehen, wie dies im Code der Interceptor; Jetzt sehen Sie einige Möglichkeiten zu diesem Zweck ohne Interceptor Code zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="d80fd-197">In an earlier tutorial you saw how to do that in interceptor code; now you'll see some ways to do it without writing interceptor code.</span></span> <span data-ttu-id="d80fd-198">Um dies zu testen, müssen Sie betrachten Sie eine einfache Abfrage und betrachten, was darauf, geschieht wie Sie solche Eager laden, Filtern und Sortieren von Optionen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-198">To try this out, you'll look at a simple query and then look at what happens to it as you add options such eager loading, filtering, and sorting.</span></span>

<span data-ttu-id="d80fd-199">In *Controller/CourseController*, ersetzen Sie die `Index` Methode durch den folgenden Code, um unverzüglichem Laden vorübergehend zu beenden:</span><span class="sxs-lookup"><span data-stu-id="d80fd-199">In *Controllers/CourseController*, replace the `Index` method with the following code, in order to temporarily stop eager loading:</span></span>

[!code-csharp[Main](advanced-entity-framework-scenarios-for-an-mvc-web-application/samples/sample6.cs)]

<span data-ttu-id="d80fd-200">Nun legen Sie einen Haltepunkt auf der `return` Anweisung (mit dem Cursor in dieser Zeile F9).</span><span class="sxs-lookup"><span data-stu-id="d80fd-200">Now set a breakpoint on the `return` statement (F9 with the cursor on that line).</span></span> <span data-ttu-id="d80fd-201">Drücken Sie F5, um das Projekt im Debugmodus ausführen, und wählen den Kurs Indexseite.</span><span class="sxs-lookup"><span data-stu-id="d80fd-201">Press F5 to run the project in debug mode, and select the Course Index page.</span></span> <span data-ttu-id="d80fd-202">Wenn der Code den Haltepunkt erreicht, untersuchen die `sql` Variable.</span><span class="sxs-lookup"><span data-stu-id="d80fd-202">When the code reaches the breakpoint, examine the `sql` variable.</span></span> <span data-ttu-id="d80fd-203">Daraufhin wird die Abfrage, die mit SQL Server gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="d80fd-203">You see the query that's sent to SQL Server.</span></span> <span data-ttu-id="d80fd-204">Es ist eine einfache `Select` Anweisung.</span><span class="sxs-lookup"><span data-stu-id="d80fd-204">It's a simple `Select` statement.</span></span>

[!code-json[Main](advanced-entity-framework-scenarios-for-an-mvc-web-application/samples/sample7.json)]

<span data-ttu-id="d80fd-205">Klicken Sie auf die vergrößern Klasse aus, um die Abfrage in finden Sie unter der **Text-Schnellansicht**.</span><span class="sxs-lookup"><span data-stu-id="d80fd-205">Click the magnifying class to see the query in the **Text Visualizer**.</span></span>

![](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image10.png)

<span data-ttu-id="d80fd-206">Nun fügen Sie eine Dropdown-Liste auf die Indexseite Kurse, damit Benutzer nach einer bestimmten Abteilung filtern können.</span><span class="sxs-lookup"><span data-stu-id="d80fd-206">Now you'll add a drop-down list to the Courses Index page so that users can filter for a particular department.</span></span> <span data-ttu-id="d80fd-207">Sortieren Sie die Kurse nach Titel, und geben Sie unverzüglichem Laden für die `Department` Navigationseigenschaft.</span><span class="sxs-lookup"><span data-stu-id="d80fd-207">You'll sort the courses by title, and you'll specify eager loading for the `Department` navigation property.</span></span>

<span data-ttu-id="d80fd-208">In *CourseController.cs*, ersetzen Sie die `Index` -Methode durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="d80fd-208">In *CourseController.cs*, replace the `Index` method with the following code:</span></span>

[!code-csharp[Main](advanced-entity-framework-scenarios-for-an-mvc-web-application/samples/sample8.cs)]

<span data-ttu-id="d80fd-209">Stellen Sie den Haltepunkt wieder her, auf die `return` Anweisung.</span><span class="sxs-lookup"><span data-stu-id="d80fd-209">Restore the breakpoint on the `return` statement.</span></span>

<span data-ttu-id="d80fd-210">Die Methode erhält, den ausgewählten Wert aus der Dropdown-Liste in die `SelectedDepartment` Parameter.</span><span class="sxs-lookup"><span data-stu-id="d80fd-210">The method receives the selected value of the drop-down list in the `SelectedDepartment` parameter.</span></span> <span data-ttu-id="d80fd-211">Wenn nichts ausgewählt ist, wird dieser Parameter null sein.</span><span class="sxs-lookup"><span data-stu-id="d80fd-211">If nothing is selected, this parameter will be null.</span></span>

<span data-ttu-id="d80fd-212">Ein `SelectList` Auflistung mit allen Abteilungen ist für die Dropdown-Liste an die Ansicht übergeben.</span><span class="sxs-lookup"><span data-stu-id="d80fd-212">A `SelectList` collection containing all departments is passed to the view for the drop-down list.</span></span> <span data-ttu-id="d80fd-213">Die Parameter zu übergeben, um die `SelectList` Konstruktor angeben, den Wert Feldnamen, den Feldnamen Text und das ausgewählte Element.</span><span class="sxs-lookup"><span data-stu-id="d80fd-213">The parameters passed to the `SelectList` constructor specify the value field name, the text field name, and the selected item.</span></span>

<span data-ttu-id="d80fd-214">Für die `Get` Methode der `Course` -Repository der Code gibt einen Filterausdruck, Sortierreihenfolge und Eager loading für die `Department` Navigationseigenschaft.</span><span class="sxs-lookup"><span data-stu-id="d80fd-214">For the `Get` method of the `Course` repository, the code specifies a filter expression, a sort order, and eager loading for the `Department` navigation property.</span></span> <span data-ttu-id="d80fd-215">Gibt der Filterausdruck immer `true` Wenn nichts in der Dropdown-Liste ausgewählt ist (d. h. `SelectedDepartment` ist null).</span><span class="sxs-lookup"><span data-stu-id="d80fd-215">The filter expression always returns `true` if nothing is selected in the drop-down list (that is, `SelectedDepartment` is null).</span></span>

<span data-ttu-id="d80fd-216">In *Views\Course\Index.cshtml*, unmittelbar vor dem Öffnen `table` kennzeichnen, fügen Sie den folgenden Code zum Erstellen der Dropdown Liste und eine Schaltfläche "Absenden":</span><span class="sxs-lookup"><span data-stu-id="d80fd-216">In *Views\Course\Index.cshtml*, immediately before the opening `table` tag, add the following code to create the drop-down list and a submit button:</span></span>

[!code-cshtml[Main](advanced-entity-framework-scenarios-for-an-mvc-web-application/samples/sample9.cshtml)]

<span data-ttu-id="d80fd-217">Der Haltepunkt festgelegt, und führen Sie die Seite für die Kurs-Index.</span><span class="sxs-lookup"><span data-stu-id="d80fd-217">With the breakpoint still set, run the Course Index page.</span></span> <span data-ttu-id="d80fd-218">Über das erste Mal, dass der Code einen Haltepunkt trifft fortgesetzt werden, damit die Seite im Browser angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="d80fd-218">Continue through the first times that the code hits a breakpoint, so that the page is displayed in the browser.</span></span> <span data-ttu-id="d80fd-219">Wählen Sie eine Abteilung aus der Dropdown-Liste, und klicken Sie auf **Filter**:</span><span class="sxs-lookup"><span data-stu-id="d80fd-219">Select a department from the drop-down list and click **Filter**:</span></span>

![Course_Index_page_with_department_selected](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image11.png)

<span data-ttu-id="d80fd-221">Dieses Mal wird der erste Haltepunkt für die Abteilungen-Abfrage für die Dropdown-Liste.</span><span class="sxs-lookup"><span data-stu-id="d80fd-221">This time the first breakpoint will be for the departments query for the drop-down list.</span></span> <span data-ttu-id="d80fd-222">Überspringen, und zeigen Sie an der `query` Variablen das nächste Mal im Code erreicht den Breakpoint um sehen die `Course` Abfragen nun sieht wie.</span><span class="sxs-lookup"><span data-stu-id="d80fd-222">Skip that and view the `query` variable the next time the code reaches the breakpoint in order to see what the `Course` query now looks like.</span></span> <span data-ttu-id="d80fd-223">Sie sehen in etwa Folgendes:</span><span class="sxs-lookup"><span data-stu-id="d80fd-223">You'll see something like the following:</span></span>

[!code-sql[Main](advanced-entity-framework-scenarios-for-an-mvc-web-application/samples/sample10.sql)]

<span data-ttu-id="d80fd-224">Sehen Sie, dass jetzt die Abfrage ist ein `JOIN` Abfrage, die lädt `Department` Daten zusammen mit der `Course` Daten, und es enthält eine `WHERE` Klausel.</span><span class="sxs-lookup"><span data-stu-id="d80fd-224">You can see that the query is now a `JOIN` query that loads `Department` data along with the `Course` data, and that it includes a `WHERE` clause.</span></span>

<span data-ttu-id="d80fd-225">Entfernen Sie die `var sql = courses.ToString()` Zeile.</span><span class="sxs-lookup"><span data-stu-id="d80fd-225">Remove the `var sql = courses.ToString()` line.</span></span>

<a id="repo"></a>

## <a name="repository-and-unit-of-work-patterns"></a><span data-ttu-id="d80fd-226">Repository und die Einheit der Arbeit-Muster</span><span class="sxs-lookup"><span data-stu-id="d80fd-226">Repository and unit of work patterns</span></span>

<span data-ttu-id="d80fd-227">Viele Entwickler schreiben Code, um das Repository und die Einheit der Arbeit Muster als Wrapper um Code implementieren, die mit dem Entity Framework funktioniert.</span><span class="sxs-lookup"><span data-stu-id="d80fd-227">Many developers write code to implement the repository and unit of work patterns as a wrapper around code that works with the Entity Framework.</span></span> <span data-ttu-id="d80fd-228">Diese Muster sollen eine Abstraktionsebene zwischen der Datenzugriffsebene und den Geschäftslogikschicht einer Anwendung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-228">These patterns are intended to create an abstraction layer between the data access layer and the business logic layer of an application.</span></span> <span data-ttu-id="d80fd-229">Diese Muster implementieren, um die Anwendung von Änderungen im Datenspeicher zu isolieren und Endprodukts automatisierte Komponententests oder eine testgesteuerte Entwicklung (TDD).</span><span class="sxs-lookup"><span data-stu-id="d80fd-229">Implementing these patterns can help insulate your application from changes in the data store and can facilitate automated unit testing or test-driven development (TDD).</span></span> <span data-ttu-id="d80fd-230">Schreiben zusätzlichen Code zum Implementieren dieser Muster ist jedoch nicht immer die beste Wahl für Anwendungen mit EF, verschiedene Ursachen:</span><span class="sxs-lookup"><span data-stu-id="d80fd-230">However, writing additional code to implement these patterns is not always the best choice for applications that use EF, for several reasons:</span></span>

- <span data-ttu-id="d80fd-231">Die Klasse der EF-Kontext selbst isoliert Codes von Store-datenspezifische Code.</span><span class="sxs-lookup"><span data-stu-id="d80fd-231">The EF context class itself insulates your code from data-store-specific code.</span></span>
- <span data-ttu-id="d80fd-232">Die EF-Context-Klasse kann fungieren, als eine Arbeitseinheit Klasse für Datenbank-updates, die Sie mithilfe von EF ausführen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-232">The EF context class can act as a unit-of-work class for database updates that you do using EF.</span></span>
- <span data-ttu-id="d80fd-233">Funktionen von Entity Framework 6 vereinfachen die testgesteuerte Entwicklung zu implementieren, ohne Repository Code zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="d80fd-233">Features introduced in Entity Framework 6 make it easier to implement TDD without writing repository code.</span></span>

<span data-ttu-id="d80fd-234">Weitere Informationen dazu, wie Sie das Repository und die Einheit der Arbeit Muster zu implementieren, finden Sie unter [die Entity Framework 5 Version dieser Reihe von Lernprogrammen](../../older-versions/getting-started-with-ef-5-using-mvc-4/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="d80fd-234">For more information about how to implement the repository and unit of work patterns, see [the Entity Framework 5 version of this tutorial series](../../older-versions/getting-started-with-ef-5-using-mvc-4/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application.md).</span></span> <span data-ttu-id="d80fd-235">Informationen zu Methoden zum TDD in Entity Framework 6 implementieren finden Sie unter den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="d80fd-235">For information about ways to implement TDD in Entity Framework 6, see the following resources:</span></span>

- [<span data-ttu-id="d80fd-236">Wie EF6 Mocking DbSets leichter ermöglicht</span><span class="sxs-lookup"><span data-stu-id="d80fd-236">How EF6 Enables Mocking DbSets more easily</span></span>](http://thedatafarm.com/data-access/how-ef6-enables-mocking-dbsets-more-easily/)
- [<span data-ttu-id="d80fd-237">Ein pseudoframework testen</span><span class="sxs-lookup"><span data-stu-id="d80fd-237">Testing with a mocking framework</span></span>](https://msdn.microsoft.com/data/dn314429)
- [<span data-ttu-id="d80fd-238">Tests mit Ihren eigenen Testdoubles</span><span class="sxs-lookup"><span data-stu-id="d80fd-238">Testing with your own test doubles</span></span>](https://msdn.microsoft.com/data/dn314431)

<a id="proxies"></a>
## <a name="proxy-classes"></a><span data-ttu-id="d80fd-239">Proxyklassen</span><span class="sxs-lookup"><span data-stu-id="d80fd-239">Proxy classes</span></span>

<span data-ttu-id="d80fd-240">Wenn Entity Framework erstellt Instanzen der Entität (z. B. beim Ausführen einer Abfrage), berechnet er häufig als Instanzen eines dynamisch generierten abgeleiteten Typs, der als Proxy für die Entität fungiert.</span><span class="sxs-lookup"><span data-stu-id="d80fd-240">When the Entity Framework creates entity instances (for example, when you execute a query), it often creates them as instances of a dynamically generated derived type that acts as a proxy for the entity.</span></span> <span data-ttu-id="d80fd-241">Beispielsweise finden Sie unter den folgenden beiden Abbilder im Debugger.</span><span class="sxs-lookup"><span data-stu-id="d80fd-241">For example, see the following two debugger images.</span></span> <span data-ttu-id="d80fd-242">In der ersten Abbildung angezeigt, die die `student` Variable ist der erwartete `Student` Geben Sie sofort, nachdem Sie die Entität instanziieren.</span><span class="sxs-lookup"><span data-stu-id="d80fd-242">In the first image, you see that the `student` variable is the expected `Student` type immediately after you instantiate the entity.</span></span> <span data-ttu-id="d80fd-243">Nachdem EF zum Lesen einer Student-Entität aus der Datenbank verwendet wurde, sehen Sie in das zweite Bild die Proxy-Klasse.</span><span class="sxs-lookup"><span data-stu-id="d80fd-243">In the second image, after EF has been used to read a student entity from the database, you see the proxy class.</span></span>

![Vor dem Proxy-Klasse](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image12.png)

![Nach der Proxy-Klasse](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image13.png)

<span data-ttu-id="d80fd-246">Dieser Proxyklasse überschreibt einige virtuelle Eigenschaften der Entität einzufügende Hooks für Aktionen automatisch ausgeführt, wenn die Eigenschaft zugegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="d80fd-246">This proxy class overrides some virtual properties of the entity to insert hooks for performing actions automatically when the property is accessed.</span></span> <span data-ttu-id="d80fd-247">Eine Funktion, der für diesen Mechanismus verwendet wird, ist verzögertes Laden.</span><span class="sxs-lookup"><span data-stu-id="d80fd-247">One function this mechanism is used for is lazy loading.</span></span>

<span data-ttu-id="d80fd-248">In den meisten Fällen müssen Sie nicht diese Verwendung von Proxys bewusst sein, aber es gibt jedoch Ausnahmen:</span><span class="sxs-lookup"><span data-stu-id="d80fd-248">Most of the time you don't need to be aware of this use of proxies, but there are exceptions:</span></span>

- <span data-ttu-id="d80fd-249">In einigen Szenarien empfiehlt es sich um zu verhindern, dass das Entity Framework Proxyinstanzen erstellen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-249">In some scenarios you might want to prevent the Entity Framework from creating proxy instances.</span></span> <span data-ttu-id="d80fd-250">Beim Serialisieren von Entitäten sind möchten Sie z. B. in der Regel POCO-Klassen, die Webdienstproxy-Klassen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-250">For example, when you're serializing entities you generally want the POCO classes, not the proxy classes.</span></span> <span data-ttu-id="d80fd-251">Eine Möglichkeit zur Vermeidung von Problemen der Serialisierung wird zum Serialisieren von datenübertragungsobjekte (DTOs) anstelle von Entitätsobjekten, entsprechend der [mithilfe des Web-API mit Entity Framework](../../../../web-api/overview/data/using-web-api-with-entity-framework/part-1.md) Lernprogramm.</span><span class="sxs-lookup"><span data-stu-id="d80fd-251">One way to avoid serialization problems is to serialize data transfer objects (DTOs) instead of entity objects, as shown in the [Using Web API with Entity Framework](../../../../web-api/overview/data/using-web-api-with-entity-framework/part-1.md) tutorial.</span></span> <span data-ttu-id="d80fd-252">Eine andere Möglichkeit besteht darin [deaktivieren Proxyerstellung](https://msdn.microsoft.com/data/jj592886.aspx).</span><span class="sxs-lookup"><span data-stu-id="d80fd-252">Another way is to [disable proxy creation](https://msdn.microsoft.com/data/jj592886.aspx).</span></span>
- <span data-ttu-id="d80fd-253">Beim Instanziieren einer Entität mithilfe der `new` Operator nicht erhalten Sie eine Proxyinstanz.</span><span class="sxs-lookup"><span data-stu-id="d80fd-253">When you instantiate an entity class using the `new` operator, you don't get a proxy instance.</span></span> <span data-ttu-id="d80fd-254">Dies bedeutet, dass Sie keine Funktionen nutzen, z. B. verzögertes Laden und automatische änderungsnachverfolgung.</span><span class="sxs-lookup"><span data-stu-id="d80fd-254">This means you don't get functionality such as lazy loading and automatic change tracking.</span></span> <span data-ttu-id="d80fd-255">Dies ist in der Regel sind; im Allgemeinen nicht erforderlich, lazy loading, da Sie eine neue Entität erstellen, die nicht in der Datenbank und änderungsnachverfolgung, wenn Sie die Entität als explizite Markierung sind im Allgemeinen nicht erforderlich, `Added`.</span><span class="sxs-lookup"><span data-stu-id="d80fd-255">This is typically okay; you generally don't need lazy loading, because you're creating a new entity that isn't in the database, and you generally don't need change tracking if you're explicitly marking the entity as `Added`.</span></span> <span data-ttu-id="d80fd-256">Jedoch wenn verzögertes Laden ist erforderlich, und das Nachverfolgen von Änderungen benötigen, können Sie erstellen neue Instanzen der Entität mit Proxys, die mithilfe der [erstellen](https://msdn.microsoft.com/library/gg679504.aspx) Methode der `DbSet` Klasse.</span><span class="sxs-lookup"><span data-stu-id="d80fd-256">However, if you do need lazy loading and you need change tracking, you can create new entity instances with proxies using the [Create](https://msdn.microsoft.com/library/gg679504.aspx) method of the `DbSet` class.</span></span>
- <span data-ttu-id="d80fd-257">Möglicherweise möchten einen Proxytyp tatsächlichen Entitätstyp entnommen werden.</span><span class="sxs-lookup"><span data-stu-id="d80fd-257">You might want to get an actual entity type from a proxy type.</span></span> <span data-ttu-id="d80fd-258">Können Sie die [GetObjectType hat](https://msdn.microsoft.com/library/system.data.objects.objectcontext.getobjecttype.aspx) Methode der `ObjectContext` Klasse, um den tatsächlichen Entitätstyp, der eine Instanz eines Datentyps Proxy abzurufen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-258">You can use the [GetObjectType](https://msdn.microsoft.com/library/system.data.objects.objectcontext.getobjecttype.aspx) method of the `ObjectContext` class to get the actual entity type of a proxy type instance.</span></span>

<span data-ttu-id="d80fd-259">Weitere Informationen finden Sie unter [arbeiten mit Proxys](https://msdn.microsoft.com/data/JJ592886.aspx) auf MSDN.</span><span class="sxs-lookup"><span data-stu-id="d80fd-259">For more information, see [Working with Proxies](https://msdn.microsoft.com/data/JJ592886.aspx) on MSDN.</span></span>

<a id="changedetection"></a>
## <a name="automatic-change-detection"></a><span data-ttu-id="d80fd-260">Automatische änderungserkennung</span><span class="sxs-lookup"><span data-stu-id="d80fd-260">Automatic change detection</span></span>

<span data-ttu-id="d80fd-261">Entity Framework bestimmt wie eine Entität geändert wurde (und daher die Updates an die Datenbank gesendet werden müssen), indem Sie die aktuellen Werte von einer Entität mit den ursprünglichen Werten vergleichen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-261">The Entity Framework determines how an entity has changed (and therefore which updates need to be sent to the database) by comparing the current values of an entity with the original values.</span></span> <span data-ttu-id="d80fd-262">Die ursprünglichen Werte werden gespeichert, wenn die Entität abgefragt oder angefügt wird.</span><span class="sxs-lookup"><span data-stu-id="d80fd-262">The original values are stored when the entity is queried or attached.</span></span> <span data-ttu-id="d80fd-263">Einige der Methoden, die dazu führen, änderungserkennung für automatische dass lauten wie folgt:</span><span class="sxs-lookup"><span data-stu-id="d80fd-263">Some of the methods that cause automatic change detection are the following:</span></span>

- `DbSet.Find`
- `DbSet.Local`
- `DbSet.Remove`
- `DbSet.Add`
- `DbSet.Attach`
- `DbContext.SaveChanges`
- `DbContext.GetValidationErrors`
- `DbContext.Entry`
- `DbChangeTracker.Entries`

<span data-ttu-id="d80fd-264">Wenn Sie eine große Anzahl von Entitäten überwachen und einer dieser Methoden oft in einer Schleife aufrufen, erhalten Sie möglicherweise erhebliche Leistungssteigerungen durch vorübergehendes Deaktivieren der automatischen Änderung zustandserkennung mithilfe der [AutoDetectChangesEnabled](https://msdn.microsoft.com/library/system.data.entity.infrastructure.dbcontextconfiguration.autodetectchangesenabled.aspx) Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="d80fd-264">If you're tracking a large number of entities and you call one of these methods many times in a loop, you might get significant performance improvements by temporarily turning off automatic change detection using the [AutoDetectChangesEnabled](https://msdn.microsoft.com/library/system.data.entity.infrastructure.dbcontextconfiguration.autodetectchangesenabled.aspx) property.</span></span> <span data-ttu-id="d80fd-265">Weitere Informationen finden Sie unter [automatisch erkennen von Änderungen](https://msdn.microsoft.com/data/jj556205) auf MSDN.</span><span class="sxs-lookup"><span data-stu-id="d80fd-265">For more information, see [Automatically Detecting Changes](https://msdn.microsoft.com/data/jj556205) on MSDN.</span></span>

<a id="validation"></a>
## <a name="automatic-validation"></a><span data-ttu-id="d80fd-266">Automatische Validierung</span><span class="sxs-lookup"><span data-stu-id="d80fd-266">Automatic validation</span></span>

<span data-ttu-id="d80fd-267">Beim Aufrufen der `SaveChanges` -Methode, wird standardmäßig das Entity Framework überprüft die Daten in alle Eigenschaften aller geänderten Entitäten vor dem Aktualisieren der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="d80fd-267">When you call the `SaveChanges` method, by default the Entity Framework validates the data in all properties of all changed entities before updating the database.</span></span> <span data-ttu-id="d80fd-268">Wenn Sie eine große Anzahl von Entitäten aktualisiert haben und Sie haben bereits überprüft die Daten dieser Aufwand ist nicht erforderlich, und Sie die das Speichern womöglich werden die Änderungen durch Deaktivieren der Validierung vorübergehend weniger Zeit benötigt.</span><span class="sxs-lookup"><span data-stu-id="d80fd-268">If you've updated a large number of entities and you've already validated the data, this work is unnecessary and you could make the process of saving the changes take less time by temporarily turning off validation.</span></span> <span data-ttu-id="d80fd-269">Sie erreichen, dass die Verwendung der [ValidateOnSaveEnabled](https://msdn.microsoft.com/library/system.data.entity.infrastructure.dbcontextconfiguration.validateonsaveenabled.aspx) Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="d80fd-269">You can do that using the [ValidateOnSaveEnabled](https://msdn.microsoft.com/library/system.data.entity.infrastructure.dbcontextconfiguration.validateonsaveenabled.aspx) property.</span></span> <span data-ttu-id="d80fd-270">Weitere Informationen finden Sie unter [Überprüfung](https://msdn.microsoft.com/data/gg193959) auf MSDN.</span><span class="sxs-lookup"><span data-stu-id="d80fd-270">For more information, see [Validation](https://msdn.microsoft.com/data/gg193959) on MSDN.</span></span>

<a id="tools"></a>
## <a name="entity-framework-power-tools"></a><span data-ttu-id="d80fd-271">Entity Framework-Powertools</span><span class="sxs-lookup"><span data-stu-id="d80fd-271">Entity Framework Power Tools</span></span>

<span data-ttu-id="d80fd-272">[Entity Framework-Powertools](https://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d) ist ein Visual Studio-add-in, mit denen die Daten Modelldiagramme erstellt wurde in diesen Lernprogrammen vorgestellten.</span><span class="sxs-lookup"><span data-stu-id="d80fd-272">[Entity Framework Power Tools](https://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d) is a Visual Studio add-in that was used to create the data model diagrams shown in these tutorials.</span></span> <span data-ttu-id="d80fd-273">Die Tools können auch andere Funktion durchführen, z. B. das Generieren von Entitätsklassen auf Grundlage der Tabellen in einer vorhandenen Datenbank, damit Sie die Datenbank mit Code First verwenden können.</span><span class="sxs-lookup"><span data-stu-id="d80fd-273">The tools can also do other function such as generate entity classes based on the tables in an existing database so that you can use the database with Code First.</span></span> <span data-ttu-id="d80fd-274">Nachdem Sie die Tools installieren, können Sie einige zusätzlichen Optionen in Kontextmenüs angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d80fd-274">After you install the tools, some additional options appear in context menus.</span></span> <span data-ttu-id="d80fd-275">Z. B. Wenn Sie mit der rechten Maustaste in Ihre Kontextklasse **Projektmappen-Explorer**, erhalten Sie eine Option aus, um ein Diagramm zu generieren.</span><span class="sxs-lookup"><span data-stu-id="d80fd-275">For example, when you right-click your context class in **Solution Explorer**, you get an option to generate a diagram.</span></span> <span data-ttu-id="d80fd-276">Wenn Sie Code First verwenden Sie das Datenmodell in das Diagramm können nicht geändert werden, aber Sie können Elemente verschieben, um verstehen zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-276">When you're using Code First you can't change the data model in the diagram, but you can move things around to make it easier to understand.</span></span>

![EF im Kontextmenü](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image14.png)

![EF-Diagramm](advanced-entity-framework-scenarios-for-an-mvc-web-application/_static/image15.png)

<a id="source"></a>
## <a name="entity-framework-source-code"></a><span data-ttu-id="d80fd-279">Entity Framework-Quellcodes</span><span class="sxs-lookup"><span data-stu-id="d80fd-279">Entity Framework source code</span></span>

<span data-ttu-id="d80fd-280">Der Quellcode für Entity Framework 6 finden Sie unter [GitHub](https://github.com/aspnet/EntityFramework6).</span><span class="sxs-lookup"><span data-stu-id="d80fd-280">The source code for Entity Framework 6 is available at [GitHub](https://github.com/aspnet/EntityFramework6).</span></span> <span data-ttu-id="d80fd-281">Melden Sie den Fehler, und Sie können auch eigene Erweiterungen auf den Quellcode von EF beitragen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-281">You can file bugs, and you can contribute your own enhancements to the EF source code.</span></span>

<span data-ttu-id="d80fd-282">Obwohl der Quellcode geöffnet ist, wird die Entity Framework als ein Produkt von Microsoft vollständig unterstützt.</span><span class="sxs-lookup"><span data-stu-id="d80fd-282">Although the source code is open, Entity Framework is fully supported as a Microsoft product.</span></span> <span data-ttu-id="d80fd-283">Das Microsoft Entity Framework-Team verfolgt die Kontrolle über die Beiträge akzeptiert werden und testet alle Änderungen am Code zum Gewährleisten der Qualität von jeder Version.</span><span class="sxs-lookup"><span data-stu-id="d80fd-283">The Microsoft Entity Framework team keeps control over which contributions are accepted and tests all code changes to ensure the quality of each release.</span></span>

<a id="summary"></a>
## <a name="summary"></a><span data-ttu-id="d80fd-284">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="d80fd-284">Summary</span></span>

<span data-ttu-id="d80fd-285">Dies schließt diese Reihe von Lernprogramme zum Verwenden von Entity Framework in einer ASP.NET MVC-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="d80fd-285">This completes this series of tutorials on using the Entity Framework in an ASP.NET MVC application.</span></span> <span data-ttu-id="d80fd-286">Weitere Informationen zum Arbeiten mit Daten, die mit dem Entity Framework finden Sie unter der [EF-Dokumentationsseite auf MSDN](https://msdn.microsoft.com/data/ee712907) und [ASP.NET Data Access - Ressourcen empfohlen](../../../../whitepapers/aspnet-data-access-content-map.md).</span><span class="sxs-lookup"><span data-stu-id="d80fd-286">For more information about how to work with data using the Entity Framework, see the [EF documentation page on MSDN](https://msdn.microsoft.com/data/ee712907) and [ASP.NET Data Access - Recommended Resources](../../../../whitepapers/aspnet-data-access-content-map.md).</span></span>

<span data-ttu-id="d80fd-287">Weitere Informationen dazu, wie Sie Ihre Webanwendung bereitstellen, nachdem Sie es erstellt haben, finden Sie unter [ASP.NET Web-Bereitstellung – Ressourcen empfohlen](../../../../whitepapers/aspnet-web-deployment-content-map.md) in der MSDN Library.</span><span class="sxs-lookup"><span data-stu-id="d80fd-287">For more information about how to deploy your web application after you've built it, see [ASP.NET Web Deployment - Recommended Resources](../../../../whitepapers/aspnet-web-deployment-content-map.md) in the MSDN Library.</span></span>

<span data-ttu-id="d80fd-288">Weitere Informationen zu anderen Themen im Zusammenhang mit MVC, wie beispielsweise Authentifizierung und Autorisierung, finden Sie unter der [ASP.NET MVC - Ressourcen empfohlen](../recommended-resources-for-mvc.md).</span><span class="sxs-lookup"><span data-stu-id="d80fd-288">For information about other topics related to MVC, such as authentication and authorization, see the [ASP.NET MVC - Recommended Resources](../recommended-resources-for-mvc.md).</span></span>

<a id="acknowledgments"></a>
## <a name="acknowledgments"></a><span data-ttu-id="d80fd-289">Bestätigungen</span><span class="sxs-lookup"><span data-stu-id="d80fd-289">Acknowledgments</span></span>

- <span data-ttu-id="d80fd-290">Tom Dykstra geschrieben hat die ursprüngliche Version dieses Lernprogramms, Co-Autor EF 5-Aktualisierung und wurde das Update 6 EF geschrieben.</span><span class="sxs-lookup"><span data-stu-id="d80fd-290">Tom Dykstra wrote the original version of this tutorial, co-authored the EF 5 update, and wrote the EF 6 update.</span></span> <span data-ttu-id="d80fd-291">Peter ist ein senior programming Writer auf dem Microsoft-Webplattform und Tools Inhaltsteam.</span><span class="sxs-lookup"><span data-stu-id="d80fd-291">Tom is a senior programming writer on the Microsoft Web Platform and Tools Content Team.</span></span>
- <span data-ttu-id="d80fd-292">[Rick Anderson](https://blogs.msdn.com/b/rickandy/) (twitter [ @RickAndMSFT ](http://twitter.com/RickAndMSFT)) wurde der Großteil der Arbeit aktualisieren das Lernprogramm für 5 EF und MVC 4 und Co-Autor der EF-6-Update.</span><span class="sxs-lookup"><span data-stu-id="d80fd-292">[Rick Anderson](https://blogs.msdn.com/b/rickandy/) (twitter [@RickAndMSFT](http://twitter.com/RickAndMSFT)) did most of the work updating the tutorial for EF 5 and MVC 4 and co-authored the EF 6 update.</span></span> <span data-ttu-id="d80fd-293">Rick ist ein senior programming Writer zum Microsoft Azure und MVC konzentrieren.</span><span class="sxs-lookup"><span data-stu-id="d80fd-293">Rick is a senior programming writer for Microsoft focusing on Azure and MVC.</span></span>
- <span data-ttu-id="d80fd-294">[Rowan Miller](http://www.romiller.com) und anderen Mitgliedern des Teams Entity Framework unterstützt mit codereviews und-Abgleich dabei behilflich waren viele Probleme bei Migrationen zu debuggen, die aufgetreten ist, während wir das Lernprogramm für EF 5 und 6 EF aktualisiert wurden.</span><span class="sxs-lookup"><span data-stu-id="d80fd-294">[Rowan Miller](http://www.romiller.com) and other members of the Entity Framework team assisted with code reviews and helped debug many issues with migrations that arose while we were updating the tutorial for EF 5 and EF 6.</span></span>

<a id="vb"></a>
## <a name="vb"></a><span data-ttu-id="d80fd-295">VB</span><span class="sxs-lookup"><span data-stu-id="d80fd-295">VB</span></span>

<span data-ttu-id="d80fd-296">Bei das Lernprogramm für EF 4.1 ursprünglich erstellt wurde, bereitgestellt wir c# und VB-Versionen des Projekts abgeschlossenen Download an.</span><span class="sxs-lookup"><span data-stu-id="d80fd-296">When the tutorial was originally produced for EF 4.1, we provided both C# and VB versions of the completed download project.</span></span> <span data-ttu-id="d80fd-297">Aufgrund der Zeit-Einschränkungen und andere Prioritäten haben wir nicht, die für diese Version ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="d80fd-297">Due to time limitations and other priorities we have not done that for this version.</span></span> <span data-ttu-id="d80fd-298">Wenn Sie beim Erstellen eines VB-Projekts mit diesen Lernprogrammen und wäre, die andere Personen freigeben, informieren Sie uns in Kauf zu nehmen.</span><span class="sxs-lookup"><span data-stu-id="d80fd-298">If you build a VB project using these tutorials and would be willing to share that with others, please let us know.</span></span>

<a id="errors"></a>
## <a name="common-errors-and-solutions-or-workarounds-for-them"></a><span data-ttu-id="d80fd-299">Häufige Fehler und -Lösungen oder problemumgehungen für Sie</span><span class="sxs-lookup"><span data-stu-id="d80fd-299">Common errors, and solutions or workarounds for them</span></span>

### <a name="cannot-createshadow-copy"></a><span data-ttu-id="d80fd-300">Kopieren kann nicht erstellt/Schatten werden</span><span class="sxs-lookup"><span data-stu-id="d80fd-300">Cannot create/shadow copy</span></span>

<span data-ttu-id="d80fd-301">Fehlermeldung:</span><span class="sxs-lookup"><span data-stu-id="d80fd-301">Error Message:</span></span>

> <span data-ttu-id="d80fd-302">Kopieren kann nicht erstellt/Schatten "&lt;Filename&gt;" Wenn die Datei bereits vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="d80fd-302">Cannot create/shadow copy '&lt;filename&gt;' when that file already exists.</span></span>


<span data-ttu-id="d80fd-303">Lösung</span><span class="sxs-lookup"><span data-stu-id="d80fd-303">Solution</span></span>

<span data-ttu-id="d80fd-304">Warten Sie einige Sekunden, und aktualisieren Sie die Seite.</span><span class="sxs-lookup"><span data-stu-id="d80fd-304">Wait a few seconds and refresh the page.</span></span>

### <a name="update-database-not-recognized"></a><span data-ttu-id="d80fd-305">Update-Database nicht erkannt.</span><span class="sxs-lookup"><span data-stu-id="d80fd-305">Update-Database not recognized</span></span>

<span data-ttu-id="d80fd-306">Fehlermeldung (aus der `Update-Database` -Befehl in der PMC):</span><span class="sxs-lookup"><span data-stu-id="d80fd-306">Error Message (from the `Update-Database` command in the PMC):</span></span>

> <span data-ttu-id="d80fd-307">Der Begriff 'Update-Database' ist nicht als Namen für ein Cmdlet, Funktion, Skriptdatei oder eines ausführbaren Programms erkannt.</span><span class="sxs-lookup"><span data-stu-id="d80fd-307">The term 'Update-Database' is not recognized as the name of a cmdlet, function, script file, or operable program.</span></span> <span data-ttu-id="d80fd-308">Überprüfen Sie die Schreibweise des Namens, oder wenn ein Pfad enthalten ist, stellen Sie sicher, dass der Pfad korrekt ist, und versuchen Sie es erneut.</span><span class="sxs-lookup"><span data-stu-id="d80fd-308">Check the spelling of the name, or if a path was included, verify that the path is correct and try again.</span></span>


<span data-ttu-id="d80fd-309">Lösung</span><span class="sxs-lookup"><span data-stu-id="d80fd-309">Solution</span></span>

<span data-ttu-id="d80fd-310">Beenden Sie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="d80fd-310">Exit Visual Studio.</span></span> <span data-ttu-id="d80fd-311">Öffnen Sie Projekt erneut, und wiederholen Sie den Vorgang.</span><span class="sxs-lookup"><span data-stu-id="d80fd-311">Reopen project and try again.</span></span>

### <a name="validation-failed"></a><span data-ttu-id="d80fd-312">Fehler bei der Überprüfung</span><span class="sxs-lookup"><span data-stu-id="d80fd-312">Validation failed</span></span>

<span data-ttu-id="d80fd-313">Fehlermeldung (aus der `Update-Database` -Befehl in der PMC):</span><span class="sxs-lookup"><span data-stu-id="d80fd-313">Error Message (from the `Update-Database` command in the PMC):</span></span>

> <span data-ttu-id="d80fd-314">Fehler bei der Validierung für eine oder mehrere Entitäten.</span><span class="sxs-lookup"><span data-stu-id="d80fd-314">Validation failed for one or more entities.</span></span> <span data-ttu-id="d80fd-315">Finden Sie unter 'EntityValidationErrors'-Eigenschaft für weitere Details.</span><span class="sxs-lookup"><span data-stu-id="d80fd-315">See 'EntityValidationErrors' property for more details.</span></span>


<span data-ttu-id="d80fd-316">Lösung</span><span class="sxs-lookup"><span data-stu-id="d80fd-316">Solution</span></span>

<span data-ttu-id="d80fd-317">Eine Ursache für dieses Problem sind Überprüfungsfehler bei den `Seed` Methode ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="d80fd-317">One cause of this problem is validation errors when the `Seed` method runs.</span></span> <span data-ttu-id="d80fd-318">Finden Sie unter [Seeding und Debuggen von Entity Framework (EF) Datenbanken](https://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx) Tipps zum Debuggen der `Seed` Methode.</span><span class="sxs-lookup"><span data-stu-id="d80fd-318">See [Seeding and Debugging Entity Framework (EF) DBs](https://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx) for tips on debugging the `Seed` method.</span></span>

### <a name="http-50019-error"></a><span data-ttu-id="d80fd-319">HTTP 500.19 Fehler</span><span class="sxs-lookup"><span data-stu-id="d80fd-319">HTTP 500.19 error</span></span>

<span data-ttu-id="d80fd-320">Fehlermeldung:</span><span class="sxs-lookup"><span data-stu-id="d80fd-320">Error Message:</span></span>

> <span data-ttu-id="d80fd-321">HTTP-Fehler 500.19 - Interner Serverfehler</span><span class="sxs-lookup"><span data-stu-id="d80fd-321">HTTP Error 500.19 - Internal Server Error</span></span>  
> <span data-ttu-id="d80fd-322">Die angeforderte Seite kann nicht zugegriffen werden, da die zugehörigen Konfigurationsdaten für die Seite ungültig ist.</span><span class="sxs-lookup"><span data-stu-id="d80fd-322">The requested page cannot be accessed because the related configuration data for the page is invalid.</span></span>


<span data-ttu-id="d80fd-323">Lösung</span><span class="sxs-lookup"><span data-stu-id="d80fd-323">Solution</span></span>

<span data-ttu-id="d80fd-324">Eine Möglichkeit, die Sie diese Fehlermeldung erhalten, können wird vom Vorhandensein mehrerer Kopien der Lösung, jede von ihnen die gleiche Portnummer verwenden.</span><span class="sxs-lookup"><span data-stu-id="d80fd-324">One way you can get this error is from having multiple copies of the solution, each of them using the same port number.</span></span> <span data-ttu-id="d80fd-325">In der Regel können Sie dieses Problem beheben, indem Beenden alle Instanzen von Visual Studio und anschließend das Projekt, auf dem Sie arbeiten, Neustart.</span><span class="sxs-lookup"><span data-stu-id="d80fd-325">You can usually solve this problem by exiting all instances of Visual Studio, then restarting the project you're working on.</span></span> <span data-ttu-id="d80fd-326">Wenn dies nicht funktioniert, versuchen Sie es ändern der Portnummer.</span><span class="sxs-lookup"><span data-stu-id="d80fd-326">If that doesn't work, try changing the port number.</span></span> <span data-ttu-id="d80fd-327">Klicken Sie mit der rechten Maustaste auf die Projektdatei, und klicken Sie dann auf Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="d80fd-327">Right click on the project file and then click properties.</span></span> <span data-ttu-id="d80fd-328">Wählen Sie die **Web** Registerkarte, und ändern Sie dann die Portnummer in das **Projekt-Url** Textfeld.</span><span class="sxs-lookup"><span data-stu-id="d80fd-328">Select the **Web** tab and then change the port number in the **Project Url** text box.</span></span>

### <a name="error-locating-sql-server-instance"></a><span data-ttu-id="d80fd-329">Fehler beim Suchen von SQL Server-Instanz</span><span class="sxs-lookup"><span data-stu-id="d80fd-329">Error locating SQL Server instance</span></span>

<span data-ttu-id="d80fd-330">Fehlermeldung:</span><span class="sxs-lookup"><span data-stu-id="d80fd-330">Error Message:</span></span>

> <span data-ttu-id="d80fd-331">Ein netzwerkbezogener oder Instanzspezifischer Fehler beim Herstellen einer Verbindung mit SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d80fd-331">A network-related or instance-specific error occurred while establishing a connection to SQL Server.</span></span> <span data-ttu-id="d80fd-332">Der Server wurde nicht gefunden oder es konnte nicht auf ihn zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="d80fd-332">The server was not found or was not accessible.</span></span> <span data-ttu-id="d80fd-333">Stellen Sie sicher, dass der Instanzname richtig und SQL Server so konfiguriert ist, das Remoteverbindungen zulässig sind.</span><span class="sxs-lookup"><span data-stu-id="d80fd-333">Verify that the instance name is correct and that SQL Server is configured to allow remote connections.</span></span> <span data-ttu-id="d80fd-334">(Anbieter: SQL Network Interfaces, Fehler: 26 - Fehler beim Suchen von Server-Instanz angegeben.)</span><span class="sxs-lookup"><span data-stu-id="d80fd-334">(provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)</span></span>


<span data-ttu-id="d80fd-335">Lösung</span><span class="sxs-lookup"><span data-stu-id="d80fd-335">Solution</span></span>

<span data-ttu-id="d80fd-336">Überprüfen Sie die Verbindungszeichenfolge an.</span><span class="sxs-lookup"><span data-stu-id="d80fd-336">Check the connection string.</span></span> <span data-ttu-id="d80fd-337">Wenn Sie die Datenbank manuell gelöscht haben, ändern Sie den Namen der Datenbank in der Konstruktionszeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="d80fd-337">If you have manually deleted the database, change the name of the database in the construction string.</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="d80fd-338">Vorherige</span><span class="sxs-lookup"><span data-stu-id="d80fd-338">Previous</span></span>](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application.md)
