---
title: Verwenden Sie die Angular-Projektvorlage, mit ASP.NET Core
author: SteveSandersonMS
description: Informationen Sie zum Einstieg in die Projektvorlage für ASP.NET Core einzelnen Seite Anwendung (SPA) für Angular und Angular CLI.
manager: wpickett
ms.author: scaddie
ms.custom: mvc
ms.date: 02/21/2018
ms.devlang: csharp
ms.prod: aspnet-core
ms.technology: aspnet
ms.topic: article
uid: spa/angular
ms.openlocfilehash: e3956bedbc243578f6dfdc09f5f043327de7c66b
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
---
# <a name="use-the-angular-project-template-with-aspnet-core"></a><span data-ttu-id="c069a-103">Verwenden Sie die Angular-Projektvorlage, mit ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="c069a-103">Use the Angular project template with ASP.NET Core</span></span>

> [!NOTE]
> <span data-ttu-id="c069a-104">Diese Dokumentation ist nicht zur Angular-Projektvorlage in ASP.NET Core 2.0 enthalten.</span><span class="sxs-lookup"><span data-stu-id="c069a-104">This documentation isn't about the Angular project template included in ASP.NET Core 2.0.</span></span> <span data-ttu-id="c069a-105">Es geht die neuere Angular-Vorlage, die auf die Sie manuell aktualisieren können.</span><span class="sxs-lookup"><span data-stu-id="c069a-105">It's about the newer Angular template to which you can update manually.</span></span> <span data-ttu-id="c069a-106">Die Vorlage ist standardmäßig in ASP.NET Core 2.1 enthalten.</span><span class="sxs-lookup"><span data-stu-id="c069a-106">The template is included in ASP.NET Core 2.1 by default.</span></span>

<span data-ttu-id="c069a-107">Die aktualisierte Angular-Projektvorlage stellt einen nützlichen Startpunkt für ASP.NET Core-apps mit Angular und Angular CLI eine reichhaltige, clientseitige Benutzeroberfläche (UI) zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="c069a-107">The updated Angular project template provides a convenient starting point for ASP.NET Core apps using Angular and the Angular CLI to implement a rich, client-side user interface (UI).</span></span>

<span data-ttu-id="c069a-108">Die Vorlage entspricht dem Erstellen eines ASP.NET Core-Projekts zu fungieren als ein API-Back-End- und ein Angular CLI-Projekt fungiert als eine Benutzeroberfläche zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="c069a-108">The template is equivalent to creating an ASP.NET Core project to act as an API backend and an Angular CLI project to act as a UI.</span></span> <span data-ttu-id="c069a-109">Die Vorlage bietet die Vorteile des Hostens beide Projekttypen in einem einzelnen app-Projekt.</span><span class="sxs-lookup"><span data-stu-id="c069a-109">The template offers the convenience of hosting both project types in a single app project.</span></span> <span data-ttu-id="c069a-110">Folglich kann das app-Projekt erstellt und als einzelne Einheit veröffentlicht werden.</span><span class="sxs-lookup"><span data-stu-id="c069a-110">Consequently, the app project can be built and published as a single unit.</span></span>

## <a name="create-a-new-app"></a><span data-ttu-id="c069a-111">Eine neue app erstellen</span><span class="sxs-lookup"><span data-stu-id="c069a-111">Create a new app</span></span>

<span data-ttu-id="c069a-112">Wenn ASP.NET Core 2.0 verwenden, stellen Sie sicher, Sie haben [installiert die aktualisierte Angular-Projektvorlage](xref:spa/index#installation).</span><span class="sxs-lookup"><span data-stu-id="c069a-112">If using ASP.NET Core 2.0, ensure you've [installed the updated Angular project template](xref:spa/index#installation).</span></span> <span data-ttu-id="c069a-113">Wenn Sie ASP.NET Core 2.1 installiert ist, besteht keine Notwendigkeit, es zu installieren.</span><span class="sxs-lookup"><span data-stu-id="c069a-113">If you have ASP.NET Core 2.1, there's no need to install it.</span></span>

<span data-ttu-id="c069a-114">Erstellen eines neuen Projekts von einer Eingabeaufforderung mit dem Befehl `dotnet new angular` in ein leeres Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="c069a-114">Create a new project from a command prompt using the command `dotnet new angular` in an empty directory.</span></span> <span data-ttu-id="c069a-115">Die folgenden Befehle erstellen z. B. die app in eine *Meine-neuen-app* Verzeichnis und wechseln Sie in diesem Verzeichnis:</span><span class="sxs-lookup"><span data-stu-id="c069a-115">For example, the following commands create the app in a *my-new-app* directory and switch to that directory:</span></span>

```console
dotnet new angular -o my-new-app
cd my-new-app
```

<span data-ttu-id="c069a-116">Führen Sie die app aus Visual Studio oder .NET Core CLI:</span><span class="sxs-lookup"><span data-stu-id="c069a-116">Run the app from either Visual Studio or the .NET Core CLI:</span></span>

#### <a name="visual-studiotabvisual-studio"></a>[<span data-ttu-id="c069a-117">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="c069a-117">Visual Studio</span></span>](#tab/visual-studio/)
<span data-ttu-id="c069a-118">Öffnen Sie die generierte *csproj* Datei, und führen Sie die app als normale von dort aus.</span><span class="sxs-lookup"><span data-stu-id="c069a-118">Open the generated *.csproj* file, and run the app as normal from there.</span></span>

<span data-ttu-id="c069a-119">Während des Erstellungsprozesses stellt Npm Abhängigkeiten bei der ersten Ausführung, die dies einige Minuten dauern kann, wieder her.</span><span class="sxs-lookup"><span data-stu-id="c069a-119">The build process restores npm dependencies on the first run, which can take several minutes.</span></span> <span data-ttu-id="c069a-120">Nachfolgende Builds sind wesentlich schneller.</span><span class="sxs-lookup"><span data-stu-id="c069a-120">Subsequent builds are much faster.</span></span>

#### <a name="net-core-clitabnetcore-cli"></a>[<span data-ttu-id="c069a-121">.NET Core-CLI</span><span class="sxs-lookup"><span data-stu-id="c069a-121">.NET Core CLI</span></span>](#tab/netcore-cli/)
<span data-ttu-id="c069a-122">Sicherzustellen, dass Sie über eine Umgebungsvariable namens `ASPNETCORE_Environment` mit einem Wert von `Development`.</span><span class="sxs-lookup"><span data-stu-id="c069a-122">Ensure you have an environment variable called `ASPNETCORE_Environment` with a value of `Development`.</span></span> <span data-ttu-id="c069a-123">Führen Sie für Windows (in nicht-PowerShell-Anweisungen), `SET ASPNETCORE_Environment=Development`.</span><span class="sxs-lookup"><span data-stu-id="c069a-123">On Windows (in non-PowerShell prompts), run `SET ASPNETCORE_Environment=Development`.</span></span> <span data-ttu-id="c069a-124">Führen Sie unter Linux oder MacOS `export ASPNETCORE_Environment=Development`.</span><span class="sxs-lookup"><span data-stu-id="c069a-124">On Linux or macOS, run `export ASPNETCORE_Environment=Development`.</span></span>

<span data-ttu-id="c069a-125">Führen Sie [Dotnet Build](/dotnet/core/tools/dotnet-build) um zu überprüfen, ob die Anwendung richtig erstellt.</span><span class="sxs-lookup"><span data-stu-id="c069a-125">Run [dotnet build](/dotnet/core/tools/dotnet-build) to verify the app builds correctly.</span></span> <span data-ttu-id="c069a-126">Bei der ersten Ausführung stellt während des Erstellungsprozesses Npm Abhängigkeiten, die dies einige Minuten dauern kann, wieder her.</span><span class="sxs-lookup"><span data-stu-id="c069a-126">On the first run, the build process restores npm dependencies, which can take several minutes.</span></span> <span data-ttu-id="c069a-127">Nachfolgende Builds sind wesentlich schneller.</span><span class="sxs-lookup"><span data-stu-id="c069a-127">Subsequent builds are much faster.</span></span>

<span data-ttu-id="c069a-128">Führen Sie [Dotnet ausführen](/dotnet/core/tools/dotnet-run) für den Anwendungsstart.</span><span class="sxs-lookup"><span data-stu-id="c069a-128">Run [dotnet run](/dotnet/core/tools/dotnet-run) to start the app.</span></span> <span data-ttu-id="c069a-129">Es wird eine Meldung ähnlich der folgenden protokolliert:</span><span class="sxs-lookup"><span data-stu-id="c069a-129">A message similar to the following is logged:</span></span>

```console
Now listening on: http://localhost:<port>
```

<span data-ttu-id="c069a-130">Navigieren Sie zu dieser URL in einem Browser.</span><span class="sxs-lookup"><span data-stu-id="c069a-130">Navigate to this URL in a browser.</span></span>

<span data-ttu-id="c069a-131">Die app startet eine Instanz des Servers Angular CLI im Hintergrund.</span><span class="sxs-lookup"><span data-stu-id="c069a-131">The app starts up an instance of the Angular CLI server in the background.</span></span> <span data-ttu-id="c069a-132">Es wird eine Meldung ähnlich der folgenden protokolliert: <em>NG Live Development Server Lauscht auf "localhost":&lt;Otherport&gt;, öffnen Sie in Ihrem Browser auf http://localhost: &lt;Otherport&gt; /</em> .</span><span class="sxs-lookup"><span data-stu-id="c069a-132">A message similar to the following is logged: <em>NG Live Development Server is listening on localhost:&lt;otherport&gt;, open your browser on http://localhost:&lt;otherport&gt;/</em>.</span></span> <span data-ttu-id="c069a-133">Diese Meldung ignorieren&mdash;kann <strong>nicht</strong> die URL für die kombinierte ASP.NET Core und Angular-CLI-app.</span><span class="sxs-lookup"><span data-stu-id="c069a-133">Ignore this message&mdash;it's <strong>not</strong> the URL for the combined ASP.NET Core and Angular CLI app.</span></span>

* * *
<span data-ttu-id="c069a-134">Die Projektvorlage erstellt eine ASP.NET Core-app und einer Angular-app.</span><span class="sxs-lookup"><span data-stu-id="c069a-134">The project template creates an ASP.NET Core app and an Angular app.</span></span> <span data-ttu-id="c069a-135">Die app ASP.NET Core soll für den Datenzugriff, Autorisierung und Bedenken serverseitige verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="c069a-135">The ASP.NET Core app is intended to be used for data access, authorization, and other server-side concerns.</span></span> <span data-ttu-id="c069a-136">Die Angular-app in den die *ClientApp* Unterverzeichnis für alle Aspekte der Benutzeroberfläche verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="c069a-136">The Angular app, residing in the *ClientApp* subdirectory, is intended to be used for all UI concerns.</span></span>

## <a name="add-pages-images-styles-modules-etc"></a><span data-ttu-id="c069a-137">Fügen Sie Seiten, Bilder, Stile, Module, usw. an.</span><span class="sxs-lookup"><span data-stu-id="c069a-137">Add pages, images, styles, modules, etc.</span></span>

<span data-ttu-id="c069a-138">Die *ClientApp* Verzeichnis enthält eine standardmäßige Angular-CLI-app.</span><span class="sxs-lookup"><span data-stu-id="c069a-138">The *ClientApp* directory contains a standard Angular CLI app.</span></span> <span data-ttu-id="c069a-139">Finden Sie unter den offiziellen [Angular Dokumentation](https://github.com/angular/angular-cli/wiki) für Weitere Informationen.</span><span class="sxs-lookup"><span data-stu-id="c069a-139">See the official [Angular documentation](https://github.com/angular/angular-cli/wiki) for more information.</span></span>

<span data-ttu-id="c069a-140">Es gibt jedoch geringfügige Unterschiede zwischen der Angular app, die anhand dieser Vorlage erstellt und von Angular CLI selbst erstellt (über `ng new`), aber die app-Funktionen unterscheiden sich nicht.</span><span class="sxs-lookup"><span data-stu-id="c069a-140">There are slight differences between the Angular app created by this template and the one created by Angular CLI itself (via `ng new`); however, the app's capabilities are unchanged.</span></span> <span data-ttu-id="c069a-141">Die app, die von der Vorlage erstellten enthält eine [Bootstrap](https://getbootstrap.com/)-basierten Layout und ein einfaches routing-Beispiel.</span><span class="sxs-lookup"><span data-stu-id="c069a-141">The app created by the template contains a [Bootstrap](https://getbootstrap.com/)-based layout and a basic routing example.</span></span>

## <a name="run-ng-commands"></a><span data-ttu-id="c069a-142">Führen Sie Befehle ng</span><span class="sxs-lookup"><span data-stu-id="c069a-142">Run ng commands</span></span>

<span data-ttu-id="c069a-143">In einem Eingabeaufforderungsfenster, wechseln Sie zu der *ClientApp* Unterverzeichnis:</span><span class="sxs-lookup"><span data-stu-id="c069a-143">In a command prompt, switch to the *ClientApp* subdirectory:</span></span>

```console
cd ClientApp
```

<span data-ttu-id="c069a-144">Wenn Sie haben die `ng` Tool Global installiert, kann ausgeführt, seine Befehle.</span><span class="sxs-lookup"><span data-stu-id="c069a-144">If you have the `ng` tool installed globally, you can run any of its commands.</span></span> <span data-ttu-id="c069a-145">Sie können z. B. ausführen `ng lint`, `ng test`, oder eine beliebige andere [Angular-CLI-Befehlen](https://github.com/angular/angular-cli/wiki#additional-commands).</span><span class="sxs-lookup"><span data-stu-id="c069a-145">For example, you can run `ng lint`, `ng test`, or any of the other [Angular CLI commands](https://github.com/angular/angular-cli/wiki#additional-commands).</span></span> <span data-ttu-id="c069a-146">Besteht keine Notwendigkeit zur Ausführung `ng serve` , da Ihre app ASP.NET Core befasst sich mit serverseitigen und clientseitigen Teile Ihrer app bedient.</span><span class="sxs-lookup"><span data-stu-id="c069a-146">There's no need to run `ng serve` though, because your ASP.NET Core app deals with serving both server-side and client-side parts of your app.</span></span> <span data-ttu-id="c069a-147">Er verwendet intern `ng serve` in der Entwicklung.</span><span class="sxs-lookup"><span data-stu-id="c069a-147">Internally, it uses `ng serve` in development.</span></span>

<span data-ttu-id="c069a-148">Wenn Sie haben die `ng` Tool installiert haben, führen Sie `npm run ng` stattdessen.</span><span class="sxs-lookup"><span data-stu-id="c069a-148">If you don't have the `ng` tool installed, run `npm run ng` instead.</span></span> <span data-ttu-id="c069a-149">Sie können z. B. ausführen `npm run ng lint` oder `npm run ng test`.</span><span class="sxs-lookup"><span data-stu-id="c069a-149">For example, you can run `npm run ng lint` or `npm run ng test`.</span></span>

## <a name="install-npm-packages"></a><span data-ttu-id="c069a-150">NPM-Pakete installieren</span><span class="sxs-lookup"><span data-stu-id="c069a-150">Install npm packages</span></span>

<span data-ttu-id="c069a-151">Verwenden Sie zum Installieren eines Drittanbieters Npm-Pakete in eine Eingabeaufforderung die *ClientApp* Unterverzeichnis.</span><span class="sxs-lookup"><span data-stu-id="c069a-151">To install third-party npm packages, use a command prompt in the *ClientApp* subdirectory.</span></span> <span data-ttu-id="c069a-152">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="c069a-152">For example:</span></span>

```console
cd ClientApp
npm install --save <package_name>
```

## <a name="publish-and-deploy"></a><span data-ttu-id="c069a-153">Veröffentlichen und Bereitstellen</span><span class="sxs-lookup"><span data-stu-id="c069a-153">Publish and deploy</span></span>

<span data-ttu-id="c069a-154">Führt die app in einem Modus der Einfachheit halber für Entwickler optimiert, bei der Entwicklung.</span><span class="sxs-lookup"><span data-stu-id="c069a-154">In development, the app runs in a mode optimized for developer convenience.</span></span> <span data-ttu-id="c069a-155">Beispielsweise nehmen JavaScript-Bundle Quelle Zuordnungen (, damit beim Debuggen Sie den ursprünglichen TypeScript-Code sehen können).</span><span class="sxs-lookup"><span data-stu-id="c069a-155">For example, JavaScript bundles include source maps (so that when debugging, you can see your original TypeScript code).</span></span> <span data-ttu-id="c069a-156">Die app wird überwacht, ob Änderungen von TypeScript, HTML und CSS-Datei auf dem Datenträger und automatisch erneut kompiliert und lädt, wenn er erkennt, dass diese Dateien zu ändern.</span><span class="sxs-lookup"><span data-stu-id="c069a-156">The app watches for TypeScript, HTML, and CSS file changes on disk and automatically recompiles and reloads when it sees those files change.</span></span>

<span data-ttu-id="c069a-157">Dienen Sie in der Produktion eine Version der app, die für Leistung optimiert wird.</span><span class="sxs-lookup"><span data-stu-id="c069a-157">In production, serve a version of your app that's optimized for performance.</span></span> <span data-ttu-id="c069a-158">Dies ist für konfiguriert automatisch durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="c069a-158">This is configured to happen automatically.</span></span> <span data-ttu-id="c069a-159">Beim Veröffentlichen die Buildkonfiguration eine verkleinerte ausgibt, ahead angegeben (AoT) kompiliert Build des Codes die clientseitige.</span><span class="sxs-lookup"><span data-stu-id="c069a-159">When you publish, the build configuration emits a minified, ahead-of-time (AoT) compiled build of your client-side code.</span></span> <span data-ttu-id="c069a-160">Im Gegensatz zu den Development Build erfordert die Produktions-Build Node.js auf dem Server installiert werden (es sei denn, Sie aktiviert haben [serverseitige Prerendering](#server-side-rendering)).</span><span class="sxs-lookup"><span data-stu-id="c069a-160">Unlike the development build, the production build doesn't require Node.js to be installed on the server (unless you have enabled [server-side prerendering](#server-side-rendering)).</span></span>

<span data-ttu-id="c069a-161">Sie können die Standard [ASP.NET Core Hosting- und Bereitstellung Methoden](xref:host-and-deploy/index).</span><span class="sxs-lookup"><span data-stu-id="c069a-161">You can use standard [ASP.NET Core hosting and deployment methods](xref:host-and-deploy/index).</span></span>

## <a name="run-ng-serve-independently"></a><span data-ttu-id="c069a-162">"Ng Serve" unabhängig ausgeführt</span><span class="sxs-lookup"><span data-stu-id="c069a-162">Run "ng serve" independently</span></span>

<span data-ttu-id="c069a-163">Das Projekt konfiguriert wurde, um eine eigene Instanz des Servers Angular CLI im Hintergrund starten, die ASP.NET Core-app in den Entwicklungsmodus gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="c069a-163">The project is configured to start its own instance of the Angular CLI server in the background when the ASP.NET Core app starts in development mode.</span></span> <span data-ttu-id="c069a-164">Dies ist nützlich, da Sie nicht auf einen separaten Server manuell ausführen.</span><span class="sxs-lookup"><span data-stu-id="c069a-164">This is convenient because you don't have to run a separate server manually.</span></span>

<span data-ttu-id="c069a-165">Es ist ein Nachteil dieses Standard-Setup aus.</span><span class="sxs-lookup"><span data-stu-id="c069a-165">There's a drawback to this default setup.</span></span> <span data-ttu-id="c069a-166">Jedes Mal, die Sie ändern den C#-Code und Ihrer ASP.NET Core app neu gestartet werden muss, wird der Angular-CLI-Server neu.</span><span class="sxs-lookup"><span data-stu-id="c069a-166">Each time you modify your C# code and your ASP.NET Core app needs to restart, the Angular CLI server restarts.</span></span> <span data-ttu-id="c069a-167">Ca. 10 Sekunden ist erforderlich, um die Sicherung starten.</span><span class="sxs-lookup"><span data-stu-id="c069a-167">Around 10 seconds is required to start back up.</span></span> <span data-ttu-id="c069a-168">Wenn Sie häufige C#-Code bearbeitet machen und, dass nicht gewartet Angular CLI möchte, neu zu starten, führen Sie das Angular CLI extern, unabhängig von der ASP.NET Core-Prozess.</span><span class="sxs-lookup"><span data-stu-id="c069a-168">If you're making frequent C# code edits and don't want to wait for Angular CLI to restart, run the Angular CLI server externally, independently of the ASP.NET Core process.</span></span> <span data-ttu-id="c069a-169">Dazu:</span><span class="sxs-lookup"><span data-stu-id="c069a-169">To do so:</span></span>

1. <span data-ttu-id="c069a-170">In einem Eingabeaufforderungsfenster, wechseln Sie zu der *ClientApp* Unterverzeichnis, und starten Sie den Angular CLI Development Server:</span><span class="sxs-lookup"><span data-stu-id="c069a-170">In a command prompt, switch to the *ClientApp* subdirectory, and launch the Angular CLI development server:</span></span>

    ```console
    cd ClientApp
    npm start
    ```

    > [!IMPORTANT]
    > <span data-ttu-id="c069a-171">Verwendung `npm start` auf den Entwicklungsserver Angular CLI nicht starten `ng serve`, damit die Konfiguration in *"Package.JSON"* gewahrt wird.</span><span class="sxs-lookup"><span data-stu-id="c069a-171">Use `npm start` to launch the Angular CLI development server, not `ng serve`, so that the configuration in *package.json* is respected.</span></span> <span data-ttu-id="c069a-172">Um zusätzliche Parameter an den Angular-CLI-Server zu übergeben, fügen Sie sie für das entsprechende `scripts` Zeile in der *"Package.JSON"* Datei.</span><span class="sxs-lookup"><span data-stu-id="c069a-172">To pass additional parameters to the Angular CLI server, add them to the relevant `scripts` line in your *package.json* file.</span></span>

2. <span data-ttu-id="c069a-173">Ändern Sie Ihre app ASP.NET Core, um externe Angular-CLI-Instanz zu verwenden, anstatt eine eigene starten.</span><span class="sxs-lookup"><span data-stu-id="c069a-173">Modify your ASP.NET Core app to use the external Angular CLI instance instead of launching one of its own.</span></span> <span data-ttu-id="c069a-174">In Ihrer *Start* -Klasse, ersetzen Sie die `spa.UseAngularCliServer` Aufruf durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="c069a-174">In your *Startup* class, replace the `spa.UseAngularCliServer` invocation with the following:</span></span>

    ```csharp
    spa.UseProxyToSpaDevelopmentServer("http://localhost:4200");
    ```

<span data-ttu-id="c069a-175">Wenn Sie Ihre app ASP.NET Core starten, wird nicht es einen Angular-CLI-Server zu starten.</span><span class="sxs-lookup"><span data-stu-id="c069a-175">When you start your ASP.NET Core app, it won't launch an Angular CLI server.</span></span> <span data-ttu-id="c069a-176">Die Instanz, die Sie manuell gestartet werden, wird stattdessen verwendet.</span><span class="sxs-lookup"><span data-stu-id="c069a-176">The instance you started manually is used instead.</span></span> <span data-ttu-id="c069a-177">Dadurch können sie zum Starten und Neustarten schneller.</span><span class="sxs-lookup"><span data-stu-id="c069a-177">This enables it to start and restart faster.</span></span> <span data-ttu-id="c069a-178">Nicht mehr wartet Angular CLI, um Ihre Client-app erstellen Sie jedes Mal neu auf.</span><span class="sxs-lookup"><span data-stu-id="c069a-178">It's no longer waiting for Angular CLI to rebuild your client app each time.</span></span>

## <a name="server-side-rendering"></a><span data-ttu-id="c069a-179">Serverseitiges rendering</span><span class="sxs-lookup"><span data-stu-id="c069a-179">Server-side rendering</span></span>

<span data-ttu-id="c069a-180">Sie können vorab Rendern die Angular-app auf dem Server, auf dem Client ausführen, als eine Funktion die Leistung.</span><span class="sxs-lookup"><span data-stu-id="c069a-180">As a performance feature, you can choose to pre-render your Angular app on the server as well as running it on the client.</span></span> <span data-ttu-id="c069a-181">Dies bedeutet, dass Browser HTML-Markup erhalten, anfängliche Ihrer app-Benutzeroberfläche darstellt, sodass sie auch vor dem Herunterladen und Ausführen der JavaScript-Pakete anzeigen.</span><span class="sxs-lookup"><span data-stu-id="c069a-181">This means that browsers receive HTML markup representing your app's initial UI, so they display it even before downloading and executing your JavaScript bundles.</span></span> <span data-ttu-id="c069a-182">Ein Großteil der Implementierung dieses stammt eine Angular-Funktion wird aufgerufen, [Angular Universal](https://universal.angular.io/).</span><span class="sxs-lookup"><span data-stu-id="c069a-182">Most of the implementation of this comes from an Angular feature called [Angular Universal](https://universal.angular.io/).</span></span>

> [!TIP]
> <span data-ttu-id="c069a-183">Aktivieren von serverseitigem Rendering enthält (SSR) einige zusätzliche Komplikationen sowohl während der Entwicklung und Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="c069a-183">Enabling server-side rendering (SSR) introduces a number of extra complications both during development and deployment.</span></span> <span data-ttu-id="c069a-184">Lesen [Nachteile SSR](#drawbacks-of-ssr) zu bestimmen, ob SSR für Ihre Anforderungen geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="c069a-184">Read [drawbacks of SSR](#drawbacks-of-ssr) to determine if SSR is a good fit for your requirements.</span></span>

<span data-ttu-id="c069a-185">Um SSR zu aktivieren, müssen Sie eine Anzahl von Ergänzungen für das Projekt zu machen.</span><span class="sxs-lookup"><span data-stu-id="c069a-185">To enable SSR, you need to make a number of additions to your project.</span></span>

<span data-ttu-id="c069a-186">In der *Start* -Klasse, *nach* die Zeile, die konfiguriert `spa.Options.SourcePath`, und *vor* der Aufruf von `UseAngularCliServer` oder `UseProxyToSpaDevelopmentServer`, fügen Sie die folgenden:</span><span class="sxs-lookup"><span data-stu-id="c069a-186">In the *Startup* class, *after* the line that configures `spa.Options.SourcePath`, and *before* the call to `UseAngularCliServer` or `UseProxyToSpaDevelopmentServer`, add the following:</span></span>

[!code-csharp[](sample/AngularServerSideRendering/Startup.cs?name=snippet_Call_UseSpa&highlight=5-12)]

<span data-ttu-id="c069a-187">In den Entwicklungsmodus, dieser Code versucht, auf das SSR-Bundle erstellen, durch Ausführen des Skripts `build:ssr`, definiert *ClientApp\package.json*.</span><span class="sxs-lookup"><span data-stu-id="c069a-187">In development mode, this code attempts to build the SSR bundle by running the script `build:ssr`, which is defined in *ClientApp\package.json*.</span></span> <span data-ttu-id="c069a-188">Dies erstellt eine Angular app namens `ssr`, ist nicht die noch definiert.</span><span class="sxs-lookup"><span data-stu-id="c069a-188">This builds an Angular app named `ssr`, which isn't yet defined.</span></span> 

<span data-ttu-id="c069a-189">Am Ende der `apps` array *ClientApp/.angular-cli.json*, definieren Sie eine zusätzliche app mit dem Namen `ssr`.</span><span class="sxs-lookup"><span data-stu-id="c069a-189">At the end of the `apps` array in *ClientApp/.angular-cli.json*, define an extra app with name `ssr`.</span></span> <span data-ttu-id="c069a-190">Verwenden Sie die folgenden Optionen:</span><span class="sxs-lookup"><span data-stu-id="c069a-190">Use the following options:</span></span>

[!code-json[](sample/AngularServerSideRendering/ClientApp/.angular-cli.json?range=24-41)]

<span data-ttu-id="c069a-191">Diese neue SSR-fähigen app-Konfiguration erfordert zwei weitere Dateien: *tsconfig.server.json* und *main.server.ts*.</span><span class="sxs-lookup"><span data-stu-id="c069a-191">This new SSR-enabled app configuration requires two further files: *tsconfig.server.json* and *main.server.ts*.</span></span> <span data-ttu-id="c069a-192">Die *tsconfig.server.json* -Datei gibt die Optionen für TypeScript-Kompilierung.</span><span class="sxs-lookup"><span data-stu-id="c069a-192">The *tsconfig.server.json* file specifies TypeScript compilation options.</span></span> <span data-ttu-id="c069a-193">Die *main.server.ts* Datei dient als Codeeinstiegspunkt während der SSR.</span><span class="sxs-lookup"><span data-stu-id="c069a-193">The *main.server.ts* file serves as the code entry point during SSR.</span></span>

<span data-ttu-id="c069a-194">Fügen Sie eine neue Datei namens *tsconfig.server.json* in *ClientApp/Src* (zusammen mit den vorhandenen *tsconfig.app.json*), enthält die folgenden:</span><span class="sxs-lookup"><span data-stu-id="c069a-194">Add a new file called *tsconfig.server.json* inside *ClientApp/src* (alongside the existing *tsconfig.app.json*), containing the following:</span></span>

[!code-json[](sample/AngularServerSideRendering/ClientApp/src/tsconfig.server.json)]

<span data-ttu-id="c069a-195">Diese Datei wird konfiguriert, des Angular AoT Compiler für ein Modul mit dem Namen gesucht werden soll `app.server.module`.</span><span class="sxs-lookup"><span data-stu-id="c069a-195">This file configures Angular's AoT compiler to look for a module called `app.server.module`.</span></span> <span data-ttu-id="c069a-196">Fügen Sie dies durch Erstellen einer neuen Datei am *ClientApp/src/app/app.server.module.ts* (zusammen mit den vorhandenen *app.module.ts*), die Folgendes enthält:</span><span class="sxs-lookup"><span data-stu-id="c069a-196">Add this by creating a new file at *ClientApp/src/app/app.server.module.ts* (alongside the existing *app.module.ts*) containing the following:</span></span> 

[!code-typescript[](sample/AngularServerSideRendering/ClientApp/src/app/app.server.module.ts)]

<span data-ttu-id="c069a-197">Dieses Modul erbt von der Clientseite `app.module` und definiert, welche zusätzlichen Angular-Module, die während der SSR verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="c069a-197">This module inherits from your client-side `app.module` and defines which extra Angular modules are available during SSR.</span></span>

<span data-ttu-id="c069a-198">Bedenken Sie, dass die neue `ssr` Eintrag im *.angular cli.json* auf die verwiesen wird einer Eintrag Punktdatei mit dem Namen *main.server.ts*.</span><span class="sxs-lookup"><span data-stu-id="c069a-198">Recall that the new `ssr` entry in *.angular-cli.json* referenced an entry point file called *main.server.ts*.</span></span> <span data-ttu-id="c069a-199">Sie wurden noch nicht die Datei hinzugefügt und ist jetzt tun.</span><span class="sxs-lookup"><span data-stu-id="c069a-199">You haven't yet added that file, and now is time to do so.</span></span> <span data-ttu-id="c069a-200">Erstellen Sie eine neue Datei am *ClientApp/src/main.server.ts* (zusammen mit den vorhandenen *main.ts*), enthält die folgenden:</span><span class="sxs-lookup"><span data-stu-id="c069a-200">Create a new file at *ClientApp/src/main.server.ts* (alongside the existing *main.ts*), containing the following:</span></span>

[!code-typescript[](sample/AngularServerSideRendering/ClientApp/src/main.server.ts)]

<span data-ttu-id="c069a-201">Dieser Datei Code wird ASP.NET Core für jede Anforderung bei der Ausführung der `UseSpaPrerendering` -Middleware, die Sie hinzugefügt haben die *Start* Klasse.</span><span class="sxs-lookup"><span data-stu-id="c069a-201">This file's code is what ASP.NET Core executes for each request when it runs the `UseSpaPrerendering` middleware that you added to the *Startup* class.</span></span> <span data-ttu-id="c069a-202">Er behandelt die empfangenden `params` aus der .NET Code (z. B. der URL angefordert wird) und das Aufrufen Angular SSR-APIs zum Abrufen der resultierenden HTML.</span><span class="sxs-lookup"><span data-stu-id="c069a-202">It deals with receiving `params` from the .NET code (such as the URL being requested), and making calls to Angular SSR APIs to get the resulting HTML.</span></span> 

<span data-ttu-id="c069a-203">Streng-sprechen, ist dies ausreichend, um in den Entwicklungsmodus SSR aktivieren.</span><span class="sxs-lookup"><span data-stu-id="c069a-203">Strictly-speaking, this is sufficient to enable SSR in development mode.</span></span> <span data-ttu-id="c069a-204">Es ist entscheidend dafür, dass eine endgültige Änderung, damit Ihre app ordnungsgemäß funktioniert, wenn veröffentlicht.</span><span class="sxs-lookup"><span data-stu-id="c069a-204">It's essential to make one final change so that your app works correctly when published.</span></span> <span data-ttu-id="c069a-205">In Ihrer app Main *csproj* Datei, legen Sie die `BuildServerSideRenderer` Eigenschaftswert an `true`:</span><span class="sxs-lookup"><span data-stu-id="c069a-205">In your app's main *.csproj* file, set the `BuildServerSideRenderer` property value to `true`:</span></span>

[!code-xml[](sample/AngularServerSideRendering/AngularServerSideRendering.csproj?name=snippet_EnableBuildServerSideRenderer)]

<span data-ttu-id="c069a-206">Wird konfiguriert, führen Sie den Buildprozess `build:ssr` während der Veröffentlichung und die SSR-Dateien auf dem Server bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="c069a-206">This configures the build process to run `build:ssr` during publishing and deploy the SSR files to the server.</span></span> <span data-ttu-id="c069a-207">Wenn Sie dies nicht aktivieren, SSR in Produktion schlägt fehl.</span><span class="sxs-lookup"><span data-stu-id="c069a-207">If you don't enable this, SSR fails in production.</span></span>

<span data-ttu-id="c069a-208">Wenn Ihre app-Entwicklung oder Produktion-Modus ausgeführt wird, rendert vorab Angular Code als HTML-Code auf dem Server.</span><span class="sxs-lookup"><span data-stu-id="c069a-208">When your app runs in either development or production mode, the Angular code pre-renders as HTML on the server.</span></span> <span data-ttu-id="c069a-209">Der clientseitige Code wird normal ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="c069a-209">The client-side code executes as normal.</span></span>

### <a name="pass-data-from-net-code-into-typescript-code"></a><span data-ttu-id="c069a-210">Übergeben von Daten aus .NET Code in TypeScript-code</span><span class="sxs-lookup"><span data-stu-id="c069a-210">Pass data from .NET code into TypeScript code</span></span>

<span data-ttu-id="c069a-211">Während der SSR empfiehlt es sich Ihre app Angular pro Anforderung Daten aus Ihrer app ASP.NET Core übergeben.</span><span class="sxs-lookup"><span data-stu-id="c069a-211">During SSR, you might want to pass per-request data from your ASP.NET Core app into your Angular app.</span></span> <span data-ttu-id="c069a-212">Beispielsweise könnten Sie Cookieinformationen übergeben oder etwas aus einer Datenbank lesen.</span><span class="sxs-lookup"><span data-stu-id="c069a-212">For example, you could pass cookie information or something read from a database.</span></span> <span data-ttu-id="c069a-213">Bearbeiten Sie hierzu die *Start* Klasse.</span><span class="sxs-lookup"><span data-stu-id="c069a-213">To do this, edit your *Startup* class.</span></span> <span data-ttu-id="c069a-214">Der Rückruf für `UseSpaPrerendering`, legen Sie einen Wert für `options.SupplyData` z. B. Folgendes:</span><span class="sxs-lookup"><span data-stu-id="c069a-214">In the callback for `UseSpaPrerendering`, set a value for `options.SupplyData` such as the following:</span></span>

```csharp
options.SupplyData = (context, data) =>
{
    // Creates a new value called isHttpsRequest that's passed to TypeScript code
    data["isHttpsRequest"] = context.Request.IsHttps;
};
```

<span data-ttu-id="c069a-215">Die `SupplyData` Rückruf können Sie beliebige übergeben, die pro Anforderung, die JSON-serialisierbare Daten (z. B. Zeichenfolgen, boolesche Werte oder Zahlen).</span><span class="sxs-lookup"><span data-stu-id="c069a-215">The `SupplyData` callback lets you pass arbitrary, per-request, JSON-serializable data (for example, strings, booleans, or numbers).</span></span> <span data-ttu-id="c069a-216">Ihre *main.server.ts* Code erhält als `params.data`.</span><span class="sxs-lookup"><span data-stu-id="c069a-216">Your *main.server.ts* code receives this as `params.data`.</span></span> <span data-ttu-id="c069a-217">Im vorangehenden Codebeispiel übergibt z. B. einen booleschen Wert als `params.data.isHttpsRequest` in die `createServerRenderer` Rückruf.</span><span class="sxs-lookup"><span data-stu-id="c069a-217">For example, the preceding code sample passes a boolean value as `params.data.isHttpsRequest` into the `createServerRenderer` callback.</span></span> <span data-ttu-id="c069a-218">Sie können dies auf andere Teile Ihrer App in irgendeiner Weise durch Angular unterstützt übergeben.</span><span class="sxs-lookup"><span data-stu-id="c069a-218">You can pass this to other parts of your app in any way supported by Angular.</span></span> <span data-ttu-id="c069a-219">Beispielsweise finden Sie unter wie *main.server.ts* übergibt die `BASE_URL` Wert, der eine beliebige Komponente, deren Konstruktor für den Empfang deklariert ist.</span><span class="sxs-lookup"><span data-stu-id="c069a-219">For example, see how *main.server.ts* passes the `BASE_URL` value to any component whose constructor is declared to receive it.</span></span>

### <a name="drawbacks-of-ssr"></a><span data-ttu-id="c069a-220">Nachteile der SSR</span><span class="sxs-lookup"><span data-stu-id="c069a-220">Drawbacks of SSR</span></span>

<span data-ttu-id="c069a-221">Nicht alle apps, profitieren von SSR ab.</span><span class="sxs-lookup"><span data-stu-id="c069a-221">Not all apps benefit from SSR.</span></span> <span data-ttu-id="c069a-222">Der Hauptvorteil ist wahrgenommen.</span><span class="sxs-lookup"><span data-stu-id="c069a-222">The primary benefit is perceived performance.</span></span> <span data-ttu-id="c069a-223">Besucher erreichen Ihrer app über eine langsame Netzwerkverbindung oder auf langsamen mobilen Geräten finden Sie unter der anfänglichen Benutzeroberfläche schnell, auch wenn es eine Weile zum Abrufen oder Analysieren der JavaScript-Bundles dauert.</span><span class="sxs-lookup"><span data-stu-id="c069a-223">Visitors reaching your app over a slow network connection or on slow mobile devices see the initial UI quickly, even if it takes a while to fetch or parse the JavaScript bundles.</span></span> <span data-ttu-id="c069a-224">Allerdings sind viele SPAs hauptsächlich über schnelle, interne Unternehmensnetzwerken auf schnelle Computern angezeigt, in dem die app nahezu sofort.</span><span class="sxs-lookup"><span data-stu-id="c069a-224">However, many SPAs are mainly used over fast, internal company networks on fast computers where the app appears almost instantly.</span></span>

<span data-ttu-id="c069a-225">Gleichzeitig gibt es erhebliche Nachteile SSR aktivieren.</span><span class="sxs-lookup"><span data-stu-id="c069a-225">At the same time, there are significant drawbacks to enabling SSR.</span></span> <span data-ttu-id="c069a-226">Es erhöht die Komplexität des Entwicklungsprozesses.</span><span class="sxs-lookup"><span data-stu-id="c069a-226">It adds complexity to your development process.</span></span> <span data-ttu-id="c069a-227">Der Code muss in zwei verschiedene Umgebungen ausgeführt: clientseitige und serverseitige (in eine Node.js-Umgebung aus ASP.NET Core aufgerufen wurde).</span><span class="sxs-lookup"><span data-stu-id="c069a-227">Your code must run in two different environments: client-side and server-side (in a Node.js environment invoked from ASP.NET Core).</span></span> <span data-ttu-id="c069a-228">Hier sind einige Punkte zu berücksichtigen:</span><span class="sxs-lookup"><span data-stu-id="c069a-228">Here are some things to bear in mind:</span></span>

* <span data-ttu-id="c069a-229">SSR erfordert eine Node.js-Installation auf Produktionsservern.</span><span class="sxs-lookup"><span data-stu-id="c069a-229">SSR requires a Node.js installation on your production servers.</span></span> <span data-ttu-id="c069a-230">Dies wird automatisch die Groß-/Kleinschreibung für einige Szenarien, z. B. Azure-App-Dienste, aber nicht für andere, wie Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="c069a-230">This is automatically the case for some deployment scenarios, such as Azure App Services, but not for others, such as Azure Service Fabric.</span></span>
* <span data-ttu-id="c069a-231">Aktivieren der `BuildServerSideRenderer` Flag Ursachen Erstellen Ihrer *Node_modules* Directory zu veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="c069a-231">Enabling the `BuildServerSideRenderer` build flag causes your *node_modules* directory to publish.</span></span> <span data-ttu-id="c069a-232">Dieser Ordner enthält 20.000 Dateien, die Bereitstellungszeit erhöht.</span><span class="sxs-lookup"><span data-stu-id="c069a-232">This folder contains 20,000+ files, which increases deployment time.</span></span>
* <span data-ttu-id="c069a-233">Zum Ausführen von Code in einer Umgebung mit Node.js es nicht verlässlich das Vorhandensein des Browser-spezifische JavaScript-APIs wie z. B. `window` oder `localStorage`.</span><span class="sxs-lookup"><span data-stu-id="c069a-233">To run your code in a Node.js environment, it can't rely on the existence of browser-specific JavaScript APIs such as `window` or `localStorage`.</span></span> <span data-ttu-id="c069a-234">Wenn Ihr Code (oder eine Bibliothek eines Drittanbieters verwenden möchten, auf die Sie verweisen) versucht, die diese APIs verwenden, erhalten Sie einen Fehler während der SSR.</span><span class="sxs-lookup"><span data-stu-id="c069a-234">If your code (or some third-party library you reference) tries to use these APIs, you'll get an error during SSR.</span></span> <span data-ttu-id="c069a-235">Beispielsweise verwenden Sie jQuery nicht mit ein, da sie browserspezifischen APIs an vielen Stellen verweist.</span><span class="sxs-lookup"><span data-stu-id="c069a-235">For example, don't use jQuery because it references browser-specific APIs in many places.</span></span> <span data-ttu-id="c069a-236">Um Fehler zu vermeiden, müssen Sie SSR vermeiden oder Browser-spezifische APIs oder Bibliotheken vermeiden.</span><span class="sxs-lookup"><span data-stu-id="c069a-236">To prevent errors, you must either avoid SSR or avoid browser-specific APIs or libraries.</span></span> <span data-ttu-id="c069a-237">Sie können alle Aufrufe dieser APIs in Überprüfungen, um sicherzustellen, dass sie während der SSR aufgerufen werden nicht einschließen.</span><span class="sxs-lookup"><span data-stu-id="c069a-237">You can wrap any calls to such APIs in checks to ensure they aren't invoked during SSR.</span></span> <span data-ttu-id="c069a-238">Verwenden Sie z. B. eine Überprüfung wie im folgenden in JavaScript oder TypeScript-Code:</span><span class="sxs-lookup"><span data-stu-id="c069a-238">For example, use a check such as the following in JavaScript or TypeScript code:</span></span>

    ```javascript
    if (typeof window !== 'undefined') {
        // Call browser-specific APIs here
    }
    ```
