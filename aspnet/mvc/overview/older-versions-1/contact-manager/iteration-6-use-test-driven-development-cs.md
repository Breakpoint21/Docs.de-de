---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
title: 'Iteration #6 – verwenden Sie eine testgesteuerte Entwicklung (c#) | Microsoft Docs'
author: microsoft
description: In dieser Iteration sechste wir neue Funktionalität Hinzufügen der Anwendung durch Schreiben von Komponententests zuerst und Code für die Komponententests schreiben. In dieser Iteration...
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2009
ms.topic: article
ms.assetid: 013c3c26-7dc3-41d1-8064-f233c86008b5
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
msc.type: authoredcontent
ms.openlocfilehash: 94502625f66d3eb08a24b8f2a369bf456a3367b1
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
ms.locfileid: "30876292"
---
<a name="iteration-6--use-test-driven-development-c"></a><span data-ttu-id="bd8a7-104">Iteration #6 – verwenden Sie eine testgesteuerte Entwicklung (c#)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-104">Iteration #6 – Use test-driven development (C#)</span></span>
====================
<span data-ttu-id="bd8a7-105">durch [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="bd8a7-106">Herunterladen von Code</span><span class="sxs-lookup"><span data-stu-id="bd8a7-106">Download Code</span></span>](iteration-6-use-test-driven-development-cs/_static/contactmanager_6_cs1.zip)

> <span data-ttu-id="bd8a7-107">In dieser Iteration sechste wir neue Funktionalität Hinzufügen der Anwendung durch Schreiben von Komponententests zuerst und Code für die Komponententests schreiben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="bd8a7-108">In dieser Iteration fügen wir Kontakt Gruppen hinzu.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-108">In this iteration, we add contact groups.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="bd8a7-109">Erstellen einer ASP.NET MVC-Anwendung Kontaktverwaltung (c#)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-109">Building a Contact Management ASP.NET MVC Application (C#)</span></span>
  

<span data-ttu-id="bd8a7-110">In dieser Reihe von Lernprogrammen erstellen wir eine vollständige Contact Management-Anwendung von Grund auf Fertig stellen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="bd8a7-111">Die Kontakt-Manager-Anwendung können Sie zum Speichern von Kontaktinformationen - Namen, Telefonnummern und e-Mail-Adressen - eine Liste der Personen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="bd8a7-112">Erstellen der Anwendung über mehrere Iterationen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="bd8a7-113">Bei jeder Iteration verbessern wir allmählich die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="bd8a7-114">Das Ziel dieses Ansatzes für mehrere Iteration ist, um den Grund für jede Änderung verstehen können.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="bd8a7-115">Iteration #1 – Erstellen der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="bd8a7-116">In der ersten Iteration erstellen wir die Kontakt-Manager in der einfachsten möglich.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="bd8a7-117">Wir fügen die Unterstützung für die grundlegenden Datenbankvorgängen: erstellen, lesen, aktualisieren und löschen (CRUD).</span><span class="sxs-lookup"><span data-stu-id="bd8a7-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="bd8a7-118">Iteration #2 – Stellen Sie die Anwendung gut aussehen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="bd8a7-119">In dieser Iteration haben wir die Darstellung der Anwendung verbessern, indem Ändern der Standard-Gestaltungsvorlage für ASP.NET MVC-Ansicht und cascading Stylesheet.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="bd8a7-120">Iteration #3 - formularvalidierung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="bd8a7-121">In der dritten Iteration fügen wir grundlegende formularvalidierung hinzu.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="bd8a7-122">Es wird verhindert, dass Personen senden eines Formulars ohne erforderlichen Felder des Formulars abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="bd8a7-123">Wir überprüfen e-Mail-Adressen und Telefonnummern.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="bd8a7-124">Iteration #4 – Stellen Sie die Anwendung, die lose miteinander verbunden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="bd8a7-125">In dieser dritten Iteration nutzen wir mehrere Software-Entwurfsmuster, damit sie leichter zu verwalten und ändern die Kontakt-Manager-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-125">In this third iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="bd8a7-126">Beispielsweise gestalten wir unsere Anwendung in das Repository und die Abhängigkeitsinjektion-Muster verwenden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="bd8a7-127">Iteration #5: Erstellen von Komponententests.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="bd8a7-128">In der fünften Iteration stellen wir unsere Anwendung einfacher zu verwalten und ändern, indem Sie Komponententests hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="bd8a7-129">Wir unsere Daten Modellklassen modellieren und erstellen Sie Komponententests für unsere Controller und die Validierungslogik.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="bd8a7-130">Iteration #6 – verwenden Sie eine testgesteuerte Entwicklung.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="bd8a7-131">In dieser Iteration sechste wir neue Funktionalität Hinzufügen der Anwendung durch Schreiben von Komponententests zuerst und Code für die Komponententests schreiben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="bd8a7-132">In dieser Iteration fügen wir Kontakt Gruppen hinzu.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="bd8a7-133">Iteration #7 - Ajax-Funktionen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="bd8a7-134">In der siebten Iteration werden die Reaktionsfähigkeit und die Leistung der Anwendung durch Hinzufügen von Unterstützung für Ajax verbessern.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="bd8a7-135">Diese Iteration</span><span class="sxs-lookup"><span data-stu-id="bd8a7-135">This Iteration</span></span>

<span data-ttu-id="bd8a7-136">In vorherigen Iterationen der Kontakt-Manager-Anwendung erstellt Komponententests zur getesteten Codes Sicherheitsnetz verliehen wird.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="bd8a7-137">Die Motivation für die Erstellung eines Komponententests wurde damit unser Code stabiler zu ändern.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="bd8a7-138">Bei Komponententests erfüllt können wir stört keine Änderungen an den getesteten Codes und sofort zu wissen, ob wir bestehenden Funktionen außer Kraft gesetzt wurden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="bd8a7-139">In dieser Iteration verwenden wir Komponententests für eine vollkommen andere Zweck.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="bd8a7-140">In dieser Iteration verwenden wir Komponententests als Teil einer Anwendung Entwurfsphilosophie aufgerufen *testorientierte Entwicklung*.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="bd8a7-141">Wenn Sie eine testgesteuerte Entwicklung üben Sie zuerst Tests schreiben und Schreiben Sie Code anhand der Tests.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="bd8a7-142">Genauer gesagt, wenn testorientierte Entwicklung zu üben, umfasst drei Schritte, die Sie, beim Erstellen von Code abschließen (Rot / Grün/Refactor):</span><span class="sxs-lookup"><span data-stu-id="bd8a7-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="bd8a7-143">Schreiben eines Komponententests, die nicht (Rot)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="bd8a7-144">Schreiben Sie Code, übergeben den Komponententest (Grün)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="bd8a7-145">Umgestalten des Codes (Refactor)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="bd8a7-146">Zuerst, Schreiben Sie den Komponententest.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-146">First, you write the unit test.</span></span> <span data-ttu-id="bd8a7-147">Der Komponententest sollten so formulieren Ihre Absicht für wie Codes erwartet verhält.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="bd8a7-148">Wenn Sie zuerst den Komponententest erstellen, werden sollte, schlägt der Komponententest fehl.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="bd8a7-149">Der Test sollte fehlschlagen, da Sie noch keine Anwendungscode geschrieben haben, der den Test erfüllt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="bd8a7-150">Als Nächstes schreiben Sie nur so viel Code in der Reihenfolge für den Komponententest zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="bd8a7-151">Das Ziel ist bei der Datenerfassung laziest, sloppiest und schnellste Möglichkeit den Code zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="bd8a7-152">Sie sollten Zeit darum geht, die Architektur der Anwendung nicht verschwendet.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="bd8a7-153">Stattdessen sollten Sie die minimale Menge Code erforderlich, erfüllen die Absicht ausgedrückt werden, indem Sie den Komponententest schreiben konzentrieren.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="bd8a7-154">Nach dem Sie so viel Code verfasst haben, können Sie schließlich Schritt zurück und die allgemeine Architektur Ihrer Anwendung berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="bd8a7-155">In diesem Schritt haben Sie (Refactor) schreiben Sie Code nutzen Softwareentwurf dafür Muster – z. B. das Repositorymuster--, damit Ihr Code sind besser verwaltbar ist.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="bd8a7-156">Sie können Code in diesem Schritt fearlessly umschreiben, da Code durch Komponententests abgedeckt ist.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="bd8a7-157">Es gibt viele Vorteile, die aus testorientierte Entwicklung zu üben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="bd8a7-158">Erste, Test-driven Development erzwingt, dass Sie sich auf Code zu konzentrieren, die tatsächlich geschrieben werden muss.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="bd8a7-159">Da Sie ständig befasst sind neben dem Schreiben von genügend Code aus, um einen bestimmten Test bestehen, werden Sie daran gehindert neugierigen in die schädlicher Pflanzen und Schreiben große Mengen des Codes, die nie verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="bd8a7-160">Zweitens erzwingt Entwurf "test zuerst" Methoden zum Schreiben von Code aus der Perspektive des wie Codes verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="bd8a7-161">Das heißt, wenn testorientierte Entwicklung zu üben, Schreiben ständig die Tests im Hinblick auf Benutzer Sie.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="bd8a7-162">Aus diesem Grund kann eine testgesteuerte Entwicklung leichter verständlich und übersichtlicher-APIs führen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="bd8a7-163">Schließlich erzwingt eine testgesteuerte Entwicklung Schreiben von Komponententests im Rahmen der üblichen Prozess der Schreiben einer Anwendung.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="bd8a7-164">Ein Projektstichtag erreicht, ist das Testen in der Regel zunächst, die das Fenster wechselt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="bd8a7-165">Wenn testorientierte Entwicklung zu üben können Sie andererseits, wahrscheinlicher virtuous über das Schreiben von Komponententests, da eine testgesteuerte Entwicklung Komponententests zentralen an den Prozess der Erstellung einer Anwendung werden können.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="bd8a7-166">Weitere Informationen zum Test-driven Development, Michael Feathers Buch zu lesen sollten **effektiv arbeiten, mit Legacycode**.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>


<span data-ttu-id="bd8a7-167">In dieser Iteration fügen wir ein neues Feature für unsere Kontakt-Manager-Anwendung hinzu.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="bd8a7-168">Wir fügen Sie Unterstützung für erhalten Sie Gruppen hinzu.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-168">We add support for Contact Groups.</span></span> <span data-ttu-id="bd8a7-169">Sie können erhalten Sie Gruppen zum Organisieren von Kontakten in Kategorien, z. B. Business und "Friend" verwenden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="bd8a7-170">Wir werden unsere Anwendung anhand eines Prozesses von testorientierte Entwicklung diese neuen Funktionen hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="bd8a7-171">Wir unsere Komponententests zuerst schreiben, und wir alle unsere Code für diese Tests schreiben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="bd8a7-172">Was ruft getestet</span><span class="sxs-lookup"><span data-stu-id="bd8a7-172">What Gets Tested</span></span>

<span data-ttu-id="bd8a7-173">Wie in vorherigen Iterationen erläutert, in der Regel nicht Schreiben von Komponententests für Datenzugriffslogik oder Logik anzeigen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="bd8a7-174">Sie Verschlüsselungskennwort t Schreiben von Komponententests für Datenzugriffslogik, da den Zugriff auf eine Datenbank um einen relativ langsam Vorgang handelt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="bd8a7-175">Sie Verschlüsselungskennwort t Schreiben von Komponententests für ansichtslogik, da der Zugriff auf eine Sicht Spinvorgänge Einrichten eines Webservers erforderlich ist. dies ein relativ langsamer Vorgang ist.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="bd8a7-176">Sie sollte nicht t einen Komponententest schreiben, es sei denn, der Test immer wieder sehr schnell ausgeführt werden kann</span><span class="sxs-lookup"><span data-stu-id="bd8a7-176">You shouldn t write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="bd8a7-177">Da eine testgesteuerte Entwicklung durch Komponententests gesteuert wird, konzentrieren wir uns zunächst auf dem Controller und Geschäftslogik schreiben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="bd8a7-178">Wir die berühren, die Datenbank oder Sichten vermeiden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-178">We avoid touching the database or views.</span></span> <span data-ttu-id="bd8a7-179">Wir/t gewonnen Änderungen an der Datenbank oder unsere Ansichten bis zum Ende dieses Lernprogramms erstellen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-179">We won t modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="bd8a7-180">Beginnen wir mit was getestet werden können.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="bd8a7-181">Erstellen von User Storys</span><span class="sxs-lookup"><span data-stu-id="bd8a7-181">Creating User Stories</span></span>

<span data-ttu-id="bd8a7-182">Wenn eine testgesteuerte Entwicklung zu üben, beginnen Sie immer durch einen Test zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="bd8a7-183">Dies löst sofort die Frage: wie Sie sich entscheiden, welcher Test zuerst schreiben?</span><span class="sxs-lookup"><span data-stu-id="bd8a7-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="bd8a7-184">Um diese Frage zu beantworten, Schreiben Sie eine Reihe von [ **User Storys**](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="bd8a7-184">To answer this question, you should write a set of [**user stories**](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="bd8a7-185">Eine User Story ist eine sehr kurze (in der Regel einen Satz) Beschreibung der Software erforderlich.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="bd8a7-186">Es sollte eine nichttechnische Beschreibung einer Anforderung im Hinblick auf Benutzer geschrieben sein.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="bd8a7-187">Hier s die Zusammenstellung von User Stories, die durch die neue Gruppe Kontakt-Funktion erforderlichen Funktionen zu beschreiben:</span><span class="sxs-lookup"><span data-stu-id="bd8a7-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="bd8a7-188">Benutzer kann eine Liste der Kontakt Gruppen anzeigen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="bd8a7-189">Benutzer kann eine neue Gruppe von Kontakte erstellen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="bd8a7-190">Benutzer kann eine vorhandene Kontakte Gruppe löschen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="bd8a7-191">Benutzer kann eine Gruppe von Kontakte auswählen, für die Erstellung ein neues Kontakts.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="bd8a7-192">Benutzer kann eine Gruppe von Kontakte auswählen, beim Bearbeiten eines vorhandenen Kontakts.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="bd8a7-193">Eine Liste der Kontakt Gruppen wird in die Indexansicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="bd8a7-194">Wenn ein Benutzer eine Gruppe von Kontakte klickt, wird eine Liste der übereinstimmenden Kontakte angezeigt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="bd8a7-195">Beachten Sie, dass diese Liste von User Stories von einem Kunden verständlich ist.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="bd8a7-196">Es ist nicht erwähnt technische Implementierungsdetails.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="bd8a7-197">Beim Erstellen der Anwendung, kann die Zusammenstellung von User Stories verfeinerten werden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="bd8a7-198">Sie können zur funktionsunfähigkeit von einer User Storys in mehrere Storys (Anforderungen).</span><span class="sxs-lookup"><span data-stu-id="bd8a7-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="bd8a7-199">Sie könnten z. B., dass das Erstellen einer neuen Kontakten Gruppe Validierung beinhalten.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="bd8a7-200">Senden eine Gruppe von Kontakte ohne Namen sollten tritt ein Validierungsfehler zurück.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="bd8a7-201">Nachdem Sie eine Liste von User Storys erstellt haben, können Sie den ersten Komponententest schreiben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="bd8a7-202">Wir beginnen mit der Erstellung eines Komponententests für die Anzeige der Liste der Kontakt-Gruppen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="bd8a7-203">Wenden Sie sich an Auflistungsgruppen</span><span class="sxs-lookup"><span data-stu-id="bd8a7-203">Listing Contact Groups</span></span>

<span data-ttu-id="bd8a7-204">Unsere erste Benutzertextabschnitt ist, dass ein Benutzer eine Liste der Kontakt Gruppen anzeigen werden soll.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="bd8a7-205">Dieser Artikel in einem Test express ist erforderlich.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-205">We need to express this story with a test.</span></span>

<span data-ttu-id="bd8a7-206">Erstellen ein neuen Komponententests durch Rechtsklicken auf den Ordner Controllers in das Projekt ContactManager.Tests auswählen **hinzufügen, testen Sie neue**, und wählen die **Komponententest** Vorlage (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="bd8a7-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="bd8a7-207">Name die neue Einheit GroupControllerTest.cs testen, und klicken Sie auf die **OK** Schaltfläche.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-207">Name the new unit test GroupControllerTest.cs and click the **OK** button.</span></span>


<span data-ttu-id="bd8a7-208">[![Hinzufügen des GroupControllerTest-Komponententests](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span></span>

<span data-ttu-id="bd8a7-209">**Abbildung 01**: Hinzufügen von den Komponententest GroupControllerTest ([klicken Sie hier, um das Bild in voller Größe angezeigt](iteration-6-use-test-driven-development-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="bd8a7-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image2.png))</span></span>


<span data-ttu-id="bd8a7-210">Unsere ersten Komponententest ist im Codebeispiel 1 enthalten.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="bd8a7-211">Es wird überprüft, dass die Index()-Methode des Controllers Gruppe gibt einen Satz von Gruppen zurück.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="bd8a7-212">Es wird überprüft, dass eine Auflistung von Gruppen in der Sicht Daten zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="bd8a7-213">**1 – Controllers\GroupControllerTest.cs auflisten**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-213">**Listing 1 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample1.cs)]

<span data-ttu-id="bd8a7-214">Wenn Sie zunächst den Code im Codebeispiel 1 in Visual Studio eingeben, erhalten Sie viele roten Wellenlinien.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="bd8a7-215">Wir haben nicht die Klassen GroupController oder eine Gruppe erstellt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="bd8a7-216">An diesem Punkt können wir auch t-Build die Anwendung, damit wir t können führen Sie unseren ersten Komponententest.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="bd8a7-217">Gute s.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-217">That s good.</span></span> <span data-ttu-id="bd8a7-218">Die zählt als einen fehlgeschlagenen Test.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-218">That counts as a failing test.</span></span> <span data-ttu-id="bd8a7-219">Aus diesem Grund haben wir jetzt über die Berechtigung zum Starten der Anwendungscode schreiben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="bd8a7-220">Wir müssen so viel Code zur Ausführung von unserem Test zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="bd8a7-221">Die Controllerklasse Gruppe 2 auflisten enthält die absolute Mindestanforderungen des Codes erforderlich, um den Komponententest zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="bd8a7-222">Die Index()-Aktion gibt eine statisch codierte Liste der Gruppen (die Gruppenklasse auflisten 3 definiert ist).</span><span class="sxs-lookup"><span data-stu-id="bd8a7-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="bd8a7-223">**Auflisten von 2 – Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-223">**Listing 2 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample2.cs)]

<span data-ttu-id="bd8a7-224">**3 – Models\Group.cs auflisten**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-224">**Listing 3 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample3.cs)]

<span data-ttu-id="bd8a7-225">Nachdem wir unser Projekt die Klassen GroupController und Gruppe hinzugefügt haben, wird unsere ersten Komponententest erfolgreich abgeschlossen (siehe Abbildung 2).</span><span class="sxs-lookup"><span data-stu-id="bd8a7-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="bd8a7-226">Wir haben die Arbeitsschritte, die mindestens erforderlich, um die Überprüfung erfolgreich ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="bd8a7-227">Es ist Zeit zu.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-227">It is time to celebrate.</span></span>


<span data-ttu-id="bd8a7-228">[![War erfolgreich!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-228">[![Success!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span></span>

<span data-ttu-id="bd8a7-229">**Abbildung 02**: Erfolg! () [Klicken Sie hier, um das Bild in voller Größe angezeigt](iteration-6-use-test-driven-development-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="bd8a7-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image4.png))</span></span>


## <a name="creating-contact-groups"></a><span data-ttu-id="bd8a7-230">Wenden Sie sich an Gruppen erstellen</span><span class="sxs-lookup"><span data-stu-id="bd8a7-230">Creating Contact Groups</span></span>

<span data-ttu-id="bd8a7-231">Nachdem wir die zweite User Story verschieben können.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="bd8a7-232">Wir müssen in der Lage, zum Erstellen neuer Kontakt Gruppen sein.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="bd8a7-233">Wir müssen diese Absicht in einem Test.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="bd8a7-234">Der Test wird im Codebeispiel 4 überprüft, die eine Signatures-Auflistung, die Methode mit einer neuen Gruppe die Gruppe zur Liste der Gruppen, die von der Index()-Methode zurückgegebene fügt aufruft.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="bd8a7-235">Das heißt, wenn ich eine neue Gruppe erstellen sollte dann ich die neue Gruppe aus der Liste der Gruppen, die von der Index()-Methode zurückgegebene abzurufen können.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="bd8a7-236">**4 – Controllers\GroupControllerTest.cs auflisten**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-236">**Listing 4 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample4.cs)]

<span data-ttu-id="bd8a7-237">Der Test wird im Codebeispiel 4 Ruft die Gruppe Controller Create()--Methode mit eines neuen Kontakts Gruppe.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="bd8a7-238">Als Nächstes überprüft der Test an, dass die neue Gruppe den Gruppe Controller Index()-Methode aufrufen in Ansichtsdaten zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="bd8a7-239">Der geänderte Gruppe Controller auflisten 5 enthält die absolute Mindestanforderungen Änderungen erforderlich, um den neuen Test bestehen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="bd8a7-240">**5 – Controllers\GroupController.cs auflisten**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-240">**Listing 5 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample5.cs)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="bd8a7-241">Der Controller Gruppe auflisten 5 verfügt über eine neue Create()--Aktion.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="bd8a7-242">Diese Aktion wird eine Auflistung von Gruppen eine Gruppe hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="bd8a7-243">Beachten Sie, dass die Aktion Index() geändert wurde, um den Inhalt der Auflistung der Gruppen zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="bd8a7-244">Wir haben noch einmal: bare mindestens ein Videospeicher von Arbeitsaufwand, übergeben den Komponententest ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="bd8a7-245">Nachdem wir dieser Änderungen an dem Controller für die Gruppe aller unserer Komponententests wurden bestanden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="bd8a7-246">Hinzufügen der Validierung</span><span class="sxs-lookup"><span data-stu-id="bd8a7-246">Adding Validation</span></span>

<span data-ttu-id="bd8a7-247">Diese Anforderung wurde in die User Story nicht explizit angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="bd8a7-248">Allerdings ist es sinnvoll, um festzulegen, dass eine Gruppe einen Namen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="bd8a7-249">Andernfalls würde Kontakte in Gruppen organisieren nicht sehr hilfreich sein.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="bd8a7-250">Auflisten von 6 enthält einen neuen Test, der die Absicht ausdrückt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="bd8a7-251">Dieser Test prüft, die versuchen, eine Gruppe zu erstellen, ohne Angabe eines Name führt in eine Überprüfungsfehlermeldung in Modellstatus.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="bd8a7-252">**6 – Controllers\GroupControllerTest.cs auflisten**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-252">**Listing 6 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample6.cs)]

<span data-ttu-id="bd8a7-253">Um diesen Test gerecht zu werden, müssen wir eine Name-Eigenschaft der Gruppe-Klasse (Siehe auflisten von 7) hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="bd8a7-254">Darüber hinaus müssen wir unsere Gruppe Controller s Create()-Aktion (Siehe auflisten von 8) einen kleinen Teil der Validierungslogik hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="bd8a7-255">**Auflisten von 7 - Models\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-255">**Listing 7 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample7.cs)]

<span data-ttu-id="bd8a7-256">**Auflisten von 8 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-256">**Listing 8 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample8.cs)]

<span data-ttu-id="bd8a7-257">Beachten Sie, dass die Gruppe-Controller jetzt Create()-Aktion Überprüfung und Datenbank-Logik enthält.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="bd8a7-258">Derzeit besteht aus die Datenbank verwendet, die vom Controller Gruppe nichts weiter als eine Auflistung im Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="bd8a7-259">Zeit für die Umgestaltung</span><span class="sxs-lookup"><span data-stu-id="bd8a7-259">Time to Refactor</span></span>

<span data-ttu-id="bd8a7-260">Der dritte Schritt im Rot/Grün/Umgestalten ist der Teil der Umgestaltung.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="bd8a7-261">An diesem Punkt müssen wir Schritt von getesteten Codes und überlegen, wie wir unsere Anwendung zur Verbesserung der des Entwurfs Umgestalten können.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="bd8a7-262">Die Umgestaltung-Phase ist die Phase, an der wir Festplatten über die beste Möglichkeit, Software-Entwurfsprinzipien und Muster zu implementieren sind.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="bd8a7-263">Wir können unsere Code in irgendeiner Weise ändern, die wir auswählen, um den Entwurf des Codes zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="bd8a7-264">Wir haben Sicherheitsnetz von Komponententests, die verhindern, dass vorhandene Funktionalität zu beschädigen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="bd8a7-265">Jetzt, unsere Gruppe Controller ist ein Chaos aus der Perspektive des Entwurfs für gute Software.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="bd8a7-266">Der Controller für die Gruppe enthält ein kompliziertes Chaos der Überprüfung und Datenzugriffscode.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="bd8a7-267">Um zu vermeiden, gegen das Prinzip der einzelnen Verantwortung, müssen wir diese Probleme in anderen Klassen zu trennen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="bd8a7-268">Unser umgestalteten Gruppe Controllerklasse ist im Codebeispiel 9 enthalten.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="bd8a7-269">Der Controller wurde geändert, um die Dienstebene ContactManager zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="bd8a7-270">Dies ist die gleiche Dienstebene, die wir mit dem Kontakt-Controller verwenden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="bd8a7-271">Auflisten von 10 enthält die neuen Methoden für die Dienstebene ContactManager zur Unterstützung von überprüfen, auflisten und Erstellen von Gruppen hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="bd8a7-272">Die IContactManagerService-Schnittstelle wurde aktualisiert, damit die neuen Methoden enthalten.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="bd8a7-273">Auflisten von 11 enthält eine neue FakeContactManagerRepository-Klasse, die die IContactManagerRepository-Schnittstelle implementiert.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="bd8a7-274">Im Gegensatz zu der EntityContactManagerRepository-Klasse, die auch die IContactManagerRepository-Schnittstelle implementiert, wird unsere neue FakeContactManagerRepository-Klasse mit der Datenbank nicht kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="bd8a7-275">Die FakeContactManagerRepository-Klasse verwendet eine speicherinterne Auflistung als Proxy für die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="bd8a7-276">Wir verwenden diese Klasse in unserer Komponententests als eine gefälschte Repository-Ebene.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="bd8a7-277">**Auflisten von 9 – Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-277">**Listing 9 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample9.cs)]

<span data-ttu-id="bd8a7-278">**Auflisten von 10 - Controllers\ContactManagerService.cs**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-278">**Listing 10 - Controllers\ContactManagerService.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample10.cs)]

<span data-ttu-id="bd8a7-279">**Auflisten von 11 - Controllers\FakeContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-279">**Listing 11 - Controllers\FakeContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample11.cs)]

<span data-ttu-id="bd8a7-280">Ändern die Schnittstelle erfordert IContactManagerRepository verwenden, um die CreateGroup() und ListGroups()-Methode in der EntityContactManagerRepository-Klasse zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="bd8a7-281">Die laziest schnellste und einfachste Möglichkeit hierzu besteht darin, Stubmethoden hinzuzufügen, die wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="bd8a7-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>   

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample12.cs)]


<span data-ttu-id="bd8a7-282">Schließlich müssen diese Änderungen am Entwurf von unserer Anwendung uns einige Änderungen an unseren Komponententests.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="bd8a7-283">Jetzt müssen wir die FakeContactManagerRepository verwenden, wenn die Komponententests ausführen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="bd8a7-284">Auflisten von 12 ist die aktualisierte GroupControllerTest-Klasse enthalten.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="bd8a7-285">**12 - Controllers\GroupControllerTest.cs auflisten**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-285">**Listing 12 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample13.cs)]

<span data-ttu-id="bd8a7-286">Nach dem wir all diese ändern, ändert sich, noch einmal: alle unsere Komponententests bestanden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="bd8a7-287">Wir haben den gesamten Zyklus von Rot/Grün/Umgestalten abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="bd8a7-288">Wir haben die ersten beiden User Stories implementiert.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="bd8a7-289">Wir haben jetzt die Unterstützung von Komponententests für die Anforderungen in User Storys ausgedrückt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="bd8a7-290">Implementieren den Rest der User Storys umfasst das wiederholte denselben Zyklus von Rot/Grün/Umgestalten.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="bd8a7-291">Ändern die Datenbank</span><span class="sxs-lookup"><span data-stu-id="bd8a7-291">Modifying our Database</span></span>

<span data-ttu-id="bd8a7-292">Obwohl wir alle unsere Komponententests ausgedrückt Anforderungen erfüllt, wird unsere Arbeit leider nicht ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="bd8a7-293">Wir müssen weiterhin die Datenbank zu ändern.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-293">We still need to modify our database.</span></span>

<span data-ttu-id="bd8a7-294">Wir müssen eine neue Gruppe Datenbanktabelle zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-294">We need to create a new Group database table.</span></span> <span data-ttu-id="bd8a7-295">Führen Sie folgende Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="bd8a7-295">Follow these steps:</span></span>

1. <span data-ttu-id="bd8a7-296">Klicken Sie im Server-Explorer mit der rechten Maustaste in des Tabellen-Ordners, und wählen Sie die Menüoption **neue Tabelle hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="bd8a7-297">Geben Sie die beiden Spalten finden Sie unten im Tabellen-Designer.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="bd8a7-298">Markieren Sie die Id-Spalte als Primärschlüssel und Identity-Spalte.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="bd8a7-299">Speichern Sie die neue Tabelle mit dem Namen Gruppen durch Klicken auf das Symbol des Diskettenlaufwerk.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.11_table01"></a>


| <span data-ttu-id="bd8a7-300">**Spaltenname**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-300">**Column Name**</span></span> | <span data-ttu-id="bd8a7-301">**Datentyp**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-301">**Data Type**</span></span> | <span data-ttu-id="bd8a7-302">**NULL-Werte zulassen**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bd8a7-303">Id</span><span class="sxs-lookup"><span data-stu-id="bd8a7-303">Id</span></span> | <span data-ttu-id="bd8a7-304">int</span><span class="sxs-lookup"><span data-stu-id="bd8a7-304">int</span></span> | <span data-ttu-id="bd8a7-305">False</span><span class="sxs-lookup"><span data-stu-id="bd8a7-305">False</span></span> |
| <span data-ttu-id="bd8a7-306">name</span><span class="sxs-lookup"><span data-stu-id="bd8a7-306">Name</span></span> | <span data-ttu-id="bd8a7-307">Nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-307">nvarchar(50)</span></span> | <span data-ttu-id="bd8a7-308">False</span><span class="sxs-lookup"><span data-stu-id="bd8a7-308">False</span></span> |


<span data-ttu-id="bd8a7-309">Als Nächstes müssen wir alle Daten aus der Contacts-Tabelle löschen (andernfalls wir gewonnen t Lage, eine Beziehung zwischen den Tabellen Kontakte und Gruppen zu erstellen).</span><span class="sxs-lookup"><span data-stu-id="bd8a7-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won t be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="bd8a7-310">Führen Sie folgende Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="bd8a7-310">Follow these steps:</span></span>

1. <span data-ttu-id="bd8a7-311">Mit der rechten Maustaste der Contacts-Tabelle, und wählen Sie die Menüoption **Tabellendaten anzeigen**.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="bd8a7-312">Löschen Sie alle Zeilen aus.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-312">Delete all of the rows.</span></span>

<span data-ttu-id="bd8a7-313">Als Nächstes müssen wir eine Beziehung zwischen den Gruppen-Datenbanktabelle und die vorhandene Datenbank Kontakttabelle definieren.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="bd8a7-314">Führen Sie folgende Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="bd8a7-314">Follow these steps:</span></span>

1. <span data-ttu-id="bd8a7-315">Doppelklicken Sie auf die Kontakttabelle im Server-Explorer-Fenster zu den Tabellen-Designer zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="bd8a7-316">Fügen Sie eine neue Spalte mit ganzen Zahlen, die mit dem Namen GroupId Kontakttabelle hinzu.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="bd8a7-317">Klicken Sie auf die Schaltfläche mit den Beziehung, um das Dialogfeld "Foreign Key Relationships" zu öffnen (siehe Abbildung 3).</span><span class="sxs-lookup"><span data-stu-id="bd8a7-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="bd8a7-318">Klicken Sie auf die Schaltfläche "hinzufügen".</span><span class="sxs-lookup"><span data-stu-id="bd8a7-318">Click the Add button.</span></span>
5. <span data-ttu-id="bd8a7-319">Klicken Sie auf die Schaltfläche mit den Auslassungszeichen neben der Schaltfläche "Tabellen- und Spaltenspezifikation".</span><span class="sxs-lookup"><span data-stu-id="bd8a7-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="bd8a7-320">Wählen Sie im Dialogfeld Tabellen und Spalten Gruppen als die Primärschlüsseltabelle und die Id als primäre Schlüsselspalte.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="bd8a7-321">Wählen Sie die Kontakte als Fremdschlüsseltabelle und GroupId als die Fremdschlüsselspalte (siehe Abbildung 4).</span><span class="sxs-lookup"><span data-stu-id="bd8a7-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="bd8a7-322">Klicken Sie auf die Schaltfläche "OK".</span><span class="sxs-lookup"><span data-stu-id="bd8a7-322">Click the OK button.</span></span>
7. <span data-ttu-id="bd8a7-323">Klicken Sie unter **INSERT- und UPDATE-Spezifikation**, wählen Sie den Wert **Cascade** für **Regel löschen**.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="bd8a7-324">Klicken Sie auf die Schaltfläche "Schließen", um das Dialogfeld "Foreign Key Relationships" zu schließen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="bd8a7-325">Klicken Sie auf die Schaltfläche "Speichern", um die Änderungen der Contacts-Tabelle zu speichern.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-325">Click the Save button to save the changes to the Contacts table.</span></span>


<span data-ttu-id="bd8a7-326">[![Erstellen eine datenbankbeziehung-Tabelle](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span></span>

<span data-ttu-id="bd8a7-327">**Abbildung 03**: Erstellen einer Datenbank-tabellenbeziehung ([klicken Sie hier, um das Bild in voller Größe angezeigt](iteration-6-use-test-driven-development-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="bd8a7-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image6.png))</span></span>


<span data-ttu-id="bd8a7-328">[![Angeben von tabellenbeziehungen](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-328">[![Specifying table relationships](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span></span>

<span data-ttu-id="bd8a7-329">**Abbildung 04**: Angeben von tabellenbeziehungen ([klicken Sie hier, um das Bild in voller Größe angezeigt](iteration-6-use-test-driven-development-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="bd8a7-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image8.png))</span></span>


### <a name="updating-our-data-model"></a><span data-ttu-id="bd8a7-330">Unsere Datenmodell aktualisieren</span><span class="sxs-lookup"><span data-stu-id="bd8a7-330">Updating our Data Model</span></span>

<span data-ttu-id="bd8a7-331">Als Nächstes müssen wir aktualisieren unsere Datenmodell, um die neue Datenbanktabelle darstellen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="bd8a7-332">Führen Sie folgende Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="bd8a7-332">Follow these steps:</span></span>

1. <span data-ttu-id="bd8a7-333">Doppelklicken Sie auf die ContactManagerModel.edmx-Datei im Ordner "Modelle" im Entity Designer geöffnet.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="bd8a7-334">Mit der rechten Maustaste in die Entwurfsoberfläche, und wählen Sie die Menüoption **Modell aus der Datenbank aktualisieren**.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="bd8a7-335">Im Update-Assistenten auf die Schaltfläche auswählen, die Gruppen Tabelle, und klicken Sie auf das Fertigstellen (siehe Abbildung 5).</span><span class="sxs-lookup"><span data-stu-id="bd8a7-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="bd8a7-336">Mit der rechten Maustaste der Gruppen-Entität, und wählen Sie die Menüoption **umbenennen**.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="bd8a7-337">Ändern Sie den Namen des der *Gruppen* Entität *Gruppe* (singular).</span><span class="sxs-lookup"><span data-stu-id="bd8a7-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="bd8a7-338">Klicken Sie auf die Gruppen-Navigationseigenschaft, die am unteren Rand der Contact-Entität angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="bd8a7-339">Ändern Sie den Namen des der *Gruppen* -Navigationseigenschaft auf *Gruppe* (singular).</span><span class="sxs-lookup"><span data-stu-id="bd8a7-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>


<span data-ttu-id="bd8a7-340">[![Aktualisieren ein Modell im Entity Framework aus der Datenbank](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span></span>

<span data-ttu-id="bd8a7-341">**Abbildung 05**: Aktualisieren eines Entity Framework-Datenmodells aus der Datenbank ([klicken Sie hier, um das Bild in voller Größe angezeigt](iteration-6-use-test-driven-development-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="bd8a7-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image10.png))</span></span>


<span data-ttu-id="bd8a7-342">Nachdem Sie diese Schritte abgeschlossen haben, wird Ihr Datenmodell der Kontakte und Gruppen darstellen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="bd8a7-343">Im Entity Designer sollten beide Entitäten angezeigt (siehe Abbildung 6).</span><span class="sxs-lookup"><span data-stu-id="bd8a7-343">The Entity Designer should show both entities (see Figure 6).</span></span>


<span data-ttu-id="bd8a7-344">[![Entitätsdesigner zum Anzeigen von Gruppen und wenden Sie sich an](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span></span>

<span data-ttu-id="bd8a7-345">**Abbildung 06**: Entity Designer zum Anzeigen von Group und Contact ([klicken Sie hier, um das Bild in voller Größe angezeigt](iteration-6-use-test-driven-development-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="bd8a7-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image12.png))</span></span>


### <a name="creating-our-repository-classes"></a><span data-ttu-id="bd8a7-346">Unsere Repositoryklassen erstellen</span><span class="sxs-lookup"><span data-stu-id="bd8a7-346">Creating our Repository Classes</span></span>

<span data-ttu-id="bd8a7-347">Als Nächstes müssen wir unsere Repository-Klasse zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="bd8a7-348">Im Verlauf dieser Iteration haben wir mehrere neue Methoden der Schnittstelle IContactManagerRepository beim Schreiben von Code zur Erfüllung von unseren Komponententests hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="bd8a7-349">Die endgültige Version der IContactManagerRepository-Schnittstelle ist im Codebeispiel 14 enthalten.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="bd8a7-350">**Auflisten von 14 - Models\IContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-350">**Listing 14 - Models\IContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample14.cs)]

<span data-ttu-id="bd8a7-351">Wir noch nicht tatsächlich implementiert eine der Methoden im Zusammenhang mit der Arbeit mit Gruppen wenden Sie sich an.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-351">We haven t actually implemented any of the methods related to working with contact groups.</span></span> <span data-ttu-id="bd8a7-352">Gegenwärtig kann die Klasse EntityContactManagerRepository Stubmethoden für jede Gruppe von Kontakten Methoden aufgeführt, die in der IContactManagerRepository-Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="bd8a7-353">Beispielsweise sieht die ListGroups() Methode derzeit wie folgt:</span><span class="sxs-lookup"><span data-stu-id="bd8a7-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample15.cs)]

<span data-ttu-id="bd8a7-354">Die Stubmethoden aktiviert wir unsere Anwendung kompilieren und übergeben die Komponententests.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="bd8a7-355">Jetzt ist es allerdings Zeit für diese Methoden zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="bd8a7-356">Die endgültige Version der Klasse EntityContactManagerRepository ist im Codebeispiel 13 enthalten.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="bd8a7-357">**Auflisten von 13 - Models\EntityContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="bd8a7-357">**Listing 13 - Models\EntityContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample16.cs)]

### <a name="creating-the-views"></a><span data-ttu-id="bd8a7-358">Erstellen von Ansichten</span><span class="sxs-lookup"><span data-stu-id="bd8a7-358">Creating the Views</span></span>

<span data-ttu-id="bd8a7-359">ASP.NET MVC-Anwendung, wenn Sie ASP.NET Standardansichtsmodul verwenden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="bd8a7-360">Deshalb vergessen Ansichten als Antwort auf einen bestimmten Komponententest erstellen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="bd8a7-361">Da eine Anwendung ohne Ansichten unbrauchbar wäre, wir können jedoch t dieser Iteration abgeschlossen, ohne erstellen und Ändern von Ansichten in der Contact-Manager-Anwendung enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="bd8a7-362">Wir müssen die folgenden neuen Ansichten zum Verwalten von Gruppen wenden Sie sich an, der (siehe Abbildung 7) erstellen:</span><span class="sxs-lookup"><span data-stu-id="bd8a7-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="bd8a7-363">Views\Group\Index.aspx - zeigt eine Liste der Kontakt-Gruppen</span><span class="sxs-lookup"><span data-stu-id="bd8a7-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="bd8a7-364">Views\Group\Delete.aspx - zeigt Bestätigungsformular für das Löschen einer Gruppenstatus von Kontakten</span><span class="sxs-lookup"><span data-stu-id="bd8a7-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>


<span data-ttu-id="bd8a7-365">[![Die Gruppe Indexansicht](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-365">[![The Group Index view](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span></span>

<span data-ttu-id="bd8a7-366">**Abbildung 07**: die Gruppe Indexansicht ([klicken Sie hier, um das Bild in voller Größe angezeigt](iteration-6-use-test-driven-development-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="bd8a7-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image14.png))</span></span>


<span data-ttu-id="bd8a7-367">Wir müssen die folgenden vorhandenen Ansichten ändern, sodass sie wenden Sie sich an Gruppen enthalten:</span><span class="sxs-lookup"><span data-stu-id="bd8a7-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="bd8a7-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="bd8a7-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="bd8a7-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="bd8a7-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="bd8a7-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="bd8a7-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="bd8a7-371">Sehen Sie die geänderten Ansichten durch einen Blick auf die Visual Studio-Anwendung, die in diesem Lernprogramm begleitet.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="bd8a7-372">Abbildung 8 zeigt beispielsweise die Indexansicht wenden Sie sich an.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-372">For example, Figure 8 illustrates the Contact Index view.</span></span>


<span data-ttu-id="bd8a7-373">[![Die Kontakt-Indexansicht](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-373">[![The Contact Index view](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span></span>

<span data-ttu-id="bd8a7-374">**Abbildung 08**: die Indexansicht Kontakt ([klicken Sie hier, um das Bild in voller Größe angezeigt](iteration-6-use-test-driven-development-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="bd8a7-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image16.png))</span></span>


## <a name="summary"></a><span data-ttu-id="bd8a7-375">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="bd8a7-375">Summary</span></span>

<span data-ttu-id="bd8a7-376">In dieser Iteration haben wir neue Funktionen für unsere Kontakt-Manager-Anwendung gemäß testorientierte Entwicklung Anwendung Entwurf Methoden hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="bd8a7-377">Wir gestartet, indem eine Reihe von User Storys zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="bd8a7-378">Wir erstellt einen Satz von Komponententests, der die Anforderungen, die durch die User Stories ausgedrückt entspricht.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="bd8a7-379">Schließlich haben wir nur so viel Code erfüllen die Anforderungen, die von den Komponententests ausgedrückt geschrieben.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="bd8a7-380">Wir nach dem Schreiben von viel Code erfüllen die Anforderungen, die von den Komponententests ausgedrückt aktualisiert wir unsere Datenbank und Ansichten.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="bd8a7-381">Wir unsere Datenbank eine neue Gruppentabelle hinzugefügt und unsere Entity Framework-Datenmodells aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="bd8a7-382">Wir auch erstellt und einen Satz von Ansichten geändert.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="bd8a7-383">In der nächsten Iteration – die letzte Iteration--schreiben wir unsere Anwendung Ajax nutzen.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="bd8a7-384">Durch Ajax nutzen, müssen die Reaktionsfähigkeit und die Leistung der Anwendung wenden Sie sich an Manager verbessert werden.</span><span class="sxs-lookup"><span data-stu-id="bd8a7-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="bd8a7-385">[Zurück](iteration-5-create-unit-tests-cs.md)
> [Weiter](iteration-7-add-ajax-functionality-cs.md)</span><span class="sxs-lookup"><span data-stu-id="bd8a7-385">[Previous](iteration-5-create-unit-tests-cs.md)
[Next](iteration-7-add-ajax-functionality-cs.md)</span></span>
