---
uid: web-forms/overview/data-access/advanced-data-access-scenarios/debugging-stored-procedures-cs
title: Debuggen von gespeicherten Prozeduren (c#) | Microsoft Docs
author: rick-anderson
description: Editionen von Visual Studio Professional und Team System ermöglichen es Ihnen, Haltepunkte setzen und Schritt gespeicherten Prozeduren in SQL Server, wodurch das Debuggen von gespeicherten...
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/03/2007
ms.topic: article
ms.assetid: c655c324-2ffa-4c21-8265-a254d79a693d
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/advanced-data-access-scenarios/debugging-stored-procedures-cs
msc.type: authoredcontent
ms.openlocfilehash: 52bb409798dae550c664b78521f0fb4793464833
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
ms.locfileid: "30876500"
---
<a name="debugging-stored-procedures-c"></a><span data-ttu-id="eb680-103">Debuggen von gespeicherten Prozeduren (c#)</span><span class="sxs-lookup"><span data-stu-id="eb680-103">Debugging Stored Procedures (C#)</span></span>
====================
<span data-ttu-id="eb680-104">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="eb680-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="eb680-105">[Herunterladen von Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_74_CS.zip) oder [PDF herunterladen](debugging-stored-procedures-cs/_static/datatutorial74cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="eb680-105">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_74_CS.zip) or [Download PDF](debugging-stored-procedures-cs/_static/datatutorial74cs1.pdf)</span></span>

> <span data-ttu-id="eb680-106">Visual Studio Professional und Team System Edition können Sie Haltepunkte setzen und Schritt gespeicherten Prozeduren in SQL Server, Debuggen gespeicherter Prozeduren genauso einfach wie das Debuggen von Anwendungscode vornehmen.</span><span class="sxs-lookup"><span data-stu-id="eb680-106">Visual Studio Professional and Team System editions allow you to set breakpoints and step in to stored procedures within SQL Server, making debugging stored procedures as easy as debugging application code.</span></span> <span data-ttu-id="eb680-107">Dieses Lernprogramm veranschaulicht direkten Datenbankdebuggen und die Anwendungsdebuggen von gespeicherten Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="eb680-107">This tutorial demonstrates direct database debugging and application debugging of stored procedures.</span></span>


## <a name="introduction"></a><span data-ttu-id="eb680-108">Einführung</span><span class="sxs-lookup"><span data-stu-id="eb680-108">Introduction</span></span>

<span data-ttu-id="eb680-109">Visual Studio bietet eine umfassende Debugleistung.</span><span class="sxs-lookup"><span data-stu-id="eb680-109">Visual Studio provides a rich debugging experience.</span></span> <span data-ttu-id="eb680-110">Mit wenigen Tastaturanschlägen oder Mausklicks es s Haltepunkte zum Beenden der Ausführung eines Programms, und untersuchen und Fluss verwendet.</span><span class="sxs-lookup"><span data-stu-id="eb680-110">With a few keystrokes or clicks of the mouse, it s possible to use breakpoints to stop execution of a program and examine its state and control flow.</span></span> <span data-ttu-id="eb680-111">Zusammen mit Debuggen Anwendungscode, bietet Visual Studio unterstützt das Debuggen von gespeicherter Prozeduren von SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eb680-111">Along with debugging application code, Visual Studio offers support for debugging stored procedures from within SQL Server.</span></span> <span data-ttu-id="eb680-112">Wie alle Haltepunkte im Code eines ASP.NET Code-Behind-Klasse oder Business Logic Layer-Klasse festgelegt werden, können damit zu sie platziert werden innerhalb von gespeicherten Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="eb680-112">Just like breakpoints can be set within the code of an ASP.NET code-behind class or Business Logic Layer class, so too can they be placed within stored procedures.</span></span>

<span data-ttu-id="eb680-113">In diesem Lernprogramm betrachten wir schrittweise Ausführung von gespeicherten Prozeduren im Server-Explorer in Visual Studio ebenfalls wie Festlegen von Haltepunkten, die erreicht werden, wenn die gespeicherte Prozedur von der ausgeführten ASP.NET-Anwendung aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="eb680-113">In this tutorial we will look at stepping into stored procedures from the Server Explorer within Visual Studio as well as how to set breakpoints that are hit when the stored procedure is called from the running ASP.NET application.</span></span>

> [!NOTE]
> <span data-ttu-id="eb680-114">Leider können gespeicherte Prozeduren nur werden in Einzelschritten und über die Professional und Team-Systeme Versionen von Visual Studio debuggen.</span><span class="sxs-lookup"><span data-stu-id="eb680-114">Unfortunately, stored procedures can only be stepped into and debugged through the Professional and Team Systems versions of Visual Studio.</span></span> <span data-ttu-id="eb680-115">Wenn Sie Visual Web Developer oder die standard-Version von Visual Studio verwenden, können Sie Willkommen entlang zu lesen, wie wir die erforderlichen Schritte zum Debuggen von gespeicherter Prozeduren durchlaufen verwendet, aber Sie werden nicht in der Lage, diese Schritte auf dem Computer zu replizieren.</span><span class="sxs-lookup"><span data-stu-id="eb680-115">If you are using Visual Web Developer or the standard version of Visual Studio, you are welcome to read along as we walk through the steps necessary to debug stored procedures, but you will not be able to replicate these steps on your machine.</span></span>


## <a name="sql-server-debugging-concepts"></a><span data-ttu-id="eb680-116">Konzepte von SQL Server-Debuggen</span><span class="sxs-lookup"><span data-stu-id="eb680-116">SQL Server Debugging Concepts</span></span>

<span data-ttu-id="eb680-117">Microsoft SQL Server 2005 wurde entworfen, um die Integration mit Bereitstellen der [Common Language Runtime (CLR)](https://msdn.microsoft.com/netframework/aa497266.aspx), also die Laufzeit verwendet, die von allen .NET Assemblys.</span><span class="sxs-lookup"><span data-stu-id="eb680-117">Microsoft SQL Server 2005 was designed to provide integration with the [Common Language Runtime (CLR)](https://msdn.microsoft.com/netframework/aa497266.aspx), which is the runtime used by all .NET assemblies.</span></span> <span data-ttu-id="eb680-118">Daher unterstützt SQL Server 2005 verwalteten Datenbankobjekte.</span><span class="sxs-lookup"><span data-stu-id="eb680-118">Consequently, SQL Server 2005 supports managed database objects.</span></span> <span data-ttu-id="eb680-119">Sie können also Datenbankobjekte wie gespeicherte Prozeduren und benutzerdefinierte Funktionen (UDFs) als Methoden in einer C#-Klasse erstellen.</span><span class="sxs-lookup"><span data-stu-id="eb680-119">That is, you can create database objects like stored procedures and User-Defined Functions (UDFs) as methods in a C# class.</span></span> <span data-ttu-id="eb680-120">Dadurch werden diese gespeicherten Prozeduren und benutzerdefinierten Funktionen aus, die die Funktionalität in .NET Framework und eigene benutzerdefinierte Klassen.</span><span class="sxs-lookup"><span data-stu-id="eb680-120">This enables these stored procedures and UDFs to utilize functionality in the .NET Framework and from your own custom classes.</span></span> <span data-ttu-id="eb680-121">Natürlich müssen bietet SQL Server 2005 auch Unterstützung für T-SQL-Datenbankobjekte.</span><span class="sxs-lookup"><span data-stu-id="eb680-121">Of course, SQL Server 2005 also provides support for T-SQL database objects.</span></span>

<span data-ttu-id="eb680-122">SQL Server 2005 bietet Unterstützung für T-SQL und verwalteter Datenbankobjekte debugging.</span><span class="sxs-lookup"><span data-stu-id="eb680-122">SQL Server 2005 offers debugging support for both T-SQL and managed database objects.</span></span> <span data-ttu-id="eb680-123">Diese Objekte können jedoch nur über Visual Studio 2005 Professional und Systeme Team Edition gedebuggt werden.</span><span class="sxs-lookup"><span data-stu-id="eb680-123">However, these objects can only be debugged through Visual Studio 2005 Professional and Team Systems editions.</span></span> <span data-ttu-id="eb680-124">In diesem Lernprogramm werden Debuggen T-SQL-Datenbankobjekte untersucht.</span><span class="sxs-lookup"><span data-stu-id="eb680-124">In this tutorial we will examine debugging T-SQL database objects.</span></span> <span data-ttu-id="eb680-125">Prüft, dass das nachfolgende Lernprogramm Debuggen verwalteter Datenbankobjekte.</span><span class="sxs-lookup"><span data-stu-id="eb680-125">The subsequent tutorial looks at debugging managed database objects.</span></span>

<span data-ttu-id="eb680-126">Die [Übersicht über die von T-SQL und CLR-Debuggen in SQL Server 2005](https://blogs.msdn.com/sqlclr/archive/2006/06/29/651644.aspx) Blogeintrag aus der [CLR-Integration von SQL Server 2005-Team](https://blogs.msdn.com/sqlclr/default.aspx) werden die drei Möglichkeiten zum Debuggen von SQL Server 2005-Objekte aus Visual Studio hervorgehoben:</span><span class="sxs-lookup"><span data-stu-id="eb680-126">The [Overview of T-SQL and CLR Debugging in SQL Server 2005](https://blogs.msdn.com/sqlclr/archive/2006/06/29/651644.aspx) blog entry from the [SQL Server 2005 CLR Integration team](https://blogs.msdn.com/sqlclr/default.aspx) highlights the three ways to debug SQL Server 2005 objects from Visual Studio:</span></span>

- <span data-ttu-id="eb680-127">**Leiten Sie Datenbank-Debuggen (DDD)** – klicken Sie in Server-Explorer, die wir einen in eine beliebige T-SQL-Datenbankobjekt, z. B. gespeicherte Prozeduren und benutzerdefinierte Funktionen Einzelschritt.</span><span class="sxs-lookup"><span data-stu-id="eb680-127">**Direct Database Debugging (DDD)** - from Server Explorer we can step into any T-SQL database object, such as stored procedures and UDFs.</span></span> <span data-ttu-id="eb680-128">Untersuchen wir DDD in Schritt 1.</span><span class="sxs-lookup"><span data-stu-id="eb680-128">We will examine DDD in Step 1.</span></span>
- <span data-ttu-id="eb680-129">**Das Debuggen der Anwendung** -wir können Haltepunkte innerhalb eines Datenbankobjekts und führen Sie anschließend unsere ASP.NET-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="eb680-129">**Application Debugging** - we can set breakpoints within a database object and then run our ASP.NET application.</span></span> <span data-ttu-id="eb680-130">Wenn das Datenbankobjekt ausgeführt wird, wird der Haltepunkt erreicht und Steuerelement Supportgruppen für den Debugger.</span><span class="sxs-lookup"><span data-stu-id="eb680-130">When the database object is executed, the breakpoint will be hit and control turned over to the debugger.</span></span> <span data-ttu-id="eb680-131">Beachten Sie, dass beim Anwendungsdebuggen wird in ein Datenbankobjekt aus Anwendungscode wechseln können.</span><span class="sxs-lookup"><span data-stu-id="eb680-131">Note that with application debugging we cannot step into a database object from application code.</span></span> <span data-ttu-id="eb680-132">Wir müssen explizit legen Sie Haltepunkte in diese gespeicherten Prozeduren oder benutzerdefinierten Funktionen, möchten wir den Debugger zu beenden.</span><span class="sxs-lookup"><span data-stu-id="eb680-132">We must explicitly set breakpoints in those stored procedures or UDFs where we want the debugger to stop.</span></span> <span data-ttu-id="eb680-133">Anwendungsdebuggen ab, die in Schritt2 untersucht.</span><span class="sxs-lookup"><span data-stu-id="eb680-133">Application debugging is examined starting in Step 2.</span></span>
- <span data-ttu-id="eb680-134">**Aus einem SQL Server-Projekt Debuggen** -Editionen von Visual Studio Professional und Team-Systeme sind einen SQL Server-Projekt-Typ, der häufig verwendet wird, um Datenbankobjekte zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="eb680-134">**Debugging from a SQL Server Project** - Visual Studio Professional and Team Systems editions include a SQL Server Project type that is commonly used to create managed database objects.</span></span> <span data-ttu-id="eb680-135">Wir untersuchen mithilfe von SQL Server-Projekte und ihre Inhalte in den nächsten Lernprogrammen Debuggen.</span><span class="sxs-lookup"><span data-stu-id="eb680-135">We will examine using SQL Server Projects and debugging their contents in the next tutorial.</span></span>

<span data-ttu-id="eb680-136">Visual Studio debuggen kann gespeicherte Prozeduren auf lokalen und remote-SQL Server-Instanzen.</span><span class="sxs-lookup"><span data-stu-id="eb680-136">Visual Studio can debug stored procedures on local and remote SQL Server instances.</span></span> <span data-ttu-id="eb680-137">Eine lokale SQL Server-Instanz ist eine, die auf demselben Computer wie Visual Studio installiert ist.</span><span class="sxs-lookup"><span data-stu-id="eb680-137">A local SQL Server instance is one that is installed on the same machine as Visual Studio.</span></span> <span data-ttu-id="eb680-138">Wenn Ihnen verwendeten SQL Server-Datenbank nicht auf dem Entwicklungscomputer befindet, wird es eine Remoteinstanz angesehen.</span><span class="sxs-lookup"><span data-stu-id="eb680-138">If the SQL Server database you are using is not located on your development machine, then it is considered a remote instance.</span></span> <span data-ttu-id="eb680-139">Für diesen Lernprogrammen haben wir lokale SQL Server-Instanzen verwendet.</span><span class="sxs-lookup"><span data-stu-id="eb680-139">For these tutorials we have been using local SQL Server instances.</span></span> <span data-ttu-id="eb680-140">Debuggen gespeicherter Prozeduren auf einer Remoteinstanz des SQL Server erfordert mehrere Konfigurationsschritte als beim Debuggen von gespeicherten Prozeduren auf einer lokalen Instanz.</span><span class="sxs-lookup"><span data-stu-id="eb680-140">Debugging stored procedures on a remote SQL server instance requires more configuration steps than when debugging stored procedures on a local instance.</span></span>

<span data-ttu-id="eb680-141">Wenn Sie eine lokale SQL Server-Instanz verwenden, können Sie mit Schritt 1 beginnen und Durcharbeiten dieses Lernprogramms bis zum Ende.</span><span class="sxs-lookup"><span data-stu-id="eb680-141">If you are using a local SQL Server instance, you can start with Step 1 and work through this tutorial to the end.</span></span> <span data-ttu-id="eb680-142">Bei Verwendung eine Remoteinstanz von SQL Server werden jedoch, Sie müssen zunächst, um sicherzustellen, dass während des Debuggens werden protokolliert, auf dem Entwicklungscomputer mit einem Windows-Benutzerkonto, das SQL Server-Anmeldung auf der Remoteinstanz verfügt.</span><span class="sxs-lookup"><span data-stu-id="eb680-142">If you are using a remote SQL Server instance, however, you will first need to ensure that when debugging you are logged to your development machine with a Windows user account that has a SQL Server login on the remote instance.</span></span> <span data-ttu-id="eb680-143">Moveover, diese datenbankanmeldung und die Datenbank-Anmeldenamen, die von der ausgeführten ASP.NET-Anwendung eine Verbindung mit der Datenbank verwendet, muss Mitglied der `sysadmin` Rolle.</span><span class="sxs-lookup"><span data-stu-id="eb680-143">Moveover, both this database login and the database login used to connect to the database from the running ASP.NET application must be members of the `sysadmin` role.</span></span> <span data-ttu-id="eb680-144">Finden Sie das Debuggen von T-SQL-Datenbankobjekte auf Remoteinstanzen im Abschnitt am Ende dieses Lernprogramms für Weitere Informationen zum Konfigurieren von Visual Studio und SQL Server, um eine Remoteinstanz zu debuggen.</span><span class="sxs-lookup"><span data-stu-id="eb680-144">See the Debugging T-SQL Database Objects on Remote Instances section at the end of this tutorial for more information on configuring Visual Studio and SQL Server to debug a remote instance.</span></span>

<span data-ttu-id="eb680-145">Schließlich verstehen Sie, dass die debugging-Unterstützung für T-SQL-Datenbankobjekte nicht als Funktion als debugging-Unterstützung für .NET-Anwendungen umfangreiche ist.</span><span class="sxs-lookup"><span data-stu-id="eb680-145">Finally, understand that debugging support for T-SQL database objects is not as feature rich as debugging support for .NET applications.</span></span> <span data-ttu-id="eb680-146">Beispielsweise breakpointbedingungen und Filter werden nicht unterstützt, nur ein Teil der Debugfenster verfügbar sind, können keine bearbeiten und fortfahren, das "Direktfenster" nutzlos usw. gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="eb680-146">For example, breakpoint conditions and filters are not supported, only a subset of the debugging windows are available, you cannot use Edit and Continue, the Immediate window is rendered useless, and so forth.</span></span> <span data-ttu-id="eb680-147">Finden Sie unter [Einschränkungen Debuggerbefehle und den Funktionen](https://msdn.microsoft.com/library/ms165035(VS.80).aspx) für Weitere Informationen.</span><span class="sxs-lookup"><span data-stu-id="eb680-147">See [Limitations on Debugger Commands and Features](https://msdn.microsoft.com/library/ms165035(VS.80).aspx) for more information.</span></span>

## <a name="step-1-directly-stepping-into-a-stored-procedure"></a><span data-ttu-id="eb680-148">Schritt 1: Direkt einem Einzelschritt, in einer gespeicherten Prozedur</span><span class="sxs-lookup"><span data-stu-id="eb680-148">Step 1: Directly Stepping Into a Stored Procedure</span></span>

<span data-ttu-id="eb680-149">Visual Studio erleichtert das direkt Debuggen eines Datenbankobjekts.</span><span class="sxs-lookup"><span data-stu-id="eb680-149">Visual Studio makes it easy to directly debug a database object.</span></span> <span data-ttu-id="eb680-150">Können s betrachten, wie die direkte Datenbank Debuggen (DDD)-Funktion verwenden, um einen Einzelschritt in die `Products_SelectByCategoryID` gespeicherte Prozedur in der Northwind-Datenbank.</span><span class="sxs-lookup"><span data-stu-id="eb680-150">Let s look at how to use the Direct Database Debugging (DDD) feature to step into the `Products_SelectByCategoryID` stored procedure in the Northwind database.</span></span> <span data-ttu-id="eb680-151">Wie der Name schon sagt, `Products_SelectByCategoryID` gibt Produktinformationen für eine bestimmte Kategorie; es erstellt wurde, der [vorhandene gespeicherte Prozeduren verwenden, für die typisierte DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) Lernprogramm.</span><span class="sxs-lookup"><span data-stu-id="eb680-151">As its name implies, `Products_SelectByCategoryID` returns product information for a particular category; it was created in the [Using Existing Stored Procedures for the Typed DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) tutorial.</span></span> <span data-ttu-id="eb680-152">Navigieren Sie zu dem Server-Explorer starten Sie, und erweitern Sie den Knoten der Northwind-Datenbank.</span><span class="sxs-lookup"><span data-stu-id="eb680-152">Start by going to the Server Explorer and expand the Northwind database node.</span></span> <span data-ttu-id="eb680-153">Als Nächstes Drilldown in den Ordner gespeicherte Prozeduren, mit der rechten Maustaste auf die `Products_SelectByCategoryID` gespeicherte Prozedur, und wählen Sie die Option Schritt in gespeicherte Prozedur aus dem Kontextmenü.</span><span class="sxs-lookup"><span data-stu-id="eb680-153">Next, drill down into the Stored Procedures folder, right-click on the `Products_SelectByCategoryID` stored procedure, and choose the Step Into Stored Procedure option from the context menu.</span></span> <span data-ttu-id="eb680-154">Dadurch wird den Debugger gestartet.</span><span class="sxs-lookup"><span data-stu-id="eb680-154">This will start the debugger.</span></span>

<span data-ttu-id="eb680-155">Da die `Products_SelectByCategoryID` gespeicherte Prozedur erwartet eine `@CategoryID` Eingabeparameter, wir werden aufgefordert, diesen Wert anzugeben.</span><span class="sxs-lookup"><span data-stu-id="eb680-155">Since the `Products_SelectByCategoryID` stored procedure expects a `@CategoryID` input parameter, we are asked to provide this value.</span></span> <span data-ttu-id="eb680-156">Geben Sie 1, die Informationen zu den Getränke zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="eb680-156">Enter 1, which will return information about the beverages.</span></span>


![Verwenden Sie den Wert 1 für die @CategoryID Parameter](debugging-stored-procedures-cs/_static/image1.png)

<span data-ttu-id="eb680-158">**Abbildung 1**: Verwenden Sie den Wert 1 für die `@CategoryID` Parameter</span><span class="sxs-lookup"><span data-stu-id="eb680-158">**Figure 1**: Use the Value 1 for the `@CategoryID` Parameter</span></span>


<span data-ttu-id="eb680-159">Nach der Angabe des Werts für die `@CategoryID` Parameter, die gespeicherte Prozedur ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="eb680-159">After supplying the value for the `@CategoryID` parameter, the stored procedure is executed.</span></span> <span data-ttu-id="eb680-160">Anstatt bis zum Abschluss ausgeführt, jedoch hält der Debugger die Ausführung bei der ersten Anweisung.</span><span class="sxs-lookup"><span data-stu-id="eb680-160">Rather than running to completion, though, the debugger halts execution on the first statement.</span></span> <span data-ttu-id="eb680-161">Beachten Sie, den gelben Pfeil auf den Rand, der angibt, der aktuellen Position in der gespeicherten Prozedur.</span><span class="sxs-lookup"><span data-stu-id="eb680-161">Note the yellow arrow in the margin, indicating the current location in the stored procedure.</span></span> <span data-ttu-id="eb680-162">Sie können anzeigen und Bearbeiten von Parameterwerten, die über das Fenster "überwachen" oder der Name des Parameters in der gespeicherten Prozedur mit der Maus.</span><span class="sxs-lookup"><span data-stu-id="eb680-162">You can view and edit parameter values through the Watch window or by hovering over the parameter name in the stored procedure.</span></span>


<span data-ttu-id="eb680-163">[![Der Debugger wurde auf die erste Anweisung der gespeicherten Prozedur angehalten.](debugging-stored-procedures-cs/_static/image3.png)](debugging-stored-procedures-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="eb680-163">[![The Debugger has Halted on the First Statement of the Stored Procedure](debugging-stored-procedures-cs/_static/image3.png)](debugging-stored-procedures-cs/_static/image2.png)</span></span>

<span data-ttu-id="eb680-164">**Abbildung 2**: der Debugger wurde angehalten, auf die erste Anweisung der gespeicherten Prozedur ([klicken Sie hier, um das Bild in voller Größe angezeigt](debugging-stored-procedures-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="eb680-164">**Figure 2**: The Debugger has Halted on the First Statement of the Stored Procedure ([Click to view full-size image](debugging-stored-procedures-cs/_static/image4.png))</span></span>


<span data-ttu-id="eb680-165">Um einen über die gespeicherte Prozedur eine Anweisung zu einem Zeitpunkt durchzuführen, klicken Sie auf die Schaltfläche "Prozedurschritt" in der Symbolleiste, oder drücken Sie die F10-TASTE.</span><span class="sxs-lookup"><span data-stu-id="eb680-165">To step through the stored procedure one statement at a time, click the Step Over button in the Toolbar or hit the F10 key.</span></span> <span data-ttu-id="eb680-166">Die `Products_SelectByCategoryID` gespeicherte Prozedur enthält ein einziges `SELECT` Anweisung, damit für die einzelne Anweisung drücken F10 einen Prozedurschritt wird und schließen Sie die Ausführung der gespeicherten Prozedur.</span><span class="sxs-lookup"><span data-stu-id="eb680-166">The `Products_SelectByCategoryID` stored procedure contains a single `SELECT` statement, so hitting F10 will Step over the single statement and complete the execution of the stored procedure.</span></span> <span data-ttu-id="eb680-167">Nachdem die gespeicherte Prozedur abgeschlossen wurde, wird seine Ausgabe im Ausgabefenster angezeigt, und der Debugger wird beendet.</span><span class="sxs-lookup"><span data-stu-id="eb680-167">After the stored procedure has completed, its output will appear in the Output window and the debugger will terminate.</span></span>

> [!NOTE]
> <span data-ttu-id="eb680-168">T-SQL-Debuggen auftritt auf der Anweisungsebene; Sie können nicht in einem Einzelschritt einer `SELECT` Anweisung.</span><span class="sxs-lookup"><span data-stu-id="eb680-168">T-SQL debugging occurs at the statement level; you cannot Step into a `SELECT` statement.</span></span>


## <a name="step-2-configuring-the-website-for-application-debugging"></a><span data-ttu-id="eb680-169">Schritt 2: Konfigurieren der Website für das Debuggen der Anwendung</span><span class="sxs-lookup"><span data-stu-id="eb680-169">Step 2: Configuring the Website for Application Debugging</span></span>

<span data-ttu-id="eb680-170">Beim Debuggen einer gespeicherten Prozedur direkt über den Server-Explorer praktisch ist, sind in vielen Szenarien wir mehr interessiert die gespeicherte Prozedur Debuggen, wenn sie von unserem ASP.NET-Anwendung aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="eb680-170">While debugging a stored procedure directly from the Server Explorer is handy, in many scenarios we are more interested in debugging the stored procedure when it is called from our ASP.NET application.</span></span> <span data-ttu-id="eb680-171">Wir können Haltepunkte hinzufügen, um eine gespeicherte Prozedur in Visual Studio, und starten Sie die ASP.NET-Anwendung debuggen.</span><span class="sxs-lookup"><span data-stu-id="eb680-171">We can add breakpoints to a stored procedure from within Visual Studio and then start debugging the ASP.NET application.</span></span> <span data-ttu-id="eb680-172">Wenn eine gespeicherte Prozedur mit Haltepunkten aus der Anwendung aufgerufen wird, wird die Ausführung am Haltepunkt angehalten, und wir sehen und ändern Sie die Parameterwerte der gespeicherten Prozedur s und die Anweisungen schrittweise, wie in Schritt 1 Wir haben können.</span><span class="sxs-lookup"><span data-stu-id="eb680-172">When a stored procedure with breakpoints is invoked from the application, execution will halt at the breakpoint and we can view and change the stored procedure s parameter values and step through its statements, just like we did in Step 1.</span></span>

<span data-ttu-id="eb680-173">Bevor wir mit dem Debuggen von gespeicherter Prozeduren, die von der Anwendung aufgerufen beginnen können, müssen wir weisen Sie die ASP.NET-Webanwendung für die Integration von SQL Server-Debugger an.</span><span class="sxs-lookup"><span data-stu-id="eb680-173">Before we can start debugging stored procedures called from the application, we need to instruct the ASP.NET web application to integrate with the SQL Server debugger.</span></span> <span data-ttu-id="eb680-174">Starten, indem Sie mit der rechten Maustaste auf den Namen der Website im Projektmappen-Explorer (`ASPNET_Data_Tutorial_74_CS`).</span><span class="sxs-lookup"><span data-stu-id="eb680-174">Start by right-clicking on the website name in the Solution Explorer (`ASPNET_Data_Tutorial_74_CS`).</span></span> <span data-ttu-id="eb680-175">Wählen Sie die Eigenschaftenseiten-Option im Kontextmenü, wählen Sie das Element "Startoptionen" auf der linken Seite, und aktivieren Sie das SQL Server-Kontrollkästchen im Abschnitt Debugger (siehe Abbildung 3).</span><span class="sxs-lookup"><span data-stu-id="eb680-175">Choose the Property Pages option from the context menu, select the Start Options item on the left, and check the SQL Server checkbox in the Debuggers section (see Figure 3).</span></span>


<span data-ttu-id="eb680-176">[![Aktivieren Sie das SQL Server-Kontrollkästchen in der Anwendung s-Eigenschaftenseiten](debugging-stored-procedures-cs/_static/image6.png)](debugging-stored-procedures-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="eb680-176">[![Check the SQL Server Checkbox in the Application s Property Pages](debugging-stored-procedures-cs/_static/image6.png)](debugging-stored-procedures-cs/_static/image5.png)</span></span>

<span data-ttu-id="eb680-177">**Abbildung 3**: Aktivieren Sie das SQL Server-Kontrollkästchen in der Anwendung-s-Eigenschaftenseiten ([klicken Sie hier, um das Bild in voller Größe angezeigt](debugging-stored-procedures-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="eb680-177">**Figure 3**: Check the SQL Server Checkbox in the Application s Property Pages ([Click to view full-size image](debugging-stored-procedures-cs/_static/image7.png))</span></span>


<span data-ttu-id="eb680-178">Darüber hinaus müssen Sie aktualisieren die Datenbank-Verbindungszeichenfolge, die von der Anwendung verwendet werden, sodass das Verbindungspooling deaktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="eb680-178">Additionally, we need to update the database connection string used by the application so that connection pooling is disabled.</span></span> <span data-ttu-id="eb680-179">Wenn eine Verbindung mit einer Datenbank geschlossen wird, den entsprechenden `SqlConnection` Objekt befindet sich in einem Pool verfügbarer Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="eb680-179">When a connection to a database is closed, the corresponding `SqlConnection` object is placed in a pool of available connections.</span></span> <span data-ttu-id="eb680-180">Beim Herstellen einer Verbindungs mit einer Datenbank, einem verfügbaren Verbindungsobjekt aus diesem Pool abgerufen werden können statt erstellen und eine neue Verbindung herstellen müssen.</span><span class="sxs-lookup"><span data-stu-id="eb680-180">When establishing a connection to a database, an available connection object can be retrieved from this pool rather than having to create and establish a new connection.</span></span> <span data-ttu-id="eb680-181">Diese pooling von Verbindungsobjekten ist eine leistungsverbesserung und ist standardmäßig aktiviert.</span><span class="sxs-lookup"><span data-stu-id="eb680-181">This pooling of connection objects is a performance enhancement and is enabled by default.</span></span> <span data-ttu-id="eb680-182">Allerdings beim Debuggen möchten, dass wir deaktivieren Verbindungspooling, da der Debuginfrastruktur nicht ordnungsgemäß wiederhergestellt ist, bei der Arbeit mit einer Verbindung, die aus dem Pool erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="eb680-182">However, when debugging we want to turn off connection pooling because the debugging infrastructure is not correctly reestablished when working with a connection that was taken from the pool.</span></span>

<span data-ttu-id="eb680-183">Deaktiviertes Verbindungspooling, aktualisieren Sie die `NORTHWNDConnectionString` in `Web.config` , damit sie die Einstellung enthält `Pooling=false` .</span><span class="sxs-lookup"><span data-stu-id="eb680-183">To disabled connection pooling, update the `NORTHWNDConnectionString` in `Web.config` so that it includes the setting `Pooling=false` .</span></span>


[!code-xml[Main](debugging-stored-procedures-cs/samples/sample1.xml)]

> [!NOTE]
> <span data-ttu-id="eb680-184">Wenn Sie fertig sind Debuggen von SQL Server über die ASP.NET-Anwendung unbedingt reinstate Verbindungspooling durch das Entfernen der `Pooling` aus der Verbindungszeichenfolge festlegen (oder durch Festlegen auf `Pooling=true` ).</span><span class="sxs-lookup"><span data-stu-id="eb680-184">Once you have finished debugging SQL Server through the ASP.NET application be sure to reinstate connection pooling by removing the `Pooling` setting from the connection string (or by setting it to `Pooling=true` ).</span></span>


<span data-ttu-id="eb680-185">An diesem Punkt wurde die ASP.NET-Anwendung konfiguriert, um Visual Studio zum Debuggen von SQL Server-Datenbankobjekte, die beim Aufrufen durch die Webanwendung zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="eb680-185">At this point the ASP.NET application has been configured to allow Visual Studio to debug SQL Server database objects when invoked through the web application.</span></span> <span data-ttu-id="eb680-186">Jetzt bleibt lediglich um eine gespeicherte Prozedur einen Haltepunkt hinzu, und mit dem Debuggen beginnen!</span><span class="sxs-lookup"><span data-stu-id="eb680-186">All that remains now is to add a breakpoint to a stored procedure and start debugging!</span></span>

## <a name="step-3-adding-a-breakpoint-and-debugging"></a><span data-ttu-id="eb680-187">Schritt 3: Hinzufügen eines Haltepunkts und Debuggen</span><span class="sxs-lookup"><span data-stu-id="eb680-187">Step 3: Adding a Breakpoint and Debugging</span></span>

<span data-ttu-id="eb680-188">Öffnen der `Products_SelectByCategoryID` gespeicherte Prozedur, und legen Sie einen Haltepunkt am Anfang der `SELECT` Anweisung, indem Sie in den Rand bei der entsprechenden Stelle oder platzieren Sie den Cursor am Anfang der `SELECT` -Anweisung und drücken F9.</span><span class="sxs-lookup"><span data-stu-id="eb680-188">Open the `Products_SelectByCategoryID` stored procedure and set a breakpoint at the start of the `SELECT` statement by clicking in the margin at the appropriate place or by placing your cursor at the start of the `SELECT` statement and hitting F9.</span></span> <span data-ttu-id="eb680-189">Abbildung 4 zeigt, wird der Haltepunkt als ein roter Kreis auf den Rand angezeigt.</span><span class="sxs-lookup"><span data-stu-id="eb680-189">As Figure 4 illustrates, the breakpoint appears as a red circle in the margin.</span></span>


<span data-ttu-id="eb680-190">[![Legen Sie einen Haltepunkt in der Products_SelectByCategoryID gespeicherte Prozedur](debugging-stored-procedures-cs/_static/image9.png)](debugging-stored-procedures-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="eb680-190">[![Set a Breakpoint in the Products_SelectByCategoryID Stored Procedure](debugging-stored-procedures-cs/_static/image9.png)](debugging-stored-procedures-cs/_static/image8.png)</span></span>

<span data-ttu-id="eb680-191">**Abbildung 4**: Festlegen eines Haltepunkts in der `Products_SelectByCategoryID` gespeicherte Prozedur ([klicken Sie hier, um das Bild in voller Größe angezeigt](debugging-stored-procedures-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="eb680-191">**Figure 4**: Set a Breakpoint in the `Products_SelectByCategoryID` Stored Procedure ([Click to view full-size image](debugging-stored-procedures-cs/_static/image10.png))</span></span>


<span data-ttu-id="eb680-192">Damit ein SQL-Datenbankobjekt, das über eine Clientanwendung gedebuggt werden kann ist es unabdinglich, die zum Unterstützen von Anwendungsdebuggen konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="eb680-192">In order for a SQL database object to be debugged through a client application, it is imperative that the database be configured to support application debugging.</span></span> <span data-ttu-id="eb680-193">Wenn Sie zuerst einen Haltepunkt festlegen, sollten diese Einstellung automatisch aktiviert werden, aber es ist unerlässlich, doppelklicken Sie auf.</span><span class="sxs-lookup"><span data-stu-id="eb680-193">When you first set a breakpoint, this setting should automatically be switched on, but it is prudent to double-check.</span></span> <span data-ttu-id="eb680-194">Mit der rechten Maustaste auf die `NORTHWND.MDF` Knoten im Server-Explorer.</span><span class="sxs-lookup"><span data-stu-id="eb680-194">Right-click on the `NORTHWND.MDF` node in the Server Explorer.</span></span> <span data-ttu-id="eb680-195">Im Kontextmenü den Befehl sollte eine aktivierte Menüelement Anwendungsdebugging enthalten.</span><span class="sxs-lookup"><span data-stu-id="eb680-195">The context menu should include a checked menu item named Application Debugging .</span></span>


![Stellen Sie sicher, dass die Anwendung debuggen-Option aktiviert ist](debugging-stored-procedures-cs/_static/image11.png)

<span data-ttu-id="eb680-197">**Abbildung 5**: Stellen Sie sicher, dass die Anwendung debuggen-Option aktiviert ist</span><span class="sxs-lookup"><span data-stu-id="eb680-197">**Figure 5**: Ensure that the Application Debugging Option is Enabled</span></span>


<span data-ttu-id="eb680-198">Mit der Haltepunkt festgelegt und die Anwendungsdebuggen-Option aktiviert können die gespeicherte Prozedur, die beim Aufrufen durch die ASP.NET-Anwendung debuggen.</span><span class="sxs-lookup"><span data-stu-id="eb680-198">With the breakpoint set and the Application Debugging option enabled, we are ready to debug the stored procedure when called from the ASP.NET application.</span></span> <span data-ttu-id="eb680-199">Starten Sie den Debugger, navigieren Sie zu dem Debugmenü den Ausnahmebefehl und Symbol auf der Symbolleiste auswählen Debuggen starten, drücken Sie F5, oder indem Sie auf die grüne "wiedergeben".</span><span class="sxs-lookup"><span data-stu-id="eb680-199">Start the debugger by going to the Debug menu and choosing Start Debugging, by hitting F5, or by clicking the green play icon in the Toolbar.</span></span> <span data-ttu-id="eb680-200">Der Debugger zu starten, wird und starten Sie die Website.</span><span class="sxs-lookup"><span data-stu-id="eb680-200">This will start the debugger and launch the website.</span></span>

<span data-ttu-id="eb680-201">Die `Products_SelectByCategoryID` gespeicherte Prozedur erstellt wurde, der [vorhandene gespeicherte Prozeduren verwenden, für die typisierte DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) Lernprogramm.</span><span class="sxs-lookup"><span data-stu-id="eb680-201">The `Products_SelectByCategoryID` stored procedure was created in the [Using Existing Stored Procedures for the Typed DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) tutorial.</span></span> <span data-ttu-id="eb680-202">Die entsprechenden Webseite (`~/AdvancedDAL/ExistingSprocs.aspx`) enthält eine GridView, die von dieser gespeicherten Prozedur zurückgegebenen Ergebnisse werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="eb680-202">Its corresponding web page (`~/AdvancedDAL/ExistingSprocs.aspx`) contains a GridView that displays the results returned by this stored procedure.</span></span> <span data-ttu-id="eb680-203">Besuchen Sie diese Seite über den Browser.</span><span class="sxs-lookup"><span data-stu-id="eb680-203">Visit this page through the browser.</span></span> <span data-ttu-id="eb680-204">Beim Erreichen der Seite ", der den Haltepunkt in der `Products_SelectByCategoryID` gespeicherte Prozedur erreicht, Visual Studio die Kontrolle zurück.</span><span class="sxs-lookup"><span data-stu-id="eb680-204">Upon reaching the page, the breakpoint in the `Products_SelectByCategoryID` stored procedure will be hit and control returned to Visual Studio.</span></span> <span data-ttu-id="eb680-205">Genau wie in Schritt 1, können Sie schrittweise Ausführen der gespeicherten Prozedur s-Anweisungen, und überprüfen und ändern die Parameterwerte.</span><span class="sxs-lookup"><span data-stu-id="eb680-205">Just like in Step 1, you can step through the stored procedure s statements and view and modify the parameter values.</span></span>


<span data-ttu-id="eb680-206">[![Die Seite "ExistingSprocs.aspx" zeigt zunächst die Getränke](debugging-stored-procedures-cs/_static/image13.png)](debugging-stored-procedures-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="eb680-206">[![The ExistingSprocs.aspx Page Initially Displays the Beverages](debugging-stored-procedures-cs/_static/image13.png)](debugging-stored-procedures-cs/_static/image12.png)</span></span>

<span data-ttu-id="eb680-207">**Abbildung 6**: die `ExistingSprocs.aspx` Seite zeigt zunächst die Getränke ([klicken Sie hier, um das Bild in voller Größe angezeigt](debugging-stored-procedures-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="eb680-207">**Figure 6**: The `ExistingSprocs.aspx` Page Initially Displays the Beverages ([Click to view full-size image](debugging-stored-procedures-cs/_static/image14.png))</span></span>


<span data-ttu-id="eb680-208">[![Die gespeicherte Prozedur s Haltepunkt erreicht](debugging-stored-procedures-cs/_static/image16.png)](debugging-stored-procedures-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="eb680-208">[![The Stored Procedure s Breakpoint has been Reached](debugging-stored-procedures-cs/_static/image16.png)](debugging-stored-procedures-cs/_static/image15.png)</span></span>

<span data-ttu-id="eb680-209">**Abbildung 7**: die gespeicherte Prozedur s Haltepunkt erreicht wurde ([klicken Sie hier, um das Bild in voller Größe angezeigt](debugging-stored-procedures-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="eb680-209">**Figure 7**: The Stored Procedure s Breakpoint has been Reached ([Click to view full-size image](debugging-stored-procedures-cs/_static/image17.png))</span></span>


<span data-ttu-id="eb680-210">Als das Überwachungsfenster in Abbildung 7 zeigt, der Wert, der die `@CategoryID` Parameter ist 1.</span><span class="sxs-lookup"><span data-stu-id="eb680-210">As the Watch window in Figure 7 shows, the value of the `@CategoryID` parameter is 1.</span></span> <span data-ttu-id="eb680-211">Grund hierfür ist die `ExistingSprocs.aspx` Seite zeigt anfänglich Produkte in der Kategorie "Getränke", besitzt eine `CategoryID` Wert 1.</span><span class="sxs-lookup"><span data-stu-id="eb680-211">This is because the `ExistingSprocs.aspx` page initially displays products in the beverages category, which has a `CategoryID` value of 1.</span></span> <span data-ttu-id="eb680-212">Wählen Sie eine andere Kategorie aus der Dropdownliste aus.</span><span class="sxs-lookup"><span data-stu-id="eb680-212">Choose a different category from the drop-down list.</span></span> <span data-ttu-id="eb680-213">Auf diese Weise einen Postback verursacht und führt erneut die `Products_SelectByCategoryID` gespeicherte Prozedur.</span><span class="sxs-lookup"><span data-stu-id="eb680-213">Doing so causes a postback and re-executes the `Products_SelectByCategoryID` stored procedure.</span></span> <span data-ttu-id="eb680-214">Der Haltepunkt erreicht wird, erneut, diesmal jedoch die `@CategoryID` s-Parameterwert wiedergibt der ausgewählten Dropdown-Listenelement s `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="eb680-214">The breakpoint is hit again, but this time the `@CategoryID` parameter s value reflects the selected drop-down list item s `CategoryID`.</span></span>


<span data-ttu-id="eb680-215">[![Wählen Sie eine andere Kategorie aus der Dropdown Liste](debugging-stored-procedures-cs/_static/image19.png)](debugging-stored-procedures-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="eb680-215">[![Choose a Different Category from the Drop-Down List](debugging-stored-procedures-cs/_static/image19.png)](debugging-stored-procedures-cs/_static/image18.png)</span></span>

<span data-ttu-id="eb680-216">**Abbildung 8**: Wählen Sie eine andere Kategorie aus der Dropdown Liste ([klicken Sie hier, um das Bild in voller Größe angezeigt](debugging-stored-procedures-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="eb680-216">**Figure 8**: Choose a Different Category from the Drop-Down List ([Click to view full-size image](debugging-stored-procedures-cs/_static/image20.png))</span></span>


<span data-ttu-id="eb680-217">[![Die @CategoryID Parameter gibt die Kategorie auf der Webseite ausgewählt](debugging-stored-procedures-cs/_static/image22.png)](debugging-stored-procedures-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="eb680-217">[![The @CategoryID Parameter Reflects the Category Selected from the Web Page](debugging-stored-procedures-cs/_static/image22.png)](debugging-stored-procedures-cs/_static/image21.png)</span></span>

<span data-ttu-id="eb680-218">**Abbildung 9**: die `@CategoryID` Parameter gibt die Kategorie, die von der Webseite ausgewählt ([klicken Sie hier, um das Bild in voller Größe angezeigt](debugging-stored-procedures-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="eb680-218">**Figure 9**: The `@CategoryID` Parameter Reflects the Category Selected from the Web Page ([Click to view full-size image](debugging-stored-procedures-cs/_static/image23.png))</span></span>


> [!NOTE]
> <span data-ttu-id="eb680-219">Wenn der Breakpoint in der `Products_SelectByCategoryID` gespeicherte Prozedur wird nicht erreicht, beim Zugriff auf die `ExistingSprocs.aspx` Seite, stellen Sie sicher, dass das SQL Server-Kontrollkästchen im Abschnitt Debugger der ASP.NET-Anwendung s Eigenschaftenseite geprüft wurde, dass Verbindungspooling wurde deaktiviert, und dass die Datenbank s Anwendungsdebugging-Option aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="eb680-219">If the breakpoint in the `Products_SelectByCategoryID` stored procedure is not hit when visiting the `ExistingSprocs.aspx` page, make sure that the SQL Server checkbox has been checked in the Debuggers section of the ASP.NET application s Properties Page, that connection pooling has been disabled, and that the database s Application Debugging option is enabled.</span></span> <span data-ttu-id="eb680-220">Wenn Sie immer noch Probleme auftreten, starten Sie Visual Studio und versuchen Sie es erneut.</span><span class="sxs-lookup"><span data-stu-id="eb680-220">If you re still having problems, restart Visual Studio and try again.</span></span>


## <a name="debugging-t-sql-database-objects-on-remote-instances"></a><span data-ttu-id="eb680-221">Debuggen von T-SQL-Datenbankobjekte auf Remote-Instanzen</span><span class="sxs-lookup"><span data-stu-id="eb680-221">Debugging T-SQL Database Objects on Remote Instances</span></span>

<span data-ttu-id="eb680-222">Debuggen von Datenbankobjekten über Visual Studio ist recht einfach, wenn die SQL Server-Datenbankinstanz auf dem gleichen Computer wie Visual Studio ist.</span><span class="sxs-lookup"><span data-stu-id="eb680-222">Debugging database objects through Visual Studio is fairly straightforward when the SQL Server database instance is on the same machine as Visual Studio.</span></span> <span data-ttu-id="eb680-223">Jedoch wenn SQL Server und Visual Studio auf unterschiedlichen Computern befinden wird dann einige eine sorgfältige Konfiguration erforderlich, um alles ordnungsgemäß funktioniert.</span><span class="sxs-lookup"><span data-stu-id="eb680-223">However, if SQL Server and Visual Studio reside on different machines then some careful configuration is required to get everything working properly.</span></span> <span data-ttu-id="eb680-224">Es gibt zwei Kernaufgaben, denen es ausgesetzt sind:</span><span class="sxs-lookup"><span data-stu-id="eb680-224">There are two core tasks we are faced with:</span></span>

- <span data-ttu-id="eb680-225">Stellen Sie sicher, dass der Anmeldename zum Verbinden mit der Datenbank über ADO.NET gehört die `sysadmin` Rolle.</span><span class="sxs-lookup"><span data-stu-id="eb680-225">Ensure that the login used to connect to the database via ADO.NET belongs to the `sysadmin` role.</span></span>
- <span data-ttu-id="eb680-226">Stellen Sie sicher, dass die Windows-Benutzerkonto, das von Visual Studio auf dem Entwicklungscomputer verwendet eine gültige SQL Server-Anmeldekonto ist, zu der gehört die `sysadmin` Rolle.</span><span class="sxs-lookup"><span data-stu-id="eb680-226">Ensure that the Windows user account used by Visual Studio on the development machine is a valid SQL Server login account that belongs to the `sysadmin` role.</span></span>

<span data-ttu-id="eb680-227">Der erste Schritt ist relativ unkompliziert.</span><span class="sxs-lookup"><span data-stu-id="eb680-227">The first step is relatively straightforward.</span></span> <span data-ttu-id="eb680-228">Zunächst Identifizieren des Benutzerkontos, das zum Verbinden mit der Datenbank von der ASP.NET-Anwendung aus, und fügen Sie dann in SQL Server Management Studio, Anmeldekonto an, die `sysadmin` Rolle.</span><span class="sxs-lookup"><span data-stu-id="eb680-228">First, identify the user account used to connect to the database from the ASP.NET application and then, from SQL Server Management Studio, add that login account to the `sysadmin` role.</span></span>

<span data-ttu-id="eb680-229">Die zweite Aufgabe erfordert, dass die Windows-Benutzerkonto, mit dem Debuggen der Anwendung, eine gültige Anmeldung auf die Remotedatenbank.</span><span class="sxs-lookup"><span data-stu-id="eb680-229">The second task requires that the Windows user account you use to debug the application be a valid login on the remote database.</span></span> <span data-ttu-id="eb680-230">Allerdings sind die Chancen, dass die Windows-Konto, das auf Ihre Arbeitsstation mit dem Sie angemeldet, auf, eine gültige Anmeldung auf SQL Server ist.</span><span class="sxs-lookup"><span data-stu-id="eb680-230">However, chances are the Windows account you logged on to your workstation with is not a valid login on SQL Server.</span></span> <span data-ttu-id="eb680-231">Statt SQL Server die bestimmten Anmeldekonto hinzugefügt, wäre eine bessere Wahl, einige Windows-Benutzerkonto als das debugging SQL Server-Dienstkonto festlegen.</span><span class="sxs-lookup"><span data-stu-id="eb680-231">Rather than adding your particular login account to SQL Server, a better choice would be to designate some Windows user account as the SQL Server debugging account.</span></span> <span data-ttu-id="eb680-232">Um die Datenbankobjekte von einer SQL Server-Remoteinstanz zu debuggen, würden Sie dann Visual Studio unter Verwendung dieser Windows-Konto s Anmeldeinformationen ausführen.</span><span class="sxs-lookup"><span data-stu-id="eb680-232">Then, to debug the database objects of a remote SQL Server instance, you would run Visual Studio using that Windows login account s credentials.</span></span>

<span data-ttu-id="eb680-233">Ein Beispiel sollte Dinge verdeutlichen.</span><span class="sxs-lookup"><span data-stu-id="eb680-233">An example should help clarify things.</span></span> <span data-ttu-id="eb680-234">Angenommen, es ein Windows-Konto mit dem Namen ist `SQLDebug` innerhalb der Windows-Domäne.</span><span class="sxs-lookup"><span data-stu-id="eb680-234">Imagine that there is a Windows account named `SQLDebug` within the Windows domain.</span></span> <span data-ttu-id="eb680-235">Dieses Konto auf die SQL Server-Remoteinstanz als eine gültige Anmeldung und als Mitglied hinzugefügt werden müssten die `sysadmin` Rolle.</span><span class="sxs-lookup"><span data-stu-id="eb680-235">This account would need to be added to the remote SQL Server instance as a valid login and as a member of the `sysadmin` role.</span></span> <span data-ttu-id="eb680-236">Klicken Sie dann müssten wir um remote SQL Server-Instanz von Visual Studio zu debuggen, Ausführen von Visual Studio als die `SQLDebug` Benutzer.</span><span class="sxs-lookup"><span data-stu-id="eb680-236">Then, to debug the remote SQL Server instance from Visual Studio, we would need to run Visual Studio as the `SQLDebug` user.</span></span> <span data-ttu-id="eb680-237">Dies könnte durch Protokollierung aus unserem Arbeitsstation wieder anmelden, als `SQLDebug`, und starten Sie dann Visual Studio, jedoch ein einfacherer Ansatz wäre, sich unsere Arbeitsstation mit eigenen Anmeldeinformationen anmelden, und verwenden Sie dann `runas.exe` zum Starten von Visual Studio als die `SQLDebug` Benutzer.</span><span class="sxs-lookup"><span data-stu-id="eb680-237">This could be done by logging out of our workstation, logging back in as `SQLDebug`, and then launching Visual Studio, but a simpler approach would be to login to our workstation using our own credentials and then use `runas.exe` to launch Visual Studio as the `SQLDebug` user.</span></span> <span data-ttu-id="eb680-238">`runas.exe` ermöglicht es eine bestimmte Anwendung unter dem Deckmantel von einem anderen Benutzerkonto ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="eb680-238">`runas.exe` allows a particular application to be executed under the guise of a different user account.</span></span> <span data-ttu-id="eb680-239">Zum Starten von Visual Studio als `SQLDebug`, könnten Sie die folgende Anweisung in der Befehlszeile eingeben:</span><span class="sxs-lookup"><span data-stu-id="eb680-239">To launch Visual Studio as `SQLDebug`, you could enter the following statement at the command line:</span></span>


[!code-console[Main](debugging-stored-procedures-cs/samples/sample2.cmd)]

<span data-ttu-id="eb680-240">Eine ausführlichere Erklärung zu diesem Vorgang finden Sie unter [William R. Vaughn](http://betav.com/BLOG/billva/) s *Hitchhiker s Leitfaden zu Visual Studio und SQL Server, siebten Edition* sowie [Vorgehensweise: Festlegen von SQL Server-Berechtigungen für das Debuggen](https://msdn.microsoft.com/library/w1bhybwz(VS.80).aspx).</span><span class="sxs-lookup"><span data-stu-id="eb680-240">For a more detailed explanation on this process, see [William R. Vaughn](http://betav.com/BLOG/billva/) s *Hitchhiker s Guide to Visual Studio and SQL Server, Seventh Edition* as well as [How To: Set SQL Server Permissions for Debugging](https://msdn.microsoft.com/library/w1bhybwz(VS.80).aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="eb680-241">Wenn der Entwicklungscomputer mit Windows XP Service Pack 2 ausgeführt wird, müssen Sie konfigurieren Sie die Windows-Firewall, um Remotedebugging zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="eb680-241">If your development machine is running Windows XP Service Pack 2 you will need to configure the Internet Connection Firewall to allow remote debugging.</span></span> <span data-ttu-id="eb680-242">[Die Art und Weise an: SQL Server 2005-Debuggen aktivieren](https://msdn.microsoft.com/library/s0fk6z6e(VS.80).aspx) Artikel Hinweise, dass diese beiden Schritte umfasst: (a) auf dem Visual Studio-Hostcomputer müssen hinzufügen `Devenv.exe` zur Liste der Ausnahmen und öffnen Sie die TCP-Anschluss 135; und (b) auf dem Remotecomputer (SQL), müssen Sie öffnen die 135 TCP-port und fügen `sqlservr.exe` der Ausnahmenliste.</span><span class="sxs-lookup"><span data-stu-id="eb680-242">[The How To: Enable SQL Server 2005 Debugging](https://msdn.microsoft.com/library/s0fk6z6e(VS.80).aspx) article notes that this involves two steps: (a) On the Visual Studio host machine, you must add `Devenv.exe` to the Exceptions list and open the TCP 135 port; and (b) On the remote (SQL) machine, you must open the TCP 135 port and add `sqlservr.exe` to the Exceptions list.</span></span> <span data-ttu-id="eb680-243">Wenn die Domänenrichtlinie eine Netzwerkkommunikation über IPSec erfordert, müssen Sie die Ports UDP 4500 und UDP 500 öffnen.</span><span class="sxs-lookup"><span data-stu-id="eb680-243">If your domain policy requires network communication to be done through IPSec, you must open the UDP 4500 and UDP 500 ports.</span></span>


## <a name="summary"></a><span data-ttu-id="eb680-244">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="eb680-244">Summary</span></span>

<span data-ttu-id="eb680-245">Zusätzlich zur Bereitstellung von debugging-Unterstützung für .NET-Anwendungscode, bietet Visual Studio auch eine Vielzahl von Debugoptionen für SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="eb680-245">In addition to providing debugging support for .NET application code, Visual Studio also provides a variety of debugging options for SQL Server 2005.</span></span> <span data-ttu-id="eb680-246">In diesem Lernprogramm erläutert, zwei Optionen: direkten Datenbankdebuggen und die zu Anwendungsdebuggen.</span><span class="sxs-lookup"><span data-stu-id="eb680-246">In this tutorial we looked at two of those options: Direct Database Debugging and application debugging.</span></span> <span data-ttu-id="eb680-247">Um ein T-SQL-Datenbankobjekt direkt Debuggen zu können, suchen Sie das Objekt über den Server-Explorer mit der rechten Maustaste darauf, und Einzelschritt auswählen.</span><span class="sxs-lookup"><span data-stu-id="eb680-247">To directly debug a T-SQL database object, locate the object through the Server Explorer then right-click on it and choose Step Into.</span></span> <span data-ttu-id="eb680-248">Dadurch wird der Debugger gestartet und hält bei der ersten Anweisung in das Datenbankobjekt, das an diesem, das Punkt können Sie schrittweise Durchlaufen der Objekt-s-Anweisungen, und überprüfen und Ändern von Parameterwerten an.</span><span class="sxs-lookup"><span data-stu-id="eb680-248">This starts the debugger and halts on the first statement in the database object, at which point you can step through the object s statements and view and modify parameter values.</span></span> <span data-ttu-id="eb680-249">In Schritt 1 wird dieser Ansatz mit den Einzelschritten der `Products_SelectByCategoryID` gespeicherten Prozedur.</span><span class="sxs-lookup"><span data-stu-id="eb680-249">In Step 1 we used this approach to step into the `Products_SelectByCategoryID` stored procedure.</span></span>

<span data-ttu-id="eb680-250">Anwendungsdebuggen kann Haltepunkte direkt innerhalb der Datenbankobjekte festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="eb680-250">Application debugging allows breakpoints to be set directly within the database objects.</span></span> <span data-ttu-id="eb680-251">Wenn ein Datenbankobjekt mit Haltepunkten aus einer Clientanwendung (z. B. eine ASP.NET-Webanwendung) aufgerufen wird, hält das Programm an, wie der Debugger übernimmt.</span><span class="sxs-lookup"><span data-stu-id="eb680-251">When a database object with breakpoints is invoked from a client application (such as an ASP.NET web application), the program halts as the debugger takes over.</span></span> <span data-ttu-id="eb680-252">Anwendungsdebugging ist nützlich, da deutlicher angezeigt Maßnahme Anwendung bewirkt, dass ein bestimmtes Datenbankobjekt aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="eb680-252">Application debugging is useful because it more clearly shows what application action causes a particular database object to be invoked.</span></span> <span data-ttu-id="eb680-253">Dies erfordert allerdings mehr Konfiguration und Installation als direkten Datenbankdebuggen.</span><span class="sxs-lookup"><span data-stu-id="eb680-253">However, it requires a bit more configuration and setup than Direct Database Debugging.</span></span>

<span data-ttu-id="eb680-254">Datenbankobjekte können auch über SQL Server-Projekte gedebuggt werden.</span><span class="sxs-lookup"><span data-stu-id="eb680-254">Database objects can also be debugged through SQL Server Projects.</span></span> <span data-ttu-id="eb680-255">Betrachten wir mithilfe von SQL Server-Projekte, und verwenden diese zum Erstellen und Debuggen verwalteter Datenbankobjekte in den nächsten Lernprogrammen.</span><span class="sxs-lookup"><span data-stu-id="eb680-255">We will look at using SQL Server Projects and how to use them to create and debug managed database objects in the next tutorial.</span></span>

<span data-ttu-id="eb680-256">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="eb680-256">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="eb680-257">Informationen zum Autor</span><span class="sxs-lookup"><span data-stu-id="eb680-257">About the Author</span></span>

<span data-ttu-id="eb680-258">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor von sieben ASP/ASP.NET-Büchern und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), Microsoft Web-Technologien seit 1998 arbeitet.</span><span class="sxs-lookup"><span data-stu-id="eb680-258">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="eb680-259">Scott fungiert als ein unabhängiger Berater, Trainer und Writer.</span><span class="sxs-lookup"><span data-stu-id="eb680-259">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="eb680-260">Sein neueste Buch wird [ *Sams Schulen selbst ASP.NET 2.0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="eb680-260">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="eb680-261">Er die erreicht werden kann, zur [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) oder über seinen Blog die finden Sie unter [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="eb680-261">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="eb680-262">[Zurück](protecting-connection-strings-and-other-configuration-information-cs.md)
> [Weiter](creating-stored-procedures-and-user-defined-functions-with-managed-code-cs.md)</span><span class="sxs-lookup"><span data-stu-id="eb680-262">[Previous](protecting-connection-strings-and-other-configuration-information-cs.md)
[Next](creating-stored-procedures-and-user-defined-functions-with-managed-code-cs.md)</span></span>
