---
uid: mvc/overview/older-versions-1/contact-manager/iteration-7-add-ajax-functionality-cs
title: 'Iteration #7 – Add Ajax-Funktionen (c#) | Microsoft Docs'
author: microsoft
description: In der siebten Iteration werden die Reaktionsfähigkeit und die Leistung der Anwendung durch Hinzufügen von Unterstützung für Ajax verbessern.
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2009
ms.topic: article
ms.assetid: f1b0809e-8909-444e-b6bb-a5cd1dea3f72
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-7-add-ajax-functionality-cs
msc.type: authoredcontent
ms.openlocfilehash: 35d62383a571725749b2fc629bbb17954657b2f6
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
---
<a name="iteration-7--add-ajax-functionality-c"></a><span data-ttu-id="dcbeb-103">Iteration #7 – Add Ajax-Funktionen (c#)</span><span class="sxs-lookup"><span data-stu-id="dcbeb-103">Iteration #7 – Add Ajax functionality (C#)</span></span>
====================
<span data-ttu-id="dcbeb-104">durch [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="dcbeb-104">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="dcbeb-105">Herunterladen von Code</span><span class="sxs-lookup"><span data-stu-id="dcbeb-105">Download Code</span></span>](iteration-7-add-ajax-functionality-cs/_static/contactmanager_7_cs1.zip)

> <span data-ttu-id="dcbeb-106">In der siebten Iteration werden die Reaktionsfähigkeit und die Leistung der Anwendung durch Hinzufügen von Unterstützung für Ajax verbessern.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-106">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="dcbeb-107">Erstellen einer ASP.NET MVC-Anwendung Kontaktverwaltung (c#)</span><span class="sxs-lookup"><span data-stu-id="dcbeb-107">Building a Contact Management ASP.NET MVC Application (C#)</span></span>

<span data-ttu-id="dcbeb-108">In dieser Reihe von Lernprogrammen erstellen wir eine vollständige Contact Management-Anwendung von Grund auf Fertig stellen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-108">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="dcbeb-109">Die Kontakt-Manager-Anwendung können Sie zum Speichern von Kontaktinformationen - Namen, Telefonnummern und e-Mail-Adressen - eine Liste der Personen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-109">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="dcbeb-110">Erstellen der Anwendung über mehrere Iterationen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-110">We build the application over multiple iterations.</span></span> <span data-ttu-id="dcbeb-111">Bei jeder Iteration verbessern wir allmählich die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-111">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="dcbeb-112">Das Ziel dieses Ansatzes für mehrere Iteration ist, um den Grund für jede Änderung verstehen können.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-112">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="dcbeb-113">Iteration #1 – Erstellen der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-113">Iteration #1 - Create the application.</span></span> <span data-ttu-id="dcbeb-114">In der ersten Iteration erstellen wir die Kontakt-Manager in der einfachsten möglich.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-114">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="dcbeb-115">Wir fügen die Unterstützung für die grundlegenden Datenbankvorgängen: erstellen, lesen, aktualisieren und löschen (CRUD).</span><span class="sxs-lookup"><span data-stu-id="dcbeb-115">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="dcbeb-116">Iteration #2 – Stellen Sie die Anwendung gut aussehen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-116">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="dcbeb-117">In dieser Iteration haben wir die Darstellung der Anwendung verbessern, indem Ändern der Standard-Gestaltungsvorlage für ASP.NET MVC-Ansicht und cascading Stylesheet.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-117">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="dcbeb-118">Iteration #3 - formularvalidierung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-118">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="dcbeb-119">In der dritten Iteration fügen wir grundlegende formularvalidierung hinzu.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-119">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="dcbeb-120">Es wird verhindert, dass Personen senden eines Formulars ohne erforderlichen Felder des Formulars abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-120">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="dcbeb-121">Wir überprüfen e-Mail-Adressen und Telefonnummern.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-121">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="dcbeb-122">Iteration #4 – Stellen Sie die Anwendung, die lose miteinander verbunden.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-122">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="dcbeb-123">In dieser dritten Iteration nutzen wir mehrere Software-Entwurfsmuster, damit sie leichter zu verwalten und ändern die Kontakt-Manager-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-123">In this third iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="dcbeb-124">Beispielsweise gestalten wir unsere Anwendung in das Repository und die Abhängigkeitsinjektion-Muster verwenden.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-124">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="dcbeb-125">Iteration #5: Erstellen von Komponententests.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-125">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="dcbeb-126">In der fünften Iteration stellen wir unsere Anwendung einfacher zu verwalten und ändern, indem Sie Komponententests hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-126">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="dcbeb-127">Wir unsere Daten Modellklassen modellieren und erstellen Sie Komponententests für unsere Controller und die Validierungslogik.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-127">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="dcbeb-128">Iteration #6 – verwenden Sie eine testgesteuerte Entwicklung.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-128">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="dcbeb-129">In dieser Iteration sechste wir neue Funktionalität Hinzufügen der Anwendung durch Schreiben von Komponententests zuerst und Code für die Komponententests schreiben.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-129">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="dcbeb-130">In dieser Iteration fügen wir Kontakt Gruppen hinzu.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-130">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="dcbeb-131">Iteration #7 - Ajax-Funktionen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-131">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="dcbeb-132">In der siebten Iteration werden die Reaktionsfähigkeit und die Leistung der Anwendung durch Hinzufügen von Unterstützung für Ajax verbessern.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-132">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="dcbeb-133">Diese Iteration</span><span class="sxs-lookup"><span data-stu-id="dcbeb-133">This Iteration</span></span>

<span data-ttu-id="dcbeb-134">In dieser Iteration der Kontakt-Manager-Anwendung gestalten wir unsere Anwendung Ajax verwenden.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-134">In this iteration of the Contact Manager application, we refactor our application to make use of Ajax.</span></span> <span data-ttu-id="dcbeb-135">Durch die Nutzung von Ajax, stellen wir unsere Anwendung anpassbar.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-135">By taking advantage of Ajax, we make our application more responsive.</span></span> <span data-ttu-id="dcbeb-136">Wir können vermeiden, eine gesamte Seite gerendert, wenn wir benötigen nur eine bestimmte Region auf einer Seite zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-136">We can avoid rendering an entire page when we need to update only a certain region in a page.</span></span>

<span data-ttu-id="dcbeb-137">Wir werden unsere Indexansicht so umgestalten, dass wir t muss die gesamte Seite erneut Verschlüsselungskennwort, wenn jemand eine neue Gruppe von Kontakte auswählt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-137">We'll refactor our Index view so that we don t need to redisplay the entire page whenever someone selects a new contact group.</span></span> <span data-ttu-id="dcbeb-138">Stattdessen klickt ein Benutzer eine Gruppe von Kontakte, wir nur die Liste der Kontakte aktualisieren, und lassen den Rest der Seite allein.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-138">Instead, when someone clicks a contact group, we'll just update the list of contacts and leave the rest of the page alone.</span></span>

<span data-ttu-id="dcbeb-139">Ändern wir auch die Möglichkeit, die unsere Delete link funktioniert.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-139">We'll also change the way our delete link works.</span></span> <span data-ttu-id="dcbeb-140">Anstatt eine separate Bestätigungsseite zeigen wir ein Bestätigungsdialogfeld JavaScript.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-140">Instead of displaying a separate confirmation page, we'll display a JavaScript confirmation dialog.</span></span> <span data-ttu-id="dcbeb-141">Wenn Sie bestätigen, dass Sie einen Kontakt zu löschen möchten, wird ein HTTP DELETE-Vorgang für den Server So löschen Sie den Kontaktdatensatz aus der Datenbank ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-141">If you confirm that you want to delete a contact, an HTTP DELETE operation is performed against the server to delete the contact record from the database.</span></span>

<span data-ttu-id="dcbeb-142">Darüber hinaus werden wir unsere Indexansicht Animationseffekte hinzuzufügende jQuery nutzen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-142">Furthermore, we will take advantage of jQuery to add animation effects to our Index view.</span></span> <span data-ttu-id="dcbeb-143">Wir müssen eine Animation anzeigen, wenn die neue Liste mit Kontakten vom Server abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-143">We'll display an animation when the new list of contacts is being fetched from the server.</span></span>

<span data-ttu-id="dcbeb-144">Schalten Sie schließlich Vorteil von ASP.NET AJAX-Framework-Unterstützung für die Verwaltung von Browserverlauf.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-144">Finally, we'll take advantage of the ASP.NET AJAX framework support for managing browser history.</span></span> <span data-ttu-id="dcbeb-145">Wir erstellen Verlaufspunkten, sobald wir einen Ajax-Aufruf zum Aktualisieren der Kontaktliste ausführen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-145">We'll create history points whenever we perform an Ajax call to update the contact list.</span></span> <span data-ttu-id="dcbeb-146">Auf diese Weise der Browser rückwärts und Vorwärts-Schaltflächen werden arbeiten.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-146">That way, the browser backward and forward buttons will work.</span></span>

## <a name="why-use-ajax"></a><span data-ttu-id="dcbeb-147">Gründe für die Verwendung von Ajax</span><span class="sxs-lookup"><span data-stu-id="dcbeb-147">Why use Ajax?</span></span>

<span data-ttu-id="dcbeb-148">Mithilfe von Ajax weist viele Vorteile.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-148">Using Ajax has many benefits.</span></span> <span data-ttu-id="dcbeb-149">Eine Anwendung führt eine bessere benutzererfahrung zunächst Ajax-Funktionen hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-149">First, adding Ajax functionality to an application results in a better user experience.</span></span> <span data-ttu-id="dcbeb-150">In einer normalen Web-Anwendung muss die gesamte Seite zurück an den Server werden jedes Mal zurückgesendet, das ein Benutzer eine Aktion ausführt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-150">In a normal web application, the entire page must be posted back to the server each and every time a user performs an action.</span></span> <span data-ttu-id="dcbeb-151">Wenn Sie eine Aktion ausführen, müssen der Browser sperren und der Benutzer warten Sie, bis die gesamte Seite abgerufen und angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-151">Whenever you perform an action, the browser locks and the user must wait until the entire page is fetched and redisplayed.</span></span>

<span data-ttu-id="dcbeb-152">Das wäre eine unzulässige Erfahrung im Falle einer desktop-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-152">This would be an unacceptable experience in the case of a desktop application.</span></span> <span data-ttu-id="dcbeb-153">Aber bisher wir entsprechen mit diesem Benutzer negatives Erlebnis bei einer Webanwendung, da nicht bekannt, dass wir alle besser machen können.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-153">But, traditionally, we lived with this bad user experience in the case of a web application because we did not know that we could do any better.</span></span> <span data-ttu-id="dcbeb-154">Wir dachten, dass eine Einschränkung des Webanwendungen angezeigt wurde, die in Wirklichkeit nur eine Einschränkung des unsere Imaginations war.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-154">We thought it was a limitation of web applications when, in actuality, it was just a limitation of our imaginations.</span></span>

<span data-ttu-id="dcbeb-155">In einer Ajax-Anwendung Verschlüsselungskennwort Sie t muss die Benutzeroberfläche zum Stillstand nur auf eine Seite aktualisieren zu bringen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-155">In an Ajax application, you don t need to bring the user experience to a halt just to update a page.</span></span> <span data-ttu-id="dcbeb-156">Stattdessen können Sie eine asynchrone Anforderung im Hintergrund, um die Seite aktualisieren ausführen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-156">Instead, you can perform an asynchronous request in the background to update the page.</span></span> <span data-ttu-id="dcbeb-157">Sie Verschlüsselungskennwort t erzwingen den Benutzer warten, während die auf der Seite aktualisiert wird.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-157">You don t force the user to wait while part of the page gets updated.</span></span>

<span data-ttu-id="dcbeb-158">Durch die Nutzung von Ajax, können Sie auch die Leistung Ihrer Anwendung verbessern.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-158">By taking advantage of Ajax, you also can improve the performance of your application.</span></span> <span data-ttu-id="dcbeb-159">Erwägen Sie, wie die Kontakt-Manager-Anwendung ohne Ajax-Funktionen jetzt funktioniert.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-159">Consider how the Contact Manager application works right now without Ajax functionality.</span></span> <span data-ttu-id="dcbeb-160">Wenn Sie eine Gruppe von Kontakte klicken, muss die gesamte Indexansicht erneut angezeigt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-160">When you click a contact group, the entire Index view must be redisplayed.</span></span> <span data-ttu-id="dcbeb-161">Die Liste der Kontakte und Liste der Kontakt Gruppen müssen vom Datenbankserver abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-161">The list of contacts and list of contact groups must be retrieved from the database server.</span></span> <span data-ttu-id="dcbeb-162">Alle diese Daten müssen über das Netzwerk vom Webserver an Webbrowser übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-162">All of this data must be passed across the wire from web server to web browser.</span></span>

<span data-ttu-id="dcbeb-163">Nachdem wir unsere Anwendung Ajax-Funktionen hinzugefügt haben, können wir jedoch die erneute Anzeigen der gesamten Seite klickt ein Benutzer eine Gruppe von Kontakte vermieden.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-163">After we add Ajax functionality to our application, however, we can avoid redisplaying the entire page when a user clicks a contact group.</span></span> <span data-ttu-id="dcbeb-164">Wir müssen nicht mehr auf die Kontakten-Gruppen aus der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-164">We no longer need to grab the contact groups from the database.</span></span> <span data-ttu-id="dcbeb-165">Wir raten auch t muss die gesamte Indexansicht über das Netzwerk übertragen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-165">We also don t need to push the entire Index view across the wire.</span></span> <span data-ttu-id="dcbeb-166">Durch die Nutzung von Ajax, wir verringern Sie die Menge der Arbeit, die unsere Datenbankserver ausführen müssen, und wir unsere Anwendung erforderlichen Netzwerkverkehr reduzieren.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-166">By taking advantage of Ajax, we reduce the amount of work that our database server must perform and we reduce the amount of network traffic required by our application.</span></span>

## <a name="don-t-be-afraid-of-ajax"></a><span data-ttu-id="dcbeb-167">Ich möchte werden sorgen von Ajax</span><span class="sxs-lookup"><span data-stu-id="dcbeb-167">Don t be Afraid of Ajax</span></span>

<span data-ttu-id="dcbeb-168">Einige Entwickler vermeiden Sie die Verwendung von Ajax, da diese älteren Browsern kümmern.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-168">Some developers avoid using Ajax because they worry about downlevel browsers.</span></span> <span data-ttu-id="dcbeb-169">Sie möchten sicherstellen, dass ihre Webanwendungen weiterhin funktionieren, wenn von einem Browser zugegriffen, die JavaScript nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-169">They want to make sure that their web applications will still work when accessed by a browser that does not support JavaScript.</span></span> <span data-ttu-id="dcbeb-170">Da JavaScript Ajax abhängig ist, vermeiden Sie einige Entwickler mithilfe von Ajax.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-170">Because Ajax depends on JavaScript, some developers avoid using Ajax.</span></span>

<span data-ttu-id="dcbeb-171">Jedoch wenn Sie sorgfältig wie Ajax implementieren können dann Sie Anwendungen erstellen, die mit Browsern komplexe und Downlevel arbeiten.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-171">However, if you are careful about how you implement Ajax then you can build applications that work with both uplevel and downlevel browsers.</span></span> <span data-ttu-id="dcbeb-172">Unsere Kontakt-Manager-Anwendung funktioniert mit Browsern mit Unterstützung für JavaScript und Browser, die nicht der Fall.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-172">Our Contact Manager application will work with browsers that support JavaScript and browsers that do not.</span></span>

<span data-ttu-id="dcbeb-173">Wenn Sie die Kontakt-Manager-Anwendung mit einem Browser verwenden, die JavaScript unterstützt werden, müssen Sie eine bessere benutzererfahrung.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-173">If you use the Contact Manager application with a browser that supports JavaScript then you will have a better user experience.</span></span> <span data-ttu-id="dcbeb-174">Z. B. Wenn Sie eine Gruppe von Kontakte klicken, wird nur der Bereich der Seite, die Kontakte zeigt aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-174">For example, when you click a contact group, only the region of the page that displays contacts will be updated.</span></span>

<span data-ttu-id="dcbeb-175">Wenn andererseits, Sie die Kontakt-Manager-Anwendung mit einem Browser verwenden unterstützt keine JavaScript (oder mit dem JavaScript deaktiviert) werden, müssen Sie eine etwas weniger wünschenswerte Benutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-175">If, on the other hand, you use the Contact Manager application with a browser that does not support JavaScript (or that has JavaScript disabled) then you will have a slightly less desirable user experience.</span></span> <span data-ttu-id="dcbeb-176">Z. B. Wenn Sie eine Gruppe von Kontakte klicken, muss die gesamte Indexansicht zurück an den Browser veröffentlicht werden damit die entsprechende Liste der Kontakte anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-176">For example, when you click a contact group, the entire Index view must be posted back to the browser in order to display the matching list of contacts.</span></span>

## <a name="adding-the-required-javascript-files"></a><span data-ttu-id="dcbeb-177">Hinzufügen der erforderlichen JavaScript-Dateien</span><span class="sxs-lookup"><span data-stu-id="dcbeb-177">Adding the Required JavaScript Files</span></span>

<span data-ttu-id="dcbeb-178">Es müssen drei JavaScript-Dateien verwenden, um unsere Anwendung Ajax-Funktionen hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-178">We'll need to use three JavaScript files to add Ajax functionality to our application.</span></span> <span data-ttu-id="dcbeb-179">Alle drei dieser Dateien sind im Ordner Scripts, einer neuen ASP.NET MVC-Anwendung enthalten.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-179">All three of these files are included in the Scripts folder of a new ASP.NET MVC application.</span></span>

<span data-ttu-id="dcbeb-180">Wenn Sie beabsichtigen, Ajax auf mehreren Seiten in Ihrer Anwendung verwenden stellt dann sinnvoll, die erforderlichen JavaScript-Dateien in Ihrer Anwendung s Ansicht-Masterseite einschließen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-180">If you plan to use Ajax in multiple pages in your application then it makes sense to include the required JavaScript files in your application s view master page.</span></span> <span data-ttu-id="dcbeb-181">Auf diese Weise werden die JavaScript-Dateien in alle Seiten in der Anwendung automatisch einbezogen werden.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-181">That way, the JavaScript files will be included in all of the pages in your application automatically.</span></span>

<span data-ttu-id="dcbeb-182">Fügen Sie der folgenden JavaScript-Code enthält, innerhalb der &lt;Head&gt; Tag der Masterseite anzeigen:</span><span class="sxs-lookup"><span data-stu-id="dcbeb-182">Add the following JavaScript includes inside the &lt;head&gt; tag of your view master page:</span></span>

[!code-html[Main](iteration-7-add-ajax-functionality-cs/samples/sample1.html)]

## <a name="refactoring-the-index-view-to-use-ajax"></a><span data-ttu-id="dcbeb-183">Umgestaltung die Indexansicht zur Verwendung von Ajax</span><span class="sxs-lookup"><span data-stu-id="dcbeb-183">Refactoring the Index View to use Ajax</span></span>

<span data-ttu-id="dcbeb-184">Lassen Sie s starten, indem Sie unsere Indexansicht ändern, damit Sie auf eine Gruppe von Kontakten nur den Bereich der Sicht aktualisiert, die Kontakte werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-184">Let s start by modifying our Index view so that clicking a contact group only updates the region of the view that displays contacts.</span></span> <span data-ttu-id="dcbeb-185">Das rote Feld in Abbildung 1 enthält die Region, die aktualisiert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-185">The red box in Figure 1 contains the region that we want to update.</span></span>


<span data-ttu-id="dcbeb-186">[![Nur Kontakte aktualisieren](iteration-7-add-ajax-functionality-cs/_static/image1.jpg)](iteration-7-add-ajax-functionality-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="dcbeb-186">[![Updating only contacts](iteration-7-add-ajax-functionality-cs/_static/image1.jpg)](iteration-7-add-ajax-functionality-cs/_static/image1.png)</span></span>

<span data-ttu-id="dcbeb-187">**Abbildung 01**: nur Kontakte aktualisieren ([klicken Sie hier, um das Bild in voller Größe angezeigt](iteration-7-add-ajax-functionality-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="dcbeb-187">**Figure 01**: Updating only contacts([Click to view full-size image](iteration-7-add-ajax-functionality-cs/_static/image2.png))</span></span>


<span data-ttu-id="dcbeb-188">Der erste Schritt ist der Teil der Ansicht zu trennen, die asynchron in eine separate partielle (Benutzer-Steuerelement) aktualisiert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-188">The first step is to separate the part of the view that we want to update asynchronously into a separate partial (view user control).</span></span> <span data-ttu-id="dcbeb-189">Im Abschnitt die Indexansicht, in dem die Tabelle von Kontakten angezeigt wurde in der partiellen im Codebeispiel 1 verschoben.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-189">The section of the Index view that displays the table of contacts has been moved into the partial in Listing 1.</span></span>

<span data-ttu-id="dcbeb-190">**1 – Views\Contact\ContactList.ascx auflisten**</span><span class="sxs-lookup"><span data-stu-id="dcbeb-190">**Listing 1 - Views\Contact\ContactList.ascx**</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample2.aspx)]

<span data-ttu-id="dcbeb-191">Beachten Sie, dass der partiellen im Codebeispiel 1 ein anderes Modell als die Indexansicht verfügt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-191">Notice that the partial in Listing 1 has a different model than the Index view.</span></span> <span data-ttu-id="dcbeb-192">Die *Inherits* Attribut in der &lt;% @ Page %&gt; Richtlinie gibt an, dass die partielle von den ViewUserControl erbt&lt;Gruppe&gt; Klasse.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-192">The *Inherits* attribute in the &lt;%@ Page %&gt; directive specifies that the partial inherits from the ViewUserControl&lt;Group&gt; class.</span></span>

<span data-ttu-id="dcbeb-193">Die aktualisierte Indexansicht ist im Codebeispiel 2 enthalten.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-193">The updated Index view is contained in Listing 2.</span></span>

<span data-ttu-id="dcbeb-194">**Listing 2 - Views\Contact\Index.aspx**</span><span class="sxs-lookup"><span data-stu-id="dcbeb-194">**Listing 2 - Views\Contact\Index.aspx**</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample3.aspx)]

<span data-ttu-id="dcbeb-195">Es gibt zwei Dinge, die Sie über die aktualisierte Ansicht im Codebeispiel 2 beachten sollten.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-195">There are two things that you should notice about the updated view in Listing 2.</span></span> <span data-ttu-id="dcbeb-196">Beachten Sie, dass alle Inhalte in der partiellen verschoben wird zunächst mit einem Aufruf von Html.RenderPartial() ersetzt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-196">First, notice that all of the content moved into the partial is replaced with a call to Html.RenderPartial().</span></span> <span data-ttu-id="dcbeb-197">Die Html.RenderPartial()-Methode wird aufgerufen, wenn die Indexansicht zuerst angefordert wird, um den anfänglichen Satz von Kontakten anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-197">The Html.RenderPartial() method is called when the Index view is first requested in order to display the initial set of contacts.</span></span>

<span data-ttu-id="dcbeb-198">Zweitens, beachten Sie, dass die Html.ActionLink() verwendet, um Kontakt Gruppen angezeigt werden. durch eine Ajax.ActionLink() ersetzt wurde.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-198">Second, notice that the Html.ActionLink() used to display contact groups has been replaced with an Ajax.ActionLink().</span></span> <span data-ttu-id="dcbeb-199">Die Ajax.ActionLink() wird mit den folgenden Parametern aufgerufen:</span><span class="sxs-lookup"><span data-stu-id="dcbeb-199">The Ajax.ActionLink() is called with the following parameters:</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample4.aspx)]

<span data-ttu-id="dcbeb-200">Der erste Parameter stellt den Text, der für den Link angezeigt, der zweite Parameter darstellt, die Routenwerte und der dritte Parameter dar, die Ajax-Optionen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-200">The first parameter represents the text to display for the link, the second parameter represents the route values, and the third parameter represents the Ajax options.</span></span> <span data-ttu-id="dcbeb-201">In diesem Fall wir die UpdateTargetId Ajax-Option verwenden, um auf den HTML-Code zeigen &lt;Div&gt; Tag, das nach Abschluss der Ajax-Anforderung aktualisiert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-201">In this case, we use the UpdateTargetId Ajax option to point to the HTML &lt;div&gt; tag that we want to update after the Ajax request completes.</span></span> <span data-ttu-id="dcbeb-202">Wir aktualisieren möchten die &lt;Div&gt; Tag durch die neue Liste von Kontakten.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-202">We want to update the &lt;div&gt; tag with the new list of contacts.</span></span>

<span data-ttu-id="dcbeb-203">Auflisten von 3 enthalten die aktualisierte Index()-Methode des Controllers wenden Sie sich an.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-203">The updated Index() method of the Contact controller is contained in Listing 3.</span></span>

<span data-ttu-id="dcbeb-204">**Auflisten von 3 – Controllers\ContactController.cs (Index-Methode)**</span><span class="sxs-lookup"><span data-stu-id="dcbeb-204">**Listing 3 - Controllers\ContactController.cs (Index method)**</span></span>

[!code-csharp[Main](iteration-7-add-ajax-functionality-cs/samples/sample5.cs)]

<span data-ttu-id="dcbeb-205">Die aktualisierte Index()-Aktion gibt bedingt mit eins von zwei Elementen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-205">The updated Index() action conditionally returns one of two things.</span></span> <span data-ttu-id="dcbeb-206">Wenn die Aktion Index() von einer Ajax-Anforderung aufgerufen wird gibt der Controller eine partielle zurück.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-206">If the Index() action is invoked by an Ajax request then the controller returns a partial.</span></span> <span data-ttu-id="dcbeb-207">Andernfalls wird die Aktion Index() eine ganze Sicht zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-207">Otherwise, the Index() action returns an entire view.</span></span>

<span data-ttu-id="dcbeb-208">Beachten Sie, dass die Index() Aktion nicht so viele Daten, die beim Aufrufen durch eine Ajax-Anforderung zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-208">Notice that the Index() action does not need to return as much data when invoked by an Ajax request.</span></span> <span data-ttu-id="dcbeb-209">Im Rahmen einer normalen Anforderung wird eine Liste aller Kontakten Gruppen und der ausgewählten Gruppe von Kontakten durch die Index-Aktion zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-209">In the context of a normal request, the Index action returns a list of all of the contact groups and the selected contact group.</span></span> <span data-ttu-id="dcbeb-210">Im Rahmen einer Ajax-Anforderung gibt die Aktion Index() nur die ausgewählte Gruppe zurück.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-210">In the context of an Ajax request, the Index() action returns only the selected group.</span></span> <span data-ttu-id="dcbeb-211">AJAX bedeutet weniger Arbeit auf dem Datenbankserver.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-211">Ajax means less work on your database server.</span></span>

<span data-ttu-id="dcbeb-212">Unsere geänderte Indexansicht funktioniert im Fall von Browsern komplexe und mit Vorgängerversionen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-212">Our modified Index view works in the case of both uplevel and downlevel browsers.</span></span> <span data-ttu-id="dcbeb-213">Wenn Sie auf eine Gruppe von Kontakten und Ihr Browser JavaScript unterstützt, wird nur der Bereich der Sicht, die die Liste der Kontakte enthält aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-213">If you click a contact group, and your browser supports JavaScript, then only the region of the view that contains the list of contacts is updated.</span></span> <span data-ttu-id="dcbeb-214">Wenn andererseits, Ihr Browser JavaScript nicht unterstützt, wird die komplette Ansicht aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-214">If, on the other hand, your browser does not support JavaScript, then the entire view is updated.</span></span>


<span data-ttu-id="dcbeb-215">Unsere aktualisierte Indexansicht hat ein Problem.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-215">Our updated Index view has one problem.</span></span> <span data-ttu-id="dcbeb-216">Wenn Sie eine Gruppe von Kontakte klicken, wird die ausgewählte Gruppe nicht hervorgehoben.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-216">When you click a contact group, the selected group is not highlighted.</span></span> <span data-ttu-id="dcbeb-217">Da die Liste der Gruppen außerhalb der Region angezeigt werden, die während einer Ajax-Anforderung aktualisiert wird, wird die richtige Gruppe nicht hervorgehoben.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-217">Because the list of groups is displayed outside of the region that is updated during an Ajax request, the right group does not get highlighted.</span></span> <span data-ttu-id="dcbeb-218">Dies wird im nächsten Abschnitt dieses Problem korrigiert werden.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-218">We'll fix this issue in the next section.</span></span>


## <a name="adding-jquery-animation-effects"></a><span data-ttu-id="dcbeb-219">Hinzufügen von jQuery-Animationseffekte</span><span class="sxs-lookup"><span data-stu-id="dcbeb-219">Adding jQuery Animation Effects</span></span>

<span data-ttu-id="dcbeb-220">Wenn Sie einen Link auf einer Webseite klicken, können Sie erkennen, und zwar unabhängig davon, ob der Browser aktiv Abrufen von aktualisierten Inhalten ist in der Regel wird die Statusanzeige Browser verwenden.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-220">Normally, when you click a link in a web page, you can use the browser progress bar to detect whether or not the browser is actively fetching the updated content.</span></span> <span data-ttu-id="dcbeb-221">Bei der Ausführung einer Ajax-Anforderung auf der anderen Seite zeigt die Browser-Statusanzeige keine Status.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-221">When performing an Ajax request, on the other hand, the browser progress bar does not show any progress.</span></span> <span data-ttu-id="dcbeb-222">Dadurch kann Benutzer nervös vornehmen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-222">This can make users nervous.</span></span> <span data-ttu-id="dcbeb-223">Woher wissen Sie, ob der Browser fixiert wurde?</span><span class="sxs-lookup"><span data-stu-id="dcbeb-223">How do you know whether the browser has frozen?</span></span>

<span data-ttu-id="dcbeb-224">Es gibt mehrere Möglichkeiten, die Sie für einen Benutzer angeben können, dass die Arbeit beim Ausführen einer Ajax-Anforderung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-224">There are several ways that you can indicate to a user that work is being performed while performing an Ajax request.</span></span> <span data-ttu-id="dcbeb-225">Ein besteht Ansatz darin, eine einfache Animation angezeigt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-225">One approach is to display a simple animation.</span></span> <span data-ttu-id="dcbeb-226">Beispielsweise können Sie aus einer Region abgeblendet, wenn eine Ajax-Anforderung beginnt und in der Region abgeblendet, wenn die Anforderung abgeschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-226">For example, you can fade out a region when an Ajax request begins and fade in the region when the request completes.</span></span>

<span data-ttu-id="dcbeb-227">Wir verwenden die jQuery-Bibliothek die mit dem Microsoft ASP.NET MVC-Framework zum Erstellen der Animationseffekte enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-227">We'll use the jQuery library which is included with the Microsoft ASP.NET MVC framework, to create the animation effects.</span></span> <span data-ttu-id="dcbeb-228">Die aktualisierte Indexansicht ist im Codebeispiel 4 enthalten.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-228">The updated Index view is contained in Listing 4.</span></span>

<span data-ttu-id="dcbeb-229">**Listing 4 - Views\Contact\Index.aspx**</span><span class="sxs-lookup"><span data-stu-id="dcbeb-229">**Listing 4 - Views\Contact\Index.aspx**</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample6.aspx)]

<span data-ttu-id="dcbeb-230">Beachten Sie, dass die aktualisierte Indexansicht drei neue JavaScript-Funktionen enthält.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-230">Notice that the updated Index view contains three new JavaScript functions.</span></span> <span data-ttu-id="dcbeb-231">Die ersten beiden Funktionen verwenden jQuery ausblenden und einblenden in der Liste der Kontakte, wenn Sie eine neue Gruppe von Kontakte klicken.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-231">The first two functions use jQuery to fade out and fade in the list of contacts when you click a new contact group.</span></span> <span data-ttu-id="dcbeb-232">Die dritte Funktion zeigt eine Fehlermeldung angezeigt, wenn eine Ajax-Anforderung führt zu einem Fehler (z. B. Netzwerktimeout).</span><span class="sxs-lookup"><span data-stu-id="dcbeb-232">The third function displays an error message when an Ajax request results in an error (for example, network timeout).</span></span>

<span data-ttu-id="dcbeb-233">Die erste Funktion übernimmt außerdem die ausgewählte Gruppe hervorheben.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-233">The first function also takes care of highlighting the selected group.</span></span> <span data-ttu-id="dcbeb-234">Eine Klasse = ausgewählte Attribut wird hinzugefügt, zum übergeordneten Element (das LI-Element) des Elements geklickt haben.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-234">A class= selected attribute is added to the parent element (the LI element) of the element clicked.</span></span> <span data-ttu-id="dcbeb-235">In diesem Fall erleichtert jQuery Auswahl der richtigen Elemente, und fügen Sie die CSS-Klasse.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-235">Again, jQuery makes it easy to select the right element and add the CSS class.</span></span>

<span data-ttu-id="dcbeb-236">Diese Skripts werden an die Gruppe Links mit Hilfe des Parameters Ajax.ActionLink() AjaxOptions gebunden.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-236">These scripts are tied to the group links with the help of the Ajax.ActionLink() AjaxOptions parameter.</span></span> <span data-ttu-id="dcbeb-237">Der aktualisierte Ajax.ActionLink() Methodenaufruf sieht wie folgt:</span><span class="sxs-lookup"><span data-stu-id="dcbeb-237">The updated Ajax.ActionLink() method call looks like this:</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample7.aspx)]

## <a name="adding-browser-history-support"></a><span data-ttu-id="dcbeb-238">Hinzufügen von Unterstützung für Browser-Verlauf</span><span class="sxs-lookup"><span data-stu-id="dcbeb-238">Adding Browser History Support</span></span>

<span data-ttu-id="dcbeb-239">Wenn Sie einen Link zu eine Seite aktualisieren klicken, wird in der Regel wird der Browserverlauf aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-239">Normally, when you click a link to update a page, your browser history is updated.</span></span> <span data-ttu-id="dcbeb-240">Auf diese Weise können Sie die Browserschaltfläche "zurück" Zeit wieder in den vorherigen Zustand der Seite verschieben klicken.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-240">That way, you can click the browser Back button to move back in time to the previous state of the page.</span></span> <span data-ttu-id="dcbeb-241">Z. B. Wenn Sie klicken Sie auf die Gruppe von Kontakten Freunde, und klicken Sie dann auf Kontakt Geschäftsgruppe, können Sie klicken die Browserschaltfläche "zurück" in den Zustand der Seite navigieren, wenn in der Gruppe von Kontakte Freunde ausgewählt wurde.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-241">For example, if you click the Friends contact group and then click the Business contact group, you can click the browser Back button to navigate back to the state of the page when the Friends contact group was selected.</span></span>

<span data-ttu-id="dcbeb-242">Leider aktualisiert Ausführen einer Ajax-Anforderung nicht Browserverlauf automatisch.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-242">Unfortunately, performing an Ajax request does not update browser history automatically.</span></span> <span data-ttu-id="dcbeb-243">Wenn Sie eine Gruppe von Kontakten klicken Sie auf, und die Liste der übereinstimmenden Kontakte mit einer Ajax-Anforderung abgerufen wird, wird der Browserverlauf nicht aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-243">If you click a contact group, and the list of matching contacts is retrieved with an Ajax request, then the browser history is not updated.</span></span> <span data-ttu-id="dcbeb-244">Die Browserschaltfläche "zurück" können um an eine Gruppe von Kontakten zu navigieren, nachdem Sie eine neue Gruppe von Kontakte ausgewählt haben.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-244">You cannot use the browser Back button to navigate back to a contact group after selecting a new contact group.</span></span>

<span data-ttu-id="dcbeb-245">Wenn Benutzer in der Lage, verwenden Sie den Browser zurück Schaltfläche sollen nach der Durchführung von Ajax-Anforderungen müssen Sie ein wenig mehr Arbeit ausführen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-245">If you want users to be able to use the browser Back button after performing Ajax requests then you need to perform a little more work.</span></span> <span data-ttu-id="dcbeb-246">In diesem Fall müssen Sie eine der Browser Verlauf Verwaltungsfunktionalität in das ASP.NET AJAX-Framework erstellten nutzen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-246">You need to take advantage of the browser history management functionality built in the ASP.NET AJAX Framework.</span></span>

<span data-ttu-id="dcbeb-247">ASP.NET AJAX-Browserverlauf, müssen Sie drei Aktionen ausgeführt werden:</span><span class="sxs-lookup"><span data-stu-id="dcbeb-247">ASP.NET AJAX browser history, you need to do three things:</span></span>

1. <span data-ttu-id="dcbeb-248">Aktivieren Sie Browserverlauf, indem die EnableBrowserHistory-Eigenschaft auf "true" festzulegen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-248">Enable Browser History by setting the enableBrowserHistory property to true.</span></span>
2. <span data-ttu-id="dcbeb-249">Bei der statusänderung einer Ansicht durch Aufrufen der Methode addHistoryPoint() Verlaufspunkten zu speichern.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-249">Save history points when the state of a view changes by calling the addHistoryPoint() method.</span></span>
3. <span data-ttu-id="dcbeb-250">Rekonstruieren Sie den Status der Sicht aus, wenn Navigate-Ereignis ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-250">Reconstruct the state of the view when the navigate event is raised.</span></span>

<span data-ttu-id="dcbeb-251">Die aktualisierte Indexansicht ist im Codebeispiel 5 enthalten.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-251">The updated Index view is contained in Listing 5.</span></span>

<span data-ttu-id="dcbeb-252">**Listing 5 - Views\Contact\Index.aspx**</span><span class="sxs-lookup"><span data-stu-id="dcbeb-252">**Listing 5 - Views\Contact\Index.aspx**</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample8.aspx)]

<span data-ttu-id="dcbeb-253">Auflisten von 5 ist Browserverlauf in der pageInit()-Funktion aktiviert.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-253">In Listing 5, Browser History is enabled in the pageInit() function.</span></span> <span data-ttu-id="dcbeb-254">Die Funktion pageInit() dient auch zum Einrichten des Ereignishandler für das Ereignis navigieren.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-254">The pageInit() function is also used to set up the event handler for the navigate event.</span></span> <span data-ttu-id="dcbeb-255">Navigate-Ereignis wird ausgelöst, wenn der Browser nach vorne oder die Schaltfläche "zurück" den Status der Seite verursacht zu ändern.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-255">The navigate event is raised whenever the browser Forward or Back button causes the state of the page to change.</span></span>

<span data-ttu-id="dcbeb-256">Die beginContactList()-Methode wird aufgerufen, wenn Sie eine Gruppe von Kontakte klicken.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-256">The beginContactList() method is called when you click a contact group.</span></span> <span data-ttu-id="dcbeb-257">Diese Methode erstellt einen neuen Verlaufspunkt durch Aufrufen der addHistoryPoint()-Methode.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-257">This method creates a new history point by calling the addHistoryPoint() method.</span></span> <span data-ttu-id="dcbeb-258">Die Id der Gruppe "Kontakt" geklickt wird dem Verlauf hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-258">The id of the contact group clicked is added to history.</span></span>

<span data-ttu-id="dcbeb-259">Die Gruppen-Id wird aus einem Expando-Attribut auf den Link für die Gruppe von Kontakten abgerufen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-259">The group id is retrieved from an expando attribute on the contact group link.</span></span> <span data-ttu-id="dcbeb-260">Der Link ist mit dem folgenden Aufruf Ajax.ActionLink() gerendert.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-260">The link is rendered with the following call to Ajax.ActionLink().</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample9.aspx)]

<span data-ttu-id="dcbeb-261">Der letzte Parameter übergeben, um die Ajax.ActionLink() Fügt eine Expando-Attribut, das mit dem Namen Groupid auf den Link (Kleinbuchstaben für XHTML-Kompatibilität).</span><span class="sxs-lookup"><span data-stu-id="dcbeb-261">The last parameter passed to the Ajax.ActionLink() adds an expando attribute named groupid to the link (lowercase for XHTML compatibility).</span></span>

<span data-ttu-id="dcbeb-262">Wenn ein Benutzer den Browser zurück oder die Schaltfläche "Weiterleiten" trifft, das Navigate-Ereignis wird ausgelöst, und die navigate()-Methode aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-262">When a user hits the browser Back or Forward button, the navigate event is raised and the navigate() method is called.</span></span> <span data-ttu-id="dcbeb-263">Diese Methode aktualisiert die Kontakte auf Übereinstimmung mit dem Status der Seite, die der Browserverlaufspunkt an die Navigate-Methode übergeben entspricht der Seite angezeigt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-263">This method updates the contacts displayed in the page to match the state of the page that corresponds to the browser history point passed to the navigate method.</span></span>

## <a name="performing-ajax-deletes"></a><span data-ttu-id="dcbeb-264">Löscht das Ausführen von Ajax</span><span class="sxs-lookup"><span data-stu-id="dcbeb-264">Performing Ajax Deletes</span></span>

<span data-ttu-id="dcbeb-265">Aktuell, um einen Kontakt zu löschen, müssen Sie auf den Link klicken, und klicken Sie dann auf die Schaltfläche "löschen" in der Delete-Bestätigungsseite angezeigt (siehe Abbildung 2).</span><span class="sxs-lookup"><span data-stu-id="dcbeb-265">Currently, in order to delete a contact, you need to click on the Delete link and then click the Delete button displayed in the delete confirmation page (see Figure 2).</span></span> <span data-ttu-id="dcbeb-266">Dies scheint ein Großteil Seitenanforderungen Serveradministratorkonto wie Datensatzes in einer Datenbank löschen möchten.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-266">This seems like a lot of page requests to do something simple like deleting a database record.</span></span>


<span data-ttu-id="dcbeb-267">[![Der Bestätigungsseite löschen](iteration-7-add-ajax-functionality-cs/_static/image2.jpg)](iteration-7-add-ajax-functionality-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="dcbeb-267">[![The delete confirmation page](iteration-7-add-ajax-functionality-cs/_static/image2.jpg)](iteration-7-add-ajax-functionality-cs/_static/image3.png)</span></span>

<span data-ttu-id="dcbeb-268">**Abbildung 02**: die Seite "Bestätigung löschen" ([klicken Sie hier, um das Bild in voller Größe angezeigt](iteration-7-add-ajax-functionality-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="dcbeb-268">**Figure 02**: The delete confirmation page([Click to view full-size image](iteration-7-add-ajax-functionality-cs/_static/image4.png))</span></span>


<span data-ttu-id="dcbeb-269">Es ist verlockend, überspringen die Seite "Bestätigung löschen", und Löschen eines Kontakts direkt über die Indexansicht.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-269">It is tempting to skip the delete confirmation page and delete a contact directly from the Index view.</span></span> <span data-ttu-id="dcbeb-270">Da bei diesem Ansatz die Anwendung zu Sicherheitslücken öffnet, vermeiden Sie diese Versuchung.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-270">You should avoid this temptation because taking this approach opens your application to security holes.</span></span> <span data-ttu-id="dcbeb-271">Im Allgemeinen Sie Ich möchte einen HTTP GET-Vorgang ausführen, wenn eine Aktion aufrufen, die den Status Ihrer Webanwendung ändert möchten.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-271">In general, you don t want to perform an HTTP GET operation when invoking an action that modifies the state of your web application.</span></span> <span data-ttu-id="dcbeb-272">Beim Ausführen einer Delete HTTP POST oder besser noch, einen HTTP DELETE-Vorgang werden soll.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-272">When performing a delete, you want to perform an HTTP POST, or better yet, an HTTP DELETE operation.</span></span>

<span data-ttu-id="dcbeb-273">Die Delete-Link ist in der partiellen ContactList enthalten.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-273">The Delete link is contained in the ContactList partial.</span></span> <span data-ttu-id="dcbeb-274">Auflisten von 6 ist eine aktualisierte Version der partiellen ContactList enthalten.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-274">An updated version of the ContactList partial is contained in Listing 6.</span></span>

<span data-ttu-id="dcbeb-275">**6 – Views\Contact\ContactList.ascx auflisten**</span><span class="sxs-lookup"><span data-stu-id="dcbeb-275">**Listing 6 - Views\Contact\ContactList.ascx**</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample10.aspx)]

<span data-ttu-id="dcbeb-276">Die Delete-Link wird mit den folgenden Aufruf der Methode Ajax.ImageActionLink() gerendert:</span><span class="sxs-lookup"><span data-stu-id="dcbeb-276">The Delete link is rendered with the following call to the Ajax.ImageActionLink() method:</span></span>

[!code-aspx[Main](iteration-7-add-ajax-functionality-cs/samples/sample11.aspx)]

> [!NOTE] 
> 
> <span data-ttu-id="dcbeb-277">Die Ajax.ImageActionLink() ist ein Standardbestandteil des ASP.NET MVC-Frameworks.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-277">The Ajax.ImageActionLink() is not a standard part of the ASP.NET MVC framework.</span></span> <span data-ttu-id="dcbeb-278">Die Ajax.ImageActionLink() ist eine benutzerdefinierte Hilfsmethoden, die im Projekt Contact Manager enthalten.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-278">The Ajax.ImageActionLink() is a custom helper methods included in the Contact Manager project.</span></span>


<span data-ttu-id="dcbeb-279">Der AjaxOptions-Parameter verfügt über zwei Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-279">The AjaxOptions parameter has two properties.</span></span> <span data-ttu-id="dcbeb-280">Zunächst wird die bestätigen-Eigenschaft verwendet, um ein Popup-JavaScript-Bestätigungsdialogfeld angezeigt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-280">First, the Confirm property is used to display a popup JavaScript confirmation dialog.</span></span> <span data-ttu-id="dcbeb-281">Zweitens wird der HttpMethod-Eigenschaft verwendet, um eine HTTP DELETE-Operation durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-281">Second, the HttpMethod property is used to perform an HTTP DELETE operation.</span></span>

<span data-ttu-id="dcbeb-282">Auflisten von 7 enthält eine neue AjaxDelete()-Aktion, die mit dem Kontakt-Controller hinzugefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-282">Listing 7 contains a new AjaxDelete() action that has been added to the Contact controller.</span></span>

<span data-ttu-id="dcbeb-283">**Auflisten von 7 - Controllers\ContactController.cs (AjaxDelete)**</span><span class="sxs-lookup"><span data-stu-id="dcbeb-283">**Listing 7 - Controllers\ContactController.cs (AjaxDelete)**</span></span>

[!code-csharp[Main](iteration-7-add-ajax-functionality-cs/samples/sample12.cs)]

<span data-ttu-id="dcbeb-284">Die AjaxDelete()-Aktion ist mit einem AcceptVerbs-Attribut ergänzt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-284">The AjaxDelete() action is decorated with an AcceptVerbs attribute.</span></span> <span data-ttu-id="dcbeb-285">Dieses Attribut wird verhindert, dass die Aktion aus, mit Ausnahme von jeder HTTP-Vorgang als eine HTTP DELETE-Vorgang aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-285">This attribute prevents the action from being invoked except by any HTTP operation other than an HTTP DELETE operation.</span></span> <span data-ttu-id="dcbeb-286">Insbesondere kann nicht dadurch mit HTTP GET aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-286">In particular, you cannot invoke this action with an HTTP GET.</span></span>

<span data-ttu-id="dcbeb-287">Nachdem Sie Datenbank-Datensatz gelöscht haben, müssen Sie die aktualisierte Liste der Kontakte anzeigen, die nicht mit den gelöschten Datensatz enthält.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-287">After you delete database record, you need to display the updated list of contacts that does not contain the deleted record.</span></span> <span data-ttu-id="dcbeb-288">Die AjaxDelete()-Methode gibt die partielle ContactList und die aktualisierte Liste der Kontakte zurück.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-288">The AjaxDelete() method returns the ContactList partial and the updated list of contacts.</span></span>

## <a name="summary"></a><span data-ttu-id="dcbeb-289">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="dcbeb-289">Summary</span></span>

<span data-ttu-id="dcbeb-290">In dieser Iteration haben wir unsere Kontakt-Manager-Anwendung die Ajax-Funktionen hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-290">In this iteration, we added Ajax functionality to our Contact Manager application.</span></span> <span data-ttu-id="dcbeb-291">Ajax verwendet, um die Reaktionsfähigkeit und die Leistung der Anwendung zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-291">We used Ajax to improve the responsiveness and performance of our application.</span></span>

<span data-ttu-id="dcbeb-292">Zunächst haben wir die Indexansicht umgestaltet, damit Sie auf eine Gruppe von Kontakten nicht die komplette Ansicht aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-292">First, we refactored the Index view so that clicking a contact group does not update the entire view.</span></span> <span data-ttu-id="dcbeb-293">Stattdessen aktualisiert die auf eine Gruppe von Kontakten nur die Liste der Kontakte.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-293">Instead, clicking a contact group only updates the list of contacts.</span></span>

<span data-ttu-id="dcbeb-294">Als Nächstes verwendet haben wir jQuery-Animationseffekte ausblenden und einblenden in der Liste der Kontakte.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-294">Next, we used jQuery animation effects to fade out and fade in the list of contacts.</span></span> <span data-ttu-id="dcbeb-295">Hinzufügen von Animationen zu einer Ajax-Anwendung kann verwendet werden, um den Benutzern der Anwendung durch das Äquivalent einer Statusanzeige Browser bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-295">Adding animation to an Ajax application can be used to provide users of the application with the equivalent of a browser progress bar.</span></span>

<span data-ttu-id="dcbeb-296">Wir haben auch Verlauf Browserunterstützung unsere Ajax-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-296">We also added browser history support to our Ajax application.</span></span> <span data-ttu-id="dcbeb-297">Wir aktiviert Benutzer klicken Sie auf den Browser zurück und Vorwärts-Schaltflächen, um den Status der Indexansicht ändern.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-297">We enabled users to click the browser Back and Forward buttons to change the state of the Index view.</span></span>

<span data-ttu-id="dcbeb-298">Schließlich haben wir einen Delete-Link, der HTTP-DELETE-Operationen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-298">Finally, we created a delete link that supports HTTP DELETE operations.</span></span> <span data-ttu-id="dcbeb-299">Durch Ausführen von Ajax löscht, können wir Benutzer Datenbankdatensätze zu löschen, ohne dass der Benutzer eine zusätzliche Delete Bestätigungsseite anfordern.</span><span class="sxs-lookup"><span data-stu-id="dcbeb-299">By performing Ajax deletes, we enable users to delete database records without requiring the user to request an additional delete confirmation page.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="dcbeb-300">[Zurück](iteration-6-use-test-driven-development-cs.md)
> [Weiter](iteration-1-create-the-application-vb.md)</span><span class="sxs-lookup"><span data-stu-id="dcbeb-300">[Previous](iteration-6-use-test-driven-development-cs.md)
[Next](iteration-1-create-the-application-vb.md)</span></span>
