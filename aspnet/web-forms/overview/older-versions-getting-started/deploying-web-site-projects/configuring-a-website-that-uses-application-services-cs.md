---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
title: Konfigurieren einer Website, die Anwendungsdienste (c#) verwendet. | Microsoft Docs
author: rick-anderson
description: "ASP.NET-Version 2.0 eingeführt, eine Reihe von Application-Dienste, die Teil von .NET Framework und dienen als eine Sammlung von Baustein Handelsversion-SQL..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/23/2009
ms.topic: article
ms.assetid: 1e33d1c6-3f9f-4c26-81e2-2a8f8907bb05
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
msc.type: authoredcontent
ms.openlocfilehash: 3f2b8e395505c1d13b914399b8de2196f0ba230a
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/24/2018
---
<a name="configuring-a-website-that-uses-application-services-c"></a><span data-ttu-id="30e52-103">Konfigurieren einer Website, die Anwendungsdienste (c#)</span><span class="sxs-lookup"><span data-stu-id="30e52-103">Configuring a Website that Uses Application Services (C#)</span></span>
====================
<span data-ttu-id="30e52-104">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="30e52-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="30e52-105">[Herunterladen von Code](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) oder [PDF herunterladen](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="30e52-105">[Download Code](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) or [Download PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span></span>

> <span data-ttu-id="30e52-106">ASP.NET-Version 2.0 eingeführt, eine Reihe von Application-Dienste, die Teil von .NET Framework und dienen als eine Sammlung von Baustein-Dienste, die Sie verwenden können, Ihre Webanwendung umfangreiche Funktionen hinzu.</span><span class="sxs-lookup"><span data-stu-id="30e52-106">ASP.NET version 2.0 introduced a series of application services, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="30e52-107">In diesem Lernprogramm wird untersucht, wie eine Website in der produktionsumgebung verwenden Sie Application-Dienste zu konfigurieren und allgemeine Probleme mit der Verwaltung von Benutzerkonten und Rollen in der produktionsumgebung behandelt.</span><span class="sxs-lookup"><span data-stu-id="30e52-107">This tutorial explores how to configure a website in the production environment to use application services and addresses common issues with managing user accounts and roles on the production environment.</span></span>


## <a name="introduction"></a><span data-ttu-id="30e52-108">Einführung</span><span class="sxs-lookup"><span data-stu-id="30e52-108">Introduction</span></span>

<span data-ttu-id="30e52-109">ASP.NET-Version 2.0 eingeführt, eine Reihe von *Anwendungsdienste*, die Teil von .NET Framework und dienen als eine Sammlung von Baustein Dienste können Sie umfangreiche Funktionen für Ihre Webanwendung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="30e52-109">ASP.NET version 2.0 introduced a series of *application services*, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="30e52-110">Application-Dienste umfassen:</span><span class="sxs-lookup"><span data-stu-id="30e52-110">The application services include:</span></span>

- <span data-ttu-id="30e52-111">**Mitgliedschaft** – eine API zum Erstellen und Verwalten von Benutzerkonten.</span><span class="sxs-lookup"><span data-stu-id="30e52-111">**Membership** - an API for creating and managing user accounts.</span></span>
- <span data-ttu-id="30e52-112">**Rollen** – eine API zum Kategorisieren von Benutzern in Gruppen.</span><span class="sxs-lookup"><span data-stu-id="30e52-112">**Roles** - an API for categorizing users into groups.</span></span>
- <span data-ttu-id="30e52-113">**Profil** – eine API für benutzerdefinierte, benutzerspezifische Sprachen gespeichert.</span><span class="sxs-lookup"><span data-stu-id="30e52-113">**Profile** - an API for storing custom, user-specific content.</span></span>
- <span data-ttu-id="30e52-114">**Siteübersicht** – eine API zum Definieren einer logischen Standort s-Struktur in Form einer Hierarchie, die dann über Steuerelemente zur Seitennavigation, z. B. Menüs und praktische Brotkrümelnavigation angezeigt werden können.</span><span class="sxs-lookup"><span data-stu-id="30e52-114">**Site Map** - an API for defining a site s logical structure in the form of a hierarchy, which can then be displayed via navigation controls, such as menus and breadcrumbs.</span></span>
- <span data-ttu-id="30e52-115">**Personalisierung** – eine API für die Aufrechterhaltung der Anpassung Voreinstellungen, die am häufigsten mit [ *WebParts*](https://msdn.microsoft.com/library/e0s9t4ck.aspx).</span><span class="sxs-lookup"><span data-stu-id="30e52-115">**Personalization** - an API for maintaining customization preferences, most often used with [*WebParts*](https://msdn.microsoft.com/library/e0s9t4ck.aspx).</span></span>
- <span data-ttu-id="30e52-116">**Systemüberwachung** – eine API für die Überwachung der Leistung, Sicherheit, Fehler und andere System integritätsmetriken für eine ausgeführte Webanwendung.</span><span class="sxs-lookup"><span data-stu-id="30e52-116">**Health Monitoring** - an API for monitoring performance, security, errors, and other system health metrics for a running web application.</span></span>
  

<span data-ttu-id="30e52-117">Die Anwendungsdienste APIs sind nicht auf eine bestimmte Implementierung gebunden.</span><span class="sxs-lookup"><span data-stu-id="30e52-117">The application services APIs are not tied to a specific implementation.</span></span> <span data-ttu-id="30e52-118">Stattdessen weisen Sie die Anwendungsdienste für eine bestimmte *Anbieter*, und dieser Anbieter implementiert den Dienst mit einer bestimmten Technologie.</span><span class="sxs-lookup"><span data-stu-id="30e52-118">Instead, you instruct the application services to use a particular *provider*, and that provider implements the service using a particular technology.</span></span> <span data-ttu-id="30e52-119">Die am häufigsten verwendeten Anbieter für internetbasierte Webanwendungen, die auf einen Webhostinganbieter gehostet sind diese Anbieter unterstützen, die eine Implementierung der SQL Server-Datenbank verwenden.</span><span class="sxs-lookup"><span data-stu-id="30e52-119">The most commonly used providers for Internet-based web applications hosted at a web hosting company are those providers that use a SQL Server database implementation.</span></span> <span data-ttu-id="30e52-120">Z. B. die `SqlMembershipProvider` ist ein Anbieter für die Mitgliedschaft-API, die Benutzerkontoinformationen in einer Microsoft SQL Server-Datenbank speichert.</span><span class="sxs-lookup"><span data-stu-id="30e52-120">For example, the `SqlMembershipProvider` is a provider for the Membership API that stores user account information in a Microsoft SQL Server database.</span></span>

<span data-ttu-id="30e52-121">Unter Verwendung des Application-Dienste und Anbieter für SQL Server fügt eine Herausforderung dar, beim Bereitstellen der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="30e52-121">Using the application services and SQL Server providers adds some challenges when deploying the application.</span></span> <span data-ttu-id="30e52-122">Zunächst müssen die Anwendung Dienste Datenbankobjekte ordnungsgemäß für die Entwicklungs- und produktionsumgebungen Datenbanken erstellt und ordnungsgemäß initialisiert.</span><span class="sxs-lookup"><span data-stu-id="30e52-122">For starters, the application services database objects must be properly created on both the development and production databases and appropriately initialized.</span></span> <span data-ttu-id="30e52-123">Es gibt auch wichtige Konfigurationseinstellungen, die vorgenommen werden müssen.</span><span class="sxs-lookup"><span data-stu-id="30e52-123">There are also important configuration settings that need to be made.</span></span>

> [!NOTE]
> <span data-ttu-id="30e52-124">Die Anwendungsdienste APIs entworfen wurden, mithilfe der [ *Anbietermodell*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), ein Entwurfsmuster, die für eine API s Implementierungsdetails zur Laufzeit zur Verfügung gestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="30e52-124">The application services APIs were designed using the [*provider model*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), a design pattern that allows for an API s implementation details to be provided at runtime.</span></span> <span data-ttu-id="30e52-125">.NET Framework ausgeliefert wird, mit einer Anzahl von Anwendungsdienstanbieter, z. B. verwendet werden kann, die die `SqlMembershipProvider` und `SqlRoleProvider`, welche Anbieter für die Mitgliedschaft und Rollen-APIs, die ein SQL Server Datenbank-Implementierung.</span><span class="sxs-lookup"><span data-stu-id="30e52-125">The .NET Framework ships with a number of application service providers that can be used, such as the `SqlMembershipProvider` and `SqlRoleProvider`, which are providers for the Membership and Roles APIs that use a SQL Server database implementation.</span></span> <span data-ttu-id="30e52-126">Sie können auch erstellen und -Plug-in einen benutzerdefinierten Anbieter.</span><span class="sxs-lookup"><span data-stu-id="30e52-126">You can also create and plug-in a custom provider.</span></span> <span data-ttu-id="30e52-127">In der Tat die Buch Reviews Webanwendung enthält bereits einen benutzerdefinierten Anbieter für die Website-Map-API (`ReviewSiteMapProvider`), die aus den Daten in die Siteübersicht erstellt die `Genres` und `Books` Tabellen in der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="30e52-127">In fact, the Book Reviews web application already contains a custom provider for the Site Map API (`ReviewSiteMapProvider`), which constructs the site map from the data in the `Genres` and `Books` tables in the database.</span></span>


<span data-ttu-id="30e52-128">In diesem Lernprogramm beginnt mit einem Blick auf wie ich die Webanwendung Buch überprüft die Mitgliedschaft und Rollen-APIs verwenden erweitert.</span><span class="sxs-lookup"><span data-stu-id="30e52-128">This tutorial starts with a look at how I extended the Book Reviews web application to use the Membership and Roles APIs.</span></span> <span data-ttu-id="30e52-129">Führt dann durch Bereitstellen einer Webanwendung, die Anwendungsdienste mit einer Implementierung der SQL Server-Datenbank verwendet, und behandeln Sie häufige Probleme mit der Verwaltung von Benutzerkonten und Rollen in der produktionsumgebung endet.</span><span class="sxs-lookup"><span data-stu-id="30e52-129">It then walks through deploying a web application that uses application services with a SQL Server database implementation, and concludes by addressing common issues with managing user accounts and roles on the production environment.</span></span>

## <a name="updates-to-the-book-reviews-application"></a><span data-ttu-id="30e52-130">Anwendungsupdates Buch Reviews</span><span class="sxs-lookup"><span data-stu-id="30e52-130">Updates to the Book Reviews Application</span></span>

<span data-ttu-id="30e52-131">Führen Sie die letzen Lernprogramme, an die Webanwendung Buch überprüft für eine dynamische, datengesteuerte Webanwendung aus einer statischen Website aktualisiert wurde mit einem Satz von Verwaltungsseiten für die Verwaltung von Genres und Berichte.</span><span class="sxs-lookup"><span data-stu-id="30e52-131">Over the past couple tutorials the Book Reviews web application was updated from a static website to a dynamic, data-driven web application complete with a set of administration pages for managing genres and reviews.</span></span> <span data-ttu-id="30e52-132">Allerdings dieser Bereich "Verwaltung" ist zurzeit nicht geschützt: jeder Benutzer, der die URL der Administration weiß (oder errät) kann Walzer und erstellen, bearbeiten oder Löschen des Reviews auf unserer Website.</span><span class="sxs-lookup"><span data-stu-id="30e52-132">However, this administration section is currently not protected - any user who knows (or guesses) the administration page URL can waltz in and create, edit, or delete reviews on our site.</span></span> <span data-ttu-id="30e52-133">Eine gängige Methode zum Schutz von bestimmte Teile einer Website besteht darin Benutzerkonten zu implementieren und verwenden Sie dann die URL-Autorisierungsregeln, um den Zugriff auf bestimmte Benutzer oder Rollen einschränken.</span><span class="sxs-lookup"><span data-stu-id="30e52-133">A common way to protect certain portions of a website is to implement user accounts and then use URL authorization rules to restrict access to certain users or roles.</span></span> <span data-ttu-id="30e52-134">Das Buch Reviews-Web-Anwendung zum Download für dieses Lernprogramm unterstützt Benutzerkonten und Rollen.</span><span class="sxs-lookup"><span data-stu-id="30e52-134">The Book Reviews web application available for download with this tutorial supports user accounts and roles.</span></span> <span data-ttu-id="30e52-135">Es wurde eine einzelne Rolle definiert, mit dem Namen Admin und nur Benutzer in dieser Rolle können die Verwaltungsseiten zugreifen.</span><span class="sxs-lookup"><span data-stu-id="30e52-135">It has a single role defined named Admin and only users in this role can access the administration pages.</span></span>

> [!NOTE]
> <span data-ttu-id="30e52-136">Ich gibt es drei Benutzerkonten erstellt, in der Webanwendung Buch Reviews: Scott Jisun und Alice.</span><span class="sxs-lookup"><span data-stu-id="30e52-136">I ve created three user accounts in the Book Reviews web application: Scott, Jisun, and Alice.</span></span> <span data-ttu-id="30e52-137">Alle drei Benutzer haben das gleiche Kennwort: **Kennwort!**</span><span class="sxs-lookup"><span data-stu-id="30e52-137">All three users have the same password: **password!**</span></span> <span data-ttu-id="30e52-138">Scott und Jisun befinden sich in der Rolle "Admin", Alice nicht.</span><span class="sxs-lookup"><span data-stu-id="30e52-138">Scott and Jisun are in the Admin role, Alice is not.</span></span> <span data-ttu-id="30e52-139">Die Website s nicht Administration-Seiten sind weiterhin für anonyme Benutzer verfügbar.</span><span class="sxs-lookup"><span data-stu-id="30e52-139">The site s non-administration pages are still accessible to anonymous users.</span></span> <span data-ttu-id="30e52-140">D. h., Sie müssen nicht anmelden, um die Website, es sei denn, es, verwaltet werden soll in diesem Fall Sie in der Rolle "Admin" als Benutzer anmelden müssen.</span><span class="sxs-lookup"><span data-stu-id="30e52-140">That is, you do not need to sign in to visit the site, unless you want to administer it, in which case you must sign in as a user in the Admin role.</span></span>


<span data-ttu-id="30e52-141">Das Buch Reviews s Anwendungsmasterseite wurde aktualisiert, um eine andere Benutzeroberfläche für authentifizierte und anonyme Benutzer gehören.</span><span class="sxs-lookup"><span data-stu-id="30e52-141">The Book Reviews application s master page has been updated to include a different user interface for authenticated and anonymous users.</span></span> <span data-ttu-id="30e52-142">Wenn ein anonymer Benutzer die Website sieht einen Anmeldelink in der oberen rechten Ecke besucht.</span><span class="sxs-lookup"><span data-stu-id="30e52-142">If an anonymous user visits the site she sees a Login link in the upper right corner.</span></span> <span data-ttu-id="30e52-143">Ein authentifizierter Benutzer sieht die Nachricht "Willkommen zurück, *Benutzername*!"</span><span class="sxs-lookup"><span data-stu-id="30e52-143">An authenticated user sees the message, "Welcome back, *username*!"</span></span> <span data-ttu-id="30e52-144">sowie einen Link zum Abmelden. Dort s auch eine Anmeldeseite (`~/Login.aspx`), enthält ein Anmeldename-Websteuerelement, die die Benutzeroberfläche und die Logik für die Authentifizierung eines Besuchers bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="30e52-144">and a link to log out. There s also a login page (`~/Login.aspx`), which contains a Login Web control that provides the user interface and logic for authenticating a visitor.</span></span> <span data-ttu-id="30e52-145">Nur Administratoren können neue Konten erstellen.</span><span class="sxs-lookup"><span data-stu-id="30e52-145">Only administrators can create new accounts.</span></span> <span data-ttu-id="30e52-146">(Handelt es sich zum Erstellen und Verwalten von Benutzerkonten in Seiten der `~/Admin` Ordner.)</span><span class="sxs-lookup"><span data-stu-id="30e52-146">(There are pages for creating and managing user accounts in the `~/Admin` folder.)</span></span>

### <a name="configuring-the-membership-and-roles-apis"></a><span data-ttu-id="30e52-147">Konfigurieren die Mitgliedschaft und Rollen-APIs</span><span class="sxs-lookup"><span data-stu-id="30e52-147">Configuring the Membership and Roles APIs</span></span>

<span data-ttu-id="30e52-148">Die Webanwendung Buch Reviews verwendet die Mitgliedschaft und Rollen APIs zur Unterstützung von Benutzerkonten und zum Gruppieren von Benutzern in Rollen (d. h., der Admin-Rolle).</span><span class="sxs-lookup"><span data-stu-id="30e52-148">The Book Reviews web application uses the Membership and Roles APIs to support user accounts and to group those users into roles (namely, the Admin role).</span></span> <span data-ttu-id="30e52-149">Die `SqlMembershipProvider` und `SqlRoleProvider` -Anbieterklassen werden verwendet, da wir Konto-und Rolle in einer SQL Server-Datenbank gespeichert werden soll.</span><span class="sxs-lookup"><span data-stu-id="30e52-149">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes are used because we want to store account and role information in a SQL Server database.</span></span>

> [!NOTE]
> <span data-ttu-id="30e52-150">Dieses Lernprogramm richtet sich nicht um eine detaillierte Prüfung zur Konfiguration einer Webanwendung zur Unterstützung der Mitgliedschaft und Rollen APIs werden.</span><span class="sxs-lookup"><span data-stu-id="30e52-150">This tutorial is not intended to be a detailed examination at configuring a web application to support the Membership and Roles APIs.</span></span> <span data-ttu-id="30e52-151">Ein gründlicher Betrachtung der diese APIs und die Schritte, die Sie ausführen, so konfigurieren Sie eine Website, um sie verwenden müssen, lesen Sie meine [ *Website Sicherheit Lernprogramme*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="30e52-151">For a thorough look at these APIs and the steps you need to take to configure a website to use them, please read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>


<span data-ttu-id="30e52-152">Um die Anwendungsdienste mit einer SQL Server-Datenbank verwenden müssen Sie zuerst hinzufügen Datenbankobjekte verwendet von diesen Anbietern an die Datenbank, in dem Sie das Benutzerkonto sowie die Rolleninformationen gespeichert.</span><span class="sxs-lookup"><span data-stu-id="30e52-152">To use the application services with a SQL Server database you must first add the database objects used by these providers to the database where you want the user account and role information stored.</span></span> <span data-ttu-id="30e52-153">Diese erforderlichen Datenbankobjekte enthalten eine Vielzahl von Tabellen, Sichten und gespeicherte Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="30e52-153">These requisite database objects include a variety of tables, views, and stored procedures.</span></span> <span data-ttu-id="30e52-154">Sofern nicht anders angegeben die `SqlMembershipProvider` und `SqlRoleProvider` -Anbieterklassen verwenden eine SQL Server Express Edition-Datenbank mit dem Namen `ASPNETDB` befindet sich in der Anwendung s `App_Data` Ordner; Wenn eine Datenbank nicht vorhanden ist, wird es automatisch erstellt mit den erforderlichen Datenbankobjekte von diesen Anbietern zur Laufzeit.</span><span class="sxs-lookup"><span data-stu-id="30e52-154">Unless specified otherwise, the `SqlMembershipProvider` and `SqlRoleProvider` provider classes use a SQL Server Express Edition database named `ASPNETDB` located in the application s `App_Data` folder; if such a database does not exist, it is automatically created with the necessary database objects by these providers at runtime.</span></span>

<span data-ttu-id="30e52-155">Es ist möglich, und in der Regel optimal, zum Erstellen die Anwendung Dienste Datenbankobjekte in der gleichen Datenbank, in dem die Website s anwendungsspezifische Daten gespeichert ist.</span><span class="sxs-lookup"><span data-stu-id="30e52-155">It is possible, and usually ideal, to create the application services database objects in the same database where the website s application-specific data is stored.</span></span> <span data-ttu-id="30e52-156">.NET Framework ausgeliefert wird, ein Tool, mit dem Namen `aspnet_regsql.exe` installiert, die die Datenbankobjekte in einer angegebenen Datenbank.</span><span class="sxs-lookup"><span data-stu-id="30e52-156">The .NET Framework ships with a tool named `aspnet_regsql.exe` that installs the database objects on a specified database.</span></span> <span data-ttu-id="30e52-157">Ich habe fehlend fort und verwendet dieses Tool diese Objekte zum Hinzufügen der `Reviews.mdf` -Datenbank in die `App_Data` Ordner (der Entwicklungsdatenbank).</span><span class="sxs-lookup"><span data-stu-id="30e52-157">I have gone ahead and used this tool to add these objects to the `Reviews.mdf` database in the `App_Data` folder (the development database).</span></span> <span data-ttu-id="30e52-158">Wir sehen, wie Sie dieses Tool weiter unten in diesem Lernprogramm verwenden, wenn wir diese Objekte in der Produktionsdatenbank hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="30e52-158">We'll see how to use this tool later in this tutorial when we add these objects to the production database.</span></span>

<span data-ttu-id="30e52-159">Wenn Sie die Anwendung Dienste Datenbankobjekte in einer Datenbank außer hinzufügen `ASPNETDB` müssen Sie zum Anpassen der `SqlMembershipProvider` und `SqlRoleProvider` Anbieter Klassen Konfigurationen aus, sodass sie die entsprechende Datenbank verwenden.</span><span class="sxs-lookup"><span data-stu-id="30e52-159">If you add the application services database objects to a database other than `ASPNETDB` you will need to customize the `SqlMembershipProvider` and `SqlRoleProvider` provider classes configurations so that they use the appropriate database.</span></span> <span data-ttu-id="30e52-160">Zum Anpassen der Mitgliedschaftsanbieter Hinzufügen einer [  *&lt;Mitgliedschaft&gt; Element* ](https://msdn.microsoft.com/library/1b9hw62f.aspx) innerhalb der `<system.web>` im Abschnitt `Web.config`; verwenden Sie die [  *&lt;RoleManager&gt; Element* ](https://msdn.microsoft.com/library/ms164660.aspx) zum Konfigurieren des Rollen-Anbieters.</span><span class="sxs-lookup"><span data-stu-id="30e52-160">To customize the Membership provider add a [*&lt;membership&gt; element*](https://msdn.microsoft.com/library/1b9hw62f.aspx) within the `<system.web>` section in `Web.config`; use the [*&lt;roleManager&gt; element*](https://msdn.microsoft.com/library/ms164660.aspx) to configure the Roles provider.</span></span> <span data-ttu-id="30e52-161">Der folgende Codeausschnitt stammt aus dem Buch Reviews Anwendung s `Web.config` und zeigt die Einstellungen für die Mitgliedschaft und Rollen-APIs konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="30e52-161">The following snippet is taken from the Book Reviews application s `Web.config` and shows the configure settings for the Membership and Roles APIs.</span></span> <span data-ttu-id="30e52-162">Beachten Sie, dass beide registrieren Sie einen neuen Anbieter - `ReviewMembership` und `ReviewRole` -, bei denen die `SqlMembershipProvider` und `SqlRoleProvider` Anbieter bzw.</span><span class="sxs-lookup"><span data-stu-id="30e52-162">Note that both register a new provider - `ReviewMembership` and `ReviewRole` - that use the `SqlMembershipProvider` and `SqlRoleProvider` providers, respectively.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample1.xml)]

<span data-ttu-id="30e52-163">Die `Web.config` Datei "s" `<authentication>` Element auch zur Unterstützung der formularbasierte Authentifizierung konfiguriert wurde.</span><span class="sxs-lookup"><span data-stu-id="30e52-163">The `Web.config` file s `<authentication>` element has also been configured to support forms-based authentication.</span></span>
  

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample2.xml)]

### <a name="limiting-access-to-the-administration-pages"></a><span data-ttu-id="30e52-164">Beschränken des Zugriffs auf den Verwaltungsseiten</span><span class="sxs-lookup"><span data-stu-id="30e52-164">Limiting Access to the Administration Pages</span></span>

<span data-ttu-id="30e52-165">ASP.NET erleichtert das gewähren oder Verweigern des Zugriffs auf eine bestimmte Datei oder Ordner nach Benutzer oder Rolle über seine *URL-Autorisierung* Funktion.</span><span class="sxs-lookup"><span data-stu-id="30e52-165">ASP.NET makes it easy to grant or deny access to a particular file or folder by user or by role via its *URL authorization* feature.</span></span> <span data-ttu-id="30e52-166">(Wir kurz erläutert, URL-Autorisierung in der *Core Unterschiede zwischen IIS und ASP.NET Development Server* Lernprogramm und wurde gezeigt, wie IIS und ASP.NET Development Server URL-Autorisierungsregeln für statische unterschiedlich anwenden im Vergleich zu dynamischen Inhalt.) Da soll verhindert werden soll den Zugriff auf die `~/Admin` Ordner mit Ausnahme von dieser Benutzer in der Rolle "Admin" URL-Autorisierungsregeln zu diesem Ordner hinzufügen müssen.</span><span class="sxs-lookup"><span data-stu-id="30e52-166">(We briefly discussed URL authorization in the *Core Differences Between IIS and the ASP.NET Development Server* tutorial and showed how IIS and the ASP.NET Development Server apply URL authorization rules differently for static versus dynamic content.) Because we want to prohibit access to the `~/Admin` folder except for those users in the Admin role, we need to add URL authorization rules to this folder.</span></span> <span data-ttu-id="30e52-167">Insbesondere sollten die URL-Autorisierungsregeln Benutzer in der Rolle "Admin" zulassen und verweigern alle anderen Benutzer.</span><span class="sxs-lookup"><span data-stu-id="30e52-167">Specifically, the URL authorization rules need to allow users in the Admin role and deny all other users.</span></span> <span data-ttu-id="30e52-168">Dies geschieht durch Hinzufügen einer `Web.config` Datei wird in der `~/Admin` Ordner mit dem folgenden Inhalt:</span><span class="sxs-lookup"><span data-stu-id="30e52-168">This is accomplished by adding a `Web.config` file to the `~/Admin` folder with the following contents:</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample3.xml)]

<span data-ttu-id="30e52-169">Für Weitere Informationen zu ASP.NET s URL Authorization-Feature und wie Sie es verwenden, um Autorisierungsregeln für Benutzer und Rollen, ausgedrückt werden, lesen Sie die [ *Benutzerbasierte Autorisierung* ](../../older-versions-security/membership/user-based-authorization-cs.md) und [ *Rollenbasierte Autorisierung* ](../../older-versions-security/roles/role-based-authorization-cs.md) Lernprogramme unter meinem [ *Website Sicherheit Lernprogramme*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="30e52-169">For more information on ASP.NET s URL authorization feature and how to use it to spell out authorization rules for users and for roles, be sure to read the [*User-Based Authorization*](../../older-versions-security/membership/user-based-authorization-cs.md) and [*Role-Based Authorization*](../../older-versions-security/roles/role-based-authorization-cs.md) tutorials from my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>

## <a name="deploying-a-web-application-that-uses-application-services"></a><span data-ttu-id="30e52-170">Bereitstellen einer Webanwendung, die Anwendungsdienste verwendet</span><span class="sxs-lookup"><span data-stu-id="30e52-170">Deploying a Web Application That Uses Application Services</span></span>

<span data-ttu-id="30e52-171">Wenn Sie eine Website bereitstellen, die Anwendungsdienste und einen Anbieter, der die Anwendungsinformationen von Services in einer Datenbank speichert, ist es unabdinglich, die Datenbankobjekte, die erforderlich sind, durch die Anwendungsdienste in der Produktionsdatenbank erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="30e52-171">When deploying a website that uses application services and a provider that stores the application services information in a database, it is imperative that the database objects needed by the application services be created on the production database.</span></span> <span data-ttu-id="30e52-172">Die Produktionsdatenbank enthält anfänglich keine diese Objekte können daher bei der Bereitstellung der Anwendung (oder bei der Bereitstellung zum ersten Mal nach Application-Dienste hinzugefügt wurden), Sie müssen zusätzliche Schritte abzurufenden diese erforderlichen Datenbankobjekte, auf die die Produktionsdatenbank.</span><span class="sxs-lookup"><span data-stu-id="30e52-172">Initially the production database does not contain these objects, so when the application is first deployed (or when it is deployed for the first time after application services have been added), you must take extra steps to get these requisite database objects on the production database.</span></span>

<span data-ttu-id="30e52-173">Eine weitere Herausforderung kann auftreten, wenn Sie eine Website bereitstellen, die Anwendungsdienste verwendet werden, wenn Sie beabsichtigen, die in der Entwicklungsumgebung in die produktionsumgebung erstellten Benutzerkonten zu replizieren.</span><span class="sxs-lookup"><span data-stu-id="30e52-173">Another challenge can arise when deploying a website that uses application services if you intend to replicate the user accounts created in the development environment to the production environment.</span></span> <span data-ttu-id="30e52-174">Abhängig von der Konfiguration Mitgliedschaft und Rollen ist es möglich, dass diese Benutzer auch, wenn Sie die Benutzerkonten, die in der Entwicklungsumgebung in der Produktionsdatenbank erstellt wurden erfolgreich kopieren, in der Webanwendung in Produktion anmelden können.</span><span class="sxs-lookup"><span data-stu-id="30e52-174">Depending on the Membership and Roles configuration, it is possible that even if you successfully copy the user accounts that were created in the development environment to the production database, these users cannot sign into the web application in production.</span></span> <span data-ttu-id="30e52-175">Wir sehen Sie sich die Ursache dieses Problems und erläutert, um es zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="30e52-175">We'll look at the cause of this issue and discuss how to prevent it from happening.</span></span>

<span data-ttu-id="30e52-176">ASP.NET im Lieferumfang eine hübsche [ *Web Site Administration Tool (WSAT)* ](https://msdn.microsoft.com/library/yy40ytx0.aspx) , die von Visual Studio gestartet werden kann, und ermöglicht dem Benutzer Konto, Rollen und Autorisierung Regeln, die über eine webbasierte verwaltet werden -Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="30e52-176">ASP.NET ships with a nice [*Web Site Administration Tool (WSAT)*](https://msdn.microsoft.com/library/yy40ytx0.aspx) that can be launched from Visual Studio and allows the user account, roles, and authorization rules to be managed through a web-based interface.</span></span> <span data-ttu-id="30e52-177">Leider funktioniert die WSAT nur für lokale Websites, was bedeutet, dass die Remoteverwaltung von Benutzerkonten, Rollen und Autorisierungsregeln für die Webanwendung in der produktionsumgebung verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="30e52-177">Unfortunately, the WSAT only works for local websites, meaning that it cannot be used to remotely manage user accounts, roles, and authorization rules for the web application in the production environment.</span></span> <span data-ttu-id="30e52-178">Sehen wir uns die verschiedenen Möglichkeiten zum Implementieren von WSAT-ähnliches Verhalten über Ihre Produktionswebsite.</span><span class="sxs-lookup"><span data-stu-id="30e52-178">We'll look at different ways to implement WSAT-like behavior from your production website.</span></span>

### <a name="adding-the-database-objects-using-aspnetregsqlexe"></a><span data-ttu-id="30e52-179">Hinzufügen der Datenbank Objekte mithilfe von Aspnet\_regsql.exe</span><span class="sxs-lookup"><span data-stu-id="30e52-179">Adding the Database Objects Using aspnet\_regsql.exe</span></span>

<span data-ttu-id="30e52-180">Die *Bereitstellen einer Datenbank* Lernprogramm wurde gezeigt, wie Tabellen und Daten aus der Entwicklungsdatenbank in der Produktionsdatenbank kopieren und diese Techniken können sicherlich verwendet werden, um die Anwendung Dienste-Datenbankobjekte, die die Produktionsdatenbank.</span><span class="sxs-lookup"><span data-stu-id="30e52-180">The *Deploying a Database* tutorial showed how to copy the tables and data from the development database to the production database, and these techniques can certainly be used to copy the application services database objects to the production database.</span></span> <span data-ttu-id="30e52-181">Eine andere Möglichkeit ist die `aspnet_regsql.exe` Tool, das hinzugefügt oder entfernt die Anwendung Dienste Datenbankobjekte aus einer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="30e52-181">Another option is the `aspnet_regsql.exe` tool, which adds or removes the application services database objects from a database.</span></span>

> [!NOTE]
> <span data-ttu-id="30e52-182">Die `aspnet_regsql.exe` Tool erstellt die Datenbankobjekte in einer angegebenen Datenbank.</span><span class="sxs-lookup"><span data-stu-id="30e52-182">The `aspnet_regsql.exe` tool creates the database objects on a specified database.</span></span> <span data-ttu-id="30e52-183">Es werden keine Daten in die Datenbankobjekte aus der Entwicklungsdatenbank in der Produktionsdatenbank migriert.</span><span class="sxs-lookup"><span data-stu-id="30e52-183">It does not migrate data in those database objects from the development database to the production database.</span></span> <span data-ttu-id="30e52-184">Verwenden Sie die Techniken, die in behandelt, wenn Sie meinen, so kopieren Sie die Benutzerinformationen Konto und die Rolle in der Entwicklungsdatenbank in der Produktionsdatenbank der *Bereitstellen einer Datenbank* Lernprogramm.</span><span class="sxs-lookup"><span data-stu-id="30e52-184">If you mean to copy the user account and role information in the development database to the production database use the techniques covered in the *Deploying a Database* tutorial.</span></span>


<span data-ttu-id="30e52-185">Betrachten zum Hinzufügen von Datenbankobjekten zu Datenbank für die Produktion mit s können die `aspnet_regsql.exe` Tool.</span><span class="sxs-lookup"><span data-stu-id="30e52-185">Let s look at how to add the database objects to the production database using the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="30e52-186">Starten von Windows-Explorer öffnen und das Navigieren zu .NET Framework Version 2.0-Verzeichnis auf Ihrem Computer %WINDIR%\ Microsoft.NET\Framework\v2.0.50727.</span><span class="sxs-lookup"><span data-stu-id="30e52-186">Start by opening Windows Explorer and navigating to the .NET Framework version 2.0 directory on your computer, %WINDIR%\ Microsoft.NET\Framework\v2.0.50727.</span></span> <span data-ttu-id="30e52-187">Es sollten Sie finden die `aspnet_regsql.exe` Tool.</span><span class="sxs-lookup"><span data-stu-id="30e52-187">There you should find the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="30e52-188">Dieses Tool kann über die Befehlszeile verwendet werden, aber es enthält auch eine grafische Benutzeroberfläche; Doppelklicken Sie auf die `aspnet_regsql.exe` Datei zum zugehörigen grafische-Komponente zu starten.</span><span class="sxs-lookup"><span data-stu-id="30e52-188">This tool can be used from the command-line, but it also includes a graphical user interface; double-click the `aspnet_regsql.exe` file to launch its graphical component.</span></span>

<span data-ttu-id="30e52-189">Das Tool startet durch einen Begrüßungsbildschirm erklärt den Zweck anzeigen.</span><span class="sxs-lookup"><span data-stu-id="30e52-189">The tool starts by displaying a splash screen explaining its purpose.</span></span> <span data-ttu-id="30e52-190">Klicken Sie auf Weiter, um zum Bildschirm "Wählen Sie ein Setup-Option", die in Abbildung 1 dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="30e52-190">Click Next to advance to the "Select a Setup Option" screen, which is shown in Figure 1.</span></span> <span data-ttu-id="30e52-191">Von hier aus können Sie auswählen, die Anwendungsdienste-Datenbankobjekte oder entfernen sie aus einer Datenbank hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="30e52-191">From here you can choose to add the application services database objects or remove them from a database.</span></span> <span data-ttu-id="30e52-192">Da wir diese Objekte in der Produktionsdatenbank hinzufügen möchten, wählen Sie die Option "Konfigurieren von SQLServer für Application-Dienste", und klicken Sie auf Weiter.</span><span class="sxs-lookup"><span data-stu-id="30e52-192">Because we want to add these objects to the production database, select the "Configure SQL Server for application services" option and click Next.</span></span>


<span data-ttu-id="30e52-193">[![Wählen Sie SQLServer für Anwendungsdienste konfigurieren](configuring-a-website-that-uses-application-services-cs/_static/image2.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="30e52-193">[![Choose to Configure SQL Server for Application Services](configuring-a-website-that-uses-application-services-cs/_static/image2.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image1.jpg)</span></span>

<span data-ttu-id="30e52-194">**Abbildung 1**: Wählen Sie zum Konfigurieren von SQL Server für Anwendungsdienste ([klicken Sie hier, um das Bild in voller Größe angezeigt](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="30e52-194">**Figure 1**: Choose to Configure SQL Server for Application Services ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span></span>


<span data-ttu-id="30e52-195">In "Wählen Sie die Server und Datenbank" fordert Bildschirm Informationen zur Verbindung mit der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="30e52-195">In "Select the Server and Database" screen prompts for information to connect to the database.</span></span> <span data-ttu-id="30e52-196">Geben Sie den Datenbankserver, die Anmeldeinformationen und den Datenbanknamen, die Ihnen von Ihrem Webhosting bereitgestellt, und klicken Sie auf Weiter.</span><span class="sxs-lookup"><span data-stu-id="30e52-196">Enter the database server, the security credentials, and the database name supplied to you by your web hosting company and click Next.</span></span>

> [!NOTE]
> <span data-ttu-id="30e52-197">Nach der Eingabe den Datenbankserver und die Anmeldeinformationen möglicherweise erhalten Sie einen Fehler beim Erweitern der Datenbank Dropdown-Liste.</span><span class="sxs-lookup"><span data-stu-id="30e52-197">After entering your database server and credentials you may get an error when expanding the database drop-down list.</span></span> <span data-ttu-id="30e52-198">Die `aspnet_regsql.exe` tool Abfragen der `sysdatabases` Systemtabelle zum Abrufen einer Liste der Datenbanken auf dem Server, aber einige Webhosting Unternehmen Sperren ihren Datenbankserver, sodass diese Informationen nicht öffentlich verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="30e52-198">The `aspnet_regsql.exe` tool queries the `sysdatabases` system table to retrieve a list of databases on the server, but some web hosting companies lock down their database servers so that this information is not publicly available.</span></span> <span data-ttu-id="30e52-199">Wenn Sie diese Fehlermeldung erhalten, können Sie direkt in der Dropdownliste den Datenbanknamen eingeben.</span><span class="sxs-lookup"><span data-stu-id="30e52-199">If you get this error you can type the database name directly into the drop-down list.</span></span>


<span data-ttu-id="30e52-200">[![Geben Sie das Tool mit dem Datenbank-s-Verbindungsinformationen](configuring-a-website-that-uses-application-services-cs/_static/image5.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="30e52-200">[![Supply the Tool With Your Database s Connection Information](configuring-a-website-that-uses-application-services-cs/_static/image5.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image4.jpg)</span></span>

<span data-ttu-id="30e52-201">**Abbildung 2**: Geben Sie das Tool mit der Datenbank-s-Verbindungsinformationen ([klicken Sie hier, um das Bild in voller Größe angezeigt](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="30e52-201">**Figure 2**: Supply the Tool With Your Database s Connection Information ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span></span>


<span data-ttu-id="30e52-202">Im folgenden Bildschirm werden die Aktionen, die im Begriff sind, d. h. stattfinden zusammengefasst, die die Anwendung Dienste Datenbankobjekte sollen in der angegebenen Datenbank hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="30e52-202">The subsequent screen summarizes the actions that are about to take place, namely that the application services database objects are going to be added to the specified database.</span></span> <span data-ttu-id="30e52-203">Klicken Sie neben vollständige diese Aktion aus.</span><span class="sxs-lookup"><span data-stu-id="30e52-203">Click Next to complete this action.</span></span> <span data-ttu-id="30e52-204">Nach einigen Augenblicken wird im letzte Bildschirm angezeigt, beachten Sie, dass die Datenbankobjekte (siehe Abbildung 3) hinzugefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="30e52-204">After a few moments, the final screen is displayed, noting that the database objects have been added (see Figure 3).</span></span>


<span data-ttu-id="30e52-205">[![War erfolgreich! Die Anwendung Dienste Datenbankobjekte wurden in der Produktionsdatenbank hinzugefügt.](configuring-a-website-that-uses-application-services-cs/_static/image8.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="30e52-205">[![Success! The Application Services Database Objects Were Added to the Production Database](configuring-a-website-that-uses-application-services-cs/_static/image8.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image7.jpg)</span></span>

<span data-ttu-id="30e52-206">**Abbildung 3**: Erfolg!</span><span class="sxs-lookup"><span data-stu-id="30e52-206">**Figure 3**: Success!</span></span> <span data-ttu-id="30e52-207">Die Anwendung Dienste Datenbank Objekte hinzugefügt wurden in der Produktionsdatenbank ([klicken Sie hier, um das Bild in voller Größe angezeigt](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="30e52-207">The Application Services Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg))</span></span>


<span data-ttu-id="30e52-208">Um sicherzustellen, dass die Anwendung Dienste Datenbankobjekte in der Produktionsdatenbank erfolgreich hinzugefügt wurden, öffnen Sie SQL Server Management Studio, und Herstellen einer Verbindung mit der Produktionsdatenbank.</span><span class="sxs-lookup"><span data-stu-id="30e52-208">To verify that the application services database objects were successfully added to the production database, open SQL Server Management Studio and connect to your production database.</span></span> <span data-ttu-id="30e52-209">Wie in Abbildung 4 gezeigt, nun sollte die Anwendung Dienste Datenbanktabellen in Ihrer Datenbank `aspnet_Applications`, `aspnet_Membership`, `aspnet_Users`usw. lauten.</span><span class="sxs-lookup"><span data-stu-id="30e52-209">As Figure 4 shows, you should now see the application services database tables in your database, `aspnet_Applications`, `aspnet_Membership`, `aspnet_Users`, and so forth.</span></span>


<span data-ttu-id="30e52-210">[![Vergewissern Sie sich, dass die Datenbankobjekte in der Produktionsdatenbank hinzugefügt wurden](configuring-a-website-that-uses-application-services-cs/_static/image11.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="30e52-210">[![Confirm That the Database Objects Were Added to the Production Database](configuring-a-website-that-uses-application-services-cs/_static/image11.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image10.jpg)</span></span>

<span data-ttu-id="30e52-211">**Abbildung 4**: Vergewissern Sie sich, dass die Datenbankobjekte in der Produktionsdatenbank hinzugefügt wurden ([klicken Sie hier, um das Bild in voller Größe angezeigt](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="30e52-211">**Figure 4**: Confirm That the Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span></span>


<span data-ttu-id="30e52-212">Sie müssen nur mithilfe der `aspnet_regsql.exe` -tool beim Bereitstellen der Webanwendung zum ersten Mal oder zum ersten Mal, nachdem Sie gestartet haben, verwenden die Anwendungsdienste.</span><span class="sxs-lookup"><span data-stu-id="30e52-212">You will only need to use the `aspnet_regsql.exe` tool when deploying your web application for the first time or for the first time after you have started using the application services.</span></span> <span data-ttu-id="30e52-213">Sobald diese Datenbankobjekte in der Produktionsdatenbank sind gewonnen sie t muss erneut hinzugefügt oder geändert werden soll.</span><span class="sxs-lookup"><span data-stu-id="30e52-213">Once these database objects are on the production database they won t need to be re-added or modified.</span></span>

### <a name="copying-user-accounts-from-development-to-production"></a><span data-ttu-id="30e52-214">Kopieren von Benutzerkonten von der Entwicklung bis hin zur Produktion</span><span class="sxs-lookup"><span data-stu-id="30e52-214">Copying User Accounts from Development to Production</span></span>

<span data-ttu-id="30e52-215">Bei Verwendung der `SqlMembershipProvider` und `SqlRoleProvider` -Anbieterklassen zum Speichern der Anwendung Dienste in einer SQL Server-Datenbank, die Benutzerinformationen für Konto "und" Rolle befindet sich in einer Vielzahl von Datenbanktabellen, einschließlich `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`, und `aspnet_UsersInRoles`, o. ä.</span><span class="sxs-lookup"><span data-stu-id="30e52-215">When using the `SqlMembershipProvider` and `SqlRoleProvider` provider classes to store the application services information in a SQL Server database, the user account and role information is stored in a variety of database tables, including `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`, and `aspnet_UsersInRoles`, among others.</span></span> <span data-ttu-id="30e52-216">Wenn während der Entwicklung von Benutzerkonten in der Entwicklungsumgebung erstellen können Sie die Benutzerkonten in der Produktion replizieren, durch die entsprechenden Datensätze aus den Tabellen für die betroffene Datenbank kopieren.</span><span class="sxs-lookup"><span data-stu-id="30e52-216">If during development you create user accounts in the development environment you can replicate those user accounts in production by copying the corresponding records from the applicable database tables.</span></span> <span data-ttu-id="30e52-217">Wenn Sie den Datenbankveröffentlichungs-Assistenten zum Bereitstellen der Anwendung Dienste Datenbankobjekte verwendet möglicherweise auch Zahlungsoption die Datensätze zu kopieren, die in der Entwicklung zur auch produktiv genutzt werden erstellten Benutzerkonten führen würde.</span><span class="sxs-lookup"><span data-stu-id="30e52-217">If you used the Database Publishing Wizard to deploy the application services database objects you may have also elected to copy the records, which would result in the user accounts created in development to also be on production.</span></span> <span data-ttu-id="30e52-218">Jedoch je nach den Konfigurationseinstellungen können Sie feststellen, dass die Benutzer, deren Konten erstellt, in der Entwicklung und bis hin zur Produktion kopiert wurden, nicht aus der Produktionswebsite anmelden können.</span><span class="sxs-lookup"><span data-stu-id="30e52-218">But, depending on your configuration settings, you may find that those users whose accounts were created in development and copied to production are unable to login from the production website.</span></span> <span data-ttu-id="30e52-219">Was gibt?</span><span class="sxs-lookup"><span data-stu-id="30e52-219">What gives?</span></span>

<span data-ttu-id="30e52-220">Die `SqlMembershipProvider` und `SqlRoleProvider` -Anbieterklassen wurden so konzipiert, dass eine einzelne Datenbank als Benutzerspeicher verwendet werden kann, für mehrere Anwendungen, in dem jede Anwendung, theoretisch können kann, Benutzer mit sich überschneidenden Benutzernamen und Rollen mit dem gleichen Namen besitzen.</span><span class="sxs-lookup"><span data-stu-id="30e52-220">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes were designed such that a single database could serve as a user store for multiple applications, where each application could, in theory, have users with overlapping usernames and roles with the same name.</span></span> <span data-ttu-id="30e52-221">Um nach dieser Flexibilität zu ermöglichen, die Datenbank verwaltet eine Liste der Anwendungen in der `aspnet_Applications` Tabelle und jeder Benutzer eine dieser Anwendungen zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="30e52-221">To allow for this flexibility, the database maintains a list of applications in the `aspnet_Applications` table, and each user is associated with one of these applications.</span></span> <span data-ttu-id="30e52-222">Insbesondere die `aspnet_Users` Tabelle besitzt eine `ApplicationId` Spalte, die jeder Benutzer mit einem Datensatz im bindet die `aspnet_Applications` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="30e52-222">Specifically, the `aspnet_Users` table has an `ApplicationId` column that ties each user to a record in the `aspnet_Applications` table.</span></span>

<span data-ttu-id="30e52-223">Zusätzlich zu den `ApplicationId` Spalte, die `aspnet_Applications` Tabelle enthält auch eine `ApplicationName` Spalte, die einen mehr Human benutzerfreundliche Namen für die Anwendung bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="30e52-223">In addition to the `ApplicationId` column, the `aspnet_Applications` table also includes an `ApplicationName` column, which provides a more human-friendly name for the application.</span></span> <span data-ttu-id="30e52-224">Wenn eine Website versucht, arbeiten mit einem Benutzerkonto an, z. B. Überprüfen einer Benutzeranmeldeinformationen s aus der Anmeldeseite Weise ihm mitgeteilt der `SqlMembershipProvider` -Klasse Anwendung arbeiten.</span><span class="sxs-lookup"><span data-stu-id="30e52-224">When a website attempts to work with a user account, such as validating a user s credentials from the login page, it must tell the `SqlMembershipProvider` class what application to work with.</span></span> <span data-ttu-id="30e52-225">Es ist normalerweise der Fall ist dies, indem Sie den Namen der Anwendung angeben und dieser Wert stammt aus der Anbieterkonfiguration s in `Web.config` – insbesondere über die `applicationName` Attribut.</span><span class="sxs-lookup"><span data-stu-id="30e52-225">It usually does this by supplying the application name, and the this value comes from the provider s configuration in `Web.config` - specifically via the `applicationName` attribute.</span></span>

<span data-ttu-id="30e52-226">Aber was geschieht, wenn die `applicationName` -Attribut nicht angegeben ist, im `Web.config`?</span><span class="sxs-lookup"><span data-stu-id="30e52-226">But what happens if the `applicationName` attribute is not specified in `Web.config`?</span></span> <span data-ttu-id="30e52-227">In diesem Fall die Mitgliedschaft System verwendet den Stammpfad der Anwendung als der `applicationName` Wert.</span><span class="sxs-lookup"><span data-stu-id="30e52-227">In such a case the Membership system uses the application root path as the `applicationName` value.</span></span> <span data-ttu-id="30e52-228">Wenn die `applicationName` Attribut nicht ausdrücklich festgelegt ist `Web.config`, dann besteht die Möglichkeit, dass die Entwicklungsumgebung und der produktionsumgebung verwenden einen andere Anwendungsstamm und aus diesem Grund andere Anwendung zugeordnet werden die Namen in der Application-Dienste.</span><span class="sxs-lookup"><span data-stu-id="30e52-228">If the `applicationName` attribute is not explicitly set in `Web.config`, then, there is the possibility that the development environment and production environment use a different application root and therefore will be associated with different application names in the application services.</span></span> <span data-ttu-id="30e52-229">Wenn eine derartige fehlende Übereinstimmung tritt auf, und klicken Sie dann die Benutzer in der Entwicklungsumgebung erstellt haben, werden ein `ApplicationId` -Wert, der nicht mit übereinstimmt die `ApplicationId` Wert für die produktionsumgebung.</span><span class="sxs-lookup"><span data-stu-id="30e52-229">If such a mismatch occurs then those users created in the development environment will have an `ApplicationId` value that does not match with the `ApplicationId` value for the production environment.</span></span> <span data-ttu-id="30e52-230">Das Ergebnis ist, dass diese Benutzer/t gewonnen anmelden können.</span><span class="sxs-lookup"><span data-stu-id="30e52-230">The net result is that those users won t be able to login.</span></span>

> [!NOTE]
> <span data-ttu-id="30e52-231">Wenn Sie sich in dieser Situation - Benutzerkonten, die in der Produktion mit einer nicht übereinstimmenden kopiert `ApplicationId` Value - konnte eine Abfrage aus, um diese falsche aktualisieren schreiben `ApplicationId` -Werte in der `ApplicationId` für die Produktion verwendet.</span><span class="sxs-lookup"><span data-stu-id="30e52-231">If you find yourself in this situation - with user accounts copied to production with a mismatched `ApplicationId` value - you could write a query to update these incorrect `ApplicationId` values to the `ApplicationId` used on production.</span></span> <span data-ttu-id="30e52-232">Nach der Aktualisierung, wäre die Benutzer, deren Konten in der Entwicklungsumgebung erstellt wurden, nun die Webanwendung in Produktion anmelden können.</span><span class="sxs-lookup"><span data-stu-id="30e52-232">Once updated, the users whose accounts were created on the development environment would now be able to sign into the web application on production.</span></span>


<span data-ttu-id="30e52-233">Die gute Nachricht ist, ergibt sich ein einfacher Schritt sicher, dass die beiden Umgebungen identisch sind möglich `ApplicationId` - explizit festgelegten der `applicationName` -Attribut im `Web.config` für alle Ihre Anwendung-Services-Anbieter.</span><span class="sxs-lookup"><span data-stu-id="30e52-233">The good news is that there is a simple step you can take to ensure that the two environments use the same `ApplicationId` - explicitly set the `applicationName` attribute in `Web.config` for all of your application services providers.</span></span> <span data-ttu-id="30e52-234">Ich explizit festlegen, dass die `applicationName` -Attribut auf "BookReviews" in der `<membership>` und `<roleManager>` Elemente in diesem Codeausschnitt aus `Web.config` zeigt.</span><span class="sxs-lookup"><span data-stu-id="30e52-234">I explicitly set the `applicationName` attribute to "BookReviews" in the `<membership>` and `<roleManager>` elements as this snippet from `Web.config` shows.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample4.xml)]

<span data-ttu-id="30e52-235">Weitere Informationen zum Einrichten der `applicationName` Attribut und die Gründe, finden Sie unter [ *Scott Guthrie* ](https://weblogs.asp.net/scottgu/) s Blogbeitrag [ *immer legen Sie den Parameter "ApplicationName" Eigenschaft, die beim Konfigurieren von ASP.NET-Mitgliedschaft und anderen Anbietern*](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="30e52-235">For more discussion on setting the `applicationName` attribute and the rationale behind it, refer to [*Scott Guthrie*](https://weblogs.asp.net/scottgu/) s blog post, [*Always set the applicationName property when configuring ASP.NET Membership and other Providers*](https://weblogs.asp.net/scottgu/443634).</span></span>

### <a name="managing-user-accounts-in-the-production-environment"></a><span data-ttu-id="30e52-236">Verwalten von Benutzerkonten in der Produktionsumgebung</span><span class="sxs-lookup"><span data-stu-id="30e52-236">Managing User Accounts in the Production Environment</span></span>

<span data-ttu-id="30e52-237">Der ASP.NET Web Site Administration Tool (WSAT) erleichtert das Erstellen und Verwalten von Benutzerkonten, definieren und Anwenden von Rollen und Autorisierungsregeln Benutzer- und rollenbasierte ausgeschrieben.</span><span class="sxs-lookup"><span data-stu-id="30e52-237">The ASP.NET Web Site Administration Tool (WSAT) makes it easy to create and manage user accounts, define and apply roles, and spell out user- and role-based authorization rules.</span></span> <span data-ttu-id="30e52-238">Indem Sie im Projektmappen-Explorer aufrufen, und klicken Sie auf das Symbol "ASP.NET-Konfiguration" oder indem Sie die Website oder ein Projekt Menüs aufrufen und dabei das Menüelement ASP.NET-Konfiguration auswählen können Sie die WSAT aus Visual Studio starten.</span><span class="sxs-lookup"><span data-stu-id="30e52-238">You can launch the WSAT from Visual Studio by going to the Solution Explorer and clicking the ASP.NET Configuration icon or by going to the Website or Project menus and selecting the ASP.NET Configuration menu item.</span></span> <span data-ttu-id="30e52-239">Leider kann die WSAT nur mit lokalen Websites verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="30e52-239">Unfortunately, the WSAT can only work with local websites.</span></span> <span data-ttu-id="30e52-240">Aus diesem Grund können die WSAT aus Ihrer Arbeitsstation Sie um die Website in der produktionsumgebung zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="30e52-240">Therefore, you cannot use the WSAT from your workstation to manage the website in the production environment.</span></span>

<span data-ttu-id="30e52-241">Die gute Nachricht ist, dass alle Funktionen verfügbar gemacht werden von der WSAT bereitgestellten programmgesteuert über die Mitgliedschaft und Rollen-APIs verfügbar; Darüber hinaus verwenden viele WSAT-Bildschirme Standardsteuerelemente ASP.NET Anmeldung verknüpft.</span><span class="sxs-lookup"><span data-stu-id="30e52-241">The good news is that all of the functionality exposed provided by the WSAT is available programmatically through the Membership and Roles APIs; furthermore, many of the WSAT screens use the standard ASP.NET Login-related controls.</span></span> <span data-ttu-id="30e52-242">Kurz gesagt, können Sie ASP.NET-Seiten hinzufügen, zu Ihrer Website, die die erforderlichen Management-Funktionen bieten.</span><span class="sxs-lookup"><span data-stu-id="30e52-242">In short, you can add ASP.NET pages to your website that offer the necessary management capabilities.</span></span>

<span data-ttu-id="30e52-243">Beachten Sie, dass eine frühere Lernprogramm die Webanwendung Buch Reviews einschließen aktualisiert eine `~/Admin` , und dieser Ordner ist konfiguriert, dass nur Benutzer in der Rolle "Admin" können.</span><span class="sxs-lookup"><span data-stu-id="30e52-243">Recall that an earlier tutorial updated the Book Reviews web application to include an `~/Admin` folder, and this folder has been configured to only allow users in the Admin role.</span></span> <span data-ttu-id="30e52-244">Dieser Ordner mit dem Namen eine Seite hinzugefügt `CreateAccount.aspx` aus dem ein Administrator ein neues Benutzerkonto erstellen können.</span><span class="sxs-lookup"><span data-stu-id="30e52-244">I added a page to that folder named `CreateAccount.aspx` from which an administrator can create a new user account.</span></span> <span data-ttu-id="30e52-245">Auf dieser Seite verwendet der CreateUserWizard-Steuerelement, um die Benutzer-Schnittstelle und Back-End-Logik für das Erstellen eines neuen Benutzerkontos angezeigt.</span><span class="sxs-lookup"><span data-stu-id="30e52-245">This page uses the CreateUserWizard control to display the user interface and backend logic for creating a new user account.</span></span> <span data-ttu-id="30e52-246">Welche weitere, s angepasst ich das Steuerelement, um ein Kontrollkästchen enthalten, die gefragt, ob der neue Benutzer der Rolle "Admin" auch hinzugefügt werden sollen (siehe Abbildung 5).</span><span class="sxs-lookup"><span data-stu-id="30e52-246">What s more, I customized the control to include a CheckBox that prompts whether the new user should also be added to the Admin role (see Figure 5).</span></span> <span data-ttu-id="30e52-247">Mit ein wenig Arbeit können Sie einen benutzerdefinierten Satz von Seiten erstellen, die die Benutzer und die Rolle verwaltungsbezogenen Aufgaben implementiert, die andernfalls durch die WSAT bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="30e52-247">With a little bit of work you can build a custom set of pages that implements the user and role management-related tasks that would otherwise be provided by the WSAT.</span></span>

> [!NOTE]
> <span data-ttu-id="30e52-248">Für Weitere Informationen zur Verwendung der Mitgliedschaft und Rollen-APIs sowie die Anmeldung bezogene ASP.NET Web-Steuerelemente, lesen Sie unbedingt die werden meine [ *Website Sicherheit Lernprogramme*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="30e52-248">For more information on using the Membership and Roles APIs along with the Login-related ASP.NET Web controls, be sure to read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span> <span data-ttu-id="30e52-249">Weitere Informationen über das Anpassen des Steuerelements CreateUserWizard finden Sie in der [ *Erstellen von Benutzerkonten* ](../../older-versions-security/membership/creating-user-accounts-cs.md) und [ *zusätzliche Benutzerinformationen speichern* ](../../older-versions-security/membership/storing-additional-user-information-cs.md) Lernprogramme oder Auschecken [ *Erich Peterson* ](http://www.erichpeterson.com/) s-Artikel [ *Anpassen des Steuerelements CreateUserWizard* ](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="30e52-249">For more on customizing the CreateUserWizard control refer to the [*Creating User Accounts*](../../older-versions-security/membership/creating-user-accounts-cs.md) and [*Storing Additional User Information*](../../older-versions-security/membership/storing-additional-user-information-cs.md) tutorials, or check out [*Erich Peterson*](http://www.erichpeterson.com/) s article, [*Customizing the CreateUserWizard Control*](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx).</span></span>


<span data-ttu-id="30e52-250">[![Administratoren können neue Benutzerkonten erstellen.](configuring-a-website-that-uses-application-services-cs/_static/image14.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image13.jpg)</span><span class="sxs-lookup"><span data-stu-id="30e52-250">[![Administrators Can Create New User Accounts](configuring-a-website-that-uses-application-services-cs/_static/image14.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image13.jpg)</span></span>

<span data-ttu-id="30e52-251">**Abbildung 5**: Administratoren können erstellen Sie neue Benutzerkonten ([klicken Sie hier, um das Bild in voller Größe angezeigt](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span><span class="sxs-lookup"><span data-stu-id="30e52-251">**Figure 5**: Administrators Can Create New User Accounts ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span></span>


<span data-ttu-id="30e52-252">Wenn Sie die vollständige Funktionalität des Auschecken des WSAT benötigen [ *parallelen Ihrer eigenen Websiteverwaltungs-Tool*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx), in welchem Autor Dan Clem führt Sie durch den Prozess der Erstellung eines benutzerdefinierten WSAT-ähnliche Tools.</span><span class="sxs-lookup"><span data-stu-id="30e52-252">If you need the full functionality of the WSAT check out [*Rolling Your Own Web Site Administration Tool*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx), in which author Dan Clem walks through the process of building a custom WSAT-like tool.</span></span> <span data-ttu-id="30e52-253">Dan teilt seine s-Anwendungsquellcode (in c#) und bietet eine schrittweise Anleitung für Ihre gehostete Website hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="30e52-253">Dan shares his application s source code (in C#) and provides step-by-step instructions for adding it to your hosted website.</span></span>

## <a name="summary"></a><span data-ttu-id="30e52-254">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="30e52-254">Summary</span></span>

<span data-ttu-id="30e52-255">Beim Bereitstellen einer Webanwendung, die die Anwendung Dienste datenbankimplementierung verwendet müssen Sie zunächst sicherstellen, dass die Produktionsdatenbank erforderlichen Datenbankobjekte verfügt.</span><span class="sxs-lookup"><span data-stu-id="30e52-255">When deploying a web application that uses the application services database implementation you must first ensure that the production database has the requisite database objects.</span></span> <span data-ttu-id="30e52-256">Diese Objekte können hinzugefügt werden, die beschriebenen Verfahren verwenden die *Bereitstellen einer Datenbank* Lernprogramm; Alternativ können Sie die `aspnet_regsql.exe` Tools, wie in diesem Lernprogramm wurde erläutert.</span><span class="sxs-lookup"><span data-stu-id="30e52-256">These objects can be added using the techniques discussed in the *Deploying a Database* tutorial; alternatively, you can use the `aspnet_regsql.exe` tool, as we saw in this tutorial.</span></span> <span data-ttu-id="30e52-257">Andere Herausforderungen annehmen können werden wir berührt, im Mittelpunkt der Anwendungsname verwendet, die in den Entwicklungs- und produktionsumgebungen-Umgebungen (das ist wichtig, wenn Sie Benutzer und Rollen, die in der Entwicklungsumgebung erstellt, für die Produktion gültig sein sollen) und Techniken zum Synchronisieren verwalten die Benutzer und Rollen in der produktionsumgebung.</span><span class="sxs-lookup"><span data-stu-id="30e52-257">Other challenges we touched on center around synchronizing the application name used in the development and production environments (which is important if you want users and roles created in the development environment to be valid on production) and techniques for managing the users and roles in the production environment.</span></span>

<span data-ttu-id="30e52-258">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="30e52-258">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="30e52-259">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="30e52-259">Further Reading</span></span>

<span data-ttu-id="30e52-260">Weitere Informationen zu den Themen in diesem Lernprogramm erläutert finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="30e52-260">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="30e52-261">*Registrierungstool für ASP.NET SQL-Server (aspnet_regsql.exe)*</span><span class="sxs-lookup"><span data-stu-id="30e52-261">*ASP.NET SQL Server Registration Tool (aspnet_regsql.exe)*</span></span>](https://msdn.microsoft.com/library/ms229862.aspx)
- [<span data-ttu-id="30e52-262">*Erstellen der Datenbank für die Anwendungsdienste für SQLServer*</span><span class="sxs-lookup"><span data-stu-id="30e52-262">*Creating the Application Services Database for SQL Server*</span></span>](https://msdn.microsoft.com/library/x28wfk74.aspx)
- [<span data-ttu-id="30e52-263">*Erstellen das Schema für die Mitgliedschaft in SQLServer*</span><span class="sxs-lookup"><span data-stu-id="30e52-263">*Creating the Membership Schema in SQL Server*</span></span>](../../older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs.md)
- [<span data-ttu-id="30e52-264">*Untersuchen von ASP.NET s Mitgliedschaft, Rollen und Profile*</span><span class="sxs-lookup"><span data-stu-id="30e52-264">*Examining ASP.NET s Membership, Roles, and Profile*</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="30e52-265">*Paralleles eigene Websiteverwaltungs-Tool*</span><span class="sxs-lookup"><span data-stu-id="30e52-265">*Rolling Your Own Web Site Administration Tool*</span></span>](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)
- [<span data-ttu-id="30e52-266">*Lernprogramme für Website-Sicherheit*</span><span class="sxs-lookup"><span data-stu-id="30e52-266">*Website Security Tutorials*</span></span>](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md)
- [<span data-ttu-id="30e52-267">*Website-Tool (Übersicht)*</span><span class="sxs-lookup"><span data-stu-id="30e52-267">*Web Site Administration Tool Overview*</span></span>](https://msdn.microsoft.com/library/yy40ytx0.aspx)

>[!div class="step-by-step"]
<span data-ttu-id="30e52-268">[Zurück](configuring-the-production-web-application-to-use-the-production-database-cs.md)
[Weiter](strategies-for-database-development-and-deployment-cs.md)</span><span class="sxs-lookup"><span data-stu-id="30e52-268">[Previous](configuring-the-production-web-application-to-use-the-production-database-cs.md)
[Next](strategies-for-database-development-and-deployment-cs.md)</span></span>
