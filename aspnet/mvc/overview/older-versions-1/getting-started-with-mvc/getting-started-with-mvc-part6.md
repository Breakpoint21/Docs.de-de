---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
title: Hinzufügen einer Create-Methode, und erstellen Sie die Ansicht | Microsoft Docs
author: shanselman
description: Dies ist ein Anfänger-Lernprogramm, das die Grundlagen von ASP.NET MVC. Erstellen Sie eine einfache Web-Anwendung, die Lese- und Schreibvorgänge aus einer Datenbank.
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/14/2010
ms.topic: article
ms.assetid: a3a90963-0286-4fa0-9b3d-c230cc18b0a3
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
msc.type: authoredcontent
ms.openlocfilehash: 48e656a0c394b9db5baaec9c557ec38c4020d41b
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/10/2018
---
<a name="adding-a-create-method-and-create-view"></a><span data-ttu-id="8cc9b-104">Hinzufügen einer Create-Methode und die Ansicht erstellen</span><span class="sxs-lookup"><span data-stu-id="8cc9b-104">Adding a Create Method and Create View</span></span>
====================
<span data-ttu-id="8cc9b-105">durch [Scott Hanselman](https://github.com/shanselman)</span><span class="sxs-lookup"><span data-stu-id="8cc9b-105">by [Scott Hanselman](https://github.com/shanselman)</span></span>

> <span data-ttu-id="8cc9b-106">Dies ist ein Anfänger-Lernprogramm, das die Grundlagen von ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-106">This is a beginner tutorial that introduces the basics of ASP.NET MVC.</span></span> <span data-ttu-id="8cc9b-107">Erstellen Sie eine einfache Web-Anwendung, die Lese- und Schreibvorgänge aus einer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-107">You'll create a simple web application that reads and writes from a database.</span></span> <span data-ttu-id="8cc9b-108">Besuchen Sie die [ASP.NET MVC-Trainingscenter](../../../index.md) andere ASP.NET-MVC Lernprogramme und Beispiele finden.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-108">Visit the [ASP.NET MVC learning center](../../../index.md) to find other ASP.NET MVC tutorials and samples.</span></span>


<span data-ttu-id="8cc9b-109">In diesem Abschnitt werden wir implementieren die Unterstützung notwendig, um Benutzern das Erstellen neuer Filmen in der Datenbank zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-109">In this section we are going to implement the support necessary to enable users to create new movies in our database.</span></span> <span data-ttu-id="8cc9b-110">Dazu müssen wir die Filme/erstellen URL-Aktion implementieren.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-110">We'll do this by implementing the /Movies/Create URL action.</span></span>

<span data-ttu-id="8cc9b-111">Implementieren die URL Filme/erstellen erfolgt in zwei Schritten.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-111">Implementing the /Movies/Create URL is a two step process.</span></span> <span data-ttu-id="8cc9b-112">Wenn ein Benutzer zunächst die URL Filme/erstellen besucht möchten wir sie einem HTML-Formular anzuzeigen, die sie zur Eingabe eines neuen Films ausfüllen können.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-112">When a user first visits the /Movies/Create URL we want to show them an HTML form that they can fill out to enter a new movie.</span></span> <span data-ttu-id="8cc9b-113">Klicken Sie dann, wenn der Benutzer sendet das Formular und Beiträge, die die Daten an den Server zu sichern, möchten wir den bereitgestellten Inhalt abrufen und speichern Sie ihn in die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-113">Then, when the user submits the form and posts the data back to the server, we want to retrieve the posted contents and save it into our database.</span></span>

<span data-ttu-id="8cc9b-114">Diese beiden Schritte innerhalb von zwei Create()--Methoden implementieren wir in unserer MoviesController-Klasse.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-114">We'll implement these two steps within two Create() methods within our MoviesController class.</span></span> <span data-ttu-id="8cc9b-115">Zeigt eine Methode der &lt;Formular&gt; , dass der Benutzer zum Erstellen eines neuen Films ausfüllen soll.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-115">One method will show the &lt;form&gt; that the user should fill out to create a new movie.</span></span> <span data-ttu-id="8cc9b-116">Die zweite Methode verarbeitet die bereitgestellten Daten verarbeiten, wenn der Benutzer sendet die &lt;Formular&gt; zurück an den Server, und speichern Sie einen neuen Film innerhalb der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-116">The second method will handle processing the posted data when the user submits the &lt;form&gt; back to the server, and save a new Movie within our database.</span></span>

<span data-ttu-id="8cc9b-117">Im folgenden finden Sie der Code zur unsere MoviesController Klasse zur Implementierung dieser Funktion hinzufügen müssen:</span><span class="sxs-lookup"><span data-stu-id="8cc9b-117">Below is the code we'll add to our MoviesController class to implement this:</span></span>

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample1.cs)]

<span data-ttu-id="8cc9b-118">Der obige Code enthält alle des Codes, die wir in unserer Controller müssen.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-118">The above code contains all of the code that we'll need within our Controller.</span></span>

<span data-ttu-id="8cc9b-119">Nun implementieren wir die Create View-Vorlage, mit dem wir ein Formular für den Benutzer angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-119">Let's now implement the Create View template that we'll use to display a form to the user.</span></span> <span data-ttu-id="8cc9b-120">Wir mit der rechten Maustaste in der ersten Create-Methode fort und wählen "Ansicht hinzufügen", um die Ansichtenvorlage für unsere Film-Formular erstellen.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-120">We'll right click in the first Create method and select "Add View" to create the view template for our Movie form.</span></span>

<span data-ttu-id="8cc9b-121">Wir wählen, die wir zur navigieren Sie zu der Vorlage anzeigen ein "Films" übergeben, als die Datenklasse anzeigen und darauf hinweisen, dass "Vorlage"Create"erstellen" werden soll.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-121">We'll select that we are going to pass the view template a "Movie" as its view data class, and indicate that we want to "scaffold" a "Create" template.</span></span>

<span data-ttu-id="8cc9b-122">[![Fügen Sie die Ansicht](getting-started-with-mvc-part6/_static/image2.png)](getting-started-with-mvc-part6/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8cc9b-122">[![Add View](getting-started-with-mvc-part6/_static/image2.png)](getting-started-with-mvc-part6/_static/image1.png)</span></span>

<span data-ttu-id="8cc9b-123">Nachdem Sie die Schaltfläche "hinzufügen" klicken, wird \Movies\Create.aspx Ansichtenvorlage für Sie erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-123">After you click the Add button, \Movies\Create.aspx View template will be created for you.</span></span> <span data-ttu-id="8cc9b-124">Da wir "Erstellen" in der Dropdownliste "Inhalt anzeigen" ausgewählt haben, Gerüstbau"das Dialogfeld" Ansicht hinzufügen"automatisch" einige Standardinhalt für uns.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-124">Because we selected "Create" from the "view content" dropdown, the Add View dialog automatically "scaffolded" some default content for us.</span></span> <span data-ttu-id="8cc9b-125">Das Gerüst erstellt eine HTML &lt;Formular&gt;, ein Platz für Validierungsfehler zu Nachrichten, und da Gerüstbau zu Filmen bekannt ist, erstellt Bezeichnung und Felder für jede Eigenschaft der Klasse.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-125">The scaffolding created an HTML &lt;form&gt;, a place for validation error messages to go, and since scaffolding knows about Movies, it created Label and Fields for each property of our class.</span></span>

[!code-aspx[Main](getting-started-with-mvc-part6/samples/sample2.aspx)]

<span data-ttu-id="8cc9b-126">Die Datenbank automatisch einem Film eine ID gewährt hat, sehen wir entfernen, da diese Felder, Referenzmodell. Unsere Erstellungsansicht-ID:</span><span class="sxs-lookup"><span data-stu-id="8cc9b-126">Since our database automatically gives a Movie an ID, let's remove those fields that reference model.Id from our Create View.</span></span> <span data-ttu-id="8cc9b-127">Entfernen Sie die 7 Zeilen nach &lt;Legende&gt;Felder&lt;/legend&gt; wie wir nicht möchten, dass das Feld "ID" zeigen.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-127">Remove the 7 lines after &lt;legend&gt;Fields&lt;/legend&gt; as they show the ID field that we don't want.</span></span>

<span data-ttu-id="8cc9b-128">Nehmen wir jetzt erstellen Sie einen neuen Film und der Datenbank hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-128">Let's now create a new movie and add it to the database.</span></span> <span data-ttu-id="8cc9b-129">Wir führen Sie dies durch die Anwendung erneut ausführen und besuchen Sie die "/ Filme" URL, und klicken Sie auf "Erstellen" verknüpfen, um einen neuen Film hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-129">We'll do this by running the application again and visit the "/Movies" URL and click the "Create" link to add a new Movie.</span></span>

<span data-ttu-id="8cc9b-130">[![Create - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image4.png)](getting-started-with-mvc-part6/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="8cc9b-130">[![Create - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image4.png)](getting-started-with-mvc-part6/_static/image3.png)</span></span>

<span data-ttu-id="8cc9b-131">Wenn wir die Schaltfläche "erstellen" klicken, müssen wir die Daten auf diesem Formular an die /Movies/Create-Methode, die soeben erstellt wurde, zurück (über HTTP POST) gebucht.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-131">When we click the Create button, we'll be posting back (via HTTP POST) the data on this form to the /Movies/Create method that we just created.</span></span> <span data-ttu-id="8cc9b-132">Das System wird genau wie beim ist das System automatisch dauerte den Parameter "NumTimes" und "Name" aus der URL und diese an einen Parameter in einer Methode weiter oben zugeordnet wird nehmen die Felder aus einer POST-Anforderung und Zuordnen eines Objekts.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-132">Just like when the system automatically took the "numTimes" and "name " parameter out of the URL and mapped them to parameters on a method earlier, the system will automatically take the Form Fields from a POST and map them to an object.</span></span> <span data-ttu-id="8cc9b-133">In diesem Fall werden die Werte von Feldern im HTML-Format, z. B. "ReleaseDate" und "Title" automatisch in die entsprechenden Eigenschaften einer neuen Instanz eines Films abgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-133">In this case, values from fields in HTML like "ReleaseDate" and "Title" will automatically be put into the correct properties of a new instance of a Movie.</span></span>

<span data-ttu-id="8cc9b-134">Sehen wir uns die zweite Erstellungsmethode aus unserem MoviesController erneut.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-134">Let's look at the second Create method from our MoviesController again.</span></span> <span data-ttu-id="8cc9b-135">Beachten Sie, wie sie eine "Movie"-Objekt als Argument akzeptiert:</span><span class="sxs-lookup"><span data-stu-id="8cc9b-135">Notice how it takes a "Movie" object as an argument:</span></span>

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample3.cs)]

<span data-ttu-id="8cc9b-136">Dieses Movie-Objekt klicken Sie dann auf die Version [HttpPost] unsere erstellen Aktionsmethode übergeben wurde, und wir es in der Datenbank gespeichert und anschließend den Benutzer umgeleitet, an die Aktionsmethode Index(), die das gespeicherte Ergebnis in der Filmliste angezeigt:</span><span class="sxs-lookup"><span data-stu-id="8cc9b-136">This Movie object was then passed to the [HttpPost] version of our Create action method, and we saved it in the database and then redirected the user back to the Index() action method which will show the saved result in the movie list:</span></span>

<span data-ttu-id="8cc9b-137">[![Film List – Windows Internet Explorer](getting-started-with-mvc-part6/_static/image6.png)](getting-started-with-mvc-part6/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="8cc9b-137">[![Movie List - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image6.png)](getting-started-with-mvc-part6/_static/image5.png)</span></span>

<span data-ttu-id="8cc9b-138">Wir werden nicht überprüft, ob unsere Filme richtig angegeben, obwohl sind und die Datenbank wird nicht es uns ermöglichen, einen Film mit ohne Titel zu speichern.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-138">We aren't checking if our movies are correct, though, and the database won't allow us to save a movie with no Title.</span></span> <span data-ttu-id="8cc9b-139">Es wäre schön, wenn wir den Benutzer informieren könnte, der vor der Datenbank einen Fehler ausgelöst hat.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-139">It'd be nice if we could tell the user that before the database threw an error.</span></span> <span data-ttu-id="8cc9b-140">Wir müssen dies als Nächstes durchführen, indem validierungsunterstützung unsere Anwendung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="8cc9b-140">We'll do this next by adding validation support to our application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8cc9b-141">[Zurück](getting-started-with-mvc-part5.md)
> [Weiter](getting-started-with-mvc-part7.md)</span><span class="sxs-lookup"><span data-stu-id="8cc9b-141">[Previous](getting-started-with-mvc-part5.md)
[Next](getting-started-with-mvc-part7.md)</span></span>
