---
title: Hosten von ASP.NET Core unter Windows mit IIS
author: guardrex
description: Erfahren Sie, wie ASP.NET Core-Apps in Windows Server Internet Information Services (IIS) gehostet werden.
manager: wpickett
ms.author: riande
ms.custom: mvc
ms.date: 03/13/2018
ms.prod: asp.net-core
ms.technology: aspnet
ms.topic: article
uid: host-and-deploy/iis/index
ms.openlocfilehash: fa9e60c52f143b20dbf179679fc4932e838a9137
ms.sourcegitcommit: 493a215355576cfa481773365de021bcf04bb9c7
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 03/15/2018
---
# <a name="host-aspnet-core-on-windows-with-iis"></a><span data-ttu-id="3bf82-103">Hosten von ASP.NET Core unter Windows mit IIS</span><span class="sxs-lookup"><span data-stu-id="3bf82-103">Host ASP.NET Core on Windows with IIS</span></span>

<span data-ttu-id="3bf82-104">Von [Luke Latham](https://github.com/guardrex) und [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="3bf82-104">By [Luke Latham](https://github.com/guardrex) and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

## <a name="supported-operating-systems"></a><span data-ttu-id="3bf82-105">Unterstützte Betriebssysteme</span><span class="sxs-lookup"><span data-stu-id="3bf82-105">Supported operating systems</span></span>

<span data-ttu-id="3bf82-106">Die folgenden Betriebssysteme werden unterstützt:</span><span class="sxs-lookup"><span data-stu-id="3bf82-106">The following operating systems are supported:</span></span>

* <span data-ttu-id="3bf82-107">Windows 7 oder höher</span><span class="sxs-lookup"><span data-stu-id="3bf82-107">Windows 7 or later</span></span>
* <span data-ttu-id="3bf82-108">Windows Server 2008 R2 oder höher&#8224;</span><span class="sxs-lookup"><span data-stu-id="3bf82-108">Windows Server 2008 R2 or later&#8224;</span></span>

<span data-ttu-id="3bf82-109">&#8224;Vom Konzept her gilt die in diesem Dokument beschriebene IIS-Konfiguration auch für das Hosten von ASP.NET Core-Apps mit IIS unter Nano Server.</span><span class="sxs-lookup"><span data-stu-id="3bf82-109">&#8224;Conceptually, the IIS configuration described in this document also applies to hosting ASP.NET Core apps on Nano Server IIS.</span></span> <span data-ttu-id="3bf82-110">Die Anweisungen für Nano Server finden Sie im Tutorial [ASP.NET Core mit IIS auf Nano Server](xref:tutorials/nano-server).</span><span class="sxs-lookup"><span data-stu-id="3bf82-110">For instructions specific to Nano Server, see the [ASP.NET Core with IIS on Nano Server](xref:tutorials/nano-server) tutorial.</span></span>

<span data-ttu-id="3bf82-111">Der [HTTP.SYS-Server](xref:fundamentals/servers/httpsys) (zuvor [WebListener](xref:fundamentals/servers/weblistener) genannt) funktioniert nicht in einer Reverseproxykonfiguration mit IIS.</span><span class="sxs-lookup"><span data-stu-id="3bf82-111">[HTTP.sys server](xref:fundamentals/servers/httpsys) (formerly called [WebListener](xref:fundamentals/servers/weblistener)) doesn't work in a reverse proxy configuration with IIS.</span></span> <span data-ttu-id="3bf82-112">Verwenden Sie den [Kestrel-Server](xref:fundamentals/servers/kestrel).</span><span class="sxs-lookup"><span data-stu-id="3bf82-112">Use the [Kestrel server](xref:fundamentals/servers/kestrel).</span></span>

## <a name="application-configuration"></a><span data-ttu-id="3bf82-113">Anwendungskonfiguration</span><span class="sxs-lookup"><span data-stu-id="3bf82-113">Application configuration</span></span>

### <a name="enable-the-iisintegration-components"></a><span data-ttu-id="3bf82-114">Aktivieren der IISIntegration-Komponenten</span><span class="sxs-lookup"><span data-stu-id="3bf82-114">Enable the IISIntegration components</span></span>

# <a name="aspnet-core-2xtabaspnetcore2x"></a>[<span data-ttu-id="3bf82-115">ASP.NET Core 2.x</span><span class="sxs-lookup"><span data-stu-id="3bf82-115">ASP.NET Core 2.x</span></span>](#tab/aspnetcore2x)

<span data-ttu-id="3bf82-116">Eine typische *Program.cs*-Datei ruft [CreateDefaultBuilder](/dotnet/api/microsoft.aspnetcore.webhost.createdefaultbuilder) auf, um die Einrichtung eines Hosts zu starten.</span><span class="sxs-lookup"><span data-stu-id="3bf82-116">A typical *Program.cs* calls [CreateDefaultBuilder](/dotnet/api/microsoft.aspnetcore.webhost.createdefaultbuilder) to begin setting up a host.</span></span> <span data-ttu-id="3bf82-117">`CreateDefaultBuilder` konfiguriert [Kestrel](xref:fundamentals/servers/kestrel) als Webserver und aktiviert die IIS-Integration durch Konfigurierung des Basispfads und Ports für das [ASP.NET Core-Modul](xref:fundamentals/servers/aspnet-core-module):</span><span class="sxs-lookup"><span data-stu-id="3bf82-117">`CreateDefaultBuilder` configures [Kestrel](xref:fundamentals/servers/kestrel) as the web server and enables IIS integration by configuring the base path and port for the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module):</span></span>

```csharp
public static IWebHost BuildWebHost(string[] args) =>
    WebHost.CreateDefaultBuilder(args)
        ...
```

<span data-ttu-id="3bf82-118">Das ASP.NET Core-Modul generiert einen dynamischen Port, der dem Back-End-Prozess zugewiesen wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-118">The ASP.NET Core Module generates a dynamic port to assign to the back-end process.</span></span> <span data-ttu-id="3bf82-119">Die `UseIISIntegration`-Methode übernimmt diesen dynamischen Port und konfiguriert Kestrel zum Lauschen von `http://locahost:{dynamicPort}/`.</span><span class="sxs-lookup"><span data-stu-id="3bf82-119">The `UseIISIntegration` method picks up the dynamic port and configures Kestrel to listen on `http://locahost:{dynamicPort}/`.</span></span> <span data-ttu-id="3bf82-120">Dies überschreibt andere URL-Konfigurationen, z.B. Aufrufe von `UseUrls` oder [Kestrels Listen-API](xref:fundamentals/servers/kestrel#endpoint-configuration).</span><span class="sxs-lookup"><span data-stu-id="3bf82-120">This overrides other URL configurations, such as calls to `UseUrls` or [Kestrel's Listen API](xref:fundamentals/servers/kestrel#endpoint-configuration).</span></span> <span data-ttu-id="3bf82-121">Aus diesem Grund sind Aufrufe von `UseUrls` oder der `Listen`-API von Kestrel nicht erforderlich, wenn das Modul verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-121">Therefore, calls to `UseUrls` or Kestrel's `Listen` API aren't required when using the module.</span></span> <span data-ttu-id="3bf82-122">Wenn `UseUrls` oder `Listen` aufgerufen wird, lauscht Kestrel auf den Port, der bei der bei Ausführung der App ohne den IIS angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-122">If `UseUrls` or `Listen` is called, Kestrel listens on the port specified when running the app without IIS.</span></span>

# <a name="aspnet-core-1xtabaspnetcore1x"></a>[<span data-ttu-id="3bf82-123">ASP.NET Core 1.x</span><span class="sxs-lookup"><span data-stu-id="3bf82-123">ASP.NET Core 1.x</span></span>](#tab/aspnetcore1x)

<span data-ttu-id="3bf82-124">Nehmen Sie eine Abhängigkeit vom Paket [Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/) in die App-Abhängigkeiten auf.</span><span class="sxs-lookup"><span data-stu-id="3bf82-124">Include a dependency on the [Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/) package in the app's dependencies.</span></span> <span data-ttu-id="3bf82-125">Verwenden Sie Middleware für die Integration von IIS, indem Sie die Erweiterungsmethode [UseIISIntegration](/dotnet/api/microsoft.aspnetcore.hosting.webhostbuilderiisextensions.useiisintegration) zu [WebHostBuilder](/dotnet/api/microsoft.aspnetcore.hosting.webhostbuilder) hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="3bf82-125">Use IIS Integration middleware by adding the [UseIISIntegration](/dotnet/api/microsoft.aspnetcore.hosting.webhostbuilderiisextensions.useiisintegration) extension method to [WebHostBuilder](/dotnet/api/microsoft.aspnetcore.hosting.webhostbuilder):</span></span>

```csharp
var host = new WebHostBuilder()
    .UseKestrel()
    .UseIISIntegration()
    ...
```

<span data-ttu-id="3bf82-126">Sowohl [UseKestrel](/dotnet/api/microsoft.aspnetcore.hosting.webhostbuilderkestrelextensions.usekestrel) als auch [UseIISIntegration](/dotnet/api/microsoft.aspnetcore.hosting.webhostbuilderiisextensions.useiisintegration) sind erforderlich.</span><span class="sxs-lookup"><span data-stu-id="3bf82-126">Both [UseKestrel](/dotnet/api/microsoft.aspnetcore.hosting.webhostbuilderkestrelextensions.usekestrel) and [UseIISIntegration](/dotnet/api/microsoft.aspnetcore.hosting.webhostbuilderiisextensions.useiisintegration) are required.</span></span> <span data-ttu-id="3bf82-127">Ein Code, der `UseIISIntegration` aufruft, hat keinen Einfluss auf die Codeportabilität.</span><span class="sxs-lookup"><span data-stu-id="3bf82-127">Code calling `UseIISIntegration` doesn't affect code portability.</span></span> <span data-ttu-id="3bf82-128">Wenn die App nicht hinter IIS ausgeführt wird (die App wird z.B. direkt auf Kestrel ausgeführt), hat `UseIISIntegration` keine Funktion.</span><span class="sxs-lookup"><span data-stu-id="3bf82-128">If the app isn't run behind IIS (for example, the app is run directly on Kestrel), `UseIISIntegration` doesn't operate.</span></span>

<span data-ttu-id="3bf82-129">Das ASP.NET Core-Modul generiert einen dynamischen Port, der dem Back-End-Prozess zugewiesen wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-129">The ASP.NET Core Module generates a dynamic port to assign to the back-end process.</span></span> <span data-ttu-id="3bf82-130">Die `UseIISIntegration`-Methode übernimmt diesen dynamischen Port und konfiguriert Kestrel zum Lauschen von `http://locahost:{dynamicPort}/`.</span><span class="sxs-lookup"><span data-stu-id="3bf82-130">The `UseIISIntegration` method picks up the dynamic port and configures Kestrel to listen on `http://locahost:{dynamicPort}/`.</span></span> <span data-ttu-id="3bf82-131">Dies überschreibt andere URL-Konfigurationen, z.B. Aufrufe von `UseUrls`.</span><span class="sxs-lookup"><span data-stu-id="3bf82-131">This overrides other URL configurations, such as calls to `UseUrls`.</span></span> <span data-ttu-id="3bf82-132">Deshalb ist ein Aufruf von `UseUrls` nicht erforderlich, wenn das Modul verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-132">Therefore, a call to `UseUrls` isn't required when using the module.</span></span> <span data-ttu-id="3bf82-133">Wenn `UseUrls` aufgerufen wird, lauscht Kestrel auf den Port, der bei der Ausführung der App ohne den IIS angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-133">If `UseUrls` is called, Kestrel listens on the port specified when running the app without IIS.</span></span>

<span data-ttu-id="3bf82-134">Wenn `UseUrls` in einer ASP.NET Core 1.0-App aufgerufen wird, rufen Sie es **vor** Aufrufen von `UseIISIntegration` auf, damit der vom Modul konfigurierte Port nicht überschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-134">If `UseUrls` is called in an ASP.NET Core 1.0 app, call it **before** calling `UseIISIntegration` so that the module-configured port isn't overwritten.</span></span> <span data-ttu-id="3bf82-135">Diese Aufrufreihenfolge ist in ASP.NET Core 1.1 nicht erforderlich, weil die Moduleinstellung `UseUrls` überschreibt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-135">This calling order isn't required with ASP.NET Core 1.1 because the module setting overrides `UseUrls`.</span></span>

---

<span data-ttu-id="3bf82-136">Weitere Informationen zum Hosten finden Sie unter [Hosting in ASP.NET Core (Hosten in ASP.NET Core)](xref:fundamentals/hosting).</span><span class="sxs-lookup"><span data-stu-id="3bf82-136">For more information on hosting, see [Hosting in ASP.NET Core](xref:fundamentals/hosting).</span></span>

### <a name="iis-options"></a><span data-ttu-id="3bf82-137">IIS-Optionen</span><span class="sxs-lookup"><span data-stu-id="3bf82-137">IIS options</span></span>

<span data-ttu-id="3bf82-138">Um IIS-Optionen zu konfigurieren, beziehen Sie eine Dienstkonfiguration für [IISOptions](/dotnet/api/microsoft.aspnetcore.builder.iisoptions) in [ConfigureServices](/dotnet/api/microsoft.aspnetcore.hosting.istartup.configureservices) ein.</span><span class="sxs-lookup"><span data-stu-id="3bf82-138">To configure IIS options, include a service configuration for [IISOptions](/dotnet/api/microsoft.aspnetcore.builder.iisoptions) in [ConfigureServices](/dotnet/api/microsoft.aspnetcore.hosting.istartup.configureservices).</span></span> <span data-ttu-id="3bf82-139">Im folgenden Beispiel ist das Weiterleiten von Clientzertifikaten an die App zum Auffüllen von `HttpContext.Connection.ClientCertificate` deaktiviert:</span><span class="sxs-lookup"><span data-stu-id="3bf82-139">In the following example, forwarding client certificates to the app to populate `HttpContext.Connection.ClientCertificate` is disabled:</span></span>

```csharp
services.Configure<IISOptions>(options => 
{
    options.ForwardClientCertificate = false;
});
```

| <span data-ttu-id="3bf82-140">Option</span><span class="sxs-lookup"><span data-stu-id="3bf82-140">Option</span></span>                         | <span data-ttu-id="3bf82-141">Standard</span><span class="sxs-lookup"><span data-stu-id="3bf82-141">Default</span></span> | <span data-ttu-id="3bf82-142">Einstellung</span><span class="sxs-lookup"><span data-stu-id="3bf82-142">Setting</span></span> |
| ------------------------------ | :-----: | ------- |
| `AutomaticAuthentication`      | `true`  | <span data-ttu-id="3bf82-143">Bei Festlegung auf `true` legt die Middleware für die IIS-Integration den per [Windows-Authentifizierung](xref:security/authentication/windowsauth) authentifizierten `HttpContext.User` fest.</span><span class="sxs-lookup"><span data-stu-id="3bf82-143">If `true`, IIS Integration Middleware sets the `HttpContext.User` authenticated by [Windows Authentication](xref:security/authentication/windowsauth).</span></span> <span data-ttu-id="3bf82-144">Bei Festlegung auf `false` stellt die Middleware nur eine Identität für `HttpContext.User` bereit und antwortet auf explizite Anforderungen durch `AuthenticationScheme`.</span><span class="sxs-lookup"><span data-stu-id="3bf82-144">If `false`, the middleware only provides an identity for `HttpContext.User` and responds to challenges when explicitly requested by the `AuthenticationScheme`.</span></span> <span data-ttu-id="3bf82-145">Die Windows-Authentifizierung muss in IIS aktiviert sein, damit `AutomaticAuthentication` funktioniert.</span><span class="sxs-lookup"><span data-stu-id="3bf82-145">Windows Authentication must be enabled in IIS for `AutomaticAuthentication` to function.</span></span> <span data-ttu-id="3bf82-146">Weitere Informationen finden Sie im Thema [Windows-Authentifizierung](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="3bf82-146">For more information, see the [Windows Authentication](xref:security/authentication/windowsauth) topic.</span></span> |
| `AuthenticationDisplayName`    | `null`  | <span data-ttu-id="3bf82-147">Legt den Anzeigename fest, der Benutzern auf Anmeldungsseiten angezeigt wird</span><span class="sxs-lookup"><span data-stu-id="3bf82-147">Sets the display name shown to users on login pages.</span></span> |
| `ForwardClientCertificate`     | `true`  | <span data-ttu-id="3bf82-148">Wenn diese Option `true` ist und der Anforderungsheader `MS-ASPNETCORE-CLIENTCERT` vorhanden ist, wird das `HttpContext.Connection.ClientCertificate` aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-148">If `true` and the `MS-ASPNETCORE-CLIENTCERT` request header is present, the `HttpContext.Connection.ClientCertificate` is populated.</span></span> |

### <a name="webconfig-file"></a><span data-ttu-id="3bf82-149">Datei „web.config“</span><span class="sxs-lookup"><span data-stu-id="3bf82-149">web.config file</span></span>

<span data-ttu-id="3bf82-150">Mit der Datei *web.config* wird das [ASP.NET Core-Modul](xref:fundamentals/servers/aspnet-core-module) konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="3bf82-150">The *web.config* file configures the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module).</span></span> <span data-ttu-id="3bf82-151">Das Erstellen, das Transformieren und die Veröffentlichung von *web.config* erfolgt durch das .NET Core Web SDK (`Microsoft.NET.Sdk.Web`).</span><span class="sxs-lookup"><span data-stu-id="3bf82-151">Creating, transforming, and publishing *web.config* is handled by the .NET Core Web SDK (`Microsoft.NET.Sdk.Web`).</span></span> <span data-ttu-id="3bf82-152">Das SDK wird am Anfang der Projektdatei festgelegt:</span><span class="sxs-lookup"><span data-stu-id="3bf82-152">The SDK is set  at the top of the project file:</span></span>

```xml
<Project Sdk="Microsoft.NET.Sdk.Web">
```

<span data-ttu-id="3bf82-153">Wenn in der Projektdatei keine Datei namens *web.config* vorhanden ist, wird sie zur Konfiguration des [ASP.NET Core-Moduls](xref:fundamentals/servers/aspnet-core-module) mit dem richtigen *processPath*- und *arguments*-Attribut erstellt und in die [veröffentlichte Ausgabe](xref:host-and-deploy/directory-structure) verschoben.</span><span class="sxs-lookup"><span data-stu-id="3bf82-153">If a *web.config* file isn't present the project, the file is created with the correct *processPath* and *arguments* to configure the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module) and moved to [published output](xref:host-and-deploy/directory-structure).</span></span>

<span data-ttu-id="3bf82-154">Ist eine Datei namens *web.config* im Projekt vorhanden, wird sie zur Konfiguration des ASP.NET Core-Moduls mit dem richtigen *processPath*- und *arguments*-Attribut transformiert und in die veröffentlichte Ausgabe verschoben.</span><span class="sxs-lookup"><span data-stu-id="3bf82-154">If a *web.config* file is present in the project, the file is transformed with the correct *processPath* and *arguments* to configure the ASP.NET Core Module and moved to published output.</span></span> <span data-ttu-id="3bf82-155">Die Transformation ändert die IIS-Konfigurationseinstellungen in der Datei nicht.</span><span class="sxs-lookup"><span data-stu-id="3bf82-155">The transformation doesn't modify IIS configuration settings in the file.</span></span>

<span data-ttu-id="3bf82-156">Die Datei *web.config* kann zusätzliche IIS-Konfigurationseinstellungen zum Steuern der aktiven IIS-Module bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-156">The *web.config* file may provide additional IIS configuration settings that control active IIS modules.</span></span> <span data-ttu-id="3bf82-157">Informationen zu IIS-Modulen, die Anforderungen mit ASP.NET Core-Apps verarbeiten können, finden Sie im Thema [Verwenden von IIS-Modulen](xref:host-and-deploy/iis/modules).</span><span class="sxs-lookup"><span data-stu-id="3bf82-157">For information on IIS modules that are capable of processing requests with ASP.NET Core apps, see the [Using IIS modules](xref:host-and-deploy/iis/modules) topic.</span></span>

<span data-ttu-id="3bf82-158">Um zu verhindern, dass das Web-SDK die Datei *web.config* transformiert, verwenden Sie die Eigenschaft **\<IsTransformWebConfigDisabled>** in der Projektdatei:</span><span class="sxs-lookup"><span data-stu-id="3bf82-158">To prevent the Web SDK from transforming the *web.config* file, use the **\<IsTransformWebConfigDisabled>** property in the project file:</span></span>

```xml
<PropertyGroup>
  <IsTransformWebConfigDisabled>true</IsTransformWebConfigDisabled>
</PropertyGroup>
```

<span data-ttu-id="3bf82-159">Wenn die Transformation der Datei durch das Web-SDK deaktiviert wird, müssen die Attribute *processPath* und *arguments* manuell durch den Entwickler festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="3bf82-159">When disabling the Web SDK from transforming the file, the *processPath* and *arguments* should be manually set by the developer.</span></span> <span data-ttu-id="3bf82-160">Weitere Informationen finden Sie unter [Konfigurationsreferenz für das ASP.NET Core-Modul](xref:host-and-deploy/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="3bf82-160">For more information, see the [ASP.NET Core Module configuration reference](xref:host-and-deploy/aspnet-core-module).</span></span>

### <a name="webconfig-file-location"></a><span data-ttu-id="3bf82-161">Speicherort der Datei „web.config“</span><span class="sxs-lookup"><span data-stu-id="3bf82-161">web.config file location</span></span>

<span data-ttu-id="3bf82-162">.NET Core-Apps werden in einem Reverseproxy zwischen IIS und dem Kestrel-Server gehostet.</span><span class="sxs-lookup"><span data-stu-id="3bf82-162">ASP.NET Core apps are hosted in a reverse proxy between IIS and the Kestrel server.</span></span> <span data-ttu-id="3bf82-163">Zum Erstellen des Reverseproxys muss die Datei *web.config* im Stammpfad des Inhalts (normalerweise dem App-Basispfad) der bereitgestellten App vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="3bf82-163">In order to create the reverse proxy, the *web.config* file must be present at the content root path (typically the app base path) of the deployed app.</span></span> <span data-ttu-id="3bf82-164">Dies ist der physische Pfad der Website, der in IIS bereitgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="3bf82-164">This is the same location as the website physical path provided to IIS.</span></span> <span data-ttu-id="3bf82-165">Die Datei *Web.config* wird im Stammverzeichnis der App benötigt, um die Veröffentlichung mehrerer Apps mit Web Deploy zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-165">The *web.config* file is required at the root of the app to enable the publishing of multiple apps using Web Deploy.</span></span>

<span data-ttu-id="3bf82-166">Im physischen Pfad der App sind vertrauliche Dateien vorhanden, wie z.B. *\<assembly_name>.runtimeconfig.json*, *\<assembly_name>.xml* (XML-Dokumentationskommentare) und *\<assembly_name>.deps.json*.</span><span class="sxs-lookup"><span data-stu-id="3bf82-166">Sensitive files exist on the app's physical path, such as *\<assembly>.runtimeconfig.json*, *\<assembly>.xml* (XML Documentation comments), and *\<assembly>.deps.json*.</span></span> <span data-ttu-id="3bf82-167">Wenn die Datei *web.config* vorhanden ist und die Website normal startet, werden diese vertraulichen Dateien von IIS bei Anforderung nicht offengelegt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-167">When the *web.config* file is present and and the site starts normally, IIS doesn't serve these sensitive files if they're requested.</span></span> <span data-ttu-id="3bf82-168">Wenn die Datei *web.config* fehlt, falsch benannt wurde oder die Website nicht für den normalen Start konfigurieren kann, macht IIS vertrauliche Dateien möglicherweise öffentlich verfügbar.</span><span class="sxs-lookup"><span data-stu-id="3bf82-168">If the *web.config* file is missing, incorrectly named, or unable to configure the site for normal startup, IIS may serve sensitive files publicly.</span></span>

<span data-ttu-id="3bf82-169">**Die Datei *web.config* muss immer in der Bereitstellung vorhanden, richtig benannt und in der Lage sein, die Website für einen normalen Start zu konfigurieren. Entfernen Sie die Datei *web.config* niemals aus einer Produktionsbereitstellung.**</span><span class="sxs-lookup"><span data-stu-id="3bf82-169">**The *web.config* file must be present in the deployment at all times, correctly named, and able to configure the site for normal start up. Never remove the *web.config* file from a production deployment.**</span></span>

## <a name="iis-configuration"></a><span data-ttu-id="3bf82-170">IIS-Konfiguration</span><span class="sxs-lookup"><span data-stu-id="3bf82-170">IIS configuration</span></span>

<span data-ttu-id="3bf82-171">**Windows Server-Betriebssysteme**</span><span class="sxs-lookup"><span data-stu-id="3bf82-171">**Windows Server operating systems**</span></span>

<span data-ttu-id="3bf82-172">Aktivieren Sie die Serverrolle **Webserver (IIS)**, und richten Sie Rollendienste ein.</span><span class="sxs-lookup"><span data-stu-id="3bf82-172">Enable the **Web Server (IIS)** server role and establish role services.</span></span>

1. <span data-ttu-id="3bf82-173">Verwenden Sie den Assistenten **Rollen und Features hinzufügen** im Menü **Verwalten** oder den Link in **Server-Manager**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-173">Use the **Add Roles and Features** wizard from the **Manage** menu or the link in **Server Manager**.</span></span> <span data-ttu-id="3bf82-174">Aktivieren Sie im Schritt **Serverrollen** das Kontrollkästchen für **Webserver (IIS)**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-174">On the **Server Roles** step, check the box for **Web Server (IIS)**.</span></span>

   ![Die Rolle „Webserver (IIS)“ wird im Schritt „Serverrollen auswählen“ ausgewählt.](index/_static/server-roles-ws2016.png)

1. <span data-ttu-id="3bf82-176">Nach dem Schritt **Features** wird der Schritt **Rollendienste** für Webserver (IIS) geladen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-176">After the **Features** step, the **Role services** step loads for Web Server (IIS).</span></span> <span data-ttu-id="3bf82-177">Wählen Sie die gewünschten IIS-Rollendienste aus, oder übernehmen Sie die bereitgestellten Standardrollendienste.</span><span class="sxs-lookup"><span data-stu-id="3bf82-177">Select the IIS role services desired or accept the default role services provided.</span></span>

   ![Die Standardrollendienste werden im Schritt „Rollendienste auswählen“ ausgewählt.](index/_static/role-services-ws2016.png)

   <span data-ttu-id="3bf82-179">**Windows-Authentifizierung (optional)**</span><span class="sxs-lookup"><span data-stu-id="3bf82-179">**Windows Authentication (Optional)**</span></span>  
   <span data-ttu-id="3bf82-180">Um die Windows-Authentifizierung zu aktivieren, erweitern Sie die folgenden Knoten: **Webserver** > **Sicherheit**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-180">To enable Windows Authentication, expand the following nodes: **Web Server** > **Security**.</span></span> <span data-ttu-id="3bf82-181">Wählen Sie das Feature **Windows-Authentifizierung** aus.</span><span class="sxs-lookup"><span data-stu-id="3bf82-181">Select the **Windows Authentication** feature.</span></span> <span data-ttu-id="3bf82-182">Weitere Informationen finden Sie unter [Windows-Authentifizierung \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) und [Konfigurieren der Windows-Authentifizierung](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="3bf82-182">For more information, see [Windows Authentication \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) and [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

   <span data-ttu-id="3bf82-183">**WebSockets (optional)**</span><span class="sxs-lookup"><span data-stu-id="3bf82-183">**WebSockets (Optional)**</span></span>  
   <span data-ttu-id="3bf82-184">WebSockets wird mit ASP.NET Core 1.1 oder höher unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-184">WebSockets is supported with ASP.NET Core 1.1 or later.</span></span> <span data-ttu-id="3bf82-185">Um WebSockets zu aktivieren, erweitern Sie die folgenden Knoten: **Webserver** > **Anwendungsentwicklung**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-185">To enable WebSockets, expand the following nodes: **Web Server** > **Application Development**.</span></span> <span data-ttu-id="3bf82-186">Wählen Sie das Feature **WebSocket-Protokoll** aus.</span><span class="sxs-lookup"><span data-stu-id="3bf82-186">Select the **WebSocket Protocol** feature.</span></span> <span data-ttu-id="3bf82-187">Weitere Informationen finden Sie unter [WebSockets](xref:fundamentals/websockets).</span><span class="sxs-lookup"><span data-stu-id="3bf82-187">For more information, see [WebSockets](xref:fundamentals/websockets).</span></span>

1. <span data-ttu-id="3bf82-188">Fahren Sie mit dem Schritt **Bestätigung** fort, um die Webserverrolle und die Dienste zu installieren.</span><span class="sxs-lookup"><span data-stu-id="3bf82-188">Proceed through the **Confirmation** step to install the web server role and services.</span></span> <span data-ttu-id="3bf82-189">Ein Server-/IIS-Neustart ist nach der Installation der Rolle **Webserver (IIS)** nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="3bf82-189">A server/IIS restart isn't required after installing the **Web Server (IIS)** role.</span></span>

<span data-ttu-id="3bf82-190">**Windows-Desktopbetriebssysteme**</span><span class="sxs-lookup"><span data-stu-id="3bf82-190">**Windows desktop operating systems**</span></span>

<span data-ttu-id="3bf82-191">Aktivieren Sie die **IIS-Verwaltungskonsole** und die **WWW-Dienste**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-191">Enable the **IIS Management Console** and **World Wide Web Services**.</span></span>

1. <span data-ttu-id="3bf82-192">Navigieren Sie zu **Systemsteuerung** > **Programme** > **Programme und Features** > **Windows-Features aktivieren oder deaktivieren** (links auf dem Bildschirm).</span><span class="sxs-lookup"><span data-stu-id="3bf82-192">Navigate to **Control Panel** > **Programs** > **Programs and Features** > **Turn Windows features on or off** (left side of the screen).</span></span>

1. <span data-ttu-id="3bf82-193">Öffnen Sie den Knoten **Internetinformationsdienste**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-193">Open the **Internet Information Services** node.</span></span> <span data-ttu-id="3bf82-194">Öffnen Sie den Knoten **Webverwaltungstools**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-194">Open the **Web Management Tools** node.</span></span>

1. <span data-ttu-id="3bf82-195">Aktivieren Sie das Kontrollkästchen für **IIS-Verwaltungskonsole**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-195">Check the box for **IIS Management Console**.</span></span>

1. <span data-ttu-id="3bf82-196">Aktivieren Sie das Kontrollkästchen für **WWW-Dienste**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-196">Check the box for **World Wide Web Services**.</span></span>

1. <span data-ttu-id="3bf82-197">Akzeptieren Sie die Standardfeatures für **WWW-Dienste**, oder passen Sie die IIS-Features an.</span><span class="sxs-lookup"><span data-stu-id="3bf82-197">Accept the default features for **World Wide Web Services** or customize the IIS features.</span></span>

   <span data-ttu-id="3bf82-198">**Windows-Authentifizierung (optional)**</span><span class="sxs-lookup"><span data-stu-id="3bf82-198">**Windows Authentication (Optional)**</span></span>  
   <span data-ttu-id="3bf82-199">Um die Windows-Authentifizierung zu aktivieren, erweitern Sie die folgenden Knoten: **WWW-Dienste** > **Sicherheit**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-199">To enable Windows Authentication, expand the following nodes: **World Wide Web Services** > **Security**.</span></span> <span data-ttu-id="3bf82-200">Wählen Sie das Feature **Windows-Authentifizierung** aus.</span><span class="sxs-lookup"><span data-stu-id="3bf82-200">Select the **Windows Authentication** feature.</span></span> <span data-ttu-id="3bf82-201">Weitere Informationen finden Sie unter [Windows-Authentifizierung \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) und [Konfigurieren der Windows-Authentifizierung](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="3bf82-201">For more information, see [Windows Authentication \<windowsAuthentication>](/iis/configuration/system.webServer/security/authentication/windowsAuthentication/) and [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

   <span data-ttu-id="3bf82-202">**WebSockets (optional)**</span><span class="sxs-lookup"><span data-stu-id="3bf82-202">**WebSockets (Optional)**</span></span>  
   <span data-ttu-id="3bf82-203">WebSockets wird mit ASP.NET Core 1.1 oder höher unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-203">WebSockets is supported with ASP.NET Core 1.1 or later.</span></span> <span data-ttu-id="3bf82-204">Um WebSockets zu aktivieren, erweitern Sie die folgenden Knoten: **WWW-Dienste** > **Anwendungsentwicklungsfeatures**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-204">To enable WebSockets, expand the following nodes: **World Wide Web Services** > **Application Development Features**.</span></span> <span data-ttu-id="3bf82-205">Wählen Sie das Feature **WebSocket-Protokoll** aus.</span><span class="sxs-lookup"><span data-stu-id="3bf82-205">Select the **WebSocket Protocol** feature.</span></span> <span data-ttu-id="3bf82-206">Weitere Informationen finden Sie unter [WebSockets](xref:fundamentals/websockets).</span><span class="sxs-lookup"><span data-stu-id="3bf82-206">For more information, see [WebSockets](xref:fundamentals/websockets).</span></span>

1. <span data-ttu-id="3bf82-207">Wenn die IIS-Installation einen Neustart erfordert, starten Sie das System neu.</span><span class="sxs-lookup"><span data-stu-id="3bf82-207">If the IIS installation requires a restart, restart the system.</span></span>

![Die IIS-Verwaltungskonsole und WWW-Dienste werden in Windows-Features ausgewählt.](index/_static/windows-features-win10.png)

---

## <a name="install-the-net-core-windows-server-hosting-bundle"></a><span data-ttu-id="3bf82-209">Installieren des Pakets „.NET Core Windows Server Hosting“</span><span class="sxs-lookup"><span data-stu-id="3bf82-209">Install the .NET Core Windows Server Hosting bundle</span></span>

1. <span data-ttu-id="3bf82-210">Installieren Sie das [Paket „.NET Core Windows Server Hosting“](https://aka.ms/dotnetcore-2-windowshosting) im Hostsystem.</span><span class="sxs-lookup"><span data-stu-id="3bf82-210">Install the [.NET Core Windows Server Hosting bundle](https://aka.ms/dotnetcore-2-windowshosting) on the hosting system.</span></span> <span data-ttu-id="3bf82-211">Das Paket installiert die .NET Core-Runtime, die .NET Core-Bibliothek und das [ASP.NET Core-Modul](xref:fundamentals/servers/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="3bf82-211">The bundle installs the .NET Core Runtime, .NET Core Library, and the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module).</span></span> <span data-ttu-id="3bf82-212">Das Modul erstellt den Reverseproxy zwischen IIS und dem Kestrel-Server.</span><span class="sxs-lookup"><span data-stu-id="3bf82-212">The module creates the reverse proxy between IIS and the Kestrel server.</span></span> <span data-ttu-id="3bf82-213">Wenn das System nicht über eine Internetverbindung verfügt, beziehen und installieren Sie [Microsoft Visual C++ 2015 Redistributable](https://www.microsoft.com/download/details.aspx?id=53840), bevor Sie das Paket „.NET Core Windows Server Hosting“ installieren.</span><span class="sxs-lookup"><span data-stu-id="3bf82-213">If the system doesn't have an Internet connection, obtain and install the [Microsoft Visual C++ 2015 Redistributable](https://www.microsoft.com/download/details.aspx?id=53840) before installing the .NET Core Windows Server Hosting bundle.</span></span>

   <span data-ttu-id="3bf82-214">**Wichtig**</span><span class="sxs-lookup"><span data-stu-id="3bf82-214">**Important!**</span></span> <span data-ttu-id="3bf82-215">Wenn das Hostingpaket vor IIS installiert wird, muss die Paketinstallation repariert werden.</span><span class="sxs-lookup"><span data-stu-id="3bf82-215">If the hosting bundle is installed before IIS, the bundle installation must be repaired.</span></span> <span data-ttu-id="3bf82-216">Führen Sie nach der Installation von IIS erneut das Hostingpaket aus.</span><span class="sxs-lookup"><span data-stu-id="3bf82-216">Run the hosting bundle installer again after installing IIS.</span></span>
   
   <span data-ttu-id="3bf82-217">Damit das Installationsprogramm in einem x64-Betriebssystem keine x86-Pakete installiert, führen Sie das Installationsprogramm über eine Administratoreingabeaufforderung mit dem Switch `OPT_NO_X86=1` aus.</span><span class="sxs-lookup"><span data-stu-id="3bf82-217">To prevent the installer from installing x86 packages on an x64 OS, run the installer from an administrator command prompt with the switch `OPT_NO_X86=1`.</span></span>

1. <span data-ttu-id="3bf82-218">Starten Sie das System neu, oder führen Sie **net stop was /y** gefolgt von **net start w3svc** über eine Eingabeaufforderung aus.</span><span class="sxs-lookup"><span data-stu-id="3bf82-218">Restart the system or execute **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span> <span data-ttu-id="3bf82-219">Durch den Neustart von IIS wird eine Änderung an der PATH-Systemeinstellung durch den Installer vorgenommen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-219">Restarting IIS picks up a change to the system PATH made by the installer.</span></span>

> [!NOTE]
> <span data-ttu-id="3bf82-220">Informationen zur Verwendung einer IIS-Freigabekonfiguration finden Sie unter [ASP.NET Core-Modul mit IIS-Freigabekonfiguration](xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span><span class="sxs-lookup"><span data-stu-id="3bf82-220">For information on IIS Shared Configuration, see [ASP.NET Core Module with IIS Shared Configuration](xref:host-and-deploy/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span></span>

## <a name="install-web-deploy-when-publishing-with-visual-studio"></a><span data-ttu-id="3bf82-221">Installieren von Web Deploy beim Veröffentlichen mit Visual Studio</span><span class="sxs-lookup"><span data-stu-id="3bf82-221">Install Web Deploy when publishing with Visual Studio</span></span>

<span data-ttu-id="3bf82-222">Wenn Sie Apps auf Servern mit [Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) bereitstellen, installieren Sie die neueste Version von Web Deploy auf dem Server.</span><span class="sxs-lookup"><span data-stu-id="3bf82-222">When deploying apps to servers with [Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy), install the latest version of Web Deploy on the server.</span></span> <span data-ttu-id="3bf82-223">Um Web Deploy zu installieren, verwenden Sie den [Webplattform-Installer (Web PI)](https://www.microsoft.com/web/downloads/platform.aspx) oder rufen einen Installer direkt aus dem [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=43717) ab.</span><span class="sxs-lookup"><span data-stu-id="3bf82-223">To install Web Deploy, use the [Web Platform Installer (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) or obtain an installer directly from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=43717).</span></span> <span data-ttu-id="3bf82-224">Die bevorzugte Methode ist die Verwendung von WebPI.</span><span class="sxs-lookup"><span data-stu-id="3bf82-224">The preferred method is to use WebPI.</span></span> <span data-ttu-id="3bf82-225">WebPI bietet ein eigenständiges Setup und eine Konfiguration für Hostinganbieter.</span><span class="sxs-lookup"><span data-stu-id="3bf82-225">WebPI offers a standalone setup and a configuration for hosting providers.</span></span>

## <a name="create-the-iis-site"></a><span data-ttu-id="3bf82-226">Erstellen der IIS-Website</span><span class="sxs-lookup"><span data-stu-id="3bf82-226">Create the IIS site</span></span>

1. <span data-ttu-id="3bf82-227">Erstellen Sie auf dem Hostingsystem einen Ordner zum Speichern der veröffentlichten Ordner und Dateien der App.</span><span class="sxs-lookup"><span data-stu-id="3bf82-227">On the hosting system, create a folder to contain the app's published folders and files.</span></span> <span data-ttu-id="3bf82-228">Das Layout der App-Bereitstellung wird im Thema [Verzeichnisstruktur](xref:host-and-deploy/directory-structure) beschrieben.</span><span class="sxs-lookup"><span data-stu-id="3bf82-228">An app's deployment layout is described in the [Directory Structure](xref:host-and-deploy/directory-structure) topic.</span></span>

1. <span data-ttu-id="3bf82-229">Erstellen Sie innerhalb des neuen Ordners einen Ordner *Protokolle*, um darin stdout-Protokolle von ASP.NET Core zu speichern, wenn die stdout-Protokollierung aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="3bf82-229">Within the new folder, create a *logs* folder to hold ASP.NET Core Module stdout logs when stdout logging is enabled.</span></span> <span data-ttu-id="3bf82-230">Wenn die App mit einem Ordner *Protokolle* in der Payload bereitgestellt wird, können Sie diesen Schritt überspringen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-230">If the app is deployed with a *logs* folder in the payload, skip this step.</span></span> <span data-ttu-id="3bf82-231">Anweisungen zum Aktivieren von MSBuild zum automatischen Erstellen des Ordners *Protokolle* bei der Erstellung des lokalen Projekts finden Sie im Thema zur [Verzeichnisstruktur](xref:host-and-deploy/directory-structure).</span><span class="sxs-lookup"><span data-stu-id="3bf82-231">For instructions on how to enable MSBuild to create the *logs* folder automatically when the project is built locally, see the [Directory structure](xref:host-and-deploy/directory-structure) topic.</span></span>

   <span data-ttu-id="3bf82-232">**Wichtig**</span><span class="sxs-lookup"><span data-stu-id="3bf82-232">**Important!**</span></span> <span data-ttu-id="3bf82-233">Verwenden Sie das stdout-Protokoll, um Probleme beim App-Start zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="3bf82-233">Only use the stdout log to troubleshoot app startup failures.</span></span> <span data-ttu-id="3bf82-234">Verwenden Sie die stdout-Protokollierung nicht für die routinemäßige App-Protokollierung.</span><span class="sxs-lookup"><span data-stu-id="3bf82-234">Never use stdout logging for routine app logging.</span></span> <span data-ttu-id="3bf82-235">Für die Protokollgröße oder die Anzahl von erstellten Protokolldateien ist kein Grenzwert festgelegt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-235">There's no limit on log file size or the number of log files created.</span></span> <span data-ttu-id="3bf82-236">Weitere Informationen zum stdout-Protokoll finden Sie im Thema zur [Protokollerstellung und Umleitung](xref:host-and-deploy/aspnet-core-module#log-creation-and-redirection).</span><span class="sxs-lookup"><span data-stu-id="3bf82-236">For more information on the stdout log, see [Log creation and redirection](xref:host-and-deploy/aspnet-core-module#log-creation-and-redirection).</span></span> <span data-ttu-id="3bf82-237">Informationen zur Protokollierung in einer ASP.NET Core-App finden Sie im Thema [Protokollierung](xref:fundamentals/logging/index).</span><span class="sxs-lookup"><span data-stu-id="3bf82-237">For information on logging in an ASP.NET Core app, see the [Logging](xref:fundamentals/logging/index) topic.</span></span>

1. <span data-ttu-id="3bf82-238">Öffnen Sie im **IIS-Manager** den Serverknoten im Bereich **Verbindungen**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-238">In **IIS Manager**, open the server's node in the **Connections** panel.</span></span> <span data-ttu-id="3bf82-239">Klicken Sie mit der rechten Maustaste auf den Ordner **Websites**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-239">Right-click the **Sites** folder.</span></span> <span data-ttu-id="3bf82-240">Klicken Sie im Kontextmenü auf **Website hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-240">Select **Add Website** from the contextual menu.</span></span>

1. <span data-ttu-id="3bf82-241">Geben Sie einen **Websitenamen** an, und legen Sie den **physischen Pfad** auf den Bereitstellungsordner der App fest.</span><span class="sxs-lookup"><span data-stu-id="3bf82-241">Provide a **Site name** and set the **Physical path** to the app's deployment folder.</span></span> <span data-ttu-id="3bf82-242">Geben Sie die Konfiguration unter **Bindung** an, und erstellen Sie die Website, indem Sie auf **OK** klicken:</span><span class="sxs-lookup"><span data-stu-id="3bf82-242">Provide the **Binding** configuration and create the website by selecting **OK**:</span></span>

   ![Geben Sie den Websitenamen, den physischen Pfad und den Hostnamen im Schritt „Website hinzufügen“ an.](index/_static/add-website-ws2016.png)

   > [!WARNING]
   > <span data-ttu-id="3bf82-244">Allgemeine Platzhalterbindungen (`http://*:80/` und `http://+:80`) dürfen **nicht** verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="3bf82-244">Top-level wildcard bindings (`http://*:80/` and `http://+:80`) should **not** be used.</span></span> <span data-ttu-id="3bf82-245">Platzhalterbindungen auf oberster Ebene gefährden die Sicherheit Ihrer App.</span><span class="sxs-lookup"><span data-stu-id="3bf82-245">Top-level wildcard bindings can open up your app to security vulnerabilities.</span></span> <span data-ttu-id="3bf82-246">Dies gilt für starke und schwache Platzhalter.</span><span class="sxs-lookup"><span data-stu-id="3bf82-246">This applies to both strong and weak wildcards.</span></span> <span data-ttu-id="3bf82-247">Verwenden Sie statt Platzhaltern explizite Hostnamen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-247">Use explicit host names rather than wildcards.</span></span> <span data-ttu-id="3bf82-248">Platzhalterbindungen in untergeordneten Domänen (z.B. `*.mysub.com`) verursachen kein Sicherheitsrisiko, wenn Sie die gesamte übergeordnete Domäne steuern (im Gegensatz zu `*.com`, das angreifbar ist).</span><span class="sxs-lookup"><span data-stu-id="3bf82-248">Subdomain wildcard binding (for example, `*.mysub.com`) doesn't have this security risk if you control the entire parent domain (as opposed to `*.com`, which is vulnerable).</span></span> <span data-ttu-id="3bf82-249">Weitere Informationen finden Sie unter [rfc7230 im Abschnitt 5.4](https://tools.ietf.org/html/rfc7230#section-5.4).</span><span class="sxs-lookup"><span data-stu-id="3bf82-249">See [rfc7230 section-5.4](https://tools.ietf.org/html/rfc7230#section-5.4) for more information.</span></span>

1. <span data-ttu-id="3bf82-250">Wählen Sie unter dem Serverknoten **Anwendungspools** aus.</span><span class="sxs-lookup"><span data-stu-id="3bf82-250">Under the server's node, select **Application Pools**.</span></span>

1. <span data-ttu-id="3bf82-251">Klicken Sie mit der rechten Maustaste auf den App-Pool der Website, und wählen Sie im Kontextmenü **Grundeinstellungen** aus.</span><span class="sxs-lookup"><span data-stu-id="3bf82-251">Right-click the site's app pool and select **Basic Settings** from the contextual menu.</span></span>

1. <span data-ttu-id="3bf82-252">Legen Sie im Fenster **Anwendungspool bearbeiten** die **.NET CLR-Version** auf **Kein verwalteter Code** fest:</span><span class="sxs-lookup"><span data-stu-id="3bf82-252">In the **Edit Application Pool** window, set the **.NET CLR version** to **No Managed Code**:</span></span>

   ![Legen Sie „Kein verwalteter Code“ für die .NET CLR-Version fest.](index/_static/edit-apppool-ws2016.png)

    <span data-ttu-id="3bf82-254">ASP.NET Core wird in einem separaten Prozess ausgeführt und verwaltet die Runtime.</span><span class="sxs-lookup"><span data-stu-id="3bf82-254">ASP.NET Core runs in a separate process and manages the runtime.</span></span> <span data-ttu-id="3bf82-255">Für ASP.NET Core ist das Laden der Desktop-CLR nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="3bf82-255">ASP.NET Core doesn't rely on loading the desktop CLR.</span></span> <span data-ttu-id="3bf82-256">Das Festlegen der **.NET CLR-Version** auf **Kein verwalteter Code** ist optional.</span><span class="sxs-lookup"><span data-stu-id="3bf82-256">Setting the **.NET CLR version** to **No Managed Code** is optional.</span></span>

1. <span data-ttu-id="3bf82-257">Vergewissern Sie sich, dass die Prozessmodellidentität über die richtigen Berechtigungen verfügt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-257">Confirm the process model identity has the proper permissions.</span></span>

   <span data-ttu-id="3bf82-258">Wenn die Standardidentität des App-Pools (**Prozessmodell** > **Identität**) von **ApplicationPoolIdentity** in eine andere Identität geändert wird, stellen Sie sicher, dass die neue Identität über die erforderlichen Berechtigungen zum Zugriff auf den Ordner, die Datenbank und andere erforderliche Ressourcen der App verfügt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-258">If the default identity of the app pool (**Process Model** > **Identity**) is changed from **ApplicationPoolIdentity** to another identity, verify that the new identity has the required permissions to access the app's folder, database, and other required resources.</span></span> <span data-ttu-id="3bf82-259">Der App-Pool benötigt beispielsweise Lese- und Schreibzugriff für Ordner, in denen die App Lese- und Schreibvorgänge für Dateien ausführt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-259">For example, the app pool requires read and write access to folders where the app reads and writes files.</span></span>

<span data-ttu-id="3bf82-260">**Konfigurieren der Windows-Authentifizierung (optional)**</span><span class="sxs-lookup"><span data-stu-id="3bf82-260">**Windows Authentication configuration (Optional)**</span></span>  
<span data-ttu-id="3bf82-261">Weitere Informationen finden Sie unter [Konfigurieren der Windows-Authentifizierung](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="3bf82-261">For more information, see [Configure Windows authentication](xref:security/authentication/windowsauth).</span></span>

## <a name="deploy-the-app"></a><span data-ttu-id="3bf82-262">Bereitstellen der App</span><span class="sxs-lookup"><span data-stu-id="3bf82-262">Deploy the app</span></span>

<span data-ttu-id="3bf82-263">Stellen Sie die App in dem Ordner bereit, den Sie im Hostingsystem erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="3bf82-263">Deploy the app to the folder created on the hosting system.</span></span> <span data-ttu-id="3bf82-264">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) ist die empfohlene Methode zur Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="3bf82-264">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) is the recommended mechanism for deployment.</span></span>

### <a name="web-deploy-with-visual-studio"></a><span data-ttu-id="3bf82-265">Web Deploy mit Visual Studio</span><span class="sxs-lookup"><span data-stu-id="3bf82-265">Web Deploy with Visual Studio</span></span>

<span data-ttu-id="3bf82-266">Informationen zum Erstellen eines Veröffentlichungsprofils zur Verwendung mit Web Deploy finden Sie im Thema [Visual Studio publish profiles for ASP.NET Core app deployment (Visual Studio-Veröffentlichungsprofile zum Bereitstellen von ASP.NET Core-Apps)](xref:host-and-deploy/visual-studio-publish-profiles#publish-profiles).</span><span class="sxs-lookup"><span data-stu-id="3bf82-266">See the [Visual Studio publish profiles for ASP.NET Core app deployment](xref:host-and-deploy/visual-studio-publish-profiles#publish-profiles) topic to learn how to create a publish profile for use with Web Deploy.</span></span> <span data-ttu-id="3bf82-267">Wenn der Hostinganbieter ein Veröffentlichungsprofil oder Unterstützung für das Erstellen eines solchen Profils bereitstellt, laden Sie dessen Profil herunter, und importieren Sie es mithilfe des Visual Studio-Dialogfelds **Veröffentlichen**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-267">If the hosting provider provides a Publish Profile or support for creating one, download their profile and import it using the Visual Studio **Publish** dialog.</span></span>

![Dialogfeld „Veröffentlichen“](index/_static/pub-dialog.png)

### <a name="web-deploy-outside-of-visual-studio"></a><span data-ttu-id="3bf82-269">Web Deploy außerhalb von Visual Studio</span><span class="sxs-lookup"><span data-stu-id="3bf82-269">Web Deploy outside of Visual Studio</span></span>

<span data-ttu-id="3bf82-270">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) kann über die Befehlszeile auch außerhalb von Visual Studio verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="3bf82-270">[Web Deploy](/iis/publish/using-web-deploy/introduction-to-web-deploy) can also be used outside of Visual Studio from the command line.</span></span> <span data-ttu-id="3bf82-271">Weitere Informationen finden Sie unter [Web Deployment Tool](/iis/publish/using-web-deploy/use-the-web-deployment-tool) (Webbereitstellungstool).</span><span class="sxs-lookup"><span data-stu-id="3bf82-271">For more information, see [Web Deployment Tool](/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span></span>

### <a name="alternatives-to-web-deploy"></a><span data-ttu-id="3bf82-272">Alternativen zu Web Deploy</span><span class="sxs-lookup"><span data-stu-id="3bf82-272">Alternatives to Web Deploy</span></span>

<span data-ttu-id="3bf82-273">Verwenden Sie eine der folgenden Methoden, um die App zum Hostingsystem zu migrieren: manuelles Kopieren, XCopy, Robocopy oder PowerShell.</span><span class="sxs-lookup"><span data-stu-id="3bf82-273">Use any of several methods to move the app to the hosting system, such as manual copy, Xcopy, Robocopy, or PowerShell.</span></span>

## <a name="browse-the-website"></a><span data-ttu-id="3bf82-274">Navigieren auf der Website</span><span class="sxs-lookup"><span data-stu-id="3bf82-274">Browse the website</span></span>

![Der Microsoft Edge-Browser hat die IIS-Startseite geladen.](index/_static/browsewebsite.png)

## <a name="locked-deployment-files"></a><span data-ttu-id="3bf82-276">Gesperrte Bereitstellungsdateien</span><span class="sxs-lookup"><span data-stu-id="3bf82-276">Locked deployment files</span></span>

<span data-ttu-id="3bf82-277">Die Dateien im Bereitstellungsordner werden gesperrt, wenn die App ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-277">Files in the deployment folder are locked when the app is running.</span></span> <span data-ttu-id="3bf82-278">Gesperrte Dateien können während der Bereitstellung nicht überschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="3bf82-278">Locked files can't be overwritten during deployment.</span></span> <span data-ttu-id="3bf82-279">Um gesperrte Dateien in einer Bereitstellung freizugeben, beenden Sie den App-Pool mit **einer** der folgenden Methoden:</span><span class="sxs-lookup"><span data-stu-id="3bf82-279">To release locked files in a deployment, stop the app pool using **one** of the following approaches:</span></span>

* <span data-ttu-id="3bf82-280">Verwenden Sie Web Deploy, und verweisen Sie auf `Microsoft.NET.Sdk.Web` in der Projektdatei.</span><span class="sxs-lookup"><span data-stu-id="3bf82-280">Use Web Deploy and reference `Microsoft.NET.Sdk.Web` in the project file.</span></span> <span data-ttu-id="3bf82-281">Eine Datei namens *app_offline.htm* befindet sich im Stammverzeichnis des Web-App-Verzeichnisses.</span><span class="sxs-lookup"><span data-stu-id="3bf82-281">An *app_offline.htm* file is placed at the root of the web app directory.</span></span> <span data-ttu-id="3bf82-282">Wenn die Datei vorhanden ist, fährt das ASP.NET Core Module die App ordnungsgemäß herunter und verarbeitet die Datei *app_offline.htm* während der Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="3bf82-282">When the file is present, the ASP.NET Core Module gracefully shuts down the app and serves the *app_offline.htm* file during the deployment.</span></span> <span data-ttu-id="3bf82-283">Weitere Informationen finden Sie unter [Konfigurationsreferenz für das ASP.NET Core-Modul](xref:host-and-deploy/aspnet-core-module#appofflinehtm).</span><span class="sxs-lookup"><span data-stu-id="3bf82-283">For more information, see the [ASP.NET Core Module configuration reference](xref:host-and-deploy/aspnet-core-module#appofflinehtm).</span></span>
* <span data-ttu-id="3bf82-284">Beenden Sie den App-Pool im IIS-Manager auf dem Server manuell.</span><span class="sxs-lookup"><span data-stu-id="3bf82-284">Manually stop the app pool in the IIS Manager on the server.</span></span>
* <span data-ttu-id="3bf82-285">Verwenden Sie PowerShell, um den App-Pool zu beenden und neu zu starten (erfordert PowerShell 5 oder höher):</span><span class="sxs-lookup"><span data-stu-id="3bf82-285">Use PowerShell to stop and restart the app pool (requires PowerShell 5 or later):</span></span>

  ```PowerShell
  $webAppPoolName = 'APP_POOL_NAME'

  # Stop the AppPool
  if((Get-WebAppPoolState $webAppPoolName).Value -ne 'Stopped') {
      Stop-WebAppPool -Name $webAppPoolName
      while((Get-WebAppPoolState $webAppPoolName).Value -ne 'Stopped') {
          Start-Sleep -s 1
      }
      Write-Host `-AppPool Stopped
  }

  # Provide script commands here to deploy the app

  # Restart the AppPool
  if((Get-WebAppPoolState $webAppPoolName).Value -ne 'Started') {
      Start-WebAppPool -Name $webAppPoolName
      while((Get-WebAppPoolState $webAppPoolName).Value -ne 'Started') {
          Start-Sleep -s 1
      }
      Write-Host `-AppPool Started
  }
  ```

## <a name="data-protection"></a><span data-ttu-id="3bf82-286">Schutz von Daten</span><span class="sxs-lookup"><span data-stu-id="3bf82-286">Data protection</span></span>

<span data-ttu-id="3bf82-287">Der [ASP.NET Core-Stapel zum Schutz von Daten](xref:security/data-protection/index) wird von mehreren ASP.NET-[Middlewarekomponenten](xref:fundamentals/middleware/index) genutzt, darunter auch von Middleware, die bei der Authentifizierung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-287">The [ASP.NET Core Data Protection stack](xref:security/data-protection/index) is used by several ASP.NET Core [middlewares](xref:fundamentals/middleware/index), including middleware used in authentication.</span></span> <span data-ttu-id="3bf82-288">Selbst wenn die APIs zum Schutz von Daten nicht aus dem Benutzercode aufgerufen werden, sollte der Schutz von Daten mit einem Bereitstellungsskript oder im Benutzercode konfiguriert werden, um einen persistenten kryptografischen [Schlüsselspeicher](xref:security/data-protection/implementation/key-management) zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-288">Even if Data Protection APIs aren't called by user code, data protection should be configured with a deployment script or in user code to create a persistent cryptographic [key store](xref:security/data-protection/implementation/key-management).</span></span> <span data-ttu-id="3bf82-289">Wenn der Schutz von Daten nicht konfiguriert ist, werden die Schlüssel beim Neustarten der App im Arbeitsspeicher gespeichert und verworfen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-289">If data protection isn't configured, the keys are held in memory and discarded when the app restarts.</span></span>

<span data-ttu-id="3bf82-290">Falls der Schlüsselbund im Arbeitsspeicher gespeichert wird, wenn die App neu gestartet wird, gilt Folgendes:</span><span class="sxs-lookup"><span data-stu-id="3bf82-290">If the key ring is stored in memory when the app restarts:</span></span>

* <span data-ttu-id="3bf82-291">Alle cookiebasierten Authentifizierungstoken für ungültig erklärt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-291">All cookie-based authentication tokens are invalidated.</span></span> 
* <span data-ttu-id="3bf82-292">Benutzer müssen sich bei ihrer nächsten Anforderung erneut anmelden.</span><span class="sxs-lookup"><span data-stu-id="3bf82-292">Users are required to sign in again on their next request.</span></span> 
* <span data-ttu-id="3bf82-293">Alle mit dem Schlüsselbund geschützte Daten können nicht mehr entschlüsselt werden.</span><span class="sxs-lookup"><span data-stu-id="3bf82-293">Any data protected with the key ring can no longer be decrypted.</span></span> <span data-ttu-id="3bf82-294">Dies kann [CSRF-Token](xref:security/anti-request-forgery#how-does-aspnet-core-mvc-address-csrf) und [ASP.NET Core-MVC-tempdata-Cookies](xref:fundamentals/app-state#tempdata) einschließen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-294">This may include [CSRF tokens](xref:security/anti-request-forgery#how-does-aspnet-core-mvc-address-csrf) and [ASP.NET Core MVC tempdata cookies](xref:fundamentals/app-state#tempdata).</span></span>

<span data-ttu-id="3bf82-295">Zum Konfigurieren des Schutzes von Daten unter IIS mithilfe des persistenten Schlüsselbunds verwenden Sie **einen** der folgenden Ansätze:</span><span class="sxs-lookup"><span data-stu-id="3bf82-295">To configure data protection under IIS to persist the key ring, use **one** of the following approaches:</span></span>

* <span data-ttu-id="3bf82-296">**Erstellen einer Registrierungsstruktur für den Schutz von Daten**</span><span class="sxs-lookup"><span data-stu-id="3bf82-296">**Create Data Protection Registry Keys**</span></span>

  <span data-ttu-id="3bf82-297">Schlüssel für den Schutz von Daten, die von ASP.NET Core-Apps verwendet werden, werden in der Registrierung außerhalb der Apps gespeichert.</span><span class="sxs-lookup"><span data-stu-id="3bf82-297">Data protection keys used by ASP.NET Core apps are stored in the registry external to the apps.</span></span> <span data-ttu-id="3bf82-298">Um die Schlüssel für eine bestimmte App zu dauerhaft zu speichern, müssen Sie Registrierungsschlüssel für den App-Pool erstellen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-298">To persist the keys for a given app, create registry keys for the app pool.</span></span>

  <span data-ttu-id="3bf82-299">Bei eigenständigen IIS-Installationen, die ohne Webfarm vorgesehen sind, kann das [PowerShell-Skript „Provision-AutoGenKeys.ps1“ für den Schutz von Daten](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) für jeden App-Pool genutzt werden, das mit einer ASP.NET Core-App verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-299">For standalone, non-webfarm IIS installations, the [Data Protection Provision-AutoGenKeys.ps1 PowerShell script](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) can be used for each app pool used with an ASP.NET Core app.</span></span> <span data-ttu-id="3bf82-300">Dieses Skript erstellt einen Registrierungsschlüssel in der HKLM-Registrierung, der nur für das Workerprozesskonto des App-Pools der App zugänglich ist.</span><span class="sxs-lookup"><span data-stu-id="3bf82-300">This script creates a registry key in the HKLM registry that's accessible only to the worker process account of the app's app pool.</span></span> <span data-ttu-id="3bf82-301">Schlüssel werden in ruhendem Zustand mit DPAPI mit einem computerweiten Schlüssel verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-301">Keys are encrypted at rest using DPAPI with a machine-wide key.</span></span>

  <span data-ttu-id="3bf82-302">In Webfarmszenarios kann eine App so konfiguriert werden, dass sie einen UNC-Pfad verwendet, um den Schlüsselbund für den Schutz von Daten zu speichern.</span><span class="sxs-lookup"><span data-stu-id="3bf82-302">In web farm scenarios, an app can be configured to use a UNC path to store its data protection key ring.</span></span> <span data-ttu-id="3bf82-303">Standardmäßig werden die Schlüssel für den Schutz von Daten nicht verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-303">By default, the data protection keys aren't encrypted.</span></span> <span data-ttu-id="3bf82-304">Stellen Sie sicher, dass die Dateiberechtigungen für die Netzwerkfreigabe auf das Windows-Konto beschränkt sind, mit dem die App ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-304">Ensure that the file permissions for the network share are limited to the Windows account the app runs under.</span></span> <span data-ttu-id="3bf82-305">Ein X.509-Zertifikat kann zum Schutz von Schlüsseln im ruhenden Zustand verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="3bf82-305">An X509 certificate can be used to protect keys at rest.</span></span> <span data-ttu-id="3bf82-306">Ziehen Sie einen Mechanismus in Erwägung, um es Benutzern zu ermöglichen, Zertifikate hochzuladen: Platzieren Sie Zertifikate im Zertifikatspeicher des Benutzers für vertrauenswürdige Anbieter, und stellen Sie sicher, dass sie auf allen Computern verfügbar sind, auf denen die App des Benutzers ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-306">Consider a mechanism to allow users to upload certificates: Place certificates into the user's trusted certificate store and ensure they're available on all machines where the user's app runs.</span></span> <span data-ttu-id="3bf82-307">Details finden Sie unter [Konfigurieren des Schutzes von Daten](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="3bf82-307">See [Configuring Data Protection](xref:security/data-protection/configuration/overview) for details.</span></span>

* <span data-ttu-id="3bf82-308">**Konfigurieren des IIS-Anwendungspools zum Laden des Benutzerprofils**</span><span class="sxs-lookup"><span data-stu-id="3bf82-308">**Configure the IIS Application Pool to load the user profile**</span></span>

  <span data-ttu-id="3bf82-309">Diese Einstellung befindet sich im Abschnitt **Prozessmodell** unter **Erweiterte Einstellungen** für den App-Pool.</span><span class="sxs-lookup"><span data-stu-id="3bf82-309">This setting is in the **Process Model** section under the **Advanced Settings** for the app pool.</span></span> <span data-ttu-id="3bf82-310">Legen Sie „Benutzerprofil laden“ auf `True` fest.</span><span class="sxs-lookup"><span data-stu-id="3bf82-310">Set Load User Profile to `True`.</span></span> <span data-ttu-id="3bf82-311">Dadurch werden Schlüssel im Benutzerprofilverzeichnis gespeichert und mit DPAPI mit einem Schlüssel geschützt, der nur für das Benutzerkonto gilt, das vom App-Pool verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-311">This stores keys under the user profile directory and protects them using DPAPI with a key specific to the user account used by the app pool.</span></span>

* <span data-ttu-id="3bf82-312">**Verwenden des Dateisystems als Schlüsselbundspeicher**</span><span class="sxs-lookup"><span data-stu-id="3bf82-312">**Use the file system as a key ring store**</span></span>

  <span data-ttu-id="3bf82-313">Passen Sie den App-Code so an, dass er [das Dateisystem als Schlüsselbundspeicher verwendet](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="3bf82-313">Adjust the app code to [use the file system as a key ring store](xref:security/data-protection/configuration/overview).</span></span> <span data-ttu-id="3bf82-314">Verwenden Sie ein X.509-Zertifikat, um den Schlüsselbund zu schützen, und stellen Sie sicher, dass es sich bei dem Zertifikat um ein vertrauenswürdiges Zertifikat handelt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-314">Use an X509 certificate to protect the key ring and ensure the certificate is a trusted certificate.</span></span> <span data-ttu-id="3bf82-315">Wenn es sich um ein selbstsigniertes Zertifikat handelt, müssen Sie es im vertrauenswürdigen Stammspeicher platzieren.</span><span class="sxs-lookup"><span data-stu-id="3bf82-315">If the certificate is self-signed, place the certificate in the Trusted Root store.</span></span>

  <span data-ttu-id="3bf82-316">Wenn IIS in einer Webfarm verwendet wird:</span><span class="sxs-lookup"><span data-stu-id="3bf82-316">When using IIS in a web farm:</span></span>

  * <span data-ttu-id="3bf82-317">Verwenden Sie eine Dateifreigabe, auf die alle Computer zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="3bf82-317">Use a file share that all machines can access.</span></span>
  * <span data-ttu-id="3bf82-318">Stellen Sie ein X509-Zertifikat auf jedem Computer bereit.</span><span class="sxs-lookup"><span data-stu-id="3bf82-318">Deploy an X509 certificate to each machine.</span></span> <span data-ttu-id="3bf82-319">Konfigurieren Sie den [Schutz von Daten im Code](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="3bf82-319">Configure [data protection in code](xref:security/data-protection/configuration/overview).</span></span>

* <span data-ttu-id="3bf82-320">**Festlegen einer computerweiten Richtlinie für den Schutz von Daten**</span><span class="sxs-lookup"><span data-stu-id="3bf82-320">**Set a machine-wide policy for data protection**</span></span>

  <span data-ttu-id="3bf82-321">Das System zum Schutz von Daten verfügt über eine eingeschränkte Unterstützung zum Festlegen einer [computerweiten Standardrichtlinie](xref:security/data-protection/configuration/machine-wide-policy) für alle Apps, die die Datenschutz-APIs nutzen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-321">The data protection system has limited support for setting a default [machine-wide policy](xref:security/data-protection/configuration/machine-wide-policy) for all apps that consume the Data Protection APIs.</span></span> <span data-ttu-id="3bf82-322">Weitere Details finden Sie in der Dokumentation zum [Schutz von Daten](xref:security/data-protection/index).</span><span class="sxs-lookup"><span data-stu-id="3bf82-322">See the [data protection documentation](xref:security/data-protection/index) for details.</span></span>

## <a name="sub-application-configuration"></a><span data-ttu-id="3bf82-323">Konfiguration von untergeordneten Anwendungen</span><span class="sxs-lookup"><span data-stu-id="3bf82-323">Sub-application configuration</span></span>

<span data-ttu-id="3bf82-324">Untergeordnete Apps, die unter der Stamm-App hinzugefügt werden, sollten kein ASP.NET Core-Modul als Handler enthalten.</span><span class="sxs-lookup"><span data-stu-id="3bf82-324">Sub-apps added under the root app shouldn't include the ASP.NET Core Module as a handler.</span></span> <span data-ttu-id="3bf82-325">Wenn das Modul als Handler in einer *web.config* einer untergeordneten App hinzugefügt wird, erhalten Sie beim Versuch, zur untergeordneten App zu navigieren, den Fehler *500.19: Interner Serverfehler*. Dieser verweist auf die fehlerhafte Konfigurationsdatei.</span><span class="sxs-lookup"><span data-stu-id="3bf82-325">If the module is added as a handler in a sub-app's *web.config* file, a *500.19 Internal Server Error* referencing the faulty config file is received when attempting to browse the sub-app.</span></span>

<span data-ttu-id="3bf82-326">Das folgende Beispiel zeigt den Inhalt einer veröffentlichten Datei *web.config* für eine untergeordnete ASP.NET Core-App:</span><span class="sxs-lookup"><span data-stu-id="3bf82-326">The following example shows a published *web.config* file for an ASP.NET Core sub-app:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <aspNetCore processPath="dotnet" 
      arguments=".\<assembly_name>.dll" 
      stdoutLogEnabled="false" 
      stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="3bf82-327">Wenn Sie eine untergeordnete App ohne ASP.NET Core unterhalb einer ASP.NET Core-App hosten, entfernen Sie den geerbten Handler ausdrücklich aus der Datei *Web.config* der untergeordneten App:</span><span class="sxs-lookup"><span data-stu-id="3bf82-327">When hosting a non-ASP.NET Core sub-app underneath an ASP.NET Core app, explicitly remove the inherited handler in the sub-app *web.config* file:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <handlers>
      <remove name="aspNetCore" />
    </handlers>
    <aspNetCore processPath="dotnet" 
      arguments=".\<assembly_name>.dll" 
      stdoutLogEnabled="false" 
      stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="3bf82-328">Weitere Informationen zum Konfigurieren des ASP.NET Core-Moduls finden Sie im Thema [Einführung in das ASP.NET Core-Modul](xref:fundamentals/servers/aspnet-core-module) und in der [Konfigurationsreferenz für das ASP.NET Core-Modul](xref:host-and-deploy/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="3bf82-328">For more information on configuring the ASP.NET Core Module, see the [Introduction to ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module) topic and the [ASP.NET Core Module configuration reference](xref:host-and-deploy/aspnet-core-module).</span></span>

## <a name="configuration-of-iis-with-webconfig"></a><span data-ttu-id="3bf82-329">Konfiguration von IIS mit der Datei „web.config“</span><span class="sxs-lookup"><span data-stu-id="3bf82-329">Configuration of IIS with web.config</span></span>

<span data-ttu-id="3bf82-330">Die IIS-Konfiguration wird im Hinblick auf IIS-Features, die für eine Reverseproxykonfiguration gelten, vom Abschnitt **\<system.webServer>** der Datei *Web.config* beeinflusst.</span><span class="sxs-lookup"><span data-stu-id="3bf82-330">IIS configuration is influenced by the **\<system.webServer>** section of *web.config* for those IIS features that apply to a reverse proxy configuration.</span></span> <span data-ttu-id="3bf82-331">Wenn IIS auf Systemebene für die Verwendung der dynamischen Komprimierung konfiguriert ist, kann diese Einstellung mit dem Element **\<urlCompression>** in der Datei *web.config* der App deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="3bf82-331">If IIS is configured at the server level to use dynamic compression, the **\<urlCompression>** element in the app's *web.config* file can disable it.</span></span>

<span data-ttu-id="3bf82-332">Weitere Informationen finden Sie in der [Konfigurationsreferenz für \<system.webServer>](/iis/configuration/system.webServer/), der [Konfigurationsreferenz für das ASP.NET Core-Modul](xref:host-and-deploy/aspnet-core-module) und unter [Verwenden von IIS-Modulen mit ASP.NET Core](xref:host-and-deploy/iis/modules).</span><span class="sxs-lookup"><span data-stu-id="3bf82-332">For more information, see the [configuration reference for \<system.webServer>](/iis/configuration/system.webServer/), [ASP.NET Core Module Configuration Reference](xref:host-and-deploy/aspnet-core-module), and [Using IIS Modules with ASP.NET Core](xref:host-and-deploy/iis/modules).</span></span> <span data-ttu-id="3bf82-333">Um Umgebungsvariablen für einzelne Apps festzulegen, die in isolierten App-Pools ausgeführt werden (unterstützt für IIS 10.0 oder höher), lesen Sie den Abschnitt zum *Befehl „AppCmd.exe“* im Thema [Umgebungsvariablen \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) in der IIS-Referenzdokumentation.</span><span class="sxs-lookup"><span data-stu-id="3bf82-333">To set environment variables for individual apps running in isolated app pools (supported for IIS 10.0 or later), see the *AppCmd.exe command* section of the [Environment Variables \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

## <a name="configuration-sections-of-webconfig"></a><span data-ttu-id="3bf82-334">Konfigurationsabschnitte von „web.config“</span><span class="sxs-lookup"><span data-stu-id="3bf82-334">Configuration sections of web.config</span></span>

<span data-ttu-id="3bf82-335">Konfigurationsabschnitte von ASP.NET 4.x-Apps in der Datei *web.config* werden von ASP.NET Core-Apps nicht zur Konfiguration verwendet:</span><span class="sxs-lookup"><span data-stu-id="3bf82-335">Configuration sections of ASP.NET 4.x apps in *web.config* aren't used by ASP.NET Core apps for configuration:</span></span>

* <span data-ttu-id="3bf82-336">**\<system.web>**</span><span class="sxs-lookup"><span data-stu-id="3bf82-336">**\<system.web>**</span></span>
* <span data-ttu-id="3bf82-337">**\<appSettings>**</span><span class="sxs-lookup"><span data-stu-id="3bf82-337">**\<appSettings>**</span></span>
* <span data-ttu-id="3bf82-338">**\<connectionStrings>**</span><span class="sxs-lookup"><span data-stu-id="3bf82-338">**\<connectionStrings>**</span></span>
* <span data-ttu-id="3bf82-339">**\<location>**</span><span class="sxs-lookup"><span data-stu-id="3bf82-339">**\<location>**</span></span>

<span data-ttu-id="3bf82-340">ASP.NET Core-Apps werden mit anderen Konfigurationsanbietern konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="3bf82-340">ASP.NET Core apps are configured using other configuration providers.</span></span> <span data-ttu-id="3bf82-341">Weitere Informationen finden Sie unter [Konfiguration](xref:fundamentals/configuration/index).</span><span class="sxs-lookup"><span data-stu-id="3bf82-341">For more information, see [Configuration](xref:fundamentals/configuration/index).</span></span>

## <a name="application-pools"></a><span data-ttu-id="3bf82-342">Anwendungspools</span><span class="sxs-lookup"><span data-stu-id="3bf82-342">Application Pools</span></span>

<span data-ttu-id="3bf82-343">Wenn Sie mehrere Websites auf einem Server hosten, isolieren Sie die Apps voneinander, indem Sie jede App in ihrem eigenen App-Pool ausführen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-343">When hosting multiple websites on a server, isolate the apps from each other by running each app in its own app pool.</span></span> <span data-ttu-id="3bf82-344">Im IIS-Dialogfeld **Website hinzufügen** wird standardmäßig diese Konfiguration eingesetzt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-344">The IIS **Add Website** dialog defaults to this configuration.</span></span> <span data-ttu-id="3bf82-345">Wenn ein **Websitename** angegeben ist, wird der Text automatisch in das Textfeld **Anwendungspool** übertragen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-345">When **Site name** is provided, the text is automatically transferred to the **Application pool** textbox.</span></span> <span data-ttu-id="3bf82-346">Ein neuer App-Pool mit dem Namen der Website wird erstellt, wenn die Website hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="3bf82-346">A new app pool is created using the site name when the site is added.</span></span>

## <a name="application-pool-identity"></a><span data-ttu-id="3bf82-347">Identität des Anwendungspools</span><span class="sxs-lookup"><span data-stu-id="3bf82-347">Application Pool Identity</span></span>

<span data-ttu-id="3bf82-348">Mit einem Konto für die Identität des App-Pools können Sie eine App unter einem eindeutigen Konto ausführen, ohne Domänen oder lokale Konten erstellen und verwalten zu müssen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-348">An app pool identity account allows an app to run under a unique account without having to create and manage domains or local accounts.</span></span> <span data-ttu-id="3bf82-349">Unter IIS 8.0 oder höher erstellt der IIS-Administratorworkerprozess (WAS) ein virtuelles Konto mit dem Namen des neuen App-Pools und führt die Workerprozesse des App-Pools standardmäßig unter diesem Konto aus.</span><span class="sxs-lookup"><span data-stu-id="3bf82-349">On IIS 8.0 or later, the IIS Admin Worker Process (WAS) creates a virtual account with the name of the new app pool and runs the app pool's worker processes under this account by default.</span></span> <span data-ttu-id="3bf82-350">Stellen Sie sicher, dass in der IIS-Verwaltungskonsole unter **Erweiterte Einstellungen** für den App-Pool die **Identität** auf **ApplicationPoolIdentity** festgelegt ist:</span><span class="sxs-lookup"><span data-stu-id="3bf82-350">In the IIS Management Console under **Advanced Settings** for the app pool, ensure that the **Identity** is set to use **ApplicationPoolIdentity**:</span></span>

![Dialogfeld „Erweiterte Einstellungen“ für den Anwendungspool](index/_static/apppool-identity.png)

<span data-ttu-id="3bf82-352">Der IIS-Verwaltungsprozess erstellt im Windows-Sicherheitssystem einen sicheren Bezeichner mit dem Namen des App-Pools.</span><span class="sxs-lookup"><span data-stu-id="3bf82-352">The IIS management process creates a secure identifier with the name of the app pool in the Windows Security System.</span></span> <span data-ttu-id="3bf82-353">Ressourcen können mithilfe dieser Identität geschützt werden.</span><span class="sxs-lookup"><span data-stu-id="3bf82-353">Resources can be secured using this identity.</span></span> <span data-ttu-id="3bf82-354">Allerdings ist diese Identität kein echtes Benutzerkonto und wird in der Windows-Benutzerverwaltungskonsole nicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="3bf82-354">However, this identity isn't a real user account and doesn't show up in the Windows User Management Console.</span></span>

<span data-ttu-id="3bf82-355">Wenn der IIS-Workerprozess erhöhte Rechte für den Zugriff auf Ihre Anwendung erfordert, ändern Sie die Zugriffssteuerungsliste (ACL) für das Verzeichnis mit der App:</span><span class="sxs-lookup"><span data-stu-id="3bf82-355">If the IIS worker process requires elevated access to the app, modify the Access Control List (ACL) for the directory containing the app:</span></span>

1. <span data-ttu-id="3bf82-356">Öffnen Sie Windows Explorer, und navigieren Sie zum Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="3bf82-356">Open Windows Explorer and navigate to the directory.</span></span>

1. <span data-ttu-id="3bf82-357">Klicken Sie mit der rechten Maustaste auf das Verzeichnis, und klicken Sie auf **Eigenschaften**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-357">Right-click on the directory and select **Properties**.</span></span>

1. <span data-ttu-id="3bf82-358">Klicken Sie auf der Registerkarte **Sicherheit** auf die Schaltfläche **Bearbeiten** und dann auf die Schaltfläche **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-358">Under the **Security** tab, select the **Edit** button and then the **Add** button.</span></span>

1. <span data-ttu-id="3bf82-359">Wählen Sie die Schaltfläche **Speicherorte** aus, und stellen Sie sicher, dass das System ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="3bf82-359">Select the **Locations** button and make sure the system is selected.</span></span>

1. <span data-ttu-id="3bf82-360">Geben Sie im Bereich **Geben Sie die Namen der auszuwählenden Objekte ein** den Wert **IIS AppPool\\<Name_des_AppPools>** ein.</span><span class="sxs-lookup"><span data-stu-id="3bf82-360">Enter **IIS AppPool\\<app_pool_name>** in **Enter the object names to select** area.</span></span> <span data-ttu-id="3bf82-361">Klicken Sie auf die Schaltfläche **Namen überprüfen**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-361">Select the **Check Names** button.</span></span> <span data-ttu-id="3bf82-362">Überprüfen Sie für *DefaultAppPool* die Namen mit **IIS AppPool\DefaultAppPool**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-362">For the *DefaultAppPool* check the names using **IIS AppPool\DefaultAppPool**.</span></span> <span data-ttu-id="3bf82-363">Bei Auswahl der Schaltfläche **Namen überprüfen** wird im Bereich für Objektnamen der Wert **DefaultAppPool** angegeben.</span><span class="sxs-lookup"><span data-stu-id="3bf82-363">When the **Check Names** button is selected, a value of **DefaultAppPool** is indicated in the object names area.</span></span> <span data-ttu-id="3bf82-364">Es ist nicht möglich, den Namen des App-Pools direkt in den Bereich für Objektnamen einzugeben.</span><span class="sxs-lookup"><span data-stu-id="3bf82-364">It isn't possible to enter the app pool name directly into the object names area.</span></span> <span data-ttu-id="3bf82-365">Verwenden Sie das Format **IIS AppPool\\<Name_des_AppPools>**, wenn Sie die Objektnamen überprüfen.</span><span class="sxs-lookup"><span data-stu-id="3bf82-365">Use the **IIS AppPool\\<app_pool_name>** format when checking for the object name.</span></span>

   ![Auswahl des Dialogfelds für Benutzer oder Gruppen für den App-Ordner: Der Name des App-Pools „DefaultAppPool“ wird an „IIS AppPool\"“ im Bereich der Objektnamen angehängt, bevor „Namen überprüfen“ ausgewählt wird.](index/_static/select-users-or-groups-1.png)

1. <span data-ttu-id="3bf82-367">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="3bf82-367">Select **OK**.</span></span>

   ![Auswahl des Dialogfelds für Benutzer oder Gruppen für den App-Ordner: Nach der Auswahl von „Namen überprüfen“ wird der Objektname „DefaultAppPool“ im Bereich der Objektnamen angezeigt.](index/_static/select-users-or-groups-2.png)

1. <span data-ttu-id="3bf82-369">Standardmäßig sollten Lese- und Schreibberechtigungen gewährt werden.</span><span class="sxs-lookup"><span data-stu-id="3bf82-369">Read &amp; execute permissions should be granted by default.</span></span> <span data-ttu-id="3bf82-370">Erteilen Sie weitere Berechtigungen, sofern erforderlich.</span><span class="sxs-lookup"><span data-stu-id="3bf82-370">Provide additional permissions as needed.</span></span>

<span data-ttu-id="3bf82-371">Zugriff kann auch über eine Eingabeaufforderung mit dem Tool **ICACLS** gewährt werden.</span><span class="sxs-lookup"><span data-stu-id="3bf82-371">Access can also be granted at a command prompt using the **ICACLS** tool.</span></span> <span data-ttu-id="3bf82-372">Im folgenden Befehl wird als Beispiel *DefaultAppPool* verwendet:</span><span class="sxs-lookup"><span data-stu-id="3bf82-372">Using the *DefaultAppPool* as an example, the following command is used:</span></span>

```console
ICACLS C:\sites\MyWebApp /grant "IIS AppPool\DefaultAppPool":F
```

<span data-ttu-id="3bf82-373">Weitere Informationen finden Sie im Thema [icacls](/windows-server/administration/windows-commands/icacls).</span><span class="sxs-lookup"><span data-stu-id="3bf82-373">For more information, see the [icacls](/windows-server/administration/windows-commands/icacls) topic.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="3bf82-374">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="3bf82-374">Additional resources</span></span>

* [<span data-ttu-id="3bf82-375">Problembehandlung bei ASP.NET Core in IIS</span><span class="sxs-lookup"><span data-stu-id="3bf82-375">Troubleshoot ASP.NET Core on IIS</span></span>](xref:host-and-deploy/iis/troubleshoot)
* [<span data-ttu-id="3bf82-376">Referenz zu häufigen Fehlern bei Azure App Service und IIS mit ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="3bf82-376">Common errors reference for Azure App Service and IIS with ASP.NET Core</span></span>](xref:host-and-deploy/azure-iis-errors-reference)
* [<span data-ttu-id="3bf82-377">Einführung in das ASP.NET Core-Modul</span><span class="sxs-lookup"><span data-stu-id="3bf82-377">Introduction to ASP.NET Core Module</span></span>](xref:fundamentals/servers/aspnet-core-module)
* [<span data-ttu-id="3bf82-378">Konfigurationsreferenz für das ASP.NET Core-Modul</span><span class="sxs-lookup"><span data-stu-id="3bf82-378">ASP.NET Core Module configuration reference</span></span>](xref:host-and-deploy/aspnet-core-module)
* [<span data-ttu-id="3bf82-379">Verwenden von IIS-Modulen mit ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="3bf82-379">Using IIS Modules with ASP.NET Core</span></span>](xref:host-and-deploy/iis/modules)
* [<span data-ttu-id="3bf82-380">Einführung in ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="3bf82-380">Introduction to ASP.NET Core</span></span>](../index.md)
* [<span data-ttu-id="3bf82-381">Die offizielle Microsoft IIS-Website</span><span class="sxs-lookup"><span data-stu-id="3bf82-381">The Official Microsoft IIS Site</span></span>](https://www.iis.net/)
* [<span data-ttu-id="3bf82-382">Microsoft TechNet-Bibliothek: Windows Server</span><span class="sxs-lookup"><span data-stu-id="3bf82-382">Microsoft TechNet Library: Windows Server</span></span>](/windows-server/windows-server-versions)
