---
uid: web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-cs
title: Überprüfen die Anmeldeinformationen des Benutzers für die Mitgliedschaft Benutzerspeicher (c#) | Microsoft Docs
author: rick-anderson
description: In diesem Lernprogramm werden wie beim Überprüfen der Anmeldeinformationen des Benutzers, für die Mitgliedschaft Benutzerspeicher programmgesteuerte Möglichkeit und das Steuerelement für die Anmeldung mit untersucht...
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/18/2008
ms.topic: article
ms.assetid: 61aa4e08-aa81-4aeb-8ebe-19ba7a65e04c
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-cs
msc.type: authoredcontent
ms.openlocfilehash: 484a0f16265ee2d887ee08f6ae7ada47047f1f04
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
---
<a name="validating-user-credentials-against-the-membership-user-store-c"></a><span data-ttu-id="c320f-103">Überprüfen die Anmeldeinformationen des Benutzers für die Mitgliedschaft Benutzerspeicher (c#)</span><span class="sxs-lookup"><span data-stu-id="c320f-103">Validating User Credentials Against the Membership User Store (C#)</span></span>
====================
<span data-ttu-id="c320f-104">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="c320f-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="c320f-105">[Herunterladen von Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_CS.zip) oder [PDF herunterladen](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="c320f-105">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_CS.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_cs.pdf)</span></span>

> <span data-ttu-id="c320f-106">In diesem Lernprogramm werden wie beim Überprüfen der Anmeldeinformationen des Benutzers, für die Mitgliedschaft Benutzerspeicher programmgesteuerte Möglichkeit und das Steuerelement für die Anmeldung mit untersucht.</span><span class="sxs-lookup"><span data-stu-id="c320f-106">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="c320f-107">Wir werden zum Anpassen der Darstellung und das Verhalten des Steuerelements für die Anmeldung betrachten.</span><span class="sxs-lookup"><span data-stu-id="c320f-107">We will also look at how to customize the login control's appearance and behavior.</span></span>


## <a name="introduction"></a><span data-ttu-id="c320f-108">Einführung</span><span class="sxs-lookup"><span data-stu-id="c320f-108">Introduction</span></span>

<span data-ttu-id="c320f-109">In der <a id="Tutorial05"> </a> [vorherigen Lernprogramm](creating-user-accounts-cs.md) Vorgehensweise: erstellen ein neuen Benutzerkontos in Mitgliedschaft Framework erläutert.</span><span class="sxs-lookup"><span data-stu-id="c320f-109">In the <a id="Tutorial05"></a>[preceding tutorial](creating-user-accounts-cs.md) we looked at how to create a new user account in the Membership framework.</span></span> <span data-ttu-id="c320f-110">Erläutert, zuerst Programmgesteuertes Erstellen von Benutzerkonten über die `Membership` -Klasse `CreateUser` -Methode, und klicken Sie dann überprüft der CreateUserWizard-Websteuerelement.</span><span class="sxs-lookup"><span data-stu-id="c320f-110">We first looked at programmatically creating user accounts via the `Membership` class's `CreateUser` method, and then examined using the CreateUserWizard Web control.</span></span> <span data-ttu-id="c320f-111">Allerdings überprüft die Anmeldeseite derzeit die angegebenen Anmeldeinformationen für eine vorprogrammierte Liste von Benutzername und Kennwort-Paaren.</span><span class="sxs-lookup"><span data-stu-id="c320f-111">However, the login page currently validates the supplied credentials against a hard-coded list of username and password pairs.</span></span> <span data-ttu-id="c320f-112">Wir müssen die Anmeldeseite Logik aktualisieren, damit sie die Anmeldeinformationen für die Mitgliedschaft Framework Benutzerspeicher überprüft.</span><span class="sxs-lookup"><span data-stu-id="c320f-112">We need to update the login page's logic so that it validates credentials against the Membership framework's user store.</span></span>

<span data-ttu-id="c320f-113">Ähnlich können z. B. mit dem Erstellen von Benutzerkonten, Anmeldeinformationen programmgesteuert oder deklarativ überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="c320f-113">Much like with creating user accounts, credentials can be validated programmatically or declaratively.</span></span> <span data-ttu-id="c320f-114">Die Mitgliedschaft-API beinhaltet eine Methode für die Anmeldeinformationen eines Benutzers für den Speicher des Benutzers programmgesteuert überprüfen.</span><span class="sxs-lookup"><span data-stu-id="c320f-114">The Membership API includes a method for programmatically validating a user's credentials against the user store.</span></span> <span data-ttu-id="c320f-115">Und ASP.NET im Lieferumfang des Websteuerelements Anmeldung, die eine Benutzeroberfläche mit Textfelder für den Benutzernamen und Kennwort und eine Schaltfläche zum Anmelden rendert.</span><span class="sxs-lookup"><span data-stu-id="c320f-115">And ASP.NET ships with the Login Web control, which renders a user interface with textboxes for the username and password and a button to log in.</span></span>

<span data-ttu-id="c320f-116">In diesem Lernprogramm werden wie beim Überprüfen der Anmeldeinformationen des Benutzers, für die Mitgliedschaft Benutzerspeicher programmgesteuerte Möglichkeit und das Steuerelement für die Anmeldung mit untersucht.</span><span class="sxs-lookup"><span data-stu-id="c320f-116">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="c320f-117">Wir werden zum Anpassen der Darstellung und das Verhalten des Steuerelements für die Anmeldung betrachten.</span><span class="sxs-lookup"><span data-stu-id="c320f-117">We will also look at how to customize the login control's appearance and behavior.</span></span> <span data-ttu-id="c320f-118">Fangen wir an!</span><span class="sxs-lookup"><span data-stu-id="c320f-118">Let's get started!</span></span>

## <a name="step-1-validating-credentials-against-the-membership-user-store"></a><span data-ttu-id="c320f-119">Schritt 1: Die Anmeldeinformationen für den Benutzerspeicher Mitgliedschaft überprüft.</span><span class="sxs-lookup"><span data-stu-id="c320f-119">Step 1: Validating Credentials Against the Membership User Store</span></span>

<span data-ttu-id="c320f-120">Für Websites, die Formularauthentifizierung verwenden, meldet einen Benutzer auf der Website besuchen einer Anmeldeseite, und geben ihre Anmeldeinformationen.</span><span class="sxs-lookup"><span data-stu-id="c320f-120">For web sites that use forms authentication, a user logs on to the website by visiting a login page and entering their credentials.</span></span> <span data-ttu-id="c320f-121">Diese Anmeldeinformationen werden dann mit den Speicher des Benutzers verglichen.</span><span class="sxs-lookup"><span data-stu-id="c320f-121">These credentials are then compared against the user store.</span></span> <span data-ttu-id="c320f-122">Wenn sie gültig sind, wird der Benutzer ein Formularauthentifizierungsticket gewährt, ein Sicherheitstoken, die die Identität und die Authentizität des Besuchers angibt.</span><span class="sxs-lookup"><span data-stu-id="c320f-122">If they are valid, then the user is granted a forms authentication ticket, which is a security token that indicates the identity and authenticity of the visitor.</span></span>

<span data-ttu-id="c320f-123">Verwenden Sie zum Überprüfen von eines Benutzers für das Framework für die Mitgliedschaft der `Membership` Klasse [ `ValidateUser` Methode](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx).</span><span class="sxs-lookup"><span data-stu-id="c320f-123">To validate a user against the Membership framework, use the `Membership` class's [`ValidateUser` method](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx).</span></span> <span data-ttu-id="c320f-124">Die `ValidateUser` -Methode übernimmt zwei Eingabeparameter - *`username`* und *`password`* - und gibt einen booleschen Wert, der angibt, ob die Anmeldeinformationen gültig sind.</span><span class="sxs-lookup"><span data-stu-id="c320f-124">The `ValidateUser` method takes in two input parameters - *`username`* and *`password`* - and returns a Boolean value indicating whether the credentials were valid.</span></span> <span data-ttu-id="c320f-125">Wie Sie mit der `CreateUser` Methode, die im vorherigen Lernprogramm untersucht die `ValidateUser` Methode delegiert die tatsächliche Validierung an den konfigurierten Mitgliedschaftsanbieter.</span><span class="sxs-lookup"><span data-stu-id="c320f-125">Like with the `CreateUser` method we examined in the previous tutorial, the `ValidateUser` method delegates the actual validation to the configured Membership provider.</span></span>

<span data-ttu-id="c320f-126">Die `SqlMembershipProvider` überprüft die angegebenen Anmeldeinformationen erhalten Sie das angegebene Kennwort des Benutzers über die `aspnet_Membership_GetPasswordWithFormat` gespeicherte Prozedur.</span><span class="sxs-lookup"><span data-stu-id="c320f-126">The `SqlMembershipProvider` validates the supplied credentials by obtaining the specified user's password via the `aspnet_Membership_GetPasswordWithFormat` stored procedure.</span></span> <span data-ttu-id="c320f-127">Bedenken Sie, dass die `SqlMembershipProvider` speichert von Benutzerkennwörtern, die mit einer der drei Formate: Clear, verschlüsselt oder ein Hashwert erstellt.</span><span class="sxs-lookup"><span data-stu-id="c320f-127">Recall that the `SqlMembershipProvider` stores users' passwords using one of three formats: clear, encrypted, or hashed.</span></span> <span data-ttu-id="c320f-128">Die `aspnet_Membership_GetPasswordWithFormat` gespeicherte Prozedur gibt das Kennwort im raw-Format zurück.</span><span class="sxs-lookup"><span data-stu-id="c320f-128">The `aspnet_Membership_GetPasswordWithFormat` stored procedure returns the password in its raw format.</span></span> <span data-ttu-id="c320f-129">Für verschlüsselte oder eine verschlüsselte Kennwörter der `SqlMembershipProvider` transformiert die *`password`* übergebenen Wert die `ValidateUser` in die entsprechende Methode verschlüsselt oder Status gehasht und vergleicht ihn dann mit der Rückgabe aus der die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="c320f-129">For encrypted or hashed passwords, the `SqlMembershipProvider` transforms the *`password`* value passed into the `ValidateUser` method into its equivalent encrypted or hashed state and then compares it with what was returned from the database.</span></span> <span data-ttu-id="c320f-130">Wenn das Kennwort in der Datenbank gespeichert, das formatierte, vom Benutzer eingegebene Kennwort übereinstimmt, sind die Anmeldeinformationen gültig.</span><span class="sxs-lookup"><span data-stu-id="c320f-130">If the password stored in the database matches the formatted password entered by the user, the credentials are valid.</span></span>

<span data-ttu-id="c320f-131">Wir aktualisieren unsere Anmeldeseite (~ /`Login.aspx`), damit sie die angegebenen Anmeldeinformationen für den Speicher des Benutzers Mitgliedschaft Framework überprüft.</span><span class="sxs-lookup"><span data-stu-id="c320f-131">Let's update our login page (~/`Login.aspx`) so that it validates the supplied credentials against the Membership framework user store.</span></span> <span data-ttu-id="c320f-132">Wir diese Anmeldeseite erstellt zurück in die <a id="Tutorial02"> </a> [ *eine Übersicht der Formularauthentifizierung* ](../introduction/an-overview-of-forms-authentication-cs.md) Lernprogramm erstellen eine Schnittstelle mit zwei Textfelder für den Benutzernamen und das Kennwort, eine Kontrollkästchen, und eine Anmeldeschaltfläche speichern (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="c320f-132">We created this login page back in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial, creating an interface with two TextBoxes for the username and password, a Remember Me checkbox, and a Login button (see Figure 1).</span></span> <span data-ttu-id="c320f-133">Der Code überprüft die eingegebenen Anmeldeinformationen für eine vorprogrammierte Liste von Benutzername und Kennwort-Paaren (Scott/Kennwort, Jisun/Kennwort und Sam/Kennwort).</span><span class="sxs-lookup"><span data-stu-id="c320f-133">The code validates the entered credentials against a hard-coded list of username and password pairs (Scott/password, Jisun/password, and Sam/password).</span></span> <span data-ttu-id="c320f-134">In der <a id="Tutorial03"> </a> [ *Konfiguration der Formularauthentifizierung und erweiterte Themen* ](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) Lernprogramm wir aktualisiert, die Anmeldeseite Code aus, um zusätzliche Informationen in den Formen zu speichern. der Authentifizierungsticket `UserData` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="c320f-134">In the <a id="Tutorial03"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) tutorial we updated the login page's code to store additional information in the forms authentication ticket's `UserData` property.</span></span>


<span data-ttu-id="c320f-135">[![Die Anmeldeseite Schnittstelle enthält, zwei Textfelder, einer CheckBoxList und eine Schaltfläche](validating-user-credentials-against-the-membership-user-store-cs/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="c320f-135">[![The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button](validating-user-credentials-against-the-membership-user-store-cs/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image1.png)</span></span>

<span data-ttu-id="c320f-136">**Abbildung 1**: die Anmeldeseite Schnittstelle enthält zwei Textfelder, einer CheckBoxList und eine Schaltfläche ([klicken Sie hier, um das Bild in voller Größe angezeigt](validating-user-credentials-against-the-membership-user-store-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="c320f-136">**Figure 1**: The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image3.png))</span></span>


<span data-ttu-id="c320f-137">Benutzeroberfläche für die Anmeldeseite kann bleiben unverändert, aber wir benötigen der Anmeldeschaltfläche ersetzen `Click` -Ereignishandler durch den Code, der den Benutzer für die Mitgliedschaft Framework Benutzerspeicher überprüft.</span><span class="sxs-lookup"><span data-stu-id="c320f-137">The login page's user interface can remain unchanged, but we need to replace the Login button's `Click` event handler with code that validates the user against the Membership framework user store.</span></span> <span data-ttu-id="c320f-138">Aktualisieren Sie den Ereignishandler, sodass der Code wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="c320f-138">Update the event handler so that its code appears as follows:</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample1.cs)]

<span data-ttu-id="c320f-139">Dieser Code ist erstaunlich einfach.</span><span class="sxs-lookup"><span data-stu-id="c320f-139">This code is remarkably simple.</span></span> <span data-ttu-id="c320f-140">Beginnen wir durch Aufrufen der `Membership.ValidateUser` -Methode auf und übergibt den angegebenen Benutzernamen und das Kennwort.</span><span class="sxs-lookup"><span data-stu-id="c320f-140">We start by calling the `Membership.ValidateUser` method, passing in the supplied username and password.</span></span> <span data-ttu-id="c320f-141">Wenn diese Methode gibt "true" zurück, der Benutzer angemeldet ist, in der Website über die `FormsAuthentication` -Methode der Basisklasse RedirectFromLoginPage.</span><span class="sxs-lookup"><span data-stu-id="c320f-141">If that method returns true, then the user is signed into the site via the `FormsAuthentication` class's RedirectFromLoginPage method.</span></span> <span data-ttu-id="c320f-142">(Wie in erläutert die <a id="Tutorial2"> </a> [ *eine Übersicht der Formularauthentifizierung* ](../introduction/an-overview-of-forms-authentication-cs.md) Lernprogramm die `FormsAuthentication.RedirectFromLoginPage` erstellt die Formulare Authentifizierungsticket, und klicken Sie dann leitet den Benutzer um die entsprechende Seite.) Wenn die Anmeldeinformationen jedoch ungültig ist, sind die `InvalidCredentialsMessage` Bezeichnung angezeigt wird, den Benutzer darüber informiert, dass ihre Benutzername oder Kennwort falsch war.</span><span class="sxs-lookup"><span data-stu-id="c320f-142">(As we discussed in the <a id="Tutorial2"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial, the `FormsAuthentication.RedirectFromLoginPage` creates the forms authentication ticket and then redirects the user to the appropriate page.) If the credentials are invalid, however, the `InvalidCredentialsMessage` Label is displayed, informing the user that their username or password was incorrect.</span></span>

<span data-ttu-id="c320f-143">Das ist alles vorhanden ist!</span><span class="sxs-lookup"><span data-stu-id="c320f-143">That's all there is to it!</span></span>

<span data-ttu-id="c320f-144">Um zu testen, dass die Anmeldeseite erwartungsgemäß funktioniert, versuchen Sie mit einem Benutzerkonto anmelden, die Sie in dem vorherigen Lernprogramm erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="c320f-144">To test that the login page works as expected, attempt to login with one of the user accounts you created in the preceding tutorial.</span></span> <span data-ttu-id="c320f-145">Oder, wenn Sie ein Konto noch nicht erstellt haben, fahren Sie fort, und erstellen Sie eine aus der `~/Membership/CreatingUserAccounts.aspx` Seite.</span><span class="sxs-lookup"><span data-stu-id="c320f-145">Or, if you have not yet created an account, go ahead and create one from the `~/Membership/CreatingUserAccounts.aspx` page.</span></span>

> [!NOTE]
> <span data-ttu-id="c320f-146">Wenn der Benutzer ihre Anmeldeinformationen eingibt und das Anmeldeformular Seite sendet, werden die Anmeldeinformationen an, z. B. das Kennwort über das Internet an den Webserver in übertragen *Klartext*.</span><span class="sxs-lookup"><span data-stu-id="c320f-146">When the user enters her credentials and submits the login page form, the credentials, including her password, are transmitted over the Internet to the web server in *plain text*.</span></span> <span data-ttu-id="c320f-147">Das bedeutet, dass alle Hacker sniffing den Netzwerkdatenverkehr des Benutzernamens und Kennworts angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="c320f-147">That means any hacker sniffing the network traffic can see the username and password.</span></span> <span data-ttu-id="c320f-148">Um dies zu verhindern, es ist wichtig, den Netzwerkdatenverkehr mit verschlüsseln [Secure Socket Layer (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span><span class="sxs-lookup"><span data-stu-id="c320f-148">To prevent this, it is essential to encrypt the network traffic by using [Secure Socket Layers (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span></span> <span data-ttu-id="c320f-149">Dadurch wird sichergestellt, dass die Anmeldeinformationen (ebenso wie die gesamte Seite HTML-Markup) ab dem Zeitpunkt verschlüsselt werden, die sie den Browser lassen, bis sie vom Webserver empfangen werden.</span><span class="sxs-lookup"><span data-stu-id="c320f-149">This will ensure that the credentials (as well as the entire page's HTML markup) are encrypted from the moment they leave the browser until they are received by the web server.</span></span>


### <a name="how-the-membership-framework-handles-invalid-login-attempts"></a><span data-ttu-id="c320f-150">Behandlung von ungültigen Anmeldeversuchen durch das Framework Mitgliedschaft</span><span class="sxs-lookup"><span data-stu-id="c320f-150">How the Membership Framework Handles Invalid Login Attempts</span></span>

<span data-ttu-id="c320f-151">Wenn ein Besucher die Anmeldeseite erreicht und übermittelt ihre Anmeldeinformationen, sendet ihren Browser eine HTTP-Anforderung zur Anmeldeseite.</span><span class="sxs-lookup"><span data-stu-id="c320f-151">When a visitor reaches the login page and submits their credentials, their browser makes an HTTP request to the login page.</span></span> <span data-ttu-id="c320f-152">Wenn die Anmeldeinformationen gültig sind, enthält die HTTP-Antwort das Authentifizierungsticket in einem Cookie.</span><span class="sxs-lookup"><span data-stu-id="c320f-152">If the credentials are valid, the HTTP response includes the authentication ticket in a cookie.</span></span> <span data-ttu-id="c320f-153">Daher kann ein Hacker versucht, unterbrechen Ihre Website ein Programm erstellen, die umfassend HTTP-Anforderungen an die Anmeldeseite mit einem gültigen Benutzernamen und einen Schätzwert ein, an das Kennwort sendet.</span><span class="sxs-lookup"><span data-stu-id="c320f-153">Therefore, a hacker attempting to break into your site could create a program that exhaustively sends HTTP requests to the login page with a valid username and a guess at the password.</span></span> <span data-ttu-id="c320f-154">Wenn das Kennwort Schätzung richtig ist, gibt die Anmeldeseite das Authentifizierungscookie Ticket zurück zu diesem, das Zeitpunkt weiß das Programm, dass er auf eine gültige Benutzername/Kennwort-Paar gestoßen ist.</span><span class="sxs-lookup"><span data-stu-id="c320f-154">If the password guess is correct, the login page will return the authentication ticket cookie, at which point the program knows it has stumbled upon a valid username/password pair.</span></span> <span data-ttu-id="c320f-155">Durch Brute-Force solches Programm auf das Kennwort eines Benutzers, Fehlernachrichten möglicherweise besonders, wenn das Kennwort schwach ist.</span><span class="sxs-lookup"><span data-stu-id="c320f-155">Through brute force, such a program might be able to stumble upon a user's password, especially if the password is weak.</span></span>

<span data-ttu-id="c320f-156">Um solche Brute-Force-Angriffe zu verhindern, sperrt das Framework der Mitgliedschaft eines Benutzers, wenn eine bestimmte Anzahl von nicht erfolgreichen Anmeldeversuche innerhalb einer bestimmten Zeitspanne vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="c320f-156">To prevent such brute force attacks, the Membership framework locks out a user if there are a certain number of unsuccessful login attempts within a certain period of time.</span></span> <span data-ttu-id="c320f-157">Die genauen Parameter können über die folgenden zwei Mitgliedschaft Anbieter Konfigurationseinstellungen konfiguriert werden:</span><span class="sxs-lookup"><span data-stu-id="c320f-157">The exact parameters are configurable through the following two Membership provider configuration settings:</span></span>

- <span data-ttu-id="c320f-158">`maxInvalidPasswordAttempts` -Gibt an, wie viele wurde ein ungültiges Kennwort Versuche dürfen für den Benutzer innerhalb des Zeitraums, bevor das Konto gesperrt ist. Der Standardwert ist 5.</span><span class="sxs-lookup"><span data-stu-id="c320f-158">`maxInvalidPasswordAttempts` - specifies how many invalid password attempts are allowed for the user within the time period before the account is locked out. The default value is 5.</span></span>
- <span data-ttu-id="c320f-159">`passwordAttemptWindow` -Gibt den Zeitraum in Minuten, während dessen die angegebene Anzahl von ungültigen Anmeldeversuchen führt dazu, dass das Konto gesperrt wird. Der Standardwert ist 10.</span><span class="sxs-lookup"><span data-stu-id="c320f-159">`passwordAttemptWindow` - indicates the time period in minutes during which the specified number of invalid login attempts will cause the account to be locked out. The default value is 10.</span></span>

<span data-ttu-id="c320f-160">Wenn ein Benutzer gesperrt wurde, kann nicht er sich erst anmelden, ein Administrator ihr Konto entsperrt.</span><span class="sxs-lookup"><span data-stu-id="c320f-160">If a user has been locked out, she cannot login until an administrator unlocks her account.</span></span> <span data-ttu-id="c320f-161">Wenn ein Benutzer gesperrt ist die `ValidateUser` Methode wird *immer* zurückgeben `false`, selbst wenn Sie gültige Anmeldeinformationen angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="c320f-161">When a user is locked out, the `ValidateUser` method will *always* return `false`, even if valid credentials are supplied.</span></span> <span data-ttu-id="c320f-162">Während dieses Verhalten die Wahrscheinlichkeit, die ein Hacker durch Brute-Force-Methoden in Ihrer Website unterbrochen wird verringert, kann er ein gültiger Benutzer, einfach das Kennwort vergessen hat oder versehentlich die FESTSTELLTASTE aktiviert ist, auf oder hat einen ungültigen Eingabe Tag, Sperrung annehmen.</span><span class="sxs-lookup"><span data-stu-id="c320f-162">While this behavior lessens the likelihood that a hacker will break into your site through brute force methods, it can end up locking out a valid user who has simply forgotten her password or accidentally has the Caps Lock on or is having a bad typing day.</span></span>

<span data-ttu-id="c320f-163">Leider ist kein integriertes Tool zum Entsperren eines Benutzerkontos.</span><span class="sxs-lookup"><span data-stu-id="c320f-163">Unfortunately, there is no built-in tool for unlocking a user account.</span></span> <span data-ttu-id="c320f-164">Um ein Konto entsperren zu können, können Sie Änderungen an der Datenbank direkt - ändern der `IsLockedOut` -Feld in der `aspnet_Membership` für das entsprechende Benutzerkonto - Tabelle oder eine webbasierte Schnittstelle erstellen, die listet gesperrt, Konten mit Optionen, um sie zu entsperren.</span><span class="sxs-lookup"><span data-stu-id="c320f-164">In order to unlock an account, you can modify the database directly - change the `IsLockedOut` field in the `aspnet_Membership` table for the appropriate user account - or create a web-based interface that lists locked out accounts with options to unlock them.</span></span> <span data-ttu-id="c320f-165">Untersuchen wir erstellen administratorschnittstellen für das Ausführen der häufig anfallenden Benutzeraufgaben Konto und rollenbezogenen in einem späteren Lernprogramm.</span><span class="sxs-lookup"><span data-stu-id="c320f-165">We will examine creating administrative interfaces for accomplishing common user account- and role-related tasks in a future tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="c320f-166">Ein Nachteil der `ValidateUser` Methode ist, wenn die angegebenen Anmeldeinformationen ungültig sind, kein Erklärung verdeutlichen, warum bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="c320f-166">One downside of the `ValidateUser` method is that when the supplied credentials are invalid, it does not provide any explanation as to why.</span></span> <span data-ttu-id="c320f-167">Die Anmeldeinformationen möglicherweise ungültig, da keine übereinstimmenden Benutzername/Kennwort-Paar im Speicher Benutzers vorhanden ist oder, da der Benutzer noch nicht genehmigt wurde oder weil der Benutzer gesperrt wurde. In Schritt 4 sehen wir, wie eine detaillierte Meldung für dem Benutzer angezeigt, wenn ihre Anmeldeversuch einen Fehler erzeugt.</span><span class="sxs-lookup"><span data-stu-id="c320f-167">The credentials may be invalid because there is no matching username/password pair in the user store, or because the user has not yet been approved, or because the user has been locked out. In Step 4 we will see how to show a more detailed message to the user when their login attempt fails.</span></span>


## <a name="step-2-collecting-credentials-through-the-login-web-control"></a><span data-ttu-id="c320f-168">Schritt 2: Sammeln von Anmeldeinformationen über die Login-Websteuerelement</span><span class="sxs-lookup"><span data-stu-id="c320f-168">Step 2: Collecting Credentials through the Login Web Control</span></span>

<span data-ttu-id="c320f-169">Die [Anmeldung Websteuerelement](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) rendert eine Standardbenutzeroberfläche sehr ähnlich, mit dem es erstellt, wieder in haben die <a id="SKM5"> </a> [ *eine Übersicht der Formularauthentifizierung* ](../introduction/an-overview-of-forms-authentication-cs.md) Lernprogramm.</span><span class="sxs-lookup"><span data-stu-id="c320f-169">The [Login Web control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) renders a default user interface very similar to the one we created back in the <a id="SKM5"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial.</span></span> <span data-ttu-id="c320f-170">Verwenden das Steuerelement für die Anmeldung erspart uns die erstellen die Schnittstelle, um den Besucher-s-Anmeldeinformationen zu sammeln.</span><span class="sxs-lookup"><span data-stu-id="c320f-170">Using the Login control saves us the work of having to create the interface to collect the visitor�s credentials.</span></span> <span data-ttu-id="c320f-171">Darüber hinaus signiert das Steuerelement für die Anmeldung automatisch in der Benutzerliste (vorausgesetzt, dass die übermittelten Anmeldeinformationen gültig sind), und Speichern von uns keinen Code schreiben müssen.</span><span class="sxs-lookup"><span data-stu-id="c320f-171">Moreover, the Login control automatically signs in the user (assuming the submitted credentials are valid), thereby saving us from having to write any code.</span></span>

<span data-ttu-id="c320f-172">Wir aktualisieren `Login.aspx`, und Ersetzen Sie dabei den manuell erstellten Benutzeroberfläche und code mit einem Anmeldungssteuerelement.</span><span class="sxs-lookup"><span data-stu-id="c320f-172">Let's update `Login.aspx`, replacing the manually created interface and code with a Login control.</span></span> <span data-ttu-id="c320f-173">Entfernen Sie zuerst das vorhandene Markup und code in `Login.aspx`.</span><span class="sxs-lookup"><span data-stu-id="c320f-173">Start by removing the existing markup and code in `Login.aspx`.</span></span> <span data-ttu-id="c320f-174">Sofortiges zu löschen, oder kommentieren Sie es aus. Um deklaratives Markup auskommentieren, setzen Sie sie mit der `<%--` und `--%>` Trennzeichen.</span><span class="sxs-lookup"><span data-stu-id="c320f-174">You may delete it outright, or simply comment it out. To comment out declarative markup, surround it with the `<%--` and `--%>` delimiters.</span></span> <span data-ttu-id="c320f-175">Sie können diese Trennzeichen manuell eingeben, oder wie in Abbildung 2 gezeigt, kann, wählen Sie den Text zu kommentieren Sie Sie aus, und klicken Sie dann auf die Kommentieren Sie das Symbol "ausgewählte Zeilen" in der Symbolleiste.</span><span class="sxs-lookup"><span data-stu-id="c320f-175">You can enter these delimiters manually, or, as Figure 2 shows, you may select the text to comment out and then click the Comment out the selected lines icon in the Toolbar.</span></span> <span data-ttu-id="c320f-176">Auf ähnliche Weise können Sie die Kommentieren Sie das Symbol für die ausgewählten Zeilen verwenden, so kommentieren Sie den ausgewählten Code in der CodeBehind-Klasse.</span><span class="sxs-lookup"><span data-stu-id="c320f-176">Similarly, you can use the Comment out the selected lines icon to comment out the selected code in the code-behind class.</span></span>


<span data-ttu-id="c320f-177">[![Kommentieren Sie die vorhandenen deklarativem Markup und den Quellcode in "Login.aspx"](validating-user-credentials-against-the-membership-user-store-cs/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="c320f-177">[![Comment Out the Existing Declarative Markup and Source Code in Login.aspx](validating-user-credentials-against-the-membership-user-store-cs/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image4.png)</span></span>

<span data-ttu-id="c320f-178">**Abbildung 2**: Kommentar, der vorhandenen deklarativem Markup und Quellcode in `Login.aspx` ([klicken Sie hier, um das Bild in voller Größe angezeigt](validating-user-credentials-against-the-membership-user-store-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="c320f-178">**Figure 2**: Comment Out the Existing Declarative Markup and Source Code in `Login.aspx` ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image6.png))</span></span>


> [!NOTE]
> <span data-ttu-id="c320f-179">Die Kommentieren Sie das Symbol "ausgewählte Zeilen" ist nicht verfügbar, beim Anzeigen von deklarativem Markup in Visual Studio 2005.</span><span class="sxs-lookup"><span data-stu-id="c320f-179">The Comment out the selected lines icon is not available when viewing the declarative markup in Visual Studio 2005.</span></span> <span data-ttu-id="c320f-180">Wenn Sie nicht Visual Studio 2008 verwenden, müssen manuell hinzufügen der `<%--` und `--%>` Trennzeichen.</span><span class="sxs-lookup"><span data-stu-id="c320f-180">If you are not using Visual Studio 2008 you will need to manually add the `<%--` and `--%>` delimiters.</span></span>


<span data-ttu-id="c320f-181">Ziehen Sie eine Anmeldesteuerelement aus der Toolbox auf die Seite, und legen Sie dessen `ID` Eigenschaft `myLogin`.</span><span class="sxs-lookup"><span data-stu-id="c320f-181">Next, drag a Login control from the Toolbox on to the page and set its `ID` property to `myLogin`.</span></span> <span data-ttu-id="c320f-182">An diesem Punkt sollte Ihr Bildschirm in Abbildung 3 ähneln.</span><span class="sxs-lookup"><span data-stu-id="c320f-182">At this point your screen should look similar to Figure 3.</span></span> <span data-ttu-id="c320f-183">Beachten Sie, dass die Anmeldung des Steuerelements Standardschnittstelle TextBox-Steuerelemente für den Benutzernamen und Kennwort, eine Anmeldedaten Kontrollkästchen und eine Schaltfläche "Protokoll In" enthält.</span><span class="sxs-lookup"><span data-stu-id="c320f-183">Note that the Login control's default interface includes TextBox controls for the username and password, a Remember me next time CheckBox, and a Log In Button.</span></span> <span data-ttu-id="c320f-184">Es gibt auch `RequiredFieldValidator` Steuerelemente für die beiden Textfelder ein.</span><span class="sxs-lookup"><span data-stu-id="c320f-184">There are also `RequiredFieldValidator` controls for the two TextBoxes.</span></span>


<span data-ttu-id="c320f-185">[![Hinzufügen eines Steuerelements für die Anmeldung zu der Seite "](validating-user-credentials-against-the-membership-user-store-cs/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="c320f-185">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-cs/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image7.png)</span></span>

<span data-ttu-id="c320f-186">**Abbildung 3**: Hinzufügen eines Steuerelements für die Anmeldung zu der Seite "([klicken Sie hier, um das Bild in voller Größe angezeigt](validating-user-credentials-against-the-membership-user-store-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="c320f-186">**Figure 3**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image9.png))</span></span>


<span data-ttu-id="c320f-187">Und wir sind fertig!</span><span class="sxs-lookup"><span data-stu-id="c320f-187">And we're done!</span></span> <span data-ttu-id="c320f-188">Bei der Anmeldung des Steuerelements anmelden Schaltfläche klicken, wird ein Postback tritt auf, und rufen Sie das Steuerelement für die Anmeldung wird die `Membership.ValidateUser` Methode und übergeben des eingegebenen Benutzernamens und Kennworts.</span><span class="sxs-lookup"><span data-stu-id="c320f-188">When the Login control's Log In button is clicked, a postback will occur and the Login control will call the `Membership.ValidateUser` method, passing in the entered username and password.</span></span> <span data-ttu-id="c320f-189">Wenn die Anmeldeinformationen ungültig sind, zeigt das Steuerelement für die Anmeldung eine Meldung angezeigt, z. B. an.</span><span class="sxs-lookup"><span data-stu-id="c320f-189">If the credentials are invalid, the Login control displays a message stating such.</span></span> <span data-ttu-id="c320f-190">Wenn Sie jedoch die Anmeldeinformationen gültig sind, klicken Sie dann das Steuerelement für die Anmeldung erstellt die Formulare Authentifizierungsticket, und leitet den Benutzer an die entsprechende Seite.</span><span class="sxs-lookup"><span data-stu-id="c320f-190">If, however, the credentials are valid, then the Login control creates the forms authentication ticket and redirects the user to the appropriate page.</span></span>

<span data-ttu-id="c320f-191">Das Steuerelement für die Anmeldung verwendet vier Faktoren, die entsprechende Seite zum Umleiten des Benutzers, um nach einer erfolgreichen Anmeldung festzulegen:</span><span class="sxs-lookup"><span data-stu-id="c320f-191">The Login control uses four factors to determine the appropriate page to redirect the user to upon a successful login:</span></span>

- <span data-ttu-id="c320f-192">Gibt an, ob das Steuerelement für die Anmeldung auf der Anmeldeseite wird gemäß der Definition von `loginUrl` ist der Standardwert für diese Einstellung festlegen, in die Konfiguration der Formularauthentifizierung; `Login.aspx`</span><span class="sxs-lookup"><span data-stu-id="c320f-192">Whether the Login control is on the login page as defined by `loginUrl` setting in the forms authentication configuration; this setting's default value is `Login.aspx`</span></span>
- <span data-ttu-id="c320f-193">Das Vorhandensein einer `ReturnUrl` Querystring-Parameter</span><span class="sxs-lookup"><span data-stu-id="c320f-193">The presence of a `ReturnUrl` querystring parameter</span></span>
- <span data-ttu-id="c320f-194">Der Wert des Steuerelements für die Anmeldung [ `DestinationUrl` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span><span class="sxs-lookup"><span data-stu-id="c320f-194">The value of the Login control's [`DestinationUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span></span>
- <span data-ttu-id="c320f-195">Die `defaultUrl` Wert, der in den Formularen Konfigurationseinstellungen für die Authentifizierung angegeben; der Standardwert für diese Einstellung ist `Default.aspx`</span><span class="sxs-lookup"><span data-stu-id="c320f-195">The `defaultUrl` value specified in the forms authentication configuration settings; this setting's default value is `Default.aspx`</span></span>

<span data-ttu-id="c320f-196">Abbildung 4 zeigt, wie das Steuerelement für die Anmeldung verwendet diese vier Parameter, die entsprechende Seite Entscheidung ankommen.</span><span class="sxs-lookup"><span data-stu-id="c320f-196">Figure 4 depicts the how the Login control uses these four parameters to arrive at its appropriate page decision.</span></span>


<span data-ttu-id="c320f-197">[![Hinzufügen eines Steuerelements für die Anmeldung zu der Seite "](validating-user-credentials-against-the-membership-user-store-cs/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="c320f-197">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-cs/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image10.png)</span></span>

<span data-ttu-id="c320f-198">**Abbildung 4**: Hinzufügen eines Steuerelements für die Anmeldung zu der Seite "([klicken Sie hier, um das Bild in voller Größe angezeigt](validating-user-credentials-against-the-membership-user-store-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="c320f-198">**Figure 4**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image12.png))</span></span>


<span data-ttu-id="c320f-199">Nehmen Sie einen Moment Zeit, von der Website über einen Browser und Anmeldung als einen vorhandenen Benutzer in die Mitgliedschaft Framework das Steuerelement für die Anmeldung zu testen.</span><span class="sxs-lookup"><span data-stu-id="c320f-199">Take a moment to test out the Login control by visiting the site through a browser and logging in as an existing user in the Membership framework.</span></span>

<span data-ttu-id="c320f-200">Gerenderten des Login-Steuerelements-Schnittstelle ist hochgradig konfigurierbar.</span><span class="sxs-lookup"><span data-stu-id="c320f-200">The Login control's rendered interface is highly configurable.</span></span> <span data-ttu-id="c320f-201">Es gibt eine Reihe von Eigenschaften, die ihre Darstellung zu beeinflussen. Darüber kann das Steuerelement für die Anmeldung zu einer Vorlage für präzise Kontrolle über das Layout der Elemente der Benutzeroberfläche konvertiert werden.</span><span class="sxs-lookup"><span data-stu-id="c320f-201">There are a number of properties that influence its appearance; what's more, the Login control can be converted into a template for precise control over the layout the user interface elements.</span></span> <span data-ttu-id="c320f-202">Der Rest dieses Schritts untersucht, wie die Darstellung und das Layout anpassen.</span><span class="sxs-lookup"><span data-stu-id="c320f-202">The remainder of this step examines how to customize the appearance and layout.</span></span>

### <a name="customizing-the-login-controls-appearance"></a><span data-ttu-id="c320f-203">Anpassen der Darstellung des Steuerelements für die Anmeldung</span><span class="sxs-lookup"><span data-stu-id="c320f-203">Customizing the Login Control's Appearance</span></span>

<span data-ttu-id="c320f-204">Standardeinstellungen für Eigenschaften des Steuerelements für die Anmeldung Rendern einer Benutzeroberfläche mit einem Titel (Anmelden), TextBox und Label-Steuerelemente für die Eingaben Benutzername und Kennwort, eine Anmeldedaten beim nächsten Mal aktiviert, und eine Schaltfläche "Anmelden".</span><span class="sxs-lookup"><span data-stu-id="c320f-204">The Login control's default property settings render a user interface with a title ( Log In ), TextBox and Label controls for the username and password inputs, a Remember me next time CheckBox, and a Log In button.</span></span> <span data-ttu-id="c320f-205">Die Darstellung eines dieser Elemente sind alle konfigurierbar über zahlreiche Eigenschaften des Login-Steuerelements.</span><span class="sxs-lookup"><span data-stu-id="c320f-205">The appearances of these elements are all configurable through the Login control's numerous properties.</span></span> <span data-ttu-id="c320f-206">Darüber hinaus können zusätzliche Elemente der Benutzeroberfläche – wie z. B. einen Link zu einer Seite zum Erstellen eines neuen Benutzerkontos - durch Festlegen einer Eigenschaft oder zwei hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="c320f-206">Furthermore, additional user interface elements - such as a link to a page to create a new user account - can be added by setting a property or two.</span></span>

<span data-ttu-id="c320f-207">Werfen wir kurz einen Augenblick, um die Darstellung von Steuerelement für die Anmeldung gussy.</span><span class="sxs-lookup"><span data-stu-id="c320f-207">Let's spend a few moments to gussy up the appearance of our Login control.</span></span> <span data-ttu-id="c320f-208">Da die `Login.aspx` Seite verfügt bereits über Text am oberen Rand der Seite, die besagt, Anmeldenamen dass, Titel des Steuerelements für die Anmeldung ist überflüssig.</span><span class="sxs-lookup"><span data-stu-id="c320f-208">Since the `Login.aspx` page already has text at the top of the page that says Login, the Login control's title is superfluous.</span></span> <span data-ttu-id="c320f-209">Löschen Sie daher, den [ `TitleText` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) Wert um den Titel des Steuerelements für die Anmeldung zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="c320f-209">Therefore, clear out the [`TitleText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) value in order to remove the Login control's title.</span></span>

<span data-ttu-id="c320f-210">Der Benutzername: und Kennwort: Bezeichnungen auf der linken Seite des zwei TextBox-Steuerelemente können angepasst werden, über die [ `UserNameLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) und [ `PasswordLabelText` Eigenschaften](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx)bzw.</span><span class="sxs-lookup"><span data-stu-id="c320f-210">The User Name: and Password: Labels to the left of the two TextBox controls can be customized through the [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) and [`PasswordLabelText` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx), respectively.</span></span> <span data-ttu-id="c320f-211">Ändern Sie den Benutzernamen ein: Bezeichnung Username lesen:.</span><span class="sxs-lookup"><span data-stu-id="c320f-211">Let's change the User Name: Label to read Username:.</span></span> <span data-ttu-id="c320f-212">Die Bezeichnung und einer TextBox-Stile sind konfigurierbar über die [ `LabelStyle` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) und [ `TextBoxStyle` Eigenschaften](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx)bzw.</span><span class="sxs-lookup"><span data-stu-id="c320f-212">The Label and TextBox styles are configurable through the [`LabelStyle`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) and [`TextBoxStyle` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx), respectively.</span></span>

<span data-ttu-id="c320f-213">Die Anmeldedaten weiter Zeit Kontrollkästchen Text-Eigenschaft werden, über die Anmelde-Steuerelement festgelegt kann [ `RememberMeText property` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), und der Standardwert überprüft Zustand ist konfigurierbar über die [ `RememberMeSet property` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx) (die Der Standardwert ist "false").</span><span class="sxs-lookup"><span data-stu-id="c320f-213">The Remember me next time CheckBox's Text property can be set through the Login control's [`RememberMeText property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), and its default checked state is configurable through the [`RememberMeSet property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx) (which defaults to False).</span></span> <span data-ttu-id="c320f-214">Fahren Sie fort, und legen Sie die `RememberMeSet` Eigenschaft auf "true", damit die Anmeldedaten beim nächsten Mal Kontrollkästchen wird standardmäßig aktiviert sein.</span><span class="sxs-lookup"><span data-stu-id="c320f-214">Go ahead and set the `RememberMeSet` property to True so that the Remember me next time CheckBox will be checked by default.</span></span>

<span data-ttu-id="c320f-215">Das Steuerelement für die Anmeldung bietet zwei Eigenschaften für das Layout der Steuerelemente der Benutzeroberfläche anpassen.</span><span class="sxs-lookup"><span data-stu-id="c320f-215">The Login control offers two properties for adjusting the layout of its user interface controls.</span></span> <span data-ttu-id="c320f-216">Die [ `TextLayout property` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) gibt an, ob der Benutzername: und Kennwort: Bezeichnungen auf der linken Seite die entsprechenden Textfelder ein (Standard) oder darüber liegenden angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="c320f-216">The [`TextLayout property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) indicates whether the Username: and Password: Labels appear to the left of their corresponding TextBoxes (the default), or above them.</span></span> <span data-ttu-id="c320f-217">Die [ `Orientation property` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) gibt an, ob der Benutzername und Kennwort Eingaben vertikal befinden (übereinander) oder horizontal.</span><span class="sxs-lookup"><span data-stu-id="c320f-217">The [`Orientation property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) indicates whether the username and password inputs are situated vertically (one above the other) or horizontally.</span></span> <span data-ttu-id="c320f-218">Ich werde diese beiden Eigenschaften auf ihre Standardwerte festgelegt zu lassen, jedoch sollten Sie versuchen, diese beiden Eigenschaften festlegen, auf die nicht standardmäßige Werte, die sich ergebende Auswirkung anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="c320f-218">I am going to leave these two properties set to their defaults, but I encourage you to try setting these two properties to their non-default values to see the resulting effect.</span></span>

> [!NOTE]
> <span data-ttu-id="c320f-219">Im nächsten Abschnitt betrachten konfigurieren Layout des Steuerelements für die Anmeldung, wir definieren Sie die präzise Layout der Elemente der Benutzeroberfläche des Layout-Steuerelements mithilfe von Vorlagen.</span><span class="sxs-lookup"><span data-stu-id="c320f-219">In the next section, Configuring the Login Control's Layout, we will look at using templates to define the precise layout of the Layout control's user interface elements.</span></span>


<span data-ttu-id="c320f-220">Wrappen von Einstellungen für die Anmeldung des Steuerelements durch Festlegen der [ `CreateUserText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) und [ `CreateUserUrl` Eigenschaften](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) auf Not noch registriert?</span><span class="sxs-lookup"><span data-stu-id="c320f-220">Wrap up the Login control's property settings by setting the [`CreateUserText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) and [`CreateUserUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) to Not registered yet?</span></span> <span data-ttu-id="c320f-221">Erstellen Sie ein Konto!</span><span class="sxs-lookup"><span data-stu-id="c320f-221">Create an account!</span></span> <span data-ttu-id="c320f-222">und `~/Membership/CreatingUserAccounts.aspx`zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="c320f-222">and `~/Membership/CreatingUserAccounts.aspx`, respectively.</span></span> <span data-ttu-id="c320f-223">Dadurch wird die Anmeldung Schnittstelle des Steuerelements auf der Seite "wird, in erstellt einen Link hinzugefügt der <a id="SKM6"> </a> [vorherigen Lernprogramm](creating-user-accounts-cs.md).</span><span class="sxs-lookup"><span data-stu-id="c320f-223">This adds a hyperlink to the Login control's interface pointing to the page we created in the <a id="SKM6"></a>[preceding tutorial](creating-user-accounts-cs.md).</span></span> <span data-ttu-id="c320f-224">Die Anmeldung des Steuerelements [ `HelpPageText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) und [ `HelpPageUrl` Eigenschaften](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) und [ `PasswordRecoveryText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) und [ `PasswordRecoveryUrl` Eigenschaften](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) funktionieren in die gleiche Weise Rendern von Links zu einer Hilfeseite und eine Seite "Kennwort Recovery".</span><span class="sxs-lookup"><span data-stu-id="c320f-224">The Login control's [`HelpPageText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) and [`HelpPageUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) and [`PasswordRecoveryText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) and [`PasswordRecoveryUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) work in the same manner, rendering links to a help page and a password recovery page.</span></span>

<span data-ttu-id="c320f-225">Nachdem diese eigenschaftenänderungen vorgenommen wurden, sollte deklarativem Markup und die Darstellung des Steuerelements Anmeldung, die in Abbildung 5 dargestellten ähneln.</span><span class="sxs-lookup"><span data-stu-id="c320f-225">After making these property changes, your Login control's declarative markup and appearance should look similar to that shown in Figure 5.</span></span>


<span data-ttu-id="c320f-226">[![Eigenschaften des Steuerelements für die Anmeldung festgelegt seine Darstellung](validating-user-credentials-against-the-membership-user-store-cs/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="c320f-226">[![The Login Control's Properties' Values Dictate Its Appearance](validating-user-credentials-against-the-membership-user-store-cs/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image13.png)</span></span>

<span data-ttu-id="c320f-227">**Abbildung 5**: Eigenschaften des Login-Steuerelements Werte diktieren seine Darstellung ([klicken Sie hier, um das Bild in voller Größe angezeigt](validating-user-credentials-against-the-membership-user-store-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="c320f-227">**Figure 5**: The Login Control's Properties' Values Dictate Its Appearance  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image15.png))</span></span>


### <a name="configuring-the-login-controls-layout"></a><span data-ttu-id="c320f-228">Konfigurieren die Anmeldung das Steuerelementlayout</span><span class="sxs-lookup"><span data-stu-id="c320f-228">Configuring the Login Control's Layout</span></span>

<span data-ttu-id="c320f-229">Die Login-Websteuerelement-Standardbenutzeroberfläche angeordnet die Schnittstelle in einem HTML- `<table>`.</span><span class="sxs-lookup"><span data-stu-id="c320f-229">The Login Web control's default user interface lays out the interface in an HTML `<table>`.</span></span> <span data-ttu-id="c320f-230">Aber was geschieht, wenn wir eine präzisere Steuerung der gerenderten Ausgabe benötigen?</span><span class="sxs-lookup"><span data-stu-id="c320f-230">But what if we need finer control over the rendered output?</span></span> <span data-ttu-id="c320f-231">Vielleicht möchten wir ersetzen die `<table>` mit einer Reihe von `<div>` Tags.</span><span class="sxs-lookup"><span data-stu-id="c320f-231">Maybe we want to replace the `<table>` with a series of `<div>` tags.</span></span> <span data-ttu-id="c320f-232">Oder was geschieht, wenn die Anwendung zusätzliche Anmeldeinformationen für die Authentifizierung benötigt?</span><span class="sxs-lookup"><span data-stu-id="c320f-232">Or what if our application requires additional credentials for authentication?</span></span> <span data-ttu-id="c320f-233">Viele finanzielle Websites erfordern z. B. Benutzer, nicht nur einen Benutzernamen und ein Kennwort, aber auch eine Anzahl PIN (Personal Identification), oder andere identifizierende Informationen einzugeben.</span><span class="sxs-lookup"><span data-stu-id="c320f-233">Many financial websites, for instance, require users to supply not only a username and password, but also a Personal Identification Number (PIN), or other identifying information.</span></span> <span data-ttu-id="c320f-234">Alle von Ihnen gewünschten Gründe sein können, ist es möglich, das Steuerelement für die Anmeldung zu einer Vorlage konvertiert aus dem wir explizit die Schnittstelle deklarativem Markup definieren können.</span><span class="sxs-lookup"><span data-stu-id="c320f-234">Whatever the reasons may be, it is possible to convert the Login control into a template, from which we can explicitly define the interface's declarative markup.</span></span>

<span data-ttu-id="c320f-235">Wir benötigen zwei Aktionen zum Aktualisieren der Anmelde-Steuerelement, um zusätzliche Anmeldeinformationen zu sammeln:</span><span class="sxs-lookup"><span data-stu-id="c320f-235">We need to do two things in order to update the Login control to collect additional credentials:</span></span>

1. <span data-ttu-id="c320f-236">Aktualisieren Sie die Anmeldung Schnittstelle des Steuerelements Einbeziehung von Web-Steuerelemente, um die zusätzlichen Anmeldeinformationen zu sammeln.</span><span class="sxs-lookup"><span data-stu-id="c320f-236">Update the Login control's interface to include Web control(s) to collect the additional credentials.</span></span>
2. <span data-ttu-id="c320f-237">Überschreiben Sie die Anmeldung Steuerelementlogik interne Authentifizierung, sodass nur ein Benutzer authentifiziert wurde, ob Benutzername und Kennwort gültig ist und deren zusätzlichen Anmeldeinformationen ungültig sind.</span><span class="sxs-lookup"><span data-stu-id="c320f-237">Override the Login control's internal authentication logic so that a user is only authenticated if their username and password is valid and their additional credentials are valid, too.</span></span>

<span data-ttu-id="c320f-238">Um die erste Aufgabe zu erreichen, müssen wir das Steuerelement für die Anmeldung in eine Vorlage konvertieren und die erforderlichen Web-Steuerelemente hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="c320f-238">To accomplish the first task, we need to convert the Login control into a template and add the necessary Web controls.</span></span> <span data-ttu-id="c320f-239">Wie für die zweite Aufgabe kann Authentifizierungslogik des Login-Steuerelements durch Erstellen eines ereignishandlers für des Steuerelements abgelöst werden [ `Authenticate` Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span><span class="sxs-lookup"><span data-stu-id="c320f-239">As for the second task, the Login control's authentication logic can be superseded by creating an event handler for the control's [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span>

<span data-ttu-id="c320f-240">Wir aktualisieren das Steuerelement für die Anmeldung an, damit Benutzer ihren Benutzernamen, Kennwort und e-Mail-Adresse aufgefordert und den Benutzer nur, authentifiziert Wenn die angegebene e-Mail-Adresse ihre e-Mail-Adresse übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="c320f-240">Let's update the Login control so that it prompts users for their username, password, and email address and only authenticates the user if the email address supplied matches their email address on file.</span></span> <span data-ttu-id="c320f-241">Wir müssen zunächst die Login-Schnittstelle in einer Vorlage zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="c320f-241">We first need to convert the Login control's interface to a template.</span></span> <span data-ttu-id="c320f-242">Smarttag für die Anmeldung des Steuerelements wählen Sie in Vorlagenoption konvertieren.</span><span class="sxs-lookup"><span data-stu-id="c320f-242">From the Login control's Smart Tag, choose the Convert to template option.</span></span>


<span data-ttu-id="c320f-243">[![Das Steuerelement für die Anmeldung in eine Vorlage konvertieren](validating-user-credentials-against-the-membership-user-store-cs/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="c320f-243">[![Convert the Login Control to a Template](validating-user-credentials-against-the-membership-user-store-cs/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image16.png)</span></span>

<span data-ttu-id="c320f-244">**Abbildung 6**: das Steuerelement für die Anmeldung in eine Vorlage konvertieren ([klicken Sie hier, um das Bild in voller Größe angezeigt](validating-user-credentials-against-the-membership-user-store-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="c320f-244">**Figure 6**: Convert the Login Control to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image18.png))</span></span>


> [!NOTE]
> <span data-ttu-id="c320f-245">Um das Steuerelement Anmeldung mit ihrer vorab template Version wiederherzustellen, klicken Sie auf die Verknüpfung zurücksetzen Smarttag des Steuerelements.</span><span class="sxs-lookup"><span data-stu-id="c320f-245">To revert the Login control to its pre-template version, click the Reset link from the control's Smart Tag.</span></span>


<span data-ttu-id="c320f-246">Fügt das Steuerelement für die Anmeldung in eine Vorlage konvertieren einer `LayoutTemplate` , deklaratives Markup mit HTML-Elemente und Websteuerelemente Definieren der Benutzeroberfläche des Steuerelements.</span><span class="sxs-lookup"><span data-stu-id="c320f-246">Converting the Login control to a template adds a `LayoutTemplate` to the control's declarative markup with HTML elements and Web controls defining the user interface.</span></span> <span data-ttu-id="c320f-247">Wie Abbildung 7 zeigt ein Beispiel, das Steuerelement in eine Vorlage konvertieren entfernt eine Reihe von Eigenschaften über das Eigenschaftenfenster, wie z. B. `TitleText`, `CreateUserUrl`usw., da diese Eigenschaftswerte ignoriert werden, wenn eine Vorlage verwenden.</span><span class="sxs-lookup"><span data-stu-id="c320f-247">As Figure 7 shows, converting the control to a template removes a number of properties from the Properties window, such as `TitleText`, `CreateUserUrl`, and so forth, since these property values are ignored when using a template.</span></span>


<span data-ttu-id="c320f-248">[![Weniger Eigenschaften sind verfügbar bei der Anmeldung Steuerung in einer Vorlage konvertiert wird](validating-user-credentials-against-the-membership-user-store-cs/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="c320f-248">[![Fewer Properties are Available When the Login Control is Converted to a Template](validating-user-credentials-against-the-membership-user-store-cs/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image19.png)</span></span>

<span data-ttu-id="c320f-249">**Abbildung 7**: weniger Eigenschaften sind verfügbar bei der Anmeldung Steuerung in eine Vorlage konvertiert wird ([klicken Sie hier, um das Bild in voller Größe angezeigt](validating-user-credentials-against-the-membership-user-store-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="c320f-249">**Figure 7**: Fewer Properties are Available When the Login Control is Converted to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image21.png))</span></span>


<span data-ttu-id="c320f-250">Das HTML-Markup in der `LayoutTemplate` kann nach Bedarf geändert werden.</span><span class="sxs-lookup"><span data-stu-id="c320f-250">The HTML markup in the `LayoutTemplate` may be modified as needed.</span></span> <span data-ttu-id="c320f-251">Ebenso können Sie die Vorlage keine neuen Websteuerelemente hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="c320f-251">Likewise, feel free to add any new Web controls to the template.</span></span> <span data-ttu-id="c320f-252">Allerdings ist es wichtig, Anmeldung des Steuerelements den Core-Websteuerelemente bleiben in der Vorlage, und behalten ihre zugewiesenen `ID` Werte.</span><span class="sxs-lookup"><span data-stu-id="c320f-252">However, it is important that Login control's core Web controls remain in the template and keep their assigned `ID` values.</span></span> <span data-ttu-id="c320f-253">Insbesondere nicht entfernen oder Umbenennen der `UserName` oder `Password` Textfelder ein, die `RememberMe` Kontrollkästchen deaktivieren, können die `LoginButton` Schaltfläche, die `FailureText` Bezeichnung, oder die `RequiredFieldValidator` Steuerelemente.</span><span class="sxs-lookup"><span data-stu-id="c320f-253">In particular, do not remove or rename the `UserName` or `Password` TextBoxes, the `RememberMe` CheckBox, the `LoginButton` Button, the `FailureText` Label, or the `RequiredFieldValidator` controls.</span></span>

<span data-ttu-id="c320f-254">Um die e-Mail-Adresse des Besuchers zu sammeln, müssen wir ein Textfeld zur Vorlage hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="c320f-254">To collect the visitor's email address, we need to add a TextBox to the template.</span></span> <span data-ttu-id="c320f-255">Fügen Sie das folgende deklarative Markup zwischen der Tabellenzeile (`<tr>`), enthält die `Password` Textfeld und die Tabellenzeile, die die Anmeldedaten neben enthält den Zeitpunkt Kontrollkästchen:</span><span class="sxs-lookup"><span data-stu-id="c320f-255">Add the following declarative markup between the table row (`<tr>`) that contains the `Password` TextBox and the table row that holds the Remember me next time CheckBox:</span></span>

[!code-aspx[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample2.aspx)]

<span data-ttu-id="c320f-256">Nach dem Hinzufügen der `Email` TextBox, besuchen Sie die Seite über einen Browser.</span><span class="sxs-lookup"><span data-stu-id="c320f-256">After adding the `Email` TextBox, visit the page through a browser.</span></span> <span data-ttu-id="c320f-257">Wie in Abbildung 8 gezeigt, enthält die Benutzeroberfläche des Steuerelements für die Anmeldung nun eine dritte Textfeld.</span><span class="sxs-lookup"><span data-stu-id="c320f-257">As Figure 8 shows, the Login control's user interface now includes a third textbox.</span></span>


<span data-ttu-id="c320f-258">[![Das Steuerelement für die Anmeldung enthält nun ein Textfeld für die e-Mail-Adresse des Benutzers](validating-user-credentials-against-the-membership-user-store-cs/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="c320f-258">[![The Login Control Now Includes a Textbox for the User's Email Address](validating-user-credentials-against-the-membership-user-store-cs/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image22.png)</span></span>

<span data-ttu-id="c320f-259">**Abbildung 8**: das Steuerelement für die Anmeldung enthält jetzt ein Textfeld für die e-Mail-Adresse des Benutzers ([klicken Sie hier, um das Bild in voller Größe angezeigt](validating-user-credentials-against-the-membership-user-store-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="c320f-259">**Figure 8**: The Login Control Now Includes a Textbox for the User's Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image24.png))</span></span>


<span data-ttu-id="c320f-260">Das Steuerelement für die Anmeldung wird an diesem Punkt noch verwenden die `Membership.ValidateUser` Methode, um die bereitgestellten Anmeldeinformationen zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="c320f-260">At this point, the Login control is still using the `Membership.ValidateUser` method to validate the supplied credentials.</span></span> <span data-ttu-id="c320f-261">Entsprechend der eingegebene Wert in der `Email` Textfeld hat keinen Einfluss auf, ob der Benutzer anmelden kann.</span><span class="sxs-lookup"><span data-stu-id="c320f-261">Correspondingly, the value entered into the `Email` TextBox has no bearing on whether the user can log in.</span></span> <span data-ttu-id="c320f-262">In Schritt 3 betrachten wir das Authentifizierungslogik des Login-Steuerelements überschreiben, damit die Anmeldeinformationen dann sind nur gültig ist, wenn Benutzername und Kennwort gültig sind und die angegebene e-Mail-Adresse, mit der e-Mail-Adresse auf Datei eingerichtet übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="c320f-262">In Step 3 we will look at how to override the Login control's authentication logic so that the credentials are only considered valid if the username and password are valid and the supplied email address matches up with the email address on file.</span></span>

## <a name="step-3-modifying-the-login-controls-authentication-logic"></a><span data-ttu-id="c320f-263">Schritt 3: Ändern des Login-Steuerelements Authentifizierungslogik</span><span class="sxs-lookup"><span data-stu-id="c320f-263">Step 3: Modifying the Login Control's Authentication Logic</span></span>

<span data-ttu-id="c320f-264">Wenn ein Anna Besucher steuern Anmeldeinformationen und klickt, die die Schaltfläche "Anmelden", was zu einem Postback erfolgt und die Anmeldung durchläuft der authentifizierungsworkflow.</span><span class="sxs-lookup"><span data-stu-id="c320f-264">When a visitor supplies her credentials and clicks the Log In button, a postback ensues and the Login control progresses through its authentication workflow.</span></span> <span data-ttu-id="c320f-265">Der Workflow gestartet wird, indem Sie durch das Auslösen der [ `LoggingIn` Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span><span class="sxs-lookup"><span data-stu-id="c320f-265">The workflow starts by raising the [`LoggingIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span></span> <span data-ttu-id="c320f-266">Alle diesem Ereignis zugeordnete Ereignishandler können das Protokoll in Vorgang abbrechen, indem die `e.Cancel` Eigenschaft `true`.</span><span class="sxs-lookup"><span data-stu-id="c320f-266">Any event handlers associated with this event may cancel the log in operation by setting the `e.Cancel` property to `true`.</span></span>

<span data-ttu-id="c320f-267">Wenn das Protokoll in der Vorgang nicht abgebrochen wird, wechselt der Workflow durch Auslösen der [ `Authenticate` Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span><span class="sxs-lookup"><span data-stu-id="c320f-267">If the log in operation is not cancelled, the workflow progresses by raising the [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span> <span data-ttu-id="c320f-268">Es ist ein Ereignishandler für das `Authenticate` Ereignis, dann werden ist zuständig für das ermitteln, ob die angegebenen Anmeldeinformationen gültig sind.</span><span class="sxs-lookup"><span data-stu-id="c320f-268">If there is an event handler for the `Authenticate` event, then it is responsible for determining whether the supplied credentials are valid or not.</span></span> <span data-ttu-id="c320f-269">Wenn kein Ereignishandler angegeben wird, wird das Steuerelement für die Anmeldung verwendet die `Membership.ValidateUser` Methode, um die Gültigkeit der Anmeldeinformationen festzulegen.</span><span class="sxs-lookup"><span data-stu-id="c320f-269">If no event handler is specified, the Login control uses the `Membership.ValidateUser` method to determine the validity of the credentials.</span></span>

<span data-ttu-id="c320f-270">Wenn die angegebenen Anmeldeinformationen gültig sind, und klicken Sie dann das Formularauthentifizierungsticket erstellt wird, die [ `LoggedIn` Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) ausgelöst wird, und der Benutzer an die entsprechende Seite umgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="c320f-270">If the supplied credentials are valid, then the forms authentication ticket is created, the [`LoggedIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) is raised, and the user is redirected to the appropriate page.</span></span> <span data-ttu-id="c320f-271">Wenn Sie jedoch die Anmeldeinformationen als ungültig eingestuft werden und dann die [ `LoginError` Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) wird ausgelöst, und eine Meldung angezeigt wird, den Benutzer darüber informiert, dass ihre Anmeldeinformationen ungültig sind.</span><span class="sxs-lookup"><span data-stu-id="c320f-271">If, however, the credentials are deemed invalid, then the [`LoginError` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) is raised and a message is displayed informing the user that their credentials were invalid.</span></span> <span data-ttu-id="c320f-272">Standardmäßig bei der Anmeldung Steuerelement einfach legt seine `FailureText` bezeichnen Text-Eigenschaft des Steuerelements, um eine Fehlermeldung (die Anmeldung war nicht erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="c320f-272">By default, on failure the Login control simply sets its `FailureText` Label control's Text property to a failure message ( Your login attempt was not successful.</span></span> <span data-ttu-id="c320f-273">Versuchen Sie es).</span><span class="sxs-lookup"><span data-stu-id="c320f-273">Please try again ).</span></span> <span data-ttu-id="c320f-274">Jedoch wenn des Login-Steuerelements [ `FailureAction` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) auf festgelegt ist `RedirectToLoginPage`, klicken Sie dann die Anmeldung Steuerelement Probleme eine `Response.Redirect` zur Anmeldeseite Anhängen des Querystring-Parameters `loginfailure=1` (Dadurch wird die Anmeldung Steuerelement, das die Fehlermeldung anzuzeigen.)</span><span class="sxs-lookup"><span data-stu-id="c320f-274">However, if the Login control's [`FailureAction` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) is set to `RedirectToLoginPage`, then the Login control issues a `Response.Redirect` to the login page appending the querystring parameter `loginfailure=1` (which causes the Login control to display the failure message).</span></span>

<span data-ttu-id="c320f-275">Abbildung 9 bietet es sich um ein Flussdiagramm des Workflows Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="c320f-275">Figure 9 offers a flow chart of the authentication workflow.</span></span>


<span data-ttu-id="c320f-276">[![Die Anmeldung des Steuerelements Authentifizierungsworkflow](validating-user-credentials-against-the-membership-user-store-cs/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="c320f-276">[![The Login Control's Authentication Workflow](validating-user-credentials-against-the-membership-user-store-cs/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image25.png)</span></span>

<span data-ttu-id="c320f-277">**Abbildung 9**: Authentifizierungsworkflow der Login-Steuerung ([klicken Sie hier, um das Bild in voller Größe angezeigt](validating-user-credentials-against-the-membership-user-store-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="c320f-277">**Figure 9**: The Login Control's Authentication Workflow  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image27.png))</span></span>


> [!NOTE]
> <span data-ttu-id="c320f-278">Wenn Sie wissen möchten, wenn Sie verwenden würden die `FailureAction`des `RedirectToLogin` Seite die Option, sollten Sie das folgende Szenario.</span><span class="sxs-lookup"><span data-stu-id="c320f-278">If you are wondering when you would use the `FailureAction`'s `RedirectToLogin` page option, consider the following scenario.</span></span> <span data-ttu-id="c320f-279">Jetzt unsere `Site.master` Masterseite hat derzeit den Text Hello, in der linken Spalte durch einen anonymen Benutzer besucht stranger angezeigt, aber angenommen, wir, ersetzen Sie diesen Text mit einem Anmeldungssteuerelement möchten.</span><span class="sxs-lookup"><span data-stu-id="c320f-279">Right now our `Site.master` master page currently has the text, Hello, stranger displayed in the left column when visited by an anonymous user, but imagine that we wanted to replace that text with a Login control.</span></span> <span data-ttu-id="c320f-280">Dies würde es sich um einen anonymen Benutzer aus einer beliebigen Seite auf der Website, anstatt sie direkt die Login-Seite besuchen Anmelden ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="c320f-280">This would allow an anonymous user to log in from any page on the site, instead of requiring them to visit the login page directly.</span></span> <span data-ttu-id="c320f-281">Jedoch wenn ein Benutzer nicht anmelden über das Steuerelement für die Anmeldung durch die Masterseite gerendert wurde, es möglicherweise sinnvoll, sie zur Anmeldeseite umgeleitet (`Login.aspx`) da diese Seite, die wahrscheinlich zusätzliche Anweisungen, Links und anderen Hilfe - z. B. Links zu erstellen enthält ein Neues Konto oder Abrufen eines verlorenen Kennworts -, die nicht der Masterseite hinzugefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="c320f-281">However, if a user was unable to log in via the Login control rendered by the master page, it might make sense to redirect them to the login page (`Login.aspx`) because that page likely includes additional instructions, links, and other help - such as links to create a new account or retrieve a lost password - that were not added to the master page.</span></span>


### <a name="creating-theauthenticateevent-handler"></a><span data-ttu-id="c320f-282">Erstellen der`Authenticate`-Ereignishandler</span><span class="sxs-lookup"><span data-stu-id="c320f-282">Creating the`Authenticate`Event Handler</span></span>

<span data-ttu-id="c320f-283">Um unsere benutzerdefinierte Authentifizierungslogik einbinden, müssen wir erstellen Sie einen Ereignishandler für die Anmeldung des Steuerelements `Authenticate` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="c320f-283">In order to plug in our custom authentication logic, we need to create an event handler for the Login control's `Authenticate` event.</span></span> <span data-ttu-id="c320f-284">Erstellen einen Ereignishandler für das `Authenticate` Ereignis wird die folgende Definition der Ereignis-Handler generiert:</span><span class="sxs-lookup"><span data-stu-id="c320f-284">Creating an event handler for the `Authenticate` event will generate the following event handler definition:</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample3.cs)]

<span data-ttu-id="c320f-285">Wie Sie sehen können, die `Authenticate` übergebene Ereignishandler wird ein Objekt des Typs [`AuthenticateEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) als der zweite Eingabeparameter.</span><span class="sxs-lookup"><span data-stu-id="c320f-285">As you can see, the `Authenticate` event handler is passed an object of type [`AuthenticateEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) as its second input parameter.</span></span> <span data-ttu-id="c320f-286">Die `AuthenticateEventArgs` Klasse enthält eine boolesche Eigenschaft namens `Authenticated` , verwendet, um anzugeben, ob die angegebenen Anmeldeinformationen gültig sind.</span><span class="sxs-lookup"><span data-stu-id="c320f-286">The `AuthenticateEventArgs` class contains a Boolean property named `Authenticated` that is used to specify whether the supplied credentials are valid.</span></span> <span data-ttu-id="c320f-287">Unsere Aufgabe ist dann hier Code schreiben, der bestimmt, ob die angegebenen Anmeldeinformationen gültig sind, und Festlegen der `e.Authenticate` Eigenschaft entsprechend.</span><span class="sxs-lookup"><span data-stu-id="c320f-287">Our task, then, is to write code here that determines whether the supplied credentials are valid or not, and to set the `e.Authenticate` property accordingly.</span></span>

### <a name="determining-and-validating-the-supplied-credentials"></a><span data-ttu-id="c320f-288">Bestimmen und die angegebenen Anmeldeinformationen überprüft.</span><span class="sxs-lookup"><span data-stu-id="c320f-288">Determining and Validating the Supplied Credentials</span></span>

<span data-ttu-id="c320f-289">Verwenden Sie das Anmelde-Steuerelement [ `UserName` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) und [ `Password` Eigenschaften](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) um zu bestimmen, die vom Benutzer eingegebenen Benutzernamens und Kennworts-Anmeldeinformationen.</span><span class="sxs-lookup"><span data-stu-id="c320f-289">Use the Login control's [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) and [`Password` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) to determine the username and password credentials entered by the user.</span></span> <span data-ttu-id="c320f-290">Um die Werte in jeder zusätzlichen Websteuerelemente eingegeben bestimmen (wie z. B. die `Email` Textfeld wir im vorherigen Schritt hinzugefügt haben), verwenden Sie *`LoginControlID`* `.FindControl`("*`controlID`*") zum Abrufen eines programmgesteuerten Verweis auf das Websteuerelement in der Vorlage, deren `ID` -Eigenschaft gleich *`controlID`*.</span><span class="sxs-lookup"><span data-stu-id="c320f-290">In order to determine the values entered into any additional Web controls (such as the `Email` TextBox we added in the previous step), use *`LoginControlID`*`.FindControl`("*`controlID`*") to obtain a programmatic reference to the Web control in the template whose `ID` property is equal to *`controlID`*.</span></span> <span data-ttu-id="c320f-291">Beispielsweise, um das Abrufen eines Verweises auf die `Email` TextBox, verwenden Sie den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="c320f-291">For example, to get a reference to the `Email` TextBox, use the following code:</span></span>

`TextBox EmailTextBox = myLogin.FindControl("Email") as TextBox;`

<span data-ttu-id="c320f-292">Um die Anmeldeinformationen des Benutzers zu überprüfen, müssen wir zwei Dinge tun:</span><span class="sxs-lookup"><span data-stu-id="c320f-292">In order to validate the user's credentials we need to do two things:</span></span>

1. <span data-ttu-id="c320f-293">Stellen Sie sicher, dass der bereitgestellte Benutzername und das Kennwort gültig sind.</span><span class="sxs-lookup"><span data-stu-id="c320f-293">Ensure that the provided username and password are valid</span></span>
2. <span data-ttu-id="c320f-294">Stellen Sie sicher, dass die eingegebene e-Mail-Adresse entspricht, die e-Mail-Adresse für die Datei für den Benutzer, bei dem Versuch, melden Sie sich</span><span class="sxs-lookup"><span data-stu-id="c320f-294">Ensure that email address entered matches the email address on file for the user attempting to log in</span></span>

<span data-ttu-id="c320f-295">Um bei der ersten Validierung zu erreichen, wir einfach können, die `Membership.ValidateUser` Methode wie in Schritt 1 veranschaulichte Filtermenü.</span><span class="sxs-lookup"><span data-stu-id="c320f-295">To accomplish the first check we can simply use the `Membership.ValidateUser` method like we saw in Step 1.</span></span> <span data-ttu-id="c320f-296">Für die zweite Überprüfung muss die e-Mail-Adresse des Benutzers zu ermitteln, sodass wir ihn an die e-Mail-Adresse vergleichen können, die sie in das Textfeld-Steuerelement eingegeben werden.</span><span class="sxs-lookup"><span data-stu-id="c320f-296">For the second check, we need to determine the user's email address so that we can compare it to the email address they entered into the TextBox control.</span></span> <span data-ttu-id="c320f-297">Verwenden Sie zum Abrufen von Informationen zu einem bestimmten Benutzer die `Membership` Klasse [ `GetUser` Methode](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx).</span><span class="sxs-lookup"><span data-stu-id="c320f-297">To get information about a particular user, use the `Membership` class's [`GetUser` method](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx).</span></span>

<span data-ttu-id="c320f-298">Die `GetUser` Methode bietet eine Reihe von Überladungen.</span><span class="sxs-lookup"><span data-stu-id="c320f-298">The `GetUser` method has a number of overloads.</span></span> <span data-ttu-id="c320f-299">Wenn ohne Übergabe von Parametern verwendet wird, wird die Informationen über den aktuell angemeldeten Benutzer zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="c320f-299">If used without passing in any parameters, it returns information about the currently logged in user.</span></span> <span data-ttu-id="c320f-300">Rufen Sie zum Abrufen von Informationen zu einem bestimmten Benutzer `GetUser` in ihren Benutzernamen übergeben.</span><span class="sxs-lookup"><span data-stu-id="c320f-300">To get information about a particular user, call `GetUser` passing in their username.</span></span> <span data-ttu-id="c320f-301">In beiden Fällen `GetUser` gibt eine [ `MembershipUser` Objekt](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), dem verfügt über Eigenschaften, z. B. `UserName`, `Email`, `IsApproved`, `IsOnline`und so weiter.</span><span class="sxs-lookup"><span data-stu-id="c320f-301">Either way, `GetUser` returns a [`MembershipUser` object](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), which has properties like `UserName`, `Email`, `IsApproved`, `IsOnline`, and so on.</span></span>

<span data-ttu-id="c320f-302">Der folgende Code implementiert diese zwei Überprüfungen.</span><span class="sxs-lookup"><span data-stu-id="c320f-302">The following code implements these two checks.</span></span> <span data-ttu-id="c320f-303">Wenn beide, klicken Sie dann übergeben `e.Authenticate` festgelegt ist, um `true`, andernfalls ist er zugewiesen `false`.</span><span class="sxs-lookup"><span data-stu-id="c320f-303">If both pass, then `e.Authenticate` is set to `true`, otherwise it is assigned `false`.</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample4.cs)]

<span data-ttu-id="c320f-304">Versuchen Sie mit diesem Code werden, melden Sie sich als gültiger Benutzer der richtige Benutzername, Kennwort und e-Mail-Adresse eingeben.</span><span class="sxs-lookup"><span data-stu-id="c320f-304">With this code in place, attempt to log in as a valid user, entering the correct username, password, and email address.</span></span> <span data-ttu-id="c320f-305">Wiederholen sie den Vorgang, aber dieses Mal wird absichtlich eine falsche e-Mail-Adresse verwenden (siehe Abbildung 10).</span><span class="sxs-lookup"><span data-stu-id="c320f-305">Try it again, but this time purposefully use an incorrect email address (see Figure 10).</span></span> <span data-ttu-id="c320f-306">Schließlich weiterführende ein drittes Mal einen nicht vorhandenen Benutzernamen verwenden.</span><span class="sxs-lookup"><span data-stu-id="c320f-306">Finally, try it a third time using a non-existent username.</span></span> <span data-ttu-id="c320f-307">Im ersten Fall Sie sollten erfolgreich angemeldet sein, den Standort, aber in den letzten beiden Fällen sollte die Anmeldung Kontrollnachricht ungültige Anmeldeinformationen.</span><span class="sxs-lookup"><span data-stu-id="c320f-307">In the first case you should be successfully logged on to the site, but in the last two cases you should see the Login control's invalid credentials message.</span></span>


<span data-ttu-id="c320f-308">[![Tito kann nicht anmelden, wenn Sie eine falsche e-Mail-Adresse angeben.](validating-user-credentials-against-the-membership-user-store-cs/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="c320f-308">[![Tito Cannot Log In When Supplying an Incorrect Email Address](validating-user-credentials-against-the-membership-user-store-cs/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image28.png)</span></span>

<span data-ttu-id="c320f-309">**Abbildung 10**: Tito kann nicht Protokoll In bei der Angabe einer falschen e-Mail-Adresse ([klicken Sie hier, um das Bild in voller Größe angezeigt](validating-user-credentials-against-the-membership-user-store-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="c320f-309">**Figure 10**: Tito Cannot Log In When Supplying an Incorrect Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image30.png))</span></span>


> [!NOTE]
> <span data-ttu-id="c320f-310">Wie beschrieben im Abschnitt wie die Mitgliedschaft Framework verarbeitet ungültige Anmeldeversuche in Schritt 1, wenn die `Membership.ValidateUser` Methode wird aufgerufen, und übergeben Sie ungültige Anmeldeinformationen, er verfolgt die Ungültiger Versuch der Anmeldung und sperrt der Benutzer, wenn sie eine bestimmte überschreiten Schwellenwert für die ungültige Versuche innerhalb eines angegebenen Zeitfensters.</span><span class="sxs-lookup"><span data-stu-id="c320f-310">As discussed in the How the Membership Framework Handles Invalid Login Attempts section in Step 1, when the `Membership.ValidateUser` method is called and passed invalid credentials, it keeps track of the invalid login attempt and locks out the user if they exceed a certain threshold of invalid attempts within a specified time window.</span></span> <span data-ttu-id="c320f-311">Da unsere benutzerdefinierte Logik authentifizierungsaufrufe der `ValidateUser` -Methode, ein falsches Kennwort für einen gültigen Benutzernamen den Ungültige Anmeldung Zähler erhöht, aber wird nicht erhöht, in dem Fall, in dem der Benutzername und Kennwort gültig sind, sind, aber die e-Mail-Adresse ist falsch.</span><span class="sxs-lookup"><span data-stu-id="c320f-311">Since our custom authentication logic calls the `ValidateUser` method, an incorrect password for a valid username will increment the invalid login attempt counter, but this counter is not incremented in the case where the username and password are valid, but the email address is incorrect.</span></span> <span data-ttu-id="c320f-312">Wahrscheinlich sind, dieses Verhalten geeignet ist, ist, da es ist unwahrscheinlich, dass ein Hacker, Benutzername und Kennwort kennen, jedoch Brute-Force-Techniken verwenden, um die e-Mail-Adresse des Benutzers zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="c320f-312">Chances are, this behavior is suitable, since it's unlikely that a hacker will know the username and password, but have to use brute force techniques to determine the user's email address.</span></span>


## <a name="step-4-improving-the-login-controls-invalid-credentials-message"></a><span data-ttu-id="c320f-313">Schritt 4: Verbessern der Anmeldung Kontrollnachricht ungültige Anmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="c320f-313">Step 4: Improving the Login Control's Invalid Credentials Message</span></span>

<span data-ttu-id="c320f-314">Wenn ein Benutzer versucht, sich mit ungültigen Anmeldeinformationen anmelden, zeigt das Steuerelement für die Anmeldung eine Meldung angezeigt, dass der Versuch der Anmeldung nicht erfolgreich war.</span><span class="sxs-lookup"><span data-stu-id="c320f-314">When a user attempts to log on with invalid credentials, the Login control displays a message explaining that the login attempt was unsuccessful.</span></span> <span data-ttu-id="c320f-315">Insbesondere zeigt das Steuerelement an die Nachricht gemäß seiner [ `FailureText` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), die den Standardwert der Anmeldeversuch hat war nicht erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="c320f-315">In particular, the control displays the message specified by its [`FailureText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), which has a default value of Your login attempt was not successful.</span></span> <span data-ttu-id="c320f-316">Versuchen Sie es erneut.</span><span class="sxs-lookup"><span data-stu-id="c320f-316">Please try again.</span></span>

<span data-ttu-id="c320f-317">Beachten Sie, dass es gibt viele Gründe, warum die Anmeldeinformationen des Benutzers ungültig werden kann:</span><span class="sxs-lookup"><span data-stu-id="c320f-317">Recall that there are many reasons why a user's credentials may be invalid:</span></span>

- <span data-ttu-id="c320f-318">Der Benutzername ist nicht vorhanden.</span><span class="sxs-lookup"><span data-stu-id="c320f-318">The username may not exist</span></span>
- <span data-ttu-id="c320f-319">Der Benutzername vorhanden ist, aber das Kennwort ist ungültig</span><span class="sxs-lookup"><span data-stu-id="c320f-319">The username exists, but the password is invalid</span></span>
- <span data-ttu-id="c320f-320">Benutzername und Kennwort gültig sind, aber der Benutzer ist noch nicht genehmigt.</span><span class="sxs-lookup"><span data-stu-id="c320f-320">The username and password are valid, but the user is not yet approved</span></span>
- <span data-ttu-id="c320f-321">Benutzername und Kennwort gültig sind, aber der Benutzer gesperrt Out (sehr wahrscheinlich, da sie die Anzahl von ungültigen Anmeldeversuchen innerhalb des angegebenen Zeitrahmens überschreiten)</span><span class="sxs-lookup"><span data-stu-id="c320f-321">The username and password are valid, but the user is locked out (most likely because they exceeded the number of invalid login attempts within the specified time frame)</span></span>

<span data-ttu-id="c320f-322">Und bei Verwendung von benutzerdefinierten Authentifizierungslogik andere Gründe vorliegen kann.</span><span class="sxs-lookup"><span data-stu-id="c320f-322">And there may be other reasons when using custom authentication logic.</span></span> <span data-ttu-id="c320f-323">Durch den Code geschrieben wir haben in Schritt 3, den Benutzernamen und Kennwort ist möglicherweise ungültig, aber die e-Mail-Adresse ist möglicherweise nicht korrekt.</span><span class="sxs-lookup"><span data-stu-id="c320f-323">For example, with the code we wrote in Step 3, the username and password may be valid, but the email address may be incorrect.</span></span>

<span data-ttu-id="c320f-324">Unabhängig davon, warum die Anmeldeinformationen ungültig sind zeigt das Steuerelement für die Anmeldung an die gleiche Fehlermeldung.</span><span class="sxs-lookup"><span data-stu-id="c320f-324">Regardless of why the credentials are invalid, the Login control displays the same error message.</span></span> <span data-ttu-id="c320f-325">Diese mangelnde Feedback kann für einen Benutzer verwirrend sein, dessen Konto noch nicht genehmigt wurden, oder, die gesperrt ist. Mit ein wenig Arbeit jedoch können wir das Steuerelement für die Anmeldung eine besser geeignete Meldung anzeigen haben.</span><span class="sxs-lookup"><span data-stu-id="c320f-325">This lack of feedback can be confusing for a user whose account has not yet been approved or who has been locked out. With a little bit of work, though, we can have the Login control display a more appropriate message.</span></span>

<span data-ttu-id="c320f-326">Wenn ein Benutzer versucht, mit ungültigen Anmeldeinformationen anmelden, löst das Steuerelement für die Anmeldung aus, seiner `LoginError` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="c320f-326">Whenever a user attempts to login with invalid credentials the Login control raises its `LoginError` event.</span></span> <span data-ttu-id="c320f-327">Fahren Sie fort und erstellen Sie einen Ereignishandler für dieses Ereignis, und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="c320f-327">Go ahead and create an event handler for this event, and add the following code:</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample5.cs)]

<span data-ttu-id="c320f-328">Der obige Code beginnt mit dem Festlegen des Login-Steuerelements `FailureText` Eigenschaft auf den Standardwert (Ihre Anmeldung war nicht erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="c320f-328">The above code starts by setting the Login control's `FailureText` property to the default value ( Your login attempt was not successful.</span></span> <span data-ttu-id="c320f-329">Versuchen Sie es).</span><span class="sxs-lookup"><span data-stu-id="c320f-329">Please try again ).</span></span> <span data-ttu-id="c320f-330">Er überprüft dann um festzustellen, ob der angegebene Benutzername einem vorhandenen Benutzerkonto zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="c320f-330">It then checks to see if the username supplied maps to an existing user account.</span></span> <span data-ttu-id="c320f-331">Wenn also er das resultierende fragt `MembershipUser` des Objekts `IsLockedOut` und `IsApproved` Eigenschaften zu bestimmen, ob das Konto ist gesperrt oder noch nicht genehmigt wurden.</span><span class="sxs-lookup"><span data-stu-id="c320f-331">If so, it consults the resulting `MembershipUser` object's `IsLockedOut` and `IsApproved` properties to determine if the account has been locked out or has not yet been approved.</span></span> <span data-ttu-id="c320f-332">In beiden Fällen die `FailureText` Eigenschaft in einen entsprechenden Wert aktualisiert wird.</span><span class="sxs-lookup"><span data-stu-id="c320f-332">In either case, the `FailureText` property is updated to a corresponding value.</span></span>

<span data-ttu-id="c320f-333">Um diesen Code zu testen, absichtlich versuchen Sie, melden Sie sich als einen vorhandenen Benutzer, aber verwenden ein falsches Kennwort.</span><span class="sxs-lookup"><span data-stu-id="c320f-333">To test this code, purposefully attempt to log in as an existing user, but use an incorrect password.</span></span> <span data-ttu-id="c320f-334">Führen Sie diesem fünfmal in einer Zeile innerhalb eines Zeitraums von 10 Minuten, und das Konto gesperrt. Abbildung 11 zeigt, nachfolgende Anmeldung versucht immer fehl (selbst bei das richtige Kennwort), aber die jetzt den aussagekräftigeren angezeigt wurde Ihr Konto aufgrund zu vieler ungültiger Anmeldeversuche gesperrt wurde.</span><span class="sxs-lookup"><span data-stu-id="c320f-334">Do this five times in a row within a 10 minute time frame and the account will be locked out. As Figure 11 shows, subsequent login attempts will always fail (even with the correct password), but will now display the more descriptive Your account has been locked out because of too many invalid login attempts.</span></span> <span data-ttu-id="c320f-335">Wenden Sie sich an den Administrator, um Ihr Konto entsperrt Nachricht haben.</span><span class="sxs-lookup"><span data-stu-id="c320f-335">Please contact the administrator to have your account unlocked message.</span></span>


<span data-ttu-id="c320f-336">[![Tito zu viele ungültige Anmeldeversuche ausgeführt und wurde gesperrt](validating-user-credentials-against-the-membership-user-store-cs/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="c320f-336">[![Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out](validating-user-credentials-against-the-membership-user-store-cs/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image31.png)</span></span>

<span data-ttu-id="c320f-337">**Abbildung 11**: Tito ausgeführt zu viele ungültige Anmeldeversuche und verfügt über wurde gesperrt ([klicken Sie hier, um das Bild in voller Größe angezeigt](validating-user-credentials-against-the-membership-user-store-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="c320f-337">**Figure 11**: Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image33.png))</span></span>


## <a name="summary"></a><span data-ttu-id="c320f-338">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="c320f-338">Summary</span></span>

<span data-ttu-id="c320f-339">Vor diesem Lernprogramm die Anmeldeseite überprüft die angegebenen Anmeldeinformationen für eine vorprogrammierte Liste von Benutzername/Kennwort-Paare.</span><span class="sxs-lookup"><span data-stu-id="c320f-339">Prior this tutorial, our login page validated the supplied credentials against a hard-coded list of username/password pairs.</span></span> <span data-ttu-id="c320f-340">In diesem Lernprogramm aktualisiert wird die Seite, um die Anmeldeinformationen für das Framework Mitgliedschaft zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="c320f-340">In this tutorial, we updated the page to validate credentials against the Membership framework.</span></span> <span data-ttu-id="c320f-341">In Schritt 1 erläutert mithilfe der `Membership.ValidateUser` -Methode programmgesteuert.</span><span class="sxs-lookup"><span data-stu-id="c320f-341">In Step 1 we looked at using the `Membership.ValidateUser` method programmatically.</span></span> <span data-ttu-id="c320f-342">In Schritt2 werden unsere manuell erstellte Benutzeroberfläche und den Code durch das Steuerelement für die Anmeldung ersetzt.</span><span class="sxs-lookup"><span data-stu-id="c320f-342">In Step 2 we replaced our manually created user interface and code with the Login control.</span></span>

<span data-ttu-id="c320f-343">Das Steuerelement für die Anmeldung rendert eine standard-Login-Benutzeroberfläche und Anmeldeinformationen für das Framework für die Mitgliedschaft des Benutzers automatisch überprüft.</span><span class="sxs-lookup"><span data-stu-id="c320f-343">The Login control renders a standard login user interface and automatically validates the user's credentials against the Membership framework.</span></span> <span data-ttu-id="c320f-344">Darüber hinaus meldet bei gültige Anmeldeinformationen das Steuerelement für die Anmeldung den Benutzer sich über formularbasierte Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="c320f-344">Moreover, in the event of valid credentials, the Login control signs the user in via forms authentication.</span></span> <span data-ttu-id="c320f-345">Kurz gesagt, ist eine voll funktionsfähige Anmeldeverfahren für Benutzer verfügbar, durch Ziehen einfach das Steuerelement für die Anmeldung auf einer Seite, keine zusätzlichen deklarativem Markup oder Code, der erforderlich.</span><span class="sxs-lookup"><span data-stu-id="c320f-345">In short, a fully functional login user experience is available by simply dragging the Login control onto a page, no extra declarative markup or code necessary.</span></span> <span data-ttu-id="c320f-346">Was mehr ist, ist das Steuerelement für die Anmeldung bei dem ein gut Maß an Kontrolle über die gerenderten Benutzer Schnittstelle und die Authentifizierung der Logik hochgradig anpassbar.</span><span class="sxs-lookup"><span data-stu-id="c320f-346">What's more, the Login control is highly customizable, allowing for a fine degree of control over both the rendered user interface and authentication logic.</span></span>

<span data-ttu-id="c320f-347">An diesem Punkt Besucher auf unserer Website können erstellt ein neues Benutzerkonto und ein Protokoll bei der Website, jedoch können wir noch Uhrzeitstempel Einschränken des Zugriffs auf Seiten auf Grundlage des authentifizierten Benutzers.</span><span class="sxs-lookup"><span data-stu-id="c320f-347">At this point visitors to our website can create a new user account and log into the site, but we have yet to look at restricting access to pages based on the authenticated user.</span></span> <span data-ttu-id="c320f-348">Derzeit kann keinem Benutzer authentifizierte oder anonyme, eine andere Seite auf unserer Website anzeigen.</span><span class="sxs-lookup"><span data-stu-id="c320f-348">Currently, any user, authenticated or anonymous, can view any page on our site.</span></span> <span data-ttu-id="c320f-349">Zusammen mit Steuern des Zugriffs auf unserer Website Seiten regelmäßig durch Benutzer, wir bestimmte Seiten möglicherweise der Benutzer, dessen Funktionalität abhängig.</span><span class="sxs-lookup"><span data-stu-id="c320f-349">Along with controlling access to our site's pages on a user-by-user basis, we might have certain pages whose functionality depends on the user.</span></span> <span data-ttu-id="c320f-350">Die nächste Lernprogramm befasst sich mit Zugriff und die Funktionen von in-Seite basierend auf dem angemeldeten Benutzer zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="c320f-350">The next tutorial looks at how to limit access and in-page functionality based on the logged in user.</span></span>

<span data-ttu-id="c320f-351">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="c320f-351">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="c320f-352">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="c320f-352">Further Reading</span></span>

<span data-ttu-id="c320f-353">Weitere Informationen zu den Themen in diesem Lernprogramm erläutert finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="c320f-353">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="c320f-354">Anzeigen von benutzerdefinierten Nachrichten gesperrt und nicht genehmigte Benutzer</span><span class="sxs-lookup"><span data-stu-id="c320f-354">Displaying Custom Messages to Locked Out and Non-Approved Users</span></span>](http://aspnet.4guysfromrolla.com/articles/050306-1.aspx)
- [<span data-ttu-id="c320f-355">Untersuchen von ASP.NET 2.0 Mitgliedschaft, Rollen und Profile</span><span class="sxs-lookup"><span data-stu-id="c320f-355">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="c320f-356">Gewusst wie: Erstellen eine Anmeldung ASP.NET-Seite</span><span class="sxs-lookup"><span data-stu-id="c320f-356">How To: Create an ASP.NET Login Page</span></span>](https://msdn.microsoft.com/library/ms178331.aspx)
- [<span data-ttu-id="c320f-357">Technische Dokumentation zu Anmelde-Steuerelement</span><span class="sxs-lookup"><span data-stu-id="c320f-357">Login Control Technical Documentation</span></span>](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx)
- [<span data-ttu-id="c320f-358">Mithilfe dieser Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="c320f-358">Using the Login Controls</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/security/login.aspx)

### <a name="about-the-author"></a><span data-ttu-id="c320f-359">Informationen zum Autor</span><span class="sxs-lookup"><span data-stu-id="c320f-359">About the Author</span></span>

<span data-ttu-id="c320f-360">Scott Mitchell, Autor von mehreren ASP/ASP.NET-Büchern und Gründer von 4GuysFromRolla.com, bereits seit 1998 mit Microsoft-Web-Technologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="c320f-360">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="c320f-361">Scott fungiert als ein unabhängiger Berater, Trainer und Writer.</span><span class="sxs-lookup"><span data-stu-id="c320f-361">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="c320f-362">Sein neueste Buch wird *[Sams Schulen selbst ASP.NET 2.0 in 24 Stunden](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="c320f-362">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="c320f-363">Scott erreicht werden kann, zur [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) oder über seinen Blog unter [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="c320f-363">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="c320f-364">Besonderen Dank an</span><span class="sxs-lookup"><span data-stu-id="c320f-364">Special Thanks To</span></span>

<span data-ttu-id="c320f-365">Diese Reihe von Lernprogrammen wurde durch viele nützliche Bearbeiter überprüft.</span><span class="sxs-lookup"><span data-stu-id="c320f-365">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="c320f-366">Lead Prüfer für dieses Lernprogramm wurden Teresa Murphy und Michael Olivero.</span><span class="sxs-lookup"><span data-stu-id="c320f-366">Lead reviewers for this tutorial were Teresa Murphy and Michael Olivero.</span></span> <span data-ttu-id="c320f-367">Meine bevorstehende MSDN-Artikel Überprüfen von Interesse?</span><span class="sxs-lookup"><span data-stu-id="c320f-367">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="c320f-368">Wenn dies der Fall ist, löschen Sie mich zeilenweise [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4guysfromrolla.com).</span><span class="sxs-lookup"><span data-stu-id="c320f-368">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c320f-369">[Zurück](creating-user-accounts-cs.md)
> [Weiter](user-based-authorization-cs.md)</span><span class="sxs-lookup"><span data-stu-id="c320f-369">[Previous](creating-user-accounts-cs.md)
[Next](user-based-authorization-cs.md)</span></span>
