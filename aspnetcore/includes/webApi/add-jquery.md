## <a name="call-the-web-api-with-jquery"></a><span data-ttu-id="a54de-101">Aufrufen der Web-API mit jQuery</span><span class="sxs-lookup"><span data-stu-id="a54de-101">Call the Web API with jQuery</span></span>

<span data-ttu-id="a54de-102">In diesem Abschnitt wird eine HTML-Seite hinzugefügt, die jQuery verwendet, um die Web-API aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="a54de-102">In this section, an HTML page is added that uses jQuery to call the Web API.</span></span> <span data-ttu-id="a54de-103">jQuery initiiert die Anforderung und aktualisiert die Seite mit den Informationen aus der Antwort der API.</span><span class="sxs-lookup"><span data-stu-id="a54de-103">jQuery initiates the request and updates the page with the details from the API's response.</span></span>

<span data-ttu-id="a54de-104">Konfigurieren Sie das Projekt dafür, statische Dateien zu unterstützen und die Standardzuordnung von Dateien zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="a54de-104">Configure the project to serve static files and to enable default file mapping.</span></span> <span data-ttu-id="a54de-105">Dies wird erreicht, indem die Erweiterungsmethoden [UseStaticFiles](/dotnet/api/microsoft.aspnetcore.builder.staticfileextensions.usestaticfiles#Microsoft_AspNetCore_Builder_StaticFileExtensions_UseStaticFiles_Microsoft_AspNetCore_Builder_IApplicationBuilder_) und [UseDefaultFiles](/dotnet/api/microsoft.aspnetcore.builder.defaultfilesextensions.usedefaultfiles#Microsoft_AspNetCore_Builder_DefaultFilesExtensions_UseDefaultFiles_Microsoft_AspNetCore_Builder_IApplicationBuilder_) in *Startup.Configure* aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="a54de-105">This is accomplished by invoking the [UseStaticFiles](/dotnet/api/microsoft.aspnetcore.builder.staticfileextensions.usestaticfiles#Microsoft_AspNetCore_Builder_StaticFileExtensions_UseStaticFiles_Microsoft_AspNetCore_Builder_IApplicationBuilder_) and [UseDefaultFiles](/dotnet/api/microsoft.aspnetcore.builder.defaultfilesextensions.usedefaultfiles#Microsoft_AspNetCore_Builder_DefaultFilesExtensions_UseDefaultFiles_Microsoft_AspNetCore_Builder_IApplicationBuilder_) extension methods in *Startup.Configure*.</span></span> <span data-ttu-id="a54de-106">Weitere Informationen finden Sie im Artikel zu [statischen Dateien](xref:fundamentals/static-files).</span><span class="sxs-lookup"><span data-stu-id="a54de-106">For more information, see [Static files](xref:fundamentals/static-files).</span></span>

[!code-csharp[](../../tutorials/first-web-api/samples/2.0/TodoApi/Startup2.cs?name=snippet_Configure&highlight=3-4)]

<span data-ttu-id="a54de-107">Fügen Sie eine HTML-Datei namens *index.html* zum Verzeichnis *wwwroot* des Projekts hinzu.</span><span class="sxs-lookup"><span data-stu-id="a54de-107">Add an HTML file, named *index.html*, to the project's *wwwroot* directory.</span></span> <span data-ttu-id="a54de-108">Ersetzen Sie den Inhalt durch folgendes Markup:</span><span class="sxs-lookup"><span data-stu-id="a54de-108">Replace its contents with the following markup:</span></span>

[!code-html[](../../tutorials/first-web-api/samples/2.0/TodoApi/wwwroot/index.html)]

<span data-ttu-id="a54de-109">Fügen Sie eine JavaScript-Datei namens *site.js* zum Verzeichnis *wwwroot* des Projekts hinzu.</span><span class="sxs-lookup"><span data-stu-id="a54de-109">Add a JavaScript file, named *site.js*, to the project's *wwwroot* directory.</span></span> <span data-ttu-id="a54de-110">Ersetzen Sie den Inhalt durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="a54de-110">Replace its contents with the following code:</span></span>

[!code-javascript[](../../tutorials/first-web-api/samples/2.0/TodoApi/wwwroot/site.js?name=snippet_SiteJs)]

<span data-ttu-id="a54de-111">Möglicherweise ist eine Änderung an den Starteinstellungen des ASP.NET Core-Projekts erforderlich, um die HTML-Seite lokal zu testen.</span><span class="sxs-lookup"><span data-stu-id="a54de-111">A change to the ASP.NET Core project's launch settings may be required to test the HTML page locally.</span></span> <span data-ttu-id="a54de-112">Öffnen Sie *launchSettings.json* im Verzeichnis *Eigenschaften* des Projekts.</span><span class="sxs-lookup"><span data-stu-id="a54de-112">Open *launchSettings.json* in the *Properties* directory of the project.</span></span> <span data-ttu-id="a54de-113">Entfernen Sie die `launchUrl`-Eigenschaft, um zu erzwingen, dass die App mit *index.html* als Startseite geöffnet wird. Dies ist die Standarddatei des Projekts.</span><span class="sxs-lookup"><span data-stu-id="a54de-113">Remove the `launchUrl` property to force the app to open at *index.html*&mdash;the project's default file.</span></span>

<span data-ttu-id="a54de-114">Es gibt mehrere Möglichkeiten, um jQuery herunterzuladen.</span><span class="sxs-lookup"><span data-stu-id="a54de-114">There are several ways to get jQuery.</span></span> <span data-ttu-id="a54de-115">Im vorherigen Codeausschnitt wurde die Bibliothek aus einem Content Delivery Network (CDN) geladen.</span><span class="sxs-lookup"><span data-stu-id="a54de-115">In the preceding snippet, the library is loaded from a CDN.</span></span> <span data-ttu-id="a54de-116">Dieses Beispiel stellt ein vollständiges CRUD-Beispiel für das Aufrufen der API mit jQuery dar.</span><span class="sxs-lookup"><span data-stu-id="a54de-116">This sample is a complete CRUD example of calling the API with jQuery.</span></span> <span data-ttu-id="a54de-117">In diesem Beispiel sind zusätzliche nützliche Features enthalten.</span><span class="sxs-lookup"><span data-stu-id="a54de-117">There are additional features in this sample to make the experience richer.</span></span> <span data-ttu-id="a54de-118">Im Folgenden finden Sie Erklärungen zu API-Aufrufen.</span><span class="sxs-lookup"><span data-stu-id="a54de-118">Below are explanations around the calls to the API.</span></span>

### <a name="get-a-list-of-to-do-items"></a><span data-ttu-id="a54de-119">Abrufen einer Liste von To-Do-Elementen</span><span class="sxs-lookup"><span data-stu-id="a54de-119">Get a list of to-do items</span></span>

<span data-ttu-id="a54de-120">Senden Sie eine HTTP GET-Anforderung an */api/todo*, um eine Liste von To-Do-Elementen abzurufen.</span><span class="sxs-lookup"><span data-stu-id="a54de-120">To get a list of to-do items, send an HTTP GET request to */api/todo*.</span></span>

<span data-ttu-id="a54de-121">Die jQuery-Funktion [ajax](https://api.jquery.com/jquery.ajax/) sendet eine AJAX-Anforderung an die API, die JSON-Code zurückgibt, der ein Objekt oder Array darstellt.</span><span class="sxs-lookup"><span data-stu-id="a54de-121">The jQuery [ajax](https://api.jquery.com/jquery.ajax/) function sends an AJAX request to the API, which returns JSON representing an object or array.</span></span> <span data-ttu-id="a54de-122">Diese Funktion kann alle HTTP-Interaktionen verarbeiten, indem eine HTTP-Anforderung an die angegebene URL (`url`) gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="a54de-122">This function can handle all forms of HTTP interaction, sending an HTTP request to the specified `url`.</span></span> <span data-ttu-id="a54de-123">`GET` wird als `type` verwendet.</span><span class="sxs-lookup"><span data-stu-id="a54de-123">`GET` is used as the `type`.</span></span> <span data-ttu-id="a54de-124">Die Rückruffunktion `success` wird aufgerufen, wenn die Anforderung erfolgreich ist.</span><span class="sxs-lookup"><span data-stu-id="a54de-124">The `success` callback function is invoked if the request succeeds.</span></span> <span data-ttu-id="a54de-125">Im Rückruf wird DOM mit den To-Do-Informationen aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="a54de-125">In the callback, the DOM is updated with the to-do information.</span></span>

[!code-javascript[](../../tutorials/first-web-api/samples/2.0/TodoApi/wwwroot/site.js?name=snippet_GetData)]

### <a name="add-a-to-do-item"></a><span data-ttu-id="a54de-126">Hinzufügen eines To-Do-Elements</span><span class="sxs-lookup"><span data-stu-id="a54de-126">Add a to-do item</span></span>

<span data-ttu-id="a54de-127">Senden Sie eine HTTP POST-Anforderung an */api/todo/*, um ein To-Do-Element hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="a54de-127">To add a to-do item, send an HTTP POST request to */api/todo/*.</span></span> <span data-ttu-id="a54de-128">Der Anforderungstext sollte ein To-Do-Objekt enthalten.</span><span class="sxs-lookup"><span data-stu-id="a54de-128">The request body should contain a to-do object.</span></span> <span data-ttu-id="a54de-129">Die Funktion [ajax](https://api.jquery.com/jquery.ajax/) verwendet `POST`, um die API aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="a54de-129">The [ajax](https://api.jquery.com/jquery.ajax/) function is using `POST` to call the API.</span></span> <span data-ttu-id="a54de-130">Bei `POST`- und `PUT`-Anforderungen stellt der Anforderungstext die Daten dar, die an die API gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="a54de-130">For `POST` and `PUT` requests, the request body represents the data sent to the API.</span></span> <span data-ttu-id="a54de-131">Die API erwartet einen Anforderungstext im JSON-Format.</span><span class="sxs-lookup"><span data-stu-id="a54de-131">The API is expecting a JSON request body.</span></span> <span data-ttu-id="a54de-132">Die Optionen `accepts` und `contentType` werden auf `application/json` festgelegt, um den gesendeten und empfangenen Medientyp entsprechend zu klassifizieren.</span><span class="sxs-lookup"><span data-stu-id="a54de-132">The `accepts` and `contentType` options are set to `application/json` to classify the media type being received and sent, respectively.</span></span> <span data-ttu-id="a54de-133">Die Daten werden mithilfe von [`JSON.stringify`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify) in ein JSON-Objekt konvertiert.</span><span class="sxs-lookup"><span data-stu-id="a54de-133">The data is converted to a JSON object using [`JSON.stringify`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify).</span></span> <span data-ttu-id="a54de-134">Wenn die API den Statuscode „Erfolgreich“ zurückgibt, wird die Funktion `getData` aufgerufen, um die HTML-Tabelle zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="a54de-134">When the API returns a successful status code, the `getData` function is invoked to update the HTML table.</span></span>

[!code-javascript[](../../tutorials/first-web-api/samples/2.0/TodoApi/wwwroot/site.js?name=snippet_AddItem)]

### <a name="update-a-to-do-item"></a><span data-ttu-id="a54de-135">Aktualisieren eines To-Do-Elements</span><span class="sxs-lookup"><span data-stu-id="a54de-135">Update a to-do item</span></span>

<span data-ttu-id="a54de-136">Das Aktualisieren eines To-Do-Elements ähnelt dem Hinzufügen eines To-Do-Elements, da beide Vorgänge auf einem Anforderungstext basieren.</span><span class="sxs-lookup"><span data-stu-id="a54de-136">Updating a to-do item is very similar to adding one, since both rely on a request body.</span></span> <span data-ttu-id="a54de-137">Der einzige Unterschied zwischen diesen Vorgängen besteht darin, dass `url` geändert wird, um den eindeutigen Bezeichner des Elements hinzuzufügen, und `type` ist `PUT`.</span><span class="sxs-lookup"><span data-stu-id="a54de-137">The only real difference between the two in this case is that the `url` changes to add the unique identifier of the item, and the `type` is `PUT`.</span></span>

[!code-javascript[](../../tutorials/first-web-api/samples/2.0/TodoApi/wwwroot/site.js?name=snippet_AjaxPut)]

### <a name="delete-a-to-do-item"></a><span data-ttu-id="a54de-138">Löschen eines To-Do-Elements</span><span class="sxs-lookup"><span data-stu-id="a54de-138">Delete a to-do item</span></span>

<span data-ttu-id="a54de-139">Das Löschen eines To-Do-Elements wird durchgeführt, indem `type` im AJAX-Aufruf auf `DELETE` festgelegt und der eindeutige Bezeichner des Elements in der URL angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="a54de-139">Deleting a to-do item is accomplished by setting the `type` on the AJAX call to `DELETE` and specifing the item's unique identifier in the URL.</span></span>

[!code-javascript[](../../tutorials/first-web-api/samples/2.0/TodoApi/wwwroot/site.js?name=snippet_AjaxDelete)]
