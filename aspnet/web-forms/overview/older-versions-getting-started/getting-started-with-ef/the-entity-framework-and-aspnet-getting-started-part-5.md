---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
title: Erste Schritte mit Entity Framework 4.0-Datenbank zunächst und ASP.NET 4 Web Forms - Teil 5 | Microsoft Docs
author: tdykstra
description: Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mit dem Entity Framework. Die beispielanwendung ist...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: 24ad4379-3fb2-44dc-ba59-85fe0ffcb2ae
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
msc.type: authoredcontent
ms.openlocfilehash: 7f351718123e881e832f4ac95af506ed601d3337
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
ms.locfileid: "30886510"
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-5"></a><span data-ttu-id="45597-104">Erste Schritte mit Entity Framework 4.0-Datenbank zunächst und ASP.NET 4 WebForms - Teil 5</span><span class="sxs-lookup"><span data-stu-id="45597-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 5</span></span>
====================
<span data-ttu-id="45597-105">durch [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="45597-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="45597-106">Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mit dem Entity Framework 4.0 und Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="45597-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="45597-107">Informationen über die Reihe von Lernprogrammen finden Sie unter [im ersten Lernprogramm, in der Reihe](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="45597-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="working-with-related-data-continued"></a><span data-ttu-id="45597-108">Arbeiten mit verwandten Daten, Fortsetzung</span><span class="sxs-lookup"><span data-stu-id="45597-108">Working with Related Data, Continued</span></span>

<span data-ttu-id="45597-109">Im vorherigen Lernprogramm begonnen hat, verwenden Sie die `EntityDataSource` -Steuerelement für die Arbeit mit verbundenen Daten.</span><span class="sxs-lookup"><span data-stu-id="45597-109">In the previous tutorial you began to use the `EntityDataSource` control to work with related data.</span></span> <span data-ttu-id="45597-110">Sie mehrere Ebenen der Hierarchie angezeigt, und Bearbeiten von Daten in den Navigationseigenschaften.</span><span class="sxs-lookup"><span data-stu-id="45597-110">You displayed multiple levels of hierarchy and edited data in navigation properties.</span></span> <span data-ttu-id="45597-111">In diesem Lernprogramm werden Sie weiterhin die Arbeit mit verbundenen Daten hinzufügen und Löschen von Beziehungen und indem Sie eine neue Entität, die eine zu einer vorhandenen Entität Beziehung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="45597-111">In this tutorial you'll continue to work with related data by adding and deleting relationships and by adding a new entity that has a relationship to an existing entity.</span></span>

<span data-ttu-id="45597-112">Erstellen Sie eine Seite Kurse hinzu, die Abteilungen zugewiesen sind.</span><span class="sxs-lookup"><span data-stu-id="45597-112">You'll create a page that adds courses that are assigned to departments.</span></span> <span data-ttu-id="45597-113">Die Abteilungen bereits vorhanden, und wenn Sie einen neuen Kurs erstellen, gleichzeitig müssen erstellen Sie eine Beziehung zwischen diesem und einem vorhandenen Abteilung.</span><span class="sxs-lookup"><span data-stu-id="45597-113">The departments already exist, and when you create a new course, at the same time you'll establish a relationship between it and an existing department.</span></span>

<span data-ttu-id="45597-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="45597-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span></span>

<span data-ttu-id="45597-115">Erstellen Sie auch eine Seite, die arbeitet mit einer m: n-Beziehung durch einen Kursleiter einem Kurs (Hinzufügen einer Beziehung zwischen zwei Entitäten, die Sie auswählen) zuweisen oder entfernen einen Kursleiter aus einem Kurs (entfernen eine Beziehung zwischen zwei Entitäten, die Sie Wählen Sie).</span><span class="sxs-lookup"><span data-stu-id="45597-115">You'll also create a page that works with a many-to-many relationship by assigning an instructor to a course (adding a relationship between two entities that you select) or removing an instructor from a course (removing a relationship between two entities that you select).</span></span> <span data-ttu-id="45597-116">Hinzufügen einer Beziehung zwischen einer Kursleiter und ein Kurs führt in der Datenbank in eine neue Zeile hinzugefügt wird die `CourseInstructor` Zuordnungstabelle, die das Entfernen von eine Beziehung umfasst das Löschen einer Zeile aus der `CourseInstructor` Zuordnungstabelle.</span><span class="sxs-lookup"><span data-stu-id="45597-116">In the database, adding a relationship between an instructor and a course results in a new row being added to the `CourseInstructor` association table; removing a relationship involves deleting a row from the `CourseInstructor` association table.</span></span> <span data-ttu-id="45597-117">Allerdings erfolgt dies in Entity Framework durch Festlegen von Navigationseigenschaften, ohne auf die `CourseInstructor` explizit Tabelle.</span><span class="sxs-lookup"><span data-stu-id="45597-117">However, you do this in the Entity Framework by setting navigation properties, without referring to the `CourseInstructor` table explicitly.</span></span>

<span data-ttu-id="45597-118">[![Image01 abgerufen wird](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="45597-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span></span>

## <a name="adding-an-entity-with-a-relationship-to-an-existing-entity"></a><span data-ttu-id="45597-119">Eine Entität mit einer Beziehung hinzufügen mit einer vorhandenen Entität</span><span class="sxs-lookup"><span data-stu-id="45597-119">Adding an Entity with a Relationship to an Existing Entity</span></span>

<span data-ttu-id="45597-120">Erstellen Sie eine neue Webseite mit dem Namen *CoursesAdd.aspx* , verwendet der *Site.Master* Masterseite, und fügen Sie das folgende Markup zum Rendern der `Content` Steuerelement namens `Content2`:</span><span class="sxs-lookup"><span data-stu-id="45597-120">Create a new web page named *CoursesAdd.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample1.aspx)]

<span data-ttu-id="45597-121">Dieses Markup erstellt einen `EntityDataSource` Steuerelement, das wählt Kurse, mit der einfügen und angibt, einen Handler für das `Inserting` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="45597-121">This markup creates an `EntityDataSource` control that selects courses, that enables inserting, and that specifies a handler for the `Inserting` event.</span></span> <span data-ttu-id="45597-122">Verwenden Sie den Ereignishandler zum Aktualisieren der `Department` Navigationseigenschaft, die beim Erstellen eines neuen `Course` Entität erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="45597-122">You'll use the handler to update the `Department` navigation property when a new `Course` entity is created.</span></span>

<span data-ttu-id="45597-123">Das Markup erstellt außerdem eine `DetailsView` Steuerelements angeben, für das Hinzufügen neuer `Course` Entitäten.</span><span class="sxs-lookup"><span data-stu-id="45597-123">The markup also creates a `DetailsView` control to use for adding new `Course` entities.</span></span> <span data-ttu-id="45597-124">Das Markup verwendet gebundene Felder für `Course` Entitätseigenschaften.</span><span class="sxs-lookup"><span data-stu-id="45597-124">The markup uses bound fields for `Course` entity properties.</span></span> <span data-ttu-id="45597-125">Sie müssen die eingeben der `CourseID` bewertet werden, da dies ein vom System generierter ID-Feld nicht ist.</span><span class="sxs-lookup"><span data-stu-id="45597-125">You have to enter the `CourseID` value because this is not a system-generated ID field.</span></span> <span data-ttu-id="45597-126">Stattdessen erfolgt eine Kurs-Zahl, die manuell angegeben werden muss, wenn der Kurs erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="45597-126">Instead, it's a course number that must be specified manually when the course is created.</span></span>

<span data-ttu-id="45597-127">Verwenden Sie eine Vorlagenfeld für die `Department` Navigationseigenschaft mit Navigationseigenschaften verwendet werden können `BoundField` Steuerelemente.</span><span class="sxs-lookup"><span data-stu-id="45597-127">You use a template field for the `Department` navigation property because navigation properties cannot be used with `BoundField` controls.</span></span> <span data-ttu-id="45597-128">Das Vorlagenfeld enthält eine Dropdownliste zum Auswählen der Abteilung.</span><span class="sxs-lookup"><span data-stu-id="45597-128">The template field provides a drop-down list to select the department.</span></span> <span data-ttu-id="45597-129">Die Dropdown Liste an gebunden ist die `Departments` Entitätenmenge mit `Eval` statt `Bind`, erneut aus, da Sie direkt Navigationseigenschaften Bindung nicht möglich, um diese zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="45597-129">The drop-down list is bound to the `Departments` entity set by using `Eval` rather than `Bind`, again because you cannot directly bind navigation properties in order to update them.</span></span> <span data-ttu-id="45597-130">Geben Sie einen Handler für das `DropDownList` des Steuerelements `Init` Ereignis, damit Sie einen Verweis auf das Steuerelement für die Verwendung vom Code speichern können, die aktualisiert die `DepartmentID` Fremdschlüssel.</span><span class="sxs-lookup"><span data-stu-id="45597-130">You specify a handler for the `DropDownList` control's `Init` event so that you can store a reference to the control for use by the code that updates the `DepartmentID` foreign key.</span></span>

<span data-ttu-id="45597-131">In *CoursesAdd.aspx.cs* fügen Sie direkt hinter der Deklaration der partiellen Klasse ein Klassenfeld enthält einen Verweis auf die `DepartmentsDropDownList` Steuerelement:</span><span class="sxs-lookup"><span data-stu-id="45597-131">In *CoursesAdd.aspx.cs* just after the partial-class declaration, add a class field to hold a reference to the `DepartmentsDropDownList` control:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample2.cs)]

<span data-ttu-id="45597-132">Fügen Sie einen Handler für das `DepartmentsDropDownList` des Steuerelements `Init` Ereignis, damit Sie einen Verweis auf das Steuerelement speichern können.</span><span class="sxs-lookup"><span data-stu-id="45597-132">Add a handler for the `DepartmentsDropDownList` control's `Init` event so that you can store a reference to the control.</span></span> <span data-ttu-id="45597-133">Auf diese Weise können Sie die rufen Sie den Wert, der der Benutzer eingegeben hat, und verwenden es zum Aktualisieren der `DepartmentID` Wert, der die `Course` Entität.</span><span class="sxs-lookup"><span data-stu-id="45597-133">This lets you get the value the user has entered and use it to update the `DepartmentID` value of the `Course` entity.</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample3.cs)]

<span data-ttu-id="45597-134">Fügen Sie einen Handler für das `DetailsView` des Steuerelements `Inserting` Ereignis:</span><span class="sxs-lookup"><span data-stu-id="45597-134">Add a handler for the `DetailsView` control's `Inserting` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample4.cs)]

<span data-ttu-id="45597-135">Wenn der Benutzer klickt `Insert`die `Inserting` Ereignis wird ausgelöst, bevor der neue Datensatz eingefügt wird.</span><span class="sxs-lookup"><span data-stu-id="45597-135">When the user clicks `Insert`, the `Inserting` event is raised before the new record is inserted.</span></span> <span data-ttu-id="45597-136">Ruft der Code im Ereignishandler die `DepartmentID` aus der `DropDownList` steuern und verwendet, um den Wert festlegen, die für verwendet werden, die `DepartmentID` Eigenschaft der `Course` Entität.</span><span class="sxs-lookup"><span data-stu-id="45597-136">The code in the handler gets the `DepartmentID` from the `DropDownList` control and uses it to set the value that will be used for the `DepartmentID` property of the `Course` entity.</span></span>

<span data-ttu-id="45597-137">Das Entity Framework übernimmt das Hinzufügen von diesem Kurs zu den `Courses` der zugeordneten Navigationseigenschaft `Department` Entität.</span><span class="sxs-lookup"><span data-stu-id="45597-137">The Entity Framework will take care of adding this course to the `Courses` navigation property of the associated `Department` entity.</span></span> <span data-ttu-id="45597-138">Es fügt auch die Abteilung, für die `Department` Navigationseigenschaft der `Course` Entität.</span><span class="sxs-lookup"><span data-stu-id="45597-138">It also adds the department to the `Department` navigation property of the `Course` entity.</span></span>

<span data-ttu-id="45597-139">Führen Sie die Seite.</span><span class="sxs-lookup"><span data-stu-id="45597-139">Run the page.</span></span>

<span data-ttu-id="45597-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="45597-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span></span>

<span data-ttu-id="45597-141">Geben Sie eine ID, einen Titel, eine Anzahl von Gutschriften, wählen Sie eine Abteilung ein, und klicken Sie auf **einfügen**.</span><span class="sxs-lookup"><span data-stu-id="45597-141">Enter an ID, a title, a number of credits, and select a department, then click **Insert**.</span></span>

<span data-ttu-id="45597-142">Führen Sie die *Courses.aspx* Seite, und wählen Sie derselben Abteilung, um den neuen Kurs anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="45597-142">Run the *Courses.aspx* page, and select the same department to see the new course.</span></span>

<span data-ttu-id="45597-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="45597-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span></span>

## <a name="working-with-many-to-many-relationships"></a><span data-ttu-id="45597-144">Arbeiten mit m: N-Beziehungen</span><span class="sxs-lookup"><span data-stu-id="45597-144">Working with Many-to-Many Relationships</span></span>

<span data-ttu-id="45597-145">Die Beziehung zwischen der `Courses` Entitätenmenge und `People` Entitätenmenge ist eine m: n-Beziehung.</span><span class="sxs-lookup"><span data-stu-id="45597-145">The relationship between the `Courses` entity set and the `People` entity set is a many-to-many relationship.</span></span> <span data-ttu-id="45597-146">Ein `Course` Entität verfügt über eine Navigationseigenschaft, die mit dem Namen `People` , kann 0 (null), ein oder mehrere der im Zusammenhang enthalten `Person` Entitäten (Lehrkräfte zugewiesen, zu diesem Kurs zu schulen darstellt).</span><span class="sxs-lookup"><span data-stu-id="45597-146">A `Course` entity has a navigation property named `People` that can contain zero, one, or more related `Person` entities (representing instructors assigned to teach that course).</span></span> <span data-ttu-id="45597-147">Und ein `Person` Entität verfügt über eine Navigationseigenschaft, die mit dem Namen `Courses` , kann 0 (null), ein oder mehrere der im Zusammenhang enthalten `Course` Entitäten (Kurse darstellt, Dozenten zugewiesen werden folgende Themen behandelt).</span><span class="sxs-lookup"><span data-stu-id="45597-147">And a `Person` entity has a navigation property named `Courses` that can contain zero, one, or more related `Course` entities (representing courses that instructor is assigned to teach).</span></span> <span data-ttu-id="45597-148">Einen Kursleiter möglicherweise mehrere Kurse werden folgende Themen behandelt, und ein Kurs kann durch mehrere Lehrkräfte behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="45597-148">One instructor might teach multiple courses, and one course might be taught by multiple instructors.</span></span> <span data-ttu-id="45597-149">In diesem Abschnitt der exemplarischen Vorgehensweise müssen Sie hinzufügen und Entfernen von Beziehungen zwischen `Person` und `Course` Entitäten, indem Sie die Navigationseigenschaften von verknüpften Entitäten aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="45597-149">In this section of the walkthrough, you'll add and remove relationships between `Person` and `Course` entities by updating the navigation properties of the related entities.</span></span>

<span data-ttu-id="45597-150">Erstellen Sie eine neue Webseite mit dem Namen *InstructorsCourses.aspx* , verwendet der *Site.Master* Masterseite, und fügen Sie das folgende Markup zum Rendern der `Content` Steuerelement namens `Content2`:</span><span class="sxs-lookup"><span data-stu-id="45597-150">Create a new web page named *InstructorsCourses.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample5.aspx)]

<span data-ttu-id="45597-151">Dieses Markup erstellt einen `EntityDataSource` Steuerelement, das den Namen abruft und `PersonID` von `Person` für Kursleiter für Entitäten.</span><span class="sxs-lookup"><span data-stu-id="45597-151">This markup creates an `EntityDataSource` control that retrieves the name and `PersonID` of `Person` entities for instructors.</span></span> <span data-ttu-id="45597-152">Ein `DropDrownList` gebunden ist die `EntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="45597-152">A `DropDrownList` control is bound to the `EntityDataSource` control.</span></span> <span data-ttu-id="45597-153">Die `DropDownList` Steuerelement gibt einen Handler für das `DataBound` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="45597-153">The `DropDownList` control specifies a handler for the `DataBound` event.</span></span> <span data-ttu-id="45597-154">Dieser Handler auf Databind die beiden Dropdownlisten verwenden, die Kurse anzeigen.</span><span class="sxs-lookup"><span data-stu-id="45597-154">You'll use this handler to databind the two drop-down lists that display courses.</span></span>

<span data-ttu-id="45597-155">Das Markup erstellt außerdem die folgende Gruppe von Steuerelementen zum Zuweisen von einen Kurs zu den ausgewählten Dozenten verwendet werden soll:</span><span class="sxs-lookup"><span data-stu-id="45597-155">The markup also creates the following group of controls to use for assigning a course to the selected instructor:</span></span>

- <span data-ttu-id="45597-156">Ein `DropDownList` Steuerelement für die Auswahl eines Kurs zuweisen.</span><span class="sxs-lookup"><span data-stu-id="45597-156">A `DropDownList` control for selecting a course to assign.</span></span> <span data-ttu-id="45597-157">Dieses Steuerelement wird mit dem Kurse aufgefüllt, die derzeit nicht für den ausgewählten Kursleiter zugewiesen sind.</span><span class="sxs-lookup"><span data-stu-id="45597-157">This control will be populated with courses that are currently not assigned to the selected instructor.</span></span>
- <span data-ttu-id="45597-158">Ein `Button` Steuerelement, um die Zuweisung zu initiieren.</span><span class="sxs-lookup"><span data-stu-id="45597-158">A `Button` control to initiate the assignment.</span></span>
- <span data-ttu-id="45597-159">Ein `Label` Steuerelement eine Fehlermeldung angezeigt, wenn die Zuordnung ein Fehler auftritt.</span><span class="sxs-lookup"><span data-stu-id="45597-159">A `Label` control to display an error message if the assignment fails.</span></span>

<span data-ttu-id="45597-160">Das Markup erstellt auch eine Gruppe von Steuerelementen zum Entfernen eines Kurs aus den ausgewählten Dozenten verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="45597-160">Finally, the markup also creates a group of controls to use for removing a course from the selected instructor.</span></span>

<span data-ttu-id="45597-161">In *InstructorsCourses.aspx.cs*, fügen Sie eine using Anweisung:</span><span class="sxs-lookup"><span data-stu-id="45597-161">In *InstructorsCourses.aspx.cs*, add a using statement:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample6.cs)]

<span data-ttu-id="45597-162">Fügen Sie eine Methode für das Auffüllen von zwei Dropdownlisten, die Kurse anzeigen:</span><span class="sxs-lookup"><span data-stu-id="45597-162">Add a method for populating the two drop-down lists that display courses:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample7.cs)]

<span data-ttu-id="45597-163">Dieser Code Ruft alle Kurse aus der `Courses` Entität festgelegt, und ruft die Kurse aus der `Courses` Navigationseigenschaft der `Person` Entität für den ausgewählten Kursleiter.</span><span class="sxs-lookup"><span data-stu-id="45597-163">This code gets all courses from the `Courses` entity set and gets the courses from the `Courses` navigation property of the `Person` entity for the selected instructor.</span></span> <span data-ttu-id="45597-164">Klicken Sie dann bestimmt, welche Kurse, Dozenten zugewiesen sind, und die Dropdownlisten entsprechend aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="45597-164">It then determines which courses are assigned to that instructor and populates the drop-down lists accordingly.</span></span>

<span data-ttu-id="45597-165">Fügen Sie einen Handler für das `Assign` Schaltfläche `Click` Ereignis:</span><span class="sxs-lookup"><span data-stu-id="45597-165">Add a handler for the `Assign` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample8.cs)]

<span data-ttu-id="45597-166">Dieser Code Ruft die `Person` Entität für den ausgewählten Kursleiter Ruft die `Course` Entität für den ausgewählten Kurs und fügt die ausgewählten Kurs zu den `Courses` Navigationseigenschaft der Kursleiter `Person` Entität.</span><span class="sxs-lookup"><span data-stu-id="45597-166">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and adds the selected course to the `Courses` navigation property of the instructor's `Person` entity.</span></span> <span data-ttu-id="45597-167">Klicken Sie dann die Änderungen in der Datenbank gespeichert, und füllt die Dropdown-Listen, damit die Ergebnisse sofort angezeigt werden können.</span><span class="sxs-lookup"><span data-stu-id="45597-167">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="45597-168">Fügen Sie einen Handler für das `Remove` Schaltfläche `Click` Ereignis:</span><span class="sxs-lookup"><span data-stu-id="45597-168">Add a handler for the `Remove` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample9.cs)]

<span data-ttu-id="45597-169">Dieser Code Ruft die `Person` Entität für den ausgewählten Kursleiter Ruft die `Course` Entität für den ausgewählten Kurs und entfernt den ausgewählten Kurs aus der `Person` Entität `Courses` Navigationseigenschaft.</span><span class="sxs-lookup"><span data-stu-id="45597-169">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and removes the selected course from the `Person` entity's `Courses` navigation property.</span></span> <span data-ttu-id="45597-170">Klicken Sie dann die Änderungen in der Datenbank gespeichert, und füllt die Dropdown-Listen, damit die Ergebnisse sofort angezeigt werden können.</span><span class="sxs-lookup"><span data-stu-id="45597-170">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="45597-171">Fügen Sie Code zum der `Page_Load` -Methode, die sicherstellt, dass die Fehlermeldungen sind nicht sichtbar, wenn kein Fehler zu melden, und fügen Ereignishandler für die `DataBound` und `SelectedIndexChanged` Ereignisse der Lehrkräfte Dropdown-Liste zum Auffüllen der Courses-Dropdownlisten:</span><span class="sxs-lookup"><span data-stu-id="45597-171">Add code to the `Page_Load` method that makes sure the error messages are not visible when there's no error to report, and add handlers for the `DataBound` and `SelectedIndexChanged` events of the instructors drop-down list to populate the courses drop-down lists:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample10.cs)]

<span data-ttu-id="45597-172">Führen Sie die Seite.</span><span class="sxs-lookup"><span data-stu-id="45597-172">Run the page.</span></span>

<span data-ttu-id="45597-173">[![Image01 abgerufen wird](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="45597-173">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span></span>

<span data-ttu-id="45597-174">Wählen Sie einen Kursleiter.</span><span class="sxs-lookup"><span data-stu-id="45597-174">Select an instructor.</span></span> <span data-ttu-id="45597-175">Die <strong>weisen einen Kurs</strong> Dropdown-Liste zeigt die Kurse, die der Dozenten zu vermitteln, nicht, und die <strong>entfernen einen Kurs</strong> Dropdown-Liste zeigt die Kurse, die der Dozenten bereits zugewiesen ist.</span><span class="sxs-lookup"><span data-stu-id="45597-175">The <strong>Assign a Course</strong> drop-down list displays the courses that the instructor doesn't teach, and the <strong>Remove a Course</strong> drop-down list displays the courses that the instructor is already assigned to.</span></span> <span data-ttu-id="45597-176">In der <strong>weisen einen Kurs</strong> Abschnitt, wählen Sie einen Kurs aus, und klicken Sie dann auf <strong>zuweisen</strong>.</span><span class="sxs-lookup"><span data-stu-id="45597-176">In the <strong>Assign a Course</strong> section, select a course and then click <strong>Assign</strong>.</span></span> <span data-ttu-id="45597-177">Verschiebt der Kurs der <strong>entfernen einen Kurs</strong> Dropdown-Liste.</span><span class="sxs-lookup"><span data-stu-id="45597-177">The course moves to the <strong>Remove a Course</strong> drop-down list.</span></span> <span data-ttu-id="45597-178">Wählen Sie einen Kurs in der <strong>entfernen einen Kurs</strong> Abschnitt, und klicken Sie auf <strong>entfernen</strong><em>.</em></span><span class="sxs-lookup"><span data-stu-id="45597-178">Select a course in the <strong>Remove a Course</strong> section and click <strong>Remove</strong><em>.</em></span></span> <span data-ttu-id="45597-179">Verschiebt der Kurs der <strong>weisen einen Kurs</strong> Dropdown-Liste.</span><span class="sxs-lookup"><span data-stu-id="45597-179">The course moves to the <strong>Assign a Course</strong> drop-down list.</span></span>

<span data-ttu-id="45597-180">Sie haben jetzt einige weitere Verfahren zum Arbeiten mit verknüpften Daten angezeigt.</span><span class="sxs-lookup"><span data-stu-id="45597-180">You have now seen some more ways to work with related data.</span></span> <span data-ttu-id="45597-181">Im folgenden Lernprogramm erfahren Sie, wie Vererbung in das Datenmodell zu verwenden, um die Verwaltbarkeit Ihrer Anwendung zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="45597-181">In the following tutorial, you'll learn how to use inheritance in the data model to improve the maintainability of your application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="45597-182">[Zurück](the-entity-framework-and-aspnet-getting-started-part-4.md)
> [Weiter](the-entity-framework-and-aspnet-getting-started-part-6.md)</span><span class="sxs-lookup"><span data-stu-id="45597-182">[Previous](the-entity-framework-and-aspnet-getting-started-part-4.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-6.md)</span></span>
