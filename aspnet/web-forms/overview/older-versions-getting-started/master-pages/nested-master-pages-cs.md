---
uid: web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
title: Geschachtelte Masterseiten (c#) | Microsoft Docs
author: rick-anderson
description: Zeigt, wie eine Masterseite innerhalb einer anderen zu schachteln.
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/28/2008
ms.topic: article
ms.assetid: 32b7fb6e-d74b-4048-91f8-70631b2523ee
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: c9497659e0b8ff8164f122e6e3cb382ac0355a32
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
---
<a name="nested-master-pages-c"></a><span data-ttu-id="b8afb-103">Geschachtelte Masterseiten (c#)</span><span class="sxs-lookup"><span data-stu-id="b8afb-103">Nested Master Pages (C#)</span></span>
====================
<span data-ttu-id="b8afb-104">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b8afb-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="b8afb-105">[Herunterladen von Code](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip) oder [PDF herunterladen](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="b8afb-105">[Download Code](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip) or [Download PDF](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span></span>

> <span data-ttu-id="b8afb-106">Zeigt, wie eine Masterseite innerhalb einer anderen zu schachteln.</span><span class="sxs-lookup"><span data-stu-id="b8afb-106">Shows how to nest one master page within another.</span></span>


## <a name="introduction"></a><span data-ttu-id="b8afb-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="b8afb-107">Introduction</span></span>

<span data-ttu-id="b8afb-108">Im Verlauf der letzten neun Lernprogramme haben wir gesehen, wie ein Layout standortweite mit Masterseiten implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="b8afb-108">Over the course of the past nine tutorials we have seen how to implement a site-wide layout with master pages.</span></span> <span data-ttu-id="b8afb-109">Kurz gesagt, ermöglichen es Masterseiten uns, den Entwickler der Seite, um allgemeine Markup in die Masterseite zusammen mit bestimmten Regionen zu definieren, die auf Basis von Seiteninhalt Inhaltsseite angepasst werden kann.</span><span class="sxs-lookup"><span data-stu-id="b8afb-109">In a nutshell, master pages allow us, the page developer, to define common markup in the master page along with specific regions that can be customized on a content page-by-content page basis.</span></span> <span data-ttu-id="b8afb-110">Die ContentPlaceHolder-Steuerelemente auf einer Masterseite anzugeben, die anpassbare Bereiche; Der angepasste Markup für die ContentPlaceHolder-Steuerelemente sind in der Inhaltsseite über Inhaltssteuerelemente definiert.</span><span class="sxs-lookup"><span data-stu-id="b8afb-110">The ContentPlaceHolder controls in a master page indicate the customizable regions; the customized markup for the ContentPlaceHolder controls are defined in the content page via Content controls.</span></span>

<span data-ttu-id="b8afb-111">Die Masterseite-Techniken, die wir bisher untersucht haben, sind sehr nützlich, wenn Sie ein einziges Layout für die gesamte Website verwendet haben.</span><span class="sxs-lookup"><span data-stu-id="b8afb-111">The master page techniques we've explored thus far are great if you have a single layout used across the entire site.</span></span> <span data-ttu-id="b8afb-112">Allerdings müssen zahlreiche großen Websites ein Website-Layout, das angepasst wird, über verschiedene Abschnitte.</span><span class="sxs-lookup"><span data-stu-id="b8afb-112">However, many large websites have a site layout that is customized across various sections.</span></span> <span data-ttu-id="b8afb-113">Betrachten Sie beispielsweise eine health care-Anwendung wird von Personal zum Verwalten von Patienteninformationen, Aktivitäten und Abrechnung aus.</span><span class="sxs-lookup"><span data-stu-id="b8afb-113">For example, consider a health care application used by hospital staff to manage patient information, activities, and billing.</span></span> <span data-ttu-id="b8afb-114">Möglicherweise gibt es drei Arten von Webseiten in dieser Anwendung:</span><span class="sxs-lookup"><span data-stu-id="b8afb-114">There may be three types of web pages in this application:</span></span>

- <span data-ttu-id="b8afb-115">Mitarbeiter Member-spezifische Seiten, in denen Mitarbeiter Verfügbarkeit aktualisieren können, Zeitpläne anzeigen, oder bitten Urlaub.</span><span class="sxs-lookup"><span data-stu-id="b8afb-115">Staff member-specific pages where staff members can update availability, view schedules, or request vacation time.</span></span>
- <span data-ttu-id="b8afb-116">Patienten-spezifische Seiten, in denen Mitarbeiter anzeigen oder bearbeiten Sie die Informationen für einen bestimmten Patienten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-116">Patient-specific pages where staff members view or edit information for a specific patient.</span></span>
- <span data-ttu-id="b8afb-117">Abrechnung-spezifische Seiten, in dem Buchhaltung aktuelle überprüfen, Anspruch Statuswerte und Finanzberichte.</span><span class="sxs-lookup"><span data-stu-id="b8afb-117">Billing-specific pages where accountants review current claim statuses and financial reports.</span></span>

<span data-ttu-id="b8afb-118">Jeder Seite möglicherweise ein gebräuchliches Layout, z. B. ein Menü über dem oberen und eine Reihe von häufig verwendeten Links entlang des unteren freigeben.</span><span class="sxs-lookup"><span data-stu-id="b8afb-118">Every page might share a common layout, such as a menu across the top and a series of frequently used links along the bottom.</span></span> <span data-ttu-id="b8afb-119">Die Mitarbeiter-, Patienten und Abrechnung-spezifische Seiten müssen aber möglicherweise zum Anpassen dieser allgemeinen Layouts dargestellt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-119">But the staff-, patient-, and billing-specific pages may need to customize this generic layout.</span></span> <span data-ttu-id="b8afb-120">Vielleicht alle Mitarbeiter-spezifische Seiten sollte z. B. eine Liste Kalender und jede Aufgabe, die Verfügbarkeit und täglichen Zeitplan des aktuell angemeldeten Benutzers anzeigen, enthalten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-120">For example, perhaps all staff-specific pages should include a calendar and task list showing the currently logged on user's availability and daily schedule.</span></span> <span data-ttu-id="b8afb-121">Möglicherweise müssen alle Patienten-spezifische Seiten zum Anzeigen der Namen, Adresse und Informationen zur Versicherung für den Patienten, dessen Informationen bearbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="b8afb-121">Perhaps all patient-specific pages need to show the name, address, and insurance information for the patient whose information is being edited.</span></span>

<span data-ttu-id="b8afb-122">Es ist möglich, mit solchen benutzerdefinierten Layouts erstellen *verschachtelte Gestaltungsvorlagen*.</span><span class="sxs-lookup"><span data-stu-id="b8afb-122">It's possible to create such customized layouts by using *nested master pages*.</span></span> <span data-ttu-id="b8afb-123">Um das oben beschriebene Szenario zu implementieren, würden wir beginnen, durch das Erstellen einer Masterseite, die die standortweite Layout, das Menü und die Fußzeile Inhalt mit ContentPlaceHolders definieren die anpassbare Bereiche definiert.</span><span class="sxs-lookup"><span data-stu-id="b8afb-123">To implement the above scenario, we would start by creating a master page that defined the site-wide layout, the menu and footer content, with ContentPlaceHolders defining the customizable regions.</span></span> <span data-ttu-id="b8afb-124">Wir würden dann drei verschachtelte Gestaltungsvorlagen, eine für jeden Typ von Webseite erstellen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-124">We would then create three nested master pages, one for each type of web page.</span></span> <span data-ttu-id="b8afb-125">Jede geschachtelte Masterseite würden den Inhalt für den Typ des Inhaltsseiten definieren, die die Gestaltungsvorlage verwenden.</span><span class="sxs-lookup"><span data-stu-id="b8afb-125">Each nested master page would define the content among the type of content pages that use the master page.</span></span> <span data-ttu-id="b8afb-126">Geschachtelte Masterseite für Patienten-spezifische Inhaltsseiten wäre also Markup und programmgesteuerte Logik für die Anzeige von Informationen zu den zu bearbeitenden Patienten enthalten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-126">In other words, the nested master page for patient-specific content pages would include markup and programmatic logic for displaying information about the patient being edited.</span></span> <span data-ttu-id="b8afb-127">Beim Erstellen einer neuen Patienten-spezifische Seite würden wir es diese geschachtelten Masterseite binden.</span><span class="sxs-lookup"><span data-stu-id="b8afb-127">When creating a new patient-specific page we would bind it to this nested master page.</span></span>

<span data-ttu-id="b8afb-128">In diesem Lernprogramm wird gestartet, da die Vorteile der verschachtelte Gestaltungsvorlagen hervorgehoben.</span><span class="sxs-lookup"><span data-stu-id="b8afb-128">This tutorial starts by highlighting the benefits of nested master pages.</span></span> <span data-ttu-id="b8afb-129">Es zeigt dann zum Erstellen und verwenden verschachtelte Gestaltungsvorlagen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-129">It then shows how to create and use nested master pages.</span></span>

> [!NOTE]
> <span data-ttu-id="b8afb-130">Verschachtelte Gestaltungsvorlagen wurden seit Version 2.0 von .NET Framework möglich.</span><span class="sxs-lookup"><span data-stu-id="b8afb-130">Nested master pages have been possible since version 2.0 of the .NET Framework.</span></span> <span data-ttu-id="b8afb-131">Allerdings in Visual Studio 2005 zur Entwurfszeit Unterstützung für verschachtelte Gestaltungsvorlagen nicht enthalten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-131">However, Visual Studio 2005 did not include design-time support for nested master pages.</span></span> <span data-ttu-id="b8afb-132">Die gute Nachricht ist, dass Visual Studio 2008 eine komfortable zur Entwurfszeit für verschachtelte Gestaltungsvorlagen bietet.</span><span class="sxs-lookup"><span data-stu-id="b8afb-132">The good news is that Visual Studio 2008 offers a rich design-time experience for nested master pages.</span></span> <span data-ttu-id="b8afb-133">Wenn Sie mithilfe von verschachtelte Gestaltungsvorlagen interessiert sind, aber weiterhin Visual Studio 2005 verwenden, sehen Sie sich [Scott Guthrie](https://weblogs.asp.net/scottgu/)des Blogeintrag [Tipps für geschachtelte Masterseiten in Visual Studio 2005-Entwurfszeit](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8afb-133">If you are interested in using nested master pages but are still using Visual Studio 2005, check out [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog entry, [Tips for Nested Master Pages in VS 2005 Design-Time](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx).</span></span>


## <a name="the-benefits-of-nested-master-pages"></a><span data-ttu-id="b8afb-134">Die Vorteile der geschachtelten Masterseiten</span><span class="sxs-lookup"><span data-stu-id="b8afb-134">The Benefits of Nested Master Pages</span></span>

<span data-ttu-id="b8afb-135">Viele Websites weisen eine übergreifende Standortentwurfs sowie mehr benutzerdefinierte Designs speziell für bestimmte Typen von Seiten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-135">Many websites have an overarching site design as well as more customized designs specific to certain types of pages.</span></span> <span data-ttu-id="b8afb-136">Z. B. in unserer Demo-Webanwendung wir haben eine rudimentäre Bereich "Verwaltung" (der Seiten in der `~/Admin` Ordner).</span><span class="sxs-lookup"><span data-stu-id="b8afb-136">For instance, in our demo web application we have created a rudimentary Administration section (the pages in the `~/Admin` folder).</span></span> <span data-ttu-id="b8afb-137">Derzeit die Webseiten in der `~/Admin` Ordner verwenden dieselbe Masterseite als diese Seiten nicht in den Bereich "Verwaltung" (nämlich `Site.master` oder `Alternate.master`, abhängig von der Auswahl des Benutzers).</span><span class="sxs-lookup"><span data-stu-id="b8afb-137">Currently the web pages in the `~/Admin` folder use the same master page as those pages not in the administration section (namely, `Site.master` or `Alternate.master`, depending on the user's selection).</span></span>

> [!NOTE]
> <span data-ttu-id="b8afb-138">Nehmen Sie vorerst an, dass unsere Standort nur eine Masterseite verfügt `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-138">For now, pretend that our site has just one master page, `Site.master`.</span></span> <span data-ttu-id="b8afb-139">Wir müssen adressieren, verschachtelte Gestaltungsvorlagen mit zwei (oder mehr) Gestaltungsvorlagen beginnend mit "mithilfe einer geschachtelten Master Seite für die Bereich"Verwaltung"" weiter unten in diesem Lernprogramm verwenden.</span><span class="sxs-lookup"><span data-stu-id="b8afb-139">We'll address using nested master pages with two (or more) master pages starting with "Using a Nested Master Page for the Administration Section" later in this tutorial.</span></span>


<span data-ttu-id="b8afb-140">Angenommen Sie, wir aufgefordert wurden, passen Sie das Layout der Verwaltungsseiten enthalten zusätzliche Informationen oder Links, die andernfalls nicht in anderen Seiten in der Website vorhanden wäre.</span><span class="sxs-lookup"><span data-stu-id="b8afb-140">Imagine that we were asked to customize the layout of the Administration pages to include additional information or links that would not otherwise be present in other pages in the site.</span></span> <span data-ttu-id="b8afb-141">Es gibt vier Techniken zum Implementieren dieser Anforderung:</span><span class="sxs-lookup"><span data-stu-id="b8afb-141">There are four techniques to implement this requirement:</span></span>

1. <span data-ttu-id="b8afb-142">Manuell hinzufügen Administration-spezifische Informationen und Links für jede Seite Inhalt in die `~/Admin` Ordner.</span><span class="sxs-lookup"><span data-stu-id="b8afb-142">Manually add the Administration-specific information and links to every content page in the `~/Admin` folder.</span></span>
2. <span data-ttu-id="b8afb-143">Update der `Site.master` Masterseite Verwaltung Abschnitt-spezifische Informationen und Links, und fügen Sie Code hinzu, der Masterseite angezeigt oder ausgeblendet in diesen Abschnitten gibt an, ob eine der Administration-Seiten besucht wurde anhand.</span><span class="sxs-lookup"><span data-stu-id="b8afb-143">Update the `Site.master` master page to include the Administration section-specific information and links, and then add code to the master page to show or hide these sections based on whether one of the Administration pages is being visited.</span></span>
3. <span data-ttu-id="b8afb-144">Erstellen eine neue Masterseite kopieren Sie speziell für den Bereich "Verwaltung" über das Markup `Site.master`Verwaltung Abschnitt-spezifische Informationen und Links hinzufügen und aktualisieren Sie dann die Inhaltsseiten in der `~/Admin` zu dieser neuen Master zu verwendenden Ordner an Seite ".</span><span class="sxs-lookup"><span data-stu-id="b8afb-144">Create a new master page specifically for the Administration section, copy over the markup from `Site.master`, add the Administration section-specific information and links, and then update the content pages in the `~/Admin` folder to use this new master page.</span></span>
4. <span data-ttu-id="b8afb-145">Erstellen eine geschachtelten Masterseite, die an bindet `Site.master` und über die Inhaltsseiten in der `~/Admin` Ordner verwenden diese neue geschachtelte Masterseite.</span><span class="sxs-lookup"><span data-stu-id="b8afb-145">Create a nested master page that binds to `Site.master` and have the content pages in the `~/Admin` folder use this new nested master page.</span></span> <span data-ttu-id="b8afb-146">Diese geschachtelten Masterseite würde nur die zusätzliche Informationen und Links, die speziell für die Administration-Seiten enthalten und müssen nicht das Markup in vordefinierten wiederholen `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-146">This nested master page would include just the additional information and links specific to the Administration pages and would not need to repeat the markup already defined in `Site.master`.</span></span>

<span data-ttu-id="b8afb-147">Die erste Option ist die am wenigsten attraktiv.</span><span class="sxs-lookup"><span data-stu-id="b8afb-147">The first option is the least palatable.</span></span> <span data-ttu-id="b8afb-148">Mithilfe von Masterseiten Angelpunkt wird manuell kopieren und fügen allgemeine Markup zum neuen ASP.NET-Seiten verschoben.</span><span class="sxs-lookup"><span data-stu-id="b8afb-148">The whole point of using master pages is to move away from having to manually copy and paste common markup to new ASP.NET pages.</span></span> <span data-ttu-id="b8afb-149">Die zweite Option akzeptabel ist, jedoch wird die Anwendung weniger verwaltbar, wie er von der Masterseiten mit Markup hebt, die nur gelegentlich angezeigt wird und erfordert die Bearbeitung der Masterseite Entwickler umgehen dieses Markup und wann merken zu müssen, bestimmte Markup wird genau im Vergleich zu angezeigt, wenn es ausgeblendet ist.</span><span class="sxs-lookup"><span data-stu-id="b8afb-149">The second option is acceptable, but makes the application less maintainable as it bulks up the master pages with markup that is only occasionally displayed and requires developers editing the master page to work around this markup and to have to remember when, exactly, certain markup is displayed versus when it is hidden.</span></span> <span data-ttu-id="b8afb-150">Dieser Ansatz wäre weniger Hauptfeuerlöschpumpe als Anpassungen aus mehr Typen von Webseiten, die von dieser einzelnen Masterseite untergebracht werden musste.</span><span class="sxs-lookup"><span data-stu-id="b8afb-150">This approach would be less tenable as customizations from more and more types of web pages needed to be accommodated by this single master page.</span></span>

<span data-ttu-id="b8afb-151">Die dritte Option entfernt die Übersichtlichkeit und Komplexität Probleme mit der zweiten Option die eingeblendet.</span><span class="sxs-lookup"><span data-stu-id="b8afb-151">The third option removes the clutter and complexity issues the surfaced with the second option.</span></span> <span data-ttu-id="b8afb-152">Option drei der größte Nachteil ist jedoch, dass es erforderlich ist, kopieren Sie das allgemeine Layout von `Site.master` der neuen Verwaltung Abschnitt-spezifische Masterseite.</span><span class="sxs-lookup"><span data-stu-id="b8afb-152">However, option three's main drawback is that it requires us to copy and paste the common layout from `Site.master` to the new Administration section-specific master page.</span></span> <span data-ttu-id="b8afb-153">Wenn es sich später entscheiden, die das standortweite-Layout ändern, das müssen Sie denken Sie daran, die an zwei Orten zu ändern.</span><span class="sxs-lookup"><span data-stu-id="b8afb-153">If we later decide to change the site-wide layout we have to remember to change it in two places.</span></span>

<span data-ttu-id="b8afb-154">Die vierte Option verschachtelte Gestaltungsvorlagen, senden Sie uns das beste aus der zweiten und dritten-Optionen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-154">The fourth option, nested master pages, give us the best of the second and third options.</span></span> <span data-ttu-id="b8afb-155">Die standortweite Layoutinformationen werden in einer Datei - der obersten Ebene Masterseite - beibehalten, während die Inhalte, die spezifisch für bestimmte Regionen in verschiedenen Dateien ausgelagert wird.</span><span class="sxs-lookup"><span data-stu-id="b8afb-155">The site-wide layout information is maintained in one file - the top-level master page - while the content specific to particular regions is separated out into different files.</span></span>

<span data-ttu-id="b8afb-156">In diesem Lernprogramm beginnt mit einem Blick auf das Erstellen und Verwenden einer einfachen geschachtelte Masterseite.</span><span class="sxs-lookup"><span data-stu-id="b8afb-156">This tutorial starts with a look at creating and using a simple nested master page.</span></span> <span data-ttu-id="b8afb-157">Wir erstellen eine brandneue auf oberster Ebene Masterseite, zwei verschachtelte Gestaltungsvorlagen und zwei Inhaltsseiten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-157">We create a brand new top-level master page, two nested master pages, and two content pages.</span></span> <span data-ttu-id="b8afb-158">Beginnend mit "mithilfe einer geschachtelten Master Seite für die Bereich"Verwaltung"", untersuchen wir unsere vorhandene Masterseite-Architektur, um die Verwendung von verschachtelte Gestaltungsvorlagen umfassen aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="b8afb-158">Starting with "Using a Nested Master Page for the Administration Section," we look at updating our existing master page architecture to include the use of nested master pages.</span></span> <span data-ttu-id="b8afb-159">Insbesondere wir eine geschachtelte Masterseite erstellen und verwenden, um zusätzliche benutzerdefinierte Inhalte für die Inhaltsseiten in umfassen die `~/Admin` Ordner.</span><span class="sxs-lookup"><span data-stu-id="b8afb-159">Specifically, we create a nested master page and use it to include additional custom content for the content pages in the `~/Admin` folder.</span></span>

## <a name="step-1-creating-a-simple-top-level-master-page"></a><span data-ttu-id="b8afb-160">Schritt 1: Erstellen einer einfachen auf oberster Ebene Masterseite</span><span class="sxs-lookup"><span data-stu-id="b8afb-160">Step 1: Creating a Simple Top-Level Master Page</span></span>

<span data-ttu-id="b8afb-161">Erstellen einen geschachtelte Master basierend auf einer vorhandenen Master Seiten und anschließendes Aktualisieren einer vorhandenen Inhaltsseite Verwendung dieses neuen geschachtelten Masterseite anstelle der obersten Ebene Masterseite gewisse Komplexität umfasst, da die vorhandenen Inhaltsseiten bereits bestimmte erwarten ContentPlaceHolder-Steuerelemente, die in der master-Seite auf oberster Ebene definiert.</span><span class="sxs-lookup"><span data-stu-id="b8afb-161">Creating a nested master based on one of the existing master pages and then updating an existing content page to use this new nested master page instead of the top-level master page entails some complexity because the existing content pages already expect certain ContentPlaceHolder controls defined in the top-level master page.</span></span> <span data-ttu-id="b8afb-162">Aus diesem Grund muss die geschachtelte Gestaltungsvorlage auch die gleichen ContentPlaceHolder-Steuerelemente mit den gleichen Namen enthalten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-162">Therefore, the nested master page must also include the same ContentPlaceHolder controls with the same names.</span></span> <span data-ttu-id="b8afb-163">Darüber hinaus unsere bestimmten demoanwendung hat zwei Masterseiten (`Site.master` und `Alternate.master`) dynamisch zugewiesen sind einer Inhaltsseite ausgehend von einem Benutzer, wodurch diese Komplexität weiter hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-163">Furthermore, our particular demo application has two master pages (`Site.master` and `Alternate.master`) that are dynamically assigned to a content page based on a user's preferences, which further adds to this complexity.</span></span> <span data-ttu-id="b8afb-164">Betrachten wir Aktualisieren der vorhandenen Anwendung verschachtelte Gestaltungsvorlagen weiter unten in diesem Lernprogramm verwenden, aber wir zuerst den Fokus auf ein einfaches Masterseiten Beispiel geschachtelt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-164">We will look at updating the existing application to use nested master pages later in this tutorial, but let's first focus on a simple nested master pages example.</span></span>

<span data-ttu-id="b8afb-165">Erstellen Sie einen neuen Ordner namens `NestedMasterPages` und fügen Sie dann in diesen Ordner mit dem Namen eine neue Masterseitendatei `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-165">Create a new folder named `NestedMasterPages` and then add a new master page file to that folder named `Simple.master`.</span></span> <span data-ttu-id="b8afb-166">(Siehe Abbildung 1 für einen Screenshot des Projektmappen-Explorer nach dem dieser Ordner und Dateien hinzugefügt wurden.) Ziehen Sie die `AlternateStyles.css` Stylesheetdatei aus dem Projektmappen-Explorer in den Designer.</span><span class="sxs-lookup"><span data-stu-id="b8afb-166">(See Figure 1 for a screen shot of the Solution Explorer after this folder and file have been added.) Drag the `AlternateStyles.css` style sheet file from the Solution Explorer onto the Designer.</span></span> <span data-ttu-id="b8afb-167">Dadurch wird eine `<link>` Element an der Stylesheetdatei in der `<head>` Elements, nach denen der Gestaltungsvorlage `<head>` des Elements Markup sollte wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="b8afb-167">This adds a `<link>` element to the style sheet file in the `<head>` element, after which the master page's `<head>` element's markup should look like:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample1.aspx)]

<span data-ttu-id="b8afb-168">Als Nächstes fügen Sie das folgende Markup in das Web Form des `Simple.master`:</span><span class="sxs-lookup"><span data-stu-id="b8afb-168">Next, add the following markup within the Web Form of `Simple.master`:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample2.aspx)]

<span data-ttu-id="b8afb-169">Dieses Markup zeigt eine Verknüpfung mit dem Titel "Geschachtelte Masterseiten (einfach)" am oberen Rand der Seite in großer Schriftart in einem Hintergrundthread dunkelblaue weiß.</span><span class="sxs-lookup"><span data-stu-id="b8afb-169">This markup displays a link titled "Nested Master Pages (Simple)" at the top of the page in a large white font on a navy background.</span></span> <span data-ttu-id="b8afb-170">Wird unter, die die `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b8afb-170">Beneath that is the `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="b8afb-171">Abbildung 1 zeigt die `Simple.master` Masterseite, wenn in der Visual Studio-Designer geladen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-171">Figure 1 shows the `Simple.master` master page when loaded in the Visual Studio Designer.</span></span>


<span data-ttu-id="b8afb-172">[![Der geschachtelte Masterseite definiert spezifische Inhalte zu den Seiten im Bereich "Verwaltung"](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b8afb-172">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span></span>

<span data-ttu-id="b8afb-173">**Abbildung 01**: die geschachtelte Master Seite definiert Content speziell für die Seiten im Bereich "Verwaltung" ([klicken Sie hier, um das Bild in voller Größe angezeigt](nested-master-pages-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="b8afb-173">**Figure 01**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image3.png))</span></span>


## <a name="step-2-creating-a-simple-nested-master-page"></a><span data-ttu-id="b8afb-174">Schritt 2: Erstellen einer einfachen geschachtelte Masterseite</span><span class="sxs-lookup"><span data-stu-id="b8afb-174">Step 2: Creating a Simple Nested Master Page</span></span>

<span data-ttu-id="b8afb-175">`Simple.master` enthält zwei ContentPlaceHolder-Steuerelemente: die `MainContent` ContentPlaceHolder, die wir hinzugefügt, in das Web Form zusammen mit der `head` ContentPlaceHolder in die `<head>` Element.</span><span class="sxs-lookup"><span data-stu-id="b8afb-175">`Simple.master` contains two ContentPlaceHolder controls: the `MainContent` ContentPlaceHolder we added within the Web Form along with the `head` ContentPlaceHolder in the `<head>` element.</span></span> <span data-ttu-id="b8afb-176">Wir würden eine Inhaltsseite zu erstellen und binden Sie es an `Simple.master` Inhaltsseite müssten zwei Content-Steuerelemente, die zwei ContentPlaceHolders verweisen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-176">If we were to create a content page and bind it to `Simple.master` the content page would have two Content controls referencing the two ContentPlaceHolders.</span></span> <span data-ttu-id="b8afb-177">Auf ähnliche Weise, wenn wir eine geschachtelte Masterseite erstellen und binden Sie es an `Simple.master` geschachtelte Masterseite zwei Content-Steuerelemente haben.</span><span class="sxs-lookup"><span data-stu-id="b8afb-177">Similarly, if we create a nested master page and bind it to `Simple.master` then the nested master page will have two Content controls.</span></span>

<span data-ttu-id="b8afb-178">Fügen Sie eine neue geschachtelte Masterseite der `NestedMasterPages` Ordner mit dem Namen `SimpleNested.master`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-178">Let's add a new nested master page to the `NestedMasterPages` folder named `SimpleNested.master`.</span></span> <span data-ttu-id="b8afb-179">Mit der rechten Maustaste auf die `NestedMasterPages` Ordner, und wählen Sie Neues Element hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-179">Right-click on the `NestedMasterPages` folder and choose Add New Item.</span></span> <span data-ttu-id="b8afb-180">Daraufhin wird das Dialogfeld "Neues Element hinzufügen" in Abbildung 2 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-180">This brings up the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="b8afb-181">Wählen Sie den Vorlagentyp Gestaltungsvorlage und den Namen der neuen Masterseite.</span><span class="sxs-lookup"><span data-stu-id="b8afb-181">Select the Master Page template type and type in the name of the new master page.</span></span> <span data-ttu-id="b8afb-182">Um anzugeben, dass die neue Masterseite einer geschachtelten Masterseite werden soll, das Kontrollkästchen Sie "Masterseite auswählen".</span><span class="sxs-lookup"><span data-stu-id="b8afb-182">To indicate that the new master page should be a nested master page, check the "Select master page" checkbox.</span></span>

<span data-ttu-id="b8afb-183">Klicken Sie anschließend auf die Schaltfläche "hinzufügen".</span><span class="sxs-lookup"><span data-stu-id="b8afb-183">Next, click the Add button.</span></span> <span data-ttu-id="b8afb-184">Dadurch wird die gleiche SELECT-Anweisung eine Gestaltungsvorlage-Dialogfeld angezeigt, wenn die Bindung einer Inhaltsseite auf einer Masterseite angezeigt (siehe Abbildung 3).</span><span class="sxs-lookup"><span data-stu-id="b8afb-184">This will display the same Select a Master Page dialog box you see when binding a content page to a master page (see Figure 3).</span></span> <span data-ttu-id="b8afb-185">Wählen Sie die `Simple.master` Masterseite in der `NestedMasterPages` Ordner, und klicken Sie auf OK.</span><span class="sxs-lookup"><span data-stu-id="b8afb-185">Choose the `Simple.master` master page in the `NestedMasterPages` folder and click OK.</span></span>

> [!NOTE]
> <span data-ttu-id="b8afb-186">Wenn Sie Ihre ASP.NET-Website unter Verwendung des Webanwendungsprojekt-Modells anstelle des Modells für die Website-Projekt erstellt haben, sehen Sie nicht das Kontrollkästchen "Masterseite auswählen" im Dialogfeld "Neues Element hinzufügen" in Abbildung 2 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-186">If you created your ASP.NET website using the Web Application Project model instead of the Web Site Project model you will not see the "Select master page" checkbox in the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="b8afb-187">Um eine geschachtelte Masterseite zu erstellen, wenn das Webanwendungsprojekt-Modell verwendet, müssen Sie die Vorlage geschachtelte Gestaltungsvorlage (anstelle der Gestaltungsvorlage-Vorlage) auswählen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-187">To create a nested master page when using the Web Application Project model you must choose the Nested Master Page template (instead of the Master Page template).</span></span> <span data-ttu-id="b8afb-188">Nach Auswahl der Gestaltungsvorlage geschachtelt-Vorlage, und klicken Sie auf Hinzufügen, wählen Sie das gleiche eine Gestaltungsvorlage (Dialogfeld), die in Abbildung 3 gezeigt angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="b8afb-188">After selecting the Nested Master Page template and clicking Add, the same Select a Master Page dialog box shown in Figure 3 will appear.</span></span>


<span data-ttu-id="b8afb-189">[![Überprüfen Sie die &quot;Masterseite auswählen&quot; Kontrollkästchen, um eine geschachtelte Gestaltungsvorlage hinzufügen](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="b8afb-189">[![Check the &quot;Select master page&quot; Checkbox to Add a Nested Master Page](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span></span>

<span data-ttu-id="b8afb-190">**Abbildung 02**: Aktivieren Sie das Kontrollkästchen "Masterseite auswählen", um eine geschachtelte Gestaltungsvorlage hinzuzufügen ([klicken Sie hier, um das Bild in voller Größe angezeigt](nested-master-pages-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="b8afb-190">**Figure 02**: Check the "Select master page" Checkbox to Add a Nested Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image6.png))</span></span>


<span data-ttu-id="b8afb-191">[![Binden der geschachtelten Masterseite zur Simple.master Masterseite](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b8afb-191">[![Bind the Nested Master Page to the Simple.master Master Page](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span></span>

<span data-ttu-id="b8afb-192">**Abbildung 03**: binden die Masterseite geschachtelt, um die `Simple.master` Gestaltungsvorlage ([klicken Sie hier, um das Bild in voller Größe angezeigt](nested-master-pages-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="b8afb-192">**Figure 03**: Bind the Nested Master Page to the `Simple.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image9.png))</span></span>


<span data-ttu-id="b8afb-193">Die geschachtelte Gestaltungsvorlage deklarativem Markup, die weiter unten gezeigte enthält zwei Content-Steuerelemente, die auf der obersten Ebene Masterseite zwei ContentPlaceHolder-Steuerelemente verweisen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-193">The nested master page's declarative markup, shown below, contains two Content controls referencing the top-level master page's two ContentPlaceHolder controls.</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample3.aspx)]

<span data-ttu-id="b8afb-194">Mit Ausnahme der `<%@ Master %>` Richtlinie, anfängliche deklarativem Markup für die geschachtelte Gestaltungsvorlage ist identisch mit das Markup, das anfänglich generiert wird, wenn der gleichen Masterseite der obersten Ebene eine Inhaltsseite zu binden.</span><span class="sxs-lookup"><span data-stu-id="b8afb-194">Except for the `<%@ Master %>` directive, the nested master page's initial declarative markup is identical to the markup that is initially generated when binding a content page to the same top-level master page.</span></span> <span data-ttu-id="b8afb-195">Wie einer Inhaltsseite `<%@ Page %>` Richtlinie, die `<%@ Master %>` hier Richtlinie enthält eine `MasterPageFile` Attribut, das die geschachtelte Gestaltungsvorlage übergeordneten Masterseite angibt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-195">Like a content page's `<%@ Page %>` directive, the `<%@ Master %>` directive here includes a `MasterPageFile` attribute that specifies the nested master page's parent master page.</span></span> <span data-ttu-id="b8afb-196">Der Hauptunterschied zwischen der geschachtelten Masterseite und einer Inhaltsseite auf die gleiche auf oberster Ebene Masterseite gebunden ist, dass die geschachtelte Masterseite ContentPlaceHolder-Steuerelemente enthalten kann.</span><span class="sxs-lookup"><span data-stu-id="b8afb-196">The main difference between the nested master page and a content page bound to the same top-level master page is that the nested master page can include ContentPlaceHolder controls.</span></span> <span data-ttu-id="b8afb-197">Die geschachtelte Masterseite ContentPlaceHolder-Steuerelemente definieren, die Regionen, in denen die Inhaltsseiten Markup anpassen können.</span><span class="sxs-lookup"><span data-stu-id="b8afb-197">The nested master page's ContentPlaceHolder controls define the regions where the content pages can customize the markup.</span></span>

<span data-ttu-id="b8afb-198">Aktualisieren Sie diese geschachtelten Masterseite, sodass sie den Text "Hello, aus SimpleNested!" angezeigt</span><span class="sxs-lookup"><span data-stu-id="b8afb-198">Update this nested master page so that it displays the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="b8afb-199">im Inhaltssteuerelement, das entspricht, der `MainContent` ContentPlaceHolder-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="b8afb-199">in the Content control that corresponds to the `MainContent` ContentPlaceHolder control.</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample4.aspx)]

<span data-ttu-id="b8afb-200">Klicken Sie nach dem Herstellen der Code, die geschachtelten Masterseite speichern, und fügen Sie dann eine neue Seite zu den `NestedMasterPages` Ordner mit dem Namen `Default.aspx`, und binden Sie es an die `SimpleNested.master` Masterseite.</span><span class="sxs-lookup"><span data-stu-id="b8afb-200">After making this addition, save the nested master page and then add a new content page to the `NestedMasterPages` folder named `Default.aspx`, and bind it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="b8afb-201">Beim Hinzufügen von dieser Seite werden Sie möglicherweise überrascht, dass sie keine Inhaltssteuerelemente enthält (siehe Abbildung 4).</span><span class="sxs-lookup"><span data-stu-id="b8afb-201">Upon adding this page you may be surprised to see that it contains no Content controls (see Figure 4)!</span></span> <span data-ttu-id="b8afb-202">Inhaltsseite kann nur Zugriff auf seine *übergeordneten* Seite ContentPlaceHolders "master".</span><span class="sxs-lookup"><span data-stu-id="b8afb-202">A content page can only access its *parent* master page's ContentPlaceHolders.</span></span> <span data-ttu-id="b8afb-203">`SimpleNested.master` enthält keine ContentPlaceHolder-Steuerelemente. aus diesem Grund kann keine an diese Masterseite gebundene Inhaltsseite Content-Steuerelemente enthalten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-203">`SimpleNested.master` does not contain any ContentPlaceHolder controls; therefore, any content page bound to this master page cannot contain any Content controls.</span></span>


<span data-ttu-id="b8afb-204">[![Die neue Seite enthält keine Inhaltssteuerelemente](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="b8afb-204">[![The New Content Page Contains No Content Controls](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span></span>

<span data-ttu-id="b8afb-205">**Abbildung 04**: der neue Inhalt Seite enthält keine Inhaltssteuerelemente ([klicken Sie hier, um das Bild in voller Größe angezeigt](nested-master-pages-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="b8afb-205">**Figure 04**: The New Content Page Contains No Content Controls ([Click to view full-size image](nested-master-pages-cs/_static/image12.png))</span></span>


<span data-ttu-id="b8afb-206">Müssen wir werden die geschachtelte Gestaltungsvorlage aktualisieren (`SimpleNested.master`) ContentPlaceHolder-Steuerelemente enthalten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-206">What we need to do is update the nested master page (`SimpleNested.master`) to include ContentPlaceHolder controls.</span></span> <span data-ttu-id="b8afb-207">In der Regel möchten die verschachtelten Gestaltungsvorlagen ein ContentPlaceHolder für jede ContentPlaceHolder wodurch dessen untergeordneten Gestaltungsvorlage oder Inhaltsseite zum Arbeiten mit der obersten Ebene Masterseite ContentPlaceHolder definiert, die von der übergeordneten Masterseite einschließen Steuerelemente.</span><span class="sxs-lookup"><span data-stu-id="b8afb-207">Typically you'll want your nested master pages to include a ContentPlaceHolder for each ContentPlaceHolder defined by its parent master page, thereby allowing its child master page or content page to work with any of the top-level master page's ContentPlaceHolder controls.</span></span>

<span data-ttu-id="b8afb-208">Update der `SimpleNested.master` Masterseite seine zwei Inhaltssteuerelemente eine ContentPlaceHolder einschließt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-208">Update the `SimpleNested.master` master page to include a ContentPlaceHolder in its two Content controls.</span></span> <span data-ttu-id="b8afb-209">Geben Sie die ContentPlaceHolder Steuerelemente den gleichen Namen wie das ContentPlaceHolder-Steuerelement, dem ihre Inhaltssteuerelement bezieht.</span><span class="sxs-lookup"><span data-stu-id="b8afb-209">Give the ContentPlaceHolder controls the same name as the ContentPlaceHolder control their Content control refers to.</span></span> <span data-ttu-id="b8afb-210">Hinzufügen, also ein ContentPlaceHolder-Steuerelement namens `MainContent` steuern, auf den Inhalt `SimpleNested.master` , verweist der `MainContent` ContentPlaceHolder in `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-210">That is, add a ContentPlaceHolder control named `MainContent` to the Content control in `SimpleNested.master` that references the `MainContent` ContentPlaceHolder in `Simple.master`.</span></span> <span data-ttu-id="b8afb-211">Führen Sie die gleiche Botschaft über das Inhaltssteuerelement, das verweist auf die `head` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b8afb-211">Do the same thing in the Content control that references the `head` ContentPlaceHolder.</span></span>

> [!NOTE]
> <span data-ttu-id="b8afb-212">Beim Benennen von ContentPlaceHolder-Steuerelemente in der geschachtelten Masterseite identisch mit der ContentPlaceHolders auf der obersten Ebene Masterseite sollten, ist diese Benennungskonvention Symmetrie nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="b8afb-212">While I recommend naming the ContentPlaceHolder controls in the nested master page the same as the ContentPlaceHolders in the top-level master page, this naming symmetry is not required.</span></span> <span data-ttu-id="b8afb-213">Sie können die ContentPlaceHolder-Steuerelemente in der geschachtelten Masterseite einen beliebigen Namen geben, den Ihnen gefallen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-213">You can give the ContentPlaceHolder controls in your nested master page any name you like.</span></span> <span data-ttu-id="b8afb-214">Allerdings es ist einfacher, daran zu denken, was ContentPlaceHolders entsprechen welche Bereiche der Seite, wenn mein auf oberster Ebene Gestaltungsvorlage und verschachtelte Gestaltungsvorlagen die gleichen Namen verwenden.</span><span class="sxs-lookup"><span data-stu-id="b8afb-214">However, I find it easier to remember what ContentPlaceHolders correspond with what regions of the page if my top-level master page and nested master pages use the same names.</span></span>


<span data-ttu-id="b8afb-215">Nach dem Herstellen dieser Ergänzungen der `SimpleNested.master` der Masterseite deklarativem Markup sollte ähnlich der folgenden aussehen:</span><span class="sxs-lookup"><span data-stu-id="b8afb-215">After making these additions your `SimpleNested.master` master page's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample5.aspx)]

<span data-ttu-id="b8afb-216">Löschen der `Default.aspx` Inhaltsseite soeben erstellt wurde, und klicken Sie dann erneut hinzufügen, binden an die `SimpleNested.master` Masterseite.</span><span class="sxs-lookup"><span data-stu-id="b8afb-216">Delete the `Default.aspx` content page we just created and then re-add it, binding it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="b8afb-217">Dieses Mal fügt Visual Studio auf zwei Inhaltssteuerelemente an die `Default.aspx`, verweisen auf die ContentPlaceHolders jetzt in definierten `SimpleNested.master` (siehe Abbildung 6).</span><span class="sxs-lookup"><span data-stu-id="b8afb-217">This time Visual Studio adds two Content controls to the `Default.aspx`, referencing the ContentPlaceHolders now defined in `SimpleNested.master` (see Figure 6).</span></span> <span data-ttu-id="b8afb-218">Fügen Sie den Text "Hello, von" default.aspx "!"</span><span class="sxs-lookup"><span data-stu-id="b8afb-218">Add the text, "Hello, from Default.aspx!"</span></span> <span data-ttu-id="b8afb-219">in den Inhalt zu steuern, die auf die verwiesen wird `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-219">in the Content control that referenced `MainContent`.</span></span>

<span data-ttu-id="b8afb-220">Abbildung 5 zeigt die drei Entitäten, die hier - `Simple.master`, `SimpleNested.master`, und `Default.aspx` - und wie sie miteinander in Beziehung stehen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-220">Figure 5 shows the three entities involved here - `Simple.master`, `SimpleNested.master`, and `Default.aspx` - and how they relate to one another.</span></span> <span data-ttu-id="b8afb-221">Wie das Diagramm zeigt, implementiert die geschachtelten Masterseite Inhaltssteuerelemente ContentPlaceHolder seines übergeordneten Elements.</span><span class="sxs-lookup"><span data-stu-id="b8afb-221">As the diagram shows, the nested master page implements Content controls for its parent's ContentPlaceHolder.</span></span> <span data-ttu-id="b8afb-222">Wenn diese Bereiche auf der Seite Inhalt zugreifen kann müssen, muss die geschachtelte Gestaltungsvorlage eigene ContentPlaceHolders an die Inhaltssteuerelemente hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-222">If these regions need to be accessible to the content page, the nested master page must add its own ContentPlaceHolders to the Content controls.</span></span>


<span data-ttu-id="b8afb-223">[![Die auf der obersten Ebene und geschachtelte Masterseiten diktieren Layout der Inhaltsseite](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="b8afb-223">[![The Top-Level and Nested Master Pages Dictate the Content Page's Layout](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span></span>

<span data-ttu-id="b8afb-224">**Abbildung 05**: Masterseiten der obersten Ebene und geschachtelte diktieren der Inhaltsseite Layout ([klicken Sie hier, um das Bild in voller Größe angezeigt](nested-master-pages-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="b8afb-224">**Figure 05**: The Top-Level and Nested Master Pages Dictate the Content Page's Layout ([Click to view full-size image](nested-master-pages-cs/_static/image15.png))</span></span>


<span data-ttu-id="b8afb-225">Dieses Verhalten wird veranschaulicht, wie eine Inhaltsseite oder Masterseite nur seine übergeordneten Masterseite gesehen ist.</span><span class="sxs-lookup"><span data-stu-id="b8afb-225">This behavior illustrates how a content page or master page is only cognizant of its parent master page.</span></span> <span data-ttu-id="b8afb-226">Dieses Verhalten wird auch durch die Visual Studio-Designer angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-226">This behavior is also indicated by the Visual Studio Designer.</span></span> <span data-ttu-id="b8afb-227">Abbildung 6 zeigt den Designer für `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-227">Figure 6 shows the Designer for `Default.aspx`.</span></span> <span data-ttu-id="b8afb-228">Während der Designer deutlich zeigt, welche Bereiche aus der Inhaltsseite bearbeitet werden und welche Teile werden nicht, nicht es unterscheiden, was nicht bearbeitbare Bereiche aus der geschachtelten Masterseite sind und welche Bereiche der obersten Ebene Masterseite.</span><span class="sxs-lookup"><span data-stu-id="b8afb-228">While the Designer clearly shows what regions are editable from the content page and what portions aren't, it doesn't disambiguate what non-editable regions are from the nested master page and what regions are from the top-level master page.</span></span>


<span data-ttu-id="b8afb-229">[![Inhalt Seite jetzt enthält Inhaltssteuerelemente, für die geschachtelte Gestaltungsvorlage ContentPlaceHolders](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="b8afb-229">[![The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span></span>

<span data-ttu-id="b8afb-230">**Abbildung 06**: die Seite nun enthält Inhalte Inhaltssteuerelemente für die geschachtelte Masterseite ContentPlaceHolders ([klicken Sie hier, um das Bild in voller Größe angezeigt](nested-master-pages-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="b8afb-230">**Figure 06**: The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders ([Click to view full-size image](nested-master-pages-cs/_static/image18.png))</span></span>


## <a name="step-3-adding-a-second-simple-nested-master-page"></a><span data-ttu-id="b8afb-231">Schritt 3: Hinzufügen einer zweiten einfache geschachtelte Gestaltungsvorlage</span><span class="sxs-lookup"><span data-stu-id="b8afb-231">Step 3: Adding a Second Simple Nested Master Page</span></span>

<span data-ttu-id="b8afb-232">Der Vorteil der verschachtelte Gestaltungsvorlagen ist noch deutlicher, wenn es mehrere verschachtelte Gestaltungsvorlagen gibt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-232">The benefit of nested master pages is more evident when there are multiple nested master pages.</span></span> <span data-ttu-id="b8afb-233">Um diesen Vorteil zu veranschaulichen, erstellen Sie eine andere geschachtelte Masterseite in der `NestedMasterPages` Ordner; der Name dieses neue geschachtelte Masterseite `SimpleNestedAlternate.master` und binden Sie es an die `Simple.master` Masterseite.</span><span class="sxs-lookup"><span data-stu-id="b8afb-233">To illustrate this benefit, create another nested master page in the `NestedMasterPages` folder; name this new nested master page `SimpleNestedAlternate.master` and bind it to the `Simple.master` master page.</span></span> <span data-ttu-id="b8afb-234">Fügen Sie in der geschachtelten Masterseite zwei Inhaltssteuerelementen ContentPlaceHolder-Steuerelemente hinzu, wie in Schritt2.</span><span class="sxs-lookup"><span data-stu-id="b8afb-234">Add ContentPlaceHolder controls in the nested master page's two Content controls like we did in Step 2.</span></span> <span data-ttu-id="b8afb-235">Fügen Sie auch den Text "Hello, aus SimpleNestedAlternate!"</span><span class="sxs-lookup"><span data-stu-id="b8afb-235">Also add the text, "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="b8afb-236">im Inhaltssteuerelement, das der obersten Ebene Gestaltungsvorlage entspricht `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b8afb-236">in the Content control that corresponds to the top-level master page's `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="b8afb-237">Nach diesen Änderungen sollte Ihre neue geschachtelte Masterseite deklarativem Markup etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="b8afb-237">After making these changes your new nested master page's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample6.aspx)]

<span data-ttu-id="b8afb-238">Erstellen Sie eine Seite mit dem Namen `Alternate.aspx` in der `NestedMasterPages` Ordner und binden Sie es an die `SimpleNestedAlternate.master` geschachtelte Masterseite.</span><span class="sxs-lookup"><span data-stu-id="b8afb-238">Create a content page named `Alternate.aspx` in the `NestedMasterPages` folder and bind it to the `SimpleNestedAlternate.master` nested master page.</span></span> <span data-ttu-id="b8afb-239">Fügen Sie den Text "Hello, über alternative!"</span><span class="sxs-lookup"><span data-stu-id="b8afb-239">Add the text, "Hello, from Alternate!"</span></span> <span data-ttu-id="b8afb-240">im Inhaltssteuerelement, das entspricht `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-240">in the Content control that corresponds to `MainContent`.</span></span> <span data-ttu-id="b8afb-241">Abbildung 7 zeigt `Alternate.aspx` Wenn durch die Visual Studio-Designer angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-241">Figure 7 shows `Alternate.aspx` when viewed through the Visual Studio Designer.</span></span>


<span data-ttu-id="b8afb-242">[![Alternate.aspx wird an die Gestaltungsvorlage SimpleNestedAlternate.master gebunden.](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="b8afb-242">[![Alternate.aspx is Bound to the SimpleNestedAlternate.master Master Page](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span></span>

<span data-ttu-id="b8afb-243">**Abbildung 07**: `Alternate.aspx` gebunden ist, um die `SimpleNestedAlternate.master` Gestaltungsvorlage ([klicken Sie hier, um das Bild in voller Größe angezeigt](nested-master-pages-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="b8afb-243">**Figure 07**: `Alternate.aspx` is Bound to the `SimpleNestedAlternate.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image21.png))</span></span>


<span data-ttu-id="b8afb-244">Vergleichen Sie die Designer in Abbildung 7 in den Designer in Abbildung 6.</span><span class="sxs-lookup"><span data-stu-id="b8afb-244">Compare the Designer in Figure 7 to the Designer in Figure 6.</span></span> <span data-ttu-id="b8afb-245">Beide Inhaltsseiten gemeinsam dasselbe Layout in der obersten Ebene Masterseite definiert (`Simple.master`), d. h. auf den Titel "Nested Master Pages Lernprogramm (einfach)".</span><span class="sxs-lookup"><span data-stu-id="b8afb-245">Both content pages share the same layout defined in the top-level master page (`Simple.master`), namely the "Nested Master Pages Tutorial (Simple)" title.</span></span> <span data-ttu-id="b8afb-246">Noch über die beiden unterschiedlichen Inhalt in ihrer übergeordneten Masterseiten - definiert den Text "Hello, aus SimpleNested!"</span><span class="sxs-lookup"><span data-stu-id="b8afb-246">Yet both have distinct content defined in their parent master pages - the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="b8afb-247">in Abbildung 6 und "Hello, aus SimpleNestedAlternate!"</span><span class="sxs-lookup"><span data-stu-id="b8afb-247">in Figure 6 and "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="b8afb-248">Abbildung 7.</span><span class="sxs-lookup"><span data-stu-id="b8afb-248">in Figure 7.</span></span> <span data-ttu-id="b8afb-249">Gewährt, diese Unterschiede sind einfach, jedoch könnten Sie in diesem Beispiel um aussagekräftigere unterschieden gehören erweitern.</span><span class="sxs-lookup"><span data-stu-id="b8afb-249">Granted, these differences here are trivial, but you could extend this example to include more meaningful differences.</span></span> <span data-ttu-id="b8afb-250">Für die Instanz, die `SimpleNested.master` Seite möglicherweise ein Menü mit den Optionen für die Inhaltsseiten enthalten, während `SimpleNestedAlternate.master` möglicherweise Informationen zu den Inhaltsseiten, die keine Bindung herstellen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-250">For instance, the `SimpleNested.master` page might include a menu with options specific to its content pages, whereas `SimpleNestedAlternate.master` might have information pertinent to the content pages that bind to it.</span></span>

<span data-ttu-id="b8afb-251">Angenommen Sie, dass es erforderlich, um das Layout der übergeordnete Standort eine Änderung vorzunehmen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-251">Now, imagine that we needed to make a change to the overarching site layout.</span></span> <span data-ttu-id="b8afb-252">Angenommen Sie, dass alle Inhaltsseiten eine Liste mit allgemeinen Links hinzugefügt werden sollten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-252">For example, imagine that we wanted to add a list of common links to all content pages.</span></span> <span data-ttu-id="b8afb-253">Um wir die Gestaltungsvorlage der obersten Ebene ist, aktualisieren Sie dazu `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-253">To accomplish this we update the top-level master page, `Simple.master`.</span></span> <span data-ttu-id="b8afb-254">Gibt es keine Änderungen werden sofort in die verschachtelten Gestaltungsvorlagen und durch Erweiterung auch ihre Inhaltsseiten dargestellt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-254">Any changes there are immediately reflected in its nested master pages and, by extension, their content pages.</span></span>

<span data-ttu-id="b8afb-255">Um die Einfachheit demonstrieren, mit denen wir das Layout der übergeordnete Standort ändern können, öffnen Sie die `Simple.master` Masterseite und fügen Sie das folgende Markup zwischen den `topContent` und `mainContent` `<div>` Elemente:</span><span class="sxs-lookup"><span data-stu-id="b8afb-255">To demonstrate the ease with which we can change the overarching site layout, open the `Simple.master` master page and add the following markup between the `topContent` and `mainContent` `<div>` elements:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample7.aspx)]

<span data-ttu-id="b8afb-256">Dies fügt zwei Links am oberen Rand jeder Seite, die an bindet `Simple.master`, `SimpleNested.master`, oder `SimpleNestedAlternate.master`; diese Änderungen gelten für alle verschachtelte Gestaltungsvorlagen und deren Inhaltsseiten sofort.</span><span class="sxs-lookup"><span data-stu-id="b8afb-256">This adds two links to the top of every page that binds to `Simple.master`, `SimpleNested.master`, or `SimpleNestedAlternate.master`; these changes apply to all nested master pages and their content pages immediately.</span></span> <span data-ttu-id="b8afb-257">Abbildung 8 zeigt `Alternate.aspx` über einen Browser angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-257">Figure 8 shows `Alternate.aspx` when viewed through a browser.</span></span> <span data-ttu-id="b8afb-258">Beachten Sie die Verknüpfungen am oberen Rand der Seite "(verglichen mit Abbildung 7).</span><span class="sxs-lookup"><span data-stu-id="b8afb-258">Note the addition of the links at the top of the page (compared to Figure 7).</span></span>


<span data-ttu-id="b8afb-259">[![In der Master-Seite auf oberster Ebene geändert werden sofort in seinen Masterseiten geschachtelt und deren Inhaltsseiten dargestellt](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="b8afb-259">[![Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span></span>

<span data-ttu-id="b8afb-260">**Abbildung 08**: in der Master-Seite auf oberster Ebene geändert werden sofort in seinen Masterseiten geschachtelt und deren Inhaltsseiten dargestellt ([klicken Sie hier, um das Bild in voller Größe angezeigt](nested-master-pages-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="b8afb-260">**Figure 08**: Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages ([Click to view full-size image](nested-master-pages-cs/_static/image24.png))</span></span>


## <a name="using-a-nested-master-page-for-the-administration-section"></a><span data-ttu-id="b8afb-261">Verwenden einer geschachtelten Masterseite für den Bereich "Verwaltung"</span><span class="sxs-lookup"><span data-stu-id="b8afb-261">Using a Nested Master Page for the Administration Section</span></span>

<span data-ttu-id="b8afb-262">An diesem Punkt haben erläutert, die Vorteile der geschachtelten Master Seiten und gezeigt, wie das Erstellen und in einer ASP.NET-Anwendung zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="b8afb-262">At this point we have looked at the advantages of nested master pages and have seen how to create and use them in an ASP.NET application.</span></span> <span data-ttu-id="b8afb-263">In den Beispielen in den Schritten 1, 2 und 3, beteiligt jedoch das Erstellen einer neuen Masterseite der obersten Ebene, neue verschachtelte Gestaltungsvorlagen und neue Inhaltsseiten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-263">The examples in Steps 1, 2, and 3, however, involved creating a new top-level master page, new nested master pages, and new content pages.</span></span> <span data-ttu-id="b8afb-264">Was Hinzufügen einer neuen geschachtelten Masterseite an eine Website mit einer vorhandenen Masterseite der obersten Ebene und Inhaltsseiten?</span><span class="sxs-lookup"><span data-stu-id="b8afb-264">What about adding a new nested master page to a website with an existing top-level master page and content pages?</span></span>

<span data-ttu-id="b8afb-265">Integrieren von einer geschachtelten Masterseite in einer vorhandenen Website und Zuordnen zu vorhandenen Inhaltsseiten erfordert etwas mehr Aufwand als von Grund auf neu starten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-265">Integrating a nested master page into an existing website and associating it with existing content pages requires a bit more effort than starting from scratch.</span></span> <span data-ttu-id="b8afb-266">Die Schritte 4, 5, 6 und 7 dieser Herausforderung untersuchen, wie wir unsere demoanwendung einschließen eine neue geschachtelten Masterseite mit dem Namen ergänzen `AdminNested.master` , wird von der ASP.NET-Seiten verwendet und enthält Anweisungen für den Administrator der `~/Admin` Ordner.</span><span class="sxs-lookup"><span data-stu-id="b8afb-266">Steps 4, 5, 6, and 7 explore these challenges as we augment our demo application to include a new nested master page named `AdminNested.master` that contains instructions for the administrator and is used by the ASP.NET pages in the `~/Admin` folder.</span></span>

<span data-ttu-id="b8afb-267">Integrieren von einer geschachtelten Masterseite in unserer demoanwendung führt folgende Nachteile:</span><span class="sxs-lookup"><span data-stu-id="b8afb-267">Integrating a nested master page into our demo application introduces the following hurdles:</span></span>

- <span data-ttu-id="b8afb-268">Der vorhandene Inhalt Seiten der `~/Admin` Ordner vorhanden sein, bestimmte Erwartungen aus ihren Masterseite.</span><span class="sxs-lookup"><span data-stu-id="b8afb-268">The existing content pages in the `~/Admin` folder have certain expectations from their master page.</span></span> <span data-ttu-id="b8afb-269">Zunächst einmal, erwarten sie bestimmte Steuerelemente ContentPlaceHolder vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="b8afb-269">For starters, they expect certain ContentPlaceHolder controls to be present.</span></span> <span data-ttu-id="b8afb-270">Darüber hinaus die `~/Admin/AddProduct.aspx` und `~/Admin/Products.aspx` Seiten rufen die Gestaltungsvorlage öffentlichen `RefreshRecentProductsGrid` festgelegt ist, dessen `GridMessageText` -Eigenschaft, oder haben Sie einen Ereignishandler für seine `PricesDoubled` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="b8afb-270">Furthermore, the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages call the master page's public `RefreshRecentProductsGrid` method, set its `GridMessageText` property, or have an event handler for its `PricesDoubled` event.</span></span> <span data-ttu-id="b8afb-271">Unsere geschachtelte Masterseite muss daher den gleichen ContentPlaceHolders und die öffentlichen Member bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-271">Consequently, our nested master page must provide the same ContentPlaceHolders and public members.</span></span>
- <span data-ttu-id="b8afb-272">In dem vorherigen Lernprogramm wir verbessert die `BasePage` Klasse dynamisch Festlegen der `Page` des Objekts `MasterPageFile` -Eigenschaft basierend auf einer Sitzungsvariablen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-272">In the preceding tutorial we enhanced the `BasePage` class to dynamically set the `Page` object's `MasterPageFile` property based on a Session variable.</span></span> <span data-ttu-id="b8afb-273">Wie auf wir dynamische Masterseiten unterstützen, wenn verschachtelte Gestaltungsvorlagen?</span><span class="sxs-lookup"><span data-stu-id="b8afb-273">How to we support dynamic master pages when using nested master pages?</span></span>

<span data-ttu-id="b8afb-274">Diese beiden Probleme werden Oberfläche, wie wir die geschachtelte Gestaltungsvorlage erstellen und sie unsere vorhandenen Inhaltsseiten verwenden.</span><span class="sxs-lookup"><span data-stu-id="b8afb-274">These two challenges will surface as we build the nested master page and use it from our existing content pages.</span></span> <span data-ttu-id="b8afb-275">Wir untersuchen und Leistungsbremsen diese Probleme, sobald sie auftreten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-275">We'll investigate and surmount these issues as they arise.</span></span>

## <a name="step-4-creating-the-nested-master-page"></a><span data-ttu-id="b8afb-276">Schritt 4: Erstellen der geschachtelten Masterseite</span><span class="sxs-lookup"><span data-stu-id="b8afb-276">Step 4: Creating the Nested Master Page</span></span>

<span data-ttu-id="b8afb-277">Unsere erste Aufgabe besteht darin verschachtelte Masterseite von Seiten in den Bereich "Verwaltung" verwendet werden zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-277">Our first task is to create the nested master page to be used by the pages in the Administration section.</span></span> <span data-ttu-id="b8afb-278">Wie in Schritt2 veranschaulichte Filtermenü beim Hinzufügen eines neuen Masterseite geschachtelt müssen wir die geschachtelte Gestaltungsvorlage übergeordneten Masterseite angeben.</span><span class="sxs-lookup"><span data-stu-id="b8afb-278">As we saw in Step 2, when adding a new nested master page we need to specify the nested master page's parent master page.</span></span> <span data-ttu-id="b8afb-279">Jedoch können wir zwei der obersten Ebene Masterseiten: `Site.master` und `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-279">But we have two top-level master pages: `Site.master` and `Alternate.master`.</span></span> <span data-ttu-id="b8afb-280">Wie bereits erwähnt, die es erstellt `Alternate.master` in dem vorherigen Lernprogramm und schrieb Code in der `BasePage` -Klasse, die die Page-Objekt festgelegt `MasterPageFile` Eigenschaft zur Laufzeit, um entweder `Site.master` oder `Alternate.master` abhängig vom Wert der `MyMasterPage` Sitzungsvariablen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-280">Recall that we created `Alternate.master` in the preceding tutorial and wrote code in the `BasePage` class that set the Page object's `MasterPageFile` property at runtime to either `Site.master` or `Alternate.master` depending on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="b8afb-281">Wie konfiguriere wir unsere geschachtelte Masterseite, sodass die entsprechenden auf oberster Ebene Gestaltungsvorlage verwendet?</span><span class="sxs-lookup"><span data-stu-id="b8afb-281">How do we configure our nested master page so that it uses the appropriate top-level master page?</span></span> <span data-ttu-id="b8afb-282">Wir haben zwei Optionen:</span><span class="sxs-lookup"><span data-stu-id="b8afb-282">We have two options:</span></span>

- <span data-ttu-id="b8afb-283">Erstellen Sie zwei verschachtelte Gestaltungsvorlagen `AdminNestedSite.master` und `AdminNestedAlternate.master`, und binden diese an der obersten Ebene Masterseiten `Site.master` und `Alternate.master`zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="b8afb-283">Create two nested master pages, `AdminNestedSite.master` and `AdminNestedAlternate.master`, and bind them to the top-level master pages `Site.master` and `Alternate.master`, respectively.</span></span> <span data-ttu-id="b8afb-284">In `BasePage`, anschließend legen wir den `Page` des Objekts `MasterPageFile` der entsprechenden geschachtelten Masterseite.</span><span class="sxs-lookup"><span data-stu-id="b8afb-284">In `BasePage`, then, we'd set the `Page` object's `MasterPageFile` to the appropriate nested master page.</span></span>
- <span data-ttu-id="b8afb-285">Erstellen Sie eine einzelne geschachtelte Masterseite und haben Sie die Inhaltsseiten dieser bestimmten Masterseite verwenden.</span><span class="sxs-lookup"><span data-stu-id="b8afb-285">Create a single nested master page and have the content pages use this particular master page.</span></span> <span data-ttu-id="b8afb-286">Klicken Sie dann zur Laufzeit, müssten die geschachtelte Gestaltungsvorlage festgelegt `MasterPageFile` Eigenschaft, um die entsprechenden auf oberster Ebene Gestaltungsvorlage zur Laufzeit.</span><span class="sxs-lookup"><span data-stu-id="b8afb-286">Then, at runtime, we'd need to set the nested master page's `MasterPageFile` property to the appropriate top-level master page at runtime.</span></span> <span data-ttu-id="b8afb-287">(Wie Sie inzwischen herausgefunden haben können, haben Masterseiten auch eine `MasterPageFile` Eigenschaft.)</span><span class="sxs-lookup"><span data-stu-id="b8afb-287">(As you might have figured out by now, master pages also have a `MasterPageFile` property.)</span></span>

<span data-ttu-id="b8afb-288">Die zweite Option ermöglicht die Verwendung.</span><span class="sxs-lookup"><span data-stu-id="b8afb-288">Let's use the second option.</span></span> <span data-ttu-id="b8afb-289">Erstellen Sie eine einzelne geschachtelte Masterseitendatei in der `~/Admin` Ordner mit dem Namen `AdminNested.master`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-289">Create a single nested master page file in the `~/Admin` folder named `AdminNested.master`.</span></span> <span data-ttu-id="b8afb-290">Da beide `Site.master` und `Alternate.master` haben den gleichen Satz von ContentPlaceHolder-Steuerelemente, die es spielt keine Rolle Sie, welche Masterseite binden, obwohl ich Sie gebunden fördern `Site.master` aus Gründen der Konsistenz.</span><span class="sxs-lookup"><span data-stu-id="b8afb-290">Because both `Site.master` and `Alternate.master` have the same set of ContentPlaceHolder controls, it doesn't matter what master page you bind it to, although I encourage you to bind it to `Site.master` for consistency's sake.</span></span>


<span data-ttu-id="b8afb-291">[![Hinzufügen einer geschachtelten Masterseite in den Ordner ~/Admin.](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="b8afb-291">[![Add a Nested Master Page to the ~/Admin Folder.](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span></span>

<span data-ttu-id="b8afb-292">**Abbildung 09**: Hinzufügen einer geschachtelten Masterseite, um die `~/Admin` Ordner.</span><span class="sxs-lookup"><span data-stu-id="b8afb-292">**Figure 09**: Add a Nested Master Page to the `~/Admin` Folder.</span></span> <span data-ttu-id="b8afb-293">([Klicken Sie hier, um das Bild in voller Größe angezeigt](nested-master-pages-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="b8afb-293">([Click to view full-size image](nested-master-pages-cs/_static/image27.png))</span></span>


<span data-ttu-id="b8afb-294">Da die geschachtelte Gestaltungsvorlage auf einer Masterseite mit vier ContentPlaceHolder Steuerelemente gebunden ist, fügt Visual Studio vier Inhaltssteuerelemente zum anfänglichen Markup für die neue geschachtelte Masterseite-Datei.</span><span class="sxs-lookup"><span data-stu-id="b8afb-294">Because the nested master page is bound to a master page with four ContentPlaceHolder controls, Visual Studio adds four Content controls to the new nested master page file's initial markup.</span></span> <span data-ttu-id="b8afb-295">Wie wir in den Schritten 2 und 3 ein ContentPlaceHolder-Steuerelement in jedes Inhaltssteuerelement hinzufügen, und geben sie Ihnen den gleichen Namen wie der obersten Ebene Masterseite ContentPlaceHolder-Steuerelement angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-295">Like we did in Steps 2 and 3, add a ContentPlaceHolder control in each Content control, giving it the same name as the top-level master page's ContentPlaceHolder control.</span></span> <span data-ttu-id="b8afb-296">Fügen Sie das folgende Markup auch an das Inhaltssteuerelement, das entspricht, der `MainContent` ContentPlaceHolder:</span><span class="sxs-lookup"><span data-stu-id="b8afb-296">Also add the following markup to the Content control that corresponds to the `MainContent` ContentPlaceHolder:</span></span>


[!code-html[Main](nested-master-pages-cs/samples/sample8.html)]

<span data-ttu-id="b8afb-297">Als Nächstes definieren Sie die `instructions` CSS-Klasse der `Styles.css` und `AlternateStyles.css` CSS-Dateien.</span><span class="sxs-lookup"><span data-stu-id="b8afb-297">Next, define the `instructions` CSS class in the `Styles.css` and `AlternateStyles.css` CSS files.</span></span> <span data-ttu-id="b8afb-298">Die folgenden CSS-Regeln dazu führen, dass HTML-Elementen erstellt, in denen die `instructions` Klasse mit einer hellen Gelb Hintergrundfarbe und einen schwarzen Rahmen durchgezogene angezeigt werden:</span><span class="sxs-lookup"><span data-stu-id="b8afb-298">The following CSS rules cause HTML elements styled with the `instructions` class to be displayed with a light yellow background color and a black, solid border:</span></span>


[!code-css[Main](nested-master-pages-cs/samples/sample9.css)]

<span data-ttu-id="b8afb-299">Da geschachtelte Masterseite dieses Markup hinzugefügt wurde, wird es nur in Webseitenbesucher angezeigt, die diese geschachtelten Gestaltungsvorlage (d. h., die Seiten in den Bereich "Verwaltung") verwenden.</span><span class="sxs-lookup"><span data-stu-id="b8afb-299">Because this markup has been added to the nested master page, it will only appear in those pages that use this nested master page (namely, the pages in the Administration section).</span></span>

<span data-ttu-id="b8afb-300">Nach dem Herstellen dieser Ergänzungen der geschachtelten Masterseite, sollte ihre deklarative Markup etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="b8afb-300">After making these additions to your nested master page, its declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample10.aspx)]

<span data-ttu-id="b8afb-301">Beachten Sie, dass jedes Inhaltssteuerelement ContentPlaceHolder-Steuerelement und, verfügt die ContentPlaceHolder-Steuerelemente `ID` Eigenschaften werden die gleichen Werte wie die entsprechenden ContentPlaceHolder-Steuerelemente in der master-Seite auf oberster Ebene zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-301">Note that each Content control has a ContentPlaceHolder control and that the ContentPlaceHolder controls' `ID` properties are assigned the same values as the corresponding ContentPlaceHolder controls in the top-level master page.</span></span> <span data-ttu-id="b8afb-302">Darüber hinaus das Verwaltung Abschnitt-spezifische Markup wird angezeigt, der `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b8afb-302">Moreover, the Administration section-specific markup appears in the `MainContent` ContentPlaceHolder.</span></span>

<span data-ttu-id="b8afb-303">Abbildung 10 zeigt die `AdminNested.master` geschachtelte Masterseite, wenn Sie über Visual Studio-Designer angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-303">Figure 10 shows the `AdminNested.master` nested master page when viewed through Visual Studio's Designer.</span></span> <span data-ttu-id="b8afb-304">Sehen Sie die Anweisungen in das gelbe Kästchen am oberen Rand der `MainContent` Inhaltssteuerelement.</span><span class="sxs-lookup"><span data-stu-id="b8afb-304">You can see the instructions in the yellow box at the top of the `MainContent` Content control.</span></span>


<span data-ttu-id="b8afb-305">[![Der geschachtelte Masterseite Erweitert auf oberster Ebene Gestaltungsvorlage Einbeziehung von Anweisungen für den Administrator.](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="b8afb-305">[![The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span></span>

<span data-ttu-id="b8afb-306">**Abbildung 10**: geschachtelte Gestaltungsvorlage Erweitert auf oberster Ebene Gestaltungsvorlage Einbeziehung von Anweisungen für den Administrator.</span><span class="sxs-lookup"><span data-stu-id="b8afb-306">**Figure 10**: The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.</span></span> <span data-ttu-id="b8afb-307">([Klicken Sie hier, um das Bild in voller Größe angezeigt](nested-master-pages-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="b8afb-307">([Click to view full-size image](nested-master-pages-cs/_static/image30.png))</span></span>


## <a name="step-5-updating-the-existing-content-pages-to-use-the-new-nested-master-page"></a><span data-ttu-id="b8afb-308">Schritt 5: Aktualisieren der vorhandenen Inhaltsseiten Verwendung der neuen geschachtelten Masterseite</span><span class="sxs-lookup"><span data-stu-id="b8afb-308">Step 5: Updating the Existing Content Pages to Use the New Nested Master Page</span></span>

<span data-ttu-id="b8afb-309">Jedes Mal, wenn wir den Bereich "Verwaltung" eine neue Seite hinzufügen wir sie zum Binden müssen der `AdminNested.master` Masterseite soeben erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="b8afb-309">Anytime we add a new content page to the Administration section we need to bind it to the `AdminNested.master` master page we just created.</span></span> <span data-ttu-id="b8afb-310">Aber was ist mit den vorhandenen Inhaltsseiten?</span><span class="sxs-lookup"><span data-stu-id="b8afb-310">But what about the existing content pages?</span></span> <span data-ttu-id="b8afb-311">Alle Inhaltsseiten am Standort derzeit abgeleitet werden, aus der `BasePage` -Klasse, die Masterseite der Inhaltsseite programmgesteuert zur Laufzeit festgelegt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-311">Currently, all content pages in the site derive from the `BasePage` class, which programmatically sets the content page's master page at runtime.</span></span> <span data-ttu-id="b8afb-312">Dies ist nicht die für die Content-Seiten in den Bereich "Verwaltung" gewünschte Verhalten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-312">This is not the behavior we want for the content pages in the Administration section.</span></span> <span data-ttu-id="b8afb-313">Stattdessen werden diese Inhaltsseiten immer verwenden soll die `AdminNested.master` Seite.</span><span class="sxs-lookup"><span data-stu-id="b8afb-313">Instead, we want these content pages to always use the `AdminNested.master` page.</span></span> <span data-ttu-id="b8afb-314">Es werden die Verantwortung der geschachtelten Masterseite rechts auf der obersten Ebene Inhaltsseite zur Laufzeit auswählen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-314">It will be the responsibility of the nested master page to choose the right top-level content page at runtime.</span></span>

<span data-ttu-id="b8afb-315">Um die beste Möglichkeit, um zu erreichen dies gewünscht Verhalten ist zum Erstellen einer neuen benutzerdefinierten Basisseite-Klasse, die mit dem Namen `AdminBasePage` , reicht die `BasePage` Klasse.</span><span class="sxs-lookup"><span data-stu-id="b8afb-315">To best way to achieve this desired behavior is to create a new custom base page class named `AdminBasePage` that extends the `BasePage` class.</span></span> <span data-ttu-id="b8afb-316">`AdminBasePage` überschreiben können Sie dann die `SetMasterPageFile` und legen Sie die `Page` des Objekts `MasterPageFile` auf den hartcodierten Wert "~ / Admin/AdminNested.master".</span><span class="sxs-lookup"><span data-stu-id="b8afb-316">`AdminBasePage` can then override the `SetMasterPageFile` and set the `Page` object's `MasterPageFile` to the hard-coded value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="b8afb-317">Auf diese Weise eine andere Seite, die abgeleitet `AdminBasePage` verwenden `AdminNested.master`, während eine andere Seite, die abgeleitet `BasePage` hat seine `MasterPageFile` Eigenschaftensatz dynamisch entweder "~ / Site.master" oder "~ / Alternate.master" basierend auf dem Wert von der `MyMasterPage` Sitzungsvariablen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-317">In this way, any page that derives from `AdminBasePage` will use `AdminNested.master`, whereas any page that derives from `BasePage` will have its `MasterPageFile` property set dynamically to either "~/Site.master" or "~/Alternate.master" based on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="b8afb-318">Starten, indem Sie eine neue Klassendatei zum Hinzufügen der `App_Code` Ordner mit dem Namen `AdminBasePage.cs`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-318">Start by adding a new class file to the `App_Code` folder named `AdminBasePage.cs`.</span></span> <span data-ttu-id="b8afb-319">Haben `AdminBasePage` erweitern `BasePage` und überschreiben Sie dann die `SetMasterPageFile` Methode.</span><span class="sxs-lookup"><span data-stu-id="b8afb-319">Have `AdminBasePage` extend `BasePage` and then override the `SetMasterPageFile` method.</span></span> <span data-ttu-id="b8afb-320">Weisen Sie in dieser Methode die `MasterPageFile` den Wert "~ / Admin/AdminNested.master".</span><span class="sxs-lookup"><span data-stu-id="b8afb-320">In that method assign the `MasterPageFile` the value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="b8afb-321">Nach diesen Änderungen Ihrer Klasse sollte Datei etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="b8afb-321">After making these changes your class file should look similar to the following:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample11.cs)]

<span data-ttu-id="b8afb-322">Jetzt müssen wir den vorhandenen Inhalt Seiten in der Verwaltung Abschnitt abgeleitet `AdminBasePage` anstelle von `BasePage`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-322">We now need to have the existing content pages in the Administration section derive from `AdminBasePage` instead of `BasePage`.</span></span> <span data-ttu-id="b8afb-323">Wechseln Sie in der Code-Behind-Klassendatei für jede Seite Inhalt in die `~/Admin` Ordner und diese Änderung vornehmen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-323">Go to the code-behind class file for each content page in the `~/Admin` folder and make this change.</span></span> <span data-ttu-id="b8afb-324">Beispielsweise ist in `~/Admin/Default.aspx` ändern Sie die Deklaration der Code-Behind-Klasse aus:</span><span class="sxs-lookup"><span data-stu-id="b8afb-324">For example, in `~/Admin/Default.aspx` you'd change the code-behind class declaration from:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample12.cs)]

<span data-ttu-id="b8afb-325">Nach:</span><span class="sxs-lookup"><span data-stu-id="b8afb-325">To:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample13.cs)]

<span data-ttu-id="b8afb-326">Abbildung 11 zeigt wie der obersten Ebene Gestaltungsvorlage (`Site.master` oder `Alternate.master`), die geschachtelte Gestaltungsvorlage (`AdminNested.master`), und die Verwaltung Abschnitt Inhaltsseiten in Beziehung stehen miteinander.</span><span class="sxs-lookup"><span data-stu-id="b8afb-326">Figure 11 depicts how the top-level master page (`Site.master` or `Alternate.master`), the nested master page (`AdminNested.master`), and the Administration section content pages relate to one another.</span></span>


<span data-ttu-id="b8afb-327">[![Der geschachtelte Masterseite definiert spezifische Inhalte zu den Seiten im Bereich "Verwaltung"](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="b8afb-327">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span></span>

<span data-ttu-id="b8afb-328">**Abbildung 11**: die geschachtelte Master Seite definiert Content speziell für die Seiten im Bereich "Verwaltung" ([klicken Sie hier, um das Bild in voller Größe angezeigt](nested-master-pages-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="b8afb-328">**Figure 11**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image33.png))</span></span>


## <a name="step-6-mirroring-the-master-pages-public-methods-and-properties"></a><span data-ttu-id="b8afb-329">Schritt 6: Spiegelung, öffentliche Methoden und Eigenschaften der Gestaltungsvorlage</span><span class="sxs-lookup"><span data-stu-id="b8afb-329">Step 6: Mirroring the Master Page's Public Methods and Properties</span></span>

<span data-ttu-id="b8afb-330">Bedenken Sie, dass die `~/Admin/AddProduct.aspx` und `~/Admin/Products.aspx` Seiten zur programmgesteuerten Interaktion mit der Masterseite: `~/Admin/AddProduct.aspx` Aufrufe die Masterseite der öffentliche `RefreshRecentProductsGrid` -Methode und legt dessen `GridMessageText` Eigenschaft; `~/Admin/Products.aspx` verfügt über einen Ereignishandler für das `PricesDoubled` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="b8afb-330">Recall that the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages interact programmatically with the master page: `~/Admin/AddProduct.aspx` calls the master page's public `RefreshRecentProductsGrid` method and sets its `GridMessageText` property; `~/Admin/Products.aspx` has an event handler for the `PricesDoubled` event.</span></span> <span data-ttu-id="b8afb-331">In dem vorherigen Lernprogramm erstellt es eine abstrakte `BaseMasterPage` Klasse, die diese öffentlichen Member definiert.</span><span class="sxs-lookup"><span data-stu-id="b8afb-331">In the preceding tutorial we created an abstract `BaseMasterPage` class that defined these public members.</span></span>

<span data-ttu-id="b8afb-332">Die `~/Admin/AddProduct.aspx` und `~/Admin/Products.aspx` Seiten wird davon ausgegangen, dass ihre Masterseite abgeleitet der `BaseMasterPage` Klasse.</span><span class="sxs-lookup"><span data-stu-id="b8afb-332">The `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages assume that their master page derives from the `BaseMasterPage` class.</span></span> <span data-ttu-id="b8afb-333">Die `AdminNested.master` Seite jedoch derzeit erweitert die `System.Web.UI.MasterPage` Klasse.</span><span class="sxs-lookup"><span data-stu-id="b8afb-333">The `AdminNested.master` page, however, currently extends the `System.Web.UI.MasterPage` class.</span></span> <span data-ttu-id="b8afb-334">Als Ergebnis wird beim Zugriff auf `~/Admin/Products.aspx` ein `InvalidCastException` wird mit der folgenden Meldung ausgelöst: "Cast-Objekt des Typs kann nicht" ASP.admin\_Adminnested\_master ", geben Sie"BaseMasterPage"."</span><span class="sxs-lookup"><span data-stu-id="b8afb-334">As a result, when visiting `~/Admin/Products.aspx` an `InvalidCastException` is thrown with the message: "Unable to cast object of type 'ASP.admin\_adminnested\_master' to type 'BaseMasterPage'."</span></span>

<span data-ttu-id="b8afb-335">Um dies zu beheben, wir müssen, die `AdminNested.master` Code-Behind-Klasse erweitern `BaseMasterPage`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-335">To fix this we need to have the `AdminNested.master` code-behind class extend `BaseMasterPage`.</span></span> <span data-ttu-id="b8afb-336">Aktualisieren Sie die geschachtelte Gestaltungsvorlage Code-Behind-Klassendeklaration aus:</span><span class="sxs-lookup"><span data-stu-id="b8afb-336">Update the nested master page's code-behind class declaration from:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample14.cs)]

<span data-ttu-id="b8afb-337">Nach:</span><span class="sxs-lookup"><span data-stu-id="b8afb-337">To:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample15.cs)]

<span data-ttu-id="b8afb-338">Wir sind noch nicht erfolgt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-338">We're not done yet.</span></span> <span data-ttu-id="b8afb-339">Da die `BaseMasterPage` Klasse ist abstrakt, müssen wir überschreiben die `abstract` Elemente `RefreshRecentProductsGrid` und `GridMessageText`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-339">Because the `BaseMasterPage` class is abstract, we need to override the `abstract` members, `RefreshRecentProductsGrid` and `GridMessageText`.</span></span> <span data-ttu-id="b8afb-340">Diese Member werden von der obersten Ebene Masterseiten verwendet, um ihren Benutzeroberflächen zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="b8afb-340">These members are used by the top-level master pages to update their user interfaces.</span></span> <span data-ttu-id="b8afb-341">(Tatsächlich nur die `Site.master` Gestaltungsvorlage verwendet diese Methoden aus, obwohl beide auf der obersten Ebene Masterseiten diese Methoden implementieren, da beide erweitern `BaseMasterPage`.)</span><span class="sxs-lookup"><span data-stu-id="b8afb-341">(Actually, only the `Site.master` master page uses these methods, although both top-level master pages implement these methods, since both extend `BaseMasterPage`.)</span></span>

<span data-ttu-id="b8afb-342">Während dieser Elemente implementieren müssen `AdminNested.master`, diese Implementierungen müssen lediglich rufen Sie das gleiche Element einfach in die obersten Ebene Masterseite von geschachtelten Gestaltungsvorlage verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="b8afb-342">While we need to implement these members in `AdminNested.master`, all these implementations need to do is simply call the same member in the top-level master page used by the nested master page.</span></span> <span data-ttu-id="b8afb-343">Für die Instanz, wenn eine Seite im Bereich "Verwaltung" aufruft, der geschachtelte Gestaltungsvorlage `RefreshRecentProductsGrid` -Methode, die geschachtelte Gestaltungsvorlage muss, lediglich, wiederum, rufen Sie `Site.master` oder `Alternate.master`des `RefreshRecentProductsGrid` Methode.</span><span class="sxs-lookup"><span data-stu-id="b8afb-343">For instance, when a content page in the Administration section calls the nested master page's `RefreshRecentProductsGrid` method, all the nested master page needs to do is, in turn, call `Site.master` or `Alternate.master`'s `RefreshRecentProductsGrid` method.</span></span>

<span data-ttu-id="b8afb-344">Um dies zu erreichen, starten, indem Sie den folgenden Code `@MasterType` -Direktive am Anfang `AdminNested.master`:</span><span class="sxs-lookup"><span data-stu-id="b8afb-344">To achieve this, start by adding the following `@MasterType` directive to the top of `AdminNested.master`:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample16.aspx)]

<span data-ttu-id="b8afb-345">Bedenken Sie, dass die `@MasterType` Richtlinie fügt eine stark typisierte Eigenschaft für die Code-Behind-Klasse, die mit dem Namen `Master`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-345">Recall that the `@MasterType` directive adds a strongly-typed property to the code-behind class named `Master`.</span></span> <span data-ttu-id="b8afb-346">Überschreiben Sie dann die `RefreshRecentProductsGrid` und `GridMessageText` Elemente und einfach delegieren den Aufruf der `Master`die entsprechende Methode:</span><span class="sxs-lookup"><span data-stu-id="b8afb-346">Then override the `RefreshRecentProductsGrid` and `GridMessageText` members and simply delegate the call to the `Master`'s corresponding method:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample17.cs)]

<span data-ttu-id="b8afb-347">Mit diesem Code werden werden besuchen, und verwenden die Inhaltsseiten in den Bereich "Verwaltung" angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-347">With this code in place, you should be able to visit and use the content pages in the Administration section.</span></span> <span data-ttu-id="b8afb-348">Abbildung 12 zeigt die `~/Admin/Products.aspx` Seite, wenn Sie über einen Browser angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-348">Figure 12 shows the `~/Admin/Products.aspx` page when viewed through a browser.</span></span> <span data-ttu-id="b8afb-349">Wie Sie sehen können, enthält die Seite das Kontrollkästchen Verwaltung Anweisungen, die in der geschachtelten Masterseite definiert ist.</span><span class="sxs-lookup"><span data-stu-id="b8afb-349">As you can see, the page includes the Administration Instructions box, which is defined in the nested master page.</span></span>


<span data-ttu-id="b8afb-350">[![Inhaltsseiten in den Bereich "Verwaltung" werden die Anweisungen am oberen Rand jeder Seite](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="b8afb-350">[![The Content Pages in the Administration Section Include Instructions at the Top of Each Page](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span></span>

<span data-ttu-id="b8afb-351">**Abbildung 12**: die Inhaltsseiten in den Verwaltung Abschnitt enthalten Anweisungen bei der jede Seitenanfang ([klicken Sie hier, um das Bild in voller Größe angezeigt](nested-master-pages-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="b8afb-351">**Figure 12**: The Content Pages in the Administration Section Include Instructions at the Top of Each Page ([Click to view full-size image](nested-master-pages-cs/_static/image36.png))</span></span>


## <a name="step-7-using-the-appropriate-top-level-master-page-at-runtime"></a><span data-ttu-id="b8afb-352">Schritt 7: Von der entsprechenden auf oberster Ebene Masterseite zur Laufzeit</span><span class="sxs-lookup"><span data-stu-id="b8afb-352">Step 7: Using the Appropriate Top-Level Master Page at Runtime</span></span>

<span data-ttu-id="b8afb-353">Während alle Inhaltsseiten in den Bereich "Verwaltung" voll funktionsfähig sind, alle verwenden die gleiche auf oberster Ebene Gestaltungsvorlage und ignorieren die vom Benutzer am ausgewählten Masterseite `ChooseMasterPage.aspx`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-353">While all the content pages in the Administration section are fully functional, they all use the same top-level master page and ignore the master page selected by the user at `ChooseMasterPage.aspx`.</span></span> <span data-ttu-id="b8afb-354">Dieses Verhalten ist darauf zurückzuführen, dass die geschachtelte Masterseite hat seine `MasterPageFile` Eigenschaft statisch festgelegt werden, um `Site.master` in seiner `<%@ Master %>` Richtlinie.</span><span class="sxs-lookup"><span data-stu-id="b8afb-354">This behavior is due to the fact that the nested master page has its `MasterPageFile` property statically set to `Site.master` in its `<%@ Master %>` directive.</span></span>

<span data-ttu-id="b8afb-355">Verwenden der obersten Ebene ausgewählte, durch den Endbenutzer wir festlegen müssen Masterseite der `AdminNested.master`des `MasterPageFile` Eigenschaft auf den Wert in der `MyMasterPage` Sitzungsvariablen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-355">To use the top-level master page selected by the end user we need to set the `AdminNested.master`'s `MasterPageFile` property to the value in the `MyMasterPage` Session variable.</span></span> <span data-ttu-id="b8afb-356">Da wir die Inhaltsseiten festgelegt `MasterPageFile` Eigenschaften im `BasePage`, Sie eventuell der Meinung, dass wir der geschachtelte Gestaltungsvorlage festgelegt würden `MasterPageFile` Eigenschaft im `BaseMasterPage` oder in der `AdminNested.master`des Code-Behind-Klasse.</span><span class="sxs-lookup"><span data-stu-id="b8afb-356">Because we set the content pages' `MasterPageFile` properties in `BasePage`, you may think that we would set the nested master page's `MasterPageFile` property in `BaseMasterPage` or in the `AdminNested.master`'s code-behind class.</span></span> <span data-ttu-id="b8afb-357">Dies funktioniert nicht, aber da müssen wir festgelegt haben die `MasterPageFile` Eigenschaft am Ende der PreInit-Phase.</span><span class="sxs-lookup"><span data-stu-id="b8afb-357">This won't work, however, because we need to have set the `MasterPageFile` property by the end of the PreInit stage.</span></span> <span data-ttu-id="b8afb-358">Die früheste Uhrzeit, die wir programmgesteuert, in den Lebenszyklus der Seite aus einer Masterseite nutzen können ist die Init-Phase (die nach der PreInit-Phase tritt auf).</span><span class="sxs-lookup"><span data-stu-id="b8afb-358">The earliest time that we can programmatically tap into the page lifecycle from a master page is the Init stage (which occurs after the PreInit stage).</span></span>

<span data-ttu-id="b8afb-359">Aus diesem Grund müssen die geschachtelte Gestaltungsvorlage festgelegt `MasterPageFile` Eigenschaft aus der Inhaltsseiten.</span><span class="sxs-lookup"><span data-stu-id="b8afb-359">Therefore, we need to set the nested master page's `MasterPageFile` property from the content pages.</span></span> <span data-ttu-id="b8afb-360">Nur Seiten, die die `AdminNested.master` Masterseite abgeleitet `AdminBasePage`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-360">The only content pages that use the `AdminNested.master` master page derive from `AdminBasePage`.</span></span> <span data-ttu-id="b8afb-361">Daher können wir diese Logik dort abgelegt.</span><span class="sxs-lookup"><span data-stu-id="b8afb-361">Therefore, we can put this logic there.</span></span> <span data-ttu-id="b8afb-362">In Schritt 5 wir überschrieben hat die `SetMasterPageFile` -Methode, Festlegen der `Page` des Objekts `MasterPageFile` -Eigenschaft auf "~ / Admin/AdminNested.master".</span><span class="sxs-lookup"><span data-stu-id="b8afb-362">In Step 5 we overrode the `SetMasterPageFile` method, setting the `Page` object's `MasterPageFile` property to "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="b8afb-363">Update `SetMasterPageFile` auch der Gestaltungsvorlage festgelegt `MasterPageFile` Eigenschaft, um das Ergebnis in der Sitzung gespeichert:</span><span class="sxs-lookup"><span data-stu-id="b8afb-363">Update `SetMasterPageFile` to also set the master page's `MasterPageFile` property to the result stored in Session:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample18.cs)]

<span data-ttu-id="b8afb-364">Die `GetMasterPageFileFromSession` -Methode, die wir hinzugefügt, die `BasePage` Klasse in der vorherigen Lernprogramm gibt den Pfad der entsprechenden Masterseite auf der Sitzung Variablenwert Grundlage.</span><span class="sxs-lookup"><span data-stu-id="b8afb-364">The `GetMasterPageFileFromSession` method, which we added to the `BasePage` class in the preceding tutorial, returns the appropriate master page file path based on the Session variable value.</span></span>

<span data-ttu-id="b8afb-365">Führt durch diese Änderung vorhanden die Auswahl des Benutzers Masterseite über auf den Bereich "Verwaltung".</span><span class="sxs-lookup"><span data-stu-id="b8afb-365">With this change in place, the user's master page selection carries over to the Administration section.</span></span> <span data-ttu-id="b8afb-366">Abbildung 13 zeigt dieselbe Seite als Abbildung 12, aber nachdem der Benutzer geändert wurde, ihre Auswahl Masterseite `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="b8afb-366">Figure 13 shows the same page as Figure 12, but after the user has changed their master page selection to `Alternate.master`.</span></span>


<span data-ttu-id="b8afb-367">[![Die geschachtelte Verwaltungsseite verwendet die vom Benutzer ausgewählten Master-Seite auf oberster Ebene](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="b8afb-367">[![The Nested Administration Page Uses the Top-Level Master Page Selected by the User](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span></span>

<span data-ttu-id="b8afb-368">**Abbildung 13**: die Nested-Verwaltungsseite verwendet, die obersten Ebene Master Seite vom Benutzer ausgewählten ([klicken Sie hier, um das Bild in voller Größe angezeigt](nested-master-pages-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="b8afb-368">**Figure 13**: The Nested Administration Page Uses the Top-Level Master Page Selected by the User ([Click to view full-size image](nested-master-pages-cs/_static/image39.png))</span></span>


## <a name="summary"></a><span data-ttu-id="b8afb-369">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="b8afb-369">Summary</span></span>

<span data-ttu-id="b8afb-370">Viele like wie Inhaltsseiten an einer Masterseite binden können, ist es möglich, erstellen Sie geschachtelte Masterseiten durch die Verwendung einer Masterseite untergeordneten zu einer übergeordneten Masterseite binden.</span><span class="sxs-lookup"><span data-stu-id="b8afb-370">Much like how content pages can bind to a master page, it is possible to create nested master pages by having a child master page bind to a parent master page.</span></span> <span data-ttu-id="b8afb-371">Die untergeordnete Masterseite möglicherweise Inhaltssteuerelemente aller übergeordneten ContentPlaceHolders definieren; Sie können eigene ContentPlaceHolder-Steuerelemente (ebenso wie andere Markup) klicken Sie dann diese Inhaltssteuerelemente hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="b8afb-371">The child master page may define Content controls for each of its parent's ContentPlaceHolders; it can then add its own ContentPlaceHolder controls (as well as other markup) to these Content controls.</span></span> <span data-ttu-id="b8afb-372">Verschachtelte Gestaltungsvorlagen sind sehr nützlich in großen Webanwendungen, in dem alle Seiten gemeinsam eine übergreifende Aussehen und Verhalten noch bestimmte Abschnitte des Standorts müssen eindeutige angepasst.</span><span class="sxs-lookup"><span data-stu-id="b8afb-372">Nested master pages are quite useful in large web applications where all pages share an overarching look and feel, yet certain sections of the site require unique customizations.</span></span>

<span data-ttu-id="b8afb-373">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="b8afb-373">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="b8afb-374">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="b8afb-374">Further Reading</span></span>

<span data-ttu-id="b8afb-375">Weitere Informationen zu den Themen in diesem Lernprogramm erläutert finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="b8afb-375">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="b8afb-376">Geschachtelte ASP.NET Masterseiten</span><span class="sxs-lookup"><span data-stu-id="b8afb-376">Nested ASP.NET Master Pages</span></span>](https://msdn.microsoft.com/library/x2b3ktt7.aspx)
- [<span data-ttu-id="b8afb-377">Tipps für verschachtelte Gestaltungsvorlagen und zur Entwurfszeit für Visual Studio 2005</span><span class="sxs-lookup"><span data-stu-id="b8afb-377">Tips for Nested Master Pages and VS 2005 Design-Time</span></span>](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx)
- [<span data-ttu-id="b8afb-378">Visual Studio 2008 geschachtelt Master Unterstützung von Codepages</span><span class="sxs-lookup"><span data-stu-id="b8afb-378">VS 2008 Nested Master Page Support</span></span>](https://weblogs.asp.net/scottgu/archive/2007/07/09/vs-2008-nested-master-page-support.aspx)

### <a name="about-the-author"></a><span data-ttu-id="b8afb-379">Informationen zum Autor</span><span class="sxs-lookup"><span data-stu-id="b8afb-379">About the Author</span></span>

<span data-ttu-id="b8afb-380">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor mehrerer ASP/ASP.NET-Büchern und Gründer von 4GuysFromRolla.com arbeitet mit Microsoft-Web-Technologien seit 1998.</span><span class="sxs-lookup"><span data-stu-id="b8afb-380">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="b8afb-381">Scott fungiert als ein unabhängiger Berater, Trainer und Writer.</span><span class="sxs-lookup"><span data-stu-id="b8afb-381">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="b8afb-382">Sein neueste Buch wird [ *Sams Schulen selbst ASP.NET 3.5 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="b8afb-382">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="b8afb-383">Scott erreicht werden kann, zur [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com) oder über seinen Blog unter [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="b8afb-383">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="b8afb-384">Besonderen Dank an</span><span class="sxs-lookup"><span data-stu-id="b8afb-384">Special Thanks To</span></span>

<span data-ttu-id="b8afb-385">Diese Reihe von Lernprogrammen wurde durch viele nützliche Bearbeiter überprüft.</span><span class="sxs-lookup"><span data-stu-id="b8afb-385">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="b8afb-386">Meine bevorstehende MSDN-Artikel Überprüfen von Interesse?</span><span class="sxs-lookup"><span data-stu-id="b8afb-386">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="b8afb-387">Wenn dies der Fall ist, löschen Sie mich zeilenweise [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="b8afb-387">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b8afb-388">[Zurück](specifying-the-master-page-programmatically-cs.md)
> [Weiter](creating-a-site-wide-layout-using-master-pages-vb.md)</span><span class="sxs-lookup"><span data-stu-id="b8afb-388">[Previous](specifying-the-master-page-programmatically-cs.md)
[Next](creating-a-site-wide-layout-using-master-pages-vb.md)</span></span>
