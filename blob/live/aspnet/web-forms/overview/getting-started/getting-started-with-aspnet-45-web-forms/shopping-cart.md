---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
title: Einkaufswagen | Microsoft Docs
author: Erikre
description: "Diese Reihe von Lernprogrammen erfahren Sie die Grundlagen der Erstellung einer ASP.NET Web Forms-Anwendung mithilfe von ASP.NET 4.5 und Microsoft Visual Studio Express 2013 für wir..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/08/2014
ms.topic: article
ms.assetid: 6898c601-6c31-432f-8388-e6843f8a17cb
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
msc.type: authoredcontent
ms.openlocfilehash: 5c0e16df7d60b944c96f8d5510225fff321124d1
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/10/2017
---
<a name="shopping-cart"></a><span data-ttu-id="8bd69-103">Einkaufswagen</span><span class="sxs-lookup"><span data-stu-id="8bd69-103">Shopping Cart</span></span>
====================
<span data-ttu-id="8bd69-104">Durch [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="8bd69-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="8bd69-105">[Herunterladen des Wingtip Toys-Beispielprojekt (c#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) oder [(PDF) E-Book herunterladen](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="8bd69-105">[Download Wingtip Toys Sample Project (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="8bd69-106">Diese Reihe von Lernprogrammen erfahren Sie die Grundlagen der Erstellung einer ASP.NET Web Forms-Anwendung mithilfe von ASP.NET 4.5 und Microsoft Visual Studio Express 2013 für Web.</span><span class="sxs-lookup"><span data-stu-id="8bd69-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="8bd69-107">Eine Visual Studio 2013 [-Projekts mit C#-Quellcode](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) ist verfügbar, die diese Reihe von Lernprogrammen begleitet.</span><span class="sxs-lookup"><span data-stu-id="8bd69-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>


<span data-ttu-id="8bd69-108">In diesem Lernprogramm wird beschrieben, die Geschäftslogik erforderlich, um den Einkaufswagen legen die Wingtip Toys Beispiel ASP.NET Web Forms-Anwendung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-108">This tutorial describes the business logic required to add a shopping cart to the Wingtip Toys sample ASP.NET Web Forms application.</span></span> <span data-ttu-id="8bd69-109">Dieses Lernprogramm baut auf dem vorherigen Lernprogramm "Anzeige Daten Elemente und Details" und ist Teil der Wingtip Toys Store Reihe von Lernprogrammen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-109">This tutorial builds on the previous tutorial "Display Data Items and Details" and is part of the Wingtip Toy Store tutorial series.</span></span> <span data-ttu-id="8bd69-110">Wenn Sie dieses Lernprogramm abgeschlossen haben, werden die Benutzern der Beispiel-app werden hinzufügen, entfernen und ändern die Produkte im Einkaufswagen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-110">When you've completed this tutorial, the users of your sample app will be able to add, remove, and modify the products in their shopping cart.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="8bd69-111">Lernen Sie:</span><span class="sxs-lookup"><span data-stu-id="8bd69-111">What you'll learn:</span></span>

1. <span data-ttu-id="8bd69-112">Vorgehensweise: Erstellen von einem Einkaufswagen für die Webanwendung.</span><span class="sxs-lookup"><span data-stu-id="8bd69-112">How to create a shopping cart for the web application.</span></span>
2. <span data-ttu-id="8bd69-113">Zum Aktivieren der Benutzer, dem Warenkorb Elemente hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="8bd69-113">How to enable users to add items to the shopping cart.</span></span>
3. <span data-ttu-id="8bd69-114">Gewusst wie: Hinzufügen einer [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) -Steuerelement zum Anzeigen von shopping Cart-Details.</span><span class="sxs-lookup"><span data-stu-id="8bd69-114">How to add a [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) control to display shopping cart details.</span></span>
4. <span data-ttu-id="8bd69-115">Informationen zum Berechnen und die Gesamtsumme der Bestellungen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-115">How to calculate and display the order total.</span></span>
5. <span data-ttu-id="8bd69-116">Vorgehensweise beim Entfernen und Aktualisieren von Elementen in den Einkaufswagen Sinn macht.</span><span class="sxs-lookup"><span data-stu-id="8bd69-116">How to remove and update items in the shopping cart.</span></span>
6. <span data-ttu-id="8bd69-117">Wie einen shopping Cart Leistungsindikator eingeschlossen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-117">How to include a shopping cart counter.</span></span>

## <a name="code-features-in-this-tutorial"></a><span data-ttu-id="8bd69-118">Codefunktionen in diesem Lernprogramm:</span><span class="sxs-lookup"><span data-stu-id="8bd69-118">Code features in this tutorial:</span></span>

1. <span data-ttu-id="8bd69-119">Entity Framework Code First</span><span class="sxs-lookup"><span data-stu-id="8bd69-119">Entity Framework Code First</span></span>
2. <span data-ttu-id="8bd69-120">Datenanmerkungen</span><span class="sxs-lookup"><span data-stu-id="8bd69-120">Data Annotations</span></span>
3. <span data-ttu-id="8bd69-121">Stark typisierte Datensteuerelemente</span><span class="sxs-lookup"><span data-stu-id="8bd69-121">Strongly typed data controls</span></span>
4. <span data-ttu-id="8bd69-122">Wurden die modellbindung</span><span class="sxs-lookup"><span data-stu-id="8bd69-122">Model binding</span></span>

## <a name="creating-a-shopping-cart"></a><span data-ttu-id="8bd69-123">Erstellen den Einkaufswagen legen</span><span class="sxs-lookup"><span data-stu-id="8bd69-123">Creating a Shopping Cart</span></span>

<span data-ttu-id="8bd69-124">Weiter oben in dieser Reihe von Lernprogrammen haben Sie Seiten und Code zum Anzeigen von Produktdaten aus einer Datenbank hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-124">Earlier in this tutorial series, you added pages and code to view product data from a database.</span></span> <span data-ttu-id="8bd69-125">In diesem Lernprogramm erstellen Sie einen Einkaufswagen, um die Produkte zu verwalten, dass Benutzer kaufen interessiert sind.</span><span class="sxs-lookup"><span data-stu-id="8bd69-125">In this tutorial, you'll create a shopping cart to manage the products that users are interested in buying.</span></span> <span data-ttu-id="8bd69-126">Benutzer werden in der Lage zu durchsuchen und dem Warenkorb Elemente hinzufügen, selbst wenn sie nicht registriert oder angemeldet sind.</span><span class="sxs-lookup"><span data-stu-id="8bd69-126">Users will be able to browse and add items to the shopping cart even if they are not registered or logged in.</span></span> <span data-ttu-id="8bd69-127">Um shopping Cart-Zugriff zu verwalten, weisen Sie Benutzern eine eindeutige `ID` zum ersten Mal Einkaufswagen einen global eindeutigen Bezeichner (GUID) verwenden, wenn der Benutzer den Warenkorb zugreift.</span><span class="sxs-lookup"><span data-stu-id="8bd69-127">To manage shopping cart access, you will assign users a unique `ID` using a globally unique identifier (GUID) when the user accesses the shopping cart for the first time.</span></span> <span data-ttu-id="8bd69-128">Sie müssen dies speichern `ID` mithilfe des ASP.NET Sitzungsstatus.</span><span class="sxs-lookup"><span data-stu-id="8bd69-128">You'll store this `ID` using the ASP.NET Session state.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="8bd69-129">Der Sitzungsstatus für ASP.NET ist eine bequeme Möglichkeit, Sie benutzerspezifische Informationen speichern, die ablaufen soll, nachdem der Benutzer die Website verlassen hat.</span><span class="sxs-lookup"><span data-stu-id="8bd69-129">The ASP.NET Session state is a convenient place to store user-specific information which will expire after the user leaves the site.</span></span> <span data-ttu-id="8bd69-130">Missbrauch des Sitzungsstatus Leistungseinbußen an größeren Standorten kann zwar aufweisen, light-Sitzung Zustand funktioniert ebenso gut für Demonstrationszwecke verwenden.</span><span class="sxs-lookup"><span data-stu-id="8bd69-130">While misuse of session state can have performance implications on larger sites, light use of session state works well for demonstration purposes.</span></span> <span data-ttu-id="8bd69-131">Das Beispielprojekt des Wingtip Toys zeigt, wie Sitzungszustand ohne einen externen Anbieter verwenden, in dem Status der Sitzung gespeicherten in-Process auf dem Webserver, der die Standortdatenbank gehostet wird.</span><span class="sxs-lookup"><span data-stu-id="8bd69-131">The Wingtip Toys sample project shows how to use session state without an external provider, where session state is stored in-process on the web server hosting the site.</span></span> <span data-ttu-id="8bd69-132">Bei größeren Sites, die mehrere Instanzen einer Anwendung bereitstellen oder für Standorte, die mehrere Instanzen einer Anwendung auf verschiedenen Servern ausführen, sollten Sie **Windows Azure Cache Service**.</span><span class="sxs-lookup"><span data-stu-id="8bd69-132">For larger sites that provide multiple instances of an application or for sites that run multiple instances of an application on different servers, consider using **Windows Azure Cache Service**.</span></span> <span data-ttu-id="8bd69-133">Dieser Cache-Dienst bietet einen verteilten Cachedienst, der außerhalb der Website, und löst das Problem der Verwendung von in-Process-Sitzungszustand.</span><span class="sxs-lookup"><span data-stu-id="8bd69-133">This Cache Service provides a distributed caching service that is external to the web site and solves the problem of using in-process session state.</span></span> <span data-ttu-id="8bd69-134">Weitere Informationen finden Sie unter [wie ASP.NET-Sitzungsstatus mit Windows Azure-Websites verwenden](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span><span class="sxs-lookup"><span data-stu-id="8bd69-134">For more information see, [How to Use ASP.NET Session State with Windows Azure Web Sites](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span></span>


### <a name="add-cartitem-as-a-model-class"></a><span data-ttu-id="8bd69-135">Fügen Sie CartItem als eine Modellklasse hinzu.</span><span class="sxs-lookup"><span data-stu-id="8bd69-135">Add CartItem as a Model Class</span></span>

<span data-ttu-id="8bd69-136">Weiter oben in diesem Lernprogramm Reihe Sie das Schema für die Kategorie- und Daten definiert, durch das Erstellen der `Category` und `Product` Klassen in der *Modelle* Ordner.</span><span class="sxs-lookup"><span data-stu-id="8bd69-136">Earlier in this tutorial series, you defined the schema for the category and product data by creating the `Category` and `Product` classes in the *Models* folder.</span></span> <span data-ttu-id="8bd69-137">Nun fügen Sie eine neue Klasse zum Definieren des Schemas für den Einkaufswagen Sinn macht.</span><span class="sxs-lookup"><span data-stu-id="8bd69-137">Now, add a new class to define the schema for the shopping cart.</span></span> <span data-ttu-id="8bd69-138">Weiter unten in diesem Lernprogramm fügen Sie eine Klasse, um den Datenzugriff auf behandeln die `CartItem` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="8bd69-138">Later in this tutorial, you will add a class to handle data access to the `CartItem` table.</span></span> <span data-ttu-id="8bd69-139">Diese Klasse bietet die Geschäftslogik zum Hinzufügen, entfernen und Aktualisieren von Elementen in den Einkaufswagen Sinn macht.</span><span class="sxs-lookup"><span data-stu-id="8bd69-139">This class will provide the business logic to add, remove, and update items in the shopping cart.</span></span>

1. <span data-ttu-id="8bd69-140">Mit der rechten Maustaste die *Modelle* Ordner, und wählen **hinzufügen**  - &gt; **neues Element**.</span><span class="sxs-lookup"><span data-stu-id="8bd69-140">Right-click the *Models* folder and select **Add** -&gt; **New Item**.</span></span> 

    ![Warenkorb - neues Element](shopping-cart/_static/image1.png)
2. <span data-ttu-id="8bd69-142">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-142">The **Add New Item** dialog box is displayed.</span></span> <span data-ttu-id="8bd69-143">Wählen Sie **Code**, und wählen Sie dann **Klasse**.</span><span class="sxs-lookup"><span data-stu-id="8bd69-143">Select **Code**, and then select **Class**.</span></span> 

    ![Warenkorb - Dialogfeld "Neues Element" hinzufügen](shopping-cart/_static/image2.png)
3. <span data-ttu-id="8bd69-145">Nennen Sie diese neue Klasse *CartItem.cs*.</span><span class="sxs-lookup"><span data-stu-id="8bd69-145">Name this new class *CartItem.cs*.</span></span>
4. <span data-ttu-id="8bd69-146">Klicken Sie auf **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="8bd69-146">Click **Add**.</span></span>  
 <span data-ttu-id="8bd69-147">Die neue Klassendatei wird im Editor angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-147">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="8bd69-148">Ersetzen Sie den Standardcode durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="8bd69-148">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample1.cs)]

<span data-ttu-id="8bd69-149">Die `CartItem` Klasse enthält das Schema, die ein Benutzer dem Einkaufswagen fügt jedes Produkt definieren.</span><span class="sxs-lookup"><span data-stu-id="8bd69-149">The `CartItem` class contains the schema that will define each product a user adds to the shopping cart.</span></span> <span data-ttu-id="8bd69-150">Diese Klasse ähnelt der anderen Schemaklassen, die Sie weiter oben in diesem Lernprogramm erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="8bd69-150">This class is similar to the other schema classes you created earlier in this tutorial series.</span></span> <span data-ttu-id="8bd69-151">Gemäß der Konvention Entity Framework Code First erwartet, dass der Primärschlüssel für die `CartItem` Tabelle ist, entweder `CartItemId` oder `ID`.</span><span class="sxs-lookup"><span data-stu-id="8bd69-151">By convention, Entity Framework Code First expects that the primary key for the `CartItem` table will be either `CartItemId` or `ID`.</span></span> <span data-ttu-id="8bd69-152">Jedoch der Code überschreibt das Standardverhalten mithilfe der-Anmerkung Daten `[Key]` Attribut.</span><span class="sxs-lookup"><span data-stu-id="8bd69-152">However, the code overrides the default behavior by using the data annotation `[Key]` attribute.</span></span> <span data-ttu-id="8bd69-153">Die `Key` Attribut der Element-ID-Eigenschaft gibt an, dass die `ItemID` Eigenschaft ist der Primärschlüssel.</span><span class="sxs-lookup"><span data-stu-id="8bd69-153">The `Key` attribute of the ItemId property specifies that the `ItemID` property is the primary key.</span></span>

<span data-ttu-id="8bd69-154">Die `CartId` Eigenschaft gibt an, die `ID` des Benutzers, der das Element, das erwerben zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="8bd69-154">The `CartId` property specifies the `ID` of the user that is associated with the item to purchase.</span></span> <span data-ttu-id="8bd69-155">Fügen Sie Code zum Erstellen dieses Benutzers `ID` Wenn der Benutzer den Einkaufswagen zugreift.</span><span class="sxs-lookup"><span data-stu-id="8bd69-155">You'll add code to create this user `ID` when the user accesses the shopping cart.</span></span> <span data-ttu-id="8bd69-156">Dies `ID` wird auch als eine ASP.NET-Sitzung-Variable gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="8bd69-156">This `ID` will also be stored as an ASP.NET Session variable.</span></span>

### <a name="update-the-product-context"></a><span data-ttu-id="8bd69-157">Aktualisieren Sie die Produktkontext</span><span class="sxs-lookup"><span data-stu-id="8bd69-157">Update the Product Context</span></span>

<span data-ttu-id="8bd69-158">Zusätzlich zum Hinzufügen von der `CartItem` -Klasse, Sie müssen zum Aktualisieren der Datenbank Context-Klasse, die die Entitätsklassen verwaltet und den Datenzugriff auf die Datenbank bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-158">In addition to adding the `CartItem` class, you will need to update the database context class that manages the entity classes and that provides data access to the database.</span></span> <span data-ttu-id="8bd69-159">Zu diesem Zweck fügen Sie das neu erstellte `CartItem` model-Klasse, um die `ProductContext` Klasse.</span><span class="sxs-lookup"><span data-stu-id="8bd69-159">To do this, you will add the newly created `CartItem` model class to the `ProductContext` class.</span></span>

1. <span data-ttu-id="8bd69-160">In **Projektmappen-Explorer**, suchen und öffnen Sie die *ProductContext.cs* in der Datei die *Modelle* Ordner.</span><span class="sxs-lookup"><span data-stu-id="8bd69-160">In **Solution Explorer**, find and open the *ProductContext.cs* file in the *Models* folder.</span></span>
2. <span data-ttu-id="8bd69-161">Den hervorgehobenen Code zum Hinzufügen der *ProductContext.cs* Datei wie folgt:</span><span class="sxs-lookup"><span data-stu-id="8bd69-161">Add the highlighted code to the *ProductContext.cs* file as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample2.cs?highlight=14)]

<span data-ttu-id="8bd69-162">Wie bereits erwähnt in diesem Lernprogramm Reihe, die den Code in der *ProductContext.cs* Datei fügt die `System.Data.Entity` Namespace, damit Sie Zugriff auf die Kernfunktionen von Entity Framework haben.</span><span class="sxs-lookup"><span data-stu-id="8bd69-162">As mentioned previously in this tutorial series, the code in the *ProductContext.cs* file adds the `System.Data.Entity` namespace so that you have access to all the core functionality of the Entity Framework.</span></span> <span data-ttu-id="8bd69-163">Diese Funktionalität umfasst die Möglichkeit, Abfragen, einfügen, aktualisieren und Löschen von Daten mit stark typisierten Objekten arbeiten.</span><span class="sxs-lookup"><span data-stu-id="8bd69-163">This functionality includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span> <span data-ttu-id="8bd69-164">Die `ProductContext` Klasse fügt den Zugriff auf das neu hinzugefügte `CartItem` modellschemas.</span><span class="sxs-lookup"><span data-stu-id="8bd69-164">The `ProductContext` class adds access to the newly added `CartItem` model class.</span></span>

### <a name="managing-the-shopping-cart-business-logic"></a><span data-ttu-id="8bd69-165">Verwalten von Shopping Cart Geschäftslogik</span><span class="sxs-lookup"><span data-stu-id="8bd69-165">Managing the Shopping Cart Business Logic</span></span>

<span data-ttu-id="8bd69-166">Als Nächstes erstellen Sie die `ShoppingCart` Klasse in einer neuen *Logik* Ordner.</span><span class="sxs-lookup"><span data-stu-id="8bd69-166">Next, you'll create the `ShoppingCart` class in a new *Logic* folder.</span></span> <span data-ttu-id="8bd69-167">Die `ShoppingCart` Klasse behandelt den Datenzugriff auf die `CartItem` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="8bd69-167">The `ShoppingCart` class handles data access to the `CartItem` table.</span></span> <span data-ttu-id="8bd69-168">Die Klasse gehören auch die Geschäftslogik zum Hinzufügen, entfernen und Aktualisieren von Elementen in den Einkaufswagen Sinn macht.</span><span class="sxs-lookup"><span data-stu-id="8bd69-168">The class will also include the business logic to add, remove, and update items in the shopping cart.</span></span>

<span data-ttu-id="8bd69-169">Die shopping Cart-Logik, die Sie hinzufügen, enthält Funktionen zum Verwalten der folgenden Aktionen:</span><span class="sxs-lookup"><span data-stu-id="8bd69-169">The shopping cart logic that you will add will contain the functionality to manage the following actions:</span></span>

1. <span data-ttu-id="8bd69-170">Hinzufügen von Elementen in den Einkaufswagen legen</span><span class="sxs-lookup"><span data-stu-id="8bd69-170">Adding items to the shopping cart</span></span>
2. <span data-ttu-id="8bd69-171">Entfernen von Elementen aus dem Warenkorb</span><span class="sxs-lookup"><span data-stu-id="8bd69-171">Removing items from the shopping cart</span></span>
3. <span data-ttu-id="8bd69-172">Die Warenkorb-ID abrufen</span><span class="sxs-lookup"><span data-stu-id="8bd69-172">Getting the shopping cart ID</span></span>
4. <span data-ttu-id="8bd69-173">Abrufen von Elementen aus dem Warenkorb</span><span class="sxs-lookup"><span data-stu-id="8bd69-173">Retrieving items from the shopping cart</span></span>
5. <span data-ttu-id="8bd69-174">Die Menge aller shopping Cart Elemente insgesamt</span><span class="sxs-lookup"><span data-stu-id="8bd69-174">Totaling the amount of all the shopping cart items</span></span>
6. <span data-ttu-id="8bd69-175">Aktualisieren die Einkaufswagendaten</span><span class="sxs-lookup"><span data-stu-id="8bd69-175">Updating the shopping cart data</span></span>

<span data-ttu-id="8bd69-176">Eine Warenkorb-Seite (*ShoppingCart.aspx*) und die einkaufswagenklasse werden zusammen verwendet werden, auf Einkaufswagendaten zugreifen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-176">A shopping cart page (*ShoppingCart.aspx*) and the shopping cart class will be used together to access shopping cart data.</span></span> <span data-ttu-id="8bd69-177">Die Warenkorb-Seite zeigt alle Elemente, die der Benutzer dem Einkaufswagen waren hinzufügt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-177">The shopping cart page will display all the items the user adds to the shopping cart.</span></span> <span data-ttu-id="8bd69-178">Neben dem Warenkorb Seiten- und Klasse, erstellen Sie eine Seite (*AddToCart.aspx*), um den Einkaufswagen Produkte hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-178">Besides the shopping cart page and class, you'll create a page (*AddToCart.aspx*) to add products to the shopping cart.</span></span> <span data-ttu-id="8bd69-179">Außerdem fügen Sie Code der *"ProductList.aspx"* Seite und die *ProductDetails.aspx* Seite, die einen Link zum Bereitstellen der *AddToCart.aspx* Seite, sodass der Benutzer hinzufügen kann Produkte in den Einkaufswagen legen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-179">You will also add code to the *ProductList.aspx* page and the *ProductDetails.aspx* page that will provide a link to the *AddToCart.aspx* page, so that the user can add products to the shopping cart.</span></span>

<span data-ttu-id="8bd69-180">Das folgende Diagramm zeigt den grundlegenden Vorgang, der tritt auf, wenn der Benutzer ein Produkt der Einkaufswagen waren hinzufügt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-180">The following diagram shows the basic process that occurs when the user adds a product to the shopping cart.</span></span>

![Warenkorb - zum Einkaufswagen hinzufügen](shopping-cart/_static/image3.png)

<span data-ttu-id="8bd69-182">Klickt der Benutzer die **Add To Cart** Link auf die *"ProductList.aspx"* Seite oder den *ProductDetails.aspx* Seite, die Anwendung, wechseln Sie automatisch auf die *AddToCart.aspx* Seite und dann automatisch in die *ShoppingCart.aspx* Seite.</span><span class="sxs-lookup"><span data-stu-id="8bd69-182">When the user clicks the **Add To Cart** link on either the *ProductList.aspx* page or the *ProductDetails.aspx* page, the application will navigate to the *AddToCart.aspx* page and then automatically to the *ShoppingCart.aspx* page.</span></span> <span data-ttu-id="8bd69-183">Die *AddToCart.aspx* Seite wird select Produkts zum Einkaufswagen hinzufügen, durch Aufrufen einer Methode in die ShoppingCart-Klasse.</span><span class="sxs-lookup"><span data-stu-id="8bd69-183">The *AddToCart.aspx* page will add the select product to the shopping cart by calling a method in the ShoppingCart class.</span></span> <span data-ttu-id="8bd69-184">Die *ShoppingCart.aspx* Seite zeigt die Produkte, die dem Warenkorb hinzugefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="8bd69-184">The *ShoppingCart.aspx* page will display the products that have been added to the shopping cart.</span></span>

#### <a name="creating-the-shopping-cart-class"></a><span data-ttu-id="8bd69-185">Erstellen die Einkaufswagenklasse</span><span class="sxs-lookup"><span data-stu-id="8bd69-185">Creating the Shopping Cart Class</span></span>

<span data-ttu-id="8bd69-186">Die `ShoppingCart` Klasse wird in einen separaten Ordner in der Anwendung hinzugefügt werden, sodass eine klare Unterscheidung zwischen Modell (Ordner Models), die Seiten (Stammordner) und die Logik (Logik Ordner) werden.</span><span class="sxs-lookup"><span data-stu-id="8bd69-186">The `ShoppingCart` class will be added to a separate folder in the application so that there will be a clear distinction between the model (Models folder), the pages (root folder) and the logic (Logic folder).</span></span>

1. <span data-ttu-id="8bd69-187">In **Projektmappen-Explorer**, mit der rechten Maustaste die **WingtipToys**Projekt, und wählen Sie **hinzufügen**-&gt;**neuer Ordner**.</span><span class="sxs-lookup"><span data-stu-id="8bd69-187">In **Solution Explorer**, right-click the **WingtipToys**project and select **Add**-&gt;**New Folder**.</span></span> <span data-ttu-id="8bd69-188">Nennen Sie diesen Ordner *Logik*.</span><span class="sxs-lookup"><span data-stu-id="8bd69-188">Name the new folder *Logic*.</span></span>
2. <span data-ttu-id="8bd69-189">Mit der rechten Maustaste die *Logik* Ordner, und wählen Sie dann **hinzufügen**  - &gt; **neues Element**.</span><span class="sxs-lookup"><span data-stu-id="8bd69-189">Right-click the *Logic* folder and then select **Add** -&gt; **New Item**.</span></span>
3. <span data-ttu-id="8bd69-190">Fügen Sie eine neue Klassendatei mit dem Namen *ShoppingCartActions.cs*.</span><span class="sxs-lookup"><span data-stu-id="8bd69-190">Add a new class file named *ShoppingCartActions.cs*.</span></span>
4. <span data-ttu-id="8bd69-191">Ersetzen Sie den Standardcode durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="8bd69-191">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample3.cs)]

<span data-ttu-id="8bd69-192">Die `AddToCart` Methode ermöglicht die einzelnen Produkte in den Einkaufswagen Sinn macht, die basierend auf das Produkt aufgenommen werden `ID`.</span><span class="sxs-lookup"><span data-stu-id="8bd69-192">The `AddToCart` method enables individual products to be included in the shopping cart based on the product `ID`.</span></span> <span data-ttu-id="8bd69-193">Das Produkt der Einkaufswagen hinzugefügt wurde, oder die Menge wird erhöht, wenn der Warenkorb bereits ein Element für dieses Produkt enthält.</span><span class="sxs-lookup"><span data-stu-id="8bd69-193">The product is added to the cart, or if the cart already contains an item for that product, the quantity is incremented.</span></span>

<span data-ttu-id="8bd69-194">Die `GetCartId` Methodenrückgabe dem Einkaufswagen `ID` für den Benutzer.</span><span class="sxs-lookup"><span data-stu-id="8bd69-194">The `GetCartId` method returns the cart `ID` for the user.</span></span> <span data-ttu-id="8bd69-195">Der Einkaufswagen `ID` wird verwendet, um die Elemente zu verfolgen, die ein Benutzer im Einkaufswagen verfügt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-195">The cart `ID` is used to track the items that a user has in their shopping cart.</span></span> <span data-ttu-id="8bd69-196">Wenn der Benutzer keiner vorhandenen Einkaufswagen `ID`, eine neue Einkaufswagen `ID` wird für sie erstellt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-196">If the user does not have an existing cart `ID`, a new cart `ID` is created for them.</span></span> <span data-ttu-id="8bd69-197">Wenn der Benutzer als ein registrierter Benutzer, dem Einkaufswagen angemeldet ist `ID` auf Eingabe des Benutzernamens festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="8bd69-197">If the user is signed in as a registered user, the cart `ID` is set to their user name.</span></span> <span data-ttu-id="8bd69-198">Jedoch, wenn der Benutzer nicht, in dem Einkaufswagen angemeldet ist `ID` in einen eindeutigen Wert (eine GUID) festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="8bd69-198">However, if the user is not signed in, the cart `ID` is set to a unique value (a GUID).</span></span> <span data-ttu-id="8bd69-199">Eine GUID wird sichergestellt, dass diese nur einen Warenkorb für jeden Benutzer, basierend auf der Sitzung erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="8bd69-199">A GUID ensures that only one cart is created for each user, based on session.</span></span>

<span data-ttu-id="8bd69-200">Die `GetCartItems` Methode gibt eine Liste der Artikel im Warenkorb für den Benutzer zurück.</span><span class="sxs-lookup"><span data-stu-id="8bd69-200">The `GetCartItems` method returns a list of shopping cart items for the user.</span></span> <span data-ttu-id="8bd69-201">Weiter unten in diesem Lernprogramm sehen Sie, dass wurden die modellbindung, zum Anzeigen der Warenkorb-Elemente verwendet wird in der shopping Cart mithilfe der `GetCartItems` Methode.</span><span class="sxs-lookup"><span data-stu-id="8bd69-201">Later in this tutorial, you will see that model binding is used to display the cart items in the shopping cart using the `GetCartItems` method.</span></span>

### <a name="creating-the-add-to-cart-functionality"></a><span data-ttu-id="8bd69-202">Erstellen die Add To Cart-Funktionalität</span><span class="sxs-lookup"><span data-stu-id="8bd69-202">Creating the Add-To-Cart Functionality</span></span>

<span data-ttu-id="8bd69-203">Wie bereits erwähnt, erstellen Sie eine Seite "Verarbeitung" mit dem Namen *AddToCart.aspx* , die zur neue Produkten zum Einkaufswagen des Benutzers hinzufügen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="8bd69-203">As mentioned earlier, you will create a processing page named *AddToCart.aspx* that will be used to add new products to the shopping cart of the user.</span></span> <span data-ttu-id="8bd69-204">Diese Seite aufrufen, wird die `AddToCart` Methode in der `ShoppingCart` -Klasse, die Sie gerade erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="8bd69-204">This page will call the `AddToCart` method in the `ShoppingCart` class that you just created.</span></span> <span data-ttu-id="8bd69-205">Die *AddToCart.aspx* Seite wird erwarten, dass ein Produkt `ID` übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="8bd69-205">The *AddToCart.aspx* page will expect that a product `ID` is passed to it.</span></span> <span data-ttu-id="8bd69-206">Dieses Produkt `ID` verwendet, wenn der Aufruf der `AddToCart` Methode in der `ShoppingCart` Klasse.</span><span class="sxs-lookup"><span data-stu-id="8bd69-206">This product `ID` will be used when calling the `AddToCart` method in the `ShoppingCart` class.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="8bd69-207">Ändern Sie den Code-Behind (*AddToCart.aspx.cs*) für diese Seite, nicht die Seite UI (*AddToCart.aspx*).</span><span class="sxs-lookup"><span data-stu-id="8bd69-207">You will be modifying the code-behind (*AddToCart.aspx.cs*) for this page, not the page UI (*AddToCart.aspx*).</span></span>


#### <a name="to-create-the-add-to-cart-functionality"></a><span data-ttu-id="8bd69-208">So erstellen die Add To Cart Funktionalität:</span><span class="sxs-lookup"><span data-stu-id="8bd69-208">To create the Add-To-Cart functionality:</span></span>

1. <span data-ttu-id="8bd69-209">In **Projektmappen-Explorer**, mit der rechten Maustaste die **WingtipToys**Projekt, klicken Sie auf **hinzufügen**  - &gt; **neues Element**.</span><span class="sxs-lookup"><span data-stu-id="8bd69-209">In **Solution Explorer**, right-click the **WingtipToys**project, click **Add** -&gt; **New Item**.</span></span>  
 <span data-ttu-id="8bd69-210">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-210">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="8bd69-211">Fügen Sie eine standardmäßige neue Seite (Web Form) an die Anwendung mit dem Namen *AddToCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="8bd69-211">Add a standard new page (Web Form) to the application named *AddToCart.aspx*.</span></span> 

    ![Warenkorb - Webformular hinzufügen](shopping-cart/_static/image4.png)
3. <span data-ttu-id="8bd69-213">In **Projektmappen-Explorer**, mit der rechten Maustaste die *AddToCart.aspx* Seite, und klicken Sie dann auf **Code anzeigen**.</span><span class="sxs-lookup"><span data-stu-id="8bd69-213">In **Solution Explorer**, right-click the *AddToCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="8bd69-214">Die *AddToCart.aspx.cs* Code-Behind-Datei im Editor geöffnet ist.</span><span class="sxs-lookup"><span data-stu-id="8bd69-214">The *AddToCart.aspx.cs* code-behind file is opened in the editor.</span></span>
4. <span data-ttu-id="8bd69-215">Ersetzen Sie den vorhandenen Code in der *AddToCart.aspx.cs* CodeBehind durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="8bd69-215">Replace the existing code in the *AddToCart.aspx.cs* code-behind with the following:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample4.cs)]

<span data-ttu-id="8bd69-216">Wenn die *AddToCart.aspx* Seite geladen ist, wird das Produkt `ID` aus der Abfragezeichenfolge abgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="8bd69-216">When the *AddToCart.aspx* page is loaded, the product `ID` is retrieved from the query string.</span></span> <span data-ttu-id="8bd69-217">Als Nächstes eine Instanz von der einkaufswagenklasse erstellt und zum Aufrufen der `AddToCart` -Methode, die Sie zuvor in diesem Lernprogramm hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-217">Next, an instance of the shopping cart class is created and used to call the `AddToCart` method that you added earlier in this tutorial.</span></span> <span data-ttu-id="8bd69-218">Die `AddToCart` in enthaltenen-Methode der *ShoppingCartActions.cs* Datei, enthält die Logik zum ausgewählten Produkts zum Einkaufswagen hinzufügen, oder erhöhen die Produktmenge des ausgewählten Produkts.</span><span class="sxs-lookup"><span data-stu-id="8bd69-218">The `AddToCart` method, contained in the *ShoppingCartActions.cs* file, includes the logic to add the selected product to the shopping cart or increment the product quantity of the selected product.</span></span> <span data-ttu-id="8bd69-219">Wenn das Produkt nicht dem Warenkorb hinzugefügt wurde, wird das Produkt hinzugefügt der `CartItem` Tabelle der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="8bd69-219">If the product hasn't been added to the shopping cart, the product is added to the `CartItem` table of the database.</span></span> <span data-ttu-id="8bd69-220">Wenn das Produkt bereits dem Warenkorb hinzugefügt wurde, und der Benutzer ein weiteres Element desselben Produkts fügt, wird der Produktmenge erhöht die `CartItem` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="8bd69-220">If the product has already been added to the shopping cart and the user adds an additional item of the same product, the product quantity is incremented in the `CartItem` table.</span></span> <span data-ttu-id="8bd69-221">Zum Schluss die Seite leitet an die *ShoppingCart.aspx* Seite, die Sie im nächsten Schritt hinzufügen, in denen der Benutzer eine aktualisierte Liste der Elemente im Warenkorb sieht.</span><span class="sxs-lookup"><span data-stu-id="8bd69-221">Finally, the page redirects back to the *ShoppingCart.aspx* page that you'll add in the next step, where the user sees an updated list of items in the cart.</span></span>

<span data-ttu-id="8bd69-222">Wie bereits erwähnt, einen Benutzer `ID` wird verwendet, um die Produkte zu identifizieren, die einem bestimmten Benutzer zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="8bd69-222">As previously mentioned, a user `ID` is used to identify the products that are associated with a specific user.</span></span> <span data-ttu-id="8bd69-223">Dies `ID` wird hinzugefügt, um eine Zeile in der `CartItem` Tabelle jedes Mal, die der Benutzer dem Einkaufswagen ein Produkts hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-223">This `ID` is added to a row in the `CartItem` table each time the user adds a product to the shopping cart.</span></span>

### <a name="creating-the-shopping-cart-ui"></a><span data-ttu-id="8bd69-224">Den Einkaufswagen UI erstellen</span><span class="sxs-lookup"><span data-stu-id="8bd69-224">Creating the Shopping Cart UI</span></span>

<span data-ttu-id="8bd69-225">Die *ShoppingCart.aspx* Seite zeigt die Produkte, die der Benutzer seinen Einkaufswagen legen hinzugefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="8bd69-225">The *ShoppingCart.aspx* page will display the products that the user has added to their shopping cart.</span></span> <span data-ttu-id="8bd69-226">Es wird auch ermöglichen das Hinzufügen, entfernen und Aktualisieren von Elementen in den Einkaufswagen Sinn macht.</span><span class="sxs-lookup"><span data-stu-id="8bd69-226">It will also provide the ability to add, remove and update items in the shopping cart.</span></span>

1. <span data-ttu-id="8bd69-227">In **Projektmappen-Explorer**, mit der rechten Maustaste **WingtipToys**, klicken Sie auf **hinzufügen**  - &gt; **neues Element**.</span><span class="sxs-lookup"><span data-stu-id="8bd69-227">In **Solution Explorer**, right-click **WingtipToys**, click **Add** -&gt; **New Item**.</span></span>  
 <span data-ttu-id="8bd69-228">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-228">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="8bd69-229">Fügen Sie eine neue Seite (Web Form), die durch Auswahl eine Masterseite enthält **Webformular mit Gestaltungsvorlage**.</span><span class="sxs-lookup"><span data-stu-id="8bd69-229">Add a new page (Web Form) that includes a master page by selecting **Web Form using Master Page**.</span></span> <span data-ttu-id="8bd69-230">Nennen Sie die neue Seite *ShoppingCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="8bd69-230">Name the new page *ShoppingCart.aspx*.</span></span>
3. <span data-ttu-id="8bd69-231">Wählen Sie **Site.Master** anzufügende Masterseite auf das neu erstellte *aspx* Seite.</span><span class="sxs-lookup"><span data-stu-id="8bd69-231">Select **Site.Master** to attach the master page to the newly created *.aspx* page.</span></span>
4. <span data-ttu-id="8bd69-232">In der *ShoppingCart.aspx* Seite, ersetzen Sie das vorhandene Markup durch Folgendes Markup:</span><span class="sxs-lookup"><span data-stu-id="8bd69-232">In the *ShoppingCart.aspx* page, replace the existing markup with the following markup:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample5.aspx)]

<span data-ttu-id="8bd69-233">Die *ShoppingCart.aspx* Seite enthält eine **GridView** Steuerelement namens `CartList`.</span><span class="sxs-lookup"><span data-stu-id="8bd69-233">The *ShoppingCart.aspx* page includes a **GridView** control named `CartList`.</span></span> <span data-ttu-id="8bd69-234">Dieses Steuerelement verwendet wurden die modellbindung, um die Einkaufswagendaten aus der Datenbank zum Binden der **GridView** Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="8bd69-234">This control uses model binding to bind the shopping cart data from the database to the **GridView** control.</span></span> <span data-ttu-id="8bd69-235">Beim Festlegen der `ItemType` Eigenschaft von der **GridView** zu steuern, die Datenbindungsausdruck `Item` steht in das Markup des Steuerelements und das Steuerelement wird stark typisiert.</span><span class="sxs-lookup"><span data-stu-id="8bd69-235">When you set the `ItemType` property of the **GridView** control, the data-binding expression `Item` is available in the markup of the control and the control becomes strongly typed.</span></span> <span data-ttu-id="8bd69-236">Wie weiter oben in diesem Lernprogramm erwähnt, können Sie auswählen, Details zu den `Item` mithilfe von IntelliSense-Objekt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-236">As mentioned earlier in this tutorial series, you can select details of the `Item` object using IntelliSense.</span></span> <span data-ttu-id="8bd69-237">So konfigurieren ein Steuerelement zum modellbindung verwenden, um Daten auszuwählen, legen Sie die `SelectMethod` Eigenschaft des Steuerelements.</span><span class="sxs-lookup"><span data-stu-id="8bd69-237">To configure a data control to use model binding to select data, you set the `SelectMethod` property of the control.</span></span> <span data-ttu-id="8bd69-238">In der oben genannten Markup, legen Sie die `SelectMethod` GetShoppingCartItems-Methode verwendet wird, die eine Liste von ausgibt `CartItem` Objekte.</span><span class="sxs-lookup"><span data-stu-id="8bd69-238">In the markup above, you set the `SelectMethod` to use the GetShoppingCartItems method which returns a list of `CartItem` objects.</span></span> <span data-ttu-id="8bd69-239">Die **GridView** Datensteuerelement Ruft die Methode zum geeigneten Zeitpunkt im Lebenszyklus Seite und die zurückgegebenen Daten automatisch gebunden.</span><span class="sxs-lookup"><span data-stu-id="8bd69-239">The **GridView** data control calls the method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="8bd69-240">Die `GetShoppingCartItems` Methode muss noch hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="8bd69-240">The `GetShoppingCartItems` method must still be added.</span></span>

#### <a name="retrieving-the-shopping-cart-items"></a><span data-ttu-id="8bd69-241">Abrufen von Shopping Cart-Elemente</span><span class="sxs-lookup"><span data-stu-id="8bd69-241">Retrieving the Shopping Cart Items</span></span>

<span data-ttu-id="8bd69-242">Anschließend fügen Sie Code, um die *ShoppingCart.aspx.cs* CodeBehind zum Abrufen und zum Auffüllen der Shopping Cart-Benutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="8bd69-242">Next, you add code to the *ShoppingCart.aspx.cs* code-behind to retrieve and populate the Shopping Cart UI.</span></span>

1. <span data-ttu-id="8bd69-243">In **Projektmappen-Explorer**, mit der rechten Maustaste die *ShoppingCart.aspx* Seite, und klicken Sie dann auf **Code anzeigen**.</span><span class="sxs-lookup"><span data-stu-id="8bd69-243">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="8bd69-244">Die *ShoppingCart.aspx.cs* Code-Behind-Datei im Editor geöffnet ist.</span><span class="sxs-lookup"><span data-stu-id="8bd69-244">The *ShoppingCart.aspx.cs* code-behind file is opened in the editor.</span></span>
2. <span data-ttu-id="8bd69-245">Ersetzen Sie den vorhandenen Code durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="8bd69-245">Replace the existing code with the following:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample6.cs)]

<span data-ttu-id="8bd69-246">Wie bereits erwähnt, die `GridView` Daten steuern Aufrufe der `GetShoppingCartItems` Methode zum entsprechenden Zeitpunkt während der Lebensdauer der Seite der Reihe nach und die zurückgegebenen Daten automatisch gebunden.</span><span class="sxs-lookup"><span data-stu-id="8bd69-246">As mentioned above, the `GridView` data control calls the `GetShoppingCartItems` method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="8bd69-247">Die `GetShoppingCartItems` Methode erstellt eine Instanz der `ShoppingCartActions` Objekt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-247">The `GetShoppingCartItems` method creates an instance of the `ShoppingCartActions` object.</span></span> <span data-ttu-id="8bd69-248">Der Code verwendet dann diese Instanz zurückzugebenden Elemente im Warenkorb durch Aufrufen der `GetCartItems` Methode.</span><span class="sxs-lookup"><span data-stu-id="8bd69-248">Then, the code uses that instance to return the items in the cart by calling the `GetCartItems` method.</span></span>

### <a name="adding-products-to-the-shopping-cart"></a><span data-ttu-id="8bd69-249">Hinzufügen von Produkten zum Einkaufswagen</span><span class="sxs-lookup"><span data-stu-id="8bd69-249">Adding Products to the Shopping Cart</span></span>

<span data-ttu-id="8bd69-250">Wenn entweder die *"ProductList.aspx"* oder *ProductDetails.aspx* Seite wird angezeigt, die der Benutzer wird in der Lage, das Produkt den Einkaufswagen Sinn macht, die über einen Link hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-250">When either the *ProductList.aspx* or the *ProductDetails.aspx* page is displayed, the user will be able to add the product to the shopping cart using a link.</span></span> <span data-ttu-id="8bd69-251">Wenn sie den Link klicken, wird die Anwendung auf der Seite "Verarbeitung" mit dem Namen navigiert *AddToCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="8bd69-251">When they click the link, the application navigates to the processing page named *AddToCart.aspx*.</span></span> <span data-ttu-id="8bd69-252">Die *AddToCart.aspx* Seite ruft den `AddToCart` Methode in der `ShoppingCart` -Klasse, die Sie zuvor in diesem Lernprogramm hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-252">The *AddToCart.aspx* page will call the `AddToCart` method in the `ShoppingCart` class that you added earlier in this tutorial.</span></span>

<span data-ttu-id="8bd69-253">Fügen Sie nun eine **Add to Cart** Link, um sowohl die *"ProductList.aspx"* Seite und die *ProductDetails.aspx* Seite.</span><span class="sxs-lookup"><span data-stu-id="8bd69-253">Now, you'll add an **Add to Cart** link to both the *ProductList.aspx* page and the *ProductDetails.aspx* page.</span></span> <span data-ttu-id="8bd69-254">Dieser Link wird das Produkt enthalten `ID` , die aus der Datenbank abgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="8bd69-254">This link will include the product `ID` that is retrieved from the database.</span></span>

1. <span data-ttu-id="8bd69-255">In **Projektmappen-Explorer**, suchen und öffnen Sie die Seite mit dem Namen *"ProductList.aspx"*.</span><span class="sxs-lookup"><span data-stu-id="8bd69-255">In **Solution Explorer**, find and open the page named *ProductList.aspx*.</span></span>
2. <span data-ttu-id="8bd69-256">Fügen Sie das Markup in gelb hervorgehoben werden die *"ProductList.aspx"* Seite so, dass die gesamte Seite wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="8bd69-256">Add the markup highlighted in yellow to the *ProductList.aspx* page so that the entire page appears as follows:</span></span>  

    [!code-aspx[Main](shopping-cart/samples/sample7.aspx?highlight=50-54)]

### <a name="testing-the-shopping-cart"></a><span data-ttu-id="8bd69-257">Testen den Einkaufswagen</span><span class="sxs-lookup"><span data-stu-id="8bd69-257">Testing the Shopping Cart</span></span>

<span data-ttu-id="8bd69-258">Führen Sie die Anwendung aus, um festzustellen, wie Sie Produkten zum Einkaufswagen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-258">Run the application to see how you add products to the shopping cart.</span></span>

1. <span data-ttu-id="8bd69-259">Drücken Sie **F5**, um die Anwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-259">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="8bd69-260">Nachdem das Projekt mit die Datenbank neu erstellt, der Browser öffnen und Anzeigen der *"default.aspx"* Seite.</span><span class="sxs-lookup"><span data-stu-id="8bd69-260">After the project recreates the database, the browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="8bd69-261">Wählen Sie **Autos** aus dem Navigationsmenü Kategorie.</span><span class="sxs-lookup"><span data-stu-id="8bd69-261">Select **Cars** from the category navigation menu.</span></span>  
 <span data-ttu-id="8bd69-262">Die *"ProductList.aspx"* Seite wird angezeigt, der nur die Produkte, die in der Kategorie "Cars" enthalten.</span><span class="sxs-lookup"><span data-stu-id="8bd69-262">The *ProductList.aspx* page is displayed showing only products included in the "Cars" category.</span></span> 

    ![Warenkorb - Autos](shopping-cart/_static/image5.png)
3. <span data-ttu-id="8bd69-264">Klicken Sie auf die **Add to Cart** neben dem ersten Produkt aufgeführt (Car konvertiert werden kann).</span><span class="sxs-lookup"><span data-stu-id="8bd69-264">Click the **Add to Cart** link next to the first product listed (the convertible car).</span></span>   
 <span data-ttu-id="8bd69-265">Die *ShoppingCart.aspx* wird mit der Auswahl im Einkaufskorb Seite angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-265">The *ShoppingCart.aspx* page is displayed, showing the selection in your shopping cart.</span></span> 

    ![Warenkorb - Warenkorb](shopping-cart/_static/image6.png)
4. <span data-ttu-id="8bd69-267">Weitere Produkte anzeigen, indem er **Ebenen** aus dem Navigationsmenü Kategorie.</span><span class="sxs-lookup"><span data-stu-id="8bd69-267">View additional products by selecting **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="8bd69-268">Klicken Sie auf die **Add to Cart** neben dem ersten Produkt aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-268">Click the **Add to Cart** link next to the first product listed.</span></span>  
 <span data-ttu-id="8bd69-269">Die *ShoppingCart.aspx* Seite wird angezeigt, mit dem zusätzliche Element.</span><span class="sxs-lookup"><span data-stu-id="8bd69-269">The *ShoppingCart.aspx* page is displayed with the additional item.</span></span>
6. <span data-ttu-id="8bd69-270">Schließen Sie den Browser.</span><span class="sxs-lookup"><span data-stu-id="8bd69-270">Close the browser.</span></span>

### <a name="calculating-and-displaying-the-order-total"></a><span data-ttu-id="8bd69-271">Berechnen und die Gesamtsumme der Bestellungen anzeigen</span><span class="sxs-lookup"><span data-stu-id="8bd69-271">Calculating and Displaying the Order Total</span></span>

<span data-ttu-id="8bd69-272">Zusätzlich zum Hinzufügen von Produkten zum Einkaufswagen, fügen Sie eine `GetTotal` Methode, um die `ShoppingCart` -Klasse und der gesamte Bestellwert in die Warenkorb-Seite angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-272">In addition to adding products to the shopping cart, you will add a `GetTotal` method to the `ShoppingCart` class and display the total order amount in the shopping cart page.</span></span>

1. <span data-ttu-id="8bd69-273">In **Projektmappen-Explorer**öffnen die *ShoppingCartActions.cs* in der Datei die *Logik* Ordner.</span><span class="sxs-lookup"><span data-stu-id="8bd69-273">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="8bd69-274">Fügen Sie die folgenden `GetTotal` Methode in gelb hervorgehoben werden die `ShoppingCart` Klasse, sodass die Klasse wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="8bd69-274">Add the following `GetTotal` method highlighted in yellow to the `ShoppingCart` class, so that the class appears as follows:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample8.cs?highlight=85-97)]

<span data-ttu-id="8bd69-275">Zunächst wird die `GetTotal` Methode ruft die ID des Warenkorbs für den Benutzer.</span><span class="sxs-lookup"><span data-stu-id="8bd69-275">First, the `GetTotal` method gets the ID of the shopping cart for the user.</span></span> <span data-ttu-id="8bd69-276">Dann Ruft die Methode ab dem Einkaufswagen insgesamt durch Multiplizieren des Produktpreis durch die Produktmenge für jedes Produkt in den Einkaufswagen aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-276">Then the method gets the cart total by multiplying the product price by the product quantity for each product listed in the cart.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="8bd69-277">Der obige Code verwendet die nullable-Typ "`int?`".</span><span class="sxs-lookup"><span data-stu-id="8bd69-277">The above code uses the nullable type "`int?`".</span></span> <span data-ttu-id="8bd69-278">Auf NULL festlegbare Typen können die Werte eines zugrunde liegenden Typs und auch als null-Wert darstellen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-278">Nullable types can represent all the values of an underlying type, and also as a null value.</span></span> <span data-ttu-id="8bd69-279">Weitere Informationen finden Sie unter [mithilfe von auf NULL festlegbaren Typen](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="8bd69-279">For more information see, [Using Nullable Types](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span></span>


### <a name="modify-the-shopping-cart-display"></a><span data-ttu-id="8bd69-280">Ändern Sie die Shopping Cart-Anzeige</span><span class="sxs-lookup"><span data-stu-id="8bd69-280">Modify the Shopping Cart Display</span></span>

<span data-ttu-id="8bd69-281">Als Nächstes ändern Sie den Code für die *ShoppingCart.aspx* Seite Aufrufen der `GetTotal` -Methode und der Anzeige, die auf die Gesamtanzahl der *ShoppingCart.aspx* Seite beim Laden der Seite.</span><span class="sxs-lookup"><span data-stu-id="8bd69-281">Next you'll modify the code for the *ShoppingCart.aspx* page to call the `GetTotal` method and display that total on the *ShoppingCart.aspx* page when the page loads.</span></span>

1. <span data-ttu-id="8bd69-282">In **Projektmappen-Explorer**, mit der rechten Maustaste die *ShoppingCart.aspx* Seite und wählen Sie **Code anzeigen**.</span><span class="sxs-lookup"><span data-stu-id="8bd69-282">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and select **View Code**.</span></span>
2. <span data-ttu-id="8bd69-283">In der *ShoppingCart.aspx.cs* Datei, aktualisieren Sie die `Page_Load` Handler durch Hinzufügen des folgenden Codes in gelb hervorgehoben:</span><span class="sxs-lookup"><span data-stu-id="8bd69-283">In the *ShoppingCart.aspx.cs* file, update the `Page_Load` handler by adding the following code highlighted in yellow:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample9.cs?highlight=16-31)]

<span data-ttu-id="8bd69-284">Wenn die *ShoppingCart.aspx* geladen wurde, lädt das shopping Cart-Objekt ist, und ruft dann die shopping Cart insgesamt ab, durch Aufrufen der `GetTotal` Methode der `ShoppingCart` Klasse.</span><span class="sxs-lookup"><span data-stu-id="8bd69-284">When the *ShoppingCart.aspx* page loads, it loads the shopping cart object and then retrieves the shopping cart total by calling the `GetTotal` method of the `ShoppingCart` class.</span></span> <span data-ttu-id="8bd69-285">Wenn der Warenkorb leer ist, wird dazu eine Meldung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-285">If the shopping cart is empty, a message to that effect is displayed.</span></span>

### <a name="testing-the-shopping-cart-total"></a><span data-ttu-id="8bd69-286">Testen der Shopping Cart gesamt</span><span class="sxs-lookup"><span data-stu-id="8bd69-286">Testing the Shopping Cart Total</span></span>

<span data-ttu-id="8bd69-287">Führen Sie die Anwendung jetzt sehen, wie Sie nicht nur ein Produkts zum Einkaufswagen hinzufügen können, aber Sie können die shopping Cart insgesamt finden Sie unter.</span><span class="sxs-lookup"><span data-stu-id="8bd69-287">Run the application now to see how you can not only add a product to the shopping cart, but you can see the shopping cart total.</span></span>

1. <span data-ttu-id="8bd69-288">Drücken Sie **F5**, um die Anwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-288">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="8bd69-289">Der Browser öffnen und Anzeigen der *"default.aspx"* Seite.</span><span class="sxs-lookup"><span data-stu-id="8bd69-289">The browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="8bd69-290">Wählen Sie **Autos** aus dem Navigationsmenü Kategorie.</span><span class="sxs-lookup"><span data-stu-id="8bd69-290">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="8bd69-291">Klicken Sie auf die **Add To Cart** neben dem ersten Produkt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-291">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="8bd69-292">Die *ShoppingCart.aspx* Seite wird angezeigt, mit der Gesamtsumme der Bestellungen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-292">The *ShoppingCart.aspx* page is displayed with the order total.</span></span> 

    ![Warenkorb - Einkaufswagen gesamt](shopping-cart/_static/image7.png)
4. <span data-ttu-id="8bd69-294">Dem Einkaufswagen einige andere Produkte (z. B. eine Ebene) hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-294">Add some other products (for example, a plane) to the cart.</span></span>
5. <span data-ttu-id="8bd69-295">Die *ShoppingCart.aspx* Seite wird angezeigt, mit einer aktualisierten Summe für alle Produkte, die Sie hinzugefügt haben.</span><span class="sxs-lookup"><span data-stu-id="8bd69-295">The *ShoppingCart.aspx* page is displayed with an updated total for all the products you've added.</span></span> 

    ![Warenkorb - mehrere Produkte](shopping-cart/_static/image8.png)
6. <span data-ttu-id="8bd69-297">Beenden Sie die ausgeführte Anwendung, indem Sie das Browserfenster schließen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-297">Stop the running app by closing the browser window.</span></span>

### <a name="adding-update-and-checkout-buttons-to-the-shopping-cart"></a><span data-ttu-id="8bd69-298">Hinzufügen von Schaltflächen Aktualisieren und Auschecken dem Warenkorb</span><span class="sxs-lookup"><span data-stu-id="8bd69-298">Adding Update and Checkout Buttons to the Shopping Cart</span></span>

<span data-ttu-id="8bd69-299">Damit wird der Benutzer den Einkaufswagen zu ändern, fügen Sie ein **Update** Schaltfläche und ein **Auschecken** Schaltfläche, um die Warenkorb-Seite.</span><span class="sxs-lookup"><span data-stu-id="8bd69-299">To allow the users to modify the shopping cart, you'll add an **Update** button and a **Checkout** button to the shopping cart page.</span></span> <span data-ttu-id="8bd69-300">Die **Auschecken** Schaltfläche wird nicht verwendet, bis Sie weiter unten in diesem Lernprogramm Reihe.</span><span class="sxs-lookup"><span data-stu-id="8bd69-300">The **Checkout** button is not used until later in this tutorial series.</span></span>

1. <span data-ttu-id="8bd69-301">In **Projektmappen-Explorer**öffnen die *ShoppingCart.aspx* Seite im Stammverzeichnis des das Webanwendungsprojekt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-301">In **Solution Explorer**, open the *ShoppingCart.aspx* page in the root of the web application project.</span></span>
2. <span data-ttu-id="8bd69-302">Hinzufügen der **Update** Schaltfläche und die **Auschecken** -Schaltfläche, um die *ShoppingCart.aspx* Seite, fügen Sie das Markup, die auf das vorhandene Markup gelb hervorgehoben, entsprechend der folgender Code:</span><span class="sxs-lookup"><span data-stu-id="8bd69-302">To add the **Update** button and the **Checkout** button to the *ShoppingCart.aspx* page, add the markup highlighted in yellow to the existing markup, as shown in the following code:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample10.aspx?highlight=36-45)]

<span data-ttu-id="8bd69-303">Wenn der Benutzer klickt der **Update** Schaltfläche, die `UpdateBtn_Click` -Ereignishandler wird aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-303">When the user clicks the **Update** button, the `UpdateBtn_Click` event handler will be called.</span></span> <span data-ttu-id="8bd69-304">Dieser Ereignishandler wird der Code aufrufen, den Sie im nächsten Schritt hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-304">This event handler will call the code that you'll add in the next step.</span></span>

<span data-ttu-id="8bd69-305">Als Nächstes können Sie den Code in den Aktualisieren der *ShoppingCart.aspx.cs* Datei so durchlaufen Sie den Warenkorb und rufen die `RemoveItem` und `UpdateItem` Methoden.</span><span class="sxs-lookup"><span data-stu-id="8bd69-305">Next, you can update the code contained in the *ShoppingCart.aspx.cs* file to loop through the cart items and call the `RemoveItem` and `UpdateItem` methods.</span></span>

1. <span data-ttu-id="8bd69-306">In **Projektmappen-Explorer**öffnen die *ShoppingCart.aspx.cs* Datei im Stammverzeichnis des das Webanwendungsprojekt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-306">In **Solution Explorer**, open the *ShoppingCart.aspx.cs* file in the root of the web application project.</span></span>
2. <span data-ttu-id="8bd69-307">Fügen Sie die folgenden Codeabschnitte in gelb hervorgehoben werden die *ShoppingCart.aspx.cs* Datei:</span><span class="sxs-lookup"><span data-stu-id="8bd69-307">Add the following code sections highlighted in yellow to the *ShoppingCart.aspx.cs* file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample11.cs?highlight=9-11,33,44-89)]

<span data-ttu-id="8bd69-308">Klickt der Benutzer die **Update** Schaltfläche auf der *ShoppingCart.aspx* Seite, die die UpdateCartItems-Methode aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="8bd69-308">When the user clicks the **Update** button on the *ShoppingCart.aspx* page, the UpdateCartItems method is called.</span></span> <span data-ttu-id="8bd69-309">Die UpdateCartItems-Methode ruft die aktualisierten Werte für jedes Element in den Einkaufswagen Sinn macht.</span><span class="sxs-lookup"><span data-stu-id="8bd69-309">The UpdateCartItems method gets the updated values for each item in the shopping cart.</span></span> <span data-ttu-id="8bd69-310">Klicken Sie dann die UpdateCartItems-Methode ruft die `UpdateShoppingCartDatabase` -Methode (hinzugefügt und im nächsten Schritt beschrieben) entweder hinzufügen oder Entfernen von Elementen aus dem Warenkorb.</span><span class="sxs-lookup"><span data-stu-id="8bd69-310">Then, the UpdateCartItems method calls the `UpdateShoppingCartDatabase` method (added and explained in the next step) to either add or remove items from the shopping cart.</span></span> <span data-ttu-id="8bd69-311">Sobald die Datenbank aktualisiert wurde, entsprechend der Updates auf den Einkaufswagen Sinn macht, die **GridView** Steuerelement wird auf die Warenkorb-Seite aktualisiert, durch Aufrufen der `DataBind` Methode für die **GridView**.</span><span class="sxs-lookup"><span data-stu-id="8bd69-311">Once the database has been updated to reflect the updates to the shopping cart, the **GridView** control is updated on the shopping cart page by calling the `DataBind` method for the **GridView**.</span></span> <span data-ttu-id="8bd69-312">Darüber hinaus wird der gesamte Bestellwert auf die Warenkorb-Seite aktualisiert, um die aktualisierte Liste der Elemente widerzuspiegeln.</span><span class="sxs-lookup"><span data-stu-id="8bd69-312">Also, the total order amount on the shopping cart page is updated to reflect the updated list of items.</span></span>

### <a name="updating-and-removing-shopping-cart-items"></a><span data-ttu-id="8bd69-313">Aktualisieren und Entfernen von Artikel im Warenkorb</span><span class="sxs-lookup"><span data-stu-id="8bd69-313">Updating and Removing Shopping Cart Items</span></span>

<span data-ttu-id="8bd69-314">Auf der *ShoppingCart.aspx* Seite sehen, da Sie Steuerelemente wurden für die Menge eines Elements aktualisieren und löschen ein Element hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-314">On the *ShoppingCart.aspx* page, you can see controls have been added for updating the quantity of an item and removing an item.</span></span> <span data-ttu-id="8bd69-315">Fügen Sie nun den Code, der diese Steuerelemente arbeiten erkennen lässt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-315">Now, add the code that will make these controls work.</span></span>

1. <span data-ttu-id="8bd69-316">In **Projektmappen-Explorer**öffnen die *ShoppingCartActions.cs* in der Datei die *Logik* Ordner.</span><span class="sxs-lookup"><span data-stu-id="8bd69-316">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="8bd69-317">Fügen Sie den folgenden Code in gelb hervorgehoben werden die *ShoppingCartActions.cs* Klassendatei:</span><span class="sxs-lookup"><span data-stu-id="8bd69-317">Add the following code highlighted in yellow to the *ShoppingCartActions.cs* class file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample12.cs?highlight=99-213)]

<span data-ttu-id="8bd69-318">Die `UpdateShoppingCartDatabase` aus aufgerufene Methode der `UpdateCartItems` Methode für die *ShoppingCart.aspx.cs* Seite ist, enthält die Logik zum Aktualisieren oder Entfernen von Elementen aus dem Warenkorb.</span><span class="sxs-lookup"><span data-stu-id="8bd69-318">The `UpdateShoppingCartDatabase` method, called from the `UpdateCartItems` method on the *ShoppingCart.aspx.cs* page, contains the logic to either update or remove items from the shopping cart.</span></span> <span data-ttu-id="8bd69-319">Die `UpdateShoppingCartDatabase` Methode durchläuft alle Zeilen in der shopping Cart-Liste.</span><span class="sxs-lookup"><span data-stu-id="8bd69-319">The `UpdateShoppingCartDatabase` method iterates through all the rows within the shopping cart list.</span></span> <span data-ttu-id="8bd69-320">Wenn eine shopping Cart-Element entfernend gekennzeichnet wurde, oder die Menge kleiner als 1 ist, die `RemoveItem` -Methode aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="8bd69-320">If a shopping cart item has been marked to be removed, or the quantity is less than one, the `RemoveItem` method is called.</span></span> <span data-ttu-id="8bd69-321">Anderenfalls wird das shopping Cart-Element für überprüft aktualisiert, wenn die `UpdateItem` Methode wird aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-321">Otherwise, the shopping cart item is checked for updates when the `UpdateItem` method is called.</span></span> <span data-ttu-id="8bd69-322">Nachdem das shopping Cart-Element aktualisiert oder entfernt wurde, werden Änderungen an der Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="8bd69-322">After the shopping cart item has been removed or updated, the database changes are saved.</span></span>

<span data-ttu-id="8bd69-323">Die `ShoppingCartUpdates` Struktur wird verwendet, um die shopping Cart-Elemente enthalten.</span><span class="sxs-lookup"><span data-stu-id="8bd69-323">The `ShoppingCartUpdates` structure is used to hold all the shopping cart items.</span></span> <span data-ttu-id="8bd69-324">Die `UpdateShoppingCartDatabase` -Methode verwendet die `ShoppingCartUpdates` Struktur zu bestimmen, ob eines der Elemente, die aktualisiert oder entfernt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-324">The `UpdateShoppingCartDatabase` method uses the `ShoppingCartUpdates` structure to determine if any of the items need to be updated or removed.</span></span>

<span data-ttu-id="8bd69-325">In den nächsten Lernprogrammen verwenden Sie die `EmptyCart` Methode zum Deaktivieren der Warenkorb Einkaufswagen nach dem Kauf von Produkten.</span><span class="sxs-lookup"><span data-stu-id="8bd69-325">In the next tutorial, you will use the `EmptyCart` method to clear the shopping cart after purchasing products.</span></span> <span data-ttu-id="8bd69-326">Aber jetzt verwenden Sie die `GetCount` -Methode, die Sie gerade hinzugefügt haben die *ShoppingCartActions.cs* Datei, um zu bestimmen, wie viele Elemente in den Warenkorb enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="8bd69-326">But for now, you will use the `GetCount` method that you just added to the *ShoppingCartActions.cs* file to determine how many items are in the shopping cart.</span></span>

### <a name="adding-a-shopping-cart-counter"></a><span data-ttu-id="8bd69-327">Hinzufügen eines Shopping Cart-Leistungsindikators</span><span class="sxs-lookup"><span data-stu-id="8bd69-327">Adding a Shopping Cart Counter</span></span>

<span data-ttu-id="8bd69-328">Damit wird den Benutzer, die Gesamtanzahl der Elemente in den Warenkorb anzuzeigen, fügen Sie einen Leistungsindikator der *Site.Master* Seite.</span><span class="sxs-lookup"><span data-stu-id="8bd69-328">To allow the user to view the total number of items in the shopping cart, you will add a counter to the *Site.Master* page.</span></span> <span data-ttu-id="8bd69-329">Dieser Leistungsindikator wird auch als einen Link zu dem Einkaufswagen fungieren.</span><span class="sxs-lookup"><span data-stu-id="8bd69-329">This counter will also act as a link to the shopping cart.</span></span>

1. <span data-ttu-id="8bd69-330">In **Projektmappen-Explorer**öffnen die *Site.Master* Seite.</span><span class="sxs-lookup"><span data-stu-id="8bd69-330">In **Solution Explorer**, open the *Site.Master* page.</span></span>
2. <span data-ttu-id="8bd69-331">Ändern Sie das Markup, indem Sie den warenkorblink klicken Indikator hinzufügen, wie in Gelb Abschnitt Navigation dargestellt werden, damit er wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="8bd69-331">Modify the markup by adding the shopping cart counter link as shown in yellow to the navigation section so it appears as follows:</span></span>  

    [!code-html[Main](shopping-cart/samples/sample13.html?highlight=6)]
3. <span data-ttu-id="8bd69-332">Aktualisieren Sie den Code-Behind der als Nächstes die *Site.Master.cs* Datei durch Hinzufügen des Codes in gelb hervorgehoben werden wie folgt:</span><span class="sxs-lookup"><span data-stu-id="8bd69-332">Next, update the code-behind of the *Site.Master.cs* file by adding the code highlighted in yellow as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample14.cs?highlight=11,77-84)]

<span data-ttu-id="8bd69-333">Bevor Sie die Seite als HTML gerendert wird die `Page_PreRender` Ereignis wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="8bd69-333">Before the page is rendered as HTML, the `Page_PreRender` event is raised.</span></span> <span data-ttu-id="8bd69-334">In der `Page_PreRender` Handler, der Gesamtzahl der Einkaufswagen bestimmt, indem die `GetCount` Methode.</span><span class="sxs-lookup"><span data-stu-id="8bd69-334">In the `Page_PreRender` handler, the total count of the shopping cart is determined by calling the `GetCount` method.</span></span> <span data-ttu-id="8bd69-335">Der zurückgegebene Wert wird hinzugefügt, um die `cartCount` Spanne im Markup enthalten die *Site.Master* Seite.</span><span class="sxs-lookup"><span data-stu-id="8bd69-335">The returned value is added to the `cartCount` span included in the markup of the *Site.Master* page.</span></span> <span data-ttu-id="8bd69-336">Die `<span>` Tags ermöglicht die inneren Elemente ordnungsgemäß gerendert werden soll.</span><span class="sxs-lookup"><span data-stu-id="8bd69-336">The `<span>` tags enables the inner elements to be properly rendered.</span></span> <span data-ttu-id="8bd69-337">Wenn einer beliebigen Seite des Standorts angezeigt wird, wird die shopping Cart insgesamt angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-337">When any page of the site is displayed, the shopping cart total will be displayed.</span></span> <span data-ttu-id="8bd69-338">Der Benutzer kann auch die shopping Cart insgesamt zum Anzeigen des Einkaufswagen klicken.</span><span class="sxs-lookup"><span data-stu-id="8bd69-338">The user can also click the shopping cart total to display the shopping cart.</span></span>

## <a name="testing-the-completed-shopping-cart"></a><span data-ttu-id="8bd69-339">Testen den abgeschlossenen Einkaufswagen</span><span class="sxs-lookup"><span data-stu-id="8bd69-339">Testing the Completed Shopping Cart</span></span>

<span data-ttu-id="8bd69-340">Sie können die Anwendung jetzt sehen, wie Sie hinzufügen können, löschen und Aktualisieren von Elementen in den Warenkorb ausführen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-340">You can run the application now to see how you can add, delete, and update items in the shopping cart.</span></span> <span data-ttu-id="8bd69-341">Die shopping Cart insgesamt wider, die Gesamtkosten für alle Elemente in den Einkaufswagen Sinn macht.</span><span class="sxs-lookup"><span data-stu-id="8bd69-341">The shopping cart total will reflect the total cost of all items in the shopping cart.</span></span>

1. <span data-ttu-id="8bd69-342">Drücken Sie **F5**, um die Anwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-342">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="8bd69-343">Der Browser wird geöffnet und zeigt die *"default.aspx"* Seite.</span><span class="sxs-lookup"><span data-stu-id="8bd69-343">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="8bd69-344">Wählen Sie **Autos** aus dem Navigationsmenü Kategorie.</span><span class="sxs-lookup"><span data-stu-id="8bd69-344">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="8bd69-345">Klicken Sie auf die **Add To Cart** neben dem ersten Produkt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-345">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="8bd69-346">Die *ShoppingCart.aspx* Seite wird angezeigt, mit der Gesamtsumme der Bestellungen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-346">The *ShoppingCart.aspx* page is displayed with the order total.</span></span>
4. <span data-ttu-id="8bd69-347">Wählen Sie **Ebenen** aus dem Navigationsmenü Kategorie.</span><span class="sxs-lookup"><span data-stu-id="8bd69-347">Select **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="8bd69-348">Klicken Sie auf die **Add To Cart** neben dem ersten Produkt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-348">Click the **Add To Cart** link next to the first product.</span></span>
6. <span data-ttu-id="8bd69-349">Die Menge des ersten Elements in den Warenkorb auf 3 festlegen, und wählen Sie die **Element entfernen** Sie das Kontrollkästchen für das zweite Element.<a id="a"></a></span><span class="sxs-lookup"><span data-stu-id="8bd69-349">Set the quantity of the first item in the shopping cart to 3 and select the **Remove Item** check box of the second item.<a id="a"></a></span></span>
7. <span data-ttu-id="8bd69-350">Klicken Sie auf die **aktualisieren** Schaltfläche, um die Warenkorb-Seite zu aktualisieren und neue Gesamtsumme der Bestellungen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-350">Click the **Update** button to update the shopping cart page and display the new order total.</span></span> 

    ![Warenkorb - Warenkorb-Update](shopping-cart/_static/image9.png)

## <a name="summary"></a><span data-ttu-id="8bd69-352">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="8bd69-352">Summary</span></span>

<span data-ttu-id="8bd69-353">In diesem Lernprogramm haben Sie den Einkaufswagen legen für die Wingtip Toys Web Forms-beispielanwendung erstellt.</span><span class="sxs-lookup"><span data-stu-id="8bd69-353">In this tutorial, you have created a shopping cart for the Wingtip Toys Web Forms sample application.</span></span> <span data-ttu-id="8bd69-354">Im Verlauf dieses Lernprogramms haben Sie Entity Framework Code First, datenanmerkungen, stark typisierte Datensteuerelemente und wurden die modellbindung verwendet.</span><span class="sxs-lookup"><span data-stu-id="8bd69-354">During this tutorial you have used Entity Framework Code First, data annotations, strongly typed data controls, and model binding.</span></span>

<span data-ttu-id="8bd69-355">Der Einkaufswagen unterstützt hinzufügen, löschen und Aktualisieren von Elementen, die der Benutzer für den Einkauf ausgewählt wurde.</span><span class="sxs-lookup"><span data-stu-id="8bd69-355">The shopping cart supports adding, deleting, and updating items that the user has selected for purchase.</span></span> <span data-ttu-id="8bd69-356">Zusätzlich zur Implementierung shopping Cart-Funktionalität, haben Sie gelernt, wie anzuzeigende shopping Cart-Elemente in einem **GridView** steuern und die Gesamtsumme der Bestellungen zu berechnen.</span><span class="sxs-lookup"><span data-stu-id="8bd69-356">In addition to implementing the shopping cart functionality, you have learned how to display shopping cart items in a **GridView** control and calculate the order total.</span></span>

## <a name="addition-information"></a><span data-ttu-id="8bd69-357">Zusätzliche Informationen</span><span class="sxs-lookup"><span data-stu-id="8bd69-357">Addition Information</span></span>

[<span data-ttu-id="8bd69-358">ASP.NET Session State (Übersicht)</span><span class="sxs-lookup"><span data-stu-id="8bd69-358">ASP.NET Session State Overview</span></span>](https://msdn.microsoft.com/en-us/library/ms178581.aspx)

>[!div class="step-by-step"]
<span data-ttu-id="8bd69-359">[Zurück](display_data_items_and_details.md)
[Weiter](checkout-and-payment-with-paypal.md)</span><span class="sxs-lookup"><span data-stu-id="8bd69-359">[Previous](display_data_items_and_details.md)
[Next](checkout-and-payment-with-paypal.md)</span></span>
