---
uid: web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs
title: Hinzufügen von und reagieren auf Schaltflächen an eine GridView (c#) | Microsoft Docs
author: rick-anderson
description: In diesem Lernprogramm sehen wir uns zum Hinzufügen von benutzerdefinierter Schaltflächen, damit eine Vorlage und die Felder eines GridView oder DetailsView-Steuerelements. Insbesondere müssen wir Bui...
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/13/2006
ms.topic: article
ms.assetid: 128fdb5f-4c5e-42b5-b485-f3aee90a8e38
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs
msc.type: authoredcontent
ms.openlocfilehash: 90648e10d5d058ea2e4aa5b3d8c4ed7448ea7166
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
ms.locfileid: "30878294"
---
<a name="adding-and-responding-to-buttons-to-a-gridview-c"></a><span data-ttu-id="123b7-104">Hinzufügen von und reagieren auf Schaltflächen an eine GridView (c#)</span><span class="sxs-lookup"><span data-stu-id="123b7-104">Adding and Responding to Buttons to a GridView (C#)</span></span>
====================
<span data-ttu-id="123b7-105">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="123b7-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="123b7-106">[Beispiel-App herunterladen](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_CS.exe) oder [PDF herunterladen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/datatutorial28cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="123b7-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_CS.exe) or [Download PDF](adding-and-responding-to-buttons-to-a-gridview-cs/_static/datatutorial28cs1.pdf)</span></span>

> <span data-ttu-id="123b7-107">In diesem Lernprogramm sehen wir uns zum Hinzufügen von benutzerdefinierter Schaltflächen, damit eine Vorlage und die Felder eines GridView oder DetailsView-Steuerelements.</span><span class="sxs-lookup"><span data-stu-id="123b7-107">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="123b7-108">Insbesondere müssen wir eine Schnittstelle erstellen, die einen FormView, die dem Benutzer ermöglicht verfügt, durch die Lieferanten blättern.</span><span class="sxs-lookup"><span data-stu-id="123b7-108">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span>


## <a name="introduction"></a><span data-ttu-id="123b7-109">Einführung</span><span class="sxs-lookup"><span data-stu-id="123b7-109">Introduction</span></span>

<span data-ttu-id="123b7-110">Während viele berichtsszenarien nur-Lese Zugriff auf die Berichtsdaten einschließen, ist es nicht ungewöhnlich, dass Berichte die Fähigkeit zum Ausführen von Aktionen, die basierend auf der angezeigten Daten enthalten.</span><span class="sxs-lookup"><span data-stu-id="123b7-110">While many reporting scenarios involve read-only access to the report data, it's not uncommon for reports to include the ability to perform actions based upon the data displayed.</span></span> <span data-ttu-id="123b7-111">In der Regel dadurch beteiligt Hinzufügen einer Schaltfläche, LinkButton oder ImageButton-Steuerelements mit jeder Datensatz im Bericht angezeigt, die beim Klicken auf einen Postback verursacht und serverseitigen Code aufruft.</span><span class="sxs-lookup"><span data-stu-id="123b7-111">Typically this involved adding a Button, LinkButton, or ImageButton Web control with each record displayed in the report that, when clicked, causes a postback and invokes some server-side code.</span></span> <span data-ttu-id="123b7-112">Bearbeiten und Löschen von Daten auf Basis von Datensätzen ist das häufigste Beispiel.</span><span class="sxs-lookup"><span data-stu-id="123b7-112">Editing and deleting the data on a record-by-record basis is the most common example.</span></span> <span data-ttu-id="123b7-113">In der Tat wie wir gesehen haben, beginnend mit der [Übersicht des einfügen, aktualisieren und Löschen von Daten](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) Lernprogramm bearbeiten und Löschen von wird so häufig, dass solche Funktionen ohne GridView, DetailsView und FormView unterstützt die für eine einzige Codezeile schreiben müssen.</span><span class="sxs-lookup"><span data-stu-id="123b7-113">In fact, as we saw starting with the [Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, editing and deleting is so common that the GridView, DetailsView, and FormView controls can support such functionality without the need for writing a single line of code.</span></span>

<span data-ttu-id="123b7-114">Darüber hinaus zum Bearbeiten und Löschen von Schaltflächen, die GridView, DetailsView und FormView-Steuerelemente können auch enthalten Schaltflächen, LinkButtons oder ImageButtons, wenn angeklickt, führen Sie einige benutzerdefinierte serverseitige Logik.</span><span class="sxs-lookup"><span data-stu-id="123b7-114">In addition to Edit and Delete buttons, the GridView, DetailsView, and FormView controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="123b7-115">In diesem Lernprogramm sehen wir uns zum Hinzufügen von benutzerdefinierter Schaltflächen, damit eine Vorlage und die Felder eines GridView oder DetailsView-Steuerelements.</span><span class="sxs-lookup"><span data-stu-id="123b7-115">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="123b7-116">Insbesondere müssen wir eine Schnittstelle erstellen, die einen FormView, die dem Benutzer ermöglicht verfügt, durch die Lieferanten blättern.</span><span class="sxs-lookup"><span data-stu-id="123b7-116">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span> <span data-ttu-id="123b7-117">Für einen bestimmten Lieferanten wird FormView Informationen zu den Lieferanten zusammen mit einer Schaltfläche Websteuerelement angezeigt, die, wenn geklickt haben, alle ihre zugeordneten Produkte markieren wird als nicht mehr unterstützt.</span><span class="sxs-lookup"><span data-stu-id="123b7-117">For a given supplier, the FormView will show information about the supplier along with a Button Web control that, if clicked, will mark all of their associated products as discontinued.</span></span> <span data-ttu-id="123b7-118">Darüber hinaus enthält eine GridView dieser Produkte, die den ausgewählten Lieferanten mit jeder Zeile mit Preis erhöhen und Discount Preis Schaltflächen, die, wenn geklickt haben, erhöhen oder verringern Sie des Produkts, gebotenen `UnitPrice` um 10 % (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="123b7-118">Additionally, a GridView lists those products provided by the selected supplier, with each row containing Increase Price and Discount Price Buttons that, if clicked, raise or reduce the product's `UnitPrice` by 10% (see Figure 1).</span></span>


<span data-ttu-id="123b7-119">[![Die FormView und die GridView enthalten Schaltflächen, die benutzerdefinierte Aktionen durchzuführen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-119">[![Both the FormView and GridView Contain Buttons That Perform Custom Actions](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image1.png)</span></span>

<span data-ttu-id="123b7-120">**Abbildung 1**: beide FormView und GridView enthalten Schaltflächen, führen benutzerdefinierte Aktionen ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-120">**Figure 1**: Both the FormView and GridView Contain Buttons That Perform Custom Actions ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image3.png))</span></span>


## <a name="step-1-adding-the-button-tutorial-web-pages"></a><span data-ttu-id="123b7-121">Schritt 1: Hinzufügen der Webseiten der Schaltfläche-Lernprogramm</span><span class="sxs-lookup"><span data-stu-id="123b7-121">Step 1: Adding the Button Tutorial Web Pages</span></span>

<span data-ttu-id="123b7-122">Bevor wir untersucht, wie eine benutzerdefinierten Schaltflächen hinzufügen, werfen einen Moment Zeit, um die ASP.NET-Seiten in unserer Websiteprojekt zu erstellen, die wir für dieses Lernprogramm müssen zuerst.</span><span class="sxs-lookup"><span data-stu-id="123b7-122">Before we look at how to add a custom buttons, let's first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="123b7-123">Starten, indem Sie einen neuen Ordner namens `CustomButtons`.</span><span class="sxs-lookup"><span data-stu-id="123b7-123">Start by adding a new folder named `CustomButtons`.</span></span> <span data-ttu-id="123b7-124">Fügen Sie die folgenden beiden ASP.NET-Seiten in diesen Ordner, und dabei sicherstellen, ordnen Sie jede Seite mit den `Site.master` Gestaltungsvorlage:</span><span class="sxs-lookup"><span data-stu-id="123b7-124">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`


![Fügen Sie die ASP.NET-Seiten für die benutzerdefinierte Schaltflächen-bezogene Lernprogramme](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image4.png)

<span data-ttu-id="123b7-126">**Abbildung 2**: Fügen Sie die ASP.NET-Seiten für die benutzerdefinierte Schaltflächen-bezogene Lernprogramme</span><span class="sxs-lookup"><span data-stu-id="123b7-126">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>


<span data-ttu-id="123b7-127">Wie in den anderen Ordnern `Default.aspx` in den `CustomButtons` Ordner werden die Lernprogramme in einem Abschnitt aufgelistet.</span><span class="sxs-lookup"><span data-stu-id="123b7-127">Like in the other folders, `Default.aspx` in the `CustomButtons` folder will list the tutorials in its section.</span></span> <span data-ttu-id="123b7-128">Bedenken Sie, dass die `SectionLevelTutorialListing.ascx` Benutzersteuerelement stellt diese Funktionalität bereit.</span><span class="sxs-lookup"><span data-stu-id="123b7-128">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="123b7-129">Aus diesem Grund Hinzufügen dieses Benutzersteuerelement zu `Default.aspx` durch Ziehen aus dem Projektmappen-Explorer auf der Seite Entwurfsansicht.</span><span class="sxs-lookup"><span data-stu-id="123b7-129">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page's Design view.</span></span>


<span data-ttu-id="123b7-130">[![Das Benutzersteuerelement SectionLevelTutorialListing.ascx "default.aspx" hinzufügen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-130">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image5.png)</span></span>

<span data-ttu-id="123b7-131">**Abbildung 3**: Hinzufügen der `SectionLevelTutorialListing.ascx` Benutzersteuerelement `Default.aspx` ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-131">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image7.png))</span></span>


<span data-ttu-id="123b7-132">Fügen Sie abschließend die Seiten hinzu, als Einträge an die `Web.sitemap` Datei.</span><span class="sxs-lookup"><span data-stu-id="123b7-132">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="123b7-133">Insbesondere das folgende Markup nach dem Paging und sortieren hinzufügen `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="123b7-133">Specifically, add the following markup after the Paging and Sorting `<siteMapNode>`:</span></span>

[!code-xml[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample1.xml)]

<span data-ttu-id="123b7-134">Nach der Aktualisierung `Web.sitemap`, nehmen einen Moment Zeit, um die Lernprogramme-Website über einen Browser anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="123b7-134">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="123b7-135">Klicken Sie im Menü auf der linken Seite enthält nun Elemente für die Bearbeitung, einfügen und Löschen von Lernprogramme.</span><span class="sxs-lookup"><span data-stu-id="123b7-135">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>


![Die Siteübersicht enthält jetzt den Eintrag für das benutzerdefinierte Schaltflächen-Lernprogramm](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image8.png)

<span data-ttu-id="123b7-137">**Abbildung 4**: die Siteübersicht enthält jetzt den Eintrag für das benutzerdefinierte Schaltflächen-Lernprogramm</span><span class="sxs-lookup"><span data-stu-id="123b7-137">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>


## <a name="step-2-adding-a-formview-that-lists-the-suppliers"></a><span data-ttu-id="123b7-138">Schritt 2: Hinzufügen einen FormView, die die Lieferanten auflistet.</span><span class="sxs-lookup"><span data-stu-id="123b7-138">Step 2: Adding a FormView that Lists the Suppliers</span></span>

<span data-ttu-id="123b7-139">Wir zum Einstieg dieses Lernprogramms durch Hinzufügen, die die Lieferanten listet FormView.</span><span class="sxs-lookup"><span data-stu-id="123b7-139">Let's get started with this tutorial by adding the FormView that lists the suppliers.</span></span> <span data-ttu-id="123b7-140">Wie in der Einführung erwähnt, können diese FormView Benutzer seitenweise durch die Lieferanten, die Produkte, die von den Lieferanten in einem GridView bereitgestellten angezeigt.</span><span class="sxs-lookup"><span data-stu-id="123b7-140">As discussed in the Introduction, this FormView will allow the user to page through the suppliers, showing the products provided by the supplier in a GridView.</span></span> <span data-ttu-id="123b7-141">Darüber hinaus schließt dieses FormView eine Schaltfläche, die beim Klicken auf alle Produkte der Lieferant als markiert nicht mehr unterstützt.</span><span class="sxs-lookup"><span data-stu-id="123b7-141">Additionally, this FormView will include a Button that, when clicked, will mark all of the supplier's products as discontinued.</span></span> <span data-ttu-id="123b7-142">Bevor wir uns fügen Sie die benutzerdefinierte Schaltfläche FormView betreffen, wir zuerst erstellen Sie einfach die FormView so, dass die Lieferanteninformationen angezeigt.</span><span class="sxs-lookup"><span data-stu-id="123b7-142">Before we concern ourselves with adding the custom button to the FormView, let's first just create the FormView so that it displays the supplier information.</span></span>

<span data-ttu-id="123b7-143">Öffnen Sie zunächst die `CustomButtons.aspx` auf der Seite der `CustomButtons` Ordner.</span><span class="sxs-lookup"><span data-stu-id="123b7-143">Start by opening the `CustomButtons.aspx` page in the `CustomButtons` folder.</span></span> <span data-ttu-id="123b7-144">Hinzufügen einen FormView auf der Seite durch ziehen es aus der Toolbox auf die Designer, und legen seine `ID` Eigenschaft `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="123b7-144">Add a FormView to the page by dragging it from the Toolbox onto the Designer and set its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="123b7-145">Erstellen Sie eine neue ObjectDataSource mit dem Namen aus der FormView-Smarttag, wahlweise `SuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="123b7-145">From the FormView's smart tag, opt to create a new ObjectDataSource named `SuppliersDataSource`.</span></span>


<span data-ttu-id="123b7-146">[![Erstellen Sie eine neue, mit dem Namen SuppliersDataSource ObjectDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-146">[![Create a New ObjectDataSource Named SuppliersDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image9.png)</span></span>

<span data-ttu-id="123b7-147">**Abbildung 5**: Erstellen einer neuen ObjectDataSource namens `SuppliersDataSource` ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-147">**Figure 5**: Create a New ObjectDataSource Named `SuppliersDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image11.png))</span></span>


<span data-ttu-id="123b7-148">Diese neue ObjectDataSource so konfigurieren, dass er von Abfragen die `SuppliersBLL` Klasse `GetSuppliers()` Methode (siehe Abbildung 6).</span><span class="sxs-lookup"><span data-stu-id="123b7-148">Configure this new ObjectDataSource such that it queries from the `SuppliersBLL` class's `GetSuppliers()` method (see Figure 6).</span></span> <span data-ttu-id="123b7-149">Da diese FormView keine Schnittstelle bietet für die Lieferanteninformationen aktualisieren, wählen Sie, dass die (None) aus der Dropdown-Liste auf der Registerkarte "UPDATE"-option.</span><span class="sxs-lookup"><span data-stu-id="123b7-149">Since this FormView does not provide an interface for updating the supplier information, select the (None) option from the drop-down list in the UPDATE tab.</span></span>


<span data-ttu-id="123b7-150">[![Konfigurieren Sie die Datenquelle zur Verwendung der Klasse SuppliersBLL s GetSuppliers()-Methode](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-150">[![Configure the Data Source to use the SuppliersBLL Class s GetSuppliers() Method](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image12.png)</span></span>

<span data-ttu-id="123b7-151">**Abbildung 6**: Konfigurieren Sie die Datenquelle verwendet den `SuppliersBLL` Klasse `GetSuppliers()` Methode ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-151">**Figure 6**: Configure the Data Source to use the `SuppliersBLL` Class's `GetSuppliers()` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image14.png))</span></span>


<span data-ttu-id="123b7-152">Nach dem Konfigurieren der ObjectDataSource, generiert Visual Studio eine `InsertItemTemplate`, `EditItemTemplate`, und `ItemTemplate` für FormView.</span><span class="sxs-lookup"><span data-stu-id="123b7-152">After configuring the ObjectDataSource, Visual Studio will generate an `InsertItemTemplate`, `EditItemTemplate`, and `ItemTemplate` for the FormView.</span></span> <span data-ttu-id="123b7-153">Entfernen Sie die `InsertItemTemplate` und `EditItemTemplate` und Ändern der `ItemTemplate` , sodass sie nur die Lieferanten Company Name und Phone Nummer angezeigt.</span><span class="sxs-lookup"><span data-stu-id="123b7-153">Remove the `InsertItemTemplate` and `EditItemTemplate` and modify the `ItemTemplate` so that it displays just the supplier's company name and phone number.</span></span> <span data-ttu-id="123b7-154">Schließlich auslagerungsunterstützung für FormView schalten, indem Sie das Paging aktivieren Kontrollkästchen aus seinem Smarttag (oder durch Festlegen seiner `AllowPaging` Eigenschaft `True`).</span><span class="sxs-lookup"><span data-stu-id="123b7-154">Finally, turn on paging support for the FormView by checking the Enable Paging checkbox from its smart tag (or by setting its `AllowPaging` property to `True`).</span></span> <span data-ttu-id="123b7-155">Nach der Änderung sollte deklarativem Markup Ihrer Seite etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="123b7-155">After these changes your page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample2.aspx)]

<span data-ttu-id="123b7-156">Abbildung 7 zeigt die Seite CustomButtons.aspx, wenn Sie über einen Browser angezeigt.</span><span class="sxs-lookup"><span data-stu-id="123b7-156">Figure 7 shows the CustomButtons.aspx page when viewed through a browser.</span></span>


<span data-ttu-id="123b7-157">[![Die FormView Listet die CompanyName und Phone Felder aus den aktuell ausgewählten Lieferanten](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-157">[![The FormView Lists the CompanyName and Phone Fields from the Currently Selected Supplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image15.png)</span></span>

<span data-ttu-id="123b7-158">**Abbildung 7**: der FormView-Listet die `CompanyName` und `Phone` Felder aus den derzeit ausgewählten Lieferanten ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-158">**Figure 7**: The FormView Lists the `CompanyName` and `Phone` Fields from the Currently Selected Supplier ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image17.png))</span></span>


## <a name="step-3-adding-a-gridview-that-lists-the-selected-suppliers-products"></a><span data-ttu-id="123b7-159">Schritt 3: Hinzufügen einer GridView, die den ausgewählten Lieferanten Produkte aufgeführt sind</span><span class="sxs-lookup"><span data-stu-id="123b7-159">Step 3: Adding a GridView that Lists the Selected Supplier's Products</span></span>

<span data-ttu-id="123b7-160">Bevor wir die beenden Sie die Schaltfläche "alle Produkte" der FormView-Vorlage hinzuzufügen, fügen wir zuerst hinzu GridView unter FormView, die die von den ausgewählten Lieferanten bereitgestellte Produkte aufgeführt sind.</span><span class="sxs-lookup"><span data-stu-id="123b7-160">Before we add the Discontinue All Products Button to the FormView's template, let's first add a GridView beneath the FormView that lists the products provided by the selected supplier.</span></span> <span data-ttu-id="123b7-161">Legen Sie dazu, Hinzufügen einer GridView auf der Seite ", seine `ID` Eigenschaft `SuppliersProducts`, und fügen Sie eine neue ObjectDataSource mit dem Namen `SuppliersProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="123b7-161">To accomplish this, add a GridView to the page, set its `ID` property to `SuppliersProducts`, and add a new ObjectDataSource named `SuppliersProductsDataSource`.</span></span>


<span data-ttu-id="123b7-162">[![Erstellen Sie eine neue, mit dem Namen SuppliersProductsDataSource ObjectDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-162">[![Create a New ObjectDataSource Named SuppliersProductsDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image18.png)</span></span>

<span data-ttu-id="123b7-163">**Abbildung 8**: Erstellen einer neuen ObjectDataSource namens `SuppliersProductsDataSource` ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-163">**Figure 8**: Create a New ObjectDataSource Named `SuppliersProductsDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image20.png))</span></span>


<span data-ttu-id="123b7-164">Konfigurieren Sie diese ObjectDataSource zur Verwendung der ProductsBLL Klasse `GetProductsBySupplierID(supplierID)` Methode (siehe Abbildung 9).</span><span class="sxs-lookup"><span data-stu-id="123b7-164">Configure this ObjectDataSource to use the ProductsBLL class's `GetProductsBySupplierID(supplierID)` method (see Figure 9).</span></span> <span data-ttu-id="123b7-165">Während dieser GridView werden für den Preis eines Produkts angepasst werden kann, wird nicht die integrierte bearbeiten oder Löschen von Funktionen aus der GridView verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="123b7-165">While this GridView will allow for a product's price to be adjusted, it won't be using the built-in editing or deleting features from the GridView.</span></span> <span data-ttu-id="123b7-166">Daher können wir die Dropdown-Liste (keine) für das ObjectDataSource des Update-, INSERT- und Löschen von Registerkarten festlegen.</span><span class="sxs-lookup"><span data-stu-id="123b7-166">Therefore, we can set the drop-down list to (None) for the ObjectDataSource's UPDATE, INSERT, and DELETE tabs.</span></span>


<span data-ttu-id="123b7-167">[![Konfigurieren Sie die Datenquelle zur Verwendung der Klasse ProductsBLL s GetProductsBySupplierID(supplierID)-Methode](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-167">[![Configure the Data Source to use the ProductsBLL Class s GetProductsBySupplierID(supplierID) Method](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image21.png)</span></span>

<span data-ttu-id="123b7-168">**Abbildung 9**: Konfigurieren Sie die Datenquelle verwendet den `ProductsBLL` Klasse `GetProductsBySupplierID(supplierID)` Methode ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-168">**Figure 9**: Configure the Data Source to use the `ProductsBLL` Class's `GetProductsBySupplierID(supplierID)` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image23.png))</span></span>


<span data-ttu-id="123b7-169">Da die `GetProductsBySupplierID(supplierID)` Methode akzeptiert einen Eingabeparameter, der ObjectDataSource-Assistent fordert Sie uns für die Quelle dieser Parameterwert.</span><span class="sxs-lookup"><span data-stu-id="123b7-169">Since the `GetProductsBySupplierID(supplierID)` method accepts an input parameter, the ObjectDataSource wizard prompts us for the source of this parameter value.</span></span> <span data-ttu-id="123b7-170">Übergeben der `SupplierID` aus FormView Wert, der Parameter-Quellliste Dropdown-Steuerelement und die ControlID Dropdown-Liste festgelegt `Suppliers` (in Schritt2 erstellte die FormView-ID).</span><span class="sxs-lookup"><span data-stu-id="123b7-170">To pass in the `SupplierID` value from the FormView, set the Parameter source drop-down list to Control and the ControlID drop-down list to `Suppliers` (the ID of the FormView created in Step 2).</span></span>


<span data-ttu-id="123b7-171">[![Um anzugeben Sie, dass die SupplierID Parameter vom Lieferanten FormView Steuerelement stammen soll](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-171">[![Indicate that the supplierID Parameter Should Come from the Suppliers FormView Control](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image24.png)</span></span>

<span data-ttu-id="123b7-172">**Abbildung 10**: darauf hinweisen, dass die *`supplierID`* Parameter herstammt sollte die `Suppliers` FormView-Steuerelement ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-172">**Figure 10**: Indicate that the *`supplierID`* Parameter Should Come from the `Suppliers` FormView Control ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image26.png))</span></span>


<span data-ttu-id="123b7-173">Nach Abschluss des Assistenten ObjectDataSource wird die GridView eine BoundField- oder CheckBoxField, für die einzelnen Datenfelder des Produkts enthalten.</span><span class="sxs-lookup"><span data-stu-id="123b7-173">After completing the ObjectDataSource wizard, the GridView will contain a BoundField or CheckBoxField for each of the product's data fields.</span></span> <span data-ttu-id="123b7-174">Trim dies wir nach unten zum Anzeigen nur die `ProductName` und `UnitPrice` BoundFields zusammen mit der `Discontinued` CheckBoxField; darüber hinaus wir Formatieren der `UnitPrice` BoundField, dass sein Text als Währung formatiert ist.</span><span class="sxs-lookup"><span data-stu-id="123b7-174">Let's trim this down to show just the `ProductName` and `UnitPrice` BoundFields along with the `Discontinued` CheckBoxField; furthermore, let's format the `UnitPrice` BoundField such that its text is formatted as a currency.</span></span> <span data-ttu-id="123b7-175">Die GridView und `SuppliersProductsDataSource` ObjectDataSources deklarative Markup sollte etwa wie das folgende Markup aussehen:</span><span class="sxs-lookup"><span data-stu-id="123b7-175">Your GridView and `SuppliersProductsDataSource` ObjectDataSource's declarative markup should look similar to the following markup:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample3.aspx)]

<span data-ttu-id="123b7-176">Unser Tutorial zeigt zu diesem Zeitpunkt einen Master-/Detail-Bericht, der Benutzer einen Lieferanten FormView oben ausgewählt und die Produkte von Lieferanten über die GridView unten bereitgestellten anzeigen.</span><span class="sxs-lookup"><span data-stu-id="123b7-176">At this point our tutorial displays a master/details report, allowing the user to pick a supplier from the FormView at the top and to view the products provided by that supplier through the GridView at the bottom.</span></span> <span data-ttu-id="123b7-177">Abbildung 11 zeigt einen Screenshot der Seite beim Lieferanten Tokyo Traders aus FormView auswählen.</span><span class="sxs-lookup"><span data-stu-id="123b7-177">Figure 11 shows a screen shot of this page when selecting the Tokyo Traders supplier from the FormView.</span></span>


<span data-ttu-id="123b7-178">[![Die ausgewählte s Lieferanten werden in der GridView angezeigt.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-178">[![The Selected Supplier s Products are Displayed in the GridView](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image27.png)</span></span>

<span data-ttu-id="123b7-179">**Abbildung 11**: die ausgewählte des Lieferanten in der GridView angezeigt werden ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image29.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-179">**Figure 11**: The Selected Supplier's Products are Displayed in the GridView ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image29.png))</span></span>


## <a name="step-4-creating-dal-and-bll-methods-to-discontinue-all-products-for-a-supplier"></a><span data-ttu-id="123b7-180">Schritt 4: Erstellen von DAL und BLL-Methoden, um alle Produkte für ein Lieferant einstellen</span><span class="sxs-lookup"><span data-stu-id="123b7-180">Step 4: Creating DAL and BLL Methods to Discontinue All Products for a Supplier</span></span>

<span data-ttu-id="123b7-181">Bevor wir die FormView eine Schaltfläche hinzufügen können, wenn angeklickt, reagiert nicht mehr alle von den Lieferanten, müssen Sie zuerst die DAL und BLL, die diese Aktion führt eine Methode hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="123b7-181">Before we can add a Button to the FormView that, when clicked, discontinues all of the supplier's products, we first need to add a method to both the DAL and BLL that performs this action.</span></span> <span data-ttu-id="123b7-182">Diese Methode wird insbesondere benannt werden `DiscontinueAllProductsForSupplier(supplierID)`.</span><span class="sxs-lookup"><span data-stu-id="123b7-182">In particular, this method will be named `DiscontinueAllProductsForSupplier(supplierID)`.</span></span> <span data-ttu-id="123b7-183">Wenn die FormView-Schaltfläche geklickt wird, müssen wir diese Methode in der Geschäftslogikebene übergeben aufzurufen, in des ausgewählten Lieferanten `SupplierID`; Ruft die BLL dann nach unten an den entsprechenden Datenzugriffsebene-Methode, die ausstellen, die eine `UPDATE` Anweisung mit der Datenbank, die die angegebenen Lieferanten reagiert nicht mehr.</span><span class="sxs-lookup"><span data-stu-id="123b7-183">When the FormView's Button is clicked, we'll invoke this method in the Business Logic Layer, passing in the selected supplier's `SupplierID`; the BLL will then call down to the corresponding Data Access Layer method, which will issue an `UPDATE` statement to the database that discontinues the specified supplier's products.</span></span>

<span data-ttu-id="123b7-184">Wie wir in unserer vorherigen Lernprogrammen durchgeführt haben, verwenden einen Bottom-Up-Ansatz wir die DAL-Methode, die BLL-Methode, erstellen und schließlich auf der ASP.NET-Seite Implementieren der Funktionalität ab.</span><span class="sxs-lookup"><span data-stu-id="123b7-184">As we have done in our previous tutorials, we'll use a bottom-up approach, starting with creating the DAL method, then the BLL method, and finally implementing the functionality in the ASP.NET page.</span></span> <span data-ttu-id="123b7-185">Öffnen der `Northwind.xsd` typisierte DataSet in die `App_Code/DAL` Ordner und eine neue Methode zum Hinzufügen der `ProductsTableAdapter` (mit der rechten Maustaste auf die `ProductsTableAdapter` , und wählen Sie die Abfrage hinzufügen).</span><span class="sxs-lookup"><span data-stu-id="123b7-185">Open the `Northwind.xsd` Typed DataSet in the `App_Code/DAL` folder and add a new method to the `ProductsTableAdapter` (right-click on the `ProductsTableAdapter` and choose Add Query).</span></span> <span data-ttu-id="123b7-186">Auf diese Weise wird der TableAdapter-Abfrage-Konfigurations-Assistenten anzuzeigen, in dem uns durch den Prozess des Hinzufügens der neuen Methode führt.</span><span class="sxs-lookup"><span data-stu-id="123b7-186">Doing so will bring up the TableAdapter Query Configuration wizard, which walks us through the process of adding the new method.</span></span> <span data-ttu-id="123b7-187">Angabe, dass unsere DAL-Methode wird eine Ad-hoc-SQL-Anweisung beginnen.</span><span class="sxs-lookup"><span data-stu-id="123b7-187">Start by indicating that our DAL method will use an ad-hoc SQL statement.</span></span>


<span data-ttu-id="123b7-188">[![Erstellen Sie die DAL-Methode, die mit Ad-hoc-SQL-Anweisungen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image30.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-188">[![Create the DAL Method Using an Ad-Hoc SQL Statement](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image30.png)</span></span>

<span data-ttu-id="123b7-189">**Abbildung 12**: Exemplarische Vorgehensweise: Erstellen von der DAL-Methode mit einer Ad-hoc-SQL-Anweisung ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image32.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-189">**Figure 12**: Create the DAL Method Using an Ad-Hoc SQL Statement ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image32.png))</span></span>


<span data-ttu-id="123b7-190">Als Nächstes fordert der Assistent uns um welche Art von Abfrage zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="123b7-190">Next, the wizard prompts us as to what type of query to create.</span></span> <span data-ttu-id="123b7-191">Da die `DiscontinueAllProductsForSupplier(supplierID)` Methode müssen Aktualisieren der `Products` Datenbanktabelle Festlegen der `Discontinued` 1 für alle Produkte bereitgestellt, die durch das angegebene Feld *`supplierID`*, müssen wir eine Abfrage erstellen, die Daten aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="123b7-191">Since the `DiscontinueAllProductsForSupplier(supplierID)` method will need to update the `Products` database table, setting the `Discontinued` field to 1 for all products provided by the specified *`supplierID`*, we need to create a query that updates data.</span></span>


<span data-ttu-id="123b7-192">[![Wählen Sie den Abfragetyp UPDATE](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-192">[![Choose the UPDATE Query Type](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image33.png)</span></span>

<span data-ttu-id="123b7-193">**Abbildung 13**: Wählen Sie den Abfragetyp UPDATE ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image35.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-193">**Figure 13**: Choose the UPDATE Query Type ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image35.png))</span></span>


<span data-ttu-id="123b7-194">Im nächste Assistentenbildschirm bietet TableAdapter der vorhandenen `UPDATE` -Anweisung, die jedes der Felder im definierten aktualisiert die `Products` DataTable.</span><span class="sxs-lookup"><span data-stu-id="123b7-194">The next wizard screen provides the TableAdapter's existing `UPDATE` statement, which updates each of the fields defined in the `Products` DataTable.</span></span> <span data-ttu-id="123b7-195">Ersetzen Sie diese Abfragetext durch die folgende Anweisung aus:</span><span class="sxs-lookup"><span data-stu-id="123b7-195">Replace this query text with the following statement:</span></span>

[!code-sql[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample4.sql)]

<span data-ttu-id="123b7-196">Nach der Eingabe dieser Abfrage, und klicken Sie auf Weiter, fordert der letzten Seite des Assistenten für die neue Methode Namen `DiscontinueAllProductsForSupplier`.</span><span class="sxs-lookup"><span data-stu-id="123b7-196">After entering this query and clicking Next, the last wizard screen asks for the new method's name use `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="123b7-197">Schließen Sie den Assistenten, indem Sie auf "Fertig stellen".</span><span class="sxs-lookup"><span data-stu-id="123b7-197">Complete the wizard by clicking the Finish button.</span></span> <span data-ttu-id="123b7-198">Nach der Rückgabe an den DataSet-Designer sehen Sie eine neue Methode in der `ProductsTableAdapter` mit dem Namen `DiscontinueAllProductsForSupplier(@SupplierID)`.</span><span class="sxs-lookup"><span data-stu-id="123b7-198">Upon returning to the DataSet Designer you should see a new method in the `ProductsTableAdapter` named `DiscontinueAllProductsForSupplier(@SupplierID)`.</span></span>


<span data-ttu-id="123b7-199">[![Name der neuen DiscontinueAllProductsForSupplier der DAL-Methode](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-199">[![Name the New DAL Method DiscontinueAllProductsForSupplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image36.png)</span></span>

<span data-ttu-id="123b7-200">**Abbildung 14**: Benennen Sie die neue DAL `DiscontinueAllProductsForSupplier` ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image38.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-200">**Figure 14**: Name the New DAL Method `DiscontinueAllProductsForSupplier` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image38.png))</span></span>


<span data-ttu-id="123b7-201">Mit der `DiscontinueAllProductsForSupplier(supplierID)` erstellte Methode in der Datenzugriffsebene, unsere nächste Aufgabe ist die Erstellung der `DiscontinueAllProductsForSupplier(supplierID)` Methode in der Geschäftslogikebene.</span><span class="sxs-lookup"><span data-stu-id="123b7-201">With the `DiscontinueAllProductsForSupplier(supplierID)` method created in the Data Access Layer, our next task is to create the `DiscontinueAllProductsForSupplier(supplierID)` method in the Business Logic Layer.</span></span> <span data-ttu-id="123b7-202">Um dies zu erreichen, öffnen Sie die `ProductsBLL` Klassendatei, und fügen Sie Folgendes hinzu:</span><span class="sxs-lookup"><span data-stu-id="123b7-202">To accomplish this, open the `ProductsBLL` class file and add the following:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample5.cs)]

<span data-ttu-id="123b7-203">Diese Methode ruft einfach nach unten, um die `DiscontinueAllProductsForSupplier(supplierID)` -Methode in der DAL, weiter und übergibt dabei die angegebenen *`supplierID`* Parameterwert.</span><span class="sxs-lookup"><span data-stu-id="123b7-203">This method simply calls down to the `DiscontinueAllProductsForSupplier(supplierID)` method in the DAL, passing along the provided *`supplierID`* parameter value.</span></span> <span data-ttu-id="123b7-204">Wären alle Geschäftsregeln, die nur einen Lieferanten unter bestimmten Umständen nicht fortgeführt werden dürfen, sollten diese Regeln in der BLL hier implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="123b7-204">If there were any business rules that only allowed a supplier's products to be discontinued under certain circumstances, those rules should be implemented here, in the BLL.</span></span>

> [!NOTE]
> <span data-ttu-id="123b7-205">Im Gegensatz zu den `UpdateProduct` -Überladungen in der `ProductsBLL` -Klasse, die `DiscontinueAllProductsForSupplier(supplierID)` Methodensignatur enthält keine der `DataObjectMethodAttribute` Attribut (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`).</span><span class="sxs-lookup"><span data-stu-id="123b7-205">Unlike the `UpdateProduct` overloads in the `ProductsBLL` class, the `DiscontinueAllProductsForSupplier(supplierID)` method signature does not include the `DataObjectMethodAttribute` attribute (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`).</span></span> <span data-ttu-id="123b7-206">Dies schließt die `DiscontinueAllProductsForSupplier(supplierID)` Methode aus der Dropdownliste das ObjectDataSource Konfigurieren von Datenquellen-Assistenten auf der Registerkarte "UPDATE". Ich Ve dieses Attribut weggelassen, da wir aufrufen, müssen die `DiscontinueAllProductsForSupplier(supplierID)` Methode direkt von einem Ereignishandler auf unserem ASP.NET-Seite.</span><span class="sxs-lookup"><span data-stu-id="123b7-206">This precludes the `DiscontinueAllProductsForSupplier(supplierID)` method from the ObjectDataSource's Configure Data Source wizard's drop-down list in the UPDATE tab. I ve omitted this attribute because we'll be calling the `DiscontinueAllProductsForSupplier(supplierID)` method directly from an event handler in our ASP.NET page.</span></span>


## <a name="step-5-adding-a-discontinue-all-products-button-to-the-formview"></a><span data-ttu-id="123b7-207">Schritt 5: Hinzufügen einer unterbrechen Sie alle Produkte-Schaltfläche, um die FormView</span><span class="sxs-lookup"><span data-stu-id="123b7-207">Step 5: Adding a Discontinue All Products Button to the FormView</span></span>

<span data-ttu-id="123b7-208">Mit der `DiscontinueAllProductsForSupplier(supplierID)` Methode in der BLL und DAL abgeschlossen, der abschließenden Schritt zum Hinzufügen der Funktion, die alle Produkte für den ausgewählten Lieferanten zu beenden wird die FormView ein Websteuerelement Schaltfläche hinzugefügt `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="123b7-208">With the `DiscontinueAllProductsForSupplier(supplierID)` method in the BLL and DAL complete, the final step for adding the ability to discontinue all products for the selected supplier is to add a Button Web control to the FormView's `ItemTemplate`.</span></span> <span data-ttu-id="123b7-209">Fügen wir eine solche Schaltfläche unten Telefonnummer mit der Schaltflächentext All Products Einstellen des Lieferanten hinzu und ein `ID` Eigenschaftswert `DiscontinueAllProductsForSupplier`.</span><span class="sxs-lookup"><span data-stu-id="123b7-209">Let's add such a Button below the supplier's phone number with the button text, Discontinue All Products and an `ID` property value of `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="123b7-210">Sie können dieses Steuerelement Schaltfläche mithilfe des Designers durch Klicken auf den Link Bearbeiten von Vorlagen in der FormView-Smarttag hinzufügen (siehe Abbildung 15), oder direkt über die deklarative Syntax.</span><span class="sxs-lookup"><span data-stu-id="123b7-210">You can add this Button Web control through the Designer by clicking on the Edit Templates link in the FormView's smart tag (see Figure 15), or directly through the declarative syntax.</span></span>


<span data-ttu-id="123b7-211">[![Hinzufügen einer alle Produkte Schaltfläche Websteuerelement auf FormView s ItemTemplate einstellen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-211">[![Add a Discontinue All Products Button Web Control to the FormView s ItemTemplate](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image39.png)</span></span>

<span data-ttu-id="123b7-212">**Abbildung 15**: Hinzufügen ein Beenden aller Produkte Schaltfläche Websteuerelement die FormView `ItemTemplate` ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image41.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-212">**Figure 15**: Add a Discontinue All Products Button Web Control to the FormView's `ItemTemplate` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image41.png))</span></span>


<span data-ttu-id="123b7-213">Wenn die Schaltfläche geklickt wird, durch die ein Benutzer auf die Seite ein Postback erfolgt und die FormView [ `ItemCommand` Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.itemcommand.aspx) ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="123b7-213">When the Button is clicked by a user visiting the page, a postback ensues and the FormView's [`ItemCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.itemcommand.aspx) fires.</span></span> <span data-ttu-id="123b7-214">Zum Ausführen von benutzerdefinierten Codes als Reaktion auf diese Schaltfläche geklickt wird, können wir einen Ereignishandler für dieses Ereignis erstellen.</span><span class="sxs-lookup"><span data-stu-id="123b7-214">To execute custom code in response to this Button being clicked, we can create an event handler for this event.</span></span> <span data-ttu-id="123b7-215">Verstehen, aber, die `ItemCommand` Ereignis wird ausgelöst, wenn *alle* innerhalb der FormView Schaltfläche, LinkButton oder ImageButton-Steuerelement geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="123b7-215">Understand, though, that the `ItemCommand` event fires whenever *any* Button, LinkButton, or ImageButton Web control is clicked within the FormView.</span></span> <span data-ttu-id="123b7-216">Dies bedeutet, dass, wenn der Benutzer von einer Seite in eine andere in der FormView richtet die `ItemCommand` Ereignisses; identisch, wenn der Benutzer klickt auf New, Edit, oder Löschen von Daten in einem FormView, das Einfügen, aktualisieren oder Löschen von unterstützt.</span><span class="sxs-lookup"><span data-stu-id="123b7-216">That means that when the user moves from one page to another in the FormView, the `ItemCommand` event fires; same thing when the user clicks New, Edit, or Delete in a FormView that supports inserting, updating, or deleting.</span></span>

<span data-ttu-id="123b7-217">Da die `ItemCommand` ausgelöst wird, unabhängig davon, welche Schaltfläche klicken, wird im Ereignisprotokoll Handler wir benötigen eine Möglichkeit, um festzustellen, ob die beenden Sie alle Produkte Schaltfläche geklickt wurde oder wenn es sich um eine Schaltfläche "Sonstige" war.</span><span class="sxs-lookup"><span data-stu-id="123b7-217">Since the `ItemCommand` fires regardless of what button is clicked, in the event handler we need a way to determine if the Discontinue All Products Button was clicked or if it was some other button.</span></span> <span data-ttu-id="123b7-218">Um dies zu erreichen, legen wir den Schaltfläche Websteuerelement `CommandName` Eigenschaft auf einen beliebigen Wert identifiziert.</span><span class="sxs-lookup"><span data-stu-id="123b7-218">To accomplish this, we can set the Button Web control's `CommandName` property to some identifying value.</span></span> <span data-ttu-id="123b7-219">Wenn die Schaltfläche geklickt wird, dies `CommandName` übergebene Wert den `ItemCommand` -Ereignishandler, aktivieren uns, um festzustellen, ob die beenden Sie die Schaltfläche "alle Produkte" auf die Schaltfläche geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="123b7-219">When the Button is clicked, this `CommandName` value is passed into the `ItemCommand` event handler, enabling us to determine whether the Discontinue All Products Button was the button clicked.</span></span> <span data-ttu-id="123b7-220">Beenden Sie alle Produkte Schaltfläche festlegen des `CommandName` DiscontinueProducts Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="123b7-220">Set the Discontinue All Products Button's `CommandName` property to DiscontinueProducts .</span></span>

<span data-ttu-id="123b7-221">Schließlich ermöglicht die Verwendung eines clientseitigen bestätigen (Dialogfeld das, stellen Sie sicher, dass der Benutzer möchte die ausgewählten Lieferanten eingestellt.</span><span class="sxs-lookup"><span data-stu-id="123b7-221">Finally, let's use a client-side confirm dialog box to ensure that the user really wants to discontinue the selected supplier's products.</span></span> <span data-ttu-id="123b7-222">Wie wir gesehen, in haben der [Hinzufügen von clientseitigen Bestätigung beim Löschen von](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs.md) Tutorial, dies kann mit einem gewissen Grad JavaScript erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="123b7-222">As we saw in the [Adding Client-Side Confirmation When Deleting](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs.md) tutorial, this can be accomplished with a bit of JavaScript.</span></span> <span data-ttu-id="123b7-223">Insbesondere auf die Schaltfläche Websteuerelement OnClientClick-Eigenschaft festgelegt `return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');`</span><span class="sxs-lookup"><span data-stu-id="123b7-223">In particular, set the Button Web control's OnClientClick property to `return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');`</span></span>

<span data-ttu-id="123b7-224">Nachdem diese Änderungen vorgenommen wurden, sollte die FormView deklarative Syntax wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="123b7-224">After making these changes, the FormView's declarative syntax should look like the following:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample6.aspx)]

<span data-ttu-id="123b7-225">Als Nächstes erstellen Sie einen Ereignishandler für die FormView `ItemCommand` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="123b7-225">Next, create an event handler for the FormView's `ItemCommand` event.</span></span> <span data-ttu-id="123b7-226">In diesem Ereignishandler muss zuerst feststellen, ob die beenden Sie alle Produkte Schaltfläche geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="123b7-226">In this event handler we need to first determine whether the Discontinue All Products Button was clicked.</span></span> <span data-ttu-id="123b7-227">Wenn daher wir erstellen eine Instanz von möchten der `ProductsBLL` Klasse, und rufen die `DiscontinueAllProductsForSupplier(supplierID)` -Methode auf und übergibt die `SupplierID` der ausgewählten FormView:</span><span class="sxs-lookup"><span data-stu-id="123b7-227">If so, we want to create an instance of the `ProductsBLL` class and invoke its `DiscontinueAllProductsForSupplier(supplierID)` method, passing in the `SupplierID` of the selected FormView:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample7.cs)]

<span data-ttu-id="123b7-228">Beachten Sie, dass die `SupplierID` des aktuellen ausgewählten Lieferanten in FormView möglich, die mithilfe der FormView [ `SelectedValue` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.selectedvalue.aspx).</span><span class="sxs-lookup"><span data-stu-id="123b7-228">Note that the `SupplierID` of the current selected supplier in the FormView can be accessed using the FormView's [`SelectedValue` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.selectedvalue.aspx).</span></span> <span data-ttu-id="123b7-229">Die `SelectedValue` Eigenschaft gibt die ersten Daten-Schlüsselwert für den Datensatz in die FormView angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="123b7-229">The `SelectedValue` property returns the first data key value for the record being displayed in the FormView.</span></span> <span data-ttu-id="123b7-230">Die FormView [ `DataKeyNames` Eigenschaft](https://msdn.microsoft.com/system.web.ui.webcontrols.formview.datakeynames.aspx), die Daten, die Felder aus dem die Daten die Schlüsselwerte in Raumfahrt aus, womit auf automatisch festgelegt wurde `SupplierID` von Visual Studio beim Binden der ObjectDataSource FormView in Schritt2.</span><span class="sxs-lookup"><span data-stu-id="123b7-230">The FormView's [`DataKeyNames` property](https://msdn.microsoft.com/system.web.ui.webcontrols.formview.datakeynames.aspx), which indicates the data fields from which the data key values are pulled from, was automatically set to `SupplierID` by Visual Studio when binding the ObjectDataSource to the FormView back in Step 2.</span></span>

<span data-ttu-id="123b7-231">Mit der `ItemCommand` -Ereignishandler erstellt haben, nehmen einen Moment Zeit, zu der Seite zu testen.</span><span class="sxs-lookup"><span data-stu-id="123b7-231">With the `ItemCommand` event handler created, take a moment to test out the page.</span></span> <span data-ttu-id="123b7-232">Navigieren Sie zu der Cooperativa de Quesos "Las Cabras" Lieferanten (er befindet sich die fünfte Lieferanten in der FormView für mich).</span><span class="sxs-lookup"><span data-stu-id="123b7-232">Browse to the Cooperativa de Quesos 'Las Cabras' supplier (it's the fifth supplier in the FormView for me).</span></span> <span data-ttu-id="123b7-233">Diese Lieferanten bietet zwei Produkte, Queso Cabrales und Queso Manchego La Pastora beide *nicht* nicht mehr unterstützt.</span><span class="sxs-lookup"><span data-stu-id="123b7-233">This supplier provides two products, Queso Cabrales and Queso Manchego La Pastora, both of which are *not* discontinued.</span></span>

<span data-ttu-id="123b7-234">Stellen Sie sich vor Cooperativa de Quesos "Las Cabras" nicht mehr im Unternehmen, seine Produkte sind daher nicht mehr unterstützt.</span><span class="sxs-lookup"><span data-stu-id="123b7-234">Imagine that Cooperativa de Quesos 'Las Cabras' has gone out of business and therefore its products are to be discontinued.</span></span> <span data-ttu-id="123b7-235">Klicken Sie auf die Schaltfläche "alle Produkte" eingestellt.</span><span class="sxs-lookup"><span data-stu-id="123b7-235">Click the Discontinue All Products Button.</span></span> <span data-ttu-id="123b7-236">Dadurch wird das Dialogfeld "clientseitige bestätigen" angezeigt (siehe Abbildung 16).</span><span class="sxs-lookup"><span data-stu-id="123b7-236">This will display the client-side confirm dialog box (see Figure 16).</span></span>


<span data-ttu-id="123b7-237">[![Cooperativa de Quesos Las Cabras stellt zwei aktiven Produkte](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-237">[![Cooperativa de Quesos Las Cabras Supplies Two Active Products](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image42.png)</span></span>

<span data-ttu-id="123b7-238">**Abbildung 16**: Cooperativa de Quesos Las Cabras stellt zwei aktiven Produkte ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-238">**Figure 16**: Cooperativa de Quesos Las Cabras Supplies Two Active Products ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image44.png))</span></span>


<span data-ttu-id="123b7-239">Wenn Sie im Dialogfeld die clientseitige bestätigen klicken, der Übermittlung des Formulars wird fortgesetzt, einen Postback verursacht, in dem die FormView `ItemCommand` Ereignis wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="123b7-239">If you click OK in the client-side confirm dialog box, the form submission will proceed, causing a postback in which the FormView's `ItemCommand` event will fire.</span></span> <span data-ttu-id="123b7-240">Der Ereignishandler, die es erstellt wird dann ausgeführt, Aufrufen der `DiscontinueAllProductsForSupplier(supplierID)` -Methode und die Queso Cabrales Queso Manchego La Pastora Produkte und beenden.</span><span class="sxs-lookup"><span data-stu-id="123b7-240">The event handler we created will then execute, invoking the `DiscontinueAllProductsForSupplier(supplierID)` method and discontinuing both the Queso Cabrales and Queso Manchego La Pastora products.</span></span>

<span data-ttu-id="123b7-241">Wenn Sie die GridView Ansichtszustand deaktiviert haben, wird die GridView ist mit dem zugrunde liegenden Datenspeicher auf jedes Postback erneut gebunden wird und aus diesem Grund wird sofort aktualisiert, um widerzuspiegeln, dass diese beiden Produkte eingestellt werden (siehe Abbildung 17).</span><span class="sxs-lookup"><span data-stu-id="123b7-241">If you have disabled the GridView's view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect that these two products are now discontinued (see Figure 17).</span></span> <span data-ttu-id="123b7-242">Wenn jedoch Sie nicht in die GridView Ansichtszustand deaktiviert haben, müssen Sie manuell die Daten an die GridView zu binden, nach dieser Änderung.</span><span class="sxs-lookup"><span data-stu-id="123b7-242">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="123b7-243">Um dies zu erreichen, stellen Sie einfach einen Aufruf an der GridView `DataBind()` Methode sofort nach dem Aufrufen der `DiscontinueAllProductsForSupplier(supplierID)` Methode.</span><span class="sxs-lookup"><span data-stu-id="123b7-243">To accomplish this, simply make a call to the GridView's `DataBind()` method immediately after invoking the `DiscontinueAllProductsForSupplier(supplierID)` method.</span></span>


<span data-ttu-id="123b7-244">[![Nach dem Klicken auf das Beenden Sie die Schaltfläche "alle Produkte", werden die Lieferanten s entsprechend aktualisiert](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-244">[![After Clicking the Discontinue All Products Button, the Supplier s Products are Updated Accordingly](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image45.png)</span></span>

<span data-ttu-id="123b7-245">**Abbildung 17**: nach dem Klicken auf das Beenden Sie die Schaltfläche "alle Produkte" aus, den Lieferanten Produkte werden entsprechend aktualisiert ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image47.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-245">**Figure 17**: After Clicking the Discontinue All Products Button, the Supplier's Products are Updated Accordingly ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image47.png))</span></span>


## <a name="step-6-creating-an-updateproduct-overload-in-the-business-logic-layer-for-adjusting-a-products-price"></a><span data-ttu-id="123b7-246">Schritt 6: Erstellen eine Überladung UpdateProduct in der Geschäftslogikschicht zum Anpassen der Preis eines Produkts</span><span class="sxs-lookup"><span data-stu-id="123b7-246">Step 6: Creating an UpdateProduct Overload in the Business Logic Layer for Adjusting a Product's Price</span></span>

<span data-ttu-id="123b7-247">Wie müssen mit den beenden Sie die Schaltfläche "Alles Produkte" in der FormView zum Hinzufügen von Schaltflächen zum Erhöhen oder Verringern des Preis für ein Produkt in der GridView wir zunächst die entsprechenden Methoden der Datenzugriffsschicht und Business Logic Layer hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="123b7-247">Like with the Discontinue All Products Button in the FormView, in order to add buttons for increasing and decreasing the price for a product in the GridView we need to first add the appropriate Data Access Layer and Business Logic Layer methods.</span></span> <span data-ttu-id="123b7-248">Da wir bereits über eine Methode, die eine einzelnes Produktzeile in der DAL aktualisiert verfügen, können wir solche Funktionen bereitstellen, indem Sie erstellen eine neue Überladung für die `UpdateProduct` -Methode in der BLL.</span><span class="sxs-lookup"><span data-stu-id="123b7-248">Since we already have a method that updates a single product row in the DAL, we can provide such functionality by creating a new overload for the `UpdateProduct` method in the BLL.</span></span>

<span data-ttu-id="123b7-249">Unsere Vergangenheit `UpdateProduct` Überladungen in eine Kombination von Produkt Felder als skalaren Eingabewerten ausgeführt haben und dann nur die Felder für das angegebene Produkt aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="123b7-249">Our past `UpdateProduct` overloads have taken in some combination of product fields as scalar input values and have then updated just those fields for the specified product.</span></span> <span data-ttu-id="123b7-250">Für diese Überladung wir weichen geringfügig von dieser Standard und stattdessen übergeben Sie des Produkts `ProductID` sowie den Prozentsatz nach dem Anpassen der `UnitPrice` (im Gegensatz zu übergeben, in der neuen, angepasst `UnitPrice` selbst).</span><span class="sxs-lookup"><span data-stu-id="123b7-250">For this overload we'll vary slightly from this standard and instead pass in the product's `ProductID` and the percentage by which to adjust the `UnitPrice` (as opposed to passing in the new, adjusted `UnitPrice` itself).</span></span> <span data-ttu-id="123b7-251">Dieser Ansatz wird vereinfacht den Code, in der Klasse ASP.NET Code-Behind-Seite zu schreiben, da wir nicht, um zu bestimmen, des aktuellen Produkts kümmern müssen `UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="123b7-251">This approach will simplify the code we need to write in the ASP.NET page code-behind class, since we don't have to bother with determining the current product's `UnitPrice`.</span></span>

<span data-ttu-id="123b7-252">Die `UpdateProduct` überladen für dieses Lernprogramm unten gezeigt wird:</span><span class="sxs-lookup"><span data-stu-id="123b7-252">The `UpdateProduct` overload for this tutorial is shown below:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample8.cs)]

<span data-ttu-id="123b7-253">Diese Überladung ruft Informationen über das angegebene Produkt über der DAL `GetProductByProductID(productID)` Methode.</span><span class="sxs-lookup"><span data-stu-id="123b7-253">This overload retrieves information about the specified product through the DAL's `GetProductByProductID(productID)` method.</span></span> <span data-ttu-id="123b7-254">Es wird dann geprüft, ob des Produkts `UnitPrice` hat eine Datenbank `NULL` Wert.</span><span class="sxs-lookup"><span data-stu-id="123b7-254">It then checks to see whether the product's `UnitPrice` is assigned a database `NULL` value.</span></span> <span data-ttu-id="123b7-255">Wenn dies der Fall, kann der Preis bleibt unverändert.</span><span class="sxs-lookup"><span data-stu-id="123b7-255">If it is, the price is left unaltered.</span></span> <span data-ttu-id="123b7-256">Wenn allerdings es keine ist`NULL` `UnitPrice` Wert, der Methode aktualisiert des Produkts `UnitPrice` durch den angegebenen Prozentsatz (`unitPriceAdjustmentPercent`).</span><span class="sxs-lookup"><span data-stu-id="123b7-256">If, however, there is a non-`NULL` `UnitPrice` value, the method updates the product's `UnitPrice` by the specified percent (`unitPriceAdjustmentPercent`).</span></span>

## <a name="step-7-adding-the-increase-and-decrease-buttons-to-the-gridview"></a><span data-ttu-id="123b7-257">Schritt 7: Hinzufügen der erhöhen und die Verringerung der Schaltflächen an die GridView</span><span class="sxs-lookup"><span data-stu-id="123b7-257">Step 7: Adding the Increase and Decrease Buttons to the GridView</span></span>

<span data-ttu-id="123b7-258">Die GridView (und DetailsView) sowohl eine Auflistung von Feldern bestehen aus.</span><span class="sxs-lookup"><span data-stu-id="123b7-258">The GridView (and DetailsView) are both made up of a collection of fields.</span></span> <span data-ttu-id="123b7-259">Zusätzlich zur BoundFields, CheckBoxFields, und von TemplateFields schließt ASP.NET den ButtonField, die als eine Spalte mit einer Schaltfläche, LinkButton oder ImageButton für jede Zeile wie der Name schon sagt, rendert.</span><span class="sxs-lookup"><span data-stu-id="123b7-259">In addition to BoundFields, CheckBoxFields, and TemplateFields, ASP.NET includes the ButtonField, which, as its name implies, renders as a column with a Button, LinkButton, or ImageButton for each row.</span></span> <span data-ttu-id="123b7-260">Ähnlich wie die FormView auf *alle* innerhalb der GridView Pagingschaltflächen, bearbeiten oder löschen Schaltflächen Sortieren Schaltflächen und usw. einen Postback verursacht, und löst der GridView [ `RowCommand` Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowcommand.aspx).</span><span class="sxs-lookup"><span data-stu-id="123b7-260">Similar to the FormView, clicking *any* button within the GridView paging buttons, Edit or Delete buttons, sorting buttons, and so on causes a postback and raises the GridView's [`RowCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowcommand.aspx).</span></span>

<span data-ttu-id="123b7-261">Die ButtonField verfügt über eine `CommandName` -Eigenschaft, die auf jedem der zugehörigen Schaltflächen den angegebenen Wert weist `CommandName` Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="123b7-261">The ButtonField has a `CommandName` property that assigns the specified value to each of its Buttons `CommandName` properties.</span></span> <span data-ttu-id="123b7-262">Mit FormView, wie die `CommandName` Wert wird verwendet, durch die `RowCommand` -Ereignishandler, um zu bestimmen, welches Steuerelement die Schaltfläche geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="123b7-262">Like with the FormView, the `CommandName` value is used by the `RowCommand` event handler to determine which button was clicked.</span></span>

<span data-ttu-id="123b7-263">Fügen Sie zwei neue ButtonFields an die GridView, eine mit einem Schaltflächentext Preis + 10 % und der andere mit dem Text Preis-10 %.</span><span class="sxs-lookup"><span data-stu-id="123b7-263">Let's add two new ButtonFields to the GridView, one with a button text Price +10% and the other with the text Price -10%.</span></span> <span data-ttu-id="123b7-264">Um diese ButtonFields hinzuzufügen, klicken Sie auf den Link Bearbeiten von Spalten aus der GridView-Smarttag, wählen Sie den Feldtyp ButtonField aus der Liste in der oberen linken Ecke, und klicken Sie auf die Schaltfläche "hinzufügen".</span><span class="sxs-lookup"><span data-stu-id="123b7-264">To add these ButtonFields, click on the Edit Columns link from the GridView's smart tag, select the ButtonField field type from the list in the upper left and click the Add button.</span></span>


![Hinzufügen von zwei ButtonFields an die GridView](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image48.png)

<span data-ttu-id="123b7-266">**Abbildung 18**: Hinzufügen von zwei ButtonFields an die GridView</span><span class="sxs-lookup"><span data-stu-id="123b7-266">**Figure 18**: Add Two ButtonFields to the GridView</span></span>


<span data-ttu-id="123b7-267">Verschieben Sie zwei ButtonFields, so dass sie als die ersten beiden GridView-Felder angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="123b7-267">Move the two ButtonFields so that they appear as the first two GridView fields.</span></span> <span data-ttu-id="123b7-268">Legen Sie anschließend die `Text` Eigenschaften von diesen beiden ButtonFields zum Preis + 10 % und Preis-10 % und die `CommandName` IncreasePrice und DecreasePrice, Eigenschaften bzw.</span><span class="sxs-lookup"><span data-stu-id="123b7-268">Next, set the `Text` properties of these two ButtonFields to Price +10% and Price -10% and the `CommandName` properties to IncreasePrice and DecreasePrice, respectively.</span></span> <span data-ttu-id="123b7-269">Standardmäßig wird ein ButtonField die Spalte von Schaltflächen als LinkButtons gerendert.</span><span class="sxs-lookup"><span data-stu-id="123b7-269">By default, a ButtonField renders its column of buttons as LinkButtons.</span></span> <span data-ttu-id="123b7-270">Dies kann geändert werden, jedoch über die ButtonField [ `ButtonType` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx).</span><span class="sxs-lookup"><span data-stu-id="123b7-270">This can be changed, however, through the ButtonField's [`ButtonType` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx).</span></span> <span data-ttu-id="123b7-271">Wir haben diese zwei ButtonFields als reguläre Schaltflächen gerendert. Legen Sie deshalb die `ButtonType` Eigenschaft `Button`.</span><span class="sxs-lookup"><span data-stu-id="123b7-271">Let's have these two ButtonFields rendered as regular push buttons; therefore, set the `ButtonType` property to `Button`.</span></span> <span data-ttu-id="123b7-272">Abbildung 19 zeigt die Felder (Dialogfeld), nachdem diese Änderungen vorgenommen wurden; folgt, ist die GridView deklarativem Markup.</span><span class="sxs-lookup"><span data-stu-id="123b7-272">Figure 19 shows the Fields dialog box after these changes have been made; following that is the GridView's declarative markup.</span></span>


![Konfigurieren der ButtonFields Text, CommandName und ButtonType-Eigenschaften](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image49.png)

<span data-ttu-id="123b7-274">**Abbildung 19**: Konfigurieren der ButtonFields `Text`, `CommandName`, und `ButtonType` Eigenschaften</span><span class="sxs-lookup"><span data-stu-id="123b7-274">**Figure 19**: Configure the ButtonFields `Text`, `CommandName`, and `ButtonType` Properties</span></span>


[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample9.aspx)]

<span data-ttu-id="123b7-275">Mit diesen ButtonFields erstellt wird, ist der letzte Schritt erstellen Sie einen Ereignishandler für der GridView `RowCommand` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="123b7-275">With these ButtonFields created, the final step is to create an event handler for the GridView's `RowCommand` event.</span></span> <span data-ttu-id="123b7-276">Dieser Ereignishandler ausgelöst, da der Preis + 10 % oder %-Schaltflächen Kurs-10 wurden geklickt haben, muss, um zu bestimmen, die `ProductID` für die Zeile, deren Schaltfläche geklickt wurde, und rufen Sie dann, die `ProductsBLL` -Klasse `UpdateProduct` -Methode auf und übergibt den entsprechenden `UnitPrice` Prozentuale Anpassung zusammen mit den `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="123b7-276">This event handler, if fired because either the Price +10% or Price -10% buttons were clicked, needs to determine the `ProductID` for the row whose button was clicked and then invoke the `ProductsBLL` class's `UpdateProduct` method, passing in the appropriate `UnitPrice` percentage adjustment along with the `ProductID`.</span></span> <span data-ttu-id="123b7-277">Der folgende Code führt die folgenden Aufgaben:</span><span class="sxs-lookup"><span data-stu-id="123b7-277">The following code performs these tasks:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample10.cs)]

<span data-ttu-id="123b7-278">Um zu bestimmen, die `ProductID` für die Zeile, deren Preis + 10 % oder Preis-10 % Schaltfläche geklickt wurde, müssen wir der GridView zurate ziehen, um `DataKeys` Auflistung.</span><span class="sxs-lookup"><span data-stu-id="123b7-278">In order to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we need to consult the GridView's `DataKeys` collection.</span></span> <span data-ttu-id="123b7-279">Diese Auflistung enthält die Werte der Felder im angegebenen die `DataKeyNames` Eigenschaft für jede Zeile GridView.</span><span class="sxs-lookup"><span data-stu-id="123b7-279">This collection holds the values of the fields specified in the `DataKeyNames` property for each GridView row.</span></span> <span data-ttu-id="123b7-280">Seit der GridView `DataKeyNames` -Eigenschaft wurde auf "ProductID" von Visual Studio festgelegt, wenn das ObjectDataSource an die GridView gebunden `DataKeys(rowIndex).Value` bietet die `ProductID` für den angegebenen *RowIndex*.</span><span class="sxs-lookup"><span data-stu-id="123b7-280">Since the GridView's `DataKeyNames` property was set to ProductID by Visual Studio when binding the ObjectDataSource to the GridView, `DataKeys(rowIndex).Value` provides the `ProductID` for the specified *rowIndex*.</span></span>

<span data-ttu-id="123b7-281">Die ButtonField werden automatisch in die *RowIndex* der Zeile, deren geklickt wurde durch, die `e.CommandArgument` Parameter.</span><span class="sxs-lookup"><span data-stu-id="123b7-281">The ButtonField automatically passes in the *rowIndex* of the row whose button was clicked through the `e.CommandArgument` parameter.</span></span> <span data-ttu-id="123b7-282">Aus diesem Grund, um zu bestimmen, die `ProductID` für die Zeile, deren Preis + 10 % oder Preis-10 % Schaltfläche geklickt wurde, verwenden wir: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span><span class="sxs-lookup"><span data-stu-id="123b7-282">Therefore, to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we use: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span></span>

<span data-ttu-id="123b7-283">Als mit der Schaltfläche "alle Produkte eingestellt" Wenn Sie die GridView Ansichtszustand deaktiviert haben die GridView ist mit dem zugrunde liegenden Datenspeicher auf jedes Postback erneut gebunden wird und daher sofort entsprechend auf wird eine Preisänderung aktualisiert einer der Schaltflächen.</span><span class="sxs-lookup"><span data-stu-id="123b7-283">As with the Discontinue All Products button, if you have disabled the GridView's view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect a price change that occurs from clicking either of the buttons.</span></span> <span data-ttu-id="123b7-284">Wenn jedoch Sie nicht in die GridView Ansichtszustand deaktiviert haben, müssen Sie manuell die Daten an die GridView zu binden, nach dieser Änderung.</span><span class="sxs-lookup"><span data-stu-id="123b7-284">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="123b7-285">Um dies zu erreichen, stellen Sie einfach einen Aufruf an der GridView `DataBind()` Methode sofort nach dem Aufrufen der `UpdateProduct` Methode.</span><span class="sxs-lookup"><span data-stu-id="123b7-285">To accomplish this, simply make a call to the GridView's `DataBind()` method immediately after invoking the `UpdateProduct` method.</span></span>

<span data-ttu-id="123b7-286">Abbildung 20 zeigt die Seite beim Anzeigen der Produkte von OMA-Kelly Homestead bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="123b7-286">Figure 20 shows the page when viewing the products provided by Grandma Kelly's Homestead.</span></span> <span data-ttu-id="123b7-287">Abbildung 21 zeigt die Ergebnisse nach dem Preis + 10 % für OMA Boysenberry verteilt und die Schaltfläche "Preis-10 %" zweimal einmal für Northwoods Cranberry Besonderheiten von geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="123b7-287">Figure 21 shows the results after the Price +10% button has been clicked twice for Grandma's Boysenberry Spread and the Price -10% button once for Northwoods Cranberry Sauce.</span></span>


<span data-ttu-id="123b7-288">[![Die GridView enthält Preis + 10 % und Preis-10 % Schaltflächen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-288">[![The GridView Includes Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image50.png)</span></span>

<span data-ttu-id="123b7-289">**Abbildung 20**: der GridView umfasst Preis + 10 % und Preis-10 % Schaltflächen ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-289">**Figure 20**: The GridView Includes Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image52.png))</span></span>


<span data-ttu-id="123b7-290">[![Die Preise für das erste und dritte Produkt aktualisiert worden sind, über den Preis + 10 % und Preis-10 % Schaltflächen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image53.png)</span><span class="sxs-lookup"><span data-stu-id="123b7-290">[![The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image53.png)</span></span>

<span data-ttu-id="123b7-291">**Abbildung 21**: die Preise für das erste und dritte Produkt aktualisiert wurden über den Preis + 10 % und Preis-10 % Schaltflächen ([klicken Sie hier, um das Bild in voller Größe angezeigt](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image55.png))</span><span class="sxs-lookup"><span data-stu-id="123b7-291">**Figure 21**: The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image55.png))</span></span>


> [!NOTE]
> <span data-ttu-id="123b7-292">Die GridView (und DetailsView) können auch Schaltflächen, LinkButtons oder ImageButtons ihre von TemplateFields hinzugefügt haben.</span><span class="sxs-lookup"><span data-stu-id="123b7-292">The GridView (and DetailsView) can also have Buttons, LinkButtons, or ImageButtons added to their TemplateFields.</span></span> <span data-ttu-id="123b7-293">Wie Sie mit der BoundField diese Schaltflächen, die beim Klicken auf einen Postback nachdenken werden, durch das Auslösen der GridView `RowCommand` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="123b7-293">As with the BoundField, these Buttons, when clicked, will induce a postback, raising the GridView's `RowCommand` event.</span></span> <span data-ttu-id="123b7-294">Beim Hinzufügen von Schaltflächen in einem TemplateField jedoch der Schaltfläche `CommandArgument` wird nicht automatisch festgelegt, der Index der Zeile wie bei Verwendung von ButtonFields ist.</span><span class="sxs-lookup"><span data-stu-id="123b7-294">When adding buttons in a TemplateField, however, the Button's `CommandArgument` is not automatically set to the index of the row as it is when using ButtonFields.</span></span> <span data-ttu-id="123b7-295">Wenn Sie den Zeilenindex der Schaltfläche zu bestimmen, die innerhalb von per Mausklick müssen die `RowCommand` Ereignishandler, d. h. Sie müssen manuell festlegen, der Schaltfläche `CommandArgument` Eigenschaft in seiner deklarativen Syntax innerhalb der TemplateField Verwendung eines Codes:</span><span class="sxs-lookup"><span data-stu-id="123b7-295">If you need to determine the row index of the button that was clicked within the `RowCommand` event handler, you'll need to manually set the Button's `CommandArgument` property in its declarative syntax within the TemplateField, using code like:</span></span>  
> <span data-ttu-id="123b7-296">`<asp:Button runat="server" ... CommandArgument='<%# ((GridViewRow) Container).RowIndex %>'`</span><span class="sxs-lookup"><span data-stu-id="123b7-296">`<asp:Button runat="server" ... CommandArgument='<%# ((GridViewRow) Container).RowIndex %>'`.</span></span>


## <a name="summary"></a><span data-ttu-id="123b7-297">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="123b7-297">Summary</span></span>

<span data-ttu-id="123b7-298">Die Steuerelemente GridView, DetailsView und FormView können Schaltflächen, LinkButtons oder ImageButtons enthalten.</span><span class="sxs-lookup"><span data-stu-id="123b7-298">The GridView, DetailsView, and FormView controls all can include Buttons, LinkButtons, or ImageButtons.</span></span> <span data-ttu-id="123b7-299">Solche Schaltflächen, die beim Klicken auf einen Postback verursacht und löst die `ItemCommand` Ereignis in die FormView und DetailsView-Steuerelemente und die `RowCommand` Ereignis in die GridView.</span><span class="sxs-lookup"><span data-stu-id="123b7-299">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event in the FormView and DetailsView controls and the `RowCommand` event in the GridView.</span></span> <span data-ttu-id="123b7-300">Diese Web-Datensteuerelemente über integrierte Funktionalität behandelt allgemeine Befehle bezogenen Aktionen ausführen, z. B. löschen oder Bearbeiten von Datensätzen verfügen.</span><span class="sxs-lookup"><span data-stu-id="123b7-300">These data Web controls have built-in functionality to handle common command-related actions, such as deleting or editing records.</span></span> <span data-ttu-id="123b7-301">Wir können jedoch auch mit Schaltflächen, die beim Klicken auf, antwortet mit eigenen benutzerdefinierten Code ausführen.</span><span class="sxs-lookup"><span data-stu-id="123b7-301">However, we can also use buttons that, when clicked, respond with executing our own custom code.</span></span>

<span data-ttu-id="123b7-302">Um dies zu erreichen, müssen wir erstellen Sie einen Ereignishandler für das `ItemCommand` oder `RowCommand` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="123b7-302">To accomplish this, we need to create an event handler for the `ItemCommand` or `RowCommand` event.</span></span> <span data-ttu-id="123b7-303">In diesem Ereignishandler überprüfen wir zuerst die eingehende `CommandName` Wert zu bestimmen, welches Steuerelement die Schaltfläche geklickt wurde, und klicken Sie dann eine entsprechende Aktion.</span><span class="sxs-lookup"><span data-stu-id="123b7-303">In this event handler we first check the incoming `CommandName` value to determine which button was clicked and then take appropriate custom action.</span></span> <span data-ttu-id="123b7-304">In diesem Lernprogramm haben wir gesehen, wie Schaltflächen und ButtonFields, Beenden alle Produkte für einen angegebenen Lieferanten oder zum Vergrößern oder Verkleinern des Preis für ein bestimmtes Produkt um 10 %.</span><span class="sxs-lookup"><span data-stu-id="123b7-304">In this tutorial we saw how to use buttons and ButtonFields to discontinue all products for a specified supplier or to increase or decrease the price of a particular product by 10%.</span></span>

<span data-ttu-id="123b7-305">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="123b7-305">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="123b7-306">Informationen zum Autor</span><span class="sxs-lookup"><span data-stu-id="123b7-306">About the Author</span></span>

<span data-ttu-id="123b7-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor von sieben ASP/ASP.NET-Büchern und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), Microsoft Web-Technologien seit 1998 arbeitet.</span><span class="sxs-lookup"><span data-stu-id="123b7-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="123b7-308">Scott fungiert als ein unabhängiger Berater, Trainer und Writer.</span><span class="sxs-lookup"><span data-stu-id="123b7-308">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="123b7-309">Sein neueste Buch wird [ *Sams Schulen selbst ASP.NET 2.0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="123b7-309">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="123b7-310">Er die erreicht werden kann, zur [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) oder über seinen Blog die finden Sie unter [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="123b7-310">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="123b7-311">Nächste</span><span class="sxs-lookup"><span data-stu-id="123b7-311">Next</span></span>](adding-and-responding-to-buttons-to-a-gridview-vb.md)
