---
uid: mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application
title: "Erstellen eines Entity Framework-Datenmodells für eine ASP.NET MVC-Anwendung (1 von 10) | Microsoft Docs"
author: tdykstra
description: "Eine neuere Version dieser Reihe von Lernprogrammen ist verfügbar, für das Visual Studio 2013 und Entity Framework 6 mit MVC 5. Contoso University Beispiel Web Application de..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/30/2013
ms.topic: article
ms.assetid: 4ba029b6-ee7c-4e45-a0e7-b703c37e5d9a
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: c25ebf472df5dcbc664257cdf8678bfac535d846
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/10/2017
---
<a name="creating-an-entity-framework-data-model-for-an-aspnet-mvc-application-1-of-10"></a><span data-ttu-id="38fd7-104">Erstellen eines Entity Framework-Datenmodells für eine ASP.NET MVC-Anwendung (1 von 10)</span><span class="sxs-lookup"><span data-stu-id="38fd7-104">Creating an Entity Framework Data Model for an ASP.NET MVC Application (1 of 10)</span></span>
====================
<span data-ttu-id="38fd7-105">Durch [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="38fd7-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="38fd7-106">Herunterladen des abgeschlossenen Projekts</span><span class="sxs-lookup"><span data-stu-id="38fd7-106">Download Completed Project</span></span>](http://code.msdn.microsoft.com/Getting-Started-with-dd0e2ed8)

> > [!NOTE] 
> > 
> > <span data-ttu-id="38fd7-107">Ein [neuere Version dieser Reihe von Lernprogrammen](../../getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md) für Visual Studio 2013, Entity Framework 6 und MVC 5 verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="38fd7-107">A [newer version of this tutorial series](../../getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md) is available, for Visual Studio 2013, Entity Framework 6, and MVC 5.</span></span>
> 
> 
> <span data-ttu-id="38fd7-108">Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET MVC 4-Anwendungen, die mit dem Entity Framework 5 und Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="38fd7-108">The Contoso University sample web application demonstrates how to create ASP.NET MVC 4 applications using the Entity Framework 5 and Visual Studio 2012.</span></span> <span data-ttu-id="38fd7-109">Die beispielanwendung ist eine Website für eine fiktive Contoso-Universität.</span><span class="sxs-lookup"><span data-stu-id="38fd7-109">The sample application is a web site for a fictional Contoso University.</span></span> <span data-ttu-id="38fd7-110">Es umfasst Funktionen wie Student Zulassung, Kurs Erstellung und Instructor-Zuweisungen.</span><span class="sxs-lookup"><span data-stu-id="38fd7-110">It includes functionality such as student admission, course creation, and instructor assignments.</span></span> <span data-ttu-id="38fd7-111">Diese Reihe von Lernprogrammen wird erläutert, wie die Contoso University-beispielanwendung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="38fd7-111">This tutorial series explains how to build the Contoso University sample application.</span></span> <span data-ttu-id="38fd7-112">Sie können [herunterladen die fertigen Anwendung](https://code.msdn.microsoft.com/Getting-Started-with-dd0e2ed8).</span><span class="sxs-lookup"><span data-stu-id="38fd7-112">You can [download the completed application](https://code.msdn.microsoft.com/Getting-Started-with-dd0e2ed8).</span></span>
> 
> ## <a name="code-first"></a><span data-ttu-id="38fd7-113">Code First</span><span class="sxs-lookup"><span data-stu-id="38fd7-113">Code First</span></span>
> 
> <span data-ttu-id="38fd7-114">Es gibt drei Möglichkeiten, die Sie mit Daten im Entity Framework arbeiten können: *Database First*, *Model First*, und *Code First*.</span><span class="sxs-lookup"><span data-stu-id="38fd7-114">There are three ways you can work with data in the Entity Framework: *Database First*, *Model First*, and *Code First*.</span></span> <span data-ttu-id="38fd7-115">Dieses Lernprogramm ist für Code First.</span><span class="sxs-lookup"><span data-stu-id="38fd7-115">This tutorial is for Code First.</span></span> <span data-ttu-id="38fd7-116">Informationen zu den Unterschieden zwischen den Workflows und einer Anleitung zum Auswählen der besten für Ihr Szenario finden Sie unter [Entity Framework-Entwicklungsworkflows](https://msdn.microsoft.com/en-us/library/ms178359.aspx#dbfmfcf).</span><span class="sxs-lookup"><span data-stu-id="38fd7-116">For information about the differences between these workflows and guidance on how to choose the best one for your scenario, see [Entity Framework Development Workflows](https://msdn.microsoft.com/en-us/library/ms178359.aspx#dbfmfcf).</span></span>
> 
> ## <a name="mvc"></a><span data-ttu-id="38fd7-117">MVC</span><span class="sxs-lookup"><span data-stu-id="38fd7-117">MVC</span></span>
> 
> <span data-ttu-id="38fd7-118">Die beispielanwendung basiert auf [ASP.NET-MVC](../../../index.md).</span><span class="sxs-lookup"><span data-stu-id="38fd7-118">The sample application is built on [ASP.NET MVC](../../../index.md).</span></span> <span data-ttu-id="38fd7-119">Wenn Sie mit dem ASP.NET Web Forms-Modell arbeiten möchten, finden Sie unter der [Modell binden und Web Forms](../../../../web-forms/overview/presenting-and-managing-data/model-binding/retrieving-data.md) Reihe von Lernprogrammen und [ASP.NET Data Access Content Map](../../../../whitepapers/aspnet-data-access-content-map.md).</span><span class="sxs-lookup"><span data-stu-id="38fd7-119">If you prefer to work with the ASP.NET Web Forms model, see the [Model Binding and Web Forms](../../../../web-forms/overview/presenting-and-managing-data/model-binding/retrieving-data.md) tutorial series and [ASP.NET Data Access Content Map](../../../../whitepapers/aspnet-data-access-content-map.md).</span></span>
> 
> ## <a name="software-versions"></a><span data-ttu-id="38fd7-120">Versionen der Software</span><span class="sxs-lookup"><span data-stu-id="38fd7-120">Software versions</span></span>
> 
> | <span data-ttu-id="38fd7-121">**In diesem Lernprogramm gezeigt**</span><span class="sxs-lookup"><span data-stu-id="38fd7-121">**Shown in the tutorial**</span></span> | <span data-ttu-id="38fd7-122">**Funktioniert auch mit**</span><span class="sxs-lookup"><span data-stu-id="38fd7-122">**Also works with**</span></span> |
> | --- | --- |
> | <span data-ttu-id="38fd7-123">Windows 8</span><span class="sxs-lookup"><span data-stu-id="38fd7-123">Windows 8</span></span> | <span data-ttu-id="38fd7-124">Windows 7</span><span class="sxs-lookup"><span data-stu-id="38fd7-124">Windows 7</span></span> |
> | <span data-ttu-id="38fd7-125">Visual Studio 2012</span><span class="sxs-lookup"><span data-stu-id="38fd7-125">Visual Studio 2012</span></span> | <span data-ttu-id="38fd7-126">Visual Studio 2012 Express für Web.</span><span class="sxs-lookup"><span data-stu-id="38fd7-126">Visual Studio 2012 Express for Web.</span></span> <span data-ttu-id="38fd7-127">Dies wird automatisch vom Windows Azure SDK installiert, wenn Sie Visual Studio 2012 oder Visual Studio 2012 Express für Web noch nicht haben.</span><span class="sxs-lookup"><span data-stu-id="38fd7-127">This is automatically installed by the Windows Azure SDK if you don't already have VS 2012 or VS 2012 Express for Web.</span></span> <span data-ttu-id="38fd7-128">Visual Studio 2013 sollten arbeiten, aber im Lernprogramm wurde nicht mit getestet, und einige Menüs und Dialogfelder unterscheiden sich.</span><span class="sxs-lookup"><span data-stu-id="38fd7-128">Visual Studio 2013 should work, but the tutorial has not been tested with it, and some menu selections and dialog boxes are different.</span></span> <span data-ttu-id="38fd7-129">Die [VS 2013-Version des Windows Azure SDK](https://go.microsoft.com/fwlink/p/?linkid=323510) für Windows Azure-Bereitstellung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="38fd7-129">The [VS 2013 version of the Windows Azure SDK](https://go.microsoft.com/fwlink/p/?linkid=323510) is required for Windows Azure deployment.</span></span> |
> | <span data-ttu-id="38fd7-130">.NET 4.5</span><span class="sxs-lookup"><span data-stu-id="38fd7-130">.NET 4.5</span></span> | <span data-ttu-id="38fd7-131">Die meisten Funktionen gezeigt funktioniert in .NET 4, aber einige wird nicht.</span><span class="sxs-lookup"><span data-stu-id="38fd7-131">Most of the features shown will work in .NET 4, but some won't.</span></span> <span data-ttu-id="38fd7-132">Beispielsweise erfordert die Enum-Unterstützung in EF .NET 4.5.</span><span class="sxs-lookup"><span data-stu-id="38fd7-132">For example, enum support in EF requires .NET 4.5.</span></span> |
> | <span data-ttu-id="38fd7-133">Entity Framework 5</span><span class="sxs-lookup"><span data-stu-id="38fd7-133">Entity Framework 5</span></span> |  |
> | [<span data-ttu-id="38fd7-134">Windows Azure SDK 2.1</span><span class="sxs-lookup"><span data-stu-id="38fd7-134">Windows Azure SDK 2.1</span></span>](https://go.microsoft.com/fwlink/p/?linkid=323511) | <span data-ttu-id="38fd7-135">Wenn Sie die Windows Azure-Bereitstellungsschritte überspringen, benötigen Sie nicht das SDK.</span><span class="sxs-lookup"><span data-stu-id="38fd7-135">If you skip the Windows Azure deployment steps, you don't need the SDK.</span></span> <span data-ttu-id="38fd7-136">Wenn eine neue Version des SDK veröffentlicht wird, wird der Link die neuere Version installiert.</span><span class="sxs-lookup"><span data-stu-id="38fd7-136">When a new version of the SDK is released, the link will install the newer version.</span></span> <span data-ttu-id="38fd7-137">In diesem Fall müssen Sie möglicherweise einige der Features für die neue Benutzeroberfläche und Anweisungen anpassen.</span><span class="sxs-lookup"><span data-stu-id="38fd7-137">In that case, you might have to adapt some of the instructions to new UI and features.</span></span> |
> 
> ## <a name="questions"></a><span data-ttu-id="38fd7-138">Fragen</span><span class="sxs-lookup"><span data-stu-id="38fd7-138">Questions</span></span>
> 
> <span data-ttu-id="38fd7-139">Wenn Sie Fragen, die nicht direkt mit dem Lernprogramm verknüpft sind haben, bereitstellen können, die [ASP.NET Entity Framework-Forum](https://forums.asp.net/1227.aspx), [Entity Framework und LINQ to Entities-Forum](https://social.msdn.microsoft.com/forums/en-US/adodotnetentityframework/threads/), oder [ StackOverflow.com](http://stackoverflow.com/).</span><span class="sxs-lookup"><span data-stu-id="38fd7-139">If you have questions that are not directly related to the tutorial, you can post them to the [ASP.NET Entity Framework forum](https://forums.asp.net/1227.aspx), the [Entity Framework and LINQ to Entities forum](https://social.msdn.microsoft.com/forums/en-US/adodotnetentityframework/threads/), or [StackOverflow.com](http://stackoverflow.com/).</span></span>
> 
> ## <a name="acknowledgments"></a><span data-ttu-id="38fd7-140">Bestätigungen</span><span class="sxs-lookup"><span data-stu-id="38fd7-140">Acknowledgments</span></span>
> 
> <span data-ttu-id="38fd7-141">Finden Sie im letzten Lernprogramm in der Reihe für [Bestätigungen und einen Hinweis zu VB](advanced-entity-framework-scenarios-for-an-mvc-web-application.md#acknowledgments).</span><span class="sxs-lookup"><span data-stu-id="38fd7-141">See the last tutorial in the series for [acknowledgments and a note about VB](advanced-entity-framework-scenarios-for-an-mvc-web-application.md#acknowledgments).</span></span>
> 
> ## <a name="original-version-of-the-tutorial"></a><span data-ttu-id="38fd7-142">Ursprüngliche Version des Lernprogramms</span><span class="sxs-lookup"><span data-stu-id="38fd7-142">Original version of the tutorial</span></span>
> 
> <span data-ttu-id="38fd7-143">Die ursprüngliche Version des Lernprogramms finden Sie in der [der EF-4.1 / MVC 3-e-Book](https://social.technet.microsoft.com/wiki/contents/articles/11608.e-book-gallery-for-microsoft-technologies.aspx#GettingStartedwiththeEntityFramework4.1usingASP.NETMVC).</span><span class="sxs-lookup"><span data-stu-id="38fd7-143">The original version of the tutorial is available in the [the EF 4.1 / MVC 3 e-book](https://social.technet.microsoft.com/wiki/contents/articles/11608.e-book-gallery-for-microsoft-technologies.aspx#GettingStartedwiththeEntityFramework4.1usingASP.NETMVC).</span></span>


## <a name="the-contoso-university-web-application"></a><span data-ttu-id="38fd7-144">Die Contoso-University-Webanwendung</span><span class="sxs-lookup"><span data-stu-id="38fd7-144">The Contoso University Web Application</span></span>

<span data-ttu-id="38fd7-145">Die Anwendung, die Sie in diesen Lernprogrammen erstellen werden müssen ist eine einfache University-Website.</span><span class="sxs-lookup"><span data-stu-id="38fd7-145">The application you'll be building in these tutorials is a simple university web site.</span></span>

<span data-ttu-id="38fd7-146">Benutzer können anzeigen und Studenten, Kurs und Instructor-Informationen aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="38fd7-146">Users can view and update student, course, and instructor information.</span></span> <span data-ttu-id="38fd7-147">Hier sind einige der Bildschirme, die Sie erstellen müssen.</span><span class="sxs-lookup"><span data-stu-id="38fd7-147">Here are a few of the screens you'll create.</span></span>

![Students_Index_page](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image1.png)

![](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image2.png)

<span data-ttu-id="38fd7-149">Den Stil der Benutzeroberfläche von diesem Standort wurde in der Nähe was von den integrierten Vorlagen generiert wird beibehalten, damit das Lernprogramm in erster Linie für die Verwendung von Entity Framework konzentrieren kann.</span><span class="sxs-lookup"><span data-stu-id="38fd7-149">The UI style of this site has been kept close to what's generated by the built-in templates, so that the tutorial can focus mainly on how to use the Entity Framework.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="38fd7-150">Erforderliche Komponenten</span><span class="sxs-lookup"><span data-stu-id="38fd7-150">Prerequisites</span></span>

<span data-ttu-id="38fd7-151">Die Richtungen und Screenshots in diesem Lernprogramm wird davon ausgegangen, dass die Verwendung von [Visual Studio 2012](https://www.microsoft.com/visualstudio/eng/downloads) oder [zuerst Visual Studio 2012 Express für Web](https://go.microsoft.com/fwlink/?LinkID=275131), mit der neuesten Updates und Azure SDK für .NET ab Juli, installiert 2013.</span><span class="sxs-lookup"><span data-stu-id="38fd7-151">The directions and screen shots in this tutorial assume that you're using [Visual Studio 2012](https://www.microsoft.com/visualstudio/eng/downloads) or [Visual Studio 2012 Express for Web](https://go.microsoft.com/fwlink/?LinkID=275131), with the latest update and Azure SDK for .NET installed as of July, 2013.</span></span> <span data-ttu-id="38fd7-152">Sie können all dies mit dem folgenden Link abrufen:</span><span class="sxs-lookup"><span data-stu-id="38fd7-152">You can get all of this with the following link:</span></span>

[<span data-ttu-id="38fd7-153">Azure SDK für .NET (Visual Studio 2012)</span><span class="sxs-lookup"><span data-stu-id="38fd7-153">Azure SDK for .NET (Visual Studio 2012)</span></span>](https://go.microsoft.com/fwlink/?LinkId=254364)

<span data-ttu-id="38fd7-154">Wenn Sie Visual Studio installiert haben, wird die oben genannten Link fehlenden Komponenten installiert.</span><span class="sxs-lookup"><span data-stu-id="38fd7-154">If you have Visual Studio installed, the link above will install any missing components.</span></span> <span data-ttu-id="38fd7-155">Wenn Sie Visual Studio nicht haben, wird der Link zuerst Visual Studio 2012 Express für Web installieren.</span><span class="sxs-lookup"><span data-stu-id="38fd7-155">If you don't have Visual Studio, the link will install Visual Studio 2012 Express for Web.</span></span> <span data-ttu-id="38fd7-156">Sie können Visual Studio 2013 verwenden, die einige der erforderlichen Vorgehensweisen und Bildschirme wird unterscheiden sich jedoch.</span><span class="sxs-lookup"><span data-stu-id="38fd7-156">You can use Visual Studio 2013, but some of the required procedures and screens will differ.</span></span>

## <a name="create-an-mvc-web-application"></a><span data-ttu-id="38fd7-157">Erstellen einer MVC-Webanwendung</span><span class="sxs-lookup"><span data-stu-id="38fd7-157">Create an MVC Web Application</span></span>

<span data-ttu-id="38fd7-158">Öffnen Sie Visual Studio und erstellen Sie ein neues c#-Projekt, mit dem Namen "ContosoUniversity" mit der **ASP.NET MVC 4-Webanwendung** Vorlage.</span><span class="sxs-lookup"><span data-stu-id="38fd7-158">Open Visual Studio and create a new C# project named "ContosoUniversity" using the **ASP.NET MVC 4 Web Application** template.</span></span> <span data-ttu-id="38fd7-159">Stellen Sie sicher, dass Sie als Ziel **.NET Framework 4.5** (Verwendung müssen [ `enum` Eigenschaften](https://msdn.microsoft.com/en-us/data/hh859576.aspx), und dies erfordert .NET 4.5).</span><span class="sxs-lookup"><span data-stu-id="38fd7-159">Make sure you target **.NET Framework 4.5** (you'll be using [`enum` properties](https://msdn.microsoft.com/en-us/data/hh859576.aspx), and that requires .NET 4.5).</span></span>

![New_project_dialog_box](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image3.png)

<span data-ttu-id="38fd7-161">In der **neues ASP.NET MVC 4-Projekt** aktivieren Sie im Dialogfeld die **Internetanwendung** Vorlage.</span><span class="sxs-lookup"><span data-stu-id="38fd7-161">In the **New ASP.NET MVC 4 Project** dialog box select the **Internet Application** template.</span></span>

<span data-ttu-id="38fd7-162">Lassen Sie die **Razor** anzeigen Modul ausgewählt, und lassen Sie die **ein Komponententestprojekt erstellen** Kontrollkästchen deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="38fd7-162">Leave the **Razor** view engine selected, and leave the **Create a unit test project** check box cleared.</span></span>

<span data-ttu-id="38fd7-163">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="38fd7-163">Click **OK**.</span></span>

![Project_template_options](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image4.png)

## <a name="set-up-the-site-style"></a><span data-ttu-id="38fd7-165">Richten Sie den Website-Stil</span><span class="sxs-lookup"><span data-stu-id="38fd7-165">Set Up the Site Style</span></span>

<span data-ttu-id="38fd7-166">Einige einfache Änderungen werden das Menü "Vorschauwebsite", die Layout und die Startseite einrichten.</span><span class="sxs-lookup"><span data-stu-id="38fd7-166">A few simple changes will set up the site menu, layout, and home page.</span></span>

<span data-ttu-id="38fd7-167">Open *Views\Shared\\_Layout.cshtml*, und Ersetzen Sie den Inhalt der Datei durch den folgenden Code.</span><span class="sxs-lookup"><span data-stu-id="38fd7-167">Open *Views\Shared\\_Layout.cshtml*, and replace the contents of the file with the following code.</span></span> <span data-ttu-id="38fd7-168">Die Änderungen werden hervorgehoben.</span><span class="sxs-lookup"><span data-stu-id="38fd7-168">The changes are highlighted.</span></span>

[!code-cshtml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample1.cshtml?highlight=5,15,25-28,43)]

<span data-ttu-id="38fd7-169">Dieser Code macht die folgenden Änderungen:</span><span class="sxs-lookup"><span data-stu-id="38fd7-169">This code makes the following changes:</span></span>

- <span data-ttu-id="38fd7-170">Die für Vorlageninstanzen von "Meine ASP.NET MVC-Anwendung" und "Ihr Logo hier einfügen" ersetzt durch "Contoso University".</span><span class="sxs-lookup"><span data-stu-id="38fd7-170">Replaces the template instances of "My ASP.NET MVC Application" and "your logo here" with "Contoso University".</span></span>
- <span data-ttu-id="38fd7-171">Fügt mehrere Aktionslinks, die später in diesem Lernprogramm verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="38fd7-171">Adds several action links that will be used later in the tutorial.</span></span>

<span data-ttu-id="38fd7-172">In *Views\Home\Index.cshtml*, ersetzen Sie den Inhalt der Datei mit den folgenden Code hinzu, die Vorlage Absätze zu ASP.NET und MVC zu vermeiden:</span><span class="sxs-lookup"><span data-stu-id="38fd7-172">In *Views\Home\Index.cshtml*, replace the contents of the file with the following code to eliminate the template paragraphs about ASP.NET and MVC:</span></span>

[!code-cshtml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample2.cshtml)]

<span data-ttu-id="38fd7-173">In *Controllers\HomeController. cs*, ändern Sie den Wert für `ViewBag.Message` in die `Index` Aktionsmethode auf "Welcome to Contoso University!", wie im folgenden Beispiel gezeigt:</span><span class="sxs-lookup"><span data-stu-id="38fd7-173">In *Controllers\HomeController.cs*, change the value for `ViewBag.Message` in the `Index` Action method to "Welcome to Contoso University!", as shown in the following example:</span></span>

[!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample3.cs?highlight=3)]

<span data-ttu-id="38fd7-174">Drücken Sie STRG + F5, um die Website ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="38fd7-174">Press CTRL+F5 to run the site.</span></span> <span data-ttu-id="38fd7-175">Sie finden Sie auf der Startseite mit im Hauptmenü.</span><span class="sxs-lookup"><span data-stu-id="38fd7-175">You see the home page with the main menu.</span></span>

![Contoso_University_home_page](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image5.png)

## <a name="create-the-data-model"></a><span data-ttu-id="38fd7-177">Erstellen des Datenmodells</span><span class="sxs-lookup"><span data-stu-id="38fd7-177">Create the Data Model</span></span>

<span data-ttu-id="38fd7-178">Als Nächstes erstellen Sie für die Anwendung von Contoso University Entitätsklassen.</span><span class="sxs-lookup"><span data-stu-id="38fd7-178">Next you'll create entity classes for the Contoso University application.</span></span> <span data-ttu-id="38fd7-179">Beginnen Sie mit den folgenden drei Entitäten:</span><span class="sxs-lookup"><span data-stu-id="38fd7-179">You'll start with the following three entities:</span></span>

![Class_diagram](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image6.png)

<span data-ttu-id="38fd7-181">Es wird eine 1: n-Beziehung zwischen `Student` und `Enrollment` Entitäten, und es wird eine 1: n-Beziehung zwischen `Course` und `Enrollment` Entitäten.</span><span class="sxs-lookup"><span data-stu-id="38fd7-181">There's a one-to-many relationship between `Student` and `Enrollment` entities, and there's a one-to-many relationship between `Course` and `Enrollment` entities.</span></span> <span data-ttu-id="38fd7-182">Das heißt, eine Student kann in einer beliebigen Anzahl von Kursen registriert sein, und ein Kurs kann eine beliebige Anzahl der Schüler in es registriert haben.</span><span class="sxs-lookup"><span data-stu-id="38fd7-182">In other words, a student can be enrolled in any number of courses, and a course can have any number of students enrolled in it.</span></span>

<span data-ttu-id="38fd7-183">In den folgenden Abschnitten erstellen Sie eine Klasse für jede dieser Entitäten.</span><span class="sxs-lookup"><span data-stu-id="38fd7-183">In the following sections you'll create a class for each one of these entities.</span></span>

> [!NOTE]
> <span data-ttu-id="38fd7-184">Wenn Sie versuchen, das Projekt kompiliert werden, bevor Sie alle diese Entitätsklassen erstellt haben, erhalten Sie Compiler-Fehler.</span><span class="sxs-lookup"><span data-stu-id="38fd7-184">If you try to compile the project before you finish creating all of these entity classes, you'll get compiler errors.</span></span>


### <a name="the-student-entity"></a><span data-ttu-id="38fd7-185">Die Student-Entität</span><span class="sxs-lookup"><span data-stu-id="38fd7-185">The Student Entity</span></span>

![Student_entity](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image7.png)

<span data-ttu-id="38fd7-187">In der *Modelle* Ordner erstellen *Student.cs* und Ersetzen Sie den vorhandenen Code durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="38fd7-187">In the *Models* folder, create *Student.cs* and replace the existing code with the following code:</span></span>

[!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample4.cs)]

<span data-ttu-id="38fd7-188">Die `StudentID` Eigenschaft werden die Primärschlüsselspalte der Datenbanktabelle, die diese Klasse entspricht.</span><span class="sxs-lookup"><span data-stu-id="38fd7-188">The `StudentID` property will become the primary key column of the database table that corresponds to this class.</span></span> <span data-ttu-id="38fd7-189">Wird standardmäßig das Entity Framework interpretiert eine Eigenschaft mit dem Namen `ID` oder *Classname* `ID` als Primärschlüssel.</span><span class="sxs-lookup"><span data-stu-id="38fd7-189">By default, the Entity Framework interprets a property that's named `ID` or *classname* `ID` as the primary key.</span></span>

<span data-ttu-id="38fd7-190">Die `Enrollments` Eigenschaft ist ein *Navigationseigenschaft*.</span><span class="sxs-lookup"><span data-stu-id="38fd7-190">The `Enrollments` property is a *navigation property*.</span></span> <span data-ttu-id="38fd7-191">Navigationseigenschaften halten andere Entitäten, die mit dieser Entität verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="38fd7-191">Navigation properties hold other entities that are related to this entity.</span></span> <span data-ttu-id="38fd7-192">In diesem Fall die `Enrollments` Eigenschaft eine `Student` Entität enthält alle der `Enrollment` , die verbundenen, Entitäten `Student` Entität.</span><span class="sxs-lookup"><span data-stu-id="38fd7-192">In this case, the `Enrollments` property of a `Student` entity will hold all of the `Enrollment` entities that are related to that `Student` entity.</span></span> <span data-ttu-id="38fd7-193">In anderen Worten: Wenn eine angegebene `Student` Zeile in der Datenbank verfügt über zwei im Zusammenhang `Enrollment` Zeilen (Zeilen mit Primärschlüssel, Student Wert in ihre `StudentID` foreign Key-Spalte), die `Student` Entität `Enrollments` Navigationseigenschaft enthält diese zwei `Enrollment` Entitäten.</span><span class="sxs-lookup"><span data-stu-id="38fd7-193">In other words, if a given `Student` row in the database has two related `Enrollment` rows (rows that contain that student's primary key value in their `StudentID` foreign key column), that `Student` entity's `Enrollments` navigation property will contain those two `Enrollment` entities.</span></span>

<span data-ttu-id="38fd7-194">Navigationseigenschaften werden in der Regel als definiert `virtual` , damit sie bestimmte Entity Framework-Funktionen wie z. B. nutzen können *verzögertes Laden*.</span><span class="sxs-lookup"><span data-stu-id="38fd7-194">Navigation properties are typically defined as `virtual` so that they can take advantage of certain Entity Framework functionality such as *lazy loading*.</span></span> <span data-ttu-id="38fd7-195">(Lazy Loading werden erläutert werden weiter unten in der [das Lesen verknüpfter Daten](reading-related-data-with-the-entity-framework-in-an-asp-net-mvc-application.md) Tutorial weiter unten in dieser Serie.</span><span class="sxs-lookup"><span data-stu-id="38fd7-195">(Lazy loading will be explained later, in the [Reading Related Data](reading-related-data-with-the-entity-framework-in-an-asp-net-mvc-application.md) tutorial later in this series.</span></span>

<span data-ttu-id="38fd7-196">Wenn eine Navigationseigenschaft über mehrere Entitäten (wie in der m: n- oder 1: n-Beziehungen) enthalten kann, muss dessen Typ eine Liste, in dem Einträge können hinzugefügt, gelöscht, und aktualisiert, z. B. `ICollection`.</span><span class="sxs-lookup"><span data-stu-id="38fd7-196">If a navigation property can hold multiple entities (as in many-to-many or one-to-many relationships), its type must be a list in which entries can be added, deleted, and updated, such as `ICollection`.</span></span>

### <a name="the-enrollment-entity"></a><span data-ttu-id="38fd7-197">Die Registrierung-Entität</span><span class="sxs-lookup"><span data-stu-id="38fd7-197">The Enrollment Entity</span></span>

![Enrollment_entity](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image8.png)

<span data-ttu-id="38fd7-199">In der *Modelle* Ordner erstellen *Enrollment.cs* und Ersetzen Sie den vorhandenen Code durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="38fd7-199">In the *Models* folder, create *Enrollment.cs* and replace the existing code with the following code:</span></span>

[!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample5.cs)]

<span data-ttu-id="38fd7-200">Die Dienstqualität-Eigenschaft ist ein [Enum](https://msdn.microsoft.com/en-us/data/hh859576.aspx).</span><span class="sxs-lookup"><span data-stu-id="38fd7-200">The Grade property is an [enum](https://msdn.microsoft.com/en-us/data/hh859576.aspx).</span></span> <span data-ttu-id="38fd7-201">Das Fragezeichen nach der `Grade` Typdeklaration gibt an, dass die `Grade` Eigenschaft ist [NULL-Werte zulassen](https://msdn.microsoft.com/en-us/library/2cf62fcy.aspx).</span><span class="sxs-lookup"><span data-stu-id="38fd7-201">The question mark after the `Grade` type declaration indicates that the `Grade` property is [nullable](https://msdn.microsoft.com/en-us/library/2cf62fcy.aspx).</span></span> <span data-ttu-id="38fd7-202">Eine Klasse, die null ist unterscheidet sich von einer NULL Grade – Null bedeutet, dass eine Klasse ist nicht bekannt oder noch nicht noch zugewiesen wurde.</span><span class="sxs-lookup"><span data-stu-id="38fd7-202">A grade that's null is different from a zero grade — null means a grade isn't known or hasn't been assigned yet.</span></span>

<span data-ttu-id="38fd7-203">Die `StudentID` Eigenschaft ist ein Fremdschlüssel, und die entsprechende Navigationseigenschaft ist `Student`.</span><span class="sxs-lookup"><span data-stu-id="38fd7-203">The `StudentID` property is a foreign key, and the corresponding navigation property is `Student`.</span></span> <span data-ttu-id="38fd7-204">Ein `Enrollment` Entität bezieht sich auf eine `Student` Entität, damit die Eigenschaft nur ein einzelnes enthalten darf `Student` Entität (im Gegensatz zu den `Student.Enrollments` Navigationseigenschaft gelernt früher mehrere halten `Enrollment` Entitäten).</span><span class="sxs-lookup"><span data-stu-id="38fd7-204">An `Enrollment` entity is associated with one `Student` entity, so the property can only hold a single `Student` entity (unlike the `Student.Enrollments` navigation property you saw earlier, which can hold multiple `Enrollment` entities).</span></span>

<span data-ttu-id="38fd7-205">Die `CourseID` Eigenschaft ist ein Fremdschlüssel, und die entsprechende Navigationseigenschaft ist `Course`.</span><span class="sxs-lookup"><span data-stu-id="38fd7-205">The `CourseID` property is a foreign key, and the corresponding navigation property is `Course`.</span></span> <span data-ttu-id="38fd7-206">Ein `Enrollment` Entität ist mit einem zugeordneten `Course` Entität.</span><span class="sxs-lookup"><span data-stu-id="38fd7-206">An `Enrollment` entity is associated with one `Course` entity.</span></span>

### <a name="the-course-entity"></a><span data-ttu-id="38fd7-207">Die Kurs-Entität</span><span class="sxs-lookup"><span data-stu-id="38fd7-207">The Course Entity</span></span>

![Course_entity](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image9.png)

<span data-ttu-id="38fd7-209">In der *Modelle* Ordner erstellen *Course.cs*, ersetzen den vorhandenen Code durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="38fd7-209">In the *Models* folder, create *Course.cs*, replacing the existing code with the following code:</span></span>

[!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample6.cs)]

<span data-ttu-id="38fd7-210">Die `Enrollments` Eigenschaft ist eine Navigationseigenschaft.</span><span class="sxs-lookup"><span data-stu-id="38fd7-210">The `Enrollments` property is a navigation property.</span></span> <span data-ttu-id="38fd7-211">Ein `Course` Entität kann sich auf eine beliebige Anzahl von beziehen `Enrollment` Entitäten.</span><span class="sxs-lookup"><span data-stu-id="38fd7-211">A `Course` entity can be related to any number of `Enrollment` entities.</span></span>

<span data-ttu-id="38fd7-212">Z. B. Weitere Informationen zu den [[DatabaseGenerated](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.databasegeneratedattribute(v=vs.110).aspx)([DatabaseGeneratedOption](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.databasegeneratedoption(v=vs.95).aspx). Keine)]-Attribut in den nächsten Lernprogrammen.</span><span class="sxs-lookup"><span data-stu-id="38fd7-212">We'll say more about the [[DatabaseGenerated](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.databasegeneratedattribute(v=vs.110).aspx)([DatabaseGeneratedOption](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.databasegeneratedoption(v=vs.95).aspx).None)] attribute in the next tutorial.</span></span> <span data-ttu-id="38fd7-213">Im Grunde, Sie können dieses Attribut geben Sie den primären Schlüssel für den Kurs, anstatt die Datenbank, die sie generieren.</span><span class="sxs-lookup"><span data-stu-id="38fd7-213">Basically, this attribute lets you enter the primary key for the course rather than having the database generate it.</span></span>

## <a name="create-the-database-context"></a><span data-ttu-id="38fd7-214">Erstellen Sie den Datenbankkontext</span><span class="sxs-lookup"><span data-stu-id="38fd7-214">Create the Database Context</span></span>

<span data-ttu-id="38fd7-215">Ist die Hauptklasse, das Entity Framework-Funktionen für einen angegebenen Datenmodell koordiniert die *Datenbankkontext* Klasse.</span><span class="sxs-lookup"><span data-stu-id="38fd7-215">The main class that coordinates Entity Framework functionality for a given data model is the *database context* class.</span></span> <span data-ttu-id="38fd7-216">Erstellen Sie diese Klasse durch Ableiten von der [System.Data.Entity.DbContext](https://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext(v=VS.103).aspx) Klasse.</span><span class="sxs-lookup"><span data-stu-id="38fd7-216">You create this class by deriving from the [System.Data.Entity.DbContext](https://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext(v=VS.103).aspx) class.</span></span> <span data-ttu-id="38fd7-217">Im Code Geben Sie an, welche Entitäten im Datenmodell enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="38fd7-217">In your code you specify which entities are included in the data model.</span></span> <span data-ttu-id="38fd7-218">Sie können auch bestimmte Entity Framework-Verhalten anpassen.</span><span class="sxs-lookup"><span data-stu-id="38fd7-218">You can also customize certain Entity Framework behavior.</span></span> <span data-ttu-id="38fd7-219">In diesem Projekt die Klasse heißt `SchoolContext`.</span><span class="sxs-lookup"><span data-stu-id="38fd7-219">In this project, the class is named `SchoolContext`.</span></span>

<span data-ttu-id="38fd7-220">Erstellen Sie einen Ordner mit dem Namen *DAL* (für die Datenzugriffsebene).</span><span class="sxs-lookup"><span data-stu-id="38fd7-220">Create a folder named *DAL* (for Data Access Layer).</span></span> <span data-ttu-id="38fd7-221">In diesem Ordner erstellen Sie eine neue Klassendatei mit dem Namen *SchoolContext.cs*, und Ersetzen Sie den vorhandenen Code durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="38fd7-221">In that folder create a new class file named *SchoolContext.cs*, and replace the existing code with the following code:</span></span>

[!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample7.cs)]

<span data-ttu-id="38fd7-222">Dieser Code erstellt ein [DbSet](https://msdn.microsoft.com/en-us/library/system.data.entity.dbset(v=VS.103).aspx) Eigenschaft für jede Entitätenmenge.</span><span class="sxs-lookup"><span data-stu-id="38fd7-222">This code creates a [DbSet](https://msdn.microsoft.com/en-us/library/system.data.entity.dbset(v=VS.103).aspx) property for each entity set.</span></span> <span data-ttu-id="38fd7-223">In der Terminologie von Entity Framework ein *Entitätenmenge* entspricht normalerweise einer Datenbanktabelle und ein *Entität* entspricht einer Zeile in der Tabelle.</span><span class="sxs-lookup"><span data-stu-id="38fd7-223">In Entity Framework terminology, an *entity set* typically corresponds to a database table, and an *entity* corresponds to a row in the table.</span></span>

<span data-ttu-id="38fd7-224">Die `modelBuilder.Conventions.Remove` -Anweisung in der [OnModelCreating](https://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext.onmodelcreating(v=vs.103).aspx) Methode verhindert, dass Tabellennamen wird pluralisiert.</span><span class="sxs-lookup"><span data-stu-id="38fd7-224">The `modelBuilder.Conventions.Remove` statement in the [OnModelCreating](https://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext.onmodelcreating(v=vs.103).aspx) method prevents table names from being pluralized.</span></span> <span data-ttu-id="38fd7-225">Wenn Sie dies nicht tun, würde die generierten Tabellen benannt werden `Students`, `Courses`, und `Enrollments`.</span><span class="sxs-lookup"><span data-stu-id="38fd7-225">If you didn't do this, the generated tables would be named `Students`, `Courses`, and `Enrollments`.</span></span> <span data-ttu-id="38fd7-226">Stattdessen werden die Tabellennamen `Student`, `Course`, und `Enrollment`.</span><span class="sxs-lookup"><span data-stu-id="38fd7-226">Instead, the table names will be `Student`, `Course`, and `Enrollment`.</span></span> <span data-ttu-id="38fd7-227">Entwickler sind sich uneinig darüber, ob Tabellennamen im Plural stehen sollten oder nicht.</span><span class="sxs-lookup"><span data-stu-id="38fd7-227">Developers disagree about whether table names should be pluralized or not.</span></span> <span data-ttu-id="38fd7-228">In diesem Lernprogramm wird die Singularform verwendet, aber der wichtige Punkt ist, dass Sie unabhängig davon, welche Form Sie dann auswählen können durch ein- oder dieser Zeile des Codes auslassen.</span><span class="sxs-lookup"><span data-stu-id="38fd7-228">This tutorial uses the singular form, but the important point is that you can select whichever form you prefer by including or omitting this line of code.</span></span>

## <a name="sql-server-express-localdb"></a><span data-ttu-id="38fd7-229">SQL Server Express LocalDB</span><span class="sxs-lookup"><span data-stu-id="38fd7-229">SQL Server Express LocalDB</span></span>

<span data-ttu-id="38fd7-230">[LocalDB](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx) ist eine vereinfachte Version von SQL Server Express-Datenbankmoduls, die bedarfsgesteuert gestartet und im Benutzermodus ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="38fd7-230">[LocalDB](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx) is a lightweight version of the SQL Server Express Database Engine that starts on demand and runs in user mode.</span></span> <span data-ttu-id="38fd7-231">LocalDB ausgeführt wird, in eine spezielle Ausführungsmodus von SQL Server Express, die Ihnen ermöglicht, die Arbeit mit Datenbanken als *mdf* Dateien.</span><span class="sxs-lookup"><span data-stu-id="38fd7-231">LocalDB runs in a special execution mode of SQL Server Express that enables you to work with databases as *.mdf* files.</span></span> <span data-ttu-id="38fd7-232">LocalDB-Datenbankdateien bleiben in der Regel der *App\_Daten* Ordner eines Webprojekts.</span><span class="sxs-lookup"><span data-stu-id="38fd7-232">Typically, LocalDB database files are kept in the *App\_Data* folder of a web project.</span></span> <span data-ttu-id="38fd7-233">Die Benutzerinstanzfunktion in SQL Server Express können Sie zur Bearbeitung auch *mdf* Dateien, aber der Benutzerinstanzfunktion wird als veraltet markiert; daher LocalDB wird empfohlen, für die Arbeit mit *mdf* Dateien.</span><span class="sxs-lookup"><span data-stu-id="38fd7-233">The user instance feature in SQL Server Express also enables you to work with *.mdf* files, but the user instance feature is deprecated; therefore, LocalDB is recommended for working with *.mdf* files.</span></span>

<span data-ttu-id="38fd7-234">SQL Server Express wird in der Regel für die Produktion Webanwendungen nicht verwendet.</span><span class="sxs-lookup"><span data-stu-id="38fd7-234">Typically SQL Server Express is not used for production web applications.</span></span> <span data-ttu-id="38fd7-235">LocalDB ist mit einer Webanwendung für die Produktion insbesondere nicht empfohlen, da es nicht zum Arbeiten mit IIS ausgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="38fd7-235">LocalDB in particular is not recommended for production use with a web application because it is not designed to work with IIS.</span></span>

<span data-ttu-id="38fd7-236">In Visual Studio 2012 und höheren Versionen ist LocalDB, die standardmäßig mit Visual Studio installiert.</span><span class="sxs-lookup"><span data-stu-id="38fd7-236">In Visual Studio 2012 and later versions, LocalDB is installed by default with Visual Studio.</span></span> <span data-ttu-id="38fd7-237">In Visual Studio 2010 und frühere Versionen ist das SQL Server Express (ohne LocalDB) standardmäßig mit Visual Studio installiert. Sie müssen diese manuell installieren, wenn Sie Visual Studio 2010 verwenden.</span><span class="sxs-lookup"><span data-stu-id="38fd7-237">In Visual Studio 2010 and earlier versions, SQL Server Express (without LocalDB) is installed by default with Visual Studio; you have to install it manually if you're using Visual Studio 2010.</span></span>

<span data-ttu-id="38fd7-238">In diesem Lernprogramm vorerst arbeiten Sie mit LocalDB, damit die Datenbank gespeichert werden kann, in der *App\_Daten* Ordner wie eine *mdf* Datei.</span><span class="sxs-lookup"><span data-stu-id="38fd7-238">In this tutorial you'll work with LocalDB so that the database can be stored in the *App\_Data* folder as an *.mdf* file.</span></span> <span data-ttu-id="38fd7-239">Öffnen Sie die Stammkonfigurationsdatei *"Web.config"* Datei, und fügen Sie eine neue Verbindungszeichenfolge für die `connectionStrings` -Auflistung, wie im folgenden Beispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="38fd7-239">Open the root *Web.config* file and add a new connection string to the `connectionStrings` collection, as shown in the following example.</span></span> <span data-ttu-id="38fd7-240">(Stellen Sie sicher, dass Sie aktualisieren die *"Web.config"* -Datei im Stammordner des Projekts.</span><span class="sxs-lookup"><span data-stu-id="38fd7-240">(Make sure you update the *Web.config* file in the root project folder.</span></span> <span data-ttu-id="38fd7-241">Es gibt auch eine *"Web.config"* Datei befindet sich in der *Ansichten* Unterordner, die Sie nicht aktualisieren müssen.)</span><span class="sxs-lookup"><span data-stu-id="38fd7-241">There's also a *Web.config* file is in the *Views* subfolder that you don't need to update.)</span></span>

[!code-xml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample8.xml)]

<span data-ttu-id="38fd7-242">Standardmäßig sucht die Entity Framework für eine Verbindungszeichenfolge, die den gleichen Namen wie die `DbContext` Klasse (`SchoolContext` für dieses Projekt).</span><span class="sxs-lookup"><span data-stu-id="38fd7-242">By default, the Entity Framework looks for a connection string named the same as the `DbContext` class (`SchoolContext` for this project).</span></span> <span data-ttu-id="38fd7-243">Die Verbindungszeichenfolge, die Sie hinzugefügt haben, gibt eine LocalDB-Datenbank mit dem Namen *ContosoUniversity.mdf* befindet sich in der *App\_Daten* Ordner.</span><span class="sxs-lookup"><span data-stu-id="38fd7-243">The connection string you've added specifies a LocalDB database named *ContosoUniversity.mdf* located in the *App\_Data* folder.</span></span> <span data-ttu-id="38fd7-244">Weitere Informationen finden Sie unter [SQL Server-Verbindungszeichenfolgen für ASP.NET-Webanwendungen](https://msdn.microsoft.com/en-us/library/jj653752.aspx).</span><span class="sxs-lookup"><span data-stu-id="38fd7-244">For more information, see [SQL Server Connection Strings for ASP.NET Web Applications](https://msdn.microsoft.com/en-us/library/jj653752.aspx).</span></span>

<span data-ttu-id="38fd7-245">Sie müssen nicht tatsächlich die Verbindungszeichenfolge angeben.</span><span class="sxs-lookup"><span data-stu-id="38fd7-245">You don't actually need to specify the connection string.</span></span> <span data-ttu-id="38fd7-246">Wenn Sie eine Verbindungszeichenfolge angeben, wird Entity Framework für Sie erstellen. allerdings die Datenbank möglicherweise nicht der *App\_Daten* Ordner Ihrer App.</span><span class="sxs-lookup"><span data-stu-id="38fd7-246">If you don't supply a connection string, Entity Framework will create one for you; however, the database might not be in the *App\_data* folder of your app.</span></span> <span data-ttu-id="38fd7-247">Informationen, auf dem die Datenbank erstellt wird, finden Sie unter [Code First in eine neue Datenbank](https://msdn.microsoft.com/en-us/data/jj193542).</span><span class="sxs-lookup"><span data-stu-id="38fd7-247">For information on where the database will be created, see [Code First to a New Database](https://msdn.microsoft.com/en-us/data/jj193542).</span></span>

<span data-ttu-id="38fd7-248">Die `connectionStrings` Auflistung verfügt auch über eine Verbindungszeichenfolge mit dem Namen `DefaultConnection` die für die Mitgliedschaftsdatenbank verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="38fd7-248">The `connectionStrings` collection also has a connection string named `DefaultConnection` which is used for the membership database.</span></span> <span data-ttu-id="38fd7-249">Sie wird nicht die Mitgliedschaftsdatenbank in diesem Lernprogramm verwenden.</span><span class="sxs-lookup"><span data-stu-id="38fd7-249">You won't be using the membership database in this tutorial.</span></span> <span data-ttu-id="38fd7-250">Der einzige Unterschied zwischen den zwei Verbindungszeichenfolgen ist der Datenbankname und der Wert des Name-Attributs.</span><span class="sxs-lookup"><span data-stu-id="38fd7-250">The only difference between the two connection strings is the database name and the name attribute value.</span></span>

## <a name="set-up-and-execute-a-code-first-migration"></a><span data-ttu-id="38fd7-251">Richten Sie ein und führen Sie einer ersten Codemigration aus</span><span class="sxs-lookup"><span data-stu-id="38fd7-251">Set up and Execute a Code First Migration</span></span>

<span data-ttu-id="38fd7-252">Bei der ersten zur Entwicklung einer Anwendung, Modellieren Ihrer Daten Änderungen häufig auf, und jedes Mal das Modell ändert, die es nicht synchron mit der Datenbank abruft.</span><span class="sxs-lookup"><span data-stu-id="38fd7-252">When you first start to develop an application, your data model changes frequently, and each time the model changes it gets out of sync with the database.</span></span> <span data-ttu-id="38fd7-253">Sie können konfigurieren, dass das Entity Framework automatisch löschen und Neuerstellen der Datenbank bei jeder Änderung des Datenmodells.</span><span class="sxs-lookup"><span data-stu-id="38fd7-253">You can configure the Entity Framework to automatically drop and re-create the database each time you change the data model.</span></span> <span data-ttu-id="38fd7-254">Dies ist kein Problem früh in der Entwicklung, da aus Testdaten einfach neu erstellt besteht, aber nachdem Sie in der produktionsumgebung bereitgestellt haben in der Regel Sie das Datenbankschema zu aktualisieren, ohne Löschen der Datenbank möchten.</span><span class="sxs-lookup"><span data-stu-id="38fd7-254">This is not a problem early in development because test data is easily re-created, but after you have deployed to production you usually want to update the database schema without dropping the database.</span></span> <span data-ttu-id="38fd7-255">Migrationen dieser Funktion können Code First zum Aktualisieren der Datenbank ohne gelöscht und neu erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="38fd7-255">The Migrations feature enables Code First to update the database without dropping and re-creating it.</span></span> <span data-ttu-id="38fd7-256">Früh im Entwicklungszyklus eines neuen Projekts sollen verwenden [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/en-us/library/gg679604(v=vs.103).aspx) löschen, neu zu erstellen und die Datenbank ein erneutes Seeding ausgeführt jedes Mal, wenn das Modell ändert.</span><span class="sxs-lookup"><span data-stu-id="38fd7-256">Early in the development cycle of a new project you might want to use [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/en-us/library/gg679604(v=vs.103).aspx) to drop, recreate and re-seed the database each time the model changes.</span></span> <span data-ttu-id="38fd7-257">Eine Sie bereit sind, Ihre Anwendung bereitzustellen, können Sie bei der Migration konvertieren.</span><span class="sxs-lookup"><span data-stu-id="38fd7-257">One you get ready to deploy your application, you can convert to the migrations approach.</span></span> <span data-ttu-id="38fd7-258">Für dieses Lernprogramm verwenden Sie nur Migrationen.</span><span class="sxs-lookup"><span data-stu-id="38fd7-258">For this tutorial you'll only use migrations.</span></span> <span data-ttu-id="38fd7-259">Weitere Informationen finden Sie unter [Code First-Migrationen](https://msdn.microsoft.com/en-us/data/jj591621) und [Migrationen Screencast Reihe](https://blogs.msdn.com/b/adonet/archive/2014/03/12/migrations-screencast-series.aspx).</span><span class="sxs-lookup"><span data-stu-id="38fd7-259">For more information, see [Code First Migrations](https://msdn.microsoft.com/en-us/data/jj591621) and [Migrations Screencast Series](https://blogs.msdn.com/b/adonet/archive/2014/03/12/migrations-screencast-series.aspx).</span></span>

### <a name="enable-code-first-migrations"></a><span data-ttu-id="38fd7-260">Aktivieren Sie die Code First-Migrationen</span><span class="sxs-lookup"><span data-stu-id="38fd7-260">Enable Code First Migrations</span></span>

1. <span data-ttu-id="38fd7-261">Aus der **Tools** Menü klicken Sie auf **Bibliothekspaket-Manager** und dann **Package Manager Console**.</span><span class="sxs-lookup"><span data-stu-id="38fd7-261">From the **Tools** menu, click **Library Package Manager** and then **Package Manager Console**.</span></span>

    ![Selecting_Package_Manager_Console](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image10.png)
2. <span data-ttu-id="38fd7-263">Bei der `PM>` Eingabeaufforderung Geben Sie den folgenden Befehl aus:</span><span class="sxs-lookup"><span data-stu-id="38fd7-263">At the `PM>` prompt enter the following command:</span></span>

    [!code-powershell[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample9.ps1)]

    ![Enable-Migrations-Befehl](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image11.png)

    <span data-ttu-id="38fd7-265">Dieser Befehl erstellt eine *Migrationen* Ordner im Projekt ContosoUniversity, und es wird in diesem Ordner eine *"Configuration.cs"* -Datei, die Sie bearbeiten können, um Migrationen zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="38fd7-265">This command creates a *Migrations* folder in the ContosoUniversity project, and it puts in that folder a *Configuration.cs* file that you can edit to configure Migrations.</span></span>

    ![Ordner](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image12.png)

    <span data-ttu-id="38fd7-267">Die `Configuration` Klasse enthält eine `Seed` Methode, die aufgerufen wird, wenn die Datenbank erstellt wird, und jedes Mal, wenn sie aktualisiert wird, nachdem die Änderung eines Datenmodells.</span><span class="sxs-lookup"><span data-stu-id="38fd7-267">The `Configuration` class includes a `Seed` method that is called when the database is created and every time it is updated after a data model change.</span></span>

    [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample10.cs)]

    <span data-ttu-id="38fd7-268">Der Zweck dieses `Seed` Methode besteht darin, ermöglichen es Ihnen, Testdaten in die Datenbank eingefügt werden, nachdem der Code First erstellt oder aktualisiert wird.</span><span class="sxs-lookup"><span data-stu-id="38fd7-268">The purpose of this `Seed` method is to enable you to insert test data into the database after Code First creates it or updates it.</span></span>

### <a name="set-up-the-seed-method"></a><span data-ttu-id="38fd7-269">Einrichten der Seed-Methode</span><span class="sxs-lookup"><span data-stu-id="38fd7-269">Set up the Seed Method</span></span>

<span data-ttu-id="38fd7-270">Die [Ausgangswert](https://msdn.microsoft.com/en-us/library/hh829453(v=vs.103).aspx) Methode ausgeführt wird, wenn der Code First-Migrationen die Datenbank erstellt und jedes Mal, wenn es zur Aktualisierung der Datenbank auf den neuesten Migration.</span><span class="sxs-lookup"><span data-stu-id="38fd7-270">The [Seed](https://msdn.microsoft.com/en-us/library/hh829453(v=vs.103).aspx) method runs when Code First Migrations creates the database and every time it updates the database to the latest migration.</span></span> <span data-ttu-id="38fd7-271">Die Seed-Methode dient ermöglicht das Einfügen von Daten in Ihren Tabellen, bevor die Anwendung zum ersten Mal auf die Datenbank zugreift.</span><span class="sxs-lookup"><span data-stu-id="38fd7-271">The purpose of the Seed method is to enable you to insert data into your tables before the application accesses the database for the first time.</span></span>

<span data-ttu-id="38fd7-272">In früheren Versionen von Code First, bevor Migrationen freigegeben wurde, war es üblich `Seed` Methoden, um Testdaten, eingefügt werden, da bei jeder Änderung Modell während der Entwicklung die Datenbank mussten vollständig gelöscht und von Grund auf neu erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="38fd7-272">In earlier versions of Code First, before Migrations was released, it was common for `Seed` methods to insert test data, because with every model change during development the database had to be completely deleted and re-created from scratch.</span></span> <span data-ttu-id="38fd7-273">Mit Code First-Migrationen Test Daten, nachdem Änderungen an der Datenbank beibehalten werden, einschließlich also Testdaten in die [Ausgangswert](https://msdn.microsoft.com/en-us/library/hh829453(v=vs.103).aspx) Methode ist in der Regel nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="38fd7-273">With Code First Migrations, test data is retained after database changes, so including test data in the [Seed](https://msdn.microsoft.com/en-us/library/hh829453(v=vs.103).aspx) method is typically not necessary.</span></span> <span data-ttu-id="38fd7-274">Tatsächlich sollen die `Seed` Methode, um Testdaten einzufügen, wenn Sie Migrationen zum Bereitstellen der Datenbank bis hin zur Produktion, verwenden da die `Seed` Methode wird ausgeführt, in der Produktion.</span><span class="sxs-lookup"><span data-stu-id="38fd7-274">In fact, you don't want the `Seed` method to insert test data if you'll be using Migrations to deploy the database to production, because the `Seed` method will run in production.</span></span> <span data-ttu-id="38fd7-275">In diesem Fall sollen die `Seed` Methode, um nur die Daten einfügen in die Datenbank, die in der Produktion eingefügt werden soll.</span><span class="sxs-lookup"><span data-stu-id="38fd7-275">In that case you want the `Seed` method to insert into the database only the data that you want to be inserted in production.</span></span> <span data-ttu-id="38fd7-276">Beispielsweise sollten Sie die Datenbank im tatsächlichen Abteilungsnamen enthalten die `Department` Tabelle, wenn die Anwendung in der Produktion zur Verfügung steht.</span><span class="sxs-lookup"><span data-stu-id="38fd7-276">For example, you might want the database to include actual department names in the `Department` table when the application becomes available in production.</span></span>

<span data-ttu-id="38fd7-277">Für dieses Lernprogramm müssen verwenden Sie Migrationen für die Bereitstellung, aber das `Seed` einfügen Methode Testdaten trotzdem um erleichtern es zu sehen, wie die Funktionalität der Anwendung funktioniert, ohne dass manuell eine große Datenmenge eingefügt.</span><span class="sxs-lookup"><span data-stu-id="38fd7-277">For this tutorial, you'll be using Migrations for deployment, but your `Seed` method will insert test data anyway in order to make it easier to see how application functionality works without having to manually insert a lot of data.</span></span>

1. <span data-ttu-id="38fd7-278">Ersetzen Sie den Inhalt von der *"Configuration.cs"* -Datei mit den folgenden Code, der Testdaten in die neue Datenbank geladen werden.</span><span class="sxs-lookup"><span data-stu-id="38fd7-278">Replace the contents of the *Configuration.cs* file with the following code, which will load test data into the new database.</span></span> 

    [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample11.cs)]

    <span data-ttu-id="38fd7-279">Die [Ausgangswert](https://msdn.microsoft.com/en-us/library/hh829453(v=vs.103).aspx) Methode nimmt das Datenbankkontextobjekt als Eingabeparameter und der Code in der Methode verwendet das Objekt, das Hinzufügen neuer Entitäten auf die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="38fd7-279">The [Seed](https://msdn.microsoft.com/en-us/library/hh829453(v=vs.103).aspx) method takes the database context object as an input parameter, and the code in the method uses that object to add new entities to the database.</span></span> <span data-ttu-id="38fd7-280">Für jeden Entitätstyp im Code erstellt eine Auflistung von neuen Entitäten, fügt diese an die entsprechende [DbSet](https://msdn.microsoft.com/en-us/library/system.data.entity.dbset(v=vs.103).aspx) -Eigenschaft, und klicken Sie dann speichert die Änderungen an der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="38fd7-280">For each entity type, the code creates a collection of new entities, adds them to the appropriate [DbSet](https://msdn.microsoft.com/en-us/library/system.data.entity.dbset(v=vs.103).aspx) property, and then saves the changes to the database.</span></span> <span data-ttu-id="38fd7-281">Es ist nicht erforderlich, rufen Sie die [SaveChanges](https://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext.savechanges(v=VS.103).aspx) Methode nach jeder Gruppe von Entitäten, wie hier erfolgt, aber auf diese Weise können Sie die Ursache eines Problems zu suchen, wenn eine Ausnahme auftritt, während der Code in die Datenbank geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="38fd7-281">It isn't necessary to call the [SaveChanges](https://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext.savechanges(v=VS.103).aspx) method after each group of entities, as is done here, but doing that helps you locate the source of a problem if an exception occurs while the code is writing to the database.</span></span>

    <span data-ttu-id="38fd7-282">Einige der Anweisungen, das Einfügen von Daten verwendet werden, die [AddOrUpdate](https://msdn.microsoft.com/en-us/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) Methode zum Ausführen eines Vorgangs "Upsert".</span><span class="sxs-lookup"><span data-stu-id="38fd7-282">Some of the statements that insert data use the [AddOrUpdate](https://msdn.microsoft.com/en-us/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) method to perform an "upsert" operation.</span></span> <span data-ttu-id="38fd7-283">Da die `Seed` Methode, die mit jeder Migration ausgeführt wird, die Daten können nicht nur eingefügt werden, da die Zeilen, die Sie hinzufügen möchten bereits es nach der ersten Migration entsprechen, die die Datenbank erstellt.</span><span class="sxs-lookup"><span data-stu-id="38fd7-283">Because the `Seed` method runs with every migration, you can't just insert data, because the rows you are trying to add will already be there after the first migration that creates the database.</span></span> <span data-ttu-id="38fd7-284">Der Vorgang "Upsert" wird verhindert, dass Fehler, die eintreten würden, wenn Sie versuchen, fügen Sie eine Zeile, die bereits vorhanden ist, aber es ***überschreibt*** Änderungen an Daten, die Sie möglicherweise beim Testen der Anwendung vorgenommen haben.</span><span class="sxs-lookup"><span data-stu-id="38fd7-284">The "upsert" operation prevents errors that would happen if you try to insert a row that already exists, but it ***overrides*** any changes to data that you may have made while testing the application.</span></span> <span data-ttu-id="38fd7-285">Mit Testdaten in einigen Tabellen nicht empfiehlt, die durchgeführt werden soll: in einigen Fällen beim Ändern von Daten beim Testen soll Ihre Änderungen bleiben nach einer Aktualisierung der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="38fd7-285">With test data in some tables you might not want that to happen: in some cases when you change data while testing you want your changes to remain after database updates.</span></span> <span data-ttu-id="38fd7-286">In diesem Fall einen bedingten Einfügevorgang erstellt werden sollen: Fügen Sie eine Zeile nur dann, wenn er nicht bereits vorhanden.</span><span class="sxs-lookup"><span data-stu-id="38fd7-286">In that case you want to do a conditional insert operation: insert a row only if it doesn't already exist.</span></span> <span data-ttu-id="38fd7-287">Die Seed-Methode verwendet beide Ansätze.</span><span class="sxs-lookup"><span data-stu-id="38fd7-287">The Seed method uses both approaches.</span></span>

    <span data-ttu-id="38fd7-288">Der erste Parameter übergeben wird, um die [AddOrUpdate](https://msdn.microsoft.com/en-us/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) Methode gibt die Eigenschaft zu verwenden, um zu überprüfen, ob bereits eine Zeile vorhanden.</span><span class="sxs-lookup"><span data-stu-id="38fd7-288">The first parameter passed to the [AddOrUpdate](https://msdn.microsoft.com/en-us/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) method specifies the property to use to check if a row already exists.</span></span> <span data-ttu-id="38fd7-289">Für die Testdaten für Studenten, die Sie bereitstellen, die `LastName` Eigenschaft kann für diesen Zweck verwendet werden, da jeder letzte Name in der Liste eindeutig ist:</span><span class="sxs-lookup"><span data-stu-id="38fd7-289">For the test student data that you are providing, the `LastName` property can be used for this purpose since each last name in the list is unique:</span></span>

    [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample12.cs)]

    <span data-ttu-id="38fd7-290">Mit diesem Code wird davon ausgegangen, dass die Nachnamen eindeutig sind.</span><span class="sxs-lookup"><span data-stu-id="38fd7-290">This code assumes that last names are unique.</span></span> <span data-ttu-id="38fd7-291">Wenn Sie einen Studenten mit einem doppelten Nachnamen manuell hinzufügen, erhalten Sie die folgende Ausnahme beim nächsten einer Migration durchführen.</span><span class="sxs-lookup"><span data-stu-id="38fd7-291">If you manually add a student with a duplicate last name, you'll get the following exception the next time you perform a migration.</span></span>

    <span data-ttu-id="38fd7-292">Die Sequenz enthält mehr als ein element</span><span class="sxs-lookup"><span data-stu-id="38fd7-292">Sequence contains more than one element</span></span>

    <span data-ttu-id="38fd7-293">Weitere Informationen zu den `AddOrUpdate` -Methode finden Sie unter [Achten Sie darauf mit EF 4.3 AddOrUpdate-Methode](http://thedatafarm.com/blog/data-access/take-care-with-ef-4-3-addorupdate-method/) Julie Lerman Blog.</span><span class="sxs-lookup"><span data-stu-id="38fd7-293">For more information about the `AddOrUpdate` method, see [Take care with EF 4.3 AddOrUpdate Method](http://thedatafarm.com/blog/data-access/take-care-with-ef-4-3-addorupdate-method/) on Julie Lerman's blog.</span></span>

    <span data-ttu-id="38fd7-294">Der Code, hinzufügt `Enrollment` Entitäten verwendet nicht die `AddOrUpdate` Methode.</span><span class="sxs-lookup"><span data-stu-id="38fd7-294">The code that adds `Enrollment` entities doesn't use the `AddOrUpdate` method.</span></span> <span data-ttu-id="38fd7-295">Er überprüft, ob eine Entität bereits vorhanden ist, und fügt die Entität aus, wenn er nicht vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="38fd7-295">It checks if an entity already exists and inserts the entity if it doesn't exist.</span></span> <span data-ttu-id="38fd7-296">Dieser Ansatz wird Änderungen beizubehalten, die Sie an eine Registrierung Dienstqualität bei Migrationen ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="38fd7-296">This approach will preserve changes you make to an enrollment grade when migrations run.</span></span> <span data-ttu-id="38fd7-297">Der Code durchläuft jedes Mitglied der `Enrollment` [Liste](https://msdn.microsoft.com/en-us/library/6sh2ey19.aspx) und wenn die Registrierung in der Datenbank nicht gefunden wird, wird die Registrierung mit der Datenbank hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="38fd7-297">The code loops through each member of the `Enrollment`[List](https://msdn.microsoft.com/en-us/library/6sh2ey19.aspx) and if the enrollment is not found in the database, it adds the enrollment to the database.</span></span> <span data-ttu-id="38fd7-298">Beim ersten der Datenbank Aktualisierung, wird die Datenbank leer sein, sodass jede Registrierung hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="38fd7-298">The first time you update the database, the database will be empty, so it will add each enrollment.</span></span>

    [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample13.cs)]

    <span data-ttu-id="38fd7-299">Informationen zum Debuggen der `Seed` -Methode und Behandeln von redundanten Daten wie z. B. zwei Studenten, die mit dem Namen "Alexander Carson", finden Sie unter [Seeding und Debuggen von Entity Framework (EF) Datenbanken](https://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx) in Rick andersons Blog.</span><span class="sxs-lookup"><span data-stu-id="38fd7-299">For information about how to debug the `Seed` method and how to handle redundant data such as two students named "Alexander Carson", see [Seeding and Debugging Entity Framework (EF) DBs](https://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx) on Rick Anderson's blog.</span></span>
2. <span data-ttu-id="38fd7-300">Erstellen Sie das Projekt.</span><span class="sxs-lookup"><span data-stu-id="38fd7-300">Build the project.</span></span>

### <a name="create-and-execute-the-first-migration"></a><span data-ttu-id="38fd7-301">Erstellen und Ausführen der ersten Migrations</span><span class="sxs-lookup"><span data-stu-id="38fd7-301">Create and Execute the First Migration</span></span>

1. <span data-ttu-id="38fd7-302">Geben Sie im Fenster Paket-Manager-Konsole die folgenden Befehle aus:</span><span class="sxs-lookup"><span data-stu-id="38fd7-302">In the Package Manager Console window, enter the following commands:</span></span> 

    [!code-powershell[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample14.ps1)]

    ![](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image13.png)

    <span data-ttu-id="38fd7-303">Die `add-migration` Befehl hinzugefügt, um den Ordner ein *[Datumsstempel]\_InitialCreate.cs* -Datei, die Code enthält, der die Datenbank erstellt.</span><span class="sxs-lookup"><span data-stu-id="38fd7-303">The `add-migration` command adds to the Migrations folder a *[DateStamp]\_InitialCreate.cs* file that contains code which creates the database.</span></span> <span data-ttu-id="38fd7-304">Der erste Parameter (`InitialCreate)` wird verwendet, für die Datei benennen und kann beliebig sein; Sie wird in der Regel wählen Sie ein Wort oder Ausdruck, die zusammengefasst, was bei der Migration durchgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="38fd7-304">The first parameter (`InitialCreate)` is used for the file name and can be whatever you want; you typically choose a word or phrase that summarizes what is being done in the migration.</span></span> <span data-ttu-id="38fd7-305">Sie können z. B. eine spätere Migrationen Namen &quot;AddDepartmentTable&quot;.</span><span class="sxs-lookup"><span data-stu-id="38fd7-305">For example, you might name a later migration &quot;AddDepartmentTable&quot;.</span></span>

    ![Ordner mit der anfänglichen migration](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image14.png)

    <span data-ttu-id="38fd7-307">Die `Up` Methode der `InitialCreate` Klasse erstellt, die Datenbanktabellen, die die Daten Modell Entitätenmengen, entsprechen und die `Down` Methode löscht sie.</span><span class="sxs-lookup"><span data-stu-id="38fd7-307">The `Up` method of the `InitialCreate` class creates the database tables that correspond to the data model entity sets, and the `Down` method deletes them.</span></span> <span data-ttu-id="38fd7-308">Migrationen Aufrufe der `Up` Methode für die Implementierung des Datenmodells für eine Migration.</span><span class="sxs-lookup"><span data-stu-id="38fd7-308">Migrations calls the `Up` method to implement the data model changes for a migration.</span></span> <span data-ttu-id="38fd7-309">Bei der Eingabe eines Befehls ein Rollback der Updates, die Migrationen Aufrufe der `Down` Methode.</span><span class="sxs-lookup"><span data-stu-id="38fd7-309">When you enter a command to roll back the update, Migrations calls the `Down` method.</span></span> <span data-ttu-id="38fd7-310">Der folgende Code zeigt den Inhalt der `InitialCreate` Datei:</span><span class="sxs-lookup"><span data-stu-id="38fd7-310">The following code shows the contents of the `InitialCreate` file:</span></span>

    [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample15.cs)]

    <span data-ttu-id="38fd7-311">Die `update-database` -Befehl ausgeführt wird die `Up` Methode zum Erstellen der Datenbank aus, und klicken Sie dann es führt die `Seed` Methode zum Auffüllen der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="38fd7-311">The `update-database` command runs the `Up` method to create the database and then it runs the `Seed` method to populate the database.</span></span>

<span data-ttu-id="38fd7-312">SQL Server-Datenbank wurde für das Datenmodell jetzt erstellt.</span><span class="sxs-lookup"><span data-stu-id="38fd7-312">A SQL Server database has now been created for your data model.</span></span> <span data-ttu-id="38fd7-313">Der Name der Datenbank ist *ContosoUniversity*, und die *mdf* Datei befindet sich in Ihrem Projekts *App\_Daten* Ordner ist, die Ihrer Angabe in Ihre Verbindungszeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="38fd7-313">The name of the database is *ContosoUniversity*, and the *.mdf* file is in your project's *App\_Data* folder because that's what you specified in your connection string.</span></span>

<span data-ttu-id="38fd7-314">Verwenden Sie entweder **Server-Explorer** oder **Objekt-Explorer von SQL Server** (SSOX) zur Anzeige der Datenbank in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="38fd7-314">You can use either **Server Explorer** or **SQL Server Object Explorer** (SSOX) to view the database in Visual Studio.</span></span> <span data-ttu-id="38fd7-315">Verwenden Sie für dieses Lernprogramm **Server-Explorer**.</span><span class="sxs-lookup"><span data-stu-id="38fd7-315">For this tutorial you'll use **Server Explorer**.</span></span> <span data-ttu-id="38fd7-316">In Visual Studio Express 2012 für das Web **Server-Explorer** heißt **Datenbank-Explorer**.</span><span class="sxs-lookup"><span data-stu-id="38fd7-316">In Visual Studio Express 2012 for Web, **Server Explorer** is called **Database Explorer**.</span></span>

1. <span data-ttu-id="38fd7-317">Aus der **Ansicht** Menü klicken Sie auf **Server-Explorer**.</span><span class="sxs-lookup"><span data-stu-id="38fd7-317">From the **View** menu, click **Server Explorer**.</span></span>
2. <span data-ttu-id="38fd7-318">Klicken Sie auf die **Verbindung hinzufügen** Symbol.</span><span class="sxs-lookup"><span data-stu-id="38fd7-318">Click the **Add Connection** icon.</span></span>

    ![](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image15.png)
3. <span data-ttu-id="38fd7-319">Wenn Sie aufgefordert werden, mit der **Datenquelle auswählen** Dialogfeld klicken Sie auf **Microsoft SQL Server**, und klicken Sie dann auf **Fortfahren**.</span><span class="sxs-lookup"><span data-stu-id="38fd7-319">If you are prompted with the **Choose Data Source** dialog, click **Microsoft SQL Server**, and then click **Continue**.</span></span>  
  
    ![](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image16.png)
4. <span data-ttu-id="38fd7-320">In der **Verbindung hinzufügen** Dialogfeld Geben Sie **(Localdb) \v11.0** für die **Servernamen**.</span><span class="sxs-lookup"><span data-stu-id="38fd7-320">In the **Add Connection** dialog box, enter **(localdb)\v11.0** for the **Server Name**.</span></span> <span data-ttu-id="38fd7-321">Klicken Sie unter **einen Datenbanknamen eingeben oder auswählen**Option **ContosoUniversity.**</span><span class="sxs-lookup"><span data-stu-id="38fd7-321">Under **Select or enter a database name**, select **ContosoUniversity.**</span></span>  
  
    ![](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image17.png)
5. <span data-ttu-id="38fd7-322">Klicken Sie auf **OK.**</span><span class="sxs-lookup"><span data-stu-id="38fd7-322">Click **OK.**</span></span>
6. <span data-ttu-id="38fd7-323">Erweitern Sie **SchoolContext** und schließlich **Tabellen**.</span><span class="sxs-lookup"><span data-stu-id="38fd7-323">Expand **SchoolContext** and then expand **Tables**.</span></span>  
  
    ![](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image18.png)
7. <span data-ttu-id="38fd7-324">Mit der rechten Maustaste die **Student** Tabelle, und klicken Sie auf **Tabellendaten anzeigen** , finden in den Spalten, die erstellt wurden und die Zeilen, die in die Tabelle eingefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="38fd7-324">Right-click the **Student** table and click **Show Table Data** to see the columns that were created and the rows that were inserted into the table.</span></span>

    ![Studententabelle](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image19.png)

## <a name="creating-a-student-controller-and-views"></a><span data-ttu-id="38fd7-326">Ein Student-Controller und Ansichten werden erstellt</span><span class="sxs-lookup"><span data-stu-id="38fd7-326">Creating a Student Controller and Views</span></span>

<span data-ttu-id="38fd7-327">Der nächste Schritt besteht auf einer ASP.NET MVC-Controller und Ansichten in Ihrer Anwendung erstellen, die eine dieser Tabellen verwenden können.</span><span class="sxs-lookup"><span data-stu-id="38fd7-327">The next step is to create an ASP.NET MVC controller and views in your application that can work with one of these tables.</span></span>

1. <span data-ttu-id="38fd7-328">Zum Erstellen einer `Student` Controller Maustaste die **Controller** Ordner in **Projektmappen-Explorer**, wählen **hinzufügen**, und klicken Sie dann auf **Controller** .</span><span class="sxs-lookup"><span data-stu-id="38fd7-328">To create a `Student` controller, right-click the **Controllers** folder in **Solution Explorer**, select **Add**, and then click **Controller**.</span></span> <span data-ttu-id="38fd7-329">In der **Controller hinzufügen** Dialogfeld Feld, die folgenden Optionen aus, und klicken Sie dann auf **hinzufügen**:</span><span class="sxs-lookup"><span data-stu-id="38fd7-329">In the **Add Controller** dialog box, make the following selections and then click **Add**:</span></span> 

    - <span data-ttu-id="38fd7-330">Controllername: **StudentController**.</span><span class="sxs-lookup"><span data-stu-id="38fd7-330">Controller name: **StudentController**.</span></span>
    - <span data-ttu-id="38fd7-331">Vorlage: **MVC-Controller mit Lese-/schreibaktionen und Ansichten unter Verwendung von Entity Framework**.</span><span class="sxs-lookup"><span data-stu-id="38fd7-331">Template: **MVC controller with read/write actions and views, using Entity Framework**.</span></span>
    - <span data-ttu-id="38fd7-332">Modellschemas: **Student (ContosoUniversity.Models)**.</span><span class="sxs-lookup"><span data-stu-id="38fd7-332">Model class: **Student (ContosoUniversity.Models)**.</span></span> <span data-ttu-id="38fd7-333">(Wenn diese Option in der Dropdown-Liste nicht angezeigt wird, erstellen Sie das Projekt, und versuchen Sie es erneut.)</span><span class="sxs-lookup"><span data-stu-id="38fd7-333">(If you don't see this option in the drop-down list, build the project and try again.)</span></span>
    - <span data-ttu-id="38fd7-334">Datenkontextklasse: **SchoolContext (ContosoUniversity.Models)**.</span><span class="sxs-lookup"><span data-stu-id="38fd7-334">Data context class: **SchoolContext (ContosoUniversity.Models)**.</span></span>
    - <span data-ttu-id="38fd7-335">Ansichten: **Razor (CSHTML)**.</span><span class="sxs-lookup"><span data-stu-id="38fd7-335">Views: **Razor (CSHTML)**.</span></span> <span data-ttu-id="38fd7-336">(Die Standardeinstellung.)</span><span class="sxs-lookup"><span data-stu-id="38fd7-336">(The default.)</span></span>

    ![Add_Controller_dialog_box_for_Student_controller](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image20.png)
- <span data-ttu-id="38fd7-338">Visual Studio öffnet die *Controllers\StudentController.cs* Datei.</span><span class="sxs-lookup"><span data-stu-id="38fd7-338">Visual Studio opens the *Controllers\StudentController.cs* file.</span></span> <span data-ttu-id="38fd7-339">Sie sehen, dass eine Klassenvariable erstellt wurde, die eine Datenbank Context-Objekt instanziiert:</span><span class="sxs-lookup"><span data-stu-id="38fd7-339">You see a class variable has been created that instantiates a database context object:</span></span>

    [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample16.cs)]

    <span data-ttu-id="38fd7-340">Die `Index` Aktionsmethode ruft eine Liste der Schüler der *Studenten* Entitätenmenge durch Lesen der `Students` Eigenschaft des Context-Datenbankinstanz:</span><span class="sxs-lookup"><span data-stu-id="38fd7-340">The `Index` action method gets a list of students from the *Students* entity set by reading the `Students` property of the database context instance:</span></span>

    [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample17.cs)]

    <span data-ttu-id="38fd7-341">Die *Student\Index.cshtml* zeigt diese Liste in einer Tabelle:</span><span class="sxs-lookup"><span data-stu-id="38fd7-341">The *Student\Index.cshtml* view displays this list in a table:</span></span>

    [!code-cshtml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample18.cshtml)]
- <span data-ttu-id="38fd7-342">Drücken Sie STRG+F5, um das Projekt auszuführen.</span><span class="sxs-lookup"><span data-stu-id="38fd7-342">Press CTRL+F5 to run the project.</span></span>

    <span data-ttu-id="38fd7-343">Klicken Sie auf die **Studenten** Tab, um die Testdaten finden Sie unter, die die `Seed` Methode eingefügt.</span><span class="sxs-lookup"><span data-stu-id="38fd7-343">Click the **Students** tab to see the test data that the `Seed` method inserted.</span></span>

    ![Student-Indexseite](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image21.png)

## <a name="conventions"></a><span data-ttu-id="38fd7-345">Konventionen</span><span class="sxs-lookup"><span data-stu-id="38fd7-345">Conventions</span></span>

<span data-ttu-id="38fd7-346">Die Menge an Code in Reihenfolge für das Entity Framework voraussetzten können zum Erstellen einer vollständigen Datenbank ist aufgrund der Verwendung von minimal *Konventionen*, oder die Annahmen, die das Entity Framework stellt.</span><span class="sxs-lookup"><span data-stu-id="38fd7-346">The amount of code you had to write in order for the Entity Framework to be able to create a complete database for you is minimal because of the use of *conventions*, or assumptions that the Entity Framework makes.</span></span> <span data-ttu-id="38fd7-347">Einige von ihnen haben bereits angemerkt wurde:</span><span class="sxs-lookup"><span data-stu-id="38fd7-347">Some of them have already been noted:</span></span>

- <span data-ttu-id="38fd7-348">Die pluralized Formen von Namen für die Entität werden als Tabellennamen verwendet.</span><span class="sxs-lookup"><span data-stu-id="38fd7-348">The pluralized forms of entity class names are used as table names.</span></span>
- <span data-ttu-id="38fd7-349">Entitätsnamen-Eigenschaft werden für Spaltennamen verwendet.</span><span class="sxs-lookup"><span data-stu-id="38fd7-349">Entity property names are used for column names.</span></span>
- <span data-ttu-id="38fd7-350">Eigenschaften der Entität mit dem Namen sind `ID` oder *Classname* `ID` werden als Eigenschaften des Primärschlüssels erkannt.</span><span class="sxs-lookup"><span data-stu-id="38fd7-350">Entity properties that are named `ID` or *classname* `ID` are recognized as primary key properties.</span></span>

<span data-ttu-id="38fd7-351">Sie gesehen haben, dass die Konventionen überschrieben werden können (z. B. Sie angegeben, dass Tabellennamen darf keine pluralisiert werden), und erfahren Sie mehr über Konventionen und überschreiben Sie diese in die [erstellen eine weitere komplexe Datenmodell](creating-a-more-complex-data-model-for-an-asp-net-mvc-application.md) Lernprogramm weiter unten in dieser Serie.</span><span class="sxs-lookup"><span data-stu-id="38fd7-351">You've seen that conventions can be overridden (for example, you specified that table names shouldn't be pluralized), and you'll learn more about conventions and how to override them in the [Creating a More Complex Data Model](creating-a-more-complex-data-model-for-an-asp-net-mvc-application.md) tutorial later in this series.</span></span> <span data-ttu-id="38fd7-352">Weitere Informationen finden Sie unter [Code First-Konventionen](https://msdn.microsoft.com/en-us/data/jj679962).</span><span class="sxs-lookup"><span data-stu-id="38fd7-352">For more information, see [Code First Conventions](https://msdn.microsoft.com/en-us/data/jj679962).</span></span>

## <a name="summary"></a><span data-ttu-id="38fd7-353">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="38fd7-353">Summary</span></span>

<span data-ttu-id="38fd7-354">Sie haben nun eine einfache Anwendung erstellt, die das Entity Framework und SQL Server Express zum Speichern und Anzeigen von Daten verwendet.</span><span class="sxs-lookup"><span data-stu-id="38fd7-354">You've now created a simple application that uses the Entity Framework and SQL Server Express to store and display data.</span></span> <span data-ttu-id="38fd7-355">Im folgenden Lernprogramm erfahren Sie, zum Ausführen von grundlegenden CRUD (erstellen, lesen, aktualisieren und löschen) Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="38fd7-355">In the following tutorial you'll learn how to perform basic CRUD (create, read, update, delete) operations.</span></span> <span data-ttu-id="38fd7-356">Sie können Feedback am unteren Rand dieser Seite lassen.</span><span class="sxs-lookup"><span data-stu-id="38fd7-356">You can leave feedback at the bottom of this page.</span></span> <span data-ttu-id="38fd7-357">Bitte lassen Sie uns wissen Sie, wie Sie diesen Teil des Lernprogramms gefallen hat und wie wir es verbessern können.</span><span class="sxs-lookup"><span data-stu-id="38fd7-357">Please let us know how you liked this portion of the tutorial and how we could improve it.</span></span>

<span data-ttu-id="38fd7-358">Links zu anderen Entity Framework-Ressourcen finden Sie in der [ASP.NET Data Access Content Map](../../../../whitepapers/aspnet-data-access-content-map.md).</span><span class="sxs-lookup"><span data-stu-id="38fd7-358">Links to other Entity Framework resources can be found in the [ASP.NET Data Access Content Map](../../../../whitepapers/aspnet-data-access-content-map.md).</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="38fd7-359">Nächste</span><span class="sxs-lookup"><span data-stu-id="38fd7-359">Next</span></span>](implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application.md)
