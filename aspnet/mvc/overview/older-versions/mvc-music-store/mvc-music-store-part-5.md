---
uid: mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-5
title: 'Teil 5: Bearbeiten von Formularen von Formaten und Vorlagen | Microsoft Docs'
author: jongalloway
description: Diese Reihe von Lernprogrammen details aller die Schritte zum Erstellen von ASP.NET MVC-Music Store-beispielanwendung. Teil 5 wird von Formaten und Vorlagen bearbeiten Forms behandelt.
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/21/2011
ms.topic: article
ms.assetid: 6b09413a-6d6a-425a-87c9-629f91b91b28
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-5
msc.type: authoredcontent
ms.openlocfilehash: d584e614b5a4124044cd9decd2272192ca164643
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
ms.locfileid: "30874911"
---
<a name="part-5-edit-forms-and-templating"></a><span data-ttu-id="fbbb0-104">Teil 5: Bearbeiten von Formularen von Formaten und Vorlagen</span><span class="sxs-lookup"><span data-stu-id="fbbb0-104">Part 5: Edit Forms and Templating</span></span>
====================
<span data-ttu-id="fbbb0-105">durch [Jon Galloway](https://github.com/jongalloway)</span><span class="sxs-lookup"><span data-stu-id="fbbb0-105">by [Jon Galloway](https://github.com/jongalloway)</span></span>

> <span data-ttu-id="fbbb0-106">Das MVC-Music Store ist eine lernprogrammanwendung, die führt und erklärt schrittweise, wie mithilfe von ASP.NET MVC und Visual Studio für die Webentwicklung.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-106">The MVC Music Store is a tutorial application that introduces and explains step-by-step how to use ASP.NET MVC and Visual Studio for web development.</span></span>  
>   
> <span data-ttu-id="fbbb0-107">Das MVC-Music Store handelt es sich um einfache Beispiel Store Implementierung, die online Musikalben verkauft und implementiert grundlegende standortverwaltung Benutzer anmelden und shopping Cart-Funktionalität.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-107">The MVC Music Store is a lightweight sample store implementation which sells music albums online, and implements basic site administration, user sign-in, and shopping cart functionality.</span></span>
> 
> <span data-ttu-id="fbbb0-108">Diese Reihe von Lernprogrammen details aller die Schritte zum Erstellen von ASP.NET MVC-Music Store-beispielanwendung.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-108">This tutorial series details all of the steps taken to build the ASP.NET MVC Music Store sample application.</span></span> <span data-ttu-id="fbbb0-109">Teil 5 wird von Formaten und Vorlagen bearbeiten Forms behandelt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-109">Part 5 covers Edit Forms and Templating.</span></span>


<span data-ttu-id="fbbb0-110">In den letzten Kapitel wurden wir Laden von Daten aus der Datenbank und anzeigen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-110">In the past chapter, we were loading data from our database and displaying it.</span></span> <span data-ttu-id="fbbb0-111">In diesem Kapitel werden wir auch aktivieren, die Daten bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-111">In this chapter, we'll also enable editing the data.</span></span>

## <a name="creating-the-storemanagercontroller"></a><span data-ttu-id="fbbb0-112">Erstellen die StoreManagerController</span><span class="sxs-lookup"><span data-stu-id="fbbb0-112">Creating the StoreManagerController</span></span>

<span data-ttu-id="fbbb0-113">Wir beginnen, indem das Erstellen eines neuen Domänencontrollers aufgerufen **StoreManagerController**.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-113">We'll begin by creating a new controller called **StoreManagerController**.</span></span> <span data-ttu-id="fbbb0-114">Für diesen Controller dauern wir die Gerüstbau-Funktionen in ASP.NET MVC 3 Tools Update verfügbar.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-114">For this controller, we will be taking advantage of the Scaffolding features available in the ASP.NET MVC 3 Tools Update.</span></span> <span data-ttu-id="fbbb0-115">Legen Sie die Optionen für das Dialogfeld "Controller hinzufügen" aus, wie unten dargestellt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-115">Set the options for the Add Controller dialog as shown below.</span></span>

![](mvc-music-store-part-5/_static/image1.png)

<span data-ttu-id="fbbb0-116">Wenn Sie die Schaltfläche "hinzufügen" klicken, sehen Sie sich, dass der ASP.NET MVC 3-Gerüstbau großzügig bemessenen Arbeit für Sie erledigt:</span><span class="sxs-lookup"><span data-stu-id="fbbb0-116">When you click the Add button, you'll see that the ASP.NET MVC 3 scaffolding mechanism does a good amount of work for you:</span></span>

- <span data-ttu-id="fbbb0-117">Erstellt neue StoreManagerController mit einer lokalen Variablen für die Entity Framework</span><span class="sxs-lookup"><span data-stu-id="fbbb0-117">It creates the new StoreManagerController with a local Entity Framework variable</span></span>
- <span data-ttu-id="fbbb0-118">Die Ansichtenordner des Projekts hinzugefügt einen Ordner StoreManager</span><span class="sxs-lookup"><span data-stu-id="fbbb0-118">It adds a StoreManager folder to the project's Views folder</span></span>
- <span data-ttu-id="fbbb0-119">Es fügt Create.cshtml, Delete.cshtml Details.cshtml, Edit.cshtml und Index.cshtml Ansicht stark typisiert auf die Album-Klasse</span><span class="sxs-lookup"><span data-stu-id="fbbb0-119">It adds Create.cshtml, Delete.cshtml, Details.cshtml, Edit.cshtml, and Index.cshtml view, strongly typed to the Album class</span></span>

![](mvc-music-store-part-5/_static/image2.png)

<span data-ttu-id="fbbb0-120">Die neue StoreManager Controllerklasse enthält CRUD (erstellen, lesen, aktualisieren und löschen) Controlleraktionen zum Arbeiten mit dem Album kennen modellschemas und verwenden Sie unsere Entity Framework-Datenkontext für den Datenbankzugriff.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-120">The new StoreManager controller class includes CRUD (create, read, update, delete) controller actions which know how to work with the Album model class and use our Entity Framework context for database access.</span></span>

## <a name="modifying-a-scaffolded-view"></a><span data-ttu-id="fbbb0-121">Das Ändern einer Sicht Scaffolded</span><span class="sxs-lookup"><span data-stu-id="fbbb0-121">Modifying a Scaffolded View</span></span>

<span data-ttu-id="fbbb0-122">Es ist wichtig zu beachten, dass dieser Code für uns erstellt wurde, ist ASP.NET MVC-Standardcode, so wie wir in diesem Lernprogramm geschrieben haben.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-122">It's important to remember that, while this code was generated for us, it's standard ASP.NET MVC code, just like we've been writing throughout this tutorial.</span></span> <span data-ttu-id="fbbb0-123">Es wurde so sparen Sie Zeit beim würde auf Textbaustein controllercode schreiben, und erstellen manuell die stark typisierten Ansichten vorgesehen, dies ist jedoch die Art des generierten Codes Sie haben gelernt, die vorangestellt schlimm Warnungen in den Kommentaren gewarnt wird, wie Sie ändern darf nicht den Code.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-123">It's intended to save you the time you'd spend on writing boilerplate controller code and creating the strongly typed views manually, but this isn't the kind of generated code you may have seen prefaced with dire warnings in comments about how you mustn't change the code.</span></span> <span data-ttu-id="fbbb0-124">Dies ist der Code, und es wird vorausgesetzt, um ihn zu ändern.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-124">This is your code, and you're expected to change it.</span></span>

<span data-ttu-id="fbbb0-125">Daher beginnen wir mit einer schnellen bearbeiten, um die Indexansicht StoreManager (/ Views/StoreManager/Index.cshtml).</span><span class="sxs-lookup"><span data-stu-id="fbbb0-125">So, let's start with a quick edit to the StoreManager Index view (/Views/StoreManager/Index.cshtml).</span></span> <span data-ttu-id="fbbb0-126">Diese Ansicht zeigt eine Tabelle die Alben in unserem Store mit bearbeiten listet / Details / Löschen von Verknüpfungen und schließt das Album öffentlichen Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-126">This view will display a table which lists the Albums in our store with Edit / Details / Delete links, and includes the Album's public properties.</span></span> <span data-ttu-id="fbbb0-127">Das Feld AlbumArtUrl müssen entfernt werden, da es nicht in dieser Anzeige sehr nützlich ist.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-127">We'll remove the AlbumArtUrl field, as it's not very useful in this display.</span></span> <span data-ttu-id="fbbb0-128">In &lt;Tabelle&gt; Abschnitt des Codes Ansicht Entfernen der &lt;ten&gt; und &lt;td&gt; Elemente umgebenden AlbumArtUrl verweisen, wie durch die hervorgehobenen Zeilen unten angegeben:</span><span class="sxs-lookup"><span data-stu-id="fbbb0-128">In &lt;table&gt; section of the view code, remove the &lt;th&gt; and &lt;td&gt; elements surrounding AlbumArtUrl references, as indicated by the highlighted lines below:</span></span>

[!code-cshtml[Main](mvc-music-store-part-5/samples/sample1.cshtml)]

<span data-ttu-id="fbbb0-129">Der Code geänderte anzeigen wird wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="fbbb0-129">The modified view code will appear as follows:</span></span>

[!code-cshtml[Main](mvc-music-store-part-5/samples/sample2.cshtml)]

## <a name="a-first-look-at-the-store-manager"></a><span data-ttu-id="fbbb0-130">Ein erster Blick auf die Speicher-Manager</span><span class="sxs-lookup"><span data-stu-id="fbbb0-130">A first look at the Store Manager</span></span>

<span data-ttu-id="fbbb0-131">Jetzt wird führen Sie die Anwendung aus, und navigieren Sie zu/StoreManager /.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-131">Now run the application and browse to /StoreManager/.</span></span> <span data-ttu-id="fbbb0-132">Dadurch wird der Index Manager speichern soeben zeigt eine Liste von Alben im Speicher mit Links geänderten zu bearbeiten, Details, und löschen, angezeigt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-132">This displays the Store Manager Index we just modified, showing a list of the albums in the store with links to Edit, Details, and Delete.</span></span>

![](mvc-music-store-part-5/_static/image3.png)

<span data-ttu-id="fbbb0-133">Durch Klicken auf den Link bearbeiten zeigt ein Bearbeitungsformular mit Feldern für das Album, einschließlich der Dropdownlisten für "Genre" und Interpreten.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-133">Clicking the Edit link displays an edit form with fields for the Album, including dropdowns for Genre and Artist.</span></span>

![](mvc-music-store-part-5/_static/image4.png)

<span data-ttu-id="fbbb0-134">Klicken Sie auf den Link "Zurück zur Liste" im unteren Bereich, und klicken Sie auf den Link Details für ein Album.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-134">Click the "Back to List" link at the bottom, then click on the Details link for an Album.</span></span> <span data-ttu-id="fbbb0-135">Dies zeigt detaillierte Informationen für eine einzelne Album.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-135">This displays the detail information for an individual Album.</span></span>

![](mvc-music-store-part-5/_static/image5.png)

<span data-ttu-id="fbbb0-136">Klicken Sie erneut, klicken Sie auf der Rückseite Liste verknüpfen, dann klicken Sie auf einen Link löschen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-136">Again, click the Back to List link, then click on a Delete link.</span></span> <span data-ttu-id="fbbb0-137">Dies zeigt ein Dialogfeld zur Bestätigung Anzeigen der Albumdetails und gefragt werden, wenn es wirklich gelöscht werden soll.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-137">This displays a confirmation dialog, showing the album details and asking if we're sure we want to delete it.</span></span>

![](mvc-music-store-part-5/_static/image6.png)

<span data-ttu-id="fbbb0-138">Klicken auf die Schaltfläche "löschen" im unteren Bereich wird die Album löschen und zurückgegeben, um die Indexseite, die das Album gelöscht dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-138">Clicking the Delete button at the bottom will delete the album and return you to the Index page, which shows the album deleted.</span></span>

<span data-ttu-id="fbbb0-139">Mit der Speicher-Manager sind nicht fertig, jedoch können wir arbeiten, Controller und Ansichtscode für die CRUD-Vorgänge aus starten.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-139">We're not done with the Store Manager, but we have working controller and view code for the CRUD operations to start from.</span></span>

## <a name="looking-at-the-store-manager-controller-code"></a><span data-ttu-id="fbbb0-140">Betrachtung des Codes von Store-Manager-Controller</span><span class="sxs-lookup"><span data-stu-id="fbbb0-140">Looking at the Store Manager Controller code</span></span>

<span data-ttu-id="fbbb0-141">Der Speicher-Manager-Controller enthält großzügig bemessenen Code.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-141">The Store Manager Controller contains a good amount of code.</span></span> <span data-ttu-id="fbbb0-142">Gehen Sie wir noch über diesen von oben nach unten.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-142">Let's go through this from top to bottom.</span></span> <span data-ttu-id="fbbb0-143">Der Controller enthält einige standard-Namespaces für ein MVC-Controller als auch einen Verweis auf unseren Modelle-Namespace.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-143">The controller includes some standard namespaces for an MVC controller, as well as a reference to our Models namespace.</span></span> <span data-ttu-id="fbbb0-144">Der Controller hat eine private Instanz von MusicStoreEntities, von der Controlleraktionen jeweils für den Datenzugriff verwendet.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-144">The controller has a private instance of MusicStoreEntities, used by each of the controller actions for data access.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample3.cs)]

### <a name="store-manager-index-and-details-actions"></a><span data-ttu-id="fbbb0-145">Speichern Sie die Aktionen Manager Index "und" Details</span><span class="sxs-lookup"><span data-stu-id="fbbb0-145">Store Manager Index and Details actions</span></span>

<span data-ttu-id="fbbb0-146">Die Indexansicht Ruft eine Liste von Alben, einschließlich jedes Album verwiesen wird "Genre" und Interpreten, wie wir bereits gesehen haben, bei der Arbeit für die Methode Store durchsuchen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-146">The index view retrieves a list of Albums, including each album's referenced Genre and Artist information, as we previously saw when working on the Store Browse method.</span></span> <span data-ttu-id="fbbb0-147">Die Indexansicht liegt die Verweise auf die verknüpften Objekte im Anschluss an, damit dieses jedes Album "Genre" Namen und den Namen des Künstlers anzeigen kann, damit der Controller effizienter und Abfragen für diese Informationen in der ursprünglichen Anforderung wird.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-147">The Index view is following the references to the linked objects so that it can display each album's Genre name and Artist name, so the controller is being efficient and querying for this information in the original request.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample4.cs)]

<span data-ttu-id="fbbb0-148">Details-Controlleraktion der StoreManager Controller funktioniert genauso wie die Store Controller Details-Aktion, die wir Ihnen mitgeteilt zuvor haben - abgefragt Album nach ID, die mit der Methode wird, dann gibt sie zurück zur Ansicht.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-148">The StoreManager Controller's Details controller action works exactly the same as the Store Controller Details action we wrote previously - it queries for the Album by ID using the Find() method, then returns it to the view.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample5.cs)]

### <a name="the-create-action-methods"></a><span data-ttu-id="fbbb0-149">Das Erstellen von Aktionsmethoden</span><span class="sxs-lookup"><span data-stu-id="fbbb0-149">The Create Action Methods</span></span>

<span data-ttu-id="fbbb0-150">Die Aktionsmethoden erstellen sind etwas anders aus Einsen, die bisher gesehen haben, da sie Formulareingaben behandeln.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-150">The Create action methods are a little different from ones we've seen so far, because they handle form input.</span></span> <span data-ttu-id="fbbb0-151">Wenn ein Benutzer zuerst /StoreManager/erstellen/besucht werden sie ein leeres Formular angezeigt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-151">When a user first visits /StoreManager/Create/ they will be shown an empty form.</span></span> <span data-ttu-id="fbbb0-152">Die HTML-Seite enthält eine &lt;Formular&gt; -Element, Dropdownlisten und Textfeld enthält, Eingabeelementen in dem sie das Album-Details eingeben können.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-152">This HTML page will contain a &lt;form&gt; element that contains dropdown and textbox input elements where they can enter the album's details.</span></span>

<span data-ttu-id="fbbb0-153">Wenn der Benutzer in die Formularwerte Album voll ist, können sie die Schaltfläche "Speichern" zu senden, dass diese Änderungen werden wieder an die Anwendung innerhalb der Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-153">After the user fills in the Album form values, they can press the "Save" button to submit these changes back to our application to save within the database.</span></span> <span data-ttu-id="fbbb0-154">Wenn der Benutzer die Schaltfläche "Speichern" drückt die &lt;Formular&gt; HTTP-POST an die /StoreManager/erstellen/URL durchgeführt und übermitteln der &lt;Formular&gt; Werte als Teil der HTTP-POST-Anforderung.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-154">When the user presses the "save" button the &lt;form&gt; will perform an HTTP-POST back to the /StoreManager/Create/ URL and submit the &lt;form&gt; values as part of the HTTP-POST.</span></span>

<span data-ttu-id="fbbb0-155">ASP.NET MVC erlaubt es uns, der Logik dieser beiden Szenarien der URL-Aufruf problemlos aufteilen, indem Sie uns, implementieren Sie zwei separate "Erstellen" Aktionsmethoden in unsere StoreManagerController-Klasse – eine zum Behandeln der anfänglichen HTTP-GET-durchsuchen, um die /StoreManager/Create aktivieren / URL und die andere, die HTTP-POST der übermittelten Änderungen zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-155">ASP.NET MVC allows us to easily split up the logic of these two URL invocation scenarios by enabling us to implement two separate "Create" action methods within our StoreManagerController class – one to handle the initial HTTP-GET browse to the /StoreManager/Create/ URL, and the other to handle the HTTP-POST of the submitted changes.</span></span>

### <a name="passing-information-to-a-view-using-viewbag"></a><span data-ttu-id="fbbb0-156">Übergeben von Informationen zu einer Sicht mithilfe des ViewBag</span><span class="sxs-lookup"><span data-stu-id="fbbb0-156">Passing information to a View using ViewBag</span></span>

<span data-ttu-id="fbbb0-157">Wir haben das ViewBag-Objekt oben in diesem Lernprogramm verwendet, aber noch nicht viel über gesprochen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-157">We've used the ViewBag earlier in this tutorial, but haven't talked much about it.</span></span> <span data-ttu-id="fbbb0-158">Das ViewBag ermöglicht, Informationen zur Ansicht zu übergeben, ohne Verwendung eines stark typisierten Model-Objekts.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-158">The ViewBag allows us to pass information to the view without using a strongly typed model object.</span></span> <span data-ttu-id="fbbb0-159">In diesem Fall unsere bearbeiten HTTP-GET-Controlleraktion sowohl eine Liste von Genres und Künstler zum Formular, um den Dropdownlisten Auffüllen übergeben muss, und die einfachste Möglichkeit hierzu ist, um als ViewBag Elemente zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-159">In this case, our Edit HTTP-GET controller action needs to pass both a list of Genres and Artists to the form to populate the dropdowns, and the simplest way to do that is to return them as ViewBag items.</span></span>

<span data-ttu-id="fbbb0-160">Das ViewBag-Objekt ist ein dynamisches Objekt ist, was bedeutet, dass Sie ViewBag.Foo oder ViewBag.YourNameHere eingeben können, ohne das Schreiben von Code, um diese Eigenschaften zu definieren.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-160">The ViewBag is a dynamic object, meaning that you can type ViewBag.Foo or ViewBag.YourNameHere without writing code to define those properties.</span></span> <span data-ttu-id="fbbb0-161">In diesem Fall wird der controllercode, damit die Dropdown-Werte, die mit dem Formular übermittelt werden, GenreId und ArtistId, die die Album-Eigenschaften, die sie festlegen, sind ViewBag.GenreId und ViewBag.ArtistId verwendet.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-161">In this case, the controller code uses ViewBag.GenreId and ViewBag.ArtistId so that the dropdown values submitted with the form will be GenreId and ArtistId, which are the Album properties they will be setting.</span></span>

<span data-ttu-id="fbbb0-162">Diese Dropdownliste Werte werden zurückgegeben, in das Formular unter Verwendung der SelectList-Objekts, die nur für diesen Zweck erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-162">These dropdown values are returned to the form using the SelectList object, which is built just for that purpose.</span></span> <span data-ttu-id="fbbb0-163">Dies erfolgt mithilfe von Code wie folgt:</span><span class="sxs-lookup"><span data-stu-id="fbbb0-163">This is done using code like this:</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample6.cs)]

<span data-ttu-id="fbbb0-164">Wie Sie aus der Methodencode Aktion sehen können, sind drei Parameter verwendet wird, auf dieses Objekt zu erstellen:</span><span class="sxs-lookup"><span data-stu-id="fbbb0-164">As you can see from the action method code, three parameters are being used to create this object:</span></span>

- <span data-ttu-id="fbbb0-165">Die Liste der Elemente aus die Dropdownliste wird angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-165">The list of items the dropdown will be displaying.</span></span> <span data-ttu-id="fbbb0-166">Beachten Sie, dass dieses Element nicht bloß eine Zeichenfolge – wir haben eine Liste von Genres übergeben.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-166">Note that this isn't just a string - we're passing a list of Genres.</span></span>
- <span data-ttu-id="fbbb0-167">Der nächste Parameter, die die SelectList übergeben werden, ist der Wert der ausgewählten.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-167">The next parameter being passed to the SelectList is the Selected Value.</span></span> <span data-ttu-id="fbbb0-168">Diese wie der SelectList weiß, wie ein Element in der Liste vorab ausgewählt werden kann.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-168">This how the SelectList knows how to pre-select an item in the list.</span></span> <span data-ttu-id="fbbb0-169">Dies ist einfacher zu verstehen, wenn das Formular bearbeiten, betrachten wir also ziemlich ähnliche wird.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-169">This will be easier to understand when we look at the Edit form, which is pretty similar.</span></span>
- <span data-ttu-id="fbbb0-170">Der letzte Parameter ist die Eigenschaft angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-170">The final parameter is the property to be displayed.</span></span> <span data-ttu-id="fbbb0-171">In diesem Fall ist dies an, dass die Genre.Name-Eigenschaft ist, was dem Benutzer angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-171">In this case, this is indicating that the Genre.Name property is what will be shown to the user.</span></span>

<span data-ttu-id="fbbb0-172">Denken Sie daran klicken Sie dann das Erstellen von HTTP-GET-Aktion ist ganz einfach – zwei SelectLists ViewBag hinzugefügt werden und keine Modellobjekt an das Formular übergeben wird, (da er noch nicht erstellt wurde).</span><span class="sxs-lookup"><span data-stu-id="fbbb0-172">With that in mind, then, the HTTP-GET Create action is pretty simple - two SelectLists are added to the ViewBag, and no model object is passed to the form (since it hasn't been created yet).</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample7.cs)]

### <a name="html-helpers-to-display-the-drop-downs-in-the-create-view"></a><span data-ttu-id="fbbb0-173">HTML-Hilfsmethoden, um das Ausschalten des Drop in die Create View anzuzeigen</span><span class="sxs-lookup"><span data-stu-id="fbbb0-173">HTML Helpers to display the Drop Downs in the Create View</span></span>

<span data-ttu-id="fbbb0-174">Da wir nicht die Rede haben wie das Dropdown-Werte in die Ansicht übergeben werden, werfen wir einen kurzen Blick auf die Ansicht, um festzustellen, wie diese Werte angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-174">Since we've talked about how the drop down values are passed to the view, let's take a quick look at the view to see how those values are displayed.</span></span> <span data-ttu-id="fbbb0-175">In den Code anzeigen (/ Views/StoreManager/Create.cshtml), sehen Sie zum Anzeigen der Dropdownliste "Genre" ist der folgende Aufruf erfolgt nach unten.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-175">In the view code (/Views/StoreManager/Create.cshtml), you'll see the following call is made to display the Genre drop down.</span></span>

[!code-cshtml[Main](mvc-music-store-part-5/samples/sample8.cshtml)]

<span data-ttu-id="fbbb0-176">Dies wird als eine HTML-Hilfsobjekt - eine Hilfsprogrammmethode bezeichnet, die eine allgemeine Ansicht Aufgabe ausführt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-176">This is known as an HTML Helper - a utility method which performs a common view task.</span></span> <span data-ttu-id="fbbb0-177">HTML-Hilfsmethoden sind sehr nützlich, in unserem Code anzeigen lassen, präziser und besser lesbar.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-177">HTML Helpers are very useful in keeping our view code concise and readable.</span></span> <span data-ttu-id="fbbb0-178">Das Hilfsobjekt Html.DropDownList wird von ASP.NET MVC bereitgestellt, aber später eingehendem ist es möglich, unser eigenes Hilfen für Code anzeigen zu erstellen, die wir in unserer Anwendung wiederverwendet werden.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-178">The Html.DropDownList helper is provided by ASP.NET MVC, but as we'll see later it's possible to create our own helpers for view code we'll reuse in our application.</span></span>

<span data-ttu-id="fbbb0-179">Der Aufruf Html.DropDownList muss nur zwei Dinge - mitgeteilt werden, wobei zum Abrufen der Liste aus, um anzuzeigen, und welche Wert (sofern vorhanden) vorab ausgewählt werden soll.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-179">The Html.DropDownList call just needs to be told two things - where to get the list to display, and what value (if any) should be pre-selected.</span></span> <span data-ttu-id="fbbb0-180">Der erste Parameter, GenreId, weist der DropDownList-Wert namens GenreId in das Modell oder die ViewBag gesucht werden soll.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-180">The first parameter, GenreId, tells the DropDownList to look for a value named GenreId in either the model or ViewBag.</span></span> <span data-ttu-id="fbbb0-181">Der zweite Parameter wird verwendet, an, dass der Wert, um anzuzeigen, wie zunächst in der Dropdownliste ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-181">The second parameter is used to indicate the value to show as initially selected in the drop down list.</span></span> <span data-ttu-id="fbbb0-182">Da dieses Formular ein Erstellungsformular ist, wird kein Wert vorab ausgewählten sein, und "String.Empty" übergeben.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-182">Since this form is a Create form, there's no value to be preselected and String.Empty is passed.</span></span>

### <a name="handling-the-posted-form-values"></a><span data-ttu-id="fbbb0-183">Behandlung von die gebucht Formularwerte</span><span class="sxs-lookup"><span data-stu-id="fbbb0-183">Handling the Posted Form values</span></span>

<span data-ttu-id="fbbb0-184">Wie bereits erwähnt, sind zwei Aktionsmethoden jedes Formular zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-184">As we discussed before, there are two action methods associated with each form.</span></span> <span data-ttu-id="fbbb0-185">Die erste verarbeitet die HTTP-GET-Anforderung und zeigt das Formular.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-185">The first handles the HTTP-GET request and displays the form.</span></span> <span data-ttu-id="fbbb0-186">Die zweite verarbeitet die HTTP-POST-Anforderung, die die übermittelte Formularwerte enthält.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-186">The second handles the HTTP-POST request, which contains the submitted form values.</span></span> <span data-ttu-id="fbbb0-187">Beachten Sie, dass Controlleraktion ein [HttpPost]-Attribut verfügt, die ASP.NET MVC mitteilt, dass er nur auf HTTP-POST-Anforderungen reagieren soll.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-187">Notice that controller action has an [HttpPost] attribute, which tells ASP.NET MVC that it should only respond to HTTP-POST requests.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample9.cs)]

<span data-ttu-id="fbbb0-188">Diese Aktion hat vier Aufgaben:</span><span class="sxs-lookup"><span data-stu-id="fbbb0-188">This action has four responsibilities:</span></span>

- 1. <span data-ttu-id="fbbb0-189">Lesen Sie die Formularwerte</span><span class="sxs-lookup"><span data-stu-id="fbbb0-189">Read the form values</span></span>
- 2. <span data-ttu-id="fbbb0-190">Überprüfen Sie, ob die Formularwerte alle Validierungsregeln übergeben</span><span class="sxs-lookup"><span data-stu-id="fbbb0-190">Check if the form values pass any validation rules</span></span>
- 3. <span data-ttu-id="fbbb0-191">Wenn es sich bei der Übermittlung des Formulars gültig ist, speichern Sie die Daten und die aktualisierte Liste angezeigt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-191">If the form submission is valid, save the data and display the updated list</span></span>
- 4. <span data-ttu-id="fbbb0-192">Wenn es sich bei der Übermittlung des Formulars nicht gültig ist, erneut anzuzeigen Sie das Formular mit Überprüfungsfehlern.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-192">If the form submission is not valid, redisplay the form with validation errors</span></span>

#### <a name="reading-form-values-with-model-binding"></a><span data-ttu-id="fbbb0-193">Lesen von Formularwerte mit Modellbindung</span><span class="sxs-lookup"><span data-stu-id="fbbb0-193">Reading Form Values with Model Binding</span></span>

<span data-ttu-id="fbbb0-194">Controlleraktion wird von einer Formularübergabe verarbeitet, die Werte für GenreId und ArtistId (aus der Dropdown-Liste) und Textfeldwerte für Titel, Preis und AlbumArtUrl enthält.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-194">The controller action is processing a form submission that includes values for GenreId and ArtistId (from the drop down list) and textbox values for Title, Price, and AlbumArtUrl.</span></span> <span data-ttu-id="fbbb0-195">Es ist, zwar möglich, direkt auf Formularwerte zuzugreifen ist ein besserer Ansatz zum Verwenden der Modell Bindung-Funktionen in ASP.NET MVC erstellt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-195">While it's possible to directly access form values, a better approach is to use the Model Binding capabilities built into ASP.NET MVC.</span></span> <span data-ttu-id="fbbb0-196">Wenn eine Controlleraktion einen Modelltyp als Parameter akzeptiert, versucht ASP.NET MVC, ein Objekt dieses Typs mit Formulareingaben (ebenso wie Route und Abfragezeichenfolgen-Werte) auffüllen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-196">When a controller action takes a model type as a parameter, ASP.NET MVC will attempt to populate an object of that type using form inputs (as well as route and querystring values).</span></span> <span data-ttu-id="fbbb0-197">Dies geschieht, indem die Suche nach Werten, deren Namen entsprechen die Eigenschaften des Modellobjekts, z. B. Wenn Sie das neue Album Objekt GenreId Wert festlegen, sucht es nach der Eingabe mit dem Namen GenreId.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-197">It does this by looking for values whose names match properties of the model object, e.g. when setting the new Album object's GenreId value, it looks for an input with the name GenreId.</span></span> <span data-ttu-id="fbbb0-198">Beim Erstellen von Ansichten, verwenden die Standardmethoden in ASP.NET MVC, werden die Formulare immer mithilfe von Eigenschaftsnamen als Eingabe Feldnamen, damit diese Feldnamen nur übereinstimmen gerendert werden.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-198">When you create views using the standard methods in ASP.NET MVC, the forms will always be rendered using property names as input field names, so this the field names will just match up.</span></span>

#### <a name="validating-the-model"></a><span data-ttu-id="fbbb0-199">Beim Validieren des Modells</span><span class="sxs-lookup"><span data-stu-id="fbbb0-199">Validating the Model</span></span>

<span data-ttu-id="fbbb0-200">Das Modell wird durch einen einfachen Aufruf ModelState.IsValid überprüft.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-200">The model is validated with a simple call to ModelState.IsValid.</span></span> <span data-ttu-id="fbbb0-201">Dies nicht getan haben wir unsere Album-Klasse alle Validierungsregeln hinzugefügt noch - wir erledigen, die in einem Bit – also jetzt diese Prüfung viel zu tun hat.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-201">We haven't added any validation rules to our Album class yet - we'll do that in a bit - so right now this check doesn't have much to do.</span></span> <span data-ttu-id="fbbb0-202">Wichtig ist, dass diese Überprüfung ModelStat.IsValid den Validierungsregeln angepasst wird, die wir uns auf unserem Modell konzentrieren, damit zukünftige Änderungen Validierungsregeln alle Updates für den Controller Aktionscode erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-202">What's important is that this ModelStat.IsValid check will adapt to the validation rules we put on our model, so future changes to validation rules won't require any updates to the controller action code.</span></span>

#### <a name="saving-the-submitted-values"></a><span data-ttu-id="fbbb0-203">Speichern der gesendeten Werte</span><span class="sxs-lookup"><span data-stu-id="fbbb0-203">Saving the submitted values</span></span>

<span data-ttu-id="fbbb0-204">Wenn es sich bei der Übermittlung des Formulars die Clusterüberprüfung erfolgreich war, ist es Zeit für die Werte in der Datenbank zu speichern.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-204">If the form submission passes validation, it's time to save the values to the database.</span></span> <span data-ttu-id="fbbb0-205">Mit Entity Framework erfordert, dass nur das Modell auf die Alben Auflistung hinzufügen und SaveChanges aufrufen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-205">With Entity Framework, that just requires adding the model to the Albums collection and calling SaveChanges.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample10.cs)]

<span data-ttu-id="fbbb0-206">Entity Framework generiert die entsprechenden SQL-Befehle auf den Wert beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-206">Entity Framework generates the appropriate SQL commands to persist the value.</span></span> <span data-ttu-id="fbbb0-207">Nach dem Speichern der Daten, leiten wir zurück zur Liste der Alben, damit wir unsere Update sehen können.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-207">After saving the data, we redirect back to the list of Albums so we can see our update.</span></span> <span data-ttu-id="fbbb0-208">Dies erfolgt durch RedirectToAction zurückgeben, mit dem Namen der Controlleraktion, die wir anzeigen möchten.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-208">This is done by returning RedirectToAction with the name of the controller action we want displayed.</span></span> <span data-ttu-id="fbbb0-209">In diesem Fall ist, die die Index-Methode.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-209">In this case, that's the Index method.</span></span>

#### <a name="displaying-invalid-form-submissions-with-validation-errors"></a><span data-ttu-id="fbbb0-210">Ungültige Formularübermittlung mit Überprüfungsfehlern anzeigen</span><span class="sxs-lookup"><span data-stu-id="fbbb0-210">Displaying invalid form submissions with Validation Errors</span></span>

<span data-ttu-id="fbbb0-211">Im Fall von ungültigen Eingaben die Dropdownliste Werte hinzugefügt, das ViewBag-Objekt (wie im Fall des HTTP-GET) und gebundene Modellwerte werden zurück an die Ansicht übergeben, für die Anzeige.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-211">In the case of invalid form input, the dropdown values are added to the ViewBag (as in the HTTP-GET case) and the bound model values are passed back to the view for display.</span></span> <span data-ttu-id="fbbb0-212">Validierungsfehler werden automatisch angezeigt, mit der @Html.ValidationMessageFor HTML-Hilfsobjekt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-212">Validation errors are automatically displayed using the @Html.ValidationMessageFor HTML Helper.</span></span>

#### <a name="testing-the-create-form"></a><span data-ttu-id="fbbb0-213">Testen das Formular erstellen</span><span class="sxs-lookup"><span data-stu-id="fbbb0-213">Testing the Create Form</span></span>

<span data-ttu-id="fbbb0-214">Um dies, führen Sie die Anwendung und navigieren Sie zu /StoreManager/erstellen / - testen erfahren dies Sie, leere Formular, die von der StoreController erstellen HTTP-GET-Methode zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-214">To test this out, run the application and browse to /StoreManager/Create/ - this will show you the blank form which was returned by the StoreController Create HTTP-GET method.</span></span>

<span data-ttu-id="fbbb0-215">Einige Werte füllen Sie, und klicken Sie auf die Schaltfläche "erstellen", um die Übermittlung des Formulars.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-215">Fill in some values and click the Create button to submit the form.</span></span>

![](mvc-music-store-part-5/_static/image7.png)

![](mvc-music-store-part-5/_static/image8.png)

### <a name="handling-edits"></a><span data-ttu-id="fbbb0-216">Behandlung von Änderungen</span><span class="sxs-lookup"><span data-stu-id="fbbb0-216">Handling Edits</span></span>

<span data-ttu-id="fbbb0-217">Das Bearbeiten-Aktion-Paar (HTTP-GET und HTTP-POST) sind sehr ähnlich Aktionsmethoden erstellen, denen wir gerade angesehen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-217">The Edit action pair (HTTP-GET and HTTP-POST) are very similar to the Create action methods we just looked at.</span></span> <span data-ttu-id="fbbb0-218">Da das Szenario Bearbeiten arbeiten mit einem vorhandenen Album, das Bearbeiten HTTP-GET umfasst Methode basierte auf dem Parameter "Id" Album lädt übergebenen über die Route.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-218">Since the edit scenario involves working with an existing album, the Edit HTTP-GET method loads the Album based on the "id" parameter, passed in via the route.</span></span> <span data-ttu-id="fbbb0-219">Dieser Code zum Abrufen von ein Album AlbumId entspricht dem wir zuvor in den Details-Controlleraktion besprochen haben.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-219">This code for retrieving an album by AlbumId is the same as we've previously looked at in the Details controller action.</span></span> <span data-ttu-id="fbbb0-220">Wie bei der Create / HTTP-GET-Methode das Dropdown-Werte werden über das ViewBag-Objekt zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-220">As with the Create / HTTP-GET method, the drop down values are returned via the ViewBag.</span></span> <span data-ttu-id="fbbb0-221">Dies ermöglicht es, ein Album als unsere Modellobjekt an die Sicht zurückzugeben (die auf die Klasse Album stark typisiert ist) beim Übergeben von zusätzlicher Daten (z. B. eine Liste von Genres) über das ViewBag-Objekt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-221">This allows us to return an Album as our model object to the view (which is strongly typed to the Album class) while passing additional data (e.g. a list of Genres) via the ViewBag.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample11.cs)]

<span data-ttu-id="fbbb0-222">Die HTTP-POST bearbeiten-Aktion ist vergleichbar mit dem die Aktion des HTTP-POST erstellen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-222">The Edit HTTP-POST action is very similar to the Create HTTP-POST action.</span></span> <span data-ttu-id="fbbb0-223">Der einzige Unterschied ist, die anstelle der Datenbank ein neues Album hinzugefügt. Alben-Auflistung, haben wir die aktuelle Instanz des Albums Suchen von mit Db. Entry(Album) und seinen Status auf "geändert" festlegen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-223">The only difference is that instead of adding a new album to the db.Albums collection, we're finding the current instance of the Album using db.Entry(album) and setting its state to Modified.</span></span> <span data-ttu-id="fbbb0-224">Das weist Entity Framework, dass es einem vorhandenen Album im Gegensatz zur Erstellung einer neuen gewählt haben.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-224">This tells Entity Framework that we are modifying an existing album as opposed to creating a new one.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample12.cs)]

<span data-ttu-id="fbbb0-225">Wir können dies zu testen, durch Ausführen der Anwendung zu/StoreManger/durchsuchen, und klicken Sie auf den Bearbeitungslink für ein Album.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-225">We can test this out by running the application and browsing to /StoreManger/, then clicking the Edit link for an album.</span></span>

![](mvc-music-store-part-5/_static/image9.png)

<span data-ttu-id="fbbb0-226">Dies zeigt den bearbeiten-Formular angezeigt, indem Sie das Bearbeiten von HTTP-GET-Methode.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-226">This displays the Edit form shown by the Edit HTTP-GET method.</span></span> <span data-ttu-id="fbbb0-227">Einige Werte füllen Sie, und klicken Sie auf die Schaltfläche "Speichern".</span><span class="sxs-lookup"><span data-stu-id="fbbb0-227">Fill in some values and click the Save button.</span></span>

![](mvc-music-store-part-5/_static/image10.png)

<span data-ttu-id="fbbb0-228">Das Formular sendet, speichert die Werte, es gibt uns Album-Liste, die anzeigt, dass die Werte aktualisiert wurden.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-228">This posts the form, saves the values, and returns us to the Album list, showing that the values were updated.</span></span>

![](mvc-music-store-part-5/_static/image11.png)

### <a name="handling-deletion"></a><span data-ttu-id="fbbb0-229">Behandlung von löschen</span><span class="sxs-lookup"><span data-stu-id="fbbb0-229">Handling Deletion</span></span>

<span data-ttu-id="fbbb0-230">Löschvorgang folgt demselben Muster wie bearbeiten und erstellen, verwenden einen Controlleraktion aus, um das Bestätigungsformular anzuzeigen und eine andere Controlleraktion der Übermittlung des Formulars zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-230">Deletion follows the same pattern as Edit and Create, using one controller action to display the confirmation form, and another controller action to handle the form submission.</span></span>

<span data-ttu-id="fbbb0-231">Löschen von HTTP-GET-Controlleraktion entspricht genau unserer vorherigen Details zum Speicher-Manager-Controlleraktion.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-231">The HTTP-GET Delete controller action is exactly the same as our previous Store Manager Details controller action.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample13.cs)]

<span data-ttu-id="fbbb0-232">Wir haben ein Formular, das stark typisiert ist auf einen Album-Typ, mit der Delete-Ansicht-Inhaltsvorlage anzeigen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-232">We display a form that's strongly typed to an Album type, using the Delete view content template.</span></span>

![](mvc-music-store-part-5/_static/image12.png)

<span data-ttu-id="fbbb0-233">Die Vorlage "löschen" zeigt alle Felder für das Modell, aber wir können diese aus erheblich vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-233">The Delete template shows all the fields for the model, but we can simplify that down quite a bit.</span></span> <span data-ttu-id="fbbb0-234">Ändern Sie den Code anzeigen in /Views/StoreManager/Delete.cshtml wie.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-234">Change the view code in /Views/StoreManager/Delete.cshtml to the following.</span></span>

[!code-cshtml[Main](mvc-music-store-part-5/samples/sample14.cshtml)]

<span data-ttu-id="fbbb0-235">Dadurch wird eine vereinfachte Löschen Bestätigung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-235">This displays a simplified Delete confirmation.</span></span>

![](mvc-music-store-part-5/_static/image13.png)

<span data-ttu-id="fbbb0-236">Klicken auf die Schaltfläche "löschen" bewirkt, dass das Formular an den Server bereitgestellt werden, die DeleteConfirmed Aktion ausführt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-236">Clicking the Delete button causes the form to be posted back to the server, which executes the DeleteConfirmed action.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample15.cs)]

<span data-ttu-id="fbbb0-237">Unsere HTTP-POST löschen Controlleraktion werden folgende Aktionen ausgeführt:</span><span class="sxs-lookup"><span data-stu-id="fbbb0-237">Our HTTP-POST Delete Controller Action takes the following actions:</span></span>

- 1. <span data-ttu-id="fbbb0-238">Lädt das Album nach ID</span><span class="sxs-lookup"><span data-stu-id="fbbb0-238">Loads the Album by ID</span></span>
- 2. <span data-ttu-id="fbbb0-239">Das Album gelöscht und die Änderungen zu speichern</span><span class="sxs-lookup"><span data-stu-id="fbbb0-239">Deletes it the album and save changes</span></span>
- 3. <span data-ttu-id="fbbb0-240">Leitet auf den Index, der anzeigt, dass das Album aus der Liste entfernt wurde</span><span class="sxs-lookup"><span data-stu-id="fbbb0-240">Redirects to the Index, showing that the Album was removed from the list</span></span>

<span data-ttu-id="fbbb0-241">Um dies zu testen, führen Sie die Anwendung aus, und navigieren Sie zu /StoreManager.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-241">To test this, run the application and browse to /StoreManager.</span></span> <span data-ttu-id="fbbb0-242">Wählen Sie ein Album aus der Liste aus, und klicken Sie auf den Link löschen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-242">Select an album from the list and click the Delete link.</span></span>

![](mvc-music-store-part-5/_static/image14.png)

<span data-ttu-id="fbbb0-243">Dadurch werden unsere Delete Bestätigungsbildschirm angezeigt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-243">This displays our Delete confirmation screen.</span></span>

![](mvc-music-store-part-5/_static/image15.png)

<span data-ttu-id="fbbb0-244">Klicken auf die Schaltfläche "löschen" Album entfernt und gibt uns, die Speicher-Manager-Indexseite, der anzeigt, dass das Album gelöscht wurde.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-244">Clicking the Delete button removes the album and returns us to the Store Manager Index page, which shows that the album has been deleted.</span></span>

![](mvc-music-store-part-5/_static/image16.png)

### <a name="using-a-custom-html-helper-to-truncate-text"></a><span data-ttu-id="fbbb0-245">Mithilfe einer benutzerdefinierten HTML-Hilfsmethoden zum Abschneiden von text</span><span class="sxs-lookup"><span data-stu-id="fbbb0-245">Using a custom HTML Helper to truncate text</span></span>

<span data-ttu-id="fbbb0-246">Wir haben ein mögliches Problem mit unserer Indexseite von Speicher-Manager.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-246">We've got one potential issue with our Store Manager Index page.</span></span> <span data-ttu-id="fbbb0-247">Unsere Albumtitel und Namen Interpreten Eigenschaften können sowohl lang genug sein, dass sie deaktiviert unsere Tabellenformat auslösen könnte.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-247">Our Album Title and Artist Name properties can both be long enough that they could throw off our table formatting.</span></span> <span data-ttu-id="fbbb0-248">Wir erstellen eine benutzerdefinierte HTML-Hilfsobjekt um zulässt, diese und andere Eigenschaften in unserer Ansichten einfach abgeschnitten.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-248">We'll create a custom HTML Helper to allow us to easily truncate these and other properties in our Views.</span></span>

![](mvc-music-store-part-5/_static/image17.png)

<span data-ttu-id="fbbb0-249">Der Razor- @helper Syntax machte es leicht zu eigener Hilfsfunktionen für die Verwendung in Ihren Ansichten zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-249">Razor's @helper syntax has made it pretty easy to create your own helper functions for use in your views.</span></span> <span data-ttu-id="fbbb0-250">Öffnen Sie die /Views/StoreManager/Index.cshtml anzuzeigen, und fügen Sie folgenden Code direkt nach der @model Zeile.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-250">Open the /Views/StoreManager/Index.cshtml view and add the following code directly after the @model line.</span></span>

[!code-cshtml[Main](mvc-music-store-part-5/samples/sample16.cshtml)]

<span data-ttu-id="fbbb0-251">Diese Hilfsmethode verwendet eine Zeichenfolge und einer maximalen Länge aus, um zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-251">This helper method takes a string and a maximum length to allow.</span></span> <span data-ttu-id="fbbb0-252">Wenn der angegebene Text kürzer als die Länge angegeben ist, werden sie als das Hilfsobjekt ausgegeben-ist.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-252">If the text supplied is shorter than the length specified, the helper outputs it as-is.</span></span> <span data-ttu-id="fbbb0-253">Wenn es länger ist, klicken Sie dann kürzt den Text und rendert "..." für den Rest.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-253">If it is longer, then it truncates the text and renders "…" for the remainder.</span></span>

<span data-ttu-id="fbbb0-254">Jetzt können wir unsere Truncate-Hilfsprogramm verwenden, um sicherzustellen, dass sowohl die Interpret den Namen der Albumtitel weniger als 25 Zeichen sind.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-254">Now we can use our Truncate helper to ensure that both the Album Title and Artist Name properties are less than 25 characters.</span></span> <span data-ttu-id="fbbb0-255">Der vollständige Ansichtscode mit unserem neuen Truncate-Hilfsprogramm wird unten angezeigt.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-255">The complete view code using our new Truncate helper appears below.</span></span>

[!code-cshtml[Main](mvc-music-store-part-5/samples/sample17.cshtml)]

<span data-ttu-id="fbbb0-256">Jetzt Wenn wir die /StoreManager/ URL navigieren, werden die Alben und Titel unten unsere maximale Länge gespeichert.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-256">Now when we browse the /StoreManager/ URL, the albums and titles are kept below our maximum lengths.</span></span>

![](mvc-music-store-part-5/_static/image18.png)

<span data-ttu-id="fbbb0-257">Hinweis: Dies zeigt die einfachen Fall erstellen und verwenden eine Hilfsmethode in einer Ansicht.</span><span class="sxs-lookup"><span data-stu-id="fbbb0-257">Note: This shows the simple case of creating and using a helper in one view.</span></span> <span data-ttu-id="fbbb0-258">Weitere Informationen finden Sie Informationen zum Erstellen von Hilfsprogrammen, die Sie in Ihrer Website verwenden können, finden Sie in meinem Blogbeitrag: [http://bit.ly/mvc3-helper-options](http://bit.ly/mvc3-helper-options)</span><span class="sxs-lookup"><span data-stu-id="fbbb0-258">To learn more about creating helpers that you can use throughout your site, see my blog post: [http://bit.ly/mvc3-helper-options](http://bit.ly/mvc3-helper-options)</span></span>


> [!div class="step-by-step"]
> <span data-ttu-id="fbbb0-259">[Zurück](mvc-music-store-part-4.md)
> [Weiter](mvc-music-store-part-6.md)</span><span class="sxs-lookup"><span data-stu-id="fbbb0-259">[Previous](mvc-music-store-part-4.md)
[Next](mvc-music-store-part-6.md)</span></span>
