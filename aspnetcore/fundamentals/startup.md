---
title: Start der Anwendung in ASP.NET Core
author: ardalis
description: "Erläutert die Startklasse in ASP.NET Core."
keywords: ASP.NET Core, Start konfigurieren-Methode, ConfigureServices-Methode
ms.author: tdykstra
manager: wpickett
ms.date: 02/29/2017
ms.topic: article
ms.technology: aspnet
ms.prod: asp.net-core
uid: fundamentals/startup
ms.openlocfilehash: 69af91de6d2c48af58bc10a32d8857af18a41b6a
ms.sourcegitcommit: 9cdbfd0d670d70b9c354216aabee260c52dad5ee
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/12/2017
---
# <a name="application-startup-in-aspnet-core"></a><span data-ttu-id="d8e24-104">Start der Anwendung in ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="d8e24-104">Application Startup in ASP.NET Core</span></span>

<span data-ttu-id="d8e24-105">Durch [Steve Smith](https://ardalis.com/) und [Tom Dykstra](https://github.com/tdykstra/)</span><span class="sxs-lookup"><span data-stu-id="d8e24-105">By [Steve Smith](https://ardalis.com/) and [Tom Dykstra](https://github.com/tdykstra/)</span></span>

<span data-ttu-id="d8e24-106">Die `Startup` Klasse konfiguriert werden, Dienste und die Anwendung Anforderungspipeline.</span><span class="sxs-lookup"><span data-stu-id="d8e24-106">The `Startup` class configures services and the application's request pipeline.</span></span> 

## <a name="the-startup-class"></a><span data-ttu-id="d8e24-107">Die Startklasse.</span><span class="sxs-lookup"><span data-stu-id="d8e24-107">The Startup class</span></span>

<span data-ttu-id="d8e24-108">ASP.NET Core apps erfordern eine `Startup` Klasse.</span><span class="sxs-lookup"><span data-stu-id="d8e24-108">ASP.NET Core apps require a `Startup` class.</span></span> <span data-ttu-id="d8e24-109">Gemäß der Konvention werden die `Startup` Klasse heißt "Start".</span><span class="sxs-lookup"><span data-stu-id="d8e24-109">By convention, the `Startup` class is named "Startup".</span></span> <span data-ttu-id="d8e24-110">Geben Sie den Namen des Start-Klasse in der `Main` des Programms [WebHostBuilderExtensions](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilderextensions) [ `UseStartup<TStartup>` ](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilderextensions#Microsoft_AspNetCore_Hosting_WebHostBuilderExtensions_UseStartup__1_Microsoft_AspNetCore_Hosting_IWebHostBuilder_) Methode.</span><span class="sxs-lookup"><span data-stu-id="d8e24-110">You specify the startup class name in the `Main` program's [WebHostBuilderExtensions](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilderextensions) [`UseStartup<TStartup>`](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.webhostbuilderextensions#Microsoft_AspNetCore_Hosting_WebHostBuilderExtensions_UseStartup__1_Microsoft_AspNetCore_Hosting_IWebHostBuilder_) method.</span></span> <span data-ttu-id="d8e24-111">Finden Sie unter [Hosting](xref:fundamentals/hosting) erfahren Sie mehr über `WebHostBuilder`, dem ausgeführt wird, bevor Sie `Startup`.</span><span class="sxs-lookup"><span data-stu-id="d8e24-111">See [Hosting](xref:fundamentals/hosting) to learn more about `WebHostBuilder`, which runs before `Startup`.</span></span>

<span data-ttu-id="d8e24-112">Sie können separate definieren `Startup` Klassen für unterschiedliche Umgebungen und den entsprechenden eine zur Laufzeit ausgewählt werden.</span><span class="sxs-lookup"><span data-stu-id="d8e24-112">You can define separate `Startup` classes for different environments, and the appropriate one will be selected at runtime.</span></span> <span data-ttu-id="d8e24-113">Bei Angabe von `startupAssembly` in der [WebHost Konfiguration](https://docs.microsoft.com/aspnet/core/fundamentals/hosting?tabs=aspnetcore2x#configuring-a-host) oder hosting-Optionen, Startassembly geladen werden, und suchen Sie nach einer `Startup` oder `Startup[Environment]` Typ.</span><span class="sxs-lookup"><span data-stu-id="d8e24-113">If you specify `startupAssembly` in the [WebHost configuration](https://docs.microsoft.com/aspnet/core/fundamentals/hosting?tabs=aspnetcore2x#configuring-a-host) or options, hosting will load that startup assembly and search for a `Startup` or `Startup[Environment]` type.</span></span> <span data-ttu-id="d8e24-114">Die Klasse, deren Name Suffix übereinstimmt, die aktuelle Umgebung priorisiert werden wird, wenn also die Anwendung, in ausgeführt wird der *Entwicklung* Umgebung, und enthält sowohl eine `Startup` und ein `StartupDevelopment` -Klasse, die `StartupDevelopment` Klasse verwendet.</span><span class="sxs-lookup"><span data-stu-id="d8e24-114">The class whose name suffix matches the current environment will be prioritized, so if the app is run in the *Development* environment, and includes both a `Startup` and a `StartupDevelopment` class, the `StartupDevelopment` class will be used.</span></span> <span data-ttu-id="d8e24-115">Finden Sie unter [FindStartupType](https://github.com/aspnet/Hosting/blob/rel/1.1.0/src/Microsoft.AspNetCore.Hosting/Internal/StartupLoader.cs) in `StartupLoader` und [arbeiten mit mehreren Umgebungen](environments.md#startup-conventions).</span><span class="sxs-lookup"><span data-stu-id="d8e24-115">See [FindStartupType](https://github.com/aspnet/Hosting/blob/rel/1.1.0/src/Microsoft.AspNetCore.Hosting/Internal/StartupLoader.cs) in `StartupLoader` and [Working with multiple environments](environments.md#startup-conventions).</span></span>

<span data-ttu-id="d8e24-116">Alternativ können Sie eine feste definieren `Startup` Klasse, die unabhängig von der Umgebung durch den Aufruf verwendet werden, `UseStartup<TStartup>`.</span><span class="sxs-lookup"><span data-stu-id="d8e24-116">Alternatively, you can define a fixed `Startup` class that will be used regardless of the environment by calling `UseStartup<TStartup>`.</span></span> <span data-ttu-id="d8e24-117">Dies ist die empfohlene Vorgehensweise.</span><span class="sxs-lookup"><span data-stu-id="d8e24-117">This is the recommended approach.</span></span>

<span data-ttu-id="d8e24-118">Die `Startup` Klassenkonstruktor kann Abhängigkeiten, die bereitgestellt sind akzeptieren [Abhängigkeitsinjektion](xref:fundamentals/dependency-injection).</span><span class="sxs-lookup"><span data-stu-id="d8e24-118">The `Startup` class constructor can accept dependencies that are provided through [dependency injection](xref:fundamentals/dependency-injection).</span></span> <span data-ttu-id="d8e24-119">Eine gängige Methode ist die Verwendung `IHostingEnvironment` einrichten [Konfiguration](xref:fundamentals/configuration) Quellen.</span><span class="sxs-lookup"><span data-stu-id="d8e24-119">A common approach is to use `IHostingEnvironment` to set up [configuration](xref:fundamentals/configuration) sources.</span></span>

<span data-ttu-id="d8e24-120">Die `Startup` Klasse umfasst einen `Configure` Methode und Sie können optional eine `ConfigureServices` Methode, die beide aufgerufen werden, wenn die Anwendung gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="d8e24-120">The `Startup` class must include a `Configure` method and can optionally include a `ConfigureServices` method, both of which are called when the application starts.</span></span> <span data-ttu-id="d8e24-121">Die Klasse zählen auch [umgebungsspezifische Versionen dieser Methoden](xref:fundamentals/environments#startup-conventions).</span><span class="sxs-lookup"><span data-stu-id="d8e24-121">The class can also include [environment-specific versions of these methods](xref:fundamentals/environments#startup-conventions).</span></span> <span data-ttu-id="d8e24-122">`ConfigureServices`, falls vorhanden, wird aufgerufen, bevor `Configure`.</span><span class="sxs-lookup"><span data-stu-id="d8e24-122">`ConfigureServices`, if present, is called before `Configure`.</span></span>

<span data-ttu-id="d8e24-123">Erfahren Sie mehr über [Behandeln von Ausnahmen während des Anwendungsstarts](xref:fundamentals/error-handling#startup-exception-handling).</span><span class="sxs-lookup"><span data-stu-id="d8e24-123">Learn about [handling exceptions during application startup](xref:fundamentals/error-handling#startup-exception-handling).</span></span>

## <a name="the-configureservices-method"></a><span data-ttu-id="d8e24-124">Die ConfigureServices-Methode</span><span class="sxs-lookup"><span data-stu-id="d8e24-124">The ConfigureServices method</span></span>

<span data-ttu-id="d8e24-125">Die [ConfigureServices](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.startupbase#Microsoft_AspNetCore_Hosting_StartupBase_ConfigureServices_Microsoft_Extensions_DependencyInjection_IServiceCollection_) Methode ist optional, aber wenn verwendet, wird er aufgerufen, bevor die `Configure` Methode durch den Webhost.</span><span class="sxs-lookup"><span data-stu-id="d8e24-125">The [ConfigureServices](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.hosting.startupbase#Microsoft_AspNetCore_Hosting_StartupBase_ConfigureServices_Microsoft_Extensions_DependencyInjection_IServiceCollection_) method is optional; but if used, it's called before the `Configure` method by the web host.</span></span> <span data-ttu-id="d8e24-126">Die Webhost möglicherweise einige Dienste vor dem Konfigurieren ``Startup`` Methoden aufgerufen werden (finden Sie unter [hosting](xref:fundamentals/hosting)).</span><span class="sxs-lookup"><span data-stu-id="d8e24-126">The web host may configure some services before ``Startup`` methods are called (see [hosting](xref:fundamentals/hosting)).</span></span> <span data-ttu-id="d8e24-127">Gemäß der Konvention [Konfigurationsoptionen](xref:fundamentals/configuration) werden in dieser Methode festgelegt.</span><span class="sxs-lookup"><span data-stu-id="d8e24-127">By convention, [Configuration options](xref:fundamentals/configuration) are set in this method.</span></span>

<span data-ttu-id="d8e24-128">Für Features, die erfordern beträchtliche Setup stehen `Add[Service]` Erweiterungsmethoden in [IServiceCollection](https://docs.microsoft.com/aspnet/core/api/microsoft.extensions.dependencyinjection.iservicecollection).</span><span class="sxs-lookup"><span data-stu-id="d8e24-128">For features that require substantial setup there are `Add[Service]` extension methods on [IServiceCollection](https://docs.microsoft.com/aspnet/core/api/microsoft.extensions.dependencyinjection.iservicecollection).</span></span> <span data-ttu-id="d8e24-129">Dieses Beispiels über die Standardvorlage für die Website konfiguriert die app, um Dienste für Entity Framework, Identitäts- und MVC verwenden:</span><span class="sxs-lookup"><span data-stu-id="d8e24-129">This example from the default web site template configures the app to use services for Entity Framework, Identity, and MVC:</span></span>

<span data-ttu-id="d8e24-130">[!code-csharp[Main](../common/samples/WebApplication1/Startup.cs?highlight=4,7,11&start=40&end=55)]</span><span class="sxs-lookup"><span data-stu-id="d8e24-130">[!code-csharp[Main](../common/samples/WebApplication1/Startup.cs?highlight=4,7,11&start=40&end=55)]</span></span>

<span data-ttu-id="d8e24-131">Hinzufügen von Diensten auf den Container, werden sie in Ihrer Anwendung über verfügbar gemacht [Abhängigkeitsinjektion](xref:fundamentals/dependency-injection).</span><span class="sxs-lookup"><span data-stu-id="d8e24-131">Adding services to the services container makes them available within your application via [dependency injection](xref:fundamentals/dependency-injection).</span></span>

## <a name="services-available-in-startup"></a><span data-ttu-id="d8e24-132">In den Starttasks verfügbaren Dienste</span><span class="sxs-lookup"><span data-stu-id="d8e24-132">Services Available in Startup</span></span>

<span data-ttu-id="d8e24-133">ASP.NET Core Abhängigkeitsinjektion stellt Dienste bereit, während des Starts der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="d8e24-133">ASP.NET Core dependency injection provides services during an application's startup.</span></span> <span data-ttu-id="d8e24-134">Sie können diese Dienste anfordern, indem Sie z. B. die entsprechende Schnittstelle als Parameter auf Ihre `Startup` Klassenkonstruktor oder den zugehörigen `Configure` Methode.</span><span class="sxs-lookup"><span data-stu-id="d8e24-134">You can request these services by including the appropriate interface as a parameter on your `Startup` class's constructor or its `Configure` method.</span></span> <span data-ttu-id="d8e24-135">Die `ConfigureServices` nur Methode nimmt ein `IServiceCollection` Parameter (aber registrierten Dienst kann aus der Auflistung abgerufen werden, sodass zusätzliche Parameter nicht erforderlich sind).</span><span class="sxs-lookup"><span data-stu-id="d8e24-135">The `ConfigureServices` method only takes an `IServiceCollection` parameter (but any registered service can be retrieved from this collection, so additional parameters are not necessary).</span></span>

<span data-ttu-id="d8e24-136">Im folgenden sind einige der in der Regel vom angeforderten Dienste `Startup` Methoden:</span><span class="sxs-lookup"><span data-stu-id="d8e24-136">Below are some of the services typically requested by `Startup` methods:</span></span>

* <span data-ttu-id="d8e24-137">Im Konstruktor: `IHostingEnvironment`,`ILogger<Startup>`</span><span class="sxs-lookup"><span data-stu-id="d8e24-137">In the constructor:  `IHostingEnvironment`, `ILogger<Startup>`</span></span>
* <span data-ttu-id="d8e24-138">In `ConfigureServices`:`IServiceCollection`</span><span class="sxs-lookup"><span data-stu-id="d8e24-138">In `ConfigureServices`:  `IServiceCollection`</span></span>
* <span data-ttu-id="d8e24-139">In `Configure`: `IApplicationBuilder`, `IHostingEnvironment`,`ILoggerFactory`</span><span class="sxs-lookup"><span data-stu-id="d8e24-139">In `Configure`:  `IApplicationBuilder`, `IHostingEnvironment`, `ILoggerFactory`</span></span>

<span data-ttu-id="d8e24-140">Keine Dienste hinzugefügt, indem die ``WebHostBuilder`` ``ConfigureServices`` Methode angefordert werden kann, indem Sie die ``Startup`` -Klassenkonstruktor oder den zugehörigen ``Configure`` Methode.</span><span class="sxs-lookup"><span data-stu-id="d8e24-140">Any services added by the ``WebHostBuilder`` ``ConfigureServices`` method may be requested by the ``Startup`` class constructor or its ``Configure`` method.</span></span> <span data-ttu-id="d8e24-141">Verwendung `WebHostBuilder` alle Dienste Sie bereitstellen müssen, während der `Startup` Methoden.</span><span class="sxs-lookup"><span data-stu-id="d8e24-141">Use `WebHostBuilder` to provide any services you need during `Startup` methods.</span></span>

## <a name="the-configure-method"></a><span data-ttu-id="d8e24-142">Die Configure-Methode</span><span class="sxs-lookup"><span data-stu-id="d8e24-142">The Configure method</span></span>

<span data-ttu-id="d8e24-143">Die `Configure` Methode wird verwendet, um anzugeben, wie die ASP.NET-Anwendung auf HTTP-Anforderungen reagiert.</span><span class="sxs-lookup"><span data-stu-id="d8e24-143">The `Configure` method is used to specify how the ASP.NET application will respond to HTTP requests.</span></span> <span data-ttu-id="d8e24-144">Durch Hinzufügen die Anforderungspipeline konfiguriert ist [Middleware](middleware.md) Komponenten einer `IApplicationBuilder` -Instanz, die vom Abhängigkeitsinjektion bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="d8e24-144">The request pipeline is configured by adding [middleware](middleware.md) components to an `IApplicationBuilder` instance that is provided by dependency injection.</span></span>

<span data-ttu-id="d8e24-145">Im folgenden Beispiel aus der Website-Standardvorlage dienen zum Konfigurieren der Pipeline mit Unterstützung für mehrere Erweiterungsmethoden [c#] [BrowserLink](http://vswebessentials.com/features/browserlink), Fehlerseiten, statische Dateien, ASP.NET MVC und Identität.</span><span class="sxs-lookup"><span data-stu-id="d8e24-145">In the following example from the default web site template, several extension methods are used to configure the pipeline with support for [BrowserLink](http://vswebessentials.com/features/browserlink), error pages, static files, ASP.NET MVC, and Identity.</span></span>

<span data-ttu-id="d8e24-146">[!code-csharp[Main](../common/samples/WebApplication1/Startup.cs?highlight=8,9,10,14,17,19,21&start=58&end=84)]</span><span class="sxs-lookup"><span data-stu-id="d8e24-146">[!code-csharp[Main](../common/samples/WebApplication1/Startup.cs?highlight=8,9,10,14,17,19,21&start=58&end=84)]</span></span>

<span data-ttu-id="d8e24-147">Jede `Use` Erweiterungsmethode Fügt eine [Middleware](xref:fundamentals/middleware) -Komponente in der Anforderungspipeline.</span><span class="sxs-lookup"><span data-stu-id="d8e24-147">Each `Use` extension method adds a [middleware](xref:fundamentals/middleware) component to the request pipeline.</span></span> <span data-ttu-id="d8e24-148">Für die Instanz, die `UseMvc` Erweiterungsmethode fügt die [routing](routing.md) Middleware auf der Anforderungspipeline und konfiguriert [MVC](xref:mvc/overview) als Standardhandler.</span><span class="sxs-lookup"><span data-stu-id="d8e24-148">For instance, the `UseMvc` extension method adds the [routing](routing.md) middleware to the request pipeline and configures [MVC](xref:mvc/overview) as the default handler.</span></span>

<span data-ttu-id="d8e24-149">Weitere Informationen zur Verwendung von `IApplicationBuilder`, finden Sie unter [Middleware](xref:fundamentals/middleware).</span><span class="sxs-lookup"><span data-stu-id="d8e24-149">For more information about how to use `IApplicationBuilder`, see [Middleware](xref:fundamentals/middleware).</span></span>

<span data-ttu-id="d8e24-150">Zusätzliche Dienste wie `IHostingEnvironment` und `ILoggerFactory` kann auch in der Methodensignatur angegeben werden in diesem Fall werden diese Dienste [eingefügten](dependency-injection.md) sofern diese verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="d8e24-150">Additional services, like `IHostingEnvironment` and `ILoggerFactory` may also be specified in the method signature, in which case these services will be [injected](dependency-injection.md) if they are available.</span></span> 

## <a name="additional-resources"></a><span data-ttu-id="d8e24-151">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="d8e24-151">Additional Resources</span></span>

* [<span data-ttu-id="d8e24-152">Arbeiten mit mehreren Umgebungen</span><span class="sxs-lookup"><span data-stu-id="d8e24-152">Working with Multiple Environments</span></span>](xref:fundamentals/environments)
* [<span data-ttu-id="d8e24-153">Middleware</span><span class="sxs-lookup"><span data-stu-id="d8e24-153">Middleware</span></span>](xref:fundamentals/middleware)
* [<span data-ttu-id="d8e24-154">Logging (Protokollierung)</span><span class="sxs-lookup"><span data-stu-id="d8e24-154">Logging</span></span>](xref:fundamentals/logging)
* [<span data-ttu-id="d8e24-155">Konfiguration</span><span class="sxs-lookup"><span data-stu-id="d8e24-155">Configuration</span></span>](xref:fundamentals/configuration)
