---
title: Problembehandlung bei ASP.NET Core unter IIS
author: guardrex
description: Informationen Sie zur diagnose von Problemen mit IIS-Bereitstellungen von ASP.NET Core-apps.
ms.author: riande
manager: wpickett
ms.custom: mvc
ms.date: 03/13/2017
ms.topic: article
ms.technology: aspnet
ms.prod: asp.net-core
uid: host-and-deploy/iis/troubleshoot
ms.openlocfilehash: 2e42d5904e2be8c031c5c6d4bbc104a251b699f2
ms.sourcegitcommit: 12e5194936b7e820efc5505a2d5d4f84e88eb5ef
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/11/2018
---
# <a name="troubleshoot-aspnet-core-on-iis"></a><span data-ttu-id="528f6-103">Problembehandlung bei ASP.NET Core unter IIS</span><span class="sxs-lookup"><span data-stu-id="528f6-103">Troubleshoot ASP.NET Core on IIS</span></span>

<span data-ttu-id="528f6-104">Von [Luke Latham](https://github.com/guardrex)</span><span class="sxs-lookup"><span data-stu-id="528f6-104">By [Luke Latham](https://github.com/guardrex)</span></span>

<span data-ttu-id="528f6-105">Diagnose von Problemen mit IIS-Bereitstellungen:</span><span class="sxs-lookup"><span data-stu-id="528f6-105">To diagnose issues with IIS deployments:</span></span>

* <span data-ttu-id="528f6-106">Untersuchen Sie die Browserausgabe.</span><span class="sxs-lookup"><span data-stu-id="528f6-106">Study browser output.</span></span>
* <span data-ttu-id="528f6-107">Überprüfen Sie das **Anwendungsprotokoll** des Systems über die **Ereignisanzeige**.</span><span class="sxs-lookup"><span data-stu-id="528f6-107">Examine the system's **Application** log through **Event Viewer**.</span></span>
* <span data-ttu-id="528f6-108">Aktivieren Sie die `stdout`-Protokollierung.</span><span class="sxs-lookup"><span data-stu-id="528f6-108">Enable `stdout` logging.</span></span> <span data-ttu-id="528f6-109">Das Protokoll des **ASP.NET Core-Moduls** befindet sich im vom Attribut *stdoutLogFile* des Elements `<aspNetCore>` in *web.config* angegebenen Pfad. Alle Ordner im Pfad, der im Attributwert angegeben ist, müssen in der Bereitstellung vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="528f6-109">The **ASP.NET Core Module** log is found on the path provided in the *stdoutLogFile* attribute of the `<aspNetCore>` element in *web.config*. Any folders on the path provided in the attribute value must exist in the deployment.</span></span> <span data-ttu-id="528f6-110">Legen Sie *StdoutLogEnabled* auf `true`.</span><span class="sxs-lookup"><span data-stu-id="528f6-110">Set *stdoutLogEnabled* to `true`.</span></span> <span data-ttu-id="528f6-111">Apps, die die der `Microsoft.NET.Sdk.Web` SDK zum Erstellen der *"Web.config"* Datei standardmäßig die *StdoutLogEnabled* auf `false`manuell Bereitstellen der *"Web.config"* -Datei ein, oder ändern Sie die Datei, damit möglichen `stdout` Protokollierung.</span><span class="sxs-lookup"><span data-stu-id="528f6-111">Apps that use the the `Microsoft.NET.Sdk.Web` SDK to create the *web.config* file default the *stdoutLogEnabled* setting to `false`, so manually provide the *web.config* file or modify the file in order to enable `stdout` logging.</span></span>

<span data-ttu-id="528f6-112">Verwenden Sie die Informationen aus diesen drei Quellen mit der [häufige Fehler verweisen Thema](xref:host-and-deploy/azure-iis-errors-reference) um das Problem zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="528f6-112">Use information from those three sources with the [common errors reference topic](xref:host-and-deploy/azure-iis-errors-reference) to determine the problem.</span></span> <span data-ttu-id="528f6-113">Führen Sie die Hinweise zur Fehlerbehebung bereitgestellt, um das Problem zu beheben.</span><span class="sxs-lookup"><span data-stu-id="528f6-113">Follow the troubleshooting advice provided to resolve the issue.</span></span>

<span data-ttu-id="528f6-114">Einige der häufigen Fehler werden erst im Browser, Anwendungsprotokoll und ASP.NET Core-Modulprotokoll angezeigt, wenn die Werte für *startupTimeLimit* (Standardwert: 120 Sekunden) und *startupRetryCount* (Standardwert: 2) für das Modul überschritten wurden.</span><span class="sxs-lookup"><span data-stu-id="528f6-114">Several of the common errors don't appear in the browser, Application Log, and ASP.NET Core Module Log until the module *startupTimeLimit* (default: 120 seconds) and *startupRetryCount* (default: 2) have passed.</span></span> <span data-ttu-id="528f6-115">Warten Sie daher sechs Minuten, bevor Sie davon ausgehen, dass das Modul keinen Prozess für die App gestartet hat.</span><span class="sxs-lookup"><span data-stu-id="528f6-115">Therefore, wait a full six minutes before deducing that the module has failed to start a process for the app.</span></span>

<span data-ttu-id="528f6-116">Eine schnelle Möglichkeit, um festzustellen, ob die App ordnungsgemäß funktioniert, ist die direkte Ausführung der App auf Kestrel.</span><span class="sxs-lookup"><span data-stu-id="528f6-116">One quick way to determine if the app is working properly is to run the app directly on Kestrel.</span></span> <span data-ttu-id="528f6-117">Wenn die app als veröffentlicht wurde eine [Framework abhängiges Bereitstellung](/dotnet/core/deploying/#framework-dependent-deployments-fdd), führen Sie `dotnet <assembly_name>.dll` im Bereitstellungsordner, also der physische Pfad der IIS für die app.</span><span class="sxs-lookup"><span data-stu-id="528f6-117">If the app was published as a [framework-dependent deployment](/dotnet/core/deploying/#framework-dependent-deployments-fdd), execute `dotnet <assembly_name>.dll` in the deployment folder, which is the IIS physical path to the app.</span></span> <span data-ttu-id="528f6-118">Wenn die app als veröffentlicht wurde eine [eigenständige Bereitstellung](/dotnet/core/deploying/#self-contained-deployments-scd)führen die app des ausführbaren direkt über eine Eingabeaufforderung `<assembly_name>.exe`, in den Bereitstellungsordner.</span><span class="sxs-lookup"><span data-stu-id="528f6-118">If the app was published as a [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd), run the app's executable directly from a command prompt, `<assembly_name>.exe`, in the deployment folder.</span></span> <span data-ttu-id="528f6-119">Wenn der Standardport 5000 Kestrel gelauscht wird, sollte die app am verfügbar sein `http://localhost:5000/`.</span><span class="sxs-lookup"><span data-stu-id="528f6-119">If Kestrel is listening on default port 5000, the app should be available at `http://localhost:5000/`.</span></span> <span data-ttu-id="528f6-120">Wenn die app normalerweise an die Endpunktadresse Kestrel antwortet, wird das Problem wahrscheinlich Zusammenhang mit der reverse-Proxy-Konfiguration und weniger wahrscheinlich innerhalb der app.</span><span class="sxs-lookup"><span data-stu-id="528f6-120">If the app responds normally at the Kestrel endpoint address, the problem is more likely related to the reverse proxy configuration and less likely within the app.</span></span>

<span data-ttu-id="528f6-121">Eine Möglichkeit, um festzustellen, ob die reverse-Proxy ordnungsgemäß funktioniert ist zum Ausführen einer einfachen statische Datei-Anforderung für ein Stylesheet, Skript oder Image aus der app statische Dateien in *"Wwwroot"* mit [Middleware für statische Dateien](xref:fundamentals/static-files).</span><span class="sxs-lookup"><span data-stu-id="528f6-121">One way to determine if the reverse proxy is working properly is to perform a simple static file request for a stylesheet, script, or image from the app's static files in *wwwroot* using [Static File Middleware](xref:fundamentals/static-files).</span></span> <span data-ttu-id="528f6-122">Wenn die app statische Dateien dienen kann jedoch MVC-Ansichten und andere Endpunkte, schlagen fehl, ist das Problem wahrscheinlich weniger verwandt der reverse-Proxy-Konfiguration und wahrscheinlicher innerhalb der app (z. B. MVC-routing oder 500 Internal Server Error).</span><span class="sxs-lookup"><span data-stu-id="528f6-122">If the app can serve static files but MVC Views and other endpoints are failing, the problem is less likely related to the reverse proxy configuration and more likely within the app (for example, MVC routing or 500 Internal Server Error).</span></span>

<span data-ttu-id="528f6-123">Wenn Kestrel normalerweise hinter IIS beginnt, aber die app wird nicht nach der Ausführung erfolgreich lokal auf dem System ausgeführt, eine Umgebungsvariable kann vorübergehend hinzugefügt *"Web.config"* festzulegende der `ASPNETCORE_ENVIRONMENT` auf `Development`.</span><span class="sxs-lookup"><span data-stu-id="528f6-123">When Kestrel starts normally behind IIS but the app won't run on the system after successfully running locally, an environment variable can be temporarily added to *web.config* to set the `ASPNETCORE_ENVIRONMENT` to `Development`.</span></span> <span data-ttu-id="528f6-124">Solange überschreiben die Umgebung in app-Starts ist nicht die Umgebungsvariable festlegen kann die [Developer Ausnahmeseite](xref:fundamentals/error-handling) angezeigt werden Wenn die app ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="528f6-124">As long as the environment isn't overridden in app startup, setting the environment variable allows the [developer exception page](xref:fundamentals/error-handling) to appear when the app is run.</span></span> <span data-ttu-id="528f6-125">Festlegen der Umgebungsvariablen `ASPNETCORE_ENVIRONMENT` auf diese Weise wird nur empfohlen für Staging/Testzwecke Servern, die verfügbar gemacht, sind nicht mit dem Internet.</span><span class="sxs-lookup"><span data-stu-id="528f6-125">Setting the environment variable for `ASPNETCORE_ENVIRONMENT` in this way is only recommended for staging/testing servers that aren't exposed to the Internet.</span></span> <span data-ttu-id="528f6-126">Achten Sie darauf, dass Sie so entfernen Sie die Umgebungsvariable aus der *"Web.config"* nach Abschluss der Datei.</span><span class="sxs-lookup"><span data-stu-id="528f6-126">Be sure to remove the environment variable from the *web.config* file when finished.</span></span> <span data-ttu-id="528f6-127">Informationen zum Festlegen von Umgebungsvariablen über *"Web.config"*, finden Sie unter [EnvironmentVariables untergeordnetes Element des AspNetCore](xref:host-and-deploy/aspnet-core-module#setting-environment-variables).</span><span class="sxs-lookup"><span data-stu-id="528f6-127">For information on setting environment variables via *web.config*, see [environmentVariables child element of aspNetCore](xref:host-and-deploy/aspnet-core-module#setting-environment-variables).</span></span>

<span data-ttu-id="528f6-128">In den meisten Fällen hilft das Aktivieren der Anwendungsprotokollierung bei der Behandlung von Problemen mit der App oder dem Reverseproxy.</span><span class="sxs-lookup"><span data-stu-id="528f6-128">In most cases, enabling application logging assists in troubleshooting problems with the app or the reverse proxy.</span></span> <span data-ttu-id="528f6-129">Weitere Informationen finden Sie unter [Protokollierung](xref:fundamentals/logging/index).</span><span class="sxs-lookup"><span data-stu-id="528f6-129">See [Logging](xref:fundamentals/logging/index) for more information.</span></span>

<span data-ttu-id="528f6-130">Die letzte Tipps zur Problembehandlung beziehen sich auf apps, die nicht ausgeführt werden, nach dem Upgrade entweder .NET Core SDK in den Development-Versionen für Computer oder ein Paket innerhalb der app.</span><span class="sxs-lookup"><span data-stu-id="528f6-130">The last troubleshooting tip pertains to apps that fail to run after upgrading either the .NET Core SDK on the development machine or package versions within the app.</span></span> <span data-ttu-id="528f6-131">In einigen Fällen können inkohärente Pakete eine App beschädigen, wenn größere Upgrades durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="528f6-131">In some cases, incoherent packages may break an app when performing major upgrades.</span></span> <span data-ttu-id="528f6-132">Die meisten dieser Probleme können durch behoben werden:</span><span class="sxs-lookup"><span data-stu-id="528f6-132">Most of these issues can be fixed by:</span></span>

* <span data-ttu-id="528f6-133">Durch das Löschen der `bin` und `obj` Ordner im Projekt.</span><span class="sxs-lookup"><span data-stu-id="528f6-133">Deleting the `bin` and `obj` folders in the project.</span></span>
* <span data-ttu-id="528f6-134">Clearing Paket am zwischenspeichert `%UserProfile%\.nuget\packages\` und `%LocalAppData%\Nuget\v3-cache`.</span><span class="sxs-lookup"><span data-stu-id="528f6-134">Clearing package caches at `%UserProfile%\.nuget\packages\` and `%LocalAppData%\Nuget\v3-cache`.</span></span>
* <span data-ttu-id="528f6-135">Wiederherstellen und das Projekt neu zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="528f6-135">Restoring and rebuilding the project.</span></span>
* <span data-ttu-id="528f6-136">Bestätigen, dass die vorherige Bereitstellung auf dem Server vor dem erneuten Bereitstellen der app vollständig gelöscht wurde.</span><span class="sxs-lookup"><span data-stu-id="528f6-136">Confirming that the prior deployment on the server has been completely deleted prior to re-deploying the app.</span></span>

> [!TIP]
> <span data-ttu-id="528f6-137">Eine einfache Möglichkeit zum leeren von Caches des Pakets wird auszuführende `dotnet nuget locals all --clear` über eine Eingabeaufforderung.</span><span class="sxs-lookup"><span data-stu-id="528f6-137">A convenient way to clear package caches is to execute `dotnet nuget locals all --clear` from a command prompt.</span></span>
> 
> <span data-ttu-id="528f6-138">Löschen von Zwischenspeichern von Paket kann auch erfolgen mithilfe der [nuget.exe](https://www.nuget.org/downloads) Tool und die Ausführung des Befehls `nuget locals all -clear`.</span><span class="sxs-lookup"><span data-stu-id="528f6-138">Clearing package caches can also be accomplished by using the [nuget.exe](https://www.nuget.org/downloads) tool and executing the command `nuget locals all -clear`.</span></span> <span data-ttu-id="528f6-139">*NuGet.exe* , ist eine gebündelte Installation mit Windows 10 und muss separat von der NuGet-Website abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="528f6-139">*nuget.exe* isn't a bundled install with Windows 10 and must be obtained separately from the NuGet website.</span></span>
<!--
> [!TIP]
> A convenient way to clear package caches is to:
>
> * Obtain the *NuGet.exe* tool from [NuGet.org](https://www.nuget.org/).
> * Add the path to *NuGet.exe* to the system PATH.
> * Execute `nuget locals all -clear` from a command prompt.
>
> Alternatively, execute `dotnet nuget locals all --clear` from a command prompt without obtaining *NuGet.exe*. -->

## <a name="additional-resources"></a><span data-ttu-id="528f6-140">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="528f6-140">Additional resources</span></span>

* [<span data-ttu-id="528f6-141">Referenz zu häufigen Fehlern bei Azure App Service und IIS mit ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="528f6-141">Common errors reference for Azure App Service and IIS with ASP.NET Core</span></span>](xref:host-and-deploy/azure-iis-errors-reference)
* [<span data-ttu-id="528f6-142">Konfigurationsreferenz für das ASP.NET Core-Modul</span><span class="sxs-lookup"><span data-stu-id="528f6-142">ASP.NET Core Module configuration reference</span></span>](xref:host-and-deploy/aspnet-core-module)
