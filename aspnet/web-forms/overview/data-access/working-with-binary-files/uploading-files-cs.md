---
uid: web-forms/overview/data-access/working-with-binary-files/uploading-files-cs
title: Hochladen von Dateien (c#) | Microsoft Docs
author: rick-anderson
description: Erfahren Sie, wie Benutzer zum Hochladen von binären Dateien (z. B. Word oder PDF-Dokumente) können mit der Website, wo sie im Dateisystem des Servers gespeichert werden können...
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/27/2007
ms.topic: article
ms.assetid: b381b1da-feb3-4776-bc1b-75db53eb90ab
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/working-with-binary-files/uploading-files-cs
msc.type: authoredcontent
ms.openlocfilehash: 3c758e94311817d01b17d27083733f805caf600f
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/10/2018
ms.locfileid: "30889198"
---
<a name="uploading-files-c"></a><span data-ttu-id="eda68-103">Hochladen von Dateien (c#)</span><span class="sxs-lookup"><span data-stu-id="eda68-103">Uploading Files (C#)</span></span>
====================
<span data-ttu-id="eda68-104">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="eda68-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="eda68-105">[Beispiel-App herunterladen](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_54_CS.exe) oder [PDF herunterladen](uploading-files-cs/_static/datatutorial54cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="eda68-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_54_CS.exe) or [Download PDF](uploading-files-cs/_static/datatutorial54cs1.pdf)</span></span>

> <span data-ttu-id="eda68-106">Erfahren Sie, wie Benutzer zum Hochladen von binären Dateien (z. B. Word oder PDF-Dokumente) können mit der Website, wo sie im Dateisystem des Servers oder der Datenbank gespeichert werden können.</span><span class="sxs-lookup"><span data-stu-id="eda68-106">Learn how to allow users to upload binary files (such as Word or PDF documents) to your Web site where they may be stored in either the server's file system or the database.</span></span>


## <a name="introduction"></a><span data-ttu-id="eda68-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="eda68-107">Introduction</span></span>

<span data-ttu-id="eda68-108">Alle Lernprogramme wir haben bisher untersucht ausschließlich mit Textdaten gearbeitet haben.</span><span class="sxs-lookup"><span data-stu-id="eda68-108">All of the tutorials we ve examined so far have worked exclusively with text data.</span></span> <span data-ttu-id="eda68-109">Viele Anwendungen müssen jedoch Datenmodelle, die Text und Binärdaten erfassen.</span><span class="sxs-lookup"><span data-stu-id="eda68-109">However, many applications have data models that capture both text and binary data.</span></span> <span data-ttu-id="eda68-110">Eine online-dating-Website können Benutzer zum Hochladen eines Bildes, das ihrem Profil zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="eda68-110">An online dating site might allow users to upload a picture to associate with their profile.</span></span> <span data-ttu-id="eda68-111">Eine Personalbeschaffungsstatus Website kann Benutzer ihrer fortsetzen als Microsoft Word oder PDF-Dokument hochladen können.</span><span class="sxs-lookup"><span data-stu-id="eda68-111">A recruiting website might let users upload their resume as a Microsoft Word or PDF document.</span></span>

<span data-ttu-id="eda68-112">Arbeiten mit Binärdaten Fügt einen neuen Satz von Aufgaben hinzu.</span><span class="sxs-lookup"><span data-stu-id="eda68-112">Working with binary data adds a new set of challenges.</span></span> <span data-ttu-id="eda68-113">Wir müssen entscheiden, wie die binären Daten in der Anwendung gespeichert ist.</span><span class="sxs-lookup"><span data-stu-id="eda68-113">We must decide how the binary data is stored in the application.</span></span> <span data-ttu-id="eda68-114">Die Schnittstelle für das Einfügen neuer Datensätze muss aktualisiert werden, damit der Benutzer eine Datei von ihrem Computer hochladen kann, und zusätzliche Schritte erforderlich, zum Anzeigen oder angeben, dass eine Möglichkeit zum Herunterladen eines Datensatzes s Binärdaten verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="eda68-114">The interface used for inserting new records has to be updated to allow the user to upload a file from their computer and extra steps must be taken to display or provide a means for downloading a record s associated binary data.</span></span> <span data-ttu-id="eda68-115">In diesem Lernprogramm und den nächsten drei müssen wie dieser Herausforderung hurdle untersucht.</span><span class="sxs-lookup"><span data-stu-id="eda68-115">In this tutorial and the next three we'll explore how to hurdle these challenges.</span></span> <span data-ttu-id="eda68-116">Am Ende der Ausführung dieser Lernprogramme müssen wir eine voll funktionsfähige Anwendung erstellt haben, die jeder Kategorie ein Bild und PDF Broschüren zuordnet.</span><span class="sxs-lookup"><span data-stu-id="eda68-116">At the end of these tutorials we'll have built a fully functional application that associates a picture and PDF brochure with each category.</span></span> <span data-ttu-id="eda68-117">In diesem Lernprogramm fügen wir sehen uns verschiedene Techniken zum Speichern von Binärdaten und untersuchen Sie zum Aktivieren der Benutzer zum Hochladen einer Datei von ihrem Computer und sind im Web Server s-Dateisystem gespeichert.</span><span class="sxs-lookup"><span data-stu-id="eda68-117">In this particular tutorial we'll look at different techniques for storing binary data and explore how to enable users to upload a file from their computer and have it saved on the web server s file system.</span></span>

> [!NOTE]
> <span data-ttu-id="eda68-118">Binäre Daten, die Teil einer Anwendung s-Datenmodell ist werden manchmal als bezeichnet eine [BLOB](http://en.wikipedia.org/wiki/Binary_large_object), ein Akronym für Binary Large OBject.</span><span class="sxs-lookup"><span data-stu-id="eda68-118">Binary data that is part of an application s data model is sometimes referred to as a [BLOB](http://en.wikipedia.org/wiki/Binary_large_object), an acronym for Binary Large OBject.</span></span> <span data-ttu-id="eda68-119">In diesen Lernprogrammen haben ich die Terminologie Binärdaten verwenden, obwohl der Begriff BLOB gleichbedeutend ist.</span><span class="sxs-lookup"><span data-stu-id="eda68-119">In these tutorials I have chosen to use the terminology binary data, although the term BLOB is synonymous.</span></span>


## <a name="step-1-creating-the-working-with-binary-data-web-pages"></a><span data-ttu-id="eda68-120">Schritt 1: Erstellen der Arbeiten mit Binärdaten Webseiten</span><span class="sxs-lookup"><span data-stu-id="eda68-120">Step 1: Creating the Working with Binary Data Web Pages</span></span>

<span data-ttu-id="eda68-121">Bevor wir beginnen, die Probleme beim Hinzufügen der Unterstützung für binäre Daten untersuchen, können Sie s, schalten Sie zuerst einen Moment Zeit, um die ASP.NET-Seiten in unserer Websiteprojekt zu erstellen, die wir für dieses Lernprogramm und den nächsten drei benötigen.</span><span class="sxs-lookup"><span data-stu-id="eda68-121">Before we begin to explore the challenges associated with adding support for binary data, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next three.</span></span> <span data-ttu-id="eda68-122">Starten, indem Sie einen neuen Ordner namens `BinaryData`.</span><span class="sxs-lookup"><span data-stu-id="eda68-122">Start by adding a new folder named `BinaryData`.</span></span> <span data-ttu-id="eda68-123">Fügen Sie die folgenden ASP.NET-Seiten in diesen Ordner, und dabei sicherstellen, ordnen Sie jede Seite mit den `Site.master` Gestaltungsvorlage:</span><span class="sxs-lookup"><span data-stu-id="eda68-123">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `FileUpload.aspx`
- `DisplayOrDownloadData.aspx`
- `UploadInDetailsView.aspx`
- `UpdatingAndDeleting.aspx`


![Fügen Sie die ASP.NET-Seiten für die binäre datenbezogene-Lernprogramme](uploading-files-cs/_static/image1.gif)

<span data-ttu-id="eda68-125">**Abbildung 1**: Fügen Sie die ASP.NET-Seiten für die binäre datenbezogene-Lernprogramme</span><span class="sxs-lookup"><span data-stu-id="eda68-125">**Figure 1**: Add the ASP.NET Pages for the Binary Data-Related Tutorials</span></span>


<span data-ttu-id="eda68-126">Wie in den anderen Ordnern `Default.aspx` in den `BinaryData` Ordner werden die Lernprogramme in einem Abschnitt aufgelistet.</span><span class="sxs-lookup"><span data-stu-id="eda68-126">Like in the other folders, `Default.aspx` in the `BinaryData` folder will list the tutorials in its section.</span></span> <span data-ttu-id="eda68-127">Bedenken Sie, dass die `SectionLevelTutorialListing.ascx` Benutzersteuerelement stellt diese Funktionalität bereit.</span><span class="sxs-lookup"><span data-stu-id="eda68-127">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="eda68-128">Aus diesem Grund Hinzufügen dieses Benutzersteuerelement zu `Default.aspx` durch Ziehen aus dem Projektmappen-Explorer auf die Seite s Entwurfsansicht.</span><span class="sxs-lookup"><span data-stu-id="eda68-128">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>


<span data-ttu-id="eda68-129">[![Das Benutzersteuerelement SectionLevelTutorialListing.ascx "default.aspx" hinzufügen](uploading-files-cs/_static/image2.gif)](uploading-files-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="eda68-129">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](uploading-files-cs/_static/image2.gif)](uploading-files-cs/_static/image1.png)</span></span>

<span data-ttu-id="eda68-130">**Abbildung 2**: Hinzufügen der `SectionLevelTutorialListing.ascx` Benutzersteuerelement `Default.aspx` ([klicken Sie hier, um das Bild in voller Größe angezeigt](uploading-files-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="eda68-130">**Figure 2**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](uploading-files-cs/_static/image2.png))</span></span>


<span data-ttu-id="eda68-131">Abschließend fügen Sie diese Seiten als Einträge an die `Web.sitemap` Datei.</span><span class="sxs-lookup"><span data-stu-id="eda68-131">Lastly, add these pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="eda68-132">Fügen Sie insbesondere das folgende Markup nach dem Enhancing GridView `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="eda68-132">Specifically, add the following markup after the Enhancing the GridView `<siteMapNode>`:</span></span>


[!code-xml[Main](uploading-files-cs/samples/sample1.xml)]

<span data-ttu-id="eda68-133">Nach der Aktualisierung `Web.sitemap`, nehmen einen Moment Zeit, um die Lernprogramme-Website über einen Browser anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="eda68-133">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="eda68-134">Klicken Sie im Menü auf der linken Seite enthält die Elemente jetzt für das Arbeiten mit Binärdaten Lernprogramme.</span><span class="sxs-lookup"><span data-stu-id="eda68-134">The menu on the left now includes items for the Working with Binary Data tutorials.</span></span>


![Die Siteübersicht enthält nun die Einträge für das Arbeiten mit Binärdaten-Lernprogramme](uploading-files-cs/_static/image3.gif)

<span data-ttu-id="eda68-136">**Abbildung 3**: die Siteübersicht enthält jetzt die Einträge für das Arbeiten mit Binärdaten-Lernprogramme</span><span class="sxs-lookup"><span data-stu-id="eda68-136">**Figure 3**: The Site Map Now Includes Entries for the Working with Binary Data Tutorials</span></span>


## <a name="step-2-deciding-where-to-store-the-binary-data"></a><span data-ttu-id="eda68-137">Schritt 2: Die Entscheidung, wo die binären Daten zu speichern.</span><span class="sxs-lookup"><span data-stu-id="eda68-137">Step 2: Deciding Where to Store the Binary Data</span></span>

<span data-ttu-id="eda68-138">Binäre Daten, die das Anwendungsmodell für s Daten zugeordnet ist, können in einer von zwei Stellen gespeichert werden: im Dateisystem des Web-Server s mit einem Verweis auf die Datei, die in der Datenbank gespeichert oder direkt in die Datenbank selbst (siehe Abbildung 4).</span><span class="sxs-lookup"><span data-stu-id="eda68-138">Binary data that is associated with the application s data model can be stored in one of two places: on the web server s file system with a reference to the file stored in the database; or directly within the database itself (see Figure 4).</span></span> <span data-ttu-id="eda68-139">Jeder Ansatz verfügt über einen eigenen Satz von vor- und Nachteile und verdient eine ausführlichere Erläuterung.</span><span class="sxs-lookup"><span data-stu-id="eda68-139">Each approach has its own set of pros and cons and merits a more detailed discussion.</span></span>


<span data-ttu-id="eda68-140">[![Binärdaten können im Dateisystem oder direkt in der Datenbank gespeichert werden](uploading-files-cs/_static/image4.gif)](uploading-files-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="eda68-140">[![Binary Data Can Be Stored On the File System or Directly in the Database](uploading-files-cs/_static/image4.gif)](uploading-files-cs/_static/image3.png)</span></span>

<span data-ttu-id="eda68-141">**Abbildung 4**: Binärdaten können im Dateisystem oder direkt in der Datenbank gespeichert werden ([klicken Sie hier, um das Bild in voller Größe angezeigt](uploading-files-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="eda68-141">**Figure 4**: Binary Data Can Be Stored On the File System or Directly in the Database ([Click to view full-size image](uploading-files-cs/_static/image4.png))</span></span>


<span data-ttu-id="eda68-142">Angenommen Sie, wir, erweitern die Northwind-Datenbank, um ein Bild mit den einzelnen Produkten zuzuordnen möchten.</span><span class="sxs-lookup"><span data-stu-id="eda68-142">Imagine that we wanted to extend the Northwind database to associate a picture with each product.</span></span> <span data-ttu-id="eda68-143">Eine Möglichkeit wäre diese Bilddateien im Web Server s-Dateisystem zu speichern, und notieren den Pfad in der `Products` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="eda68-143">One option would be to store these image files on the web server s file system and record the path in the `Products` table.</span></span> <span data-ttu-id="eda68-144">Bei diesem Ansatz fügen wir d ein `ImagePath` Spalte, um die `Products` Tabelle vom Typ `varchar(200)`, vielleicht.</span><span class="sxs-lookup"><span data-stu-id="eda68-144">With this approach, we d add an `ImagePath` column to the `Products` table of type `varchar(200)`, perhaps.</span></span> <span data-ttu-id="eda68-145">Wenn ein Benutzer ein Bild für Chai hochgeladen, möglicherweise das Bild gespeichert werden, im Dateisystem des Web-Server s an `~/Images/Tea.jpg`, wobei `~` der physischen s Anwendungspfad darstellt.</span><span class="sxs-lookup"><span data-stu-id="eda68-145">When a user uploaded a picture for Chai, that picture might be stored on the web server s file system at `~/Images/Tea.jpg`, where `~` represents the application s physical path.</span></span> <span data-ttu-id="eda68-146">D. h., wenn der physische Pfad der Website Stamm ist `C:\Websites\Northwind\`, `~/Images/Tea.jpg` entspräche `C:\Websites\Northwind\Images\Tea.jpg`.</span><span class="sxs-lookup"><span data-stu-id="eda68-146">That is, if the web site is rooted at the physical path `C:\Websites\Northwind\`, `~/Images/Tea.jpg` would be equivalent to `C:\Websites\Northwind\Images\Tea.jpg`.</span></span> <span data-ttu-id="eda68-147">Nach dem Hochladen der Bilddatei, aktualisieren wir d den Chai Datensatz in der `Products` Tabelle, damit seine `ImagePath` Spalte verwiesen wird, den Pfad des neuen Images.</span><span class="sxs-lookup"><span data-stu-id="eda68-147">After uploading the image file, we d update the Chai record in the `Products` table so that its `ImagePath` column referenced the path of the new image.</span></span> <span data-ttu-id="eda68-148">Verwenden wir `~/Images/Tea.jpg` oder einfach `Tea.jpg` Wenn wir uns entschlossen haben, dass alle Produktbilder in der Anwendung s befinden würde `Images` Ordner.</span><span class="sxs-lookup"><span data-stu-id="eda68-148">We could use `~/Images/Tea.jpg` or just `Tea.jpg` if we decided that all product images would be placed in the application s `Images` folder.</span></span>

<span data-ttu-id="eda68-149">Die Hauptvorteile von binären Daten im Dateisystem gespeichert werden:</span><span class="sxs-lookup"><span data-stu-id="eda68-149">The main advantages of storing the binary data on the file system are:</span></span>

- <span data-ttu-id="eda68-150">**Einfache Implementierung** in Kürze eingehendem, speichern und Abrufen von Binärdaten, die direkt in der Datenbank gespeichert umfasst ein wenig mehr Code als beim Arbeiten mit Daten über das Dateisystem.</span><span class="sxs-lookup"><span data-stu-id="eda68-150">**Ease of implementation** as we'll see shortly, storing and retrieving binary data stored directly within the database involves a bit more code than when working with data through the file system.</span></span> <span data-ttu-id="eda68-151">Darüber hinaus müssen in der Reihenfolge für einen Benutzer zum Anzeigen oder Herunterladen von Binärdaten ihnen mit einer URL, um die Daten angezeigt.</span><span class="sxs-lookup"><span data-stu-id="eda68-151">Additionally, in order for a user to view or download binary data they must be presented with a URL to that data.</span></span> <span data-ttu-id="eda68-152">Wenn die Daten im Web Server s-Dateisystem befinden, lautet die URL unkompliziert.</span><span class="sxs-lookup"><span data-stu-id="eda68-152">If the data resides on the web server s file system, the URL is straightforward.</span></span> <span data-ttu-id="eda68-153">Wenn die Daten in der Datenbank gespeichert ist, jedoch eine Webseite muss erstellt werden, die abgerufen werden und die Daten aus der Datenbank zurück.</span><span class="sxs-lookup"><span data-stu-id="eda68-153">If the data is stored in the database, however, a web page needs to be created that will retrieve and return the data from the database.</span></span>
- <span data-ttu-id="eda68-154">**Umfassenderen Zugriff auf die Binärdaten** die binären Daten möglicherweise für andere Dienste oder Anwendungen, Argumente, die die Daten aus der Datenbank abrufen kann nicht zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="eda68-154">**Wider access to the binary data** the binary data may need to be accessible to other services or applications, ones that cannot pull the data from the database.</span></span> <span data-ttu-id="eda68-155">Angenommen, die Bilder, die mit den einzelnen Produkten verknüpft sind auch über für Benutzer verfügbar sein müssen möglicherweise [FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol), in diesem Fall werden wir d die binären Daten im Dateisystem speichern soll.</span><span class="sxs-lookup"><span data-stu-id="eda68-155">For example, the images associated with each product might also need to be available to users through [FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol), in which case we d want to store the binary data on the file system.</span></span>
- <span data-ttu-id="eda68-156">**Leistung** Wenn die Binärdaten im Dateisystem gespeichert ist, wird die Überlastung bei Bedarf und das Netzwerk zwischen dem Datenbankserver und den Webserver werden kleiner, wenn die binären Daten direkt in der Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="eda68-156">**Performance** if the binary data is stored on the file system, the demand and network congestion between the database server and web server will be less than if the binary data is stored directly within the database.</span></span>

<span data-ttu-id="eda68-157">Der wichtigste Nachteil von Binärdaten im Dateisystem gespeichert ist, dass sie die Daten aus der Datenbank entkoppelt.</span><span class="sxs-lookup"><span data-stu-id="eda68-157">The main disadvantage of storing binary data on the file system is that it decouples the data from the database.</span></span> <span data-ttu-id="eda68-158">Wenn ein Datensatz gelöscht wird, aus der `Products` Tabelle, die zugehörige Datei im Web Server s-Dateisystem werden nicht automatisch gelöscht.</span><span class="sxs-lookup"><span data-stu-id="eda68-158">If a record is deleted from the `Products` table, the associated file on the web server s file system is not automatically deleted.</span></span> <span data-ttu-id="eda68-159">Wir müssen schreiben, dass zusätzlicher Code So löschen Sie die Datei oder das Dateisystem mit Dateien, die nicht verwendete, verwaiste Modellabfragen wird.</span><span class="sxs-lookup"><span data-stu-id="eda68-159">We must write extra code to delete the file or the file system will become cluttered with unused, orphaned files.</span></span> <span data-ttu-id="eda68-160">Darüber hinaus muss beim Sichern der Datenbank, wir stellen Sicherungen der zugeordneten Binärdaten im Dateisystem als auch sicherstellen.</span><span class="sxs-lookup"><span data-stu-id="eda68-160">Furthermore, when backing up the database, we must make sure to make backups of the associated binary data on the file system, as well.</span></span> <span data-ttu-id="eda68-161">Verschieben der Datenbank auf einem anderen Standort oder Server Posen ähnliche Probleme.</span><span class="sxs-lookup"><span data-stu-id="eda68-161">Moving the database to another site or server poses similar challenges.</span></span>

<span data-ttu-id="eda68-162">Binärdaten können auch direkt in einer Microsoft SQL Server 2005-Datenbank gespeichert werden, durch das Erstellen einer Spalteninhalts vom Typ `varbinary`.</span><span class="sxs-lookup"><span data-stu-id="eda68-162">Alternatively, binary data can be stored directly in a Microsoft SQL Server 2005 database by creating a column of type `varbinary`.</span></span> <span data-ttu-id="eda68-163">Wie kann mit anderen Datentypen variabler Länge Angabe eine maximale Länge der binären Daten, die gespeichert werden können in dieser Spalte.</span><span class="sxs-lookup"><span data-stu-id="eda68-163">Like with other variable length data types, you can specify a maximum length of the binary data that can be held in this column.</span></span> <span data-ttu-id="eda68-164">Beispielsweise reserviert darf höchstens 5.000 Bytes verwenden `varbinary(5000)`; `varbinary(MAX)` ermöglicht die maximale Speichergröße ungefähr 2 GB.</span><span class="sxs-lookup"><span data-stu-id="eda68-164">For example, to reserve at most 5,000 bytes use `varbinary(5000)`; `varbinary(MAX)` allows for the maximum storage size, about 2 GB.</span></span>

<span data-ttu-id="eda68-165">Der Hauptvorteil des Speicherns von binären Daten direkt in der Datenbank ist die enge Kopplung zwischen den binären Daten und den Datenbank-Datensatz.</span><span class="sxs-lookup"><span data-stu-id="eda68-165">The main advantage of storing binary data directly in the database is the tight coupling between the binary data and the database record.</span></span> <span data-ttu-id="eda68-166">Dies vereinfacht Datenbankverwaltungsaufgaben wie Sicherungen oder auf einem anderen Standort oder den Server verschoben wird.</span><span class="sxs-lookup"><span data-stu-id="eda68-166">This greatly simplifies database administration tasks, like backups or moving the database to a different site or server.</span></span> <span data-ttu-id="eda68-167">Darüber hinaus löscht das Löschen eines Datensatzes automatisch die entsprechenden Binärdaten.</span><span class="sxs-lookup"><span data-stu-id="eda68-167">Also, deleting a record automatically deletes the corresponding binary data.</span></span> <span data-ttu-id="eda68-168">Es sind auch weitere feine Vorteile des Speicherns von Binärdaten in der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="eda68-168">There are also more subtle benefits of storing the binary data in the database.</span></span> <span data-ttu-id="eda68-169">Finden Sie unter [Speichern von binären Dateien direkt in die Datenbank mithilfe von ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/120606-1.aspx) für eine ausführliche Erläuterung.</span><span class="sxs-lookup"><span data-stu-id="eda68-169">See [Storing Binary Files Directly in the Database Using ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/120606-1.aspx) for a more in-depth discussion.</span></span>

> [!NOTE]
> <span data-ttu-id="eda68-170">In Microsoft SQL Server 2000 und früheren Versionen der `varbinary` -Datentyp aufwies einem maximalen Grenzwert von 8.000 Bytes.</span><span class="sxs-lookup"><span data-stu-id="eda68-170">In Microsoft SQL Server 2000 and earlier versions, the `varbinary` data type had a maximum limit of 8,000 bytes.</span></span> <span data-ttu-id="eda68-171">Zum Speichern von bis zu 2 GB Binärdaten der [ `image` Datentyp](https://msdn.microsoft.com/library/ms187993.aspx) stattdessen verwendet werden muss.</span><span class="sxs-lookup"><span data-stu-id="eda68-171">To store up to 2 GB of binary data the [`image` data type](https://msdn.microsoft.com/library/ms187993.aspx) needs to be used instead.</span></span> <span data-ttu-id="eda68-172">Durch das Hinzufügen von `MAX` in SQL Server 2005, jedoch die `image` -Datentyp ist veraltet.</span><span class="sxs-lookup"><span data-stu-id="eda68-172">With the addition of `MAX` in SQL Server 2005, however, the `image` data type has been deprecated.</span></span> <span data-ttu-id="eda68-173">Es s weiterhin Gründen der Abwärtskompatibilität unterstützt, aber Microsoft hat angekündigt, die die `image` -Datentyp wird in einer zukünftigen Version von SQL Server entfernt.</span><span class="sxs-lookup"><span data-stu-id="eda68-173">It s still supported for backwards compatibility, but Microsoft has announced that the `image` data type will be removed in a future version of SQL Server.</span></span>


<span data-ttu-id="eda68-174">Bei Verwendung mit einem älteren Data Model wird möglicherweise die `image` -Datentyp.</span><span class="sxs-lookup"><span data-stu-id="eda68-174">If you are working with an older data model you may see the `image` data type.</span></span> <span data-ttu-id="eda68-175">Die Datenbank "Northwind" s `Categories` Tabelle besitzt eine `Picture` Spalte, die verwendet werden kann, um die binären Daten der Bilddatei für die Kategorie zu speichern.</span><span class="sxs-lookup"><span data-stu-id="eda68-175">The Northwind database s `Categories` table has a `Picture` column that can be used to store the binary data of an image file for the category.</span></span> <span data-ttu-id="eda68-176">Da die Northwind-Datenbank die Stämme in Microsoft Access und früheren Versionen von SQL Server enthält, ist diese Spalte vom Typ `image`.</span><span class="sxs-lookup"><span data-stu-id="eda68-176">Since the Northwind database has its roots in Microsoft Access and earlier versions of SQL Server, this column is of type `image`.</span></span>

<span data-ttu-id="eda68-177">Für dieses Lernprogramm sowie die nächsten drei verwenden wir beide Ansätze.</span><span class="sxs-lookup"><span data-stu-id="eda68-177">For this tutorial and the next three, we'll use both approaches.</span></span> <span data-ttu-id="eda68-178">Die `Categories` Tabelle verfügt bereits über eine `Picture` Spalte zum Speichern von Inhalt im Binärformat eines Bilds für die Kategorie.</span><span class="sxs-lookup"><span data-stu-id="eda68-178">The `Categories` table already has a `Picture` column for storing the binary content of an image for the category.</span></span> <span data-ttu-id="eda68-179">Fügen wir eine zusätzliche Spalte `BrochurePath`, um einen Pfad zu einer PDF-Datei im Web Server s-Dateisystem zu speichern, die verwendet werden kann, um einen Druck, verfeinerte Überblick über die Kategorie bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="eda68-179">We'll add an additional column, `BrochurePath`, to store a path to a PDF on the web server s file system that can be used to provide a print-quality, polished overview of the category.</span></span>

## <a name="step-3-adding-thebrochurepathcolumn-to-thecategoriestable"></a><span data-ttu-id="eda68-180">Schritt 3: Hinzufügen der`BrochurePath`Spalte die`Categories`Tabelle</span><span class="sxs-lookup"><span data-stu-id="eda68-180">Step 3: Adding the`BrochurePath`Column to the`Categories`Table</span></span>

<span data-ttu-id="eda68-181">Die Categories-Tabelle hat derzeit nur vier Spalten: `CategoryID`, `CategoryName`, `Description`, und `Picture`.</span><span class="sxs-lookup"><span data-stu-id="eda68-181">Currently the Categories table has only four columns: `CategoryID`, `CategoryName`, `Description`, and `Picture`.</span></span> <span data-ttu-id="eda68-182">Zusätzlich zu diesen Feldern ausführen müssen wir ein neues Konto hinzufügen, das auf die Kategorie s Broschüren verweisen wird, (falls vorhanden).</span><span class="sxs-lookup"><span data-stu-id="eda68-182">In addition to these fields, we need to add a new one that will point to the category s brochure (if one exists).</span></span> <span data-ttu-id="eda68-183">Wechseln Sie zum Hinzufügen dieser Spalte auf dem Server-Explorer, ein Drilldown in die Tabellen, mit der rechten Maustaste auf die `Categories` -Tabelle und wählen Sie die Tabellendefinition öffnen (siehe Abbildung 5).</span><span class="sxs-lookup"><span data-stu-id="eda68-183">To add this column, go to the Server Explorer, drill down into the Tables, right-click on the `Categories` table and choose Open Table Definition (see Figure 5).</span></span> <span data-ttu-id="eda68-184">Wenn Sie den Server-Explorer nicht angezeigt werden, bringen Sie, wenn der Server-Explorer-Option auswählen, aus dem Menü "Ansicht", oder drücken Sie Strg + Alt + S.</span><span class="sxs-lookup"><span data-stu-id="eda68-184">If you do not see the Server Explorer, bring it up by selecting the Server Explorer option from the View menu, or hit Ctrl+Alt+S.</span></span>

<span data-ttu-id="eda68-185">Fügen Sie einen neuen `varchar(200)` Spalte, um die `Categories` Tabelle mit der Bezeichnung `BrochurePath` und ermöglicht `NULL` s, und klicken Sie auf das Symbol "Speichern" (oder drücken Sie STRG + S).</span><span class="sxs-lookup"><span data-stu-id="eda68-185">Add a new `varchar(200)` column to the `Categories` table that is named `BrochurePath` and allows `NULL` s and click the Save icon (or hit Ctrl+S).</span></span>


<span data-ttu-id="eda68-186">[![Der Categories-Tabelle eine Spalte BrochurePath hinzufügen](uploading-files-cs/_static/image5.gif)](uploading-files-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="eda68-186">[![Add a BrochurePath Column to the Categories Table](uploading-files-cs/_static/image5.gif)](uploading-files-cs/_static/image5.png)</span></span>

<span data-ttu-id="eda68-187">**Abbildung 5**: Hinzufügen einer `BrochurePath` Spalte, um die `Categories` Tabelle ([klicken Sie hier, um das Bild in voller Größe angezeigt](uploading-files-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="eda68-187">**Figure 5**: Add a `BrochurePath` Column to the `Categories` Table ([Click to view full-size image](uploading-files-cs/_static/image6.png))</span></span>


## <a name="step-4-updating-the-architecture-to-use-thepictureandbrochurepathcolumns"></a><span data-ttu-id="eda68-188">Schritt 4: Aktualisieren der Architektur zum Verwenden der`Picture`und`BrochurePath`Spalten</span><span class="sxs-lookup"><span data-stu-id="eda68-188">Step 4: Updating the Architecture to Use the`Picture`and`BrochurePath`Columns</span></span>

<span data-ttu-id="eda68-189">Die `CategoriesDataTable` im Data Access Layer (DAL) verfügt derzeit über vier `DataColumn` s definiert: `CategoryID`, `CategoryName`, `Description`, und `NumberOfProducts`.</span><span class="sxs-lookup"><span data-stu-id="eda68-189">The `CategoriesDataTable` in the Data Access Layer (DAL) currently has four `DataColumn` s defined: `CategoryID`, `CategoryName`, `Description`, and `NumberOfProducts`.</span></span> <span data-ttu-id="eda68-190">Wenn wir diese DataTable in ursprünglich entworfen der [erstellen eine Datenzugriffsschicht](../introduction/creating-a-data-access-layer-cs.md) Lernprogramm die `CategoriesDataTable` hatte nur die ersten drei Spalten; das `NumberOfProducts` Spalte wurde hinzugefügt, die [Master/Detail mithilfe einer Aufzählung Liste der Master-Datensätze mit Details DataList](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) Lernprogramm.</span><span class="sxs-lookup"><span data-stu-id="eda68-190">When we originally designed this DataTable in the [Creating a Data Access Layer](../introduction/creating-a-data-access-layer-cs.md) tutorial, the `CategoriesDataTable` only had the first three columns; the `NumberOfProducts` column was added in the [Master/Detail Using a Bulleted List of Master Records with a Details DataList](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) tutorial.</span></span>

<span data-ttu-id="eda68-191">Entsprechend der Anleitung unter *erstellen eine Datenzugriffsschicht*, die Datentabellen in das typisierte DataSet bilden die Business-Objekte.</span><span class="sxs-lookup"><span data-stu-id="eda68-191">As discussed in *Creating a Data Access Layer*, the DataTables in the Typed DataSet make up the business objects.</span></span> <span data-ttu-id="eda68-192">Die TableAdapters sind verantwortlich für die Kommunikation mit der Datenbank und die Business-Objekte mit den Abfrageergebnissen aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="eda68-192">The TableAdapters are responsible for communicating with the database and populating the business objects with the query results.</span></span> <span data-ttu-id="eda68-193">Die `CategoriesDataTable` werden ausgefüllt, indem die `CategoriesTableAdapter`, die über drei Datenabrufmethoden verfügt:</span><span class="sxs-lookup"><span data-stu-id="eda68-193">The `CategoriesDataTable` is populated by the `CategoriesTableAdapter`, which has three data retrieval methods:</span></span>

- <span data-ttu-id="eda68-194">`GetCategories()` führt die Hauptabfrage des TableAdapter s aus und gibt die `CategoryID`, `CategoryName`, und `Description` Felder aller Datensätze in der `Categories` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="eda68-194">`GetCategories()` executes the TableAdapter s main query and returns the `CategoryID`, `CategoryName`, and `Description` fields of all records in the `Categories` table.</span></span> <span data-ttu-id="eda68-195">Die Hauptabfrage wird verwendet, durch die automatisch generierte `Insert` und `Update` Methoden.</span><span class="sxs-lookup"><span data-stu-id="eda68-195">The main query is what is used by the auto-generated `Insert` and `Update` methods.</span></span>
- <span data-ttu-id="eda68-196">`GetCategoryByCategoryID(categoryID)` Gibt die `CategoryID`, `CategoryName`, und `Description` Felder der Kategorie, deren `CategoryID` gleich *CategoryID*.</span><span class="sxs-lookup"><span data-stu-id="eda68-196">`GetCategoryByCategoryID(categoryID)` returns the `CategoryID`, `CategoryName`, and `Description` fields of the category whose `CategoryID` equals *categoryID*.</span></span>
- <span data-ttu-id="eda68-197">`GetCategoriesAndNumberOfProducts()` -Gibt die `CategoryID`, `CategoryName`, und `Description` Felder für alle Datensätze in der `Categories` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="eda68-197">`GetCategoriesAndNumberOfProducts()` - returns the `CategoryID`, `CategoryName`, and `Description` fields for all records in the `Categories` table.</span></span> <span data-ttu-id="eda68-198">Außerdem wird eine Unterabfrage verwendet, zum Zurückgeben der Anzahl der Produkte jeder Kategorie zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="eda68-198">Also uses a subquery to return the number of products associated with each category.</span></span>

<span data-ttu-id="eda68-199">Beachten Sie, dass keine der folgenden zurückgeben Abfragen der `Categories` Tabelle s `Picture` oder `BrochurePath` Spalten; noch ist die `CategoriesDataTable` bieten `DataColumn` s für diese Felder.</span><span class="sxs-lookup"><span data-stu-id="eda68-199">Notice that none of these queries return the `Categories` table s `Picture` or `BrochurePath` columns; nor does the `CategoriesDataTable` provide `DataColumn` s for these fields.</span></span> <span data-ttu-id="eda68-200">Für die Arbeit mit dem Bild und `BrochurePath` Eigenschaften, müssen wir zuerst sie zum Hinzufügen der `CategoriesDataTable` und aktualisieren Sie dann die `CategoriesTableAdapter` Klasse, um diese Spalten zurück.</span><span class="sxs-lookup"><span data-stu-id="eda68-200">In order to work with the Picture and `BrochurePath` properties, we need to first add them to the `CategoriesDataTable` and then update the `CategoriesTableAdapter` class to return these columns.</span></span>

## <a name="adding-thepictureandbrochurepathdatacolumn-s"></a><span data-ttu-id="eda68-201">Hinzufügen der`Picture`und`BrochurePath``DataColumn` s</span><span class="sxs-lookup"><span data-stu-id="eda68-201">Adding the`Picture`and`BrochurePath``DataColumn` s</span></span>

<span data-ttu-id="eda68-202">Starten, indem Sie diese beiden Spalten zum Hinzufügen der `CategoriesDataTable`.</span><span class="sxs-lookup"><span data-stu-id="eda68-202">Start by adding these two columns to the `CategoriesDataTable`.</span></span> <span data-ttu-id="eda68-203">Mit der rechten Maustaste auf die `CategoriesDataTable` s-Header, wählen Sie aus dem Kontextmenü hinzufügen, und wählen Sie dann die Column-Option.</span><span class="sxs-lookup"><span data-stu-id="eda68-203">Right-click on the `CategoriesDataTable` s header, select Add from the context menu and then choose the Column option.</span></span> <span data-ttu-id="eda68-204">Dies erstellt eine neue `DataColumn` in der mit dem Namen "DataTable" `Column1`.</span><span class="sxs-lookup"><span data-stu-id="eda68-204">This will create a new `DataColumn` in the DataTable named `Column1`.</span></span> <span data-ttu-id="eda68-205">Benennen Sie diese Spalte in `Picture`.</span><span class="sxs-lookup"><span data-stu-id="eda68-205">Rename this column to `Picture`.</span></span> <span data-ttu-id="eda68-206">Legen Sie im Fenster Eigenschaften die `DataColumn` s `DataType` Eigenschaft `System.Byte[]` (Dies ist eine Option in der Dropdown-Liste, müssen Sie sie eingeben).</span><span class="sxs-lookup"><span data-stu-id="eda68-206">From the Properties window, set the `DataColumn` s `DataType` property to `System.Byte[]` (this is not an option in the drop-down list; you need to type it in).</span></span>


<span data-ttu-id="eda68-207">[![Erstellen Sie eine DataColumn mit dem Namen Bild ist, deren Datentyp System.Byte]](uploading-files-cs/_static/image6.gif)](uploading-files-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="eda68-207">[![Create a DataColumn Named Picture whose DataType is System.Byte[]](uploading-files-cs/_static/image6.gif)](uploading-files-cs/_static/image7.png)</span></span>

<span data-ttu-id="eda68-208">**Abbildung 6**: Erstellen einer `DataColumn` benannte `Picture` , deren `DataType` ist `System.Byte[]` ([klicken Sie hier, um das Bild in voller Größe angezeigt](uploading-files-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="eda68-208">**Figure 6**: Create a `DataColumn` Named `Picture` whose `DataType` is `System.Byte[]` ([Click to view full-size image](uploading-files-cs/_static/image8.png))</span></span>


<span data-ttu-id="eda68-209">Fügen Sie einen anderen `DataColumn` der Datentabelle benennen `BrochurePath` unter Verwendung des standardmäßigen `DataType` Wert (`System.String`).</span><span class="sxs-lookup"><span data-stu-id="eda68-209">Add another `DataColumn` to the DataTable, naming it `BrochurePath` using the default `DataType` value (`System.String`).</span></span>

## <a name="returning-thepictureandbrochurepathvalues-from-the-tableadapter"></a><span data-ttu-id="eda68-210">Zurückgeben der`Picture`und`BrochurePath`Werte aus dem TableAdapter</span><span class="sxs-lookup"><span data-stu-id="eda68-210">Returning the`Picture`and`BrochurePath`Values from the TableAdapter</span></span>

<span data-ttu-id="eda68-211">Mit diesen beiden `DataColumn` s hinzugefügt, um die `CategoriesDataTable`, wir re kann jetzt aktualisiert die `CategoriesTableAdapter`.</span><span class="sxs-lookup"><span data-stu-id="eda68-211">With these two `DataColumn` s added to the `CategoriesDataTable`, we re ready to update the `CategoriesTableAdapter`.</span></span> <span data-ttu-id="eda68-212">Wir konnten beide Spaltenwerte in der Hauptabfrage des TableAdapter zurückgegeben haben, aber dies würde zurückholen die binären Daten jedes Mal die `GetCategories()` Methode wurde aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="eda68-212">We could have both of these column values returned in the main TableAdapter query, but this would bring back the binary data every time the `GetCategories()` method was invoked.</span></span> <span data-ttu-id="eda68-213">Let s aktualisieren Sie stattdessen die Hauptabfrage TableAdapter wieder zurückbekommen `BrochurePath` , und erstellen Sie eine zusätzliche Daten-Abruf-Methode, die eine bestimmte Kategorie s zurückgibt `Picture` Spalte.</span><span class="sxs-lookup"><span data-stu-id="eda68-213">Instead, let s update the main TableAdapter query to bring back `BrochurePath` and create an additional data retrieval method that returns a particular category s `Picture` column.</span></span>

<span data-ttu-id="eda68-214">Um die Hauptabfrage des TableAdapter zu aktualisieren, mit der Maustaste auf die `CategoriesTableAdapter` s-Header, und wählen Sie aus dem Kontextmenü die Option konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="eda68-214">To update the main TableAdapter query, right-click on the `CategoriesTableAdapter` s header and choose the Configure option from the context menu.</span></span> <span data-ttu-id="eda68-215">Daraufhin wird die Tabelle Konfigurationsassistenten für Datenadapter, die wir in einer Reihe von vergangenen Lernprogramme gesehen haben.</span><span class="sxs-lookup"><span data-stu-id="eda68-215">This brings up the Table Adapter Configuration Wizard, which we ve seen in a number of past tutorials.</span></span> <span data-ttu-id="eda68-216">Aktualisieren Sie die Abfrage aus, um wieder die `BrochurePath` , und klicken Sie auf ' Fertig stellen '.</span><span class="sxs-lookup"><span data-stu-id="eda68-216">Update the query to bring back the `BrochurePath` and click Finish.</span></span>


<span data-ttu-id="eda68-217">[![Aktualisieren der Liste der Spalten in der SELECT-Anweisung auch BrochurePath zurückgeben](uploading-files-cs/_static/image7.gif)](uploading-files-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="eda68-217">[![Update the Column List in the SELECT Statement to Also Return BrochurePath](uploading-files-cs/_static/image7.gif)](uploading-files-cs/_static/image9.png)</span></span>

<span data-ttu-id="eda68-218">**Abbildung 7**: Aktualisieren der Liste der Spalten in der `SELECT` -Anweisung auch zurückgegeben `BrochurePath` ([klicken Sie hier, um das Bild in voller Größe angezeigt](uploading-files-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="eda68-218">**Figure 7**: Update the Column List in the `SELECT` Statement to Also Return `BrochurePath` ([Click to view full-size image](uploading-files-cs/_static/image10.png))</span></span>


<span data-ttu-id="eda68-219">Bei Verwendung der Ad-hoc-SQL-Anweisungen für die TableAdapter Aktualisieren der Liste der Spalten in der Hauptabfrage die Spaltenliste für alle updates der `SELECT` Abfragemethoden im TableAdapter.</span><span class="sxs-lookup"><span data-stu-id="eda68-219">When using ad-hoc SQL statements for the TableAdapter, updating the column list in the main query updates the column list for all of the `SELECT` query methods in the TableAdapter.</span></span> <span data-ttu-id="eda68-220">Bedeutet, dass die `GetCategoryByCategoryID(categoryID)` Methode wurde aktualisiert und Zurückgeben der `BrochurePath` Spalte, die möglicherweise beabsichtigt wir.</span><span class="sxs-lookup"><span data-stu-id="eda68-220">That means the `GetCategoryByCategoryID(categoryID)` method has been updated to return the `BrochurePath` column, which might be what we intended.</span></span> <span data-ttu-id="eda68-221">Allerdings es auch in die Spaltenliste aktualisiert die `GetCategoriesAndNumberOfProducts()` -Methode, entfernen Sie die Unterabfrage, die die Anzahl der Produkte für die einzelnen Kategorien zurückgibt!</span><span class="sxs-lookup"><span data-stu-id="eda68-221">However, it also updated the column list in the `GetCategoriesAndNumberOfProducts()` method, removing the subquery that returns the number of products for each category!</span></span> <span data-ttu-id="eda68-222">Aus diesem Grund müssen wir diese Methode s aktualisieren `SELECT` Abfrage.</span><span class="sxs-lookup"><span data-stu-id="eda68-222">Therefore, we need to update this method s `SELECT` query.</span></span> <span data-ttu-id="eda68-223">Mit der rechten Maustaste auf die `GetCategoriesAndNumberOfProducts()` -Methode, wählen Sie konfigurieren und Zurücksetzen der `SELECT` Abfrage zurück an den ursprünglichen Wert:</span><span class="sxs-lookup"><span data-stu-id="eda68-223">Right-click on the `GetCategoriesAndNumberOfProducts()` method, choose Configure, and revert the `SELECT` query back to its original value:</span></span>


[!code-sql[Main](uploading-files-cs/samples/sample2.sql)]

<span data-ttu-id="eda68-224">Als Nächstes erstellen Sie eine neue TableAdapter-Methode, die eine bestimmte Kategorie s zurückgibt `Picture` Spaltenwert.</span><span class="sxs-lookup"><span data-stu-id="eda68-224">Next, create a new TableAdapter method that returns a particular category s `Picture` column value.</span></span> <span data-ttu-id="eda68-225">Mit der rechten Maustaste auf die `CategoriesTableAdapter` s-Header, und wählen Sie die Abfrage hinzufügen-Option aus, um die TableAdapter-Abfragekonfigurations-Assistent zu starten.</span><span class="sxs-lookup"><span data-stu-id="eda68-225">Right-click on the `CategoriesTableAdapter` s header and choose the Add Query option to launch the TableAdapter Query Configuration Wizard.</span></span> <span data-ttu-id="eda68-226">Der erste Schritt des Assistenten werden wir gefragt, wenn Sie zum Abfragen von Daten eine Ad-hoc-SQL-Anweisung verwenden möchten, ein neues, gespeicherte Prozedur bzw. eine vorhandene.</span><span class="sxs-lookup"><span data-stu-id="eda68-226">The first step of this wizard asks us if we want to query data using an ad-hoc SQL statement, a new stored procedure, or an existing one.</span></span> <span data-ttu-id="eda68-227">Wählen Sie die SQL-Anweisungen, und klicken Sie auf Weiter.</span><span class="sxs-lookup"><span data-stu-id="eda68-227">Select Use SQL statements and click Next.</span></span> <span data-ttu-id="eda68-228">Da es eine Zeile zurückgeben, wählen Sie wählen die Option Zeilen aus der zweite Schritt zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="eda68-228">Since we will be returning a row, choose the SELECT which returns rows option from the second step.</span></span>


<span data-ttu-id="eda68-229">[![Wählen Sie die SQL-Anweisungen Option](uploading-files-cs/_static/image8.gif)](uploading-files-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="eda68-229">[![Select the Use SQL statements Option](uploading-files-cs/_static/image8.gif)](uploading-files-cs/_static/image11.png)</span></span>

<span data-ttu-id="eda68-230">**Abbildung 8**: Wählen Sie die SQL-Anweisungen Option ([klicken Sie hier, um das Bild in voller Größe angezeigt](uploading-files-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="eda68-230">**Figure 8**: Select the Use SQL statements Option ([Click to view full-size image](uploading-files-cs/_static/image12.png))</span></span>


<span data-ttu-id="eda68-231">[![Da die Abfrage einen Datensatz aus der Categories-Tabelle zurückgibt, wählen Sie wählen die Zeilen zurückgibt](uploading-files-cs/_static/image9.gif)](uploading-files-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="eda68-231">[![Since the Query Will Return a Record from the Categories Table, Choose SELECT which returns rows](uploading-files-cs/_static/image9.gif)](uploading-files-cs/_static/image13.png)</span></span>

<span data-ttu-id="eda68-232">**Abbildung 9**: Da der Abfrage einen Datensatz aus der Categories-Tabelle auswählen zurückgegeben werden, die Zeilen zurückgibt ([klicken Sie hier, um das Bild in voller Größe angezeigt](uploading-files-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="eda68-232">**Figure 9**: Since the Query Will Return a Record from the Categories Table, Choose SELECT which returns rows ([Click to view full-size image](uploading-files-cs/_static/image14.png))</span></span>


<span data-ttu-id="eda68-233">Geben Sie im dritten Schritt die folgende SQL-Abfrage, und klicken Sie auf Weiter:</span><span class="sxs-lookup"><span data-stu-id="eda68-233">In the third step, enter the following SQL query and click Next:</span></span>


[!code-sql[Main](uploading-files-cs/samples/sample3.sql)]

<span data-ttu-id="eda68-234">Der letzte Schritt besteht darin den Namen für die neue Methode auswählen.</span><span class="sxs-lookup"><span data-stu-id="eda68-234">The last step is to choose the name for the new method.</span></span> <span data-ttu-id="eda68-235">Verwendung `FillCategoryWithBinaryDataByCategoryID` und `GetCategoryWithBinaryDataByCategoryID` für das Füllen einer DataTable und der Rückgabewert eine "DataTable" patterns, bzw.</span><span class="sxs-lookup"><span data-stu-id="eda68-235">Use `FillCategoryWithBinaryDataByCategoryID` and `GetCategoryWithBinaryDataByCategoryID` for the Fill a DataTable and Return a DataTable patterns, respectively.</span></span> <span data-ttu-id="eda68-236">Klicken Sie auf ' Fertig stellen ', um den Assistenten abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="eda68-236">Click Finish to complete the wizard.</span></span>


<span data-ttu-id="eda68-237">[![Wählen Sie den Namen für die TableAdapter-s-Methoden](uploading-files-cs/_static/image10.gif)](uploading-files-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="eda68-237">[![Choose the Names for the TableAdapter s Methods](uploading-files-cs/_static/image10.gif)](uploading-files-cs/_static/image15.png)</span></span>

<span data-ttu-id="eda68-238">**Abbildung 10**: Wählen Sie den Namen für die TableAdapter-Methoden ([klicken Sie hier, um das Bild in voller Größe angezeigt](uploading-files-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="eda68-238">**Figure 10**: Choose the Names for the TableAdapter s Methods ([Click to view full-size image](uploading-files-cs/_static/image16.png))</span></span>


> [!NOTE]
> <span data-ttu-id="eda68-239">Nach Abschluss der Tabelle Adapter Abfragekonfigurations-Assistent möglicherweise ein Dialogfeld darüber informiert, dass der neue Befehlstext Daten mit Schema aus dem Schema der Hauptabfrage unterschiedliche zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="eda68-239">After completing the Table Adapter Query Configuration Wizard you may see a dialog box informing you that the new command text returns data with schema different from the schema of the main query.</span></span> <span data-ttu-id="eda68-240">Kurz gesagt, der Assistent ist beachten, dass der Hauptabfrage des TableAdapter s `GetCategories()` gibt ein anderes Schema als dem soeben erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="eda68-240">In short, the wizard is noting that the TableAdapter s main query `GetCategories()` returns a different schema than the one we just created.</span></span> <span data-ttu-id="eda68-241">Diese ist jedoch was wir möchten, damit Sie diese Meldung ignorieren können.</span><span class="sxs-lookup"><span data-stu-id="eda68-241">But this is what we want, so you can disregard this message.</span></span>


<span data-ttu-id="eda68-242">Darüber hinaus sollten Sie bedenken, wenn Sie Ad-hoc-SQL-Anweisungen verwenden und mit dem Assistenten zum Zeitpunkt die TableAdapter Hauptabfrage s zu einem späteren Zeitpunkt ändern, ändern wird der `GetCategoryWithBinaryDataByCategoryID` s-Methode `SELECT` Anweisung s Spaltenliste enthalten nur die Spalten aus der Hauptabfrage (d. h. er entfernt die `Picture` Spalte aus der Abfrage).</span><span class="sxs-lookup"><span data-stu-id="eda68-242">Also, keep in mind that if you are using ad-hoc SQL statements and use the wizard to change the TableAdapter s main query at some later point in time, it will modify the `GetCategoryWithBinaryDataByCategoryID` method s `SELECT` statement s column list to include just those columns from the main query (that is, it will remove the `Picture` column from the query).</span></span> <span data-ttu-id="eda68-243">Die Spaltenliste zurückzugebenden manuell aktualisieren müssen die `Picture` Spalte ähnelt, was haben wir mit der `GetCategoriesAndNumberOfProducts()` Methode weiter oben in diesem Schritt.</span><span class="sxs-lookup"><span data-stu-id="eda68-243">You will have to manually update the column list to return the `Picture` column, similar to what we did with the `GetCategoriesAndNumberOfProducts()` method earlier in this step.</span></span>

<span data-ttu-id="eda68-244">Nach dem Hinzufügen der beiden `DataColumn` s, um die `CategoriesDataTable` und `GetCategoryWithBinaryDataByCategoryID` Methode, um die `CategoriesTableAdapter`, sollte diese Klassen in der typisierten DataSet-Designer wie im Screenshot in Abbildung 11 aussehen.</span><span class="sxs-lookup"><span data-stu-id="eda68-244">After adding the two `DataColumn` s to the `CategoriesDataTable` and the `GetCategoryWithBinaryDataByCategoryID` method to the `CategoriesTableAdapter`, these classes in the Typed DataSet Designer should look like the screenshot in Figure 11.</span></span>


![Der DataSet-Designer enthält die neue Spalten und -Methode](uploading-files-cs/_static/image11.gif)

<span data-ttu-id="eda68-246">**Abbildung 11**: der DataSet-Designer enthält die neue Spalten und -Methode</span><span class="sxs-lookup"><span data-stu-id="eda68-246">**Figure 11**: The DataSet Designer Includes the New Columns and Method</span></span>


## <a name="updating-the-business-logic-layer-bll"></a><span data-ttu-id="eda68-247">Aktualisieren die Logik der Geschäftsebene (BLL)</span><span class="sxs-lookup"><span data-stu-id="eda68-247">Updating the Business Logic Layer (BLL)</span></span>

<span data-ttu-id="eda68-248">Mit der DAL aktualisiert, übrig bleibt Business Logic Layer (BLL) Einbeziehung eine Methode für die neue Erweiterung `CategoriesTableAdapter` Methode.</span><span class="sxs-lookup"><span data-stu-id="eda68-248">With the DAL updated, all that remains is to augment the Business Logic Layer (BLL) to include a method for the new `CategoriesTableAdapter` method.</span></span> <span data-ttu-id="eda68-249">Fügen Sie die folgende Methode, die `CategoriesBLL` Klasse:</span><span class="sxs-lookup"><span data-stu-id="eda68-249">Add the following method to the `CategoriesBLL` class:</span></span>


[!code-csharp[Main](uploading-files-cs/samples/sample4.cs)]

## <a name="step-5-uploading-a-file-from-the-client-to-the-web-server"></a><span data-ttu-id="eda68-250">Schritt 5: Hochladen einer Datei vom Client an den Webserver</span><span class="sxs-lookup"><span data-stu-id="eda68-250">Step 5: Uploading a File From the Client to the Web Server</span></span>

<span data-ttu-id="eda68-251">Bei der binäre Daten zu erfassen und werden häufig durch einen Endbenutzer diese Daten bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="eda68-251">When collecting binary data, oftentimes this data is supplied by an end user.</span></span> <span data-ttu-id="eda68-252">Wenn diese Informationen erfassen möchten, muss der Benutzer eine Datei von ihrem Computer an den Webserver hochladen können.</span><span class="sxs-lookup"><span data-stu-id="eda68-252">To capture this information, the user needs to be able to upload a file from their computer to the web server.</span></span> <span data-ttu-id="eda68-253">Die hochgeladenen Daten müssen mit dem Datenmodell integriert werden, wodurch das bedeuten, die Datei dass kann auf die Web Server s Dateisystem und Hinzufügen eines Pfads zur Datei in der Datenbank, oder schreiben den binären Inhalt direkt in der Datenbank speichern.</span><span class="sxs-lookup"><span data-stu-id="eda68-253">The uploaded data then needs to be integrated with the data model, which may mean saving the file to the web server s file system and adding a path to the file in the database, or writing the binary contents directly into the database.</span></span> <span data-ttu-id="eda68-254">In diesem Schritt untersuchen wir an, wie einen Benutzer zum Hochladen von Dateien von ihrem Computer an den Server zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="eda68-254">In this step we'll look at how to allow a user to upload files from their computer to the server.</span></span> <span data-ttu-id="eda68-255">In den nächsten Lernprogrammen aktivieren wir unsere Aufmerksamkeit auf das Datenmodell die hochgeladene Datei integrieren.</span><span class="sxs-lookup"><span data-stu-id="eda68-255">In the next tutorial we'll turn our attention to integrating the uploaded file with data model.</span></span>

<span data-ttu-id="eda68-256">ASP.NET 2.0 neue s [FileUpload-Websteuerelement](https://msdn.microsoft.com/library/ms227677(VS.80).aspx) bietet einen Mechanismus für Benutzer, eine Datei von ihrem Computer an den Webserver zu senden.</span><span class="sxs-lookup"><span data-stu-id="eda68-256">ASP.NET 2.0 s new [FileUpload Web control](https://msdn.microsoft.com/library/ms227677(VS.80).aspx) provides a mechanism for users to send a file from their computer to the web server.</span></span> <span data-ttu-id="eda68-257">Das FileUpload-Steuerelement gerendert wird, als ein `<input>` Element, dessen `type` -Attribut auf die Datei, die in Browsern, wie ein Textfeld mit einer Schaltfläche "Durchsuchen angezeigt" festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="eda68-257">The FileUpload control renders as an `<input>` element whose `type` attribute is set to file, which browsers display as a textbox with a Browse button.</span></span> <span data-ttu-id="eda68-258">Durch Klicken auf die Schaltfläche zum Durchsuchen wird ein Dialogfeld, in dem der Benutzer eine Datei auswählen kann.</span><span class="sxs-lookup"><span data-stu-id="eda68-258">Clicking the Browse button brings up a dialog box from which the user can select a file.</span></span> <span data-ttu-id="eda68-259">Wenn das Formular zurückgesendet wird, werden den Inhalt der ausgewählten Datei s sowie das Postback gesendet.</span><span class="sxs-lookup"><span data-stu-id="eda68-259">When the form is posted back, the selected file s contents are sent along with the postback.</span></span> <span data-ttu-id="eda68-260">Auf der Serverseite erfolgt Informationen über die hochgeladene Datei Zugriff über die FileUpload s Steuerelementeigenschaften.</span><span class="sxs-lookup"><span data-stu-id="eda68-260">On the server-side, information about the uploaded file is accessible through the FileUpload control s properties.</span></span>

<span data-ttu-id="eda68-261">Öffnen Sie zum Hochladen von Dateien zu veranschaulichen, die `FileUpload.aspx` auf der Seite der `BinaryData` Ordner ein FileUpload-Steuerelement aus der Toolbox in den Designer ziehen, und legen Sie das Steuerelement s `ID` Eigenschaft `UploadTest`.</span><span class="sxs-lookup"><span data-stu-id="eda68-261">To demonstrate uploading files, open the `FileUpload.aspx` page in the `BinaryData` folder, drag a FileUpload control from the Toolbox onto the Designer, and set the control s `ID` property to `UploadTest`.</span></span> <span data-ttu-id="eda68-262">Als Nächstes fügen Sie eine Schaltfläche Websteuerelement Festlegen seiner `ID` und `Text` Eigenschaften `UploadButton` und die ausgewählte Datei bzw. hochladen.</span><span class="sxs-lookup"><span data-stu-id="eda68-262">Next, add a Button Web control setting its `ID` and `Text` properties to `UploadButton` and Upload Selected File, respectively.</span></span> <span data-ttu-id="eda68-263">Setzen Sie schließlich ein Bezeichnung-Websteuerelement unterhalb der Schaltfläche Löschen seine `Text` Eigenschaft, und legen seine `ID` Eigenschaft `UploadDetails`.</span><span class="sxs-lookup"><span data-stu-id="eda68-263">Finally, place a Label Web control beneath the Button, clear out its `Text` property and set its `ID` property to `UploadDetails`.</span></span>


<span data-ttu-id="eda68-264">[![Hinzufügen eines FileUpload-Steuerelements auf der ASP.NET-Seite](uploading-files-cs/_static/image12.gif)](uploading-files-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="eda68-264">[![Add a FileUpload Control to the ASP.NET Page](uploading-files-cs/_static/image12.gif)](uploading-files-cs/_static/image17.png)</span></span>

<span data-ttu-id="eda68-265">**Abbildung 12**: Hinzufügen eines FileUpload-Steuerelements auf der ASP.NET-Seite ([klicken Sie hier, um das Bild in voller Größe angezeigt](uploading-files-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="eda68-265">**Figure 12**: Add a FileUpload Control to the ASP.NET Page ([Click to view full-size image](uploading-files-cs/_static/image18.png))</span></span>


<span data-ttu-id="eda68-266">Abbildung 13 zeigt diese Seite, wenn Sie über einen Browser angezeigt.</span><span class="sxs-lookup"><span data-stu-id="eda68-266">Figure 13 shows this page when viewed through a browser.</span></span> <span data-ttu-id="eda68-267">Beachten Sie, dass Sie auf die Schaltfläche zum Durchsuchen von einem Dialogfeld zur Dateiauswahl, bringt Dadurch kann der Benutzer eine Datei von ihrem Computer auswählen.</span><span class="sxs-lookup"><span data-stu-id="eda68-267">Note that clicking the Browse button brings up a file selection dialog box, allowing the user to pick a file from their computer.</span></span> <span data-ttu-id="eda68-268">Nachdem eine Datei ausgewählt wurde, führt dazu, dass Sie auf die Schaltfläche für die ausgewählte Datei hochladen ein Postbacks, das die ausgewählte Datei s binären Inhalt an den Webserver sendet.</span><span class="sxs-lookup"><span data-stu-id="eda68-268">Once a file has been selected, clicking the Upload Selected File button causes a postback that sends the selected file s binary content to the web server.</span></span>


<span data-ttu-id="eda68-269">[![Der Benutzer kann eine Datei zum Hochladen von ihrem Computer an den Server auswählen.](uploading-files-cs/_static/image13.gif)](uploading-files-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="eda68-269">[![The User Can Select a File to Upload from their Computer to the Server](uploading-files-cs/_static/image13.gif)](uploading-files-cs/_static/image19.png)</span></span>

<span data-ttu-id="eda68-270">**Abbildung 13**: der Benutzer kann eine Datei zum Hochladen von ihrem Computer an den Server auswählen ([klicken Sie hier, um das Bild in voller Größe angezeigt](uploading-files-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="eda68-270">**Figure 13**: The User Can Select a File to Upload from their Computer to the Server ([Click to view full-size image](uploading-files-cs/_static/image20.png))</span></span>


<span data-ttu-id="eda68-271">Klicken Sie auf Postback handeln die hochgeladene Datei im Dateisystem gespeichert werden kann, oder die Binärdaten mit umgangen werden können, direkt über einen Stream.</span><span class="sxs-lookup"><span data-stu-id="eda68-271">On postback, the uploaded file can be saved to the file system or its binary data can be worked with directly through a Stream.</span></span> <span data-ttu-id="eda68-272">In diesem Beispiel können Sie s erstellen eine `~/Brochures` Ordner, und speichern Sie die hochgeladene Datei.</span><span class="sxs-lookup"><span data-stu-id="eda68-272">For this example, let s create a `~/Brochures` folder and save the uploaded file there.</span></span> <span data-ttu-id="eda68-273">Starten Sie durch Hinzufügen der `Brochures` Ordner an den Standort als Unterordner des Stammverzeichnisses.</span><span class="sxs-lookup"><span data-stu-id="eda68-273">Start by adding the `Brochures` folder to the site as a subfolder of the root directory.</span></span> <span data-ttu-id="eda68-274">Als Nächstes erstellen Sie einen Ereignishandler für das `UploadButton` s `Click` Ereignis und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="eda68-274">Next, create an event handler for the `UploadButton` s `Click` event and add the following code:</span></span>


[!code-csharp[Main](uploading-files-cs/samples/sample5.cs)]

<span data-ttu-id="eda68-275">Das Steuerelement FileUpload bietet eine Vielzahl von Eigenschaften für die Arbeit mit der hochgeladenen Daten.</span><span class="sxs-lookup"><span data-stu-id="eda68-275">The FileUpload control provides a variety of properties for working with the uploaded data.</span></span> <span data-ttu-id="eda68-276">Für die Instanz, die [ `HasFile` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload.hasfile.aspx) gibt an, ob eine Datei, durch den Benutzer hochgeladen wurde während der [ `FileBytes` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload.filebytes.aspx) ermöglicht den Zugriff auf die hochgeladenen Binärdaten als Array von Bytes.</span><span class="sxs-lookup"><span data-stu-id="eda68-276">For instance, the [`HasFile` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload.hasfile.aspx) indicates whether a file was uploaded by the user, while the [`FileBytes` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload.filebytes.aspx) provides access to the uploaded binary data as an array of bytes.</span></span> <span data-ttu-id="eda68-277">Die `Click` Ereignishandler gestartet wird, indem Sie sicherstellen, dass eine Datei hochgeladen wurde.</span><span class="sxs-lookup"><span data-stu-id="eda68-277">The `Click` event handler starts by ensuring that a file has been uploaded.</span></span> <span data-ttu-id="eda68-278">Wenn eine Datei hochgeladen wurde, zeigt die Bezeichnung der Name der hochgeladenen Datei, seiner Größe in Bytes und dem Inhaltstyp an.</span><span class="sxs-lookup"><span data-stu-id="eda68-278">If a file has been uploaded, the Label shows the name of the uploaded file, its size in bytes, and its content-type.</span></span>

> [!NOTE]
> <span data-ttu-id="eda68-279">Um sicherzustellen, dass der Benutzer eine Datei hochlädt, sehen Sie sich, die `HasFile` Eigenschaft und eine Warnmeldung angezeigt, wenn es s `false`, oder Sie können die [RequiredFieldValidator-Steuerelement](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/validation/default.aspx) stattdessen.</span><span class="sxs-lookup"><span data-stu-id="eda68-279">To ensure that the user uploads a file you can check the `HasFile` property and display a warning if it s `false`, or you may use the [RequiredFieldValidator control](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/validation/default.aspx) instead.</span></span>


<span data-ttu-id="eda68-280">Die FileUpload s `SaveAs(filePath)` speichert die hochgeladene Datei im angegebenen *FilePath*.</span><span class="sxs-lookup"><span data-stu-id="eda68-280">The FileUpload s `SaveAs(filePath)` saves the uploaded file to the specified *filePath*.</span></span> <span data-ttu-id="eda68-281">*FilePath* muss ein *physischen Pfad* (`C:\Websites\Brochures\SomeFile.pdf`) anstelle eines *virtuellen* *Pfad* (`/Brochures/SomeFile.pdf`).</span><span class="sxs-lookup"><span data-stu-id="eda68-281">*filePath* must be a *physical path* (`C:\Websites\Brochures\SomeFile.pdf`) rather than a *virtual* *path* (`/Brochures/SomeFile.pdf`).</span></span> <span data-ttu-id="eda68-282">Die [ `Server.MapPath(virtPath)` Methode](https://msdn.microsoft.com/library/system.web.httpserverutility.mappath.aspx) akzeptiert einen virtuellen Pfad und den entsprechenden physikalischen Pfad zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="eda68-282">The [`Server.MapPath(virtPath)` method](https://msdn.microsoft.com/library/system.web.httpserverutility.mappath.aspx) takes a virtual path and returns its corresponding physical path.</span></span> <span data-ttu-id="eda68-283">Hier wird der virtuelle Pfad `~/Brochures/fileName`, wobei *FileName* ist der Name der hochgeladenen Datei.</span><span class="sxs-lookup"><span data-stu-id="eda68-283">Here, the virtual path is `~/Brochures/fileName`, where *fileName* is the name of the uploaded file.</span></span> <span data-ttu-id="eda68-284">Finden Sie unter [mithilfe Server.MapPath](http://www.4guysfromrolla.com/webtech/121799-1.shtml) für Weitere Informationen zum virtuellen und physischen Pfade und Verwenden von `Server.MapPath`.</span><span class="sxs-lookup"><span data-stu-id="eda68-284">See [Using Server.MapPath](http://www.4guysfromrolla.com/webtech/121799-1.shtml) for more information on virtual and physical paths and using `Server.MapPath`.</span></span>

<span data-ttu-id="eda68-285">Nach Abschluss der `Click` -Ereignishandler können Sie die Seite in einem Browser zu testen.</span><span class="sxs-lookup"><span data-stu-id="eda68-285">After completing the `Click` event handler, take a moment to test out the page in a browser.</span></span> <span data-ttu-id="eda68-286">Klicken Sie auf die Schaltfläche zum Durchsuchen, und wählen Sie eine Datei von der Festplatte, und klicken Sie dann auf die Schaltfläche "ausgewählte Datei hochladen".</span><span class="sxs-lookup"><span data-stu-id="eda68-286">Click the Browse button and select a file from your hard drive and then click the Upload Selected File button.</span></span> <span data-ttu-id="eda68-287">Das Postback sendet den Inhalt der ausgewählten Datei an den Webserver, der dann Informationen zur Datei, und speichern Sie es angezeigt wird der `~/Brochures` Ordner.</span><span class="sxs-lookup"><span data-stu-id="eda68-287">The postback will send the contents of the selected file to the web server, which will then display information about the file before saving it to the `~/Brochures` folder.</span></span> <span data-ttu-id="eda68-288">Nach dem Hochladen der das, kehren Sie zu Visual Studio zurück, und klicken Sie auf die Schaltfläche "Aktualisieren" im Projektmappen-Explorer.</span><span class="sxs-lookup"><span data-stu-id="eda68-288">After uploading the file, return to Visual Studio and click the Refresh button in the Solution Explorer.</span></span> <span data-ttu-id="eda68-289">Sie sollte die Datei, die Sie soeben im Ordner "~/Brochures" hochgeladen.</span><span class="sxs-lookup"><span data-stu-id="eda68-289">You should see the file you just uploaded in the ~/Brochures folder!</span></span>


<span data-ttu-id="eda68-290">[![Die Datei EvolutionValley.jpg wurde an den Webserver hochgeladen.](uploading-files-cs/_static/image14.gif)](uploading-files-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="eda68-290">[![The File EvolutionValley.jpg Has Been Uploaded to the Web Server](uploading-files-cs/_static/image14.gif)](uploading-files-cs/_static/image21.png)</span></span>

<span data-ttu-id="eda68-291">**Abbildung 14**: die Datei `EvolutionValley.jpg` hochgeladen wurde an den Webserver ([klicken Sie hier, um das Bild in voller Größe angezeigt](uploading-files-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="eda68-291">**Figure 14**: The File `EvolutionValley.jpg` Has Been Uploaded to the Web Server ([Click to view full-size image](uploading-files-cs/_static/image22.png))</span></span>


![EvolutionValley.jpg wurde der Ordner "~/Brochures" gespeichert.](uploading-files-cs/_static/image15.gif)

<span data-ttu-id="eda68-293">**Abbildung 15**: `EvolutionValley.jpg` gespeichert wurde, um die `~/Brochures` Ordner</span><span class="sxs-lookup"><span data-stu-id="eda68-293">**Figure 15**: `EvolutionValley.jpg` Was Saved to the `~/Brochures` Folder</span></span>


## <a name="subtleties-with-saving-uploaded-files-to-the-file-system"></a><span data-ttu-id="eda68-294">Besonderheiten beim Speichern von hochgeladener Dateien im Dateisystem</span><span class="sxs-lookup"><span data-stu-id="eda68-294">Subtleties with Saving Uploaded Files to the File System</span></span>

<span data-ttu-id="eda68-295">Es gibt einige Besonderheiten, die behoben werden müssen, beim Hochladen von Dateien die Web Server s im Dateisystem speichern.</span><span class="sxs-lookup"><span data-stu-id="eda68-295">There are several subtleties that must be addressed when saving uploading files to the web server s file system.</span></span> <span data-ttu-id="eda68-296">Zunächst wird dort s das Problem der Sicherheit.</span><span class="sxs-lookup"><span data-stu-id="eda68-296">First, there s the issue of security.</span></span> <span data-ttu-id="eda68-297">Um eine Datei im Dateisystem zu speichern, muss der Sicherheitskontext an, unter dem die ASP.NET-Seite ausgeführt wird, über Schreibberechtigungen verfügen.</span><span class="sxs-lookup"><span data-stu-id="eda68-297">To save a file to the file system, the security context under which the ASP.NET page is executing must have Write permissions.</span></span> <span data-ttu-id="eda68-298">Der ASP.NET Development Web Server im Kontext Ihres aktuellen Benutzerkontos ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="eda68-298">The ASP.NET Development Web Server runs under the context of your current user account.</span></span> <span data-ttu-id="eda68-299">Bei Verwendung von Microsoft-s (Internet Information Services, IIS) wie der Webserver hängt von der Sicherheitskontext Version von IIS und seiner Konfiguration.</span><span class="sxs-lookup"><span data-stu-id="eda68-299">If you are using Microsoft s Internet Information Services (IIS) as the web server, the security context depends on the version of IIS and its configuration.</span></span>

<span data-ttu-id="eda68-300">Eine weitere Herausforderung Dateien im Dateisystem speichern Funktionstüchtigkeit benennen die Dateien.</span><span class="sxs-lookup"><span data-stu-id="eda68-300">Another challenge of saving files to the file system revolves around naming the files.</span></span> <span data-ttu-id="eda68-301">Derzeit unserer Seite speichert alle hochgeladenen Dateien, die `~/Brochures` Verzeichnis mit dem gleichen Namen wie die Datei auf dem Clientcomputer s verfügen.</span><span class="sxs-lookup"><span data-stu-id="eda68-301">Currently, our page saves all of the uploaded files to the `~/Brochures` directory using the same name as the file on the client s computer.</span></span> <span data-ttu-id="eda68-302">Wenn Benutzer A eine Broschüren mit dem Namen hochlädt `Brochure.pdf`, wird die Datei gespeichert werden, als `~/Brochure/Brochure.pdf`.</span><span class="sxs-lookup"><span data-stu-id="eda68-302">If User A uploads a brochure with the name `Brochure.pdf`, the file will be saved as `~/Brochure/Brochure.pdf`.</span></span> <span data-ttu-id="eda68-303">Aber was geschieht, wenn einige Zeit höher User B eine unterschiedliche Broschüren-Datei hochgeladen wird, die zufällig zur gleiche Dateinamen haben (`Brochure.pdf`)?</span><span class="sxs-lookup"><span data-stu-id="eda68-303">But what if sometime later User B uploads a different brochure file that happens to have the same filename (`Brochure.pdf`)?</span></span> <span data-ttu-id="eda68-304">Durch den Code haben wir nun, Benutzer, die mit User B s Upload eine s-Datei überschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="eda68-304">With the code we have now, User A s file will be overwritten with User B s upload.</span></span>

<span data-ttu-id="eda68-305">Es gibt diverse Techniken zum Lösen von Namenskonflikten.</span><span class="sxs-lookup"><span data-stu-id="eda68-305">There are a number of techniques for resolving file name conflicts.</span></span> <span data-ttu-id="eda68-306">Eine Möglichkeit besteht darin verbieten Hochladen einer Datei, wenn eine mit dem gleichen Namen bereits vorhanden.</span><span class="sxs-lookup"><span data-stu-id="eda68-306">One option is to prohibit uploading a file if there already exists one with the same name.</span></span> <span data-ttu-id="eda68-307">Bei diesem Ansatz, wenn Benutzer B versucht zum Hochladen einer Datei mit dem Namen `Brochure.pdf`, würde das System nicht speichern Sie ihre Datei und zeigt stattdessen eine Meldung User B, um die Datei umbenennen und versuchen Sie es erneut.</span><span class="sxs-lookup"><span data-stu-id="eda68-307">With this approach, when User B attempts to upload a file named `Brochure.pdf`, the system would not save their file and instead display a message informing User B to rename the file and try again.</span></span> <span data-ttu-id="eda68-308">Speichern Sie die Datei mit einem eindeutigen Dateinamen, die sein könnte ein anderer Ansatz ist eine [global eindeutigen Bezeichner (GUID)](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) oder den Wert aus der entsprechenden Datenbank-Datensatz s Primärschlüsselspalte(n) (vorausgesetzt, dass der Upload zugeordnet ist ein bestimmte Zeile in das Datenmodell).</span><span class="sxs-lookup"><span data-stu-id="eda68-308">Another approach is to save the file using a unique file name, which could be a [globally unique identifier (GUID)](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) or the value from the corresponding database record s primary key column(s) (assuming that the upload is associated with a particular row in the data model).</span></span> <span data-ttu-id="eda68-309">In den nächsten Lernprogrammen werden diese Optionen ausführlich untersucht.</span><span class="sxs-lookup"><span data-stu-id="eda68-309">In the next tutorial we'll explore these options in more detail.</span></span>

## <a name="challenges-involved-with-very-large-amounts-of-binary-data"></a><span data-ttu-id="eda68-310">Herausforderungen bei der Platzierung große Mengen von Binärdaten</span><span class="sxs-lookup"><span data-stu-id="eda68-310">Challenges Involved with Very Large Amounts of Binary Data</span></span>

<span data-ttu-id="eda68-311">Diese Lernprogramme setzen voraus, dass die binären Daten erfasst Größe ist.</span><span class="sxs-lookup"><span data-stu-id="eda68-311">These tutorials assume that the binary data captured is modest in size.</span></span> <span data-ttu-id="eda68-312">Arbeiten mit sehr großen Datenmengen binärdatendateien gespeichert, die mehrere MB oder größer stellt neue Herausforderung dar, die Gegenstand des diese Lernprogramme sind.</span><span class="sxs-lookup"><span data-stu-id="eda68-312">Working with very large amounts of binary data files that are several megabytes or larger introduces new challenges that are beyond the scope of these tutorials.</span></span> <span data-ttu-id="eda68-313">Beispielsweise standardmäßig ASP.NET lehnt Uploads von mehr als 4 MB, obwohl dies über konfiguriert werden, kann die [ `<httpRuntime>` Element](https://msdn.microsoft.com/library/e1f13641.aspx) in `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="eda68-313">For example, by default ASP.NET will reject uploads of more than 4 MB, although this can be configured through the [`<httpRuntime>` element](https://msdn.microsoft.com/library/e1f13641.aspx) in `Web.config`.</span></span> <span data-ttu-id="eda68-314">IIS erzwingt einen eigenen größenbeschränkungen der Datei hochladen zu.</span><span class="sxs-lookup"><span data-stu-id="eda68-314">IIS imposes its own file upload size limitations, too.</span></span> <span data-ttu-id="eda68-315">Finden Sie unter [IIS hochladen Dateigröße](http://vandamme.typepad.com/development/2005/09/iis_upload_file.html) für Weitere Informationen.</span><span class="sxs-lookup"><span data-stu-id="eda68-315">See [IIS Upload File Size](http://vandamme.typepad.com/development/2005/09/iis_upload_file.html) for more information.</span></span> <span data-ttu-id="eda68-316">Darüber hinaus kann die Zeit zum Hochladen großer Dateien standardmäßig 110 Seconds übersteigen, die ASP.NET für eine Anforderung gewartet wird.</span><span class="sxs-lookup"><span data-stu-id="eda68-316">Furthermore, the time taken to upload large files might exceed the default 110 seconds ASP.NET will wait for a request.</span></span> <span data-ttu-id="eda68-317">Es gibt auch Arbeitsspeicher- und Leistungsproblemen Probleme, die beim Arbeiten mit großen Dateien auftreten.</span><span class="sxs-lookup"><span data-stu-id="eda68-317">There are also memory and performance issues that arise when working with large files.</span></span>

<span data-ttu-id="eda68-318">Das FileUpload-Steuerelement ist für große Dateiuploads alleine nicht durchführbar.</span><span class="sxs-lookup"><span data-stu-id="eda68-318">The FileUpload control is impractical for large file uploads.</span></span> <span data-ttu-id="eda68-319">Wie der Inhalt der Datei s an den Server gesendet werden, muss der Endbenutzer geduldig ohne eine Bestätigung warten Sie, dass ihre Upload voranschreitet.</span><span class="sxs-lookup"><span data-stu-id="eda68-319">As the file s contents are being posted to the server, the end user must patiently wait without any confirmation that their upload is progressing.</span></span> <span data-ttu-id="eda68-320">Dies ist nicht so viele ein Problem beim Umgang mit kleinere Dateien, die in ein paar Sekunden hochgeladen werden können, kann jedoch ein Problem beim Umgang mit großen Dateien, die zum Hochladen Minuten dauern.</span><span class="sxs-lookup"><span data-stu-id="eda68-320">This is not so much an issue when dealing with smaller files that can be uploaded in a few seconds, but can be an issue when dealing with larger files that may take minutes to upload.</span></span> <span data-ttu-id="eda68-321">Es gibt eine Vielzahl von Drittanbieter-Datei hochladen-Steuerelemente, die für die Behandlung von großen Uploads besser geeignet sind, und viele von diesen Anbietern bieten Statusanzeigen und ActiveX-Manager hochladen, die eine weitaus ansprechende Benutzeroberfläche darstellen.</span><span class="sxs-lookup"><span data-stu-id="eda68-321">There are a variety of third-party file upload controls that are better suited for handling large uploads and many of these vendors provide progress indicators and ActiveX upload managers that present a much more polished user experience.</span></span>

<span data-ttu-id="eda68-322">Wenn die Anwendung große Dateien verarbeiten muss, müssen Sie sorgfältig untersuchen die Herausforderungen und finden Sie geeignete Lösungen für Ihren jeweiligen Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="eda68-322">If your application needs to handle large files, you'll need to carefully investigate the challenges and find suitable solutions for your particular needs.</span></span>

## <a name="summary"></a><span data-ttu-id="eda68-323">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="eda68-323">Summary</span></span>

<span data-ttu-id="eda68-324">Erstellen einer Anwendung, die zum Aufzeichnen von binären Daten benötigt, führt eine Reihe von Herausforderungen.</span><span class="sxs-lookup"><span data-stu-id="eda68-324">Building an application that needs to capture binary data introduces a number of challenges.</span></span> <span data-ttu-id="eda68-325">In diesem Lernprogramm wir die ersten beiden untersucht: entscheiden, wo die binären Daten gespeichert und ermöglichen einen Benutzer zum Hochladen von Inhalt im Binärformat über eine Webseite.</span><span class="sxs-lookup"><span data-stu-id="eda68-325">In this tutorial we explored the first two: deciding where to store the binary data and allowing a user to upload binary content through a web page.</span></span> <span data-ttu-id="eda68-326">Über die nächsten drei Lernprogramme sehen wir, wie die hochgeladenen Daten mit einem Datensatz in der Datenbank zugeordnet und wie die Binärdaten zusammen mit deren Textdatenfelder angezeigt.</span><span class="sxs-lookup"><span data-stu-id="eda68-326">Over the next three tutorials, we'll see how to associate the uploaded data with a record in the database as well as how to display the binary data alongside its text data fields.</span></span>

<span data-ttu-id="eda68-327">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="eda68-327">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="eda68-328">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="eda68-328">Further Reading</span></span>

<span data-ttu-id="eda68-329">Weitere Informationen zu den Themen in diesem Lernprogramm erläutert finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="eda68-329">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="eda68-330">Verwenden von Datentypen mit umfangreichen Werten</span><span class="sxs-lookup"><span data-stu-id="eda68-330">Using Large-Value Data Types</span></span>](https://msdn.microsoft.com/library/ms178158.aspx)
- [<span data-ttu-id="eda68-331">FileUpload-Steuerelement-Schnellstarts</span><span class="sxs-lookup"><span data-stu-id="eda68-331">FileUpload Control QuickStarts</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/standard/fileupload.aspx)
- [<span data-ttu-id="eda68-332">Die ASP.NET 2.0 FileUpload-Webserversteuerelement</span><span class="sxs-lookup"><span data-stu-id="eda68-332">The ASP.NET 2.0 FileUpload Server Control</span></span>](http://www.wrox.com/WileyCDA/Section/id-292158.html)
- [<span data-ttu-id="eda68-333">Die dunkle Seite des Dateiuploads</span><span class="sxs-lookup"><span data-stu-id="eda68-333">The Dark Side of File Uploads</span></span>](http://www.aspnetresources.com/articles/dark_side_of_file_uploads.aspx)

## <a name="about-the-author"></a><span data-ttu-id="eda68-334">Informationen zum Autor</span><span class="sxs-lookup"><span data-stu-id="eda68-334">About the Author</span></span>

<span data-ttu-id="eda68-335">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor von sieben ASP/ASP.NET-Büchern und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), Microsoft Web-Technologien seit 1998 arbeitet.</span><span class="sxs-lookup"><span data-stu-id="eda68-335">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="eda68-336">Scott fungiert als ein unabhängiger Berater, Trainer und Writer.</span><span class="sxs-lookup"><span data-stu-id="eda68-336">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="eda68-337">Sein neueste Buch wird [ *Sams Schulen selbst ASP.NET 2.0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="eda68-337">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="eda68-338">Er die erreicht werden kann, zur [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) oder über seinen Blog die finden Sie unter [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="eda68-338">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="eda68-339">Besonderen Dank an</span><span class="sxs-lookup"><span data-stu-id="eda68-339">Special Thanks To</span></span>

<span data-ttu-id="eda68-340">Diese Reihe von Lernprogrammen wurde durch viele nützliche Bearbeiter überprüft.</span><span class="sxs-lookup"><span data-stu-id="eda68-340">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="eda68-341">Lead Prüfer für dieses Lernprogramm wurden Teresa Murphy und Bernadette Leigh.</span><span class="sxs-lookup"><span data-stu-id="eda68-341">Lead reviewers for this tutorial were Teresa Murphy and Bernadette Leigh.</span></span> <span data-ttu-id="eda68-342">Meine bevorstehende MSDN-Artikel Überprüfen von Interesse?</span><span class="sxs-lookup"><span data-stu-id="eda68-342">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="eda68-343">Wenn dies der Fall ist, löschen Sie mich zeilenweise [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="eda68-343">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="eda68-344">Nächste</span><span class="sxs-lookup"><span data-stu-id="eda68-344">Next</span></span>](displaying-binary-data-in-the-data-web-controls-cs.md)
