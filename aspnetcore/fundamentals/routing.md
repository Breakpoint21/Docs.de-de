---
title: Routing in ASP.NET Core
author: ardalis
description: "In diesem Artikel erfahren Sie, wie mithilfe der ASP.NET Core-Routingfunktionalität einem Routenhandler eine eingehende Anforderung zugeordnet wird."
manager: wpickett
ms.author: riande
ms.date: 10/14/2016
ms.prod: asp.net-core
ms.technology: aspnet
ms.topic: article
uid: fundamentals/routing
ms.openlocfilehash: d35c24347e8e06ed85e2af8addcc1f8cf28dc47a
ms.sourcegitcommit: f2a11a89037471a77ad68a67533754b7bb8303e2
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/01/2018
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="51485-103">Routing in ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="51485-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="51485-104">Von [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/) und [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="51485-104">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="51485-105">Mithilfe der Routingfunktionalität wird einem Routenhandler eine eingehende Anforderung zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="51485-105">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="51485-106">Routen werden in der ASP.NET-App definiert und beim Start der App konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="51485-106">Routes are defined in the ASP.NET app and configured when the app starts up.</span></span> <span data-ttu-id="51485-107">Eine Route kann optional Werte aus der URL extrahieren, die in der Anforderung enthalten ist. Diese Werte können anschließend für die Verarbeitung der Anforderung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="51485-107">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="51485-108">Mit Routeninformationen aus der ASP.NET-App lassen sich über die Routingfunktionalität URLs generieren, die Routenhandlern zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="51485-108">Using route information from the ASP.NET app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="51485-109">So kann durch Routing entweder ein Routenhandler auf der Grundlage einer URL ermittelt oder mithilfe von Routenhandlerinformationen eine URL bestimmt werden, die einem bestimmten Routenhandler zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="51485-109">Therefore, routing can find a route handler based on a URL, or the URL corresponding to a given route handler based on route handler information.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="51485-110">In diesem Artikel wird das Low-Level-Routing in ASP.NET Core beschrieben.</span><span class="sxs-lookup"><span data-stu-id="51485-110">This document covers the low level ASP.NET Core routing.</span></span> <span data-ttu-id="51485-111">Einen Überblick über MVC-Routing in ASP.NET Core finden Sie unter [Routing to Controller Actions (Routing zu Controlleraktionen)](../mvc/controllers/routing.md)</span><span class="sxs-lookup"><span data-stu-id="51485-111">For ASP.NET Core MVC routing, see [Routing to Controller Actions](../mvc/controllers/routing.md)</span></span>

<span data-ttu-id="51485-112">[Anzeigen oder Herunterladen von Beispielcode](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([Vorgehensweise zum Herunterladen](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="51485-112">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="51485-113">Routinggrundlagen</span><span class="sxs-lookup"><span data-stu-id="51485-113">Routing basics</span></span>

<span data-ttu-id="51485-114">Beim Routing werden *Routen* (Implementierungen von [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) für Folgendes verwendet:</span><span class="sxs-lookup"><span data-stu-id="51485-114">Routing uses *routes* (implementations of [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) to:</span></span>

* <span data-ttu-id="51485-115">Zuordnen von eingehenden Anforderungen zu *Routenhandlern*</span><span class="sxs-lookup"><span data-stu-id="51485-115">map incoming requests to *route handlers*</span></span>

* <span data-ttu-id="51485-116">Generieren von URLs für Antworten</span><span class="sxs-lookup"><span data-stu-id="51485-116">generate URLs used in responses</span></span>

<span data-ttu-id="51485-117">Eine App verfügt normalerweise über genau eine Routenauflistung.</span><span class="sxs-lookup"><span data-stu-id="51485-117">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="51485-118">Sobald eine Anforderung eintrifft, werden die Routen der Auflistung der Reihe nach verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="51485-118">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="51485-119">Für die eingehende Anforderung wird eine Route gesucht, die der Anforderungs-URL entspricht. Dazu wird die Methode `RouteAsync` für jede verfügbare Route der Routenauflistung aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="51485-119">The incoming request looks for a route that matches the request URL by calling the `RouteAsync` method on each available route in the route collection.</span></span> <span data-ttu-id="51485-120">Im Gegensatz hierzu kann bei einer Antwort Routing verwendet werden, um URLs zu generieren (z.B. für Umleitungen oder Links), die auf Routeninformationen basieren. Dadurch wird die Erstellung von einmal festgelegten, unveränderliche URLs verhindert, was wiederrum zur Wartbarkeit beiträgt.</span><span class="sxs-lookup"><span data-stu-id="51485-120">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information, and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="51485-121">Die Routingfunktionalität wird über die Klasse `RouterMiddleware` mit der [Middlewarepipeline](xref:fundamentals/middleware/index) verbunden.</span><span class="sxs-lookup"><span data-stu-id="51485-121">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the `RouterMiddleware` class.</span></span> <span data-ttu-id="51485-122">Bei [ASP.NET Core MVC](xref:mvc/overview) wird im Rahmen der Konfiguration die Routingfunktionalität der Middlewarepipeline hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="51485-122">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="51485-123">Informationen darüber, wie Sie Routing als eigenständige Komponente verwenden, finden Sie im Abschnitt [Verwenden von Routingmiddleware](#using-routing-middleware).</span><span class="sxs-lookup"><span data-stu-id="51485-123">To learn about using routing as a standalone component, see [Using routing middleware](#using-routing-middleware).</span></span>

<a name="url-matching-ref"></a>

### <a name="url-matching"></a><span data-ttu-id="51485-124">URL-Zuordnung</span><span class="sxs-lookup"><span data-stu-id="51485-124">URL matching</span></span>

<span data-ttu-id="51485-125">Bei einer URL-Zuordnung werden eingehende Anforderungen durch Routing an einen *Handler* gesendet.</span><span class="sxs-lookup"><span data-stu-id="51485-125">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="51485-126">Für diesen Prozess werden üblicherweise die Daten des URL-Pfads verwendet. Es können jedoch auch alle Daten der Anforderung genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="51485-126">This process is generally based on data in the URL path, but can be extended to consider any data in the request.</span></span> <span data-ttu-id="51485-127">Für die Skalierung der Größe und Komplexität einer Anwendung ist das Versenden von Anforderungen an unterschiedliche Handler entscheidend.</span><span class="sxs-lookup"><span data-stu-id="51485-127">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an application.</span></span>

<span data-ttu-id="51485-128">Eingehende Anforderungen werden vom `RouterMiddleware`-Objekt bearbeitet, das die Methode `RouteAsync` für alle Routen nacheinander aufruft.</span><span class="sxs-lookup"><span data-stu-id="51485-128">Incoming requests enter the `RouterMiddleware`, which calls the `RouteAsync` method on each route in sequence.</span></span> <span data-ttu-id="51485-129">In der `IRouter`-Instanz wird entschieden, ob die Anforderung *verarbeitet* wird und dabei für `RouteContext.Handler` ein `RequestDelegate`-Objekt festgelegt wird, das nicht NULL ist.</span><span class="sxs-lookup"><span data-stu-id="51485-129">The `IRouter` instance chooses whether to *handle* the request by setting the `RouteContext.Handler` to a non-null `RequestDelegate`.</span></span> <span data-ttu-id="51485-130">Wenn von einer Route ein Handler für die Anforderung festgelegt wird, endet die Routenverarbeitung und der Handler wird zur Verarbeitung der Anforderung aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="51485-130">If a route sets a handler for the request, route processing stops and the handler will be invoked to process the request.</span></span> <span data-ttu-id="51485-131">Wenn alle Routen getestet werden und kein Handler für die Anforderung gefunden werden kann, ruft die Middleware *next* auf, und die nächste Middleware in der Anforderungspipeline wird aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="51485-131">If all routes are tried and no handler is found for the request, the middleware calls *next* and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="51485-132">Die primäre Eingabe für `RouteAsync` ist das `RouteContext.HttpContext`-Objekt, das der aktuellen Anforderung zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="51485-132">The primary input to `RouteAsync` is the `RouteContext.HttpContext` associated with the current request.</span></span> <span data-ttu-id="51485-133">`RouteContext.Handler` und `RouteContext.RouteData` sind Ausgaben, die nach der Zuordnung einer Route festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="51485-133">The `RouteContext.Handler` and `RouteContext.RouteData` are outputs that will be set after a route matches.</span></span>

<span data-ttu-id="51485-134">Durch eine Zuordnung bei `RouteAsync` werden außerdem die Eigenschaften von `RouteContext.RouteData` auf Grundlage der bisher verarbeiteten Anforderungen auf entsprechende Werte festgelegt.</span><span class="sxs-lookup"><span data-stu-id="51485-134">A match during `RouteAsync` will also set the properties of the `RouteContext.RouteData` to appropriate values based on the request processing done so far.</span></span> <span data-ttu-id="51485-135">Wenn eine Route einer Anforderung zugeordnet wird, erhält `RouteContext.RouteData` wichtige Zustandsinformationen zum *Ergebnis*.</span><span class="sxs-lookup"><span data-stu-id="51485-135">If a route matches a request, the `RouteContext.RouteData` will contain important state information about the *result*.</span></span>

<span data-ttu-id="51485-136">`RouteData.Values` ist ein Wörterbuch mit *Routenwerten*, das aus der Route erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="51485-136">`RouteData.Values` is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="51485-137">Die Werte werden in der Regel durch die Tokenisierung der URL ermittelt und können so verwendet werden, dass Benutzereingaben akzeptiert oder weitere Entscheidungen in der Anwendung zum Versenden von Anforderungen getroffen werden.</span><span class="sxs-lookup"><span data-stu-id="51485-137">These values are usually determined by tokenizing the URL, and can be used to accept user input, or to make further dispatching decisions inside the application.</span></span>

<span data-ttu-id="51485-138">`RouteData.DataTokens` ist eine Eigenschaftensammlung mit zusätzlichen Daten zur zugeordneten Route.</span><span class="sxs-lookup"><span data-stu-id="51485-138">`RouteData.DataTokens`  is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="51485-139">`DataTokens` werden bereitgestellt, damit sich jeder Route Zustandsdaten zuordnen lassen, sodass in der Anwendung später Entscheidungen auf Grundlage der zugeordneten Route getroffen werden können.</span><span class="sxs-lookup"><span data-stu-id="51485-139">`DataTokens` are provided to support associating state data with each route so the application can make decisions later based on which route matched.</span></span> <span data-ttu-id="51485-140">Diese Werte werden vom Entwickler vorgegeben und beeinflussen das Routingverhalten **in keiner Weise**.</span><span class="sxs-lookup"><span data-stu-id="51485-140">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="51485-141">Im Gegensatz zu Routenwerten, die sich leicht in bzw. aus Zeichenfolgen konvertieren lassen müssen, können Datentokenwerte außerdem einem beliebigen Typ entsprechen.</span><span class="sxs-lookup"><span data-stu-id="51485-141">Additionally, values stashed in data tokens can be of any type, in contrast to route values, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="51485-142">`RouteData.Routers` ist eine Liste der Routen, die an der Zuordnung der Anforderung beteiligt waren.</span><span class="sxs-lookup"><span data-stu-id="51485-142">`RouteData.Routers` is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="51485-143">Routen können ineinander verschachtelt sein. Die `Routers`-Eigenschaft stellt den Pfad durch die logische Struktur der Routen dar, aus der die Zuordnung hervorgegangen ist.</span><span class="sxs-lookup"><span data-stu-id="51485-143">Routes can be nested inside one another, and the `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="51485-144">Üblicherweise ist das erste Element in `Routers` die Routenauflistung. Diese sollte zur URL-Generierung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="51485-144">Generally the first item in `Routers` is the route collection, and should be used for URL generation.</span></span> <span data-ttu-id="51485-145">Das letzte Element in `Routers` ist der Routenhandler, für den eine Zuordnung vorgenommen wurde.</span><span class="sxs-lookup"><span data-stu-id="51485-145">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="51485-146">URL-Generierung</span><span class="sxs-lookup"><span data-stu-id="51485-146">URL generation</span></span>

<span data-ttu-id="51485-147">Bei der URL-Generierung wird durch Routing ein URL-Pfad basierend auf mehreren Routenwerten erstellt.</span><span class="sxs-lookup"><span data-stu-id="51485-147">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="51485-148">Dies ermöglicht eine logische Trennung zwischen den Handlern und den URLs, die auf die Handler zugreifen.</span><span class="sxs-lookup"><span data-stu-id="51485-148">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="51485-149">Auch für die URL-Generierung wird ein iterativer Prozess verwendet, bei dem allerdings zuerst vom Benutzer- oder Frameworkcode die `GetVirtualPath`-Methode der Routenauflistung aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="51485-149">URL generation follows a similar iterative process, but starts with user or framework code calling into the `GetVirtualPath` method of the route collection.</span></span> <span data-ttu-id="51485-150">Anschließend wird nacheinander für jede *Route* die zugehörige `GetVirtualPath`-Methode aufgerufen, bis ein `VirtualPathData`-Objekt zurückgegeben wird, das nicht NULL ist.</span><span class="sxs-lookup"><span data-stu-id="51485-150">Each *route* will then have its `GetVirtualPath` method called in sequence until a non-null `VirtualPathData` is returned.</span></span>

<span data-ttu-id="51485-151">Die primären Eingaben für `GetVirtualPath` sind:</span><span class="sxs-lookup"><span data-stu-id="51485-151">The primary inputs to `GetVirtualPath` are:</span></span>

* `VirtualPathContext.HttpContext`

* `VirtualPathContext.Values`

* `VirtualPathContext.AmbientValues`

<span data-ttu-id="51485-152">Für Routen werden überwiegend die Routenwerte verwendet, die von `Values` und `AmbientValues` bereitgestellt werden. Dadurch wird ermittelt, wo eine URL erstellt werden kann und welche Werte diese enthalten soll.</span><span class="sxs-lookup"><span data-stu-id="51485-152">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide where it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="51485-153">`AmbientValues` sind Routenwerte, die durch die Zuordnung von aktueller Anforderung und Routingsystem erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="51485-153">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="51485-154">Im Gegensatz dazu sind `Values` die Routenwerte, die angeben, wie die gewünschte URL für den aktuellen Vorgang generiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="51485-154">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="51485-155">`HttpContext` wird bereitgestellt, falls für eine Route Dienste oder zusätzliche Daten, die mit dem aktuellen Kontext verknüpft sind, abgerufen werden müssen.</span><span class="sxs-lookup"><span data-stu-id="51485-155">The `HttpContext` is provided in case a route needs to get services or additional data associated with the current context.</span></span>

<span data-ttu-id="51485-156">Tipp: Stellen Sie sich `Values` als Außerkraftsetzungen für `AmbientValues` vor.</span><span class="sxs-lookup"><span data-stu-id="51485-156">Tip: Think of `Values` as being a set of overrides for the `AmbientValues`.</span></span> <span data-ttu-id="51485-157">Bei der URL-Generierung wird versucht, Routenwerte der aktuellen Anforderung wiederzuverwenden, um so URLs für Links generieren zu können, die dieselbe Route oder dieselben Routenwerte verwenden.</span><span class="sxs-lookup"><span data-stu-id="51485-157">URL generation tries to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="51485-158">Die Ausgabe von `GetVirtualPath` ist ein `VirtualPathData`-Objekt.</span><span class="sxs-lookup"><span data-stu-id="51485-158">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="51485-159">`VirtualPathData` verhält sich analog zu `RouteData` und enthält das `VirtualPath`-Objekt für die Ausgabe-URL sowie einige zusätzlichen Eigenschaften, die von der Route festgelegt werden sollten.</span><span class="sxs-lookup"><span data-stu-id="51485-159">`VirtualPathData` is a parallel of `RouteData`; it contains the `VirtualPath` for the output URL as well as the some additional properties that should be set by the route.</span></span>

<span data-ttu-id="51485-160">Die `VirtualPathData.VirtualPath`-Eigenschaft enthält den *virtuellen Pfad*, der von der Route erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="51485-160">The `VirtualPathData.VirtualPath` property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="51485-161">Je nach Anforderungen muss der Pfad eventuell noch weiter verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="51485-161">Depending on your needs you may need to process the path further.</span></span> <span data-ttu-id="51485-162">Wenn beispielsweise die generierte URL in HTML gerendert werden soll, muss der Basispfad der Anwendung vorangestellt werden.</span><span class="sxs-lookup"><span data-stu-id="51485-162">For instance, if you want to render the generated URL in HTML you need to prepend the base path of the application.</span></span>

<span data-ttu-id="51485-163">`VirtualPathData.Router` ist ein Verweis auf die Route, mit der die URL generiert wurde.</span><span class="sxs-lookup"><span data-stu-id="51485-163">The `VirtualPathData.Router` is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="51485-164">Die `VirtualPathData.DataTokens`-Eigenschaften stellen ein Wörterbuch mit zusätzlichen Daten zur Route dar, mit der die URL generiert wurde.</span><span class="sxs-lookup"><span data-stu-id="51485-164">The `VirtualPathData.DataTokens` properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="51485-165">Dabei handelt es sich um das Gegenstück zu `RouteData.DataTokens`.</span><span class="sxs-lookup"><span data-stu-id="51485-165">This is the parallel of `RouteData.DataTokens`.</span></span>

### <a name="creating-routes"></a><span data-ttu-id="51485-166">Erstellen von Routen</span><span class="sxs-lookup"><span data-stu-id="51485-166">Creating routes</span></span>

<span data-ttu-id="51485-167">Für die Routingfunktionalität wird die `Route`-Klasse als Standardimplementierung von `IRouter` zur Verfügung gestellt.</span><span class="sxs-lookup"><span data-stu-id="51485-167">Routing provides the `Route` class as the standard implementation of `IRouter`.</span></span> <span data-ttu-id="51485-168">`Route` verwendet die Syntax für *Routenvorlagen* und definiert so Muster, die mit dem URL-Pfad abgeglichen werden, wenn `RouteAsync` aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="51485-168">`Route` uses the *route template* syntax to define patterns that will match against the URL path when `RouteAsync` is called.</span></span> <span data-ttu-id="51485-169">`Route` nutzt dieselbe Routenvorlage zum Generieren einer URL, wenn `GetVirtualPath` aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="51485-169">`Route` will use the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="51485-170">Die meisten Anwendungen erstellen Routen, indem sie `MapRoute` oder eine ähnliche Erweiterungsmethode aufrufen, die in `IRouteBuilder` definiert ist.</span><span class="sxs-lookup"><span data-stu-id="51485-170">Most applications will create routes by calling `MapRoute` or one of the similar extension methods defined on `IRouteBuilder`.</span></span> <span data-ttu-id="51485-171">All diese Methoden erstellen eine Instanz von `Route` und fügen dieser der Routenauflistung hinzu.</span><span class="sxs-lookup"><span data-stu-id="51485-171">All of these methods will create an instance of `Route` and add it to the route collection.</span></span>

<span data-ttu-id="51485-172">Hinweis: `MapRoute` akzeptiert keinen Routenhandlerparameter und fügt nur Routen hinzu, die von `DefaultHandler` verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="51485-172">Note: `MapRoute` doesn't take a route handler parameter - it only adds routes that will be handled by the `DefaultHandler`.</span></span> <span data-ttu-id="51485-173">Da der Standardhandler ein `IRouter`-Objekt ist, verarbeitet dieser die Anforderung eventuell nicht.</span><span class="sxs-lookup"><span data-stu-id="51485-173">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="51485-174">Beispielsweise ist ASP.NET MVC üblicherweise als Standardhandler konfiguriert, der nur Anforderungen verarbeitet, die mit einem verfügbaren Controller und einer Aktion übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="51485-174">For example, ASP.NET MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="51485-175">Weitere Informationen zum Routing zu MVC finden Sie unter [Routing to Controller Actions (Routing zu Controlleraktionen)](../mvc/controllers/routing.md).</span><span class="sxs-lookup"><span data-stu-id="51485-175">To learn more about routing to MVC, see [Routing to Controller Actions](../mvc/controllers/routing.md).</span></span>

<span data-ttu-id="51485-176">Im folgenden Beispiel wird `MapRoute` innerhalb einer typischen ASP.NET MVC-Routendefinition aufgerufen:</span><span class="sxs-lookup"><span data-stu-id="51485-176">This is an example of a `MapRoute` call used by a typical ASP.NET MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="51485-177">Diese Vorlage gleicht einen URL-Pfad wie `/Products/Details/17` ab und extrahiert die Routenwerte `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="51485-177">This template will match a URL path like `/Products/Details/17` and extract the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="51485-178">Diese werden ermittelt, indem der URL-Pfad in Segmente aufgeteilt wird und jedes Segment mit dem Namen des *Routenparameters* in der Routenvorlage abgeglichen wird.</span><span class="sxs-lookup"><span data-stu-id="51485-178">The route values are determined by splitting the URL path into segments, and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="51485-179">Jeder Routenparameter hat einen Namen.</span><span class="sxs-lookup"><span data-stu-id="51485-179">Route parameters are named.</span></span> <span data-ttu-id="51485-180">Dieser wird von Klammern `{ }` eingeschlossen und dadurch definiert.</span><span class="sxs-lookup"><span data-stu-id="51485-180">They're defined by enclosing the parameter name in braces `{ }`.</span></span>

<span data-ttu-id="51485-181">Die obige Vorlage würde durch einen Abgleich auch den URL-Pfad `/` finden und daraus die Werte `{ controller = Home, action = Index }` generieren.</span><span class="sxs-lookup"><span data-stu-id="51485-181">The template above could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="51485-182">Dies liegt daran, dass die Routenparameter `{controller}` und `{action}` über Standardwerte verfügen und der Routenparameter `id` optional ist.</span><span class="sxs-lookup"><span data-stu-id="51485-182">This happens because the `{controller}` and `{action}` route parameters have default values, and the `id` route parameter is optional.</span></span> <span data-ttu-id="51485-183">Hinter dem Namen des Routenparameters steht das Gleichheitszeichen (`=`), auf das der Wert folgt, der als Standardwert für den Parameter definiert wird.</span><span class="sxs-lookup"><span data-stu-id="51485-183">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="51485-184">Durch ein Fragezeichen (`?`) nach dem Namen des Routenparameters wird der Parameter als optional festgelegt.</span><span class="sxs-lookup"><span data-stu-id="51485-184">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="51485-185">Durch Routenparameter mit einem Standardwert wird *immer* ein Routenwert erzeugt, wenn die Route übereinstimmt. Bei optionalen Parametern ohne entsprechendes URL-Pfadsegment wird kein Routenwert generiert.</span><span class="sxs-lookup"><span data-stu-id="51485-185">Route parameters with a default value *always* produce a route value when the route matches - optional parameters won't produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="51485-186">Eine ausführliche Beschreibung zu den Features und zur Syntax der Routenvorlage finden Sie unter [Referenz für Routenvorlagen](#route-template-reference).</span><span class="sxs-lookup"><span data-stu-id="51485-186">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="51485-187">Das folgende Beispiel demonstriert eine *Routeneinschränkung*:</span><span class="sxs-lookup"><span data-stu-id="51485-187">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="51485-188">Durch diese Vorlage wird bei einem Abgleich beispielsweise der URL-Pfad `/Products/Details/17`, aber nicht `/Products/Details/Apples` gefunden.</span><span class="sxs-lookup"><span data-stu-id="51485-188">This template will match a URL path like `/Products/Details/17`, but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="51485-189">In der Routenparameterdefinition `{id:int}` wird eine *Routeneinschränkung* für den Routenparameter `id` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="51485-189">The route parameter definition `{id:int}` defines a *route constraint* for the `id` route parameter.</span></span> <span data-ttu-id="51485-190">In derartigen Einschränkungen wird `IRouteConstraint` implementiert, und die Routenwerte werden auf Gültigkeit geprüft.</span><span class="sxs-lookup"><span data-stu-id="51485-190">Route constraints implement `IRouteConstraint` and inspect route values to verify them.</span></span> <span data-ttu-id="51485-191">Im obigen Beispiel muss sich der Routenwert `id` in einen Integer konvertieren lassen.</span><span class="sxs-lookup"><span data-stu-id="51485-191">In this example the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="51485-192">Eine ausführliche Beschreibung der Routeneinschränkungen, die vom Framework bereitgestellt werden, finden Sie in der [Referenz zu Routeneinschränkungen](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="51485-192">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="51485-193">Bei zusätzlichen Überladungen von `MapRoute` werden Werte für `constraints`, `dataTokens` und `defaults` akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="51485-193">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="51485-194">Diese zusätzlichen Parameter von `MapRoute` werden als `object`-Typ definiert.</span><span class="sxs-lookup"><span data-stu-id="51485-194">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="51485-195">Üblicherweise werden diese Parameter so verwendet, dass ein Objekt eines anonymen Typs übergeben wird, in dem die Eigenschaftsnamen des anonymen Typs mit den Routenparameternamen abgeglichen werden.</span><span class="sxs-lookup"><span data-stu-id="51485-195">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="51485-196">In den beiden folgenden Beispielen werden identische Routen erstellt:</span><span class="sxs-lookup"><span data-stu-id="51485-196">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="51485-197">Tipp: Für einfache Routen ist die Inline-Syntax zum Definieren von Einschränkungen und Standardwerten leichter zu handhaben.</span><span class="sxs-lookup"><span data-stu-id="51485-197">Tip: The inline syntax for defining constraints and defaults can be more convenient for simple routes.</span></span> <span data-ttu-id="51485-198">Bestimmte Features wie Datentoken werden von dieser allerdings nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="51485-198">However, there are features such as data tokens which are not supported by inline syntax.</span></span>

<span data-ttu-id="51485-199">Im folgenden Beispiel werden einige weitere Features demonstriert:</span><span class="sxs-lookup"><span data-stu-id="51485-199">This example demonstrates a few more features:</span></span>

```csharp
routes.MapRoute(
  name: "blog",
  template: "Blog/{*article}",
  defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="51485-200">Mit dieser Vorlage wird durch einen Abgleich z.B. der URL-Pfad `/Blog/All-About-Routing/Introduction` gefunden, und die Werte `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }` werden extrahiert.</span><span class="sxs-lookup"><span data-stu-id="51485-200">This template will match a URL path like `/Blog/All-About-Routing/Introduction` and will extract the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="51485-201">Die Standardroutenwerte für `controller` und `action` werden von der Route generiert, obwohl keine entsprechenden Routenparameter in der Vorlage vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="51485-201">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="51485-202">Standardwerte können in der Routenvorlage angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="51485-202">Default values can be specified in the route template.</span></span> <span data-ttu-id="51485-203">Der Routenparameter `article` wird durch ein Sternchen (`*`) vor dem zugehörigen Namen als *Catch-All-Parameter* definiert.</span><span class="sxs-lookup"><span data-stu-id="51485-203">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="51485-204">So wird der verbleibende Teil des URL-Pfads erfasst, wodurch auch leere Zeichenfolgen gefunden werden können.</span><span class="sxs-lookup"><span data-stu-id="51485-204">Catch-all route parameters capture the remainder of the URL path, and can also match the empty string.</span></span>

<span data-ttu-id="51485-205">Im nächsten Beispiel werden Routeneinschränkungen und Datentoken hinzugefügt:</span><span class="sxs-lookup"><span data-stu-id="51485-205">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="51485-206">Mit dieser Vorlage wird durch einen Abgleich z.B. der URL-Pfad `/Products/5` gefunden, und die Werte `{ controller = Products, action = Details, id = 5 }` sowie die Datentoken `{ locale = en-US }` werden extrahiert.</span><span class="sxs-lookup"><span data-stu-id="51485-206">This template will match a URL path like `/Products/5` and will extract the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Gebietsschemas, Windows-Tokens](routing/_static/tokens.png)

<a name="id1"></a>

### <a name="url-generation"></a><span data-ttu-id="51485-208">URL-Generierung</span><span class="sxs-lookup"><span data-stu-id="51485-208">URL generation</span></span>

<span data-ttu-id="51485-209">Durch die Kombination von mehreren Routenwerten und der zugehörigen Routenvorlage kann die `Route`-Klasse auch URLs generieren.</span><span class="sxs-lookup"><span data-stu-id="51485-209">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="51485-210">Dieser Prozess verläuft umgekehrt zum Abgleich eines URL-Pfads.</span><span class="sxs-lookup"><span data-stu-id="51485-210">This is logically the reverse process of matching the URL path.</span></span>

<span data-ttu-id="51485-211">Tipp: Wenn Sie die URL-Generierung besser nachvollziehen möchten, sollten Sie sich überlegen, welche URL generiert werden soll und wie diese mithilfe der Routenvorlage abgeglichen wird.</span><span class="sxs-lookup"><span data-stu-id="51485-211">Tip: To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="51485-212">Dabei sollten Sie auch darüber nachdenken, welche Werte erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="51485-212">What values would be produced?</span></span> <span data-ttu-id="51485-213">Dieser Vorgang entspricht in etwa der URL-Generierung in der `Route`-Klasse.</span><span class="sxs-lookup"><span data-stu-id="51485-213">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="51485-214">Im nächsten Beispiel wird eine einfache ASP.NET MVC-Route verwendet:</span><span class="sxs-lookup"><span data-stu-id="51485-214">This example uses a basic ASP.NET MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="51485-215">Die Route generiert mithilfe der Routenwerte `{ controller = Products, action = List }` die URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="51485-215">With the route values `{ controller = Products, action = List }`, this route will generate the URL `/Products/List`.</span></span> <span data-ttu-id="51485-216">Die Routenwerte werden als Ersatz für die entsprechenden Routenparameter verwendet, wodurch ein URL-Pfad erstellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="51485-216">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="51485-217">Da `id` ein optionaler Parameter ist, muss dieser über keinen Wert verfügen.</span><span class="sxs-lookup"><span data-stu-id="51485-217">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="51485-218">Die Route generiert mithilfe der Routenwerte `{ controller = Home, action = Index }` die URL `/`.</span><span class="sxs-lookup"><span data-stu-id="51485-218">With the route values `{ controller = Home, action = Index }`, this route will generate the URL `/`.</span></span> <span data-ttu-id="51485-219">Die bereitgestellten Routenwerte entsprechen den Standardwerten, sodass die Segmente, die mit diesen Werten übereinstimmen, problemlos ausgelassen werden können.</span><span class="sxs-lookup"><span data-stu-id="51485-219">The route values that were provided match the default values so the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="51485-220">Beachten Sie, dass mit beiden generierten URLs und dieser Routendefinition ein Roundtrip ausgeführt würde und dieselben Werte erstellt würden, die zur Generierung der URL verwendet wurden.</span><span class="sxs-lookup"><span data-stu-id="51485-220">Note that both URLs generated would round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

<span data-ttu-id="51485-221">Tipp: Eine auf ASP.NET MVC basierte App sollte zur Generierung von URLs die Routingfunktionalität nicht direkt aufrufen, sondern `UrlHelper` verwenden.</span><span class="sxs-lookup"><span data-stu-id="51485-221">Tip: An app using ASP.NET MVC should use `UrlHelper` to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="51485-222">Weitere Informationen zum URL-Generierungsprozess finden Sie unter [Referenz für URL-Generierung](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="51485-222">For more details about the URL generation process, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="using-routing-middleware"></a><span data-ttu-id="51485-223">Verwenden von Routingmiddleware</span><span class="sxs-lookup"><span data-stu-id="51485-223">Using Routing Middleware</span></span>

<span data-ttu-id="51485-224">Fügen Sie zuerst das NuGet-Paket „Microsoft.AspNetCore.Routing“ hinzu.</span><span class="sxs-lookup"><span data-stu-id="51485-224">Add the NuGet package "Microsoft.AspNetCore.Routing".</span></span>

<span data-ttu-id="51485-225">Fügen Sie anschließend dem Dienstcontainer in *Startup.cs* die Routingfunktionalität hinzu:</span><span class="sxs-lookup"><span data-stu-id="51485-225">Add routing to the service container in *Startup.cs*:</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?highlight=3&start=11&end=14)]

<span data-ttu-id="51485-226">Routen müssen in der `Configure`-Methode der `Startup`-Klasse konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="51485-226">Routes must be configured in the `Configure` method in the `Startup` class.</span></span> <span data-ttu-id="51485-227">Für das nächste Beispiel werden folgende APIs verwendet:</span><span class="sxs-lookup"><span data-stu-id="51485-227">The sample below uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="51485-228">`MapGet` (nur HTTP GET-Anforderungen werden abgeglichen)</span><span class="sxs-lookup"><span data-stu-id="51485-228">`MapGet`  Matches only HTTP GET requests</span></span>
* `UseRouter`

```csharp
public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)
{
    var trackPackageRouteHandler = new RouteHandler(context =>
    {
        var routeValues = context.GetRouteData().Values;
        return context.Response.WriteAsync(
            $"Hello! Route values: {string.Join(", ", routeValues)}");
    });

    var routeBuilder = new RouteBuilder(app, trackPackageRouteHandler);

    routeBuilder.MapRoute(
        "Track Package Route",
        "package/{operation:regex(^(track|create|detonate)$)}/{id:int}");

    routeBuilder.MapGet("hello/{name}", context =>
    {
        var name = context.GetRouteValue("name");
        // This is the route handler when HTTP GET "hello/<anything>"  matches
        // To match HTTP GET "hello/<anything>/<anything>,
        // use routeBuilder.MapGet("hello/{*name}"
        return context.Response.WriteAsync($"Hi, {name}!");
    });

    var routes = routeBuilder.Build();
    app.UseRouter(routes);
}
```

<span data-ttu-id="51485-229">In der folgenden Tabelle werden die Antworten mit den angegebenen URIs aufgelistet:</span><span class="sxs-lookup"><span data-stu-id="51485-229">The table below shows the responses with the given URIs.</span></span>

| <span data-ttu-id="51485-230">URI</span><span class="sxs-lookup"><span data-stu-id="51485-230">URI</span></span> | <span data-ttu-id="51485-231">Antwort</span><span class="sxs-lookup"><span data-stu-id="51485-231">Response</span></span>  |
| ------- | -------- |
| <span data-ttu-id="51485-232">/package/create/3</span><span class="sxs-lookup"><span data-stu-id="51485-232">/package/create/3</span></span>  | <span data-ttu-id="51485-233">Hallo!</span><span class="sxs-lookup"><span data-stu-id="51485-233">Hello!</span></span> <span data-ttu-id="51485-234">Route values: [operation, create], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="51485-234">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="51485-235">/package/track/-3</span><span class="sxs-lookup"><span data-stu-id="51485-235">/package/track/-3</span></span>  | <span data-ttu-id="51485-236">Hallo!</span><span class="sxs-lookup"><span data-stu-id="51485-236">Hello!</span></span> <span data-ttu-id="51485-237">Route values: [operation, track], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="51485-237">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="51485-238">/package/track/-3/</span><span class="sxs-lookup"><span data-stu-id="51485-238">/package/track/-3/</span></span> | <span data-ttu-id="51485-239">Hallo!</span><span class="sxs-lookup"><span data-stu-id="51485-239">Hello!</span></span> <span data-ttu-id="51485-240">Route values: [operation, track], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="51485-240">Route values: [operation, track], [id, -3]</span></span>  |
| <span data-ttu-id="51485-241">/package/track/</span><span class="sxs-lookup"><span data-stu-id="51485-241">/package/track/</span></span> | <span data-ttu-id="51485-242">\<Fall through, no match> (Fehlgeschlagen, keine Übereinstimmung)</span><span class="sxs-lookup"><span data-stu-id="51485-242">\<Fall through, no match></span></span> |
| <span data-ttu-id="51485-243">GET /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="51485-243">GET /hello/Joe</span></span> | <span data-ttu-id="51485-244">Hi, Joe!</span><span class="sxs-lookup"><span data-stu-id="51485-244">Hi, Joe!</span></span> |
| <span data-ttu-id="51485-245">POST /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="51485-245">POST /hello/Joe</span></span> | <span data-ttu-id="51485-246">\<Fall through, matches HTTP GET only> (Fehlgeschlagen, stimmt nur mit HTTP GET überein)</span><span class="sxs-lookup"><span data-stu-id="51485-246">\<Fall through, matches HTTP GET only></span></span> |
| <span data-ttu-id="51485-247">GET /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="51485-247">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="51485-248">\<Fall through, no match> (Fehlgeschlagen, keine Übereinstimmung)</span><span class="sxs-lookup"><span data-stu-id="51485-248">\<Fall through, no match></span></span> |

<span data-ttu-id="51485-249">Wenn Sie eine einzelne Route konfigurieren, müssen Sie `app.UseRouter` aufrufen und eine `IRouter`-Instanz übergeben.</span><span class="sxs-lookup"><span data-stu-id="51485-249">If you are configuring a single route, call `app.UseRouter` passing in an `IRouter` instance.</span></span> <span data-ttu-id="51485-250">Ein Aufruf von `RouteBuilder` ist nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="51485-250">You won't need to call `RouteBuilder`.</span></span>

<span data-ttu-id="51485-251">Das Framework stellt mehrere Erweiterungsmethoden zum Erstellen von Routen zur Verfügung:</span><span class="sxs-lookup"><span data-stu-id="51485-251">The framework provides a set of extension methods for creating routes such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="51485-252">Für einige Methoden wie `MapGet` muss ein `RequestDelegate`-Delegat bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="51485-252">Some of these methods such as `MapGet` require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="51485-253">`RequestDelegate` wird als *Routenhandler* verwendet, wenn der Abgleich für die Route erfolgreich ist.</span><span class="sxs-lookup"><span data-stu-id="51485-253">The `RequestDelegate` will be used as the *route handler* when the route matches.</span></span> <span data-ttu-id="51485-254">Für andere Erweiterungsmethoden kann eine Middlewarepipeline konfiguriert werden, die als Routenhandler verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="51485-254">Other methods in this family allow configuring a middleware pipeline which will be used as the route handler.</span></span> <span data-ttu-id="51485-255">Wenn die *Map*-Methode einen Handler wie `MapRoute` nicht akzeptiert, verwendet sie `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="51485-255">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it will use the `DefaultHandler`.</span></span>

<span data-ttu-id="51485-256">In den `Map[Verb]`-Methoden werden Einschränkungen verwendet, um die Route auf das HTTP-Verb im Methodennamen zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="51485-256">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="51485-257">Beispiele dafür sind [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) und [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span><span class="sxs-lookup"><span data-stu-id="51485-257">For example, see [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) and [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="51485-258">Referenz für Routenvorlagen</span><span class="sxs-lookup"><span data-stu-id="51485-258">Route Template Reference</span></span>

<span data-ttu-id="51485-259">Token in geschweiften Klammern (`{ }`) definieren *Routenparameter*, die beim Abgleich der Route gebunden werden.</span><span class="sxs-lookup"><span data-stu-id="51485-259">Tokens within curly braces (`{ }`) define *route parameters* which will be bound if the route is matched.</span></span> <span data-ttu-id="51485-260">Sie können in einem Routensegment mehrere Routenparameter definieren, wenn Sie sie durch einen Literalwert trennen.</span><span class="sxs-lookup"><span data-stu-id="51485-260">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="51485-261">`{controller=Home}{action=Index}` wäre z.B. keine gültige Route, da sich zwischen `{controller}` und `{action}` kein Literalwert befindet.</span><span class="sxs-lookup"><span data-stu-id="51485-261">For example `{controller=Home}{action=Index}` wouldn't be a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="51485-262">Diese Routenparameter müssen einen Namen besitzen und können zusätzliche Attribute aufweisen.</span><span class="sxs-lookup"><span data-stu-id="51485-262">These route parameters must have a name, and may have additional attributes specified.</span></span>

<span data-ttu-id="51485-263">Eine Literalzeichenfolge, die nicht den Routenparametern entspricht (z.B. `{id}`), muss zusammen mit dem Pfadtrennzeichen `/` mit dem URL-Text übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="51485-263">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="51485-264">Beim Abgleich von Text wird nicht zwischen Groß-/Kleinbuchstaben unterschieden, und die Übereinstimmung basiert auf der decodierten Repräsentation des URL-Pfads.</span><span class="sxs-lookup"><span data-stu-id="51485-264">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="51485-265">Damit das Trennzeichen `{` oder `}` der Routenparameter-Literalzeichenfolge bei einem Abgleich gefunden wird, muss es doppelt vorhanden sein (`{{` oder `}}`), was einem Escapezeichen entspricht.</span><span class="sxs-lookup"><span data-stu-id="51485-265">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="51485-266">Bei einem URL-Muster, durch das ein Dateiname mit einer optionalen Erweiterung erfasst werden soll, sind noch weitere Aspekte zu berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="51485-266">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="51485-267">Wenn beispielsweise die Vorlage `files/{filename}.{ext?}` verwendet wird und sowohl `filename` als auch `ext` vorhanden sind, werden für beide Parameter Werte aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="51485-267">For example, using the template `files/{filename}.{ext?}` - When both `filename` and `ext` exist, both values will be populated.</span></span> <span data-ttu-id="51485-268">Wenn nur `filename` in der URL vorhanden ist, wird für die Route eine Übereinstimmung ermittelt, da der nachstehende Punkt (`.`) optional ist.</span><span class="sxs-lookup"><span data-stu-id="51485-268">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="51485-269">Die folgenden URLs würden mit der Route übereinstimmen:</span><span class="sxs-lookup"><span data-stu-id="51485-269">The following URLs would match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile.`
* `/files/myFile`

<span data-ttu-id="51485-270">Sie können das `*`-Zeichen als Präfix für einen Routenparameter verwenden, um damit eine Bindung zum verbleibenden Teil des URI herzustellen. Dies wird als *Catch-All*-Parameter bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="51485-270">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI - this is called a *catch-all* parameter.</span></span> <span data-ttu-id="51485-271">Durch `blog/{*slug}` würde beispielsweise jeder URI ermittelt, der mit `/blog` beginnt und dahinter einen beliebigen Wert aufweist (der dann dem `slug`-Routenwert zugeordnet wird).</span><span class="sxs-lookup"><span data-stu-id="51485-271">For example, `blog/{*slug}` would match any URI that started with `/blog` and had any value following it (which would be assigned to the `slug` route value).</span></span> <span data-ttu-id="51485-272">Durch Catch-All-Parameter können auch leere Zeichenfolgen gefunden werden.</span><span class="sxs-lookup"><span data-stu-id="51485-272">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="51485-273">Routenparameter können über mehrere *Standardwerte* verfügen, die nach dem Parameternamen angegeben werden und durch `=` abgetrennt werden.</span><span class="sxs-lookup"><span data-stu-id="51485-273">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an `=`.</span></span> <span data-ttu-id="51485-274">Durch `{controller=Home}` würde beispielsweise `Home` als Standardwert für `controller` festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="51485-274">For example, `{controller=Home}` would define `Home` as the default value for `controller`.</span></span> <span data-ttu-id="51485-275">Der Standardwert wird verwendet, wenn kein Wert in der Parameter-URL vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="51485-275">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="51485-276">Routenparameter können nicht nur Standardwerte aufweisen, sondern darüber hinaus auch als optional definiert werden, indem am Ende des Parameternamens `?` hinzugefügt wird. Dies ist beispielsweise bei `id?` der Fall.</span><span class="sxs-lookup"><span data-stu-id="51485-276">In addition to default values, route parameters may be optional (specified by appending a `?` to the end of the parameter name, as in `id?`).</span></span> <span data-ttu-id="51485-277">Der Unterschied zwischen optionalen Parametern und Parametern mit einem Standardwert besteht darin, dass ein Routenparameter mit einem Standardwert immer einen Wert erzeugt. Ein optionaler Parameter verfügt demgegenüber nur dann über einen Wert, wenn ein solcher angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="51485-277">The difference between optional and "has default" is that a route parameter with a default value always produces a value; an optional parameter has a value only when one is provided.</span></span>

<span data-ttu-id="51485-278">Routenparameter können des Weiteren Einschränkungen aufweisen, die mit dem gebundenen Routenwert der URL übereinstimmen müssen.</span><span class="sxs-lookup"><span data-stu-id="51485-278">Route parameters may also have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="51485-279">Eine *Inline-Einschränkung* für einen Routenparameter geben Sie an, indem Sie hinter dem Namen des Routenparameters einen Doppelpunkt (`:`) und einen Einschränkungsnamen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="51485-279">Adding a colon `:` and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="51485-280">Wenn für die Einschränkung Argumente erforderlich sind, werden diese nach dem Einschränkungsnamen in Klammern (`( )`) angegeben.</span><span class="sxs-lookup"><span data-stu-id="51485-280">If the constraint requires arguments those are provided enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="51485-281">Mehrere Inline-Einschränkungen können festgelegt werden, indem ein weiterer Doppelpunkt (`:`) und Einschränkungsname hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="51485-281">Multiple inline constraints can be specified by appending another colon `:` and constraint name.</span></span> <span data-ttu-id="51485-282">Der Einschränkungsname wird dem `IInlineConstraintResolver`-Dienst übergeben, wodurch eine Instanz von `IRouteConstraint` für die URL-Verarbeitung erstellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="51485-282">The constraint name is passed to the `IInlineConstraintResolver` service to create an instance of `IRouteConstraint` to use in URL processing.</span></span> <span data-ttu-id="51485-283">In der Routenvorlage `blog/{article:minlength(10)}` wird beispielsweise die Einschränkung `minlength` mit dem Argument `10` angegeben.</span><span class="sxs-lookup"><span data-stu-id="51485-283">For example, the route template `blog/{article:minlength(10)}` specifies the `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="51485-284">Weitere Informationen zu Routeneinschränkungen und eine Liste der vom Framework bereitgestellten Einschränkungen finden Sie unter [Referenz für Routeneinschränkungen](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="51485-284">For more description route constraints, and a listing of the constraints provided by the framework, see [route-constraint-reference](#route-constraint-reference).</span></span>

<span data-ttu-id="51485-285">In der folgenden Tabelle werden mehrere Routenvorlagen und deren Verhalten beschrieben:</span><span class="sxs-lookup"><span data-stu-id="51485-285">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="51485-286">Routenvorlage</span><span class="sxs-lookup"><span data-stu-id="51485-286">Route Template</span></span> | <span data-ttu-id="51485-287">Beispiel-URL für Abgleich</span><span class="sxs-lookup"><span data-stu-id="51485-287">Example Matching URL</span></span> | <span data-ttu-id="51485-288">Hinweise</span><span class="sxs-lookup"><span data-stu-id="51485-288">Notes</span></span> |
| -------- | -------- | ------- |
| <span data-ttu-id="51485-289">hello</span><span class="sxs-lookup"><span data-stu-id="51485-289">hello</span></span>  | <span data-ttu-id="51485-290">/hello</span><span class="sxs-lookup"><span data-stu-id="51485-290">/hello</span></span>  | <span data-ttu-id="51485-291">Nur für den Pfad `/hello` wird eine Übereinstimmung ermittelt.</span><span class="sxs-lookup"><span data-stu-id="51485-291">Only matches the single path `/hello`</span></span> |
| <span data-ttu-id="51485-292">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="51485-292">{Page=Home}</span></span> | / | <span data-ttu-id="51485-293">Eine Übereinstimmung wird ermittelt, und `Page` wird auf `Home` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="51485-293">Matches and sets `Page` to `Home`</span></span> |
| <span data-ttu-id="51485-294">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="51485-294">{Page=Home}</span></span>  | <span data-ttu-id="51485-295">/Contact</span><span class="sxs-lookup"><span data-stu-id="51485-295">/Contact</span></span>  | <span data-ttu-id="51485-296">Eine Übereinstimmung wird ermittelt, und `Page` wird auf `Contact` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="51485-296">Matches and sets `Page` to `Contact`</span></span> |
| <span data-ttu-id="51485-297">{controller}/{action}/{id?}</span><span class="sxs-lookup"><span data-stu-id="51485-297">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="51485-298">/Products/List</span><span class="sxs-lookup"><span data-stu-id="51485-298">/Products/List</span></span> | <span data-ttu-id="51485-299">`Products` wird „controller“ und `List` „action“ zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="51485-299">Maps to `Products` controller and `List`  action</span></span> |
| <span data-ttu-id="51485-300">{controller}/{action}/{id?}</span><span class="sxs-lookup"><span data-stu-id="51485-300">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="51485-301">/Products/Details/123</span><span class="sxs-lookup"><span data-stu-id="51485-301">/Products/Details/123</span></span>  |  <span data-ttu-id="51485-302">`Products` wird „controller“ und `Details` „action“ zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="51485-302">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="51485-303">`id` wird auf 123 festgelegt.</span><span class="sxs-lookup"><span data-stu-id="51485-303">`id` set to 123</span></span> |
| <span data-ttu-id="51485-304">{controller=Home}/{action=Index}/{id?}</span><span class="sxs-lookup"><span data-stu-id="51485-304">{controller=Home}/{action=Index}/{id?}</span></span> | /  |  <span data-ttu-id="51485-305">`Home` wird „controller“ und `Index` „action“ zugeordnet. `id` wird ignoriert.</span><span class="sxs-lookup"><span data-stu-id="51485-305">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span> |

<span data-ttu-id="51485-306">Mit Vorlagen lässt sich Routing besonders leicht durchführen.</span><span class="sxs-lookup"><span data-stu-id="51485-306">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="51485-307">Einschränkungen und Standardwerte können auch außerhalb der Routenvorlage angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="51485-307">Constraints and defaults can also be specified outside the route template.</span></span>

<span data-ttu-id="51485-308">Tipp: Wenn Sie die [Protokollierung](xref:fundamentals/logging/index) aktivieren, erfahren Sie, wie die integrierten Routingimplementierungen (z.B. `Route`) Übereinstimmungen für Anforderungen ermitteln.</span><span class="sxs-lookup"><span data-stu-id="51485-308">Tip: Enable [Logging](xref:fundamentals/logging/index) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="route-constraint-reference"></a><span data-ttu-id="51485-309">Referenz für Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="51485-309">Route Constraint Reference</span></span>

<span data-ttu-id="51485-310">Routeneinschränkungen werden ausgeführt, wenn `Route` die Syntax der eingehenden URL abgeglichen und den URL-Pfad mit einer Tokenisierung in Routenwerte umgewandelt hat.</span><span class="sxs-lookup"><span data-stu-id="51485-310">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="51485-311">In der Regel wird mit Routeneinschränkungen der Routenwert der zugehörigen Vorlage geprüft. Dabei wird bestimmt, ob der Wert gültig ist.</span><span class="sxs-lookup"><span data-stu-id="51485-311">Route constraints generally inspect the route value associated via the route template and make a simple yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="51485-312">Für einige Routeneinschränkungen werden anstelle des Routenwerts andere Daten verwendet, um zu ermitteln, ob das Routing einer Anforderung möglich ist.</span><span class="sxs-lookup"><span data-stu-id="51485-312">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="51485-313">`HttpMethodRouteConstraint` kann beispielsweise auf der Grundlage des HTTP-Verbs eine Anforderung entweder annehmen oder ablehnen.</span><span class="sxs-lookup"><span data-stu-id="51485-313">For example, the `HttpMethodRouteConstraint` can accept or reject a request based on its HTTP verb.</span></span>

>[!WARNING]
> <span data-ttu-id="51485-314">Bei der **Eingabevalidierung** sollten Sie auf Einschränkungen verzichten, da ungültige Eingaben nicht den Fehler 400 auslösen und keine entsprechende Fehlermeldung ausgeben. Stattdessen hat dies den Fehler „404 – Nicht gefunden“ zur Folge.</span><span class="sxs-lookup"><span data-stu-id="51485-314">Avoid using constraints for **input validation**, because doing so means that invalid input will result in a 404 (Not Found) instead of a 400 with an appropriate error message.</span></span> <span data-ttu-id="51485-315">Routeneinschränkungen sollten nicht verwendet werden, um Eingaben für eine bestimmte Route zu überprüfen, sondern um zwischen ähnlichen Routen **unterscheiden** zu können.</span><span class="sxs-lookup"><span data-stu-id="51485-315">Route constraints should be used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="51485-316">In der folgenden Tabelle werden mehrere Routeneinschränkungen und deren Verhalten beschrieben:</span><span class="sxs-lookup"><span data-stu-id="51485-316">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="51485-317">Einschränkung</span><span class="sxs-lookup"><span data-stu-id="51485-317">constraint</span></span> | <span data-ttu-id="51485-318">Beispiel</span><span class="sxs-lookup"><span data-stu-id="51485-318">Example</span></span> | <span data-ttu-id="51485-319">Beispiele für Übereinstimmungen</span><span class="sxs-lookup"><span data-stu-id="51485-319">Example Matches</span></span> | <span data-ttu-id="51485-320">Hinweise</span><span class="sxs-lookup"><span data-stu-id="51485-320">Notes</span></span> |
| --------   | ------- | ------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="51485-321">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="51485-321">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="51485-322">Für jeden Integer wird eine Übereinstimmung ermittelt.</span><span class="sxs-lookup"><span data-stu-id="51485-322">Matches any integer</span></span> |
| `bool`  | `{active:bool}` | <span data-ttu-id="51485-323">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="51485-323">`true`, `FALSE`</span></span> | <span data-ttu-id="51485-324">Für `true` oder `false` wird eine Übereinstimmung ermittelt (keine Unterscheidung zwischen Groß-/Kleinbuchstaben).</span><span class="sxs-lookup"><span data-stu-id="51485-324">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="51485-325">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="51485-325">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="51485-326">Für einen gültigen `DateTime`-Wert wird eine Übereinstimmung ermittelt (in der invarianten Kultur; siehe Warnung).</span><span class="sxs-lookup"><span data-stu-id="51485-326">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="51485-327">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="51485-327">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="51485-328">Für einen gültigen `decimal`-Wert wird eine Übereinstimmung ermittelt (in der invarianten Kultur; siehe Warnung).</span><span class="sxs-lookup"><span data-stu-id="51485-328">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double`  | `{weight:double}` | <span data-ttu-id="51485-329">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="51485-329">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="51485-330">Für einen gültigen `double`-Wert wird eine Übereinstimmung ermittelt (in der invarianten Kultur; siehe Warnung).</span><span class="sxs-lookup"><span data-stu-id="51485-330">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float`  | `{weight:float}` | <span data-ttu-id="51485-331">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="51485-331">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="51485-332">Für einen gültigen `float`-Wert wird eine Übereinstimmung ermittelt (in der invarianten Kultur; siehe Warnung).</span><span class="sxs-lookup"><span data-stu-id="51485-332">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid`  | `{id:guid}` | <span data-ttu-id="51485-333">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="51485-333">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="51485-334">Für einen gültigen `Guid`-Wert wird eine Übereinstimmung ermittelt.</span><span class="sxs-lookup"><span data-stu-id="51485-334">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="51485-335">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="51485-335">`123456789`, `-123456789`</span></span> | <span data-ttu-id="51485-336">Für einen gültigen `long`-Wert wird eine Übereinstimmung ermittelt.</span><span class="sxs-lookup"><span data-stu-id="51485-336">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="51485-337">Die Zeichenfolge muss mindestens eine Länge von 4 Zeichen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="51485-337">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="51485-338">Die Zeichenfolge darf maximal eine Länge von 8 Zeichen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="51485-338">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="51485-339">Die Zeichenfolge muss genau 12 Zeichen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="51485-339">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="51485-340">Die Zeichenfolge muss mindestens eine Länge von 8 und darf maximal eine Länge von 16 Zeichen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="51485-340">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="51485-341">Der Integerwert muss mindestens 18 sein.</span><span class="sxs-lookup"><span data-stu-id="51485-341">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` |  `91` | <span data-ttu-id="51485-342">Der Integerwert darf nicht größer als 120 sein.</span><span class="sxs-lookup"><span data-stu-id="51485-342">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="51485-343">Der Integerwert muss zwischen 18 und 120 liegen.</span><span class="sxs-lookup"><span data-stu-id="51485-343">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="51485-344">Die Zeichenfolge muss aus mindestens einem alphabetische Zeichen bestehen (`a`-`z`, keine Unterscheidung zwischen Groß-/Kleinbuchstaben).</span><span class="sxs-lookup"><span data-stu-id="51485-344">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="51485-345">Die Zeichenfolge muss dem regulären Ausdruck entsprechen (siehe Tipp zum Definieren eines regulären Ausdrucks)</span><span class="sxs-lookup"><span data-stu-id="51485-345">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required`  | `{name:required}` | `Rick` |  <span data-ttu-id="51485-346">Hierdurch wird erzwungen, dass ein Wert, der kein Parameter ist, für die URL-Generierung vorhanden sein muss.</span><span class="sxs-lookup"><span data-stu-id="51485-346">Used to enforce that a non-parameter value is present during URL generation</span></span> |

>[!WARNING]
> <span data-ttu-id="51485-347">Für Routeneinschränkungen, mit denen geprüft wird, ob sich die URL in einen CLR-Typ wie `int` oder `DateTime` konvertieren lässt, wird immer die invariante Kultur verwendet. Es wird also davon ausgegangen, dass die URL nicht lokalisiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="51485-347">Route constraints that verify the URL can be converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture - they assume the URL is non-localizable.</span></span> <span data-ttu-id="51485-348">Die vom Framework bereitgestellten Routeneinschränkungen ändern nicht die Werte, die in Routenwerten gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="51485-348">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="51485-349">Alle Routenwerte, die aus der URL analysiert wurden, werden als Zeichenfolgen gespeichert.</span><span class="sxs-lookup"><span data-stu-id="51485-349">All route values parsed from the URL will be stored as strings.</span></span> <span data-ttu-id="51485-350">Durch die [Gleitkomma-Routeneinschränkung](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) wird beispielsweise versucht, den Routenwert in einen Gleitkommawert zu konvertieren. Mit dem konvertierten Wert wird allerdings nur überprüft, ob eine Umwandlung überhaupt möglich ist.</span><span class="sxs-lookup"><span data-stu-id="51485-350">For example, the [Float route constraint](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) will attempt to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="51485-351">Reguläre Ausdrücke</span><span class="sxs-lookup"><span data-stu-id="51485-351">Regular expressions</span></span> 

<span data-ttu-id="51485-352">Im ASP.NET Core-Framework wird dem Konstruktor für reguläre Ausdrücke `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="51485-352">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="51485-353">Informationen zu diesen Membern finden Sie unter [RegexOptions Enumeration (RegexOptions-Enumeration)](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions).</span><span class="sxs-lookup"><span data-stu-id="51485-353">See [RegexOptions Enumeration](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions) for a description of these members.</span></span>

<span data-ttu-id="51485-354">In regulären Ausdrücken werden Trennzeichen und Token verwendet, die auch beim Routing und in der Programmiersprache C# in ähnlicher Weise verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="51485-354">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="51485-355">Token, die reguläre Ausdrücke enthalten, müssen mit einem Escapezeichen versehen werden.</span><span class="sxs-lookup"><span data-stu-id="51485-355">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="51485-356">Wenn Sie beispielsweise den regulären Ausdruck `^\d{3}-\d{2}-\d{4}$` mit der Routingfunktionalität verwenden möchten, muss das Zeichen `\` in der C#-Quelldatei in der Form `\\` eingegeben werden, damit die Funktion des Escapezeichens `\` aufgehoben wird (falls keine [ausführlichen Zeichenfolgenliterale](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string) verwendet werden).</span><span class="sxs-lookup"><span data-stu-id="51485-356">For example, to use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, it needs to have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="51485-357">Die Zeichen `{`, `}`, „[“ und „]“ müssen durch Verdopplung mit einem Escapezeichen versehen werden. Dadurch werden die Trennzeichen der Routingparameter nicht berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="51485-357">The `{` , `}` , '[' and ']' characters need to be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span>  <span data-ttu-id="51485-358">In der folgenden Tabelle werden reguläre Ausdrücke und Ausdrücke mit den entsprechenden Escapezeichen aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="51485-358">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="51485-359">Ausdruck</span><span class="sxs-lookup"><span data-stu-id="51485-359">Expression</span></span>               | <span data-ttu-id="51485-360">Hinweis</span><span class="sxs-lookup"><span data-stu-id="51485-360">Note</span></span> |
| ----------------- | ------------ | 
| `^\d{3}-\d{2}-\d{4}$` | <span data-ttu-id="51485-361">Regulärer Ausdruck</span><span class="sxs-lookup"><span data-stu-id="51485-361">Regular expression</span></span> |
| `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` | <span data-ttu-id="51485-362">Mit Escapezeichen versehen</span><span class="sxs-lookup"><span data-stu-id="51485-362">Escaped</span></span>  |
| `^[a-z]{2}$` | <span data-ttu-id="51485-363">Regulärer Ausdruck</span><span class="sxs-lookup"><span data-stu-id="51485-363">Regular expression</span></span> |
| `^[[a-z]]{{2}}$` | <span data-ttu-id="51485-364">Mit Escapezeichen versehen</span><span class="sxs-lookup"><span data-stu-id="51485-364">Escaped</span></span>  |

<span data-ttu-id="51485-365">Für das Routing verwendete reguläre Ausdrücke beginnen häufig mit dem Zeichen `^` (Anfangsposition der abzugleichenden Zeichenfolge) und enden mit dem Zeichen `$` (Endposition der abzugleichenden Zeichenfolge).</span><span class="sxs-lookup"><span data-stu-id="51485-365">Regular expressions used in routing will often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="51485-366">Mit den Zeichen `^` und `$` wird sichergestellt, dass der reguläre Ausdruck mit dem vollständigen Routenparameterwert übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="51485-366">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="51485-367">Ohne die Zeichen `^` und `$` werden mit dem regulären Ausdruck alle Teilzeichenfolgen ermittelt, was häufig nicht gewünscht ist.</span><span class="sxs-lookup"><span data-stu-id="51485-367">Without the `^` and `$` characters the regular expression will match any sub-string within the string, which is often not what you want.</span></span> <span data-ttu-id="51485-368">In der folgenden Tabelle finden Sie mehrere Beispiele für reguläre Ausdrücke. Außerdem wird erklärt, warum ein Abgleich erfolgreich ist oder fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="51485-368">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="51485-369">Ausdruck</span><span class="sxs-lookup"><span data-stu-id="51485-369">Expression</span></span>               | <span data-ttu-id="51485-370">Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="51485-370">String</span></span> | <span data-ttu-id="51485-371">Match</span><span class="sxs-lookup"><span data-stu-id="51485-371">Match</span></span> | <span data-ttu-id="51485-372">Kommentar</span><span class="sxs-lookup"><span data-stu-id="51485-372">Comment</span></span> |
| ----------------- | ------------ |  ------------ |  ------------ | 
| `[a-z]{2}` | <span data-ttu-id="51485-373">hello</span><span class="sxs-lookup"><span data-stu-id="51485-373">hello</span></span> | <span data-ttu-id="51485-374">ja</span><span class="sxs-lookup"><span data-stu-id="51485-374">yes</span></span> | <span data-ttu-id="51485-375">Teilzeichenfolge stimmt überein</span><span class="sxs-lookup"><span data-stu-id="51485-375">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="51485-376">123abc456</span><span class="sxs-lookup"><span data-stu-id="51485-376">123abc456</span></span> | <span data-ttu-id="51485-377">ja</span><span class="sxs-lookup"><span data-stu-id="51485-377">yes</span></span> | <span data-ttu-id="51485-378">Teilzeichenfolge stimmt überein</span><span class="sxs-lookup"><span data-stu-id="51485-378">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="51485-379">mz</span><span class="sxs-lookup"><span data-stu-id="51485-379">mz</span></span> | <span data-ttu-id="51485-380">ja</span><span class="sxs-lookup"><span data-stu-id="51485-380">yes</span></span> | <span data-ttu-id="51485-381">Ausdruck stimmt überein</span><span class="sxs-lookup"><span data-stu-id="51485-381">matches expression</span></span> |
| `[a-z]{2}` | <span data-ttu-id="51485-382">MZ</span><span class="sxs-lookup"><span data-stu-id="51485-382">MZ</span></span> | <span data-ttu-id="51485-383">ja</span><span class="sxs-lookup"><span data-stu-id="51485-383">yes</span></span> | <span data-ttu-id="51485-384">keine Unterscheidung zwischen Groß-/Kleinbuchstaben</span><span class="sxs-lookup"><span data-stu-id="51485-384">not case sensitive</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="51485-385">hello</span><span class="sxs-lookup"><span data-stu-id="51485-385">hello</span></span> | <span data-ttu-id="51485-386">Nein</span><span class="sxs-lookup"><span data-stu-id="51485-386">no</span></span> | <span data-ttu-id="51485-387">siehe Erläuterungen zu `^` und `$` oben</span><span class="sxs-lookup"><span data-stu-id="51485-387">see `^` and `$` above</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="51485-388">123abc456</span><span class="sxs-lookup"><span data-stu-id="51485-388">123abc456</span></span> | <span data-ttu-id="51485-389">Nein</span><span class="sxs-lookup"><span data-stu-id="51485-389">no</span></span> | <span data-ttu-id="51485-390">siehe Erläuterungen zu `^` und `$` oben</span><span class="sxs-lookup"><span data-stu-id="51485-390">see `^` and `$` above</span></span> |

<span data-ttu-id="51485-391">Weitere Informationen zur Syntax von regulären Ausdrücken finden Sie unter [Sprachelemente für reguläre Ausdrücke – Kurzübersicht](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference).</span><span class="sxs-lookup"><span data-stu-id="51485-391">Refer to [.NET Framework Regular Expressions](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) for more information on regular expression syntax.</span></span>

<span data-ttu-id="51485-392">Einen regulären Ausdruck können Sie verwenden, um einen Parameter auf zulässige Werte einzuschränken.</span><span class="sxs-lookup"><span data-stu-id="51485-392">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="51485-393">Mit `{action:regex(^(list|get|create)$)}` werden beispielsweise für den `action`-Routenwert nur die Werte `list`, `get` oder `create` abgeglichen.</span><span class="sxs-lookup"><span data-stu-id="51485-393">For example `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="51485-394">Wenn die Zeichenfolge „^(list|get|create)$“ in das Einschränkungswörterbuch eingefügt werden würde, wäre sie mit dem vorherigen Ausdruck identisch.</span><span class="sxs-lookup"><span data-stu-id="51485-394">If passed into the constraints dictionary, the string "^(list|get|create)$" would be equivalent.</span></span> <span data-ttu-id="51485-395">Auch Einschränkungen, die dem zugehörigen Wörterbuch hinzugefügt werden und mit keiner vorgegebenen Einschränkung übereinstimmen , werden als reguläre Ausdrücke behandelt. Dies gilt allerdings nicht für Inline-Einschränkungen in einer Vorlage.</span><span class="sxs-lookup"><span data-stu-id="51485-395">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="url-generation-reference"></a><span data-ttu-id="51485-396">Referenz für URL-Generierung</span><span class="sxs-lookup"><span data-stu-id="51485-396">URL Generation Reference</span></span>

<span data-ttu-id="51485-397">Im folgenden Beispiel wird gezeigt, wie Sie einen Link zu einer Route unter Berücksichtigung eines vorhandenen Wörterbuchs mit Routenwerten und einem `RouteCollection`-Objekt erstellen.</span><span class="sxs-lookup"><span data-stu-id="51485-397">The example below shows how to generate a link to a route given a dictionary of route values and a `RouteCollection`.</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?range=45-59)]

<span data-ttu-id="51485-398">Das `VirtualPath`-Objekt, das im obigen Beispiel im unteren Bereich generiert wird, besitzt den Wert `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="51485-398">The `VirtualPath` generated at the end of the sample above is `/package/create/123`.</span></span>

<span data-ttu-id="51485-399">Der zweite Parameter für den `VirtualPathContext`-Konstruktor ist eine Auflistung von *Umgebungswerten*.</span><span class="sxs-lookup"><span data-stu-id="51485-399">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="51485-400">Mit diesen lassen sich leicht die Anzahl der Werte einschränken, die ein Entwickler innerhalb eines bestimmten Anforderungskontexts angeben muss.</span><span class="sxs-lookup"><span data-stu-id="51485-400">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="51485-401">Die aktuellen Routenwerte der aktuellen Anforderung werden bei der Linkgenerierung als Umgebungswerte behandelt.</span><span class="sxs-lookup"><span data-stu-id="51485-401">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="51485-402">In einer ASP.NET MVC-App müssen Sie beispielsweise innerhalb der `About`-Aktion von `HomeController` nicht den Controllerroutenwert angeben, um eine Verknüpfung mit der `Index`-Aktion herzustellen, da der Umgebungswert von `Home` verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="51485-402">For example, in an ASP.NET MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action (the ambient value of `Home` will be used).</span></span>

<span data-ttu-id="51485-403">Umgebungswerte werden ignoriert, wenn sie keinem Parameter entsprechen oder ein explizit bereitgestellter Wert den Parameter überschreibt (innerhalb der URL von links nach rechts).</span><span class="sxs-lookup"><span data-stu-id="51485-403">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly-provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="51485-404">Explizit bereitgestellte Werte, für die keine Übereinstimmungen ermittelt werden, werden der Abfragezeichenfolge hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="51485-404">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="51485-405">In der folgenden Tabelle werden die Ergebnisse dargestellt, die aus der Verwendung der Routenvorlage `{controller}/{action}/{id?}` hervorgehen:</span><span class="sxs-lookup"><span data-stu-id="51485-405">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="51485-406">Umgebungswerte</span><span class="sxs-lookup"><span data-stu-id="51485-406">Ambient Values</span></span> | <span data-ttu-id="51485-407">Explizite Werte</span><span class="sxs-lookup"><span data-stu-id="51485-407">Explicit Values</span></span> | <span data-ttu-id="51485-408">Ergebnis</span><span class="sxs-lookup"><span data-stu-id="51485-408">Result</span></span> |
| -------------   | -------------- | ------ |
| <span data-ttu-id="51485-409">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="51485-409">controller="Home"</span></span> | <span data-ttu-id="51485-410">action="About"</span><span class="sxs-lookup"><span data-stu-id="51485-410">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="51485-411">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="51485-411">controller="Home"</span></span> | <span data-ttu-id="51485-412">controller="Order",action="About"</span><span class="sxs-lookup"><span data-stu-id="51485-412">controller="Order",action="About"</span></span> | `/Order/About` |
| <span data-ttu-id="51485-413">controller="Home",color="Red"</span><span class="sxs-lookup"><span data-stu-id="51485-413">controller="Home",color="Red"</span></span> | <span data-ttu-id="51485-414">action="About"</span><span class="sxs-lookup"><span data-stu-id="51485-414">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="51485-415">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="51485-415">controller="Home"</span></span> | <span data-ttu-id="51485-416">action="About",color="Red"</span><span class="sxs-lookup"><span data-stu-id="51485-416">action="About",color="Red"</span></span> | `/Home/About?color=Red`

<span data-ttu-id="51485-417">Wenn eine Route über einen Standardwert verfügt, der keinem Parameter entspricht, und dieser Wert explizit bereitgestellt wird, muss er dem Standardwert entsprechen.</span><span class="sxs-lookup"><span data-stu-id="51485-417">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value.</span></span> <span data-ttu-id="51485-418">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="51485-418">For example:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
  defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="51485-419">Für diese Route würde nur dann ein Link generiert, wenn die übereinstimmenden Werte für „controller“ und „action“ bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="51485-419">Link generation would only generate a link for this route when the matching values for controller and action are provided.</span></span>
