---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/create_the_data_access_layer
title: Erstellen die Datenzugriffsebene | Microsoft Docs
author: Erikre
description: Diese Reihe von Lernprogrammen erfahren Sie die Grundlagen der Erstellung einer ASP.NET Web Forms-Anwendung mithilfe von ASP.NET 4.5 und Microsoft Visual Studio Express 2013 für wir...
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/08/2014
ms.topic: article
ms.assetid: 0bbf7a6e-d7eb-4091-91e4-fff892777f32
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/create_the_data_access_layer
msc.type: authoredcontent
ms.openlocfilehash: 671d1bbf661dfb3e56c6ccd67ce0d383990918d6
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
ms.locfileid: "30881463"
---
<a name="create-the-data-access-layer"></a><span data-ttu-id="65f76-103">Die Datenzugriffsebene erstellen</span><span class="sxs-lookup"><span data-stu-id="65f76-103">Create the Data Access Layer</span></span>
====================
<span data-ttu-id="65f76-104">by [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="65f76-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="65f76-105">[Herunterladen des Wingtip Toys-Beispielprojekt (c#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) oder [(PDF) E-Book herunterladen](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="65f76-105">[Download Wingtip Toys Sample Project (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="65f76-106">Diese Reihe von Lernprogrammen erfahren Sie die Grundlagen der Erstellung einer ASP.NET Web Forms-Anwendung mithilfe von ASP.NET 4.5 und Microsoft Visual Studio Express 2013 für Web.</span><span class="sxs-lookup"><span data-stu-id="65f76-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="65f76-107">Eine Visual Studio 2013 [-Projekts mit C#-Quellcode](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) ist verfügbar, die diese Reihe von Lernprogrammen begleitet.</span><span class="sxs-lookup"><span data-stu-id="65f76-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>


<span data-ttu-id="65f76-108">In diesem Lernprogramm wird beschrieben, wie erstellen, zugreifen, und überprüfen Daten aus einer Datenbank mithilfe von ASP.NET Web Forms- und Entity Framework Code First wird.</span><span class="sxs-lookup"><span data-stu-id="65f76-108">This tutorial describes how to create, access, and review data from a database using ASP.NET Web Forms and Entity Framework Code First.</span></span> <span data-ttu-id="65f76-109">Dieses Lernprogramm baut auf dem vorherigen Lernprogramm "Erstellen das Projekt" und ist Teil der Wingtip Toys Store Reihe von Lernprogrammen.</span><span class="sxs-lookup"><span data-stu-id="65f76-109">This tutorial builds on the previous tutorial "Create the Project" and is part of the Wingtip Toy Store tutorial series.</span></span> <span data-ttu-id="65f76-110">Wenn Sie dieses Lernprogramm abgeschlossen haben, Sie werden erstellt haben, eine Gruppe von Datenzugriffs-Klassen, die in der *Modelle* Ordner des Projekts.</span><span class="sxs-lookup"><span data-stu-id="65f76-110">When you've completed this tutorial, you will have built a group of data-access classes that are in the *Models* folder of the project.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="65f76-111">Lernen Sie:</span><span class="sxs-lookup"><span data-stu-id="65f76-111">What you'll learn:</span></span>

- <span data-ttu-id="65f76-112">Vorgehensweise: Erstellen der Datenmodelle.</span><span class="sxs-lookup"><span data-stu-id="65f76-112">How to create the data models.</span></span>
- <span data-ttu-id="65f76-113">Informationen zum Initialisieren und Ausgangswert für die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="65f76-113">How to initialize and seed the database.</span></span>
- <span data-ttu-id="65f76-114">Informationen zum Aktualisieren und konfigurieren die Anwendung zur Unterstützung der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="65f76-114">How to update and configure the application to support the database.</span></span>

### <a name="these-are-the-features-introduced-in-the-tutorial"></a><span data-ttu-id="65f76-115">Dies sind die Funktionen, die im Lernprogramm eingeführt:</span><span class="sxs-lookup"><span data-stu-id="65f76-115">These are the features introduced in the tutorial:</span></span>

- <span data-ttu-id="65f76-116">Entity Framework Code First</span><span class="sxs-lookup"><span data-stu-id="65f76-116">Entity Framework Code First</span></span>
- <span data-ttu-id="65f76-117">LocalDB</span><span class="sxs-lookup"><span data-stu-id="65f76-117">LocalDB</span></span>
- <span data-ttu-id="65f76-118">Datenanmerkungen</span><span class="sxs-lookup"><span data-stu-id="65f76-118">Data Annotations</span></span>

## <a name="creating-the-data-models"></a><span data-ttu-id="65f76-119">Erstellen von Data-Modellen</span><span class="sxs-lookup"><span data-stu-id="65f76-119">Creating the Data Models</span></span>

<span data-ttu-id="65f76-120">[Entity Framework](https://msdn.microsoft.com/data/aa937723) ist ein ORM (Objektrelationales Mapping)-Framework.</span><span class="sxs-lookup"><span data-stu-id="65f76-120">[Entity Framework](https://msdn.microsoft.com/data/aa937723) is an object-relational mapping (ORM) framework.</span></span> <span data-ttu-id="65f76-121">Sie können damit die Arbeit mit relationalen Daten als Objekte, entfernen Sie die meisten der Datenzugriffs-Code, den Sie in der Regel schreiben müssen.</span><span class="sxs-lookup"><span data-stu-id="65f76-121">It lets you work with relational data as objects, eliminating most of the data-access code that you'd usually need to write.</span></span> <span data-ttu-id="65f76-122">Verwendung von Entity Framework, können Sie Abfragen mit ausgeben [LINQ](https://msdn.microsoft.com/library/bb397926.aspx), abrufen und Bearbeiten von Daten als stark typisierte Objekte.</span><span class="sxs-lookup"><span data-stu-id="65f76-122">Using Entity Framework, you can issue queries using [LINQ](https://msdn.microsoft.com/library/bb397926.aspx), then retrieve and manipulate data as strongly typed objects.</span></span> <span data-ttu-id="65f76-123">LINQ stellt Muster zum Abfragen und Aktualisieren von Daten bereit.</span><span class="sxs-lookup"><span data-stu-id="65f76-123">LINQ provides patterns for querying and updating data.</span></span> <span data-ttu-id="65f76-124">Mithilfe von Entity Framework können Sie den Schwerpunkt auf den Rest der Anwendung erstellen, anstatt Schwerpunkt auf die Daten Zugriff Grundlagen.</span><span class="sxs-lookup"><span data-stu-id="65f76-124">Using Entity Framework allows you to focus on creating the rest of your application, rather than focusing on the data access fundamentals.</span></span> <span data-ttu-id="65f76-125">Weiter unten in diesem Lernprogramm Reihe zeigen wir Ihnen wie die Daten, die zum Auffüllen der Navigation und Abfragen verwenden.</span><span class="sxs-lookup"><span data-stu-id="65f76-125">Later in this tutorial series, we'll show you how to use the data to populate navigation and product queries.</span></span>

<span data-ttu-id="65f76-126">Entity Framework unterstützt ein Entwicklung Paradigma aufgerufen *Code First*.</span><span class="sxs-lookup"><span data-stu-id="65f76-126">Entity Framework supports a development paradigm called *Code First*.</span></span> <span data-ttu-id="65f76-127">Code First können Sie Ihre Datenmodelle mithilfe von Klassen zu definieren.</span><span class="sxs-lookup"><span data-stu-id="65f76-127">Code First lets you define your data models using classes.</span></span> <span data-ttu-id="65f76-128">Eine Klasse ist ein Konstrukt, das Ihnen ermöglicht, Ihre eigenen benutzerdefinierten Typen zu erstellen, indem Sie Variablen andere Typen, Methoden und Ereignisse zusammengefasst.</span><span class="sxs-lookup"><span data-stu-id="65f76-128">A class is a construct that enables you to create your own custom types by grouping together variables of other types, methods and events.</span></span> <span data-ttu-id="65f76-129">Sie können Zuordnungsklassen zu einer vorhandenen Datenbank oder verwenden, um eine Datenbank zu generieren.</span><span class="sxs-lookup"><span data-stu-id="65f76-129">You can map classes to an existing database or use them to generate a database.</span></span> <span data-ttu-id="65f76-130">In diesem Lernprogramm erstellen Sie die Datenmodelle von Modellklassen Daten schreiben.</span><span class="sxs-lookup"><span data-stu-id="65f76-130">In this tutorial, you'll create the data models by writing data model classes.</span></span> <span data-ttu-id="65f76-131">Klicken Sie dann, informieren Sie Entity Framework, die die Datenbank im Handumdrehen von dieser neuen Klassen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="65f76-131">Then, you'll let Entity Framework create the database on the fly from these new classes.</span></span>

<span data-ttu-id="65f76-132">Sie können jetzt durch das Erstellen der Entitätsklassen, die die Datenmodelle für die Web Forms-Anwendung zu definieren.</span><span class="sxs-lookup"><span data-stu-id="65f76-132">You will begin by creating the entity classes that define the data models for the Web Forms application.</span></span> <span data-ttu-id="65f76-133">Klicken Sie dann erstellen Sie eine Kontextklasse, die die Entitätsklassen verwaltet und ermöglicht den Datenzugriff auf die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="65f76-133">Then you will create a context class that manages the entity classes and provides data access to the database.</span></span> <span data-ttu-id="65f76-134">Erstellen Sie auch eine Initialisiererklasse, die Sie zum Auffüllen der Datenbank verwenden.</span><span class="sxs-lookup"><span data-stu-id="65f76-134">You will also create an initializer class that you will use to populate the database.</span></span>

### <a name="entity-framework-and-references"></a><span data-ttu-id="65f76-135">Entity Framework und Verweise</span><span class="sxs-lookup"><span data-stu-id="65f76-135">Entity Framework and References</span></span>

<span data-ttu-id="65f76-136">Standardmäßig Entity Framework ist enthalten, beim Erstellen einer neuen **ASP.NET-Webanwendung** mithilfe der **Web Forms** Vorlage.</span><span class="sxs-lookup"><span data-stu-id="65f76-136">By default, Entity Framework is included when you create a new **ASP.NET Web Application** using the **Web Forms** template.</span></span> <span data-ttu-id="65f76-137">Entity Framework kann installiert, deinstalliert und als ein NuGet-Paket aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="65f76-137">Entity Framework can be installed, uninstalled, and updated as a NuGet package.</span></span>

<span data-ttu-id="65f76-138">Dieses NuGet-Paket enthält die folgenden **Runtime** Assemblys im Projekt:</span><span class="sxs-lookup"><span data-stu-id="65f76-138">This NuGet package includes the following **runtime** assemblies within your project:</span></span>

- <span data-ttu-id="65f76-139">EntityFramework.dll – alle common Runtime-Code von Entity Framework verwendet</span><span class="sxs-lookup"><span data-stu-id="65f76-139">EntityFramework.dll – All the common runtime code used by Entity Framework</span></span>
- <span data-ttu-id="65f76-140">EntityFramework.SqlServer.dll – Microsoft SQL Server-Anbieter für Entity Framework</span><span class="sxs-lookup"><span data-stu-id="65f76-140">EntityFramework.SqlServer.dll – The Microsoft SQL Server provider for Entity Framework</span></span>

### <a name="entity-classes"></a><span data-ttu-id="65f76-141">Entitätsklassen</span><span class="sxs-lookup"><span data-stu-id="65f76-141">Entity Classes</span></span>

<span data-ttu-id="65f76-142">Die Klassen, die Sie erstellen, um das Schema der Daten zu definieren, werden Entitätsklassen aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="65f76-142">The classes you create to define the schema of the data are called entity classes.</span></span> <span data-ttu-id="65f76-143">Wenn Sie auf den Datenbankentwurf vertraut sind, stellen Sie sich die Entitätsklassen als Tabellendefinitionen einer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="65f76-143">If you're new to database design, think of the entity classes as table definitions of a database.</span></span> <span data-ttu-id="65f76-144">Jede Eigenschaft in der Klasse gibt eine Spalte in der Tabelle der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="65f76-144">Each property in the class specifies a column in the table of the database.</span></span> <span data-ttu-id="65f76-145">Diese Klassen bieten eine einfache objektrelationale Schnittstelle zwischen objektorientierte Code und die Struktur der relationalen Tabelle der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="65f76-145">These classes provide a lightweight, object-relational interface between object-oriented code and the relational table structure of the database.</span></span>

<span data-ttu-id="65f76-146">In diesem Lernprogramm beginnen Sie durch Hinzufügen von einfachen Entitätsklassen, die die Schemas für Kategorien und Produkte darstellt.</span><span class="sxs-lookup"><span data-stu-id="65f76-146">In this tutorial, you'll start out by adding simple entity classes representing the schemas for products and categories.</span></span> <span data-ttu-id="65f76-147">Die Klasse Produkte enthält Definitionen für jedes Produkt.</span><span class="sxs-lookup"><span data-stu-id="65f76-147">The products class will contain definitions for each product.</span></span> <span data-ttu-id="65f76-148">Der Name jedes der Elemente der Product-Klasse `ProductID`, `ProductName`, `Description`, `ImagePath`, `UnitPrice`, `CategoryID`, und `Category`.</span><span class="sxs-lookup"><span data-stu-id="65f76-148">The name of each of the members of the product class will be `ProductID`, `ProductName`, `Description`, `ImagePath`, `UnitPrice`, `CategoryID`, and `Category`.</span></span> <span data-ttu-id="65f76-149">Die Klasse der Kategorie enthält Definitionen für jede Kategorie, die ein Produkt zu, z. B. Auto, Boot oder Ebene gehören kann.</span><span class="sxs-lookup"><span data-stu-id="65f76-149">The category class will contain definitions for each category that a product can belong to, such as Car, Boat, or Plane.</span></span> <span data-ttu-id="65f76-150">Der Name der einzelnen Member der Klasse Kategorie `CategoryID`, `CategoryName`, `Description`, und `Products`.</span><span class="sxs-lookup"><span data-stu-id="65f76-150">The name of each of the members of the category class will be `CategoryID`, `CategoryName`, `Description`, and `Products`.</span></span> <span data-ttu-id="65f76-151">Jedes Produkt wird auf eine der Kategorien gehören.</span><span class="sxs-lookup"><span data-stu-id="65f76-151">Each product will belong to one of the categories.</span></span> <span data-ttu-id="65f76-152">Diese Entitätsklassen werden hinzugefügt werden, auf des Projekts vorhandene *Modelle* Ordner.</span><span class="sxs-lookup"><span data-stu-id="65f76-152">These entity classes will be added to the project's existing *Models* folder.</span></span>

1. <span data-ttu-id="65f76-153">In **Projektmappen-Explorer**, mit der rechten Maustaste die *Modelle* Ordner, und wählen Sie dann **hinzufügen**  - &gt; **neues Element**.</span><span class="sxs-lookup"><span data-stu-id="65f76-153">In **Solution Explorer**, right-click the *Models* folder and then select **Add** -&gt; **New Item**.</span></span> 

    ![Erstellen der Datenzugriffsschicht - neuen Menüelements](create_the_data_access_layer/_static/image1.png)

   <span data-ttu-id="65f76-155">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="65f76-155">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="65f76-156">Klicken Sie unter **Visual C#-** aus der **installiert** Bereich auf der linken Seite, wählen **Code**.</span><span class="sxs-lookup"><span data-stu-id="65f76-156">Under **Visual C#** from the **Installed** pane on the left, select **Code**.</span></span> 

    ![Erstellen der Datenzugriffsschicht - neuen Menüelements](create_the_data_access_layer/_static/image2.png)
3. <span data-ttu-id="65f76-158">Wählen Sie **Klasse** aus der Mitte und nennen Sie diese neue Art *Product.cs*.</span><span class="sxs-lookup"><span data-stu-id="65f76-158">Select **Class** from the middle pane and name this new class *Product.cs*.</span></span>
4. <span data-ttu-id="65f76-159">Klicken Sie auf **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="65f76-159">Click **Add**.</span></span>  
   <span data-ttu-id="65f76-160">Die neue Klassendatei wird im Editor angezeigt.</span><span class="sxs-lookup"><span data-stu-id="65f76-160">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="65f76-161">Ersetzen Sie den Standardcode durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="65f76-161">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](create_the_data_access_layer/samples/sample1.cs)]
6. <span data-ttu-id="65f76-162">Erstellen Sie eine andere Klasse durch Wiederholen der Schritte 1 bis 4, benennen Sie die neue Klasse jedoch *Category.cs* , und Ersetzen Sie den Standardcode durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="65f76-162">Create another class by repeating steps 1 through 4, however, name the new class *Category.cs* and replace the default code with the following code:</span></span>  

    [!code-csharp[Main](create_the_data_access_layer/samples/sample2.cs)]

<span data-ttu-id="65f76-163">Wie bereits erwähnt, die `Category` -Klasse stellt der Typ des Produkts, die Anwendung ist, verkaufen soll (z. B. <a id="a"> </a> &quot;Autos&quot;, &quot;Booten&quot;, &quot;Raketen&quot;usw.), und die `Product` Klasse darstellt, die einzelnen Produkte ("Toy") in der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="65f76-163">As previously mentioned, the `Category` class represents the type of product that the application is designed to sell (such as <a id="a"></a>&quot;Cars&quot;, &quot;Boats&quot;, &quot;Rockets&quot;, and so on), and the `Product` class represents the individual products (toys) in the database.</span></span> <span data-ttu-id="65f76-164">Jede Instanz einer `Product` Objekt wird eine Zeile in einer relationalen Datenbanktabelle entsprechen, und jede Eigenschaft der Product-Klasse auf eine Spalte in der relationalen Datenbanktabelle zugeordnet wird.</span><span class="sxs-lookup"><span data-stu-id="65f76-164">Each instance of a `Product` object will correspond to a row within a relational database table, and each property of the Product class will map to a column in the relational database table.</span></span> <span data-ttu-id="65f76-165">Weiter unten in diesem Lernprogramm müssen Sie die in der Datenbank enthaltenen Produktdaten überprüfen.</span><span class="sxs-lookup"><span data-stu-id="65f76-165">Later in this tutorial, you'll review the product data contained in the database.</span></span>

### <a name="data-annotations"></a><span data-ttu-id="65f76-166">Datenanmerkungen</span><span class="sxs-lookup"><span data-stu-id="65f76-166">Data Annotations</span></span>

<span data-ttu-id="65f76-167">Sie haben vielleicht festgestellt, dass bestimmte Mitglieder der Klassen angeben Memberdetails, z. B. Attribute `[ScaffoldColumn(false)]`.</span><span class="sxs-lookup"><span data-stu-id="65f76-167">You may have noticed that certain members of the classes have attributes specifying details about the member, such as `[ScaffoldColumn(false)]`.</span></span> <span data-ttu-id="65f76-168">Hierbei handelt es sich *datenanmerkungen*.</span><span class="sxs-lookup"><span data-stu-id="65f76-168">These are *data annotations*.</span></span> <span data-ttu-id="65f76-169">Die anmerkungsattribute können beschrieben, wie zum Validieren von Benutzereingaben für dieses Element, um anzugeben, Formatierung und um anzugeben, wie es bei der Datenbankerstellung modelliert wird.</span><span class="sxs-lookup"><span data-stu-id="65f76-169">The data annotation attributes can describe how to validate user input for that member, to specify formatting for it, and to specify how it is modeled when the database is created.</span></span>

### <a name="context-class"></a><span data-ttu-id="65f76-170">Context-Klasse</span><span class="sxs-lookup"><span data-stu-id="65f76-170">Context Class</span></span>

<span data-ttu-id="65f76-171">Um mithilfe der Klassen für den Datenzugriff zu starten, müssen Sie eine Kontextklasse definieren.</span><span class="sxs-lookup"><span data-stu-id="65f76-171">To start using the classes for data access, you must define a context class.</span></span> <span data-ttu-id="65f76-172">Wie bereits erwähnt, wird die Context-Klasse verwaltet die Entitätsklassen (z. B. die `Product` Klasse und die `Category` Klasse) und ermöglicht den Datenzugriff auf die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="65f76-172">As mentioned previously, the context class manages the entity classes (such as the `Product` class and the `Category` class) and provides data access to the database.</span></span>

<span data-ttu-id="65f76-173">Diese Prozedur fügt eine neue C#-Context-Klasse, die *Modelle* Ordner.</span><span class="sxs-lookup"><span data-stu-id="65f76-173">This procedure adds a new C# context class to the *Models* folder.</span></span>

1. <span data-ttu-id="65f76-174">Mit der rechten Maustaste die *Modelle* Ordner, und wählen Sie dann **hinzufügen**  - &gt; **neues Element**.</span><span class="sxs-lookup"><span data-stu-id="65f76-174">Right-click the *Models* folder and then select **Add** -&gt; **New Item**.</span></span>   
   <span data-ttu-id="65f76-175">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="65f76-175">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="65f76-176">Wählen Sie **Klasse** aus der Mitte, nennen Sie sie *ProductContext.cs* , und klicken Sie auf **hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="65f76-176">Select **Class** from the middle pane, name it *ProductContext.cs* and click **Add**.</span></span>
3. <span data-ttu-id="65f76-177">Ersetzen Sie den Standardcode, der in der Klasse mit den folgenden Code enthalten:</span><span class="sxs-lookup"><span data-stu-id="65f76-177">Replace the default code contained in the class with the following code:</span></span>   

    [!code-csharp[Main](create_the_data_access_layer/samples/sample3.cs)]

<span data-ttu-id="65f76-178">Dieser Code fügt der `System.Data.Entity` Namespace sodass Sie Zugriff auf die Kernfunktionen von Entity Framework, einschließlich die Funktion zum Abfragen, einfügen, aktualisieren und Löschen von Daten mit stark typisierten Objekten arbeiten.</span><span class="sxs-lookup"><span data-stu-id="65f76-178">This code adds the `System.Data.Entity` namespace so that you have access to all the core functionality of Entity Framework, which includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span>

<span data-ttu-id="65f76-179">Die `ProductContext` Klasse darstellt, Entity Framework-Produkt-Datenbankkontext, der verarbeitet abrufen, speichern und Aktualisieren von `Product` -Klasseninstanzen in der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="65f76-179">The `ProductContext` class represents Entity Framework product database context, which handles fetching, storing, and updating `Product` class instances in the database.</span></span> <span data-ttu-id="65f76-180">Die `ProductContext` Klasse leitet sich von der `DbContext` Basisklasse von Entity Framework bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="65f76-180">The `ProductContext` class derives from the `DbContext` base class provided by Entity Framework.</span></span>

### <a name="initializer-class"></a><span data-ttu-id="65f76-181">Initialisiererklasse</span><span class="sxs-lookup"><span data-stu-id="65f76-181">Initializer Class</span></span>

<span data-ttu-id="65f76-182">Sie benötigen, führen Sie die benutzerdefinierte Logik, um die Datenbank das erste Mal zu initialisieren, das der Kontext verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="65f76-182">You will need to run some custom logic to initialize the database the first time the context is used.</span></span> <span data-ttu-id="65f76-183">Dadurch kann die Ausgangswerte der Datenbank hinzugefügt werden, damit Sie sofort Produkte und Kategorien angezeigt werden können.</span><span class="sxs-lookup"><span data-stu-id="65f76-183">This will allow seed data to be added to the database so that you can immediately display products and categories.</span></span>

<span data-ttu-id="65f76-184">Diese Prozedur fügt eine neue C#-Initialisierer-Klasse, die *Modelle* Ordner.</span><span class="sxs-lookup"><span data-stu-id="65f76-184">This procedure adds a new C# initializer class to the *Models* folder.</span></span>

1. <span data-ttu-id="65f76-185">Erstellen Sie ein weiteres `Class` in der *Modelle* Ordner und nennen Sie sie *ProductDatabaseInitializer.cs*.</span><span class="sxs-lookup"><span data-stu-id="65f76-185">Create another `Class` in the *Models* folder and name it *ProductDatabaseInitializer.cs*.</span></span>
2. <span data-ttu-id="65f76-186">Ersetzen Sie den Standardcode, der in der Klasse mit den folgenden Code enthalten:</span><span class="sxs-lookup"><span data-stu-id="65f76-186">Replace the default code contained in the class with the following code:</span></span>   

    [!code-csharp[Main](create_the_data_access_layer/samples/sample4.cs)]

<span data-ttu-id="65f76-187">Wie im obigen Code sehen können, wenn die Datenbank erstellt und initialisiert, die `Seed` Eigenschaft überschreiben und festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="65f76-187">As you can see from the above code, when the database is created and initialized, the `Seed` property is overridden and set.</span></span> <span data-ttu-id="65f76-188">Wenn die `Seed` Eigenschaft festgelegt ist, die Werte aus den Kategorien und Produkte werden verwendet, um die Datenbank aufzufüllen.</span><span class="sxs-lookup"><span data-stu-id="65f76-188">When the `Seed` property is set, the values from the categories and products are used to populate the database.</span></span> <span data-ttu-id="65f76-189">Wenn Sie versuchen, aktualisieren Sie die Seed-Daten durch den oben aufgeführten Code ändern, nachdem die Datenbank erstellt wurde, wird keine Updates angezeigt werden, wenn Sie die Webanwendung ausführen.</span><span class="sxs-lookup"><span data-stu-id="65f76-189">If you attempt to update the seed data by modifying the above code after the database has been created, you won't see any updates when you run the Web application.</span></span> <span data-ttu-id="65f76-190">Der Grund hierfür ist der obige Code verwendet die Implementierung der `DropCreateDatabaseIfModelChanges` Klasse zu erkennen, wenn das Modell (Schema) geändert hat, vor dem Zurücksetzen der Seed-Daten.</span><span class="sxs-lookup"><span data-stu-id="65f76-190">The reason is the above code uses an implementation of the `DropCreateDatabaseIfModelChanges` class to recognize if the model (schema) has changed before resetting the seed data.</span></span> <span data-ttu-id="65f76-191">Wenn keine Änderungen, um vorgenommen werden die `Category` und `Product` Entitätsklassen, die Datenbank werden mit den Ausgangswert Daten nicht erneut initialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="65f76-191">If no changes are made to the `Category` and `Product` entity classes, the database will not be reinitialized with the seed data.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="65f76-192">Mussten Sie die Datenbank jedes Mal neu erstellt werden, Sie haben die Anwendung ausgeführt, können Sie die `DropCreateDatabaseAlways` -Klasse statt der `DropCreateDatabaseIfModelChanges` Klasse.</span><span class="sxs-lookup"><span data-stu-id="65f76-192">If you wanted the database to be recreated every time you ran the application, you could use the `DropCreateDatabaseAlways` class instead of the `DropCreateDatabaseIfModelChanges` class.</span></span> <span data-ttu-id="65f76-193">Verwenden Sie für diese Reihe von Lernprogrammen, jedoch die `DropCreateDatabaseIfModelChanges` Klasse.</span><span class="sxs-lookup"><span data-stu-id="65f76-193">However for this tutorial series, use the `DropCreateDatabaseIfModelChanges` class.</span></span>


<span data-ttu-id="65f76-194">Zu diesem Zeitpunkt in diesem Lernprogramm wird Ihnen eine *Modelle* Ordner mit vier neuen Klassen und ein Standard-Klasse:</span><span class="sxs-lookup"><span data-stu-id="65f76-194">At this point in this tutorial, you will have a *Models* folder with four new classes and one default class:</span></span>

![Erstellen der Datenzugriffsschicht - Ordner Models](create_the_data_access_layer/_static/image3.png)

### <a name="configuring-the-application-to-use-the-data-model"></a><span data-ttu-id="65f76-196">Konfigurieren die Anwendung zur Verwendung des Datenmodells</span><span class="sxs-lookup"><span data-stu-id="65f76-196">Configuring the Application to Use the Data Model</span></span>

<span data-ttu-id="65f76-197">Nun, dass Sie die Klassen, die die Daten darstellen erstellt haben, müssen Sie die Anwendung zur Verwendung der Klassen konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="65f76-197">Now that you've created the classes that represent the data, you must configure the application to use the classes.</span></span> <span data-ttu-id="65f76-198">In der *"Global.asax"* -Datei fügen Sie Code hinzu, die das Modell initialisiert.</span><span class="sxs-lookup"><span data-stu-id="65f76-198">In the *Global.asax* file, you add code that initializes the model.</span></span> <span data-ttu-id="65f76-199">In der *"Web.config"* Datei, die Sie hinzufügen, Informationen, die der Anwendung mitteilt, welche Datenbank verwenden, um die Daten zu speichern, die durch die neue Datenklassen dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="65f76-199">In the *Web.config* file you add information that tells the application what database you'll use to store the data that's represented by the new data classes.</span></span> <span data-ttu-id="65f76-200">Die *"Global.asax"* Datei kann zum Behandeln von Ereignissen oder Methoden verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="65f76-200">The *Global.asax* file can be used to handle application events or methods.</span></span> <span data-ttu-id="65f76-201">Die *"Web.config"* Datei können Sie die Konfiguration von Ihrer ASP.NET-Webanwendung steuern.</span><span class="sxs-lookup"><span data-stu-id="65f76-201">The *Web.config* file allows you to control the configuration of your ASP.NET web application.</span></span>

#### <a name="updating-the-globalasax-file"></a><span data-ttu-id="65f76-202">Aktualisieren die Datei "Global.asax"</span><span class="sxs-lookup"><span data-stu-id="65f76-202">Updating the Global.asax file</span></span>

<span data-ttu-id="65f76-203">Um die Datenmodelle beim Starten der Anwendung zu initialisieren, aktualisieren Sie die `Application_Start` Ereignishandler in der *Global.asax.cs* Datei.</span><span class="sxs-lookup"><span data-stu-id="65f76-203">To initialize the data models when the application starts, you will update the `Application_Start` handler in the *Global.asax.cs* file.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="65f76-204">Im Projektmappen-Explorer, wählen Sie entweder die *"Global.asax"* Datei oder das *Global.asax.cs* Datei so bearbeiten Sie die *Global.asax.cs* Datei.</span><span class="sxs-lookup"><span data-stu-id="65f76-204">In Solution Explorer, you can select either the *Global.asax* file or the *Global.asax.cs* file to edit the *Global.asax.cs* file.</span></span>


1. <span data-ttu-id="65f76-205">Fügen Sie den folgenden Code in gelb hervorgehoben werden die `Application_Start` Methode in der *Global.asax.cs* Datei.</span><span class="sxs-lookup"><span data-stu-id="65f76-205">Add the following code highlighted in yellow to the `Application_Start` method in the *Global.asax.cs* file.</span></span>   

    [!code-csharp[Main](create_the_data_access_layer/samples/sample5.cs?highlight=9-10,22-23)]

> [!NOTE] 
> 
> <span data-ttu-id="65f76-206">Unterstützt Ihr Browser muss HTML5, um den Code in gelb hervorgehoben werden, wenn diese Reihe von Lernprogrammen in einem Browser anzeigen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="65f76-206">Your browser must support HTML5 to view the code highlighted in yellow when viewing this tutorial series in a browser.</span></span>


<span data-ttu-id="65f76-207">Wie im obigen Code angezeigt, wenn die Anwendung gestartet wird, gibt die Anwendung an, dass die Initialisierung, die während der ersten Mal Daten ausgeführt werden, zugegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="65f76-207">As shown in the above code, when the application starts, the application specifies the initializer that will run during the first time the data is accessed.</span></span> <span data-ttu-id="65f76-208">Die zwei zusätzliche Namespaces sind erforderlich für den Zugriff auf die `Database` Objekt und die `ProductDatabaseInitializer` Objekt.</span><span class="sxs-lookup"><span data-stu-id="65f76-208">The two additional namespaces are required to access the `Database` object and the `ProductDatabaseInitializer` object.</span></span>

 <span data-ttu-id="65f76-209">Ändern die Datei "Web.config"</span><span class="sxs-lookup"><span data-stu-id="65f76-209">Modifying the Web.Config File</span></span> 

<span data-ttu-id="65f76-210">Hinzufügen eigener Verbindungsinformationen für Ihre Anwendung zwar Entity Framework Code First, eine Datenbank für Sie an einem Standardspeicherort generieren wird Wenn die Datenbank mit Ausgangswert Daten aufgefüllt ist, erhalten Sie Kontrolle über den Speicherort der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="65f76-210">Although Entity Framework Code First will generate a database for you in a default location when the database is populated with seed data, adding your own connection information to your application gives you control of the database location.</span></span> <span data-ttu-id="65f76-211">Geben Sie diese mithilfe einer Verbindungszeichenfolge in der Anwendungsverzeichnis datenbankverbindung *"Web.config"* Datei im Stammverzeichnis des Projekts.</span><span class="sxs-lookup"><span data-stu-id="65f76-211">You specify this database connection using a connection string in the application's *Web.config* file at the root of the project.</span></span> <span data-ttu-id="65f76-212">Durch Hinzufügen einer neuen Verbindungszeichenfolge, können Sie den Speicherort der Datenbank weiterleiten (*wingtiptoys.mdf*) im Datenverzeichnis der Anwendung erstellt werden sollen (*App\_Daten*), statt den Standardwert Speicherort.</span><span class="sxs-lookup"><span data-stu-id="65f76-212">By adding a new connection string, you can direct the location of the database (*wingtiptoys.mdf*) to be built in the application's data directory (*App\_Data*), rather than its default location.</span></span> <span data-ttu-id="65f76-213">Diese Änderung können Sie suchen, und überprüfen die Datenbankdatei für die weiter unten in diesem Lernprogramm.</span><span class="sxs-lookup"><span data-stu-id="65f76-213">Making this change will allow you to find and inspect the database file later in this tutorial.</span></span>

1. <span data-ttu-id="65f76-214">In **Projektmappen-Explorer**, suchen und öffnen Sie die *"Web.config"* Datei.</span><span class="sxs-lookup"><span data-stu-id="65f76-214">In **Solution Explorer**, find and open the *Web.config* file.</span></span>
2. <span data-ttu-id="65f76-215">Fügen Sie die Verbindungszeichenfolge gelb hervorgehoben der `<connectionStrings>` Teil der *"Web.config"* Datei wie folgt:</span><span class="sxs-lookup"><span data-stu-id="65f76-215">Add the connection string highlighted in yellow to the `<connectionStrings>` section of the *Web.config* file as follows:</span></span>  

    [!code-xml[Main](create_the_data_access_layer/samples/sample6.xml?highlight=4-7)]

<span data-ttu-id="65f76-216">Wenn die Anwendung zum ersten Mal ausgeführt wird, wird es von der Verbindungszeichenfolge angegebenen Speicherort die Datenbank erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="65f76-216">When the application is run for the first time, it will build the database at the location specified by the connection string.</span></span> <span data-ttu-id="65f76-217">Jedoch vor dem Ausführen der Anwendung an, wir erstellen Sie sie zuerst.</span><span class="sxs-lookup"><span data-stu-id="65f76-217">But before running the application, let's build it first.</span></span>

## <a name="building-the-application"></a><span data-ttu-id="65f76-218">Erstellen der Anwendung</span><span class="sxs-lookup"><span data-stu-id="65f76-218">Building the Application</span></span>

<span data-ttu-id="65f76-219">Um sicherzustellen, dass alle Klassen und Änderungen an Ihrer Web-Anwendung funktioniert, sollte die Anwendung erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="65f76-219">To make sure that all the classes and changes to your Web application work, you should build the application.</span></span>

1. <span data-ttu-id="65f76-220">Aus der **Debuggen** klicken Sie im Menü **WingtipToys erstellen**.</span><span class="sxs-lookup"><span data-stu-id="65f76-220">From the **Debug** menu, select **Build WingtipToys**.</span></span>  
 <span data-ttu-id="65f76-221">Die **Ausgabe** Fenster wird angezeigt, und wenn alle gut funktioniert hat, sehen Sie eine *erfolgreich* Nachricht.</span><span class="sxs-lookup"><span data-stu-id="65f76-221">The **Output** window is displayed, and if all went well, you see a *succeeded* message.</span></span>  

    ![Erstellen der Datenzugriffsschicht - im Ausgabefenster](create_the_data_access_layer/_static/image4.png)

<span data-ttu-id="65f76-223">Wenn ein Fehler auftreten, überprüfen Sie die oben genannten Schritte erneut.</span><span class="sxs-lookup"><span data-stu-id="65f76-223">If you run into an error, re-check the above steps.</span></span> <span data-ttu-id="65f76-224">Die Informationen in den **Ausgabe** Fenster wird angegeben, welche Datei ein Problem hat und, wenn in der Datei eine Änderung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="65f76-224">The information in the **Output** window will indicate which file has a problem and where in the file a change is required.</span></span> <span data-ttu-id="65f76-225">Diese Informationen können Sie bestimmen, welcher Teil der oben genannten Schritte überprüft und in Ihrem Projekt behoben werden müssen.</span><span class="sxs-lookup"><span data-stu-id="65f76-225">This information will enable you to determine what part of the above steps need to be reviewed and fixed in your project.</span></span>

## <a name="summary"></a><span data-ttu-id="65f76-226">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="65f76-226">Summary</span></span>

<span data-ttu-id="65f76-227">In diesem Lernprogramm der Reihe haben Sie das Datenmodell erstellt, als auch, den Code bereitgestellt, die zum Initialisieren und Ausgangswert für die Datenbank verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="65f76-227">In this tutorial of the series you have created the data model, as well as, added the code that will be used to initialize and seed the database.</span></span> <span data-ttu-id="65f76-228">Sie haben auch konfiguriert, dass die Anwendung die Datenmodelle verwendet, wenn die Anwendung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="65f76-228">You have also configured the application to use the data models when the application is run.</span></span>

<span data-ttu-id="65f76-229">In den nächsten Lernprogrammen aktualisiert die Benutzeroberfläche, Navigation hinzufügen und Abrufen von Daten aus der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="65f76-229">In the next tutorial, you'll update the UI, add navigation, and retrieve data from the database.</span></span> <span data-ttu-id="65f76-230">Dies führt in der Datenbank wird automatisch erstellt basierend auf der Entitätsklassen, die Sie in diesem Lernprogramm erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="65f76-230">This will result in the database being automatically created based on the entity classes that you created in this tutorial.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="65f76-231">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="65f76-231">Additional Resources</span></span>

<span data-ttu-id="65f76-232">[Übersicht über Entity Framework](https://msdn.microsoft.com/library/bb399567.aspx) </span><span class="sxs-lookup"><span data-stu-id="65f76-232">[Entity Framework Overview](https://msdn.microsoft.com/library/bb399567.aspx) </span></span>  
<span data-ttu-id="65f76-233">[Einsteigerhandbuch zu ADO.NET Entity Framework](https://msdn.microsoft.com/data/ee712907) </span><span class="sxs-lookup"><span data-stu-id="65f76-233">[Beginner's Guide to the ADO.NET Entity Framework](https://msdn.microsoft.com/data/ee712907) </span></span>  
<span data-ttu-id="65f76-234">[Code First-Entwicklung mit Entity Framework](http://www.msteched.com/2010/Europe/DEV212) (video)</span><span class="sxs-lookup"><span data-stu-id="65f76-234">[Code First Development with Entity Framework](http://www.msteched.com/2010/Europe/DEV212) (video)</span></span>   
<span data-ttu-id="65f76-235">[Code First Beziehungen Fluent-API](https://msdn.microsoft.com/data/hh134698) </span><span class="sxs-lookup"><span data-stu-id="65f76-235">[Code First Relationships Fluent API](https://msdn.microsoft.com/data/hh134698) </span></span>  
[<span data-ttu-id="65f76-236">Erste Datenanmerkungen Code</span><span class="sxs-lookup"><span data-stu-id="65f76-236">Code First Data Annotations</span></span>](https://msdn.microsoft.com/data/gg193958)  
[<span data-ttu-id="65f76-237">Steigerung der Produktivität für das Entity Framework</span><span class="sxs-lookup"><span data-stu-id="65f76-237">Productivity Improvements for the Entity Framework</span></span>](https://blogs.msdn.com/b/efdesign/archive/2010/06/21/productivity-improvements-for-the-entity-framework.aspx?wa=wsignin1.0)

> [!div class="step-by-step"]
> <span data-ttu-id="65f76-238">[Zurück](create-the-project.md)
> [Weiter](ui_and_navigation.md)</span><span class="sxs-lookup"><span data-stu-id="65f76-238">[Previous](create-the-project.md)
[Next](ui_and_navigation.md)</span></span>
