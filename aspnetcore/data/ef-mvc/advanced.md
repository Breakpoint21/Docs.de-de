---
title: ASP.NET Core MVC mit EF-Core - erweitert - 10 von 10
author: tdykstra
description: "Dieses Lernprogramm führt verschiedene Themen, die nützlich sein, wenn Sie die Grundlagen des Entwickelns von ASP.NET-Webanwendungen, mit dem Entity Framework Core hinausgehen bewusst sind."
keywords: "ASP.NET Core, Entity Framework Core unformatierten Sql untersuchen, Sql, Repositorymusters, Einheit Arbeit für ein Muster, automatische änderungserkennung, vorhandene Datenbank"
ms.author: tdykstra
manager: wpickett
ms.date: 03/15/2017
ms.topic: get-started-article
ms.assetid: 92a2986a-d005-4ff6-9559-6657fd466bb7
ms.technology: aspnet
ms.prod: asp.net-core
uid: data/ef-mvc/advanced
ms.openlocfilehash: 70434d1c814af2a96493027c6a2ad87845cd5cae
ms.sourcegitcommit: 74a8ad9c1ba5c155d7c4303e67632a0922c38e86
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/20/2017
---
# <a name="advanced-topics---ef-core-with-aspnet-core-mvc-tutorial-10-of-10"></a><span data-ttu-id="4d45c-104">Weiterführende Themen - EF-Core mit ASP.NET Core MVC-Lernprogramm (10 von 10)</span><span class="sxs-lookup"><span data-stu-id="4d45c-104">Advanced topics - EF Core with ASP.NET Core MVC tutorial (10 of 10)</span></span>

<span data-ttu-id="4d45c-105">Durch [Tom Dykstra](https://github.com/tdykstra) und [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="4d45c-105">By [Tom Dykstra](https://github.com/tdykstra) and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="4d45c-106">Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET Core MVC-Webanwendungen, die mit Entity Framework Core und Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4d45c-106">The Contoso University sample web application demonstrates how to create ASP.NET Core MVC web applications using Entity Framework Core and Visual Studio.</span></span> <span data-ttu-id="4d45c-107">Informationen über die Reihe von Lernprogrammen finden Sie unter [im ersten Lernprogramm, in der Reihe](intro.md).</span><span class="sxs-lookup"><span data-stu-id="4d45c-107">For information about the tutorial series, see [the first tutorial in the series](intro.md).</span></span>

<span data-ttu-id="4d45c-108">Im vorherigen Lernprogramm implementiert Sie Tabelle pro Hierarchie Vererbung.</span><span class="sxs-lookup"><span data-stu-id="4d45c-108">In the previous tutorial, you implemented table-per-hierarchy inheritance.</span></span> <span data-ttu-id="4d45c-109">Dieses Lernprogramm führt verschiedene Themen, die nützlich sein, wenn Sie die Grundlagen des Entwickelns von ASP.NET Core-Webanwendungen, die Verwenden von Entity Framework Core, hinausgehen bewusst sind.</span><span class="sxs-lookup"><span data-stu-id="4d45c-109">This tutorial introduces several topics that are useful to be aware of when you go beyond the basics of developing ASP.NET Core web applications that use Entity Framework Core.</span></span>

## <a name="raw-sql-queries"></a><span data-ttu-id="4d45c-110">RAW-SQL-Abfragen</span><span class="sxs-lookup"><span data-stu-id="4d45c-110">Raw SQL Queries</span></span>

<span data-ttu-id="4d45c-111">Einer der Vorteile der Verwendung von Entity Framework ist, dass diese vermieden wird, den Code zu viel Wert auf eine bestimmte Methode zum Speichern von Daten zu binden.</span><span class="sxs-lookup"><span data-stu-id="4d45c-111">One of the advantages of using the Entity Framework is that it avoids tying your code too closely to a particular method of storing data.</span></span> <span data-ttu-id="4d45c-112">Dies geschieht durch Generieren von SQL-Abfragen und Befehle, die auch Sie freigibt, müssen sie selbst schreiben.</span><span class="sxs-lookup"><span data-stu-id="4d45c-112">It does this by generating SQL queries and commands for you, which also frees you from having to write them yourself.</span></span> <span data-ttu-id="4d45c-113">Aber es gibt außergewöhnliche Szenarien auf, wenn müssen Sie bestimmte SQL-Abfragen ausführen, die Sie manuell erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="4d45c-113">But there are exceptional scenarios when you need to run specific SQL queries that you have manually created.</span></span> <span data-ttu-id="4d45c-114">Für diese Szenarien umfasst der Entity Framework Code First-API-Methoden, die Ihnen ermöglichen, die SQL-Befehle direkt an die Datenbank übergeben.</span><span class="sxs-lookup"><span data-stu-id="4d45c-114">For these scenarios, the Entity Framework Code First API includes methods that enable you to pass SQL commands directly to the database.</span></span> <span data-ttu-id="4d45c-115">Sie haben folgende Möglichkeiten, in der EF Core 1.0:</span><span class="sxs-lookup"><span data-stu-id="4d45c-115">You have the following options in EF Core 1.0:</span></span>

* <span data-ttu-id="4d45c-116">Verwenden der `DbSet.FromSql` Methode zum Abfragen, die Entitätstypen zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="4d45c-116">Use the `DbSet.FromSql` method for queries that return entity types.</span></span> <span data-ttu-id="4d45c-117">Die zurückgegebenen Objekte muss mit der vom erwarteten Typ der `DbSet` -Objekt, und sie werden automatisch nachverfolgt vom Kontext Datenbank, wenn Sie [Überwachung deaktivieren](crud.md#no-tracking-queries).</span><span class="sxs-lookup"><span data-stu-id="4d45c-117">The returned objects must be of the type expected by the `DbSet` object, and they are automatically tracked by the database context unless you [turn tracking off](crud.md#no-tracking-queries).</span></span>

* <span data-ttu-id="4d45c-118">Verwenden der `Database.ExecuteSqlCommand` für nichtabfragebefehle.</span><span class="sxs-lookup"><span data-stu-id="4d45c-118">Use the `Database.ExecuteSqlCommand` for non-query commands.</span></span>

<span data-ttu-id="4d45c-119">Wenn Sie beim Ausführen einer Abfrage, die Typen zurückgibt, die Entitäten nicht möchten, können Sie mit der datenbankverbindung von EF bereitgestellten ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="4d45c-119">If you need to run a query that returns types that aren't entities, you can use ADO.NET with the database connection provided by EF.</span></span> <span data-ttu-id="4d45c-120">Die zurückgegebenen Daten wird nicht von den Datenbankkontext nachverfolgt, auch wenn Sie diese Methode zum Abrufen von Entitätstypen verwenden.</span><span class="sxs-lookup"><span data-stu-id="4d45c-120">The returned data isn't tracked by the database context, even if you use this method to retrieve entity types.</span></span>

<span data-ttu-id="4d45c-121">Wie immer "true" ist, wenn Sie SQL-Befehle in einer Webanwendung ausführen, müssen Sie Vorsichtsmaßnahmen treffen, Ihre Website vor SQL Injection-Angriffen schützen werden.</span><span class="sxs-lookup"><span data-stu-id="4d45c-121">As is always true when you execute SQL commands in a web application, you must take precautions to protect your site against SQL injection attacks.</span></span> <span data-ttu-id="4d45c-122">Eine Möglichkeit dazu besteht darin parametrisierte Abfragen zu verwenden, um sicherzustellen, dass Zeichenfolgen, die von einer Webseite übermittelten als SQL-Befehle interpretiert werden können.</span><span class="sxs-lookup"><span data-stu-id="4d45c-122">One way to do that is to use parameterized queries to make sure that strings submitted by a web page can't be interpreted as SQL commands.</span></span> <span data-ttu-id="4d45c-123">In diesem Lernprogramm verwenden Sie parametrisierte Abfragen beim Integrieren von Benutzereingaben in einer Abfrage.</span><span class="sxs-lookup"><span data-stu-id="4d45c-123">In this tutorial you'll use parameterized queries when integrating user input into a query.</span></span>

## <a name="call-a-query-that-returns-entities"></a><span data-ttu-id="4d45c-124">Rufen Sie eine Abfrage, die Entitäten zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="4d45c-124">Call a query that returns entities</span></span>

<span data-ttu-id="4d45c-125">Die `DbSet<TEntity>` -Klasse stellt eine Methode, die Sie verwenden können, zum Ausführen einer Abfrage, die eine Entität des Typs zurückgibt `TEntity`.</span><span class="sxs-lookup"><span data-stu-id="4d45c-125">The `DbSet<TEntity>` class provides a method that you can use to execute a query that returns an entity of type `TEntity`.</span></span> <span data-ttu-id="4d45c-126">Um festzustellen, wie dies funktioniert ändern den Code in der `Details` -Methode des Controllers Abteilung.</span><span class="sxs-lookup"><span data-stu-id="4d45c-126">To see how this works you'll change the code in the `Details` method of the Department controller.</span></span>

<span data-ttu-id="4d45c-127">In *DepartmentsController.cs*in der `Details` -Methode, ersetzen Sie den Code, der eine Abteilung mit abruft eine `FromSql` -Methodenaufruf, wie im folgenden hervorgehobenen Code gezeigt:</span><span class="sxs-lookup"><span data-stu-id="4d45c-127">In *DepartmentsController.cs*, in the `Details` method, replace the code that retrieves a department with a `FromSql` method call, as shown in the following highlighted code:</span></span>

[!code-csharp[Main](intro/samples/cu/Controllers/DepartmentsController.cs?name=snippet_RawSQL&highlight=8,9,10,13)]

<span data-ttu-id="4d45c-128">Um sicherzustellen, dass der neue Code ordnungsgemäß funktioniert, wählen Sie die **Abteilungen** Registerkarte und dann **Details** für eines der Abteilungen.</span><span class="sxs-lookup"><span data-stu-id="4d45c-128">To verify that the new code works correctly, select the **Departments** tab and then **Details** for one of the departments.</span></span>

![Department-Details](advanced/_static/department-details.png)

## <a name="call-a-query-that-returns-other-types"></a><span data-ttu-id="4d45c-130">Rufen Sie eine Abfrage, die andere Typen zurückgibt</span><span class="sxs-lookup"><span data-stu-id="4d45c-130">Call a query that returns other types</span></span>

<span data-ttu-id="4d45c-131">Zuvor haben Sie ein Student statistikraster für die Info-Seite, die die Anzahl der Schüler für jede Registrierungsdatum ergab erstellt.</span><span class="sxs-lookup"><span data-stu-id="4d45c-131">Earlier you created a student statistics grid for the About page that showed the number of students for each enrollment date.</span></span> <span data-ttu-id="4d45c-132">Sie haben die Daten aus der Entitätssammlung Studenten (`_context.Students`) und LINQ verwendet, um die Ergebnisse in eine Liste mit zu projizieren `EnrollmentDateGroup` Model-Objekte anzeigen.</span><span class="sxs-lookup"><span data-stu-id="4d45c-132">You got the data from the Students entity set (`_context.Students`) and used LINQ to project the results into a list of `EnrollmentDateGroup` view model objects.</span></span> <span data-ttu-id="4d45c-133">Nehmen Sie an, dass die SQL selbst anstatt mit LINQ geschrieben werden soll.</span><span class="sxs-lookup"><span data-stu-id="4d45c-133">Suppose you want to write the SQL itself rather than using LINQ.</span></span> <span data-ttu-id="4d45c-134">Hierzu müssen Sie beim Ausführen einer SQL-Abfrage zurückgibt, die einen anderen Wert als Entitätsobjekten.</span><span class="sxs-lookup"><span data-stu-id="4d45c-134">To do that you need to run a SQL query that returns something other than entity objects.</span></span> <span data-ttu-id="4d45c-135">In EF Core 1.0 ist eine Möglichkeit dazu ADO.NET-Code schreiben und die datenbankverbindung von EF abrufen.</span><span class="sxs-lookup"><span data-stu-id="4d45c-135">In EF Core 1.0, one way to do that is write ADO.NET code and get the database connection from EF.</span></span>

<span data-ttu-id="4d45c-136">In *HomeController.cs*, ersetzen Sie die `About` -Methode durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="4d45c-136">In *HomeController.cs*, replace the `About` method with the following code:</span></span>

[!code-csharp[Main](intro/samples/cu/Controllers/HomeController.cs?name=snippet_UseRawSQL&highlight=3-32)]

<span data-ttu-id="4d45c-137">Fügen Sie eine using Anweisung:</span><span class="sxs-lookup"><span data-stu-id="4d45c-137">Add a using statement:</span></span>

[!code-csharp[Main](intro/samples/cu/Controllers/HomeController.cs?name=snippet_Usings2)]

<span data-ttu-id="4d45c-138">Führen Sie die app, und wechseln Sie zu der Seite "Info".</span><span class="sxs-lookup"><span data-stu-id="4d45c-138">Run the app and go to the About page.</span></span> <span data-ttu-id="4d45c-139">Es zeigt die gleichen Daten wie zuvor.</span><span class="sxs-lookup"><span data-stu-id="4d45c-139">It displays the same data it did before.</span></span>

![Zu den Seiten](advanced/_static/about.png)

## <a name="call-an-update-query"></a><span data-ttu-id="4d45c-141">Rufen Sie eine Update-Abfrage</span><span class="sxs-lookup"><span data-stu-id="4d45c-141">Call an update query</span></span>

<span data-ttu-id="4d45c-142">Nehmen Sie an, dass Contoso University Administratoren globale Änderungen in der Datenbank, z. B. das Ändern der Anzahl der Gutschriften für jeder Kurs ausführen möchten.</span><span class="sxs-lookup"><span data-stu-id="4d45c-142">Suppose Contoso University administrators want to perform global changes in the database, such as changing the number of credits for every course.</span></span> <span data-ttu-id="4d45c-143">Verfügt die Universität eine große Anzahl von Kurse, wäre es ineffizient, diese als Entitäten abrufen und ändern Sie sie einzeln.</span><span class="sxs-lookup"><span data-stu-id="4d45c-143">If the university has a large number of courses, it would be inefficient to retrieve them all as entities and change them individually.</span></span> <span data-ttu-id="4d45c-144">In diesem Abschnitt implementieren Sie eine Webseite, die dem Benutzer ermöglicht, geben Sie einen Faktor, um die Anzahl der Gutschriften für alle Kurse ändern, und Sie treffen die Änderung durch eine SQL UPDATE-Anweisung ausführen.</span><span class="sxs-lookup"><span data-stu-id="4d45c-144">In this section you'll implement a web page that enables the user to specify a factor by which to change the number of credits for all courses, and you'll make the change by executing a SQL UPDATE statement.</span></span> <span data-ttu-id="4d45c-145">Die Webseite wird wie die folgende Abbildung aussehen:</span><span class="sxs-lookup"><span data-stu-id="4d45c-145">The web page will look like the following illustration:</span></span>

![Seite zum Aktualisieren des Kurses Gutschriften](advanced/_static/update-credits.png)

<span data-ttu-id="4d45c-147">In *CoursesContoller.cs*, UpdateCourseCredits Methoden für HttpGet und HttpPost hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="4d45c-147">In *CoursesContoller.cs*, add UpdateCourseCredits methods for HttpGet and HttpPost:</span></span>

[!code-csharp[Main](intro/samples/cu/Controllers/CoursesController.cs?name=snippet_UpdateGet)]

[!code-csharp[Main](intro/samples/cu/Controllers/CoursesController.cs?name=snippet_UpdatePost)]

<span data-ttu-id="4d45c-148">Wenn der Controller eine HttpGet-Anforderung verarbeitet, wird nichts in zurückgegeben `ViewData["RowsAffected"]`, und die Ansicht ein leeres Textfeld und einer Schaltfläche "Absenden" zeigt, wie in der vorherigen Abbildung dargestellt.</span><span class="sxs-lookup"><span data-stu-id="4d45c-148">When the controller processes an HttpGet request, nothing is returned in `ViewData["RowsAffected"]`, and the view displays an empty text box and a submit button, as shown in the preceding illustration.</span></span>

<span data-ttu-id="4d45c-149">Wenn die **Update** geklickt wird, die HttpPost-Methode aufgerufen wird und Multiplikator hat den Wert in das Textfeld eingegeben.</span><span class="sxs-lookup"><span data-stu-id="4d45c-149">When the **Update** button is clicked, the HttpPost method is called, and multiplier has the value entered in the text box.</span></span> <span data-ttu-id="4d45c-150">Der Code führt dann die SQL, die Kurse aktualisiert und gibt die Anzahl der betroffenen Zeilen zurück, an der Sicht `ViewData`.</span><span class="sxs-lookup"><span data-stu-id="4d45c-150">The code then executes the SQL that updates courses and returns the number of affected rows to the view in `ViewData`.</span></span> <span data-ttu-id="4d45c-151">Wenn die Sicht Ruft eine `RowsAffected` Wert, es zeigt die Anzahl der aktualisierten Zeilen.</span><span class="sxs-lookup"><span data-stu-id="4d45c-151">When the view gets a `RowsAffected` value, it displays the number of rows updated.</span></span>

<span data-ttu-id="4d45c-152">In **Projektmappen-Explorer**, mit der rechten Maustaste die *Ansichten/Kurse* Ordner, und klicken Sie dann auf **hinzufügen > Neues Element**.</span><span class="sxs-lookup"><span data-stu-id="4d45c-152">In **Solution Explorer**, right-click the *Views/Courses* folder, and then click **Add > New Item**.</span></span>

<span data-ttu-id="4d45c-153">In der **neues Element hinzufügen** Dialogfeld klicken Sie auf **ASP.NET** unter **installiert** klicken Sie im linken Bereich auf **MVC View Page**, und nennen Sie die neue Ansicht * UpdateCourseCredits.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="4d45c-153">In the **Add New Item** dialog, click **ASP.NET** under **Installed** in the left pane, click **MVC View Page**, and name the new view *UpdateCourseCredits.cshtml*.</span></span>

<span data-ttu-id="4d45c-154">In *Views/Courses/UpdateCourseCredits.cshtml*, den Code durch den folgenden Code ersetzen:</span><span class="sxs-lookup"><span data-stu-id="4d45c-154">In *Views/Courses/UpdateCourseCredits.cshtml*, replace the template code with the following code:</span></span>

[!code-html[Main](intro/samples/cu/Views/Courses/UpdateCourseCredits.cshtml)]

<span data-ttu-id="4d45c-155">Führen Sie die `UpdateCourseCredits` Methode dazu die **Kurse** Registerkarte, klicken Sie dann hinzufügen "/ UpdateCourseCredits" am Ende der URL in die Adressleiste des Browsers (z. B.: `http://localhost:5813/Courses/UpdateCourseCredits`).</span><span class="sxs-lookup"><span data-stu-id="4d45c-155">Run the `UpdateCourseCredits` method by selecting the **Courses** tab, then adding "/UpdateCourseCredits" to the end of the URL in the browser's address bar (for example: `http://localhost:5813/Courses/UpdateCourseCredits`).</span></span> <span data-ttu-id="4d45c-156">Geben Sie eine Zahl in das Textfeld ein:</span><span class="sxs-lookup"><span data-stu-id="4d45c-156">Enter a number in the text box:</span></span>

![Seite zum Aktualisieren des Kurses Gutschriften](advanced/_static/update-credits.png)

<span data-ttu-id="4d45c-158">Klicken Sie auf **Aktualisieren**.</span><span class="sxs-lookup"><span data-stu-id="4d45c-158">Click **Update**.</span></span> <span data-ttu-id="4d45c-159">Daraufhin wird die Anzahl der betroffenen Zeilen:</span><span class="sxs-lookup"><span data-stu-id="4d45c-159">You see the number of rows affected:</span></span>

![Update Kurs Gutschriften Seite betroffene Zeilen](advanced/_static/update-credits-rows-affected.png)

<span data-ttu-id="4d45c-161">Klicken Sie auf **zurück zur Listenansicht** um die Liste der Kurse mit der geänderte Anzahl von Gutschriften anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="4d45c-161">Click **Back to List** to see the list of courses with the revised number of credits.</span></span>

<span data-ttu-id="4d45c-162">Beachten Sie, dass Produktionscode müssen sicherstellen, dass, dass gültige Daten immer updates.</span><span class="sxs-lookup"><span data-stu-id="4d45c-162">Note that production code would ensure that updates always result in valid data.</span></span> <span data-ttu-id="4d45c-163">Der hier dargestellte vereinfachte Code konnte die Anzahl der Gutschriften genug zu Zahlen, die größer als 5 führt multiplizieren.</span><span class="sxs-lookup"><span data-stu-id="4d45c-163">The simplified code shown here could multiply the number of credits enough to result in numbers greater than 5.</span></span> <span data-ttu-id="4d45c-164">(Die `Credits` Eigenschaft verfügt über eine `[Range(0, 5)]` Attribut.) Die Update-Abfrage funktioniert, aber die ungültigen Daten könnte zu unerwarteten Ergebnissen führen, in anderen Teilen des Systems, die davon ausgehen, dass die Anzahl der Gutschriften 5 oder weniger ist.</span><span class="sxs-lookup"><span data-stu-id="4d45c-164">(The `Credits` property has a `[Range(0, 5)]` attribute.) The update query would work but the invalid data could cause unexpected results in other parts of the system that assume the number of credits is 5 or less.</span></span>

<span data-ttu-id="4d45c-165">Weitere Informationen zu unformatierten SQL-Abfragen finden Sie unter [unformatierten SQL-Abfragen](https://docs.microsoft.com/ef/core/querying/raw-sql).</span><span class="sxs-lookup"><span data-stu-id="4d45c-165">For more information about raw SQL queries, see [Raw SQL Queries](https://docs.microsoft.com/ef/core/querying/raw-sql).</span></span>

## <a name="examine-sql-sent-to-the-database"></a><span data-ttu-id="4d45c-166">Überprüfen von SQL, die an die Datenbank gesendet</span><span class="sxs-lookup"><span data-stu-id="4d45c-166">Examine SQL sent to the database</span></span>

<span data-ttu-id="4d45c-167">Manchmal ist es hilfreich, in der Lage, um den tatsächlichen SQL-Abfragen anzuzeigen, die an die Datenbank gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="4d45c-167">Sometimes it's helpful to be able to see the actual SQL queries that are sent to the database.</span></span> <span data-ttu-id="4d45c-168">Integrierte Protokollfunktion für ASP.NET Core wird automatisch von EF Core verwendet, Protokolle zu schreiben, die die SQL-Abfragen und Updates enthalten.</span><span class="sxs-lookup"><span data-stu-id="4d45c-168">Built-in logging functionality for ASP.NET Core is automatically used by EF Core to write logs that contain the SQL for queries and updates.</span></span> <span data-ttu-id="4d45c-169">In diesem Abschnitt sehen Sie einige Beispiele für die SQL-Protokollierung.</span><span class="sxs-lookup"><span data-stu-id="4d45c-169">In this section you'll see some examples of SQL logging.</span></span>

<span data-ttu-id="4d45c-170">Open *StudentsController.cs* und klicken Sie in der `Details` Methode legen Sie einen Haltepunkt auf der `if (student == null)` Anweisung.</span><span class="sxs-lookup"><span data-stu-id="4d45c-170">Open *StudentsController.cs* and in the `Details` method set a breakpoint on the `if (student == null)` statement.</span></span>

<span data-ttu-id="4d45c-171">Führen Sie die app im Debugmodus befindet, und wechseln Sie zur Seite "Details" für ein Student.</span><span class="sxs-lookup"><span data-stu-id="4d45c-171">Run the app in debug mode, and go to the Details page for a student.</span></span>

<span data-ttu-id="4d45c-172">Wechseln Sie zu der **Ausgabe** Fenster mit der Debug-Ausgabe, und sehen Sie die Abfrage:</span><span class="sxs-lookup"><span data-stu-id="4d45c-172">Go to the **Output** window showing debug output, and you see the query:</span></span>

```
Microsoft.EntityFrameworkCore.Database.Command:Information: Executed DbCommand (56ms) [Parameters=[@__id_0='?'], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [s].[ID], [s].[Discriminator], [s].[FirstName], [s].[LastName], [s].[EnrollmentDate]
FROM [Person] AS [s]
WHERE ([s].[Discriminator] = N'Student') AND ([s].[ID] = @__id_0)
ORDER BY [s].[ID]
Microsoft.EntityFrameworkCore.Database.Command:Information: Executed DbCommand (122ms) [Parameters=[@__id_0='?'], CommandType='Text', CommandTimeout='30']
SELECT [s.Enrollments].[EnrollmentID], [s.Enrollments].[CourseID], [s.Enrollments].[Grade], [s.Enrollments].[StudentID], [e.Course].[CourseID], [e.Course].[Credits], [e.Course].[DepartmentID], [e.Course].[Title]
FROM [Enrollment] AS [s.Enrollments]
INNER JOIN [Course] AS [e.Course] ON [s.Enrollments].[CourseID] = [e.Course].[CourseID]
INNER JOIN (
    SELECT TOP(1) [s0].[ID]
    FROM [Person] AS [s0]
    WHERE ([s0].[Discriminator] = N'Student') AND ([s0].[ID] = @__id_0)
    ORDER BY [s0].[ID]
) AS [t] ON [s.Enrollments].[StudentID] = [t].[ID]
ORDER BY [t].[ID]
```

<span data-ttu-id="4d45c-173">Sie sehen hier etwas, was möglicherweise überraschen: der SQL SELECT-Anweisungen bis zu 2 Zeilen (`TOP(2)`) aus der Person-Tabelle.</span><span class="sxs-lookup"><span data-stu-id="4d45c-173">You'll notice something here that might surprise you: the SQL selects up to 2 rows (`TOP(2)`) from the Person table.</span></span> <span data-ttu-id="4d45c-174">Die `SingleOrDefaultAsync` Methode kann nicht in 1 Zeile auf dem Server aufgelöst.</span><span class="sxs-lookup"><span data-stu-id="4d45c-174">The `SingleOrDefaultAsync` method doesn't resolve to 1 row on the server.</span></span> <span data-ttu-id="4d45c-175">Erläuterung:</span><span class="sxs-lookup"><span data-stu-id="4d45c-175">Here's why:</span></span>

* <span data-ttu-id="4d45c-176">Wenn die Abfrage mehrere Zeilen zurückgeben würde, gibt die Methode null zurück.</span><span class="sxs-lookup"><span data-stu-id="4d45c-176">If the query would return multiple rows, the method returns null.</span></span>
* <span data-ttu-id="4d45c-177">Um zu bestimmen, ob die Abfrage mehrere Zeilen zurückgeben würde, muss EF überprüfen Sie, ob mindestens 2 zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="4d45c-177">To determine whether the query would return multiple rows, EF has to check if it returns at least 2.</span></span>

<span data-ttu-id="4d45c-178">Beachten Sie, dass Sie nicht den Debugmodus verwenden und an einem Haltepunkt abzurufenden Protokollierungsausgabe beenden müssen die **Ausgabe** Fenster.</span><span class="sxs-lookup"><span data-stu-id="4d45c-178">Note that you don't have to use debug mode and stop at a breakpoint to get logging output in the **Output** window.</span></span> <span data-ttu-id="4d45c-179">Es ist eine komfortable Methode, um die Protokollierung an dem Punkt zu beenden, die an die Ausgabe gesucht werden soll.</span><span class="sxs-lookup"><span data-stu-id="4d45c-179">It's just a convenient way to stop the logging at the point you want to look at the output.</span></span> <span data-ttu-id="4d45c-180">Protokollierung wird fortgesetzt, wenn Sie dies tun, und Sie einen Bildlauf zurück, um die Teile zu suchen, denen Sie interessiert sind.</span><span class="sxs-lookup"><span data-stu-id="4d45c-180">If you don't do that, logging continues and you have to scroll back to find the parts you're interested in.</span></span>

## <a name="repository-and-unit-of-work-patterns"></a><span data-ttu-id="4d45c-181">Repository und die Einheit der Arbeit-Muster</span><span class="sxs-lookup"><span data-stu-id="4d45c-181">Repository and unit of work patterns</span></span>

<span data-ttu-id="4d45c-182">Viele Entwickler schreiben Code, um das Repository und die Einheit der Arbeit Muster als Wrapper um Code implementieren, die mit dem Entity Framework funktioniert.</span><span class="sxs-lookup"><span data-stu-id="4d45c-182">Many developers write code to implement the repository and unit of work patterns as a wrapper around code that works with the Entity Framework.</span></span> <span data-ttu-id="4d45c-183">Diese Muster sollen eine Abstraktionsebene zwischen der Datenzugriffsebene und den Geschäftslogikschicht einer Anwendung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="4d45c-183">These patterns are intended to create an abstraction layer between the data access layer and the business logic layer of an application.</span></span> <span data-ttu-id="4d45c-184">Diese Muster implementieren, um die Anwendung von Änderungen im Datenspeicher zu isolieren und Endprodukts automatisierte Komponententests oder eine testgesteuerte Entwicklung (TDD).</span><span class="sxs-lookup"><span data-stu-id="4d45c-184">Implementing these patterns can help insulate your application from changes in the data store and can facilitate automated unit testing or test-driven development (TDD).</span></span> <span data-ttu-id="4d45c-185">Schreiben zusätzlichen Code zum Implementieren dieser Muster ist jedoch nicht immer die beste Wahl für Anwendungen mit EF, verschiedene Ursachen:</span><span class="sxs-lookup"><span data-stu-id="4d45c-185">However, writing additional code to implement these patterns is not always the best choice for applications that use EF, for several reasons:</span></span>

* <span data-ttu-id="4d45c-186">Die Klasse der EF-Kontext selbst isoliert Codes von Store-datenspezifische Code.</span><span class="sxs-lookup"><span data-stu-id="4d45c-186">The EF context class itself insulates your code from data-store-specific code.</span></span>

* <span data-ttu-id="4d45c-187">Die EF-Context-Klasse kann fungieren, als eine Arbeitseinheit Klasse für Datenbank-updates, die Sie mithilfe von EF ausführen.</span><span class="sxs-lookup"><span data-stu-id="4d45c-187">The EF context class can act as a unit-of-work class for database updates that you do using EF.</span></span>

* <span data-ttu-id="4d45c-188">EF enthält Funktionen zum Implementieren der testgesteuerten Entwicklung ohne Repository Code zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="4d45c-188">EF includes features for implementing TDD without writing repository code.</span></span>

<span data-ttu-id="4d45c-189">Informationen dazu, wie Sie das Repository und die Einheit der Arbeit Muster zu implementieren, finden Sie unter [die Entity Framework 5 Version dieser Reihe von Lernprogrammen](https://docs.microsoft.com/aspnet/mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application).</span><span class="sxs-lookup"><span data-stu-id="4d45c-189">For information about how to implement the repository and unit of work patterns, see [the Entity Framework 5 version of this tutorial series](https://docs.microsoft.com/aspnet/mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application).</span></span>

<span data-ttu-id="4d45c-190">Entity Framework Core implementiert einen speicherinternen Datenbank-Anbieter, der für Tests verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="4d45c-190">Entity Framework Core implements an in-memory database provider that can be used for testing.</span></span> <span data-ttu-id="4d45c-191">Weitere Informationen finden Sie unter [Testen mit InMemory](https://docs.microsoft.com/ef/core/miscellaneous/testing/in-memory).</span><span class="sxs-lookup"><span data-stu-id="4d45c-191">For more information, see [Testing with InMemory](https://docs.microsoft.com/ef/core/miscellaneous/testing/in-memory).</span></span>

## <a name="automatic-change-detection"></a><span data-ttu-id="4d45c-192">Automatische änderungserkennung</span><span class="sxs-lookup"><span data-stu-id="4d45c-192">Automatic change detection</span></span>

<span data-ttu-id="4d45c-193">Entity Framework bestimmt wie eine Entität geändert wurde (und daher die Updates an die Datenbank gesendet werden müssen), indem Sie die aktuellen Werte von einer Entität mit den ursprünglichen Werten vergleichen.</span><span class="sxs-lookup"><span data-stu-id="4d45c-193">The Entity Framework determines how an entity has changed (and therefore which updates need to be sent to the database) by comparing the current values of an entity with the original values.</span></span> <span data-ttu-id="4d45c-194">Die ursprünglichen Werte werden gespeichert, wenn die Entität abgefragt oder angefügt wird.</span><span class="sxs-lookup"><span data-stu-id="4d45c-194">The original values are stored when the entity is queried or attached.</span></span> <span data-ttu-id="4d45c-195">Einige der Methoden, die dazu führen, änderungserkennung für automatische dass lauten wie folgt:</span><span class="sxs-lookup"><span data-stu-id="4d45c-195">Some of the methods that cause automatic change detection are the following:</span></span>

* <span data-ttu-id="4d45c-196">DbContext.SaveChanges</span><span class="sxs-lookup"><span data-stu-id="4d45c-196">DbContext.SaveChanges</span></span>

* <span data-ttu-id="4d45c-197">DbContext.Entry</span><span class="sxs-lookup"><span data-stu-id="4d45c-197">DbContext.Entry</span></span>

* <span data-ttu-id="4d45c-198">ChangeTracker.Entries</span><span class="sxs-lookup"><span data-stu-id="4d45c-198">ChangeTracker.Entries</span></span>

<span data-ttu-id="4d45c-199">Wenn Sie eine große Anzahl von Entitäten überwachen und einer dieser Methoden oft in einer Schleife aufrufen, erhalten Sie möglicherweise erhebliche Leistungssteigerungen durch vorübergehendes Deaktivieren der automatischen Änderung Erkennung verwendet die `ChangeTracker.AutoDetectChangesEnabled` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="4d45c-199">If you're tracking a large number of entities and you call one of these methods many times in a loop, you might get significant performance improvements by temporarily turning off automatic change detection using the `ChangeTracker.AutoDetectChangesEnabled` property.</span></span> <span data-ttu-id="4d45c-200">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="4d45c-200">For example:</span></span>

```csharp
_context.ChangeTracker.AutoDetectChangesEnabled = false;
```

## <a name="entity-framework-core-source-code-and-development-plans"></a><span data-ttu-id="4d45c-201">Entity Framework Core Source Code und Pläne</span><span class="sxs-lookup"><span data-stu-id="4d45c-201">Entity Framework Core source code and development plans</span></span>

<span data-ttu-id="4d45c-202">Der Quellcode für Entity Framework Core finden Sie unter [https://github.com/aspnet/EntityFrameworkCore](https://github.com/aspnet/EntityFrameworkCore).</span><span class="sxs-lookup"><span data-stu-id="4d45c-202">The source code for Entity Framework Core is available at [https://github.com/aspnet/EntityFrameworkCore](https://github.com/aspnet/EntityFrameworkCore).</span></span> <span data-ttu-id="4d45c-203">Neben dem Quellcode, können Sie über Nacht erstellte Builds abrufen, Verfolgung von Problemen, feature Spezifikationen, Entwerfen Sie Besprechungsnotizen, [der Roadmap für künftige Entwicklungen](https://github.com/aspnet/EntityFrameworkCore/wiki/Roadmap), und vieles mehr.</span><span class="sxs-lookup"><span data-stu-id="4d45c-203">Besides source code, you can get nightly builds, issue tracking, feature specs, design meeting notes, [the roadmap for future development](https://github.com/aspnet/EntityFrameworkCore/wiki/Roadmap), and more.</span></span> <span data-ttu-id="4d45c-204">Melden Sie den Fehler, und Sie können auch eigene Erweiterungen auf den Quellcode von EF beitragen.</span><span class="sxs-lookup"><span data-stu-id="4d45c-204">You can file bugs, and you can contribute your own enhancements to the EF source code.</span></span>

<span data-ttu-id="4d45c-205">Obwohl der Quellcode geöffnet ist, wird die Entity Framework Core als ein Produkt von Microsoft vollständig unterstützt.</span><span class="sxs-lookup"><span data-stu-id="4d45c-205">Although the source code is open, Entity Framework Core is fully supported as a Microsoft product.</span></span> <span data-ttu-id="4d45c-206">Das Microsoft Entity Framework-Team verfolgt die Kontrolle über die Beiträge akzeptiert werden und testet alle Änderungen am Code zum Gewährleisten der Qualität von jeder Version.</span><span class="sxs-lookup"><span data-stu-id="4d45c-206">The Microsoft Entity Framework team keeps control over which contributions are accepted and tests all code changes to ensure the quality of each release.</span></span>

## <a name="reverse-engineer-from-existing-database"></a><span data-ttu-id="4d45c-207">Reverse Engineering aus vorhandenen Datenbank</span><span class="sxs-lookup"><span data-stu-id="4d45c-207">Reverse engineer from existing database</span></span>

<span data-ttu-id="4d45c-208">Verwenden Sie zum zurückentwickeln, ein Datenmodell, einschließlich der Entitätsklassen aus einer vorhandenen Datenbank, die [Gerüst Dbcontext](https://docs.microsoft.com/ef/core/miscellaneous/cli/powershell#scaffold-dbcontext) Befehl.</span><span class="sxs-lookup"><span data-stu-id="4d45c-208">To reverse engineer a data model including entity classes from an existing database, use the [scaffold-dbcontext](https://docs.microsoft.com/ef/core/miscellaneous/cli/powershell#scaffold-dbcontext) command.</span></span> <span data-ttu-id="4d45c-209">Finden Sie unter der [erste-Schritte-Lernprogramm](https://docs.microsoft.com/ef/core/get-started/aspnetcore/existing-db).</span><span class="sxs-lookup"><span data-stu-id="4d45c-209">See the [getting-started tutorial](https://docs.microsoft.com/ef/core/get-started/aspnetcore/existing-db).</span></span>

<a id="dynamic-linq"></a>
## <a name="use-dynamic-linq-to-simplify-sort-selection-code"></a><span data-ttu-id="4d45c-210">Verwenden Sie dynamische LINQ zum Sortieren Auswahl Code vereinfachen</span><span class="sxs-lookup"><span data-stu-id="4d45c-210">Use dynamic LINQ to simplify sort selection code</span></span>

<span data-ttu-id="4d45c-211">Die [dritte Lernprogramm dieser Reihe](sort-filter-page.md) wird gezeigt, wie LINQ Code schreiben, durch eine feste Programmierung von Spaltennamen in einer `switch` Anweisung.</span><span class="sxs-lookup"><span data-stu-id="4d45c-211">The [third tutorial in this series](sort-filter-page.md) shows how to write LINQ code by hard-coding column names in a `switch` statement.</span></span> <span data-ttu-id="4d45c-212">Mit zwei Spalten zur Auswahl ist hervorragend, aber wenn Sie viele Spalten aufweisen konnte der Code ausführliche erhalten.</span><span class="sxs-lookup"><span data-stu-id="4d45c-212">With two columns to choose from, this works fine, but if you have many columns the code could get verbose.</span></span> <span data-ttu-id="4d45c-213">Um dieses Problem zu beheben, können Sie die `EF.Property` Methode, um den Namen der Eigenschaft als Zeichenfolge anzugeben.</span><span class="sxs-lookup"><span data-stu-id="4d45c-213">To solve that problem, you can use the `EF.Property` method to specify the name of the property as a string.</span></span> <span data-ttu-id="4d45c-214">Um diesen Ansatz auszuprobieren, ersetzen die `Index` Methode in der `StudentsController` durch den folgenden Code.</span><span class="sxs-lookup"><span data-stu-id="4d45c-214">To try out this approach, replace the `Index` method in the `StudentsController` with the following code.</span></span>

[!code-csharp[Main](intro/samples/cu/Controllers/StudentsController.cs?name=snippet_DynamicLinq)]

## <a name="next-steps"></a><span data-ttu-id="4d45c-215">Nächste Schritte</span><span class="sxs-lookup"><span data-stu-id="4d45c-215">Next steps</span></span>

<span data-ttu-id="4d45c-216">Dies schließt diese Reihe von Lernprogramme zum Verwenden der Entity Framework Core in einer ASP.NET MVC-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="4d45c-216">This completes this series of tutorials on using the Entity Framework Core in an ASP.NET MVC application.</span></span>

<span data-ttu-id="4d45c-217">Weitere Informationen zu EF Core finden Sie unter der [Dokumentation zu Entity Framework Core](https://docs.microsoft.com/ef/core).</span><span class="sxs-lookup"><span data-stu-id="4d45c-217">For more information about EF Core, see the [Entity Framework Core documentation](https://docs.microsoft.com/ef/core).</span></span> <span data-ttu-id="4d45c-218">Ein Buch ist ebenfalls verfügbar: [Entity Framework Core in Aktion](https://www.manning.com/books/entity-framework-core-in-action).</span><span class="sxs-lookup"><span data-stu-id="4d45c-218">A book is also available: [Entity Framework Core in Action](https://www.manning.com/books/entity-framework-core-in-action).</span></span>

<span data-ttu-id="4d45c-219">Informationen dazu, wie Sie Ihre Webanwendung bereitstellen, nachdem Sie es erstellt haben, finden Sie unter [Veröffentlichung und Bereitstellung](../../publishing/index.md).</span><span class="sxs-lookup"><span data-stu-id="4d45c-219">For information about how to deploy your web application after you've built it, see [Publishing and deployment](../../publishing/index.md).</span></span>

<span data-ttu-id="4d45c-220">Weitere Informationen zu anderen Themen im Zusammenhang mit ASP.NET Core MVC, wie beispielsweise Authentifizierung und Autorisierung, finden Sie unter der [Dokumentation zu ASP.NET Core](https://docs.microsoft.com/aspnet/core/).</span><span class="sxs-lookup"><span data-stu-id="4d45c-220">For information about other topics related to ASP.NET Core MVC, such as authentication and authorization, see the [ASP.NET Core documentation](https://docs.microsoft.com/aspnet/core/).</span></span>

## <a name="acknowledgments"></a><span data-ttu-id="4d45c-221">Bestätigungen</span><span class="sxs-lookup"><span data-stu-id="4d45c-221">Acknowledgments</span></span>

<span data-ttu-id="4d45c-222">Tom Dykstra und Rick Anderson (twitter @RickAndMSFT) wurde in diesem Lernprogramm geschrieben.</span><span class="sxs-lookup"><span data-stu-id="4d45c-222">Tom Dykstra and Rick Anderson (twitter @RickAndMSFT) wrote this tutorial.</span></span> <span data-ttu-id="4d45c-223">Rowan Miller Diego Vega und anderen Mitgliedern der Entity Framework-Team telefonischen mit codereviews und-Abgleich dabei behilflich waren, Debuggen von Problemen, die aufgetreten ist, während wir für die Lernprogramme Code geschrieben wurden.</span><span class="sxs-lookup"><span data-stu-id="4d45c-223">Rowan Miller, Diego Vega, and other members of the Entity Framework team assisted with code reviews and helped debug issues that arose while we were writing code for the tutorials.</span></span>

## <a name="common-errors"></a><span data-ttu-id="4d45c-224">Häufige Fehler</span><span class="sxs-lookup"><span data-stu-id="4d45c-224">Common errors</span></span>  

### <a name="contosouniversitydll-used-by-another-process"></a><span data-ttu-id="4d45c-225">ContosoUniversity.dll, die von einem anderen Prozess verwendet</span><span class="sxs-lookup"><span data-stu-id="4d45c-225">ContosoUniversity.dll used by another process</span></span>

<span data-ttu-id="4d45c-226">Fehlermeldung:</span><span class="sxs-lookup"><span data-stu-id="4d45c-226">Error message:</span></span>

> <span data-ttu-id="4d45c-227">Kann nicht geöffnet werden "... bin\Debug\netcoreapp1.0\ContosoUniversity.dll" zum Schreiben: "der Prozess kann nicht auf die Datei zugreifen"... \bin\Debug\netcoreapp1.0\ContosoUniversity.dll ", da sie von einem anderen Prozess verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="4d45c-227">Cannot open '...bin\Debug\netcoreapp1.0\ContosoUniversity.dll' for writing -- 'The process cannot access the file '...\bin\Debug\netcoreapp1.0\ContosoUniversity.dll' because it is being used by another process.</span></span>

<span data-ttu-id="4d45c-228">Projektmappe:</span><span class="sxs-lookup"><span data-stu-id="4d45c-228">Solution:</span></span>

<span data-ttu-id="4d45c-229">Beenden Sie die Website in IIS Express.</span><span class="sxs-lookup"><span data-stu-id="4d45c-229">Stop the site in IIS Express.</span></span> <span data-ttu-id="4d45c-230">Wechseln Sie zu der Windows-Taskleiste "Suchen" IIS Express und mit der rechten Maustaste des Symbol, wählen Sie den Standort Contoso University und klicken Sie dann auf **Website beenden**.</span><span class="sxs-lookup"><span data-stu-id="4d45c-230">Go to the Windows System Tray, find IIS Express and right-click its icon, select the Contoso University site, and then click **Stop Site**.</span></span>

### <a name="migration-scaffolded-with-no-code-in-up-and-down-methods"></a><span data-ttu-id="4d45c-231">Migration ohne Code in nach oben oder unten Methoden Gerüstbau</span><span class="sxs-lookup"><span data-stu-id="4d45c-231">Migration scaffolded with no code in Up and Down methods</span></span>

<span data-ttu-id="4d45c-232">Mögliche Ursache:</span><span class="sxs-lookup"><span data-stu-id="4d45c-232">Possible cause:</span></span>

<span data-ttu-id="4d45c-233">EF-CLI-Befehle nicht automatisch zu schließen und speichern die Codedateien.</span><span class="sxs-lookup"><span data-stu-id="4d45c-233">The EF CLI commands don't automatically close and save code files.</span></span> <span data-ttu-id="4d45c-234">Wenn Sie Änderungen beim Ausführen gespeicherte der `migrations add` Befehl EF, kann die Änderungen nicht finden.</span><span class="sxs-lookup"><span data-stu-id="4d45c-234">If you have unsaved changes when you run the `migrations add` command, EF won't find your changes.</span></span>

<span data-ttu-id="4d45c-235">Projektmappe:</span><span class="sxs-lookup"><span data-stu-id="4d45c-235">Solution:</span></span>

<span data-ttu-id="4d45c-236">Führen Sie die `migrations remove` Befehl, speichern Sie Ihre Änderungen am Code und erneuten Ausführen der `migrations add` Befehl.</span><span class="sxs-lookup"><span data-stu-id="4d45c-236">Run the `migrations remove` command, save your code changes and rerun the `migrations add` command.</span></span>

### <a name="errors-while-running-database-update"></a><span data-ttu-id="4d45c-237">Fehler beim laufenden Datenbankupdate</span><span class="sxs-lookup"><span data-stu-id="4d45c-237">Errors while running database update</span></span>

<span data-ttu-id="4d45c-238">Es ist möglich, andere Fehler auftreten, wenn schemaänderungen in einer Datenbank zu bestimmen, die vorhandene Daten enthält.</span><span class="sxs-lookup"><span data-stu-id="4d45c-238">It's possible to get other errors when making schema changes in a database that has existing data.</span></span> <span data-ttu-id="4d45c-239">Wenn Sie Fehler bei der Migration zu, die Sie nicht beheben können erhalten, können Sie den Datenbanknamen in der Verbindungszeichenfolge ändern oder löschen Sie die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="4d45c-239">If you get migration errors you can't resolve, you can either change the database name in the connection string or delete the database.</span></span> <span data-ttu-id="4d45c-240">Mit einer neuen Datenbank es sind keine Daten zu migrieren, und der Update-Database-Befehl ist weitaus höheren Wahrscheinlichkeit in ohne Fehler abgeschlossen werden.</span><span class="sxs-lookup"><span data-stu-id="4d45c-240">With a new database, there is no data to migrate, and the update-database command is much more likely to complete without errors.</span></span>

<span data-ttu-id="4d45c-241">Der einfachste Ansatz besteht darin, benennen Sie die Datenbank in *appsettings.json*.</span><span class="sxs-lookup"><span data-stu-id="4d45c-241">The simplest approach is to rename the database in *appsettings.json*.</span></span> <span data-ttu-id="4d45c-242">Das nächste Mal ausführen `database update`, eine neue Datenbank erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="4d45c-242">The next time you run `database update`, a new database will be created.</span></span>

<span data-ttu-id="4d45c-243">Zum Löschen einer Datenbank in SSOX mit der rechten Maustaste in der Datenbank aus, klicken Sie auf **löschen**, und klicken Sie dann in der **Datenbank löschen** aktivieren Sie im Dialogfeld **bestehende Verbindungen schließen** , und klicken Sie auf ** OK**.</span><span class="sxs-lookup"><span data-stu-id="4d45c-243">To delete a database in SSOX, right-click the database, click **Delete**, and then in the **Delete Database** dialog box select **Close existing connections** and click **OK**.</span></span>

<span data-ttu-id="4d45c-244">Führen Sie zum Löschen einer Datenbank mithilfe der CLI die `database drop` CLI-Befehl:</span><span class="sxs-lookup"><span data-stu-id="4d45c-244">To delete a database by using the CLI, run the `database drop` CLI command:</span></span>

```console
dotnet ef database drop
```

### <a name="error-locating-sql-server-instance"></a><span data-ttu-id="4d45c-245">Fehler beim Suchen von SQL Server-Instanz</span><span class="sxs-lookup"><span data-stu-id="4d45c-245">Error locating SQL Server instance</span></span>

<span data-ttu-id="4d45c-246">Fehlermeldung:</span><span class="sxs-lookup"><span data-stu-id="4d45c-246">Error Message:</span></span>

> <span data-ttu-id="4d45c-247">Ein netzwerkbezogener oder Instanzspezifischer Fehler beim Herstellen einer Verbindung mit SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4d45c-247">A network-related or instance-specific error occurred while establishing a connection to SQL Server.</span></span> <span data-ttu-id="4d45c-248">Der Server wurde nicht gefunden oder es konnte nicht auf ihn zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="4d45c-248">The server was not found or was not accessible.</span></span> <span data-ttu-id="4d45c-249">Stellen Sie sicher, dass der Instanzname richtig und SQL Server so konfiguriert ist, das Remoteverbindungen zulässig sind.</span><span class="sxs-lookup"><span data-stu-id="4d45c-249">Verify that the instance name is correct and that SQL Server is configured to allow remote connections.</span></span> <span data-ttu-id="4d45c-250">(Anbieter: SQL Network Interfaces, Fehler: 26 - Fehler beim Suchen von Server-Instanz angegeben.)</span><span class="sxs-lookup"><span data-stu-id="4d45c-250">(provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)</span></span>

<span data-ttu-id="4d45c-251">Projektmappe:</span><span class="sxs-lookup"><span data-stu-id="4d45c-251">Solution:</span></span>

<span data-ttu-id="4d45c-252">Überprüfen Sie die Verbindungszeichenfolge an.</span><span class="sxs-lookup"><span data-stu-id="4d45c-252">Check the connection string.</span></span> <span data-ttu-id="4d45c-253">Wenn Sie manuell die Datenbankdatei gelöscht haben, ändern Sie den Namen der Datenbank in der Konstruktionszeichenfolge mit einer neuen Datenbank zu beginnen.</span><span class="sxs-lookup"><span data-stu-id="4d45c-253">If you have manually deleted the database file, change the name of the database in the construction string to start over with a new database.</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="4d45c-254">Zurück</span><span class="sxs-lookup"><span data-stu-id="4d45c-254">Previous</span></span>](inheritance.md)
