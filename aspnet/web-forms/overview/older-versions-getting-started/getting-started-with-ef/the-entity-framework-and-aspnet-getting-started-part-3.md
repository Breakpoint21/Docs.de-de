---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-3
title: Erste Schritte mit Entity Framework 4.0-Datenbank zunächst und ASP.NET 4 Web Forms - Teil 3 | Microsoft Docs
author: tdykstra
description: Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mit dem Entity Framework. Die beispielanwendung ist...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: ccdc3f8c-2568-40a7-8f8b-3c23d2e05388
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-3
msc.type: authoredcontent
ms.openlocfilehash: 654f3556af5d05ec186e1811421966bbaffd2e21
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-3"></a><span data-ttu-id="b923f-104">Erste Schritte mit Entity Framework 4.0-Datenbank zunächst und ASP.NET 4 WebForms - Teil 3</span><span class="sxs-lookup"><span data-stu-id="b923f-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 3</span></span>
====================
<span data-ttu-id="b923f-105">durch [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="b923f-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="b923f-106">Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mit dem Entity Framework 4.0 und Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="b923f-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="b923f-107">Informationen über die Reihe von Lernprogrammen finden Sie unter [im ersten Lernprogramm, in der Reihe](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="b923f-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="filtering-ordering-and-grouping-data"></a><span data-ttu-id="b923f-108">Filter-, Sortier- und Gruppieren von Daten</span><span class="sxs-lookup"><span data-stu-id="b923f-108">Filtering, Ordering, and Grouping Data</span></span>

<span data-ttu-id="b923f-109">Im vorherigen Lernprogramm Sie verwendet die `EntityDataSource` -Steuerelement zum Anzeigen und Bearbeiten von Daten.</span><span class="sxs-lookup"><span data-stu-id="b923f-109">In the previous tutorial you used the `EntityDataSource` control to display and edit data.</span></span> <span data-ttu-id="b923f-110">In diesem Lernprogramm filtern, Sortieren und Gruppieren von Daten.</span><span class="sxs-lookup"><span data-stu-id="b923f-110">In this tutorial you'll filter, order, and group data.</span></span> <span data-ttu-id="b923f-111">Hierfür durch Festlegen der Eigenschaften der `EntityDataSource` -Steuerelement, die Syntax unterscheidet sich von anderen Steuerelementen für Datenquellen.</span><span class="sxs-lookup"><span data-stu-id="b923f-111">When you do this by setting properties of the `EntityDataSource` control, the syntax is different from other data source controls.</span></span> <span data-ttu-id="b923f-112">Wie Sie sehen, Sie können jedoch die `QueryExtender` Steuerelement, um diese Unterschiede zu minimieren.</span><span class="sxs-lookup"><span data-stu-id="b923f-112">As you'll see, however, you can use the `QueryExtender` control to minimize these differences.</span></span>

<span data-ttu-id="b923f-113">Ändern Sie die *Students.aspx* Seite für Studenten, gefiltert nach Namen, und suchen Sie auf Name sortieren.</span><span class="sxs-lookup"><span data-stu-id="b923f-113">You'll change the *Students.aspx* page to filter for students, sort by name, and search on name.</span></span> <span data-ttu-id="b923f-114">Ändern Sie auch die *Courses.aspx* Seite Kurse für die ausgewählte Abteilung und suchen Sie nach Kursen anhand des Namens angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b923f-114">You'll also change the *Courses.aspx* page to display courses for the selected department and search for courses by name.</span></span> <span data-ttu-id="b923f-115">Zum Schluss fügen Sie Student Statistiken, die die *About.aspx* Seite.</span><span class="sxs-lookup"><span data-stu-id="b923f-115">Finally, you'll add student statistics to the *About.aspx* page.</span></span>

<span data-ttu-id="b923f-116">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-116">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image1.png)</span></span>

<span data-ttu-id="b923f-117">[![image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-117">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image3.png)</span></span>

<span data-ttu-id="b923f-118">[![image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-118">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image5.png)</span></span>

<span data-ttu-id="b923f-119">[![image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-119">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image7.png)</span></span>

## <a name="using-the-entitydatasource-where-property-to-filter-data"></a><span data-ttu-id="b923f-120">Mithilfe der EntityDataSource "Where"-Eigenschaft zum Filtern von Daten</span><span class="sxs-lookup"><span data-stu-id="b923f-120">Using the EntityDataSource "Where" Property to Filter Data</span></span>

<span data-ttu-id="b923f-121">Öffnen der *Students.aspx* Seite, die Sie im vorherigen Lernprogramm erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="b923f-121">Open the *Students.aspx* page that you created in the previous tutorial.</span></span> <span data-ttu-id="b923f-122">Wie zurzeit konfiguriert, die `GridView` -Steuerelement auf der Seite zeigt die Namen aus der `People` Entitätenmenge.</span><span class="sxs-lookup"><span data-stu-id="b923f-122">As currently configured, the `GridView` control in the page displays all the names from the `People` entity set.</span></span> <span data-ttu-id="b923f-123">Sie möchten jedoch nur Studenten, zeigen Sie dazu finden `Person` Entitäten, die Registrierung von nicht-Null-Datumswerte unterstützen.</span><span class="sxs-lookup"><span data-stu-id="b923f-123">However, you want to show only students, which you can find by selecting `Person` entities that have non-null enrollment dates.</span></span>

<span data-ttu-id="b923f-124">Wechseln Sie zur **Entwurf** anzeigen und Auswählen der `EntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="b923f-124">Switch to **Design** view and select the `EntityDataSource` control.</span></span> <span data-ttu-id="b923f-125">In der **Eigenschaften** legen die `Where` Eigenschaft `it.EnrollmentDate is not null`.</span><span class="sxs-lookup"><span data-stu-id="b923f-125">In the **Properties** window, set the `Where` property to `it.EnrollmentDate is not null`.</span></span>

<span data-ttu-id="b923f-126">[![Image01 abgerufen wird](the-entity-framework-and-aspnet-getting-started-part-3/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-126">[![Image01](the-entity-framework-and-aspnet-getting-started-part-3/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image9.png)</span></span>

<span data-ttu-id="b923f-127">Die Syntax, die Sie, in verwenden der `Where` Eigenschaft von der `EntityDataSource` Steuerelement Entity SQL ist.</span><span class="sxs-lookup"><span data-stu-id="b923f-127">The syntax you use in the `Where` property of the `EntityDataSource` control is Entity SQL.</span></span> <span data-ttu-id="b923f-128">Entity SQL ist ähnlich wie Transact-SQL, aber er ist für die Verwendung mit Entitäten statt Datenbankobjekte angepasst.</span><span class="sxs-lookup"><span data-stu-id="b923f-128">Entity SQL is similar to Transact-SQL, but it's customized for use with entities rather than database objects.</span></span> <span data-ttu-id="b923f-129">Im Ausdruck `it.EnrollmentDate is not null`, das Wort `it` einen Verweis auf die von der Abfrage zurückgegebenen Entität darstellt.</span><span class="sxs-lookup"><span data-stu-id="b923f-129">In the expression `it.EnrollmentDate is not null`, the word `it` represents a reference to the entity returned by the query.</span></span> <span data-ttu-id="b923f-130">Aus diesem Grund `it.EnrollmentDate` bezieht sich auf die `EnrollmentDate` Eigenschaft von der `Person` Entität, die `EntityDataSource` gibt steuern.</span><span class="sxs-lookup"><span data-stu-id="b923f-130">Therefore, `it.EnrollmentDate` refers to the `EnrollmentDate` property of the `Person` entity that the `EntityDataSource` control returns.</span></span>

<span data-ttu-id="b923f-131">Führen Sie die Seite.</span><span class="sxs-lookup"><span data-stu-id="b923f-131">Run the page.</span></span> <span data-ttu-id="b923f-132">Liste der Studenten enthält jetzt nur Studenten.</span><span class="sxs-lookup"><span data-stu-id="b923f-132">The students list now contains only students.</span></span> <span data-ttu-id="b923f-133">(Es sind keine Zeilen angezeigt, in denen keine Registrierungsdatum vorhanden ist.)</span><span class="sxs-lookup"><span data-stu-id="b923f-133">(There are no rows displayed where there's no enrollment date.)</span></span>

<span data-ttu-id="b923f-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image11.png)</span></span>

## <a name="using-the-entitydatasource-orderby-property-to-order-data"></a><span data-ttu-id="b923f-135">Mithilfe der EntityDataSource 'OrderBy'-Eigenschaft Auftragsdaten</span><span class="sxs-lookup"><span data-stu-id="b923f-135">Using the EntityDataSource "OrderBy" Property to Order Data</span></span>

<span data-ttu-id="b923f-136">Sie sollten auch diese Liste sortiert werden, wenn er erstmals angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="b923f-136">You also want this list to be in name order when it's first displayed.</span></span> <span data-ttu-id="b923f-137">Mit der *Students.aspx* Seite noch geöffnet, in **Entwurf** anzeigen, und mit der `EntityDataSource` Steuerelement noch ausgewählt, in der **Eigenschaften** Fenster Satz der  **OrderBy** Eigenschaft `it.LastName`.</span><span class="sxs-lookup"><span data-stu-id="b923f-137">With the *Students.aspx* page still open in **Design** view, and with the `EntityDataSource` control still selected, in the **Properties** window set the **OrderBy** property to `it.LastName`.</span></span>

<span data-ttu-id="b923f-138">[![Image05](the-entity-framework-and-aspnet-getting-started-part-3/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-138">[![Image05](the-entity-framework-and-aspnet-getting-started-part-3/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image13.png)</span></span>

<span data-ttu-id="b923f-139">Führen Sie die Seite.</span><span class="sxs-lookup"><span data-stu-id="b923f-139">Run the page.</span></span> <span data-ttu-id="b923f-140">Liste der Studenten ist jetzt in der Reihenfolge nach dem Nachnamen.</span><span class="sxs-lookup"><span data-stu-id="b923f-140">The students list is now in order by last name.</span></span>

<span data-ttu-id="b923f-141">[![Image04](the-entity-framework-and-aspnet-getting-started-part-3/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-141">[![Image04](the-entity-framework-and-aspnet-getting-started-part-3/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image15.png)</span></span>

## <a name="using-a-control-parameter-to-set-the-where-property"></a><span data-ttu-id="b923f-142">Dabei wird ein Steuerelementparameter zum Festlegen der Eigenschaft "Where"</span><span class="sxs-lookup"><span data-stu-id="b923f-142">Using a Control Parameter to Set the "Where" Property</span></span>

<span data-ttu-id="b923f-143">Wie mit anderen Steuerelementen für Datenquellen, Sie Parameterwerte zu übergeben, können die `Where` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="b923f-143">As with other data source controls, you can pass parameter values to the `Where` property.</span></span> <span data-ttu-id="b923f-144">Auf der *Courses.aspx* Seite, dass Sie in Teil 2 des Lernprogramms erstellt haben, können Sie diese Methode verwenden, um Kurse anzuzeigen, die die Abteilung zugeordnet sind, die ein Benutzer aus der Dropdown Liste auswählt.</span><span class="sxs-lookup"><span data-stu-id="b923f-144">On the *Courses.aspx* page that you created in part 2 of the tutorial, you can use this method to display courses that are associated with the department that a user selects from the drop-down list.</span></span>

<span data-ttu-id="b923f-145">Open *Courses.aspx* und wechseln Sie zur **Entwurf** anzeigen.</span><span class="sxs-lookup"><span data-stu-id="b923f-145">Open *Courses.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="b923f-146">Fügen Sie eine zweite `EntityDataSource` die Steuerung an die Seite, und nennen Sie sie `CoursesEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="b923f-146">Add a second `EntityDataSource` control to the page, and name it `CoursesEntityDataSource`.</span></span> <span data-ttu-id="b923f-147">Eine Verbindung mit der `SchoolEntities` Modell, und wählen `Courses` als die **EntitySetName** Wert.</span><span class="sxs-lookup"><span data-stu-id="b923f-147">Connect it to the `SchoolEntities` model, and select `Courses` as the **EntitySetName** value.</span></span>

<span data-ttu-id="b923f-148">In der **Eigenschaften** Fenster, klicken Sie auf die Schaltfläche in der **, in denen** Eigenschaftenfeld.</span><span class="sxs-lookup"><span data-stu-id="b923f-148">In the **Properties** window, click the ellipsis in the **Where** property box.</span></span> <span data-ttu-id="b923f-149">(Stellen Sie sicher, dass die `CoursesEntityDataSource` Steuerelement ausgewählt ist immer noch vor der Verwendung der **Eigenschaften** Fenster.)</span><span class="sxs-lookup"><span data-stu-id="b923f-149">(Make sure the `CoursesEntityDataSource` control is still selected before using the **Properties** window.)</span></span>

<span data-ttu-id="b923f-150">[![Image06](the-entity-framework-and-aspnet-getting-started-part-3/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-150">[![Image06](the-entity-framework-and-aspnet-getting-started-part-3/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image17.png)</span></span>

<span data-ttu-id="b923f-151">Die **Ausdrucks-Editor** Dialogfeld wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b923f-151">The **Expression Editor** dialog box is displayed.</span></span> <span data-ttu-id="b923f-152">Wählen Sie in diesem Dialogfeld **automatisch generieren Ausdruck basierend auf den bereitgestellten Parametern**, und klicken Sie dann auf **Parameter hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="b923f-152">In this dialog box, select **Automatically generate the Where expression based on the provided parameters**, and then click **Add Parameter**.</span></span> <span data-ttu-id="b923f-153">Nennen Sie den Parameter `DepartmentID`Option **Steuerelement** als die **Parameterquelle** Wert ein, und wählen Sie **DepartmentsDropDownList** als die **ControlID**  Wert.</span><span class="sxs-lookup"><span data-stu-id="b923f-153">Name the parameter `DepartmentID`, select **Control** as the **Parameter source** value, and select **DepartmentsDropDownList** as the **ControlID** value.</span></span>

<span data-ttu-id="b923f-154">[![Image07](the-entity-framework-and-aspnet-getting-started-part-3/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-154">[![Image07](the-entity-framework-and-aspnet-getting-started-part-3/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image19.png)</span></span>

<span data-ttu-id="b923f-155">Klicken Sie auf **erweiterte Eigenschaften einblenden**, und klicken Sie in der **Eigenschaften** Fenster von der **Ausdrucks-Editor** ändern Sie im Dialogfeld der `Type` Eigenschaft `Int32`.</span><span class="sxs-lookup"><span data-stu-id="b923f-155">Click **Show advanced properties**, and in the **Properties** window of the **Expression Editor** dialog box, change the `Type` property to `Int32`.</span></span>

<span data-ttu-id="b923f-156">[![image15](the-entity-framework-and-aspnet-getting-started-part-3/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-156">[![Image15](the-entity-framework-and-aspnet-getting-started-part-3/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image21.png)</span></span>

<span data-ttu-id="b923f-157">Wenn Sie fertig sind, klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="b923f-157">When you're done, click **OK**.</span></span>

<span data-ttu-id="b923f-158">Fügen Sie unterhalb der Dropdownliste eine `GridView` die Steuerung an die Seite, und nennen Sie sie `CoursesGridView`.</span><span class="sxs-lookup"><span data-stu-id="b923f-158">Below the drop-down list, add a `GridView` control to the page and name it `CoursesGridView`.</span></span> <span data-ttu-id="b923f-159">Eine Verbindung mit der `CoursesEntityDataSource` Datenquellensteuerelement, klicken Sie auf **Schema aktualisieren**, klicken Sie auf **Spalten bearbeiten**, und entfernen Sie die `DepartmentID` Spalte.</span><span class="sxs-lookup"><span data-stu-id="b923f-159">Connect it to the `CoursesEntityDataSource` data source control, click **Refresh Schema**, click **Edit Columns**, and remove the `DepartmentID` column.</span></span> <span data-ttu-id="b923f-160">Die `GridView` Steuerelementmarkup ähnelt dem folgenden Beispiel.</span><span class="sxs-lookup"><span data-stu-id="b923f-160">The `GridView` control markup resembles the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample1.aspx)]

<span data-ttu-id="b923f-161">Wenn der Benutzer die ausgewählte Abteilung in der Dropdown-Liste ändert, möchten Sie die Liste der zugeordneten Kurse automatisch geändert.</span><span class="sxs-lookup"><span data-stu-id="b923f-161">When the user changes the selected department in the drop-down list, you want the list of associated courses to change automatically.</span></span> <span data-ttu-id="b923f-162">Um dazu wählen Sie die Dropdownliste und klicken Sie in der **Eigenschaften** Fenster Satz der `AutoPostBack` Eigenschaft `True`.</span><span class="sxs-lookup"><span data-stu-id="b923f-162">To make this happen, select the drop-down list, and in the **Properties** window set the `AutoPostBack` property to `True`.</span></span>

<span data-ttu-id="b923f-163">[![Image08](the-entity-framework-and-aspnet-getting-started-part-3/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-163">[![Image08](the-entity-framework-and-aspnet-getting-started-part-3/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image23.png)</span></span>

<span data-ttu-id="b923f-164">Nun, dass Sie mithilfe des Designers abgeschlossen haben, wechseln Sie zur **Quelle** anzuzeigen, und Ersetzen Sie die `ConnectionString` und `DefaultContainer` benennen Sie Eigenschaften von der `CoursesEntityDataSource` steuern, mit der `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` Attribut.</span><span class="sxs-lookup"><span data-stu-id="b923f-164">Now that you're finished using the designer, switch to **Source** view and replace the `ConnectionString` and `DefaultContainer` name properties of the `CoursesEntityDataSource` control with the `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="b923f-165">Wenn Sie fertig sind, wird das Markup für das Steuerelement wie im folgenden Beispiel aussehen.</span><span class="sxs-lookup"><span data-stu-id="b923f-165">When you're done, the markup for the control will look like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample2.aspx)]

<span data-ttu-id="b923f-166">Führen Sie die Seite, und verwenden Sie die Dropdownliste, um verschiedene Abteilungen auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="b923f-166">Run the page and use the drop-down list to select different departments.</span></span> <span data-ttu-id="b923f-167">Nur Kurse, die von der ausgewählten Abteilung angeboten werden werden angezeigt, der `GridView` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="b923f-167">Only courses that are offered by the selected department are displayed in the `GridView` control.</span></span>

<span data-ttu-id="b923f-168">[![Image09](the-entity-framework-and-aspnet-getting-started-part-3/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-168">[![Image09](the-entity-framework-and-aspnet-getting-started-part-3/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image25.png)</span></span>

## <a name="using-the-entitydatasource-groupby-property-to-group-data"></a><span data-ttu-id="b923f-169">Mithilfe der EntityDataSource "Group By"-Eigenschaft zum Gruppieren von Daten</span><span class="sxs-lookup"><span data-stu-id="b923f-169">Using the EntityDataSource "GroupBy" Property to Group Data</span></span>

<span data-ttu-id="b923f-170">Angenommen, das Contoso-University möchte einige Statistiken Student-Text auf der Seite "zu" abgelegt.</span><span class="sxs-lookup"><span data-stu-id="b923f-170">Suppose Contoso University wants to put some student-body statistics on its About page.</span></span> <span data-ttu-id="b923f-171">Insbesondere, möchte er eine Aufschlüsselung der Anzahl von Schülern nach dem Datum an, die sie registriert.</span><span class="sxs-lookup"><span data-stu-id="b923f-171">Specifically, it wants to show a breakdown of numbers of students by the date they enrolled.</span></span>

<span data-ttu-id="b923f-172">Öffnen *About.aspx*, und klicken Sie in **Quelle** anzuzeigen, ersetzen Sie den vorhandenen Inhalt der `BodyContent` steuern mit "Student Text Statistiken" zwischen `h2` Tags:</span><span class="sxs-lookup"><span data-stu-id="b923f-172">Open *About.aspx*, and in **Source** view, replace the existing contents of the `BodyContent` control with "Student Body Statistics" between `h2` tags:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample3.aspx)]

<span data-ttu-id="b923f-173">Nachdem die Überschrift, Hinzufügen einer `EntityDataSource` steuern, und nennen Sie sie `StudentStatisticsEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="b923f-173">After the heading, add an `EntityDataSource` control and name it `StudentStatisticsEntityDataSource`.</span></span> <span data-ttu-id="b923f-174">Eine Verbindung mit `SchoolEntities`, wählen die `People` Entität festgelegt, und lassen Sie die **wählen** Feld im Assistenten unverändert.</span><span class="sxs-lookup"><span data-stu-id="b923f-174">Connect it to `SchoolEntities`, select the `People` entity set, and leave the **Select** box in the wizard unchanged.</span></span> <span data-ttu-id="b923f-175">Legen Sie die folgenden Eigenschaften der **Eigenschaften** Fenster:</span><span class="sxs-lookup"><span data-stu-id="b923f-175">Set the following properties in the **Properties** window:</span></span>

- <span data-ttu-id="b923f-176">Um für Studenten nur filtern, legen Sie die `Where` Eigenschaft `it.EnrollmentDate is not null`.</span><span class="sxs-lookup"><span data-stu-id="b923f-176">To filter for students only, set the `Where` property to `it.EnrollmentDate is not null`.</span></span>
- <span data-ttu-id="b923f-177">Um die Ergebnisse nach dem Registrierungsdatum zu gruppieren, legen Sie die `GroupBy` Eigenschaft `it.EnrollmentDate`.</span><span class="sxs-lookup"><span data-stu-id="b923f-177">To group the results by the enrollment date, set the `GroupBy` property to `it.EnrollmentDate`.</span></span>
- <span data-ttu-id="b923f-178">Um das Registrierungsdatum und die Anzahl der Schüler auszuwählen, legen Sie die `Select` Eigenschaft `it.EnrollmentDate, Count(it.EnrollmentDate) AS NumberOfStudents`.</span><span class="sxs-lookup"><span data-stu-id="b923f-178">To select the enrollment date and the number of students, set the `Select` property to `it.EnrollmentDate, Count(it.EnrollmentDate) AS NumberOfStudents`.</span></span>
- <span data-ttu-id="b923f-179">Legen Sie zum Sortieren der Ergebnisse nach dem Registrierungsdatum der `OrderBy` Eigenschaft `it.EnrollmentDate`.</span><span class="sxs-lookup"><span data-stu-id="b923f-179">To order the results by the enrollment date, set the `OrderBy` property to `it.EnrollmentDate`.</span></span>

<span data-ttu-id="b923f-180">In **Quelle** anzuzeigen, ersetzen Sie die `ConnectionString` und `DefaultContainer` benennen Sie Eigenschaften mit einem `ContextTypeName` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="b923f-180">In **Source** view, replace the `ConnectionString` and `DefaultContainer` name properties with a `ContextTypeName` property.</span></span> <span data-ttu-id="b923f-181">Die `EntityDataSource` Steuerelementmarkup sieht wie im folgende Beispiel.</span><span class="sxs-lookup"><span data-stu-id="b923f-181">The `EntityDataSource` control markup now resembles the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample4.aspx)]

<span data-ttu-id="b923f-182">Die Syntax der `Select`, `GroupBy`, und `Where` Eigenschaften ähnelt der Transact-SQL, mit Ausnahme von der `it` Schlüsselwort, das die aktuelle Entität angibt.</span><span class="sxs-lookup"><span data-stu-id="b923f-182">The syntax of the `Select`, `GroupBy`, and `Where` properties resembles Transact-SQL except for the `it` keyword that specifies the current entity.</span></span>

<span data-ttu-id="b923f-183">Fügen Sie das folgende Markup zum Erstellen einer `GridView` Steuerelement zum Anzeigen der Daten.</span><span class="sxs-lookup"><span data-stu-id="b923f-183">Add the following markup to create a `GridView` control to display the data.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample5.aspx)]

<span data-ttu-id="b923f-184">Führen Sie die Seite zum Anzeigen einer Liste, die die Anzahl der Schüler Registrierungsdatum anzeigen.</span><span class="sxs-lookup"><span data-stu-id="b923f-184">Run the page to see a list showing the number of students by enrollment date.</span></span>

<span data-ttu-id="b923f-185">[![image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-185">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image27.png)</span></span>

## <a name="using-the-queryextender-control-for-filtering-and-ordering"></a><span data-ttu-id="b923f-186">Verwenden des QueryExtender-Steuerelements für die Filterung und Sortierung</span><span class="sxs-lookup"><span data-stu-id="b923f-186">Using the QueryExtender Control for Filtering and Ordering</span></span>

<span data-ttu-id="b923f-187">Die `QueryExtender` Steuerelement bietet eine Möglichkeit zum Filtern und Sortieren in Markup angeben.</span><span class="sxs-lookup"><span data-stu-id="b923f-187">The `QueryExtender` control provides a way to specify filtering and sorting in markup.</span></span> <span data-ttu-id="b923f-188">Die Syntax ist unabhängig von der Verwendung von Datenbank-Managementsystem (DBMS).</span><span class="sxs-lookup"><span data-stu-id="b923f-188">The syntax is independent of the database management system (DBMS) you're using.</span></span> <span data-ttu-id="b923f-189">Es ist auch in der Regel unabhängig von der Entity Framework, mit der Ausnahme, dass die verwendete Syntax für Navigationseigenschaften für das Entity Framework eindeutig ist.</span><span class="sxs-lookup"><span data-stu-id="b923f-189">It's also generally independent of the Entity Framework, with the exception that syntax you use for navigation properties is unique to the Entity Framework.</span></span>

<span data-ttu-id="b923f-190">In diesem Teil des Lernprogramms verwenden Sie eine `QueryExtender` Steuerelement zu filtern und OrderBy-Daten, und eine Order by-Felder werden einer Navigationseigenschaft.</span><span class="sxs-lookup"><span data-stu-id="b923f-190">In this part of the tutorial you'll use a `QueryExtender` control to filter and order data, and one of the order-by fields will be a navigation property.</span></span>

<span data-ttu-id="b923f-191">(Wenn Sie es vorziehen, verwenden Code anstelle von Markup, um die Abfragen zu erweitern, die durch die automatisch generiert die `EntityDataSource` -Steuerelement, Sie können dies vornehmen, indem Behandlung der `QueryCreated` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="b923f-191">(If you prefer to use code instead of markup to extend the queries that are automatically generated by the `EntityDataSource` control, you can do that by handling the `QueryCreated` event.</span></span> <span data-ttu-id="b923f-192">Dies ist wie die `QueryExtender` Steuerelement erweitert `EntityDataSource` Abfragen auch steuern.)</span><span class="sxs-lookup"><span data-stu-id="b923f-192">This is how the `QueryExtender` control extends `EntityDataSource` control queries also.)</span></span>

<span data-ttu-id="b923f-193">Öffnen der *Courses.aspx* Seite, und fügen Sie unter dem Markup, das Sie zuvor hinzugefügt haben, das folgende Markup, um eine Überschrift, ein Textfeld zum Eingeben von Suchzeichenfolgen, eine Suchschaltfläche zu erstellen und ein `EntityDataSource` Steuerelement, das an die gebundenist`Courses` Entitätenmenge.</span><span class="sxs-lookup"><span data-stu-id="b923f-193">Open the *Courses.aspx* page, and below the markup you added previously, insert the following markup to create a heading, a text box for entering search strings, a search button, and an `EntityDataSource` control that's bound to the `Courses` entity set.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample6.aspx)]

<span data-ttu-id="b923f-194">Beachten Sie, dass die `EntityDataSource` des Steuerelements `Include` -Eigenschaftensatz auf `Department`.</span><span class="sxs-lookup"><span data-stu-id="b923f-194">Notice that the `EntityDataSource` control's `Include` property is set to `Department`.</span></span> <span data-ttu-id="b923f-195">In der Datenbank die `Course` Tabelle enthält nicht den Abteilungsnamen, enthält der Ausgabeparameter ein `DepartmentID` foreign Key-Spalte.</span><span class="sxs-lookup"><span data-stu-id="b923f-195">In the database, the `Course` table does not contain the department name; it contains a `DepartmentID` foreign key column.</span></span> <span data-ttu-id="b923f-196">Wenn Sie die Datenbank direkt zum Abrufen des Namens der Abteilung zusammen mit Kursdaten Abfragen wurden, müssten Sie verknüpfen die `Course` und `Department` Tabellen.</span><span class="sxs-lookup"><span data-stu-id="b923f-196">If you were querying the database directly, to get the department name along with course data, you would have to join the `Course` and `Department` tables.</span></span> <span data-ttu-id="b923f-197">Durch Festlegen der `Include` Eigenschaft `Department`, Sie angeben, dass das Entity Framework kommunikationsaufrufe den zugehörigen vorgegangen `Department` Entität aus, wenn er erhält eine `Course` Entität.</span><span class="sxs-lookup"><span data-stu-id="b923f-197">By setting the `Include` property to `Department`, you specify that the Entity Framework should do the work of getting the related `Department` entity when it gets a `Course` entity.</span></span> <span data-ttu-id="b923f-198">Die `Department` Entität werden gespeichert, der `Department` Navigationseigenschaft der `Course` Entität.</span><span class="sxs-lookup"><span data-stu-id="b923f-198">The `Department` entity is then stored in the `Department` navigation property of the `Course` entity.</span></span> <span data-ttu-id="b923f-199">(Standardmäßig der `SchoolEntities` -Klasse, die von dem Modell-Designer generiert wurde verknüpfte Daten abruft, wenn ist es erforderlich, und Sie das Datenquellensteuerelement, für diese Klasse gebunden haben, sodass das Festlegen der `Include` Eigenschaft ist nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="b923f-199">(By default, the `SchoolEntities` class that was generated by the data model designer retrieves related data when it's needed, and you've bound the data source control to that class, so setting the `Include` property is not necessary.</span></span> <span data-ttu-id="b923f-200">Allerdings festlegen verbessert die Leistung der Seite, da andernfalls das Entity Framework machen würden Aufrufe zum Abrufen von Daten für die Datenbank trennen der `Course` Entitäten und für die verknüpfte `Department` Entitäten.)</span><span class="sxs-lookup"><span data-stu-id="b923f-200">However, setting it improves performance of the page, because otherwise the Entity Framework would make separate calls to the database to retrieve data for the `Course` entities and for the related `Department` entities.)</span></span>

<span data-ttu-id="b923f-201">Nach der `EntityDataSource` Steuerelement, die Sie gerade erstellt haben, fügen Sie das folgende Markup zum Erstellen einer `QueryExtender` Steuerelement, mit denen gebunden ist `EntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="b923f-201">After the `EntityDataSource` control you just created, insert the following markup to create a `QueryExtender` control that's bound to that `EntityDataSource` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample7.aspx)]

<span data-ttu-id="b923f-202">Die `SearchExpression` Element gibt an, um Kurse auszuwählen, deren Namen mit dem Wert, der in das Textfeld eingegeben, werden sollen.</span><span class="sxs-lookup"><span data-stu-id="b923f-202">The `SearchExpression` element specifies that you want to select courses whose titles match the value entered in the text box.</span></span> <span data-ttu-id="b923f-203">Wie viele Zeichen eingegeben wurden, in das Textfeld, verglichen werden da nur die `SearchType` Eigenschaft gibt an, `StartsWith`.</span><span class="sxs-lookup"><span data-stu-id="b923f-203">Only as many characters as are entered in the text box will be compared, because the `SearchType` property specifies `StartsWith`.</span></span>

<span data-ttu-id="b923f-204">Die `OrderByExpression` Element gibt an, dass das Resultset Kurs Titels in Abteilungsnamen sortiert werden.</span><span class="sxs-lookup"><span data-stu-id="b923f-204">The `OrderByExpression` element specifies that the result set will be ordered by course title within department name.</span></span> <span data-ttu-id="b923f-205">Beachten Sie, wie der Name der Abteilung angegeben wird: `Department.Name`.</span><span class="sxs-lookup"><span data-stu-id="b923f-205">Notice how department name is specified: `Department.Name`.</span></span> <span data-ttu-id="b923f-206">Da die Zuordnung zwischen der `Course` Entität und die `Department` Entität 1: 1, ist die `Department` Navigationseigenschaft enthält eine `Department` Entität.</span><span class="sxs-lookup"><span data-stu-id="b923f-206">Because the association between the `Course` entity and the `Department` entity is one-to-one, the `Department` navigation property contains a `Department` entity.</span></span> <span data-ttu-id="b923f-207">(Bei einer 1: n-Beziehung, würde die Eigenschaft eine Auflistung enthalten.) Um den Namen der Abteilung zu erhalten, geben Sie die `Name` Eigenschaft von der `Department` Entität.</span><span class="sxs-lookup"><span data-stu-id="b923f-207">(If this were a one-to-many relationship, the property would contain a collection.) To get the department name, you must specify the `Name` property of the `Department` entity.</span></span>

<span data-ttu-id="b923f-208">Fügen Sie schließlich eine `GridView` -Steuerelement zum Anzeigen der Liste der Kurse:</span><span class="sxs-lookup"><span data-stu-id="b923f-208">Finally, add a `GridView` control to display the list of courses:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample8.aspx)]

<span data-ttu-id="b923f-209">Die erste Spalte ist eine Vorlagenfeld, das den Abteilungsnamen anzeigt.</span><span class="sxs-lookup"><span data-stu-id="b923f-209">The first column is a template field that displays the department name.</span></span> <span data-ttu-id="b923f-210">Gibt an, der Datenbindungsausdruck `Department.Name`, genau wie Sie gesehen, in haben der `QueryExtender` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="b923f-210">The databinding expression specifies `Department.Name`, just as you saw in the `QueryExtender` control.</span></span>

<span data-ttu-id="b923f-211">Führen Sie die Seite.</span><span class="sxs-lookup"><span data-stu-id="b923f-211">Run the page.</span></span> <span data-ttu-id="b923f-212">Die ursprüngliche Anzeige zeigt eine Liste aller Kurse in Reihenfolge an, nach Abteilung und dann nach den Titel.</span><span class="sxs-lookup"><span data-stu-id="b923f-212">The initial display shows a list of all courses in order by department and then by course title.</span></span>

<span data-ttu-id="b923f-213">[![image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-213">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image29.png)</span></span>

<span data-ttu-id="b923f-214">Geben Sie einem "m", und klicken Sie auf **Suche** alle Kurse anzeigen, deren Namen mit "m" (die Suche wird keine Groß-/ Kleinschreibung) beginnen.</span><span class="sxs-lookup"><span data-stu-id="b923f-214">Enter an "m" and click **Search** to see all courses whose titles begin with "m" (the search is not case sensitive).</span></span>

<span data-ttu-id="b923f-215">[![image12](the-entity-framework-and-aspnet-getting-started-part-3/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-215">[![Image12](the-entity-framework-and-aspnet-getting-started-part-3/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image31.png)</span></span>

## <a name="using-the-like-operator-to-filter-data"></a><span data-ttu-id="b923f-216">Verwenden den Operator "Like" zum Filtern von Daten</span><span class="sxs-lookup"><span data-stu-id="b923f-216">Using the "Like" Operator to Filter Data</span></span>

<span data-ttu-id="b923f-217">Können Sie einen ähnlichen Effekt erreichen der `QueryExtender` des Steuerelements `StartsWith`, `Contains`, und `EndsWith` Suchtypen mithilfe einer `Like` Operator in der `EntityDataSource` des Steuerelements `Where` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="b923f-217">You can achieve an effect similar to the `QueryExtender` control's `StartsWith`, `Contains`, and `EndsWith` search types by using a `Like` operator in the `EntityDataSource` control's `Where` property.</span></span> <span data-ttu-id="b923f-218">In diesem Teil des Lernprogramms, sehen Sie, wie Sie die `Like` Operator, um ein Student nach Namen suchen.</span><span class="sxs-lookup"><span data-stu-id="b923f-218">In this part of the tutorial, you'll see how to use the `Like` operator to search for a student by name.</span></span>

<span data-ttu-id="b923f-219">Open *Students.aspx* in **Quelle** anzeigen.</span><span class="sxs-lookup"><span data-stu-id="b923f-219">Open *Students.aspx* in **Source** view.</span></span> <span data-ttu-id="b923f-220">Nach der `GridView` steuern, fügen Sie das folgende Markup hinzu:</span><span class="sxs-lookup"><span data-stu-id="b923f-220">After the `GridView` control, add the following markup:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample9.aspx)]

<span data-ttu-id="b923f-221">Dieses Markup ähnelt der was zuvor mit Ausnahme von gesehen der `Where` Eigenschaftswert.</span><span class="sxs-lookup"><span data-stu-id="b923f-221">This markup is similar to what you've seen earlier except for the `Where` property value.</span></span> <span data-ttu-id="b923f-222">Der zweite Teil der `Where` Ausdruck definiert eine teilzeichenfolgensuche (`LIKE %FirstMidName% or LIKE %LastName%`), durchsucht die vor- und Nachnamen Namen für alle von Ihnen gewünschten in das Textfeld eingegeben wird.</span><span class="sxs-lookup"><span data-stu-id="b923f-222">The second part of the `Where` expression defines a substring search (`LIKE %FirstMidName% or LIKE %LastName%`) that searches both the first and last names for whatever is entered in the text box.</span></span>

<span data-ttu-id="b923f-223">Führen Sie die Seite.</span><span class="sxs-lookup"><span data-stu-id="b923f-223">Run the page.</span></span> <span data-ttu-id="b923f-224">Anfänglich daraufhin aller Studenten, da der Standardwert für die `StudentName` Parameter ist "%".</span><span class="sxs-lookup"><span data-stu-id="b923f-224">Initially you see all of the students because the default value for the `StudentName` parameter is "%".</span></span>

<span data-ttu-id="b923f-225">[![image13](the-entity-framework-and-aspnet-getting-started-part-3/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-225">[![Image13](the-entity-framework-and-aspnet-getting-started-part-3/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image33.png)</span></span>

<span data-ttu-id="b923f-226">Geben Sie den Buchstaben "g" in das Textfeld ein, und klicken Sie auf **Suche**.</span><span class="sxs-lookup"><span data-stu-id="b923f-226">Enter the letter "g" in the text box and click **Search**.</span></span> <span data-ttu-id="b923f-227">Sie sehen eine Liste der Studenten, die ein "g" entweder in den ersten oder letzten Namen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="b923f-227">You see a list of students that have a "g" in either the first or last name.</span></span>

<span data-ttu-id="b923f-228">[![image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="b923f-228">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image35.png)</span></span>

<span data-ttu-id="b923f-229">Sie haben nun angezeigt, aktualisiert, gefiltert, sortiert und gruppiert Daten aus den einzelnen Tabellen.</span><span class="sxs-lookup"><span data-stu-id="b923f-229">You've now displayed, updated, filtered, ordered, and grouped data from individual tables.</span></span> <span data-ttu-id="b923f-230">In den nächsten Lernprogrammen beginnen Sie mit verbundenen Daten (Master / Detail-Szenarien) arbeiten.</span><span class="sxs-lookup"><span data-stu-id="b923f-230">In the next tutorial you'll begin to work with related data (master-detail scenarios).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b923f-231">[Zurück](the-entity-framework-and-aspnet-getting-started-part-2.md)
> [Weiter](the-entity-framework-and-aspnet-getting-started-part-4.md)</span><span class="sxs-lookup"><span data-stu-id="b923f-231">[Previous](the-entity-framework-and-aspnet-getting-started-part-2.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-4.md)</span></span>
