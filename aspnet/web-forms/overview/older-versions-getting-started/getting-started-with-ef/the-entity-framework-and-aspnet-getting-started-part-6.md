---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
title: Erste Schritte mit Entity Framework 4.0-Datenbank zunächst und ASP.NET 4 Web Forms - Teil 6 | Microsoft Docs
author: tdykstra
description: Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mit dem Entity Framework. Die beispielanwendung ist...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: 994a5496-c648-4830-b03c-55bb43f325d2
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
msc.type: authoredcontent
ms.openlocfilehash: b76be25501275ba676c9a9acca8e73333439ee70
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2018
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-6"></a><span data-ttu-id="aca7b-104">Erste Schritte mit Entity Framework 4.0-Datenbank zunächst und ASP.NET 4 WebForms - Teil 6</span><span class="sxs-lookup"><span data-stu-id="aca7b-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 6</span></span>
====================
<span data-ttu-id="aca7b-105">durch [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="aca7b-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="aca7b-106">Die Contoso-University Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mit dem Entity Framework 4.0 und Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="aca7b-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="aca7b-107">Informationen über die Reihe von Lernprogrammen finden Sie unter [im ersten Lernprogramm, in der Reihe](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="aca7b-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="implementing-table-per-hierarchy-inheritance"></a><span data-ttu-id="aca7b-108">Implementieren der "Tabelle pro Hierarchie"-Vererbung</span><span class="sxs-lookup"><span data-stu-id="aca7b-108">Implementing Table-per-Hierarchy Inheritance</span></span>

<span data-ttu-id="aca7b-109">Im vorherigen Lernprogramm arbeitet Sie mit verbundenen Daten hinzufügen und Löschen von Beziehungen und durch Hinzufügen einer neuen Entität, die eine Beziehung zu einer vorhandenen Entität mussten.</span><span class="sxs-lookup"><span data-stu-id="aca7b-109">In the previous tutorial you worked with related data by adding and deleting relationships and by adding a new entity that had a relationship to an existing entity.</span></span> <span data-ttu-id="aca7b-110">In diesem Tutorial erfahren Sie, wie Sie die Vererbung in das Datenmodell implementieren können.</span><span class="sxs-lookup"><span data-stu-id="aca7b-110">This tutorial will show you how to implement inheritance in the data model.</span></span>

<span data-ttu-id="aca7b-111">Vererbung können Sie in einer objektorientierten Programmierung mit verwandten Klassen arbeiten erleichtern.</span><span class="sxs-lookup"><span data-stu-id="aca7b-111">In object-oriented programming, you can use inheritance to make it easier to work with related classes.</span></span> <span data-ttu-id="aca7b-112">Sie können z. B. erstellen `Instructor` und `Student` abgeleitete Klassen eine `Person` Basisklasse.</span><span class="sxs-lookup"><span data-stu-id="aca7b-112">For example, you could create `Instructor` and `Student` classes that derive from a `Person` base class.</span></span> <span data-ttu-id="aca7b-113">Sie können die gleichen Arten von Strukturen der Vererbung zwischen Entitäten im Entity Framework erstellen.</span><span class="sxs-lookup"><span data-stu-id="aca7b-113">You can create the same kinds of inheritance structures among entities in the Entity Framework.</span></span>

<span data-ttu-id="aca7b-114">In diesem Teil des Lernprogramms wird keine neuen Webseiten erstellen.</span><span class="sxs-lookup"><span data-stu-id="aca7b-114">In this part of the tutorial, you won't create any new web pages.</span></span> <span data-ttu-id="aca7b-115">Stattdessen Sie Entitäten abgeleitet, dem Datenmodell hinzufügen und Ändern von vorhandenen Seiten, um die neuen Entitäten zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="aca7b-115">Instead, you'll add derived entities to the data model and modify existing pages to use the new entities.</span></span>

## <a name="table-per-hierarchy-versus-table-per-type-inheritance"></a><span data-ttu-id="aca7b-116">Tabelle pro Hierarchie im Vergleich zu Tabelle pro Typ Vererbung</span><span class="sxs-lookup"><span data-stu-id="aca7b-116">Table-per-Hierarchy versus Table-per-Type Inheritance</span></span>

<span data-ttu-id="aca7b-117">Eine Datenbank kann Informationen über verbundene Objekte in einer Tabelle oder in mehreren Tabellen speichern.</span><span class="sxs-lookup"><span data-stu-id="aca7b-117">A database can store information about related objects in one table or in multiple tables.</span></span> <span data-ttu-id="aca7b-118">Beispielsweise ist in der `School` Datenbank, die `Person` Tabelle enthält Informationen zu Studenten und Lehrkräfte in einer einzelnen Tabelle.</span><span class="sxs-lookup"><span data-stu-id="aca7b-118">For example, in the `School` database, the `Person` table includes information about both students and instructors in a single table.</span></span> <span data-ttu-id="aca7b-119">Einige der Spalten gelten nur für Lehrkräfte (`HireDate`), einige nur für Studenten (`EnrollmentDate`), und einige sowohl (`LastName`, `FirstName`).</span><span class="sxs-lookup"><span data-stu-id="aca7b-119">Some of the columns apply only to instructors (`HireDate`), some only to students (`EnrollmentDate`), and some to both (`LastName`, `FirstName`).</span></span>

<span data-ttu-id="aca7b-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span></span>

<span data-ttu-id="aca7b-121">Sie können konfigurieren, dass das Entity Framework zum Erstellen `Instructor` und `Student` Entitäten, die von erben die `Person` Entität.</span><span class="sxs-lookup"><span data-stu-id="aca7b-121">You can configure the Entity Framework to create `Instructor` and `Student` entities that inherit from the `Person` entity.</span></span> <span data-ttu-id="aca7b-122">Dieses Muster für eine Entität Vererbungsstruktur aus einer einzelnen Datenbanktabelle generiert heißt *Tabelle pro Hierarchie* Vererbung (TPH).</span><span class="sxs-lookup"><span data-stu-id="aca7b-122">This pattern of generating an entity inheritance structure from a single database table is called *table-per-hierarchy* (TPH) inheritance.</span></span>

<span data-ttu-id="aca7b-123">Für Kurse die `School` Datenbank verwendet ein anderes Muster.</span><span class="sxs-lookup"><span data-stu-id="aca7b-123">For courses, the `School` database uses a different pattern.</span></span> <span data-ttu-id="aca7b-124">Onlinekurse und vor Ort Kurse werden in separaten Tabellen, von denen jeder hat es sich um einen Fremdschlüssel, die auf zeigt gespeichert die `Course` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="aca7b-124">Online courses and onsite courses are stored in separate tables, each of which has a foreign key that points to the `Course` table.</span></span> <span data-ttu-id="aca7b-125">Gemeinsame Informationen für beide Kurstypen befindet sich nur in der `Course` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="aca7b-125">Information common to both course types is stored only in the `Course` table.</span></span>

<span data-ttu-id="aca7b-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span></span>

<span data-ttu-id="aca7b-127">Sie können die Entity Framework-Datenmodells konfigurieren, damit `OnlineCourse` und `OnsiteCourse` erbt von der `Course` Entität.</span><span class="sxs-lookup"><span data-stu-id="aca7b-127">You can configure the Entity Framework data model so that `OnlineCourse` and `OnsiteCourse` entities inherit from the `Course` entity.</span></span> <span data-ttu-id="aca7b-128">Dieses Muster generieren Sie eine Entität Vererbungsstruktur aus separaten Tabellen für jeden Typ, wobei jede separate Datentabelle Rückblick auf eine Tabelle, die Daten, die alle Typen gemeinsam speichert heißt *Tabelle pro Typ* Vererbung (TPT).</span><span class="sxs-lookup"><span data-stu-id="aca7b-128">This pattern of generating an entity inheritance structure from separate tables for each type, with each separate table referring back to a table that stores data common to all types, is called *table per type* (TPT) inheritance.</span></span>

<span data-ttu-id="aca7b-129">TPH Muster der methodenvererbung aufgeführt übermitteln im Entity Framework als TPT Muster der methodenvererbung aufgeführt, in der Regel eine bessere Leistung, TPT Muster können komplexe Join-Abfragen ergeben.</span><span class="sxs-lookup"><span data-stu-id="aca7b-129">TPH inheritance patterns generally deliver better performance in the Entity Framework than TPT inheritance patterns, because TPT patterns can result in complex join queries.</span></span> <span data-ttu-id="aca7b-130">Diese exemplarische Vorgehensweise veranschaulicht die TPH-Vererbung zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="aca7b-130">This walkthrough demonstrates how to implement TPH inheritance.</span></span> <span data-ttu-id="aca7b-131">Sie müssen zu diesem Zweck die folgenden Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="aca7b-131">You'll do that by performing the following steps:</span></span>

- <span data-ttu-id="aca7b-132">Erstellen Sie `Instructor` und `Student` Entitätstypen, die davon Herleiten `Person`.</span><span class="sxs-lookup"><span data-stu-id="aca7b-132">Create `Instructor` and `Student` entity types that derive from `Person`.</span></span>
- <span data-ttu-id="aca7b-133">Move-Eigenschaften, die die abgeleiteten Entitäten aus betreffen die `Person` Entität und abgeleiteten Entitäten.</span><span class="sxs-lookup"><span data-stu-id="aca7b-133">Move properties that pertain to the derived entities from the `Person` entity to the derived entities.</span></span>
- <span data-ttu-id="aca7b-134">Einschränkungen für Eigenschaften in der abgeleiteten Typen festgelegt.</span><span class="sxs-lookup"><span data-stu-id="aca7b-134">Set constraints on properties in the derived types.</span></span>
- <span data-ttu-id="aca7b-135">Stellen Sie die `Person` Entität eine abstrakte Entität.</span><span class="sxs-lookup"><span data-stu-id="aca7b-135">Make the `Person` entity an abstract entity.</span></span>
- <span data-ttu-id="aca7b-136">Map jede abgeleitete Entität, die die `Person` Tabelle mit einer Bedingung, die angibt, wie Sie feststellen, ob eine `Person` Zeile darstellt, die abgeleiteten Typ.</span><span class="sxs-lookup"><span data-stu-id="aca7b-136">Map each derived entity to the `Person` table with a condition that specifies how to determine whether a `Person` row represents that derived type.</span></span>

## <a name="adding-instructor-and-student-entities"></a><span data-ttu-id="aca7b-137">Hinzufügen von Dozenten und Student-Entitäten</span><span class="sxs-lookup"><span data-stu-id="aca7b-137">Adding Instructor and Student Entities</span></span>

<span data-ttu-id="aca7b-138">Öffnen der <em>SchoolModel.edmx</em> Datei der rechten Maustaste auf einen freien Bereich im Designer auswählen <strong>hinzufügen</strong>, und wählen Sie dann <strong>Entität</strong><em>.</em></span><span class="sxs-lookup"><span data-stu-id="aca7b-138">Open the <em>SchoolModel.edmx</em> file, right-click an unoccupied area in the designer, select <strong>Add</strong>, then select <strong>Entity</strong><em>.</em></span></span>

<span data-ttu-id="aca7b-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span></span>

<span data-ttu-id="aca7b-140">In der **Entität hinzufügen** (Dialogfeld), Name der Entität `Instructor` und legen Sie dessen **Basistyp** option `Person`.</span><span class="sxs-lookup"><span data-stu-id="aca7b-140">In the **Add Entity** dialog box, name the entity `Instructor` and set its **Base type** option to `Person`.</span></span>

<span data-ttu-id="aca7b-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span></span>

<span data-ttu-id="aca7b-142">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="aca7b-142">Click **OK**.</span></span> <span data-ttu-id="aca7b-143">Der Designer erstellt eine `Instructor` Entität, die von abgeleitet ist die `Person` Entität.</span><span class="sxs-lookup"><span data-stu-id="aca7b-143">The designer creates an `Instructor` entity that derives from the `Person` entity.</span></span> <span data-ttu-id="aca7b-144">Die neue Entität verfügt noch keine Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="aca7b-144">The new entity does not yet have any properties.</span></span>

<span data-ttu-id="aca7b-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span></span>

<span data-ttu-id="aca7b-146">Wiederholen Sie das Verfahren zum Erstellen einer `Student` Entität, die auch abgeleitet `Person`.</span><span class="sxs-lookup"><span data-stu-id="aca7b-146">Repeat the procedure to create a `Student` entity that also derives from `Person`.</span></span>

<span data-ttu-id="aca7b-147">Nur bei Lehrkräfte mitarbeiteridentifikationsnummern, daher Sie diese Eigenschaft von verschieben müssen der `Person` Entität, die die `Instructor` Entität.</span><span class="sxs-lookup"><span data-stu-id="aca7b-147">Only instructors have hire dates, so you need to move that property from the `Person` entity to the `Instructor` entity.</span></span> <span data-ttu-id="aca7b-148">In der `Person` -Entität mit der rechten Maustaste die `HireDate` -Eigenschaft, und klicken Sie auf **Ausschneiden**.</span><span class="sxs-lookup"><span data-stu-id="aca7b-148">In the `Person` entity, right-click the `HireDate` property and click **Cut**.</span></span> <span data-ttu-id="aca7b-149">Klicken Sie dann mit der rechten Maustaste **Eigenschaften** in der `Instructor` Entität, und klicken Sie auf **einfügen**.</span><span class="sxs-lookup"><span data-stu-id="aca7b-149">Then right-click **Properties** in the `Instructor` entity and click **Paste**.</span></span>

<span data-ttu-id="aca7b-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span></span>

<span data-ttu-id="aca7b-151">Das Einstellungsdatum des ein `Instructor` Entität darf nicht null sein.</span><span class="sxs-lookup"><span data-stu-id="aca7b-151">The hire date of an `Instructor` entity cannot be null.</span></span> <span data-ttu-id="aca7b-152">Mit der rechten Maustaste die `HireDate` -Eigenschaft, klicken Sie auf **Eigenschaften**, und klicken Sie dann in der **Eigenschaften** ändern `Nullable` auf `False`.</span><span class="sxs-lookup"><span data-stu-id="aca7b-152">Right-click the `HireDate` property, click **Properties**, and then in the **Properties** window change `Nullable` to `False`.</span></span>

<span data-ttu-id="aca7b-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span></span>

<span data-ttu-id="aca7b-154">Wiederholen Sie das Verfahren zum Verschieben der `EnrollmentDate` Eigenschaft aus der `Person` Entität, die die `Student` Entität.</span><span class="sxs-lookup"><span data-stu-id="aca7b-154">Repeat the procedure to move the `EnrollmentDate` property from the `Person` entity to the `Student` entity.</span></span> <span data-ttu-id="aca7b-155">Stellen Sie sicher, dass Sie auch festlegen, `Nullable` auf `False` für die `EnrollmentDate` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="aca7b-155">Make sure that you also set `Nullable` to `False` for the `EnrollmentDate` property.</span></span>

<span data-ttu-id="aca7b-156">Nachdem eine `Person` Entität hat nur die Eigenschaften, die gelten `Instructor` und `Student` Entitäten (abgesehen von Navigationseigenschaften, die Sie nicht verschieben), kann die Entität nur als Basisentität in der Vererbungsstruktur verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="aca7b-156">Now that a `Person` entity has only the properties that are common to `Instructor` and `Student` entities (aside from navigation properties, which you're not moving), the entity can only be used as a base entity in the inheritance structure.</span></span> <span data-ttu-id="aca7b-157">Aus diesem Grund müssen Sie sicherstellen, dass es nie als unabhängige Entität behandelt wird.</span><span class="sxs-lookup"><span data-stu-id="aca7b-157">Therefore, you need to ensure that it's never treated as an independent entity.</span></span> <span data-ttu-id="aca7b-158">Mit der rechten Maustaste die `Person` Entität, wählen **Eigenschaften**, und klicken Sie dann in der **Eigenschaften** Fenster ändern Sie den Wert des der **abstrakte** Eigenschaft, um  **"True"**.</span><span class="sxs-lookup"><span data-stu-id="aca7b-158">Right-click the `Person` entity, select **Properties**, and then in the **Properties** window change the value of the **Abstract** property to **True**.</span></span>

<span data-ttu-id="aca7b-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span></span>

## <a name="mapping-instructor-and-student-entities-to-the-person-table"></a><span data-ttu-id="aca7b-160">Zuordnen von Dozenten und Student-Entitäten zu der Person-Tabelle</span><span class="sxs-lookup"><span data-stu-id="aca7b-160">Mapping Instructor and Student Entities to the Person Table</span></span>

<span data-ttu-id="aca7b-161">Nun Sie das Entity Framework anweisen, wie Unterscheidung zwischen müssen `Instructor` und `Student` Entitäten in der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="aca7b-161">Now you need to tell the Entity Framework how to differentiate between `Instructor` and `Student` entities in the database.</span></span>

<span data-ttu-id="aca7b-162">Mit der rechten Maustaste die `Instructor` Entität, und wählen **Tabelle zuordnen**.</span><span class="sxs-lookup"><span data-stu-id="aca7b-162">Right-click the `Instructor` entity and select **Table Mapping**.</span></span> <span data-ttu-id="aca7b-163">In der **Mappingdetails** Fenster, klicken Sie auf **Hinzufügen einer Tabelle oder Sicht** , und wählen Sie **Person**.</span><span class="sxs-lookup"><span data-stu-id="aca7b-163">In the **Mapping Details** window, click **Add a Table or View** and select **Person**.</span></span>

<span data-ttu-id="aca7b-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span></span>

<span data-ttu-id="aca7b-165">Klicken Sie auf **Hinzufügen einer Bedingung**, und wählen Sie dann **HireDate**.</span><span class="sxs-lookup"><span data-stu-id="aca7b-165">Click **Add a Condition**, and then select **HireDate**.</span></span>

<span data-ttu-id="aca7b-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span></span>

<span data-ttu-id="aca7b-167">Änderung **Operator** auf **ist** und **Wert / Eigenschaft** auf **Not Null**.</span><span class="sxs-lookup"><span data-stu-id="aca7b-167">Change **Operator** to **Is** and **Value / Property** to **Not Null**.</span></span>

<span data-ttu-id="aca7b-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span></span>

<span data-ttu-id="aca7b-169">Wiederholen Sie das Verfahren für die `Students` Entität, die angeben, dass diese Entität zugeordnet ist die `Person` bei Verwendung der `EnrollmentDate` Spalte ist nicht null.</span><span class="sxs-lookup"><span data-stu-id="aca7b-169">Repeat the procedure for the `Students` entity, specifying that this entity maps to the `Person` table when the `EnrollmentDate` column is not null.</span></span> <span data-ttu-id="aca7b-170">Speichern Sie und schließen Sie das Datenmodell.</span><span class="sxs-lookup"><span data-stu-id="aca7b-170">Then save and close the data model.</span></span>

<span data-ttu-id="aca7b-171">Erstellen Sie das Projekt, um die neuen Entitäten als Klassen zu erstellen und im Designer zur Verfügung stellen.</span><span class="sxs-lookup"><span data-stu-id="aca7b-171">Build the project in order to create the new entities as classes and make them available in the designer.</span></span>

## <a name="using-the-instructor-and-student-entities"></a><span data-ttu-id="aca7b-172">Mithilfe des Dozenten und Student-Entitäten</span><span class="sxs-lookup"><span data-stu-id="aca7b-172">Using the Instructor and Student Entities</span></span>

<span data-ttu-id="aca7b-173">Beim Erstellen von Webseiten, die mit Student "und" Dozenten Daten datengebundenen Sie damit arbeiten, haben die `Person` Entitätenmenge und gefiltert werden, auf die `HireDate` oder `EnrollmentDate` Eigenschaft, um die zurückgegebenen Daten zu Studenten oder Dozenten einschränken.</span><span class="sxs-lookup"><span data-stu-id="aca7b-173">When you created the web pages that work with student and instructor data, you databound them to the `Person` entity set, and you filtered on the `HireDate` or `EnrollmentDate` property to restrict the returned data to students or instructors.</span></span> <span data-ttu-id="aca7b-174">Jedoch jetzt beim Binden jeder Datenquellen-Steuerelements an die `Person` Entität werden soll, können Sie angeben, dass nur `Student` oder `Instructor` Entitätstypen sollte ausgewählt sein.</span><span class="sxs-lookup"><span data-stu-id="aca7b-174">However, now when you bind each data source control to the `Person` entity set, you can specify that only `Student` or `Instructor` entity types should be selected.</span></span> <span data-ttu-id="aca7b-175">Da das Entity Framework weiß, wie zur Unterscheidung der Studenten und Kursleiter die `Person` -Entitätenmenge, die Sie entfernen die `Where` eigenschaftseinstellungen, die Sie manuell zu diesem Zweck eingegeben.</span><span class="sxs-lookup"><span data-stu-id="aca7b-175">Because the Entity Framework knows how to differentiate students and instructors in the `Person` entity set, you can remove the `Where` property settings you entered manually to do that.</span></span>

<span data-ttu-id="aca7b-176">In der Visual Studio-Designer können Sie angeben, geben Sie die Entität, die eine `EntityDataSource` Steuerelement sollte wählen Sie in der **EntityTypeFilter** im Dropdown-Feld der `Configure Data Source` Assistenten wie im folgenden Beispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="aca7b-176">In the Visual Studio Designer, you can specify the entity type that an `EntityDataSource` control should select in the **EntityTypeFilter** drop-down box of the `Configure Data Source` wizard, as shown in the following example.</span></span>

<span data-ttu-id="aca7b-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span></span>

<span data-ttu-id="aca7b-178">Und klicken Sie in der **Eigenschaften** Fenster, die Sie entfernen können `Where` Klausel-Werte, die nicht mehr benötigt werden, wie im folgenden Beispiel gezeigt,.</span><span class="sxs-lookup"><span data-stu-id="aca7b-178">And in the **Properties** window you can remove `Where` clause values that are no longer needed, as shown in the following example.</span></span>

<span data-ttu-id="aca7b-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span></span>

<span data-ttu-id="aca7b-180">Jedoch, da das Markup für die Änderungen `EntityDataSource` Steuerelemente zur Verwendung der `ContextTypeName` -Attribut kann nicht ausgeführt werden die **Datenquelle konfigurieren** Assistenten auf `EntityDataSource` Steuerelemente, die Sie bereits erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="aca7b-180">However, because you've changed the markup for `EntityDataSource` controls to use the `ContextTypeName` attribute, you cannot run the **Configure Data Source** wizard on `EntityDataSource` controls that you've already created.</span></span> <span data-ttu-id="aca7b-181">Aus diesem Grund müssen Sie die erforderlichen Änderungen vornehmen, durch Markup stattdessen ändern.</span><span class="sxs-lookup"><span data-stu-id="aca7b-181">Therefore, you'll make the required changes by changing markup instead.</span></span>

<span data-ttu-id="aca7b-182">Öffnen der *Students.aspx* Seite.</span><span class="sxs-lookup"><span data-stu-id="aca7b-182">Open the *Students.aspx* page.</span></span> <span data-ttu-id="aca7b-183">In der `StudentsEntityDataSource` steuern, entfernen Sie die `Where` Attribut, und fügen eine `EntityTypeFilter="Student"` Attribut.</span><span class="sxs-lookup"><span data-stu-id="aca7b-183">In the `StudentsEntityDataSource` control, remove the `Where` attribute and add an `EntityTypeFilter="Student"` attribute.</span></span> <span data-ttu-id="aca7b-184">Das Markup wird nun im folgende Beispiel aussehen:</span><span class="sxs-lookup"><span data-stu-id="aca7b-184">The markup will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample1.aspx)]

<span data-ttu-id="aca7b-185">Festlegen der `EntityTypeFilter` Attribut wird sichergestellt, dass die `EntityDataSource` Steuerelement wird nur auf den angegebenen Entitätstyp auswählen.</span><span class="sxs-lookup"><span data-stu-id="aca7b-185">Setting the `EntityTypeFilter` attribute ensures that the `EntityDataSource` control will select only the specified entity type.</span></span> <span data-ttu-id="aca7b-186">Wenn Sie beides abrufen wollten `Student` und `Instructor` Entitätstypen, würden Sie nicht dieses Attribut festgelegt.</span><span class="sxs-lookup"><span data-stu-id="aca7b-186">If you wanted to retrieve both `Student` and `Instructor` entity types, you would not set this attribute.</span></span> <span data-ttu-id="aca7b-187">(Sie haben die Möglichkeit, mehrere Entitätstypen mit einem abrufen `EntityDataSource` steuern nur, wenn Sie das Steuerelement für den schreibgeschützten Datenzugriff verwenden.</span><span class="sxs-lookup"><span data-stu-id="aca7b-187">(You have the option of retrieving multiple entity types with one `EntityDataSource` control only if you're using the control for read-only data access.</span></span> <span data-ttu-id="aca7b-188">Bei Verwendung einer `EntityDataSource` zum Einfügen, aktualisieren oder Löschen von Entitäten zu steuern, und wenn die Entitätenmenge, die sie, um gebunden ist mehrere Typen enthalten kann, Sie funktionieren nur mit einem Entitätstyp und müssen Sie dieses Attribut festlegen.)</span><span class="sxs-lookup"><span data-stu-id="aca7b-188">If you're using an `EntityDataSource` control to insert, update, or delete entities, and if the entity set it's bound to can contain multiple types, you can only work with one entity type, and you have to set this attribute.)</span></span>

<span data-ttu-id="aca7b-189">Wiederholen Sie das Verfahren für die `SearchEntityDataSource` zu steuern, mit der Ausnahme entfernt nur den Teil der `Where` -Attribut, das ausgewählt `Student` Entitäten anstelle die Eigenschaft vollständig entfernen.</span><span class="sxs-lookup"><span data-stu-id="aca7b-189">Repeat the procedure for the `SearchEntityDataSource` control, except remove only the part of the `Where` attribute that selects `Student` entities instead of removing the property altogether.</span></span> <span data-ttu-id="aca7b-190">Das Anfangstag des Steuerelements wird nun im folgende Beispiel aussehen:</span><span class="sxs-lookup"><span data-stu-id="aca7b-190">The opening tag of the control will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample2.aspx)]

<span data-ttu-id="aca7b-191">Führen Sie die Seite, um sicherzustellen, dass es weiterhin funktioniert, es hat sich nichts geändert.</span><span class="sxs-lookup"><span data-stu-id="aca7b-191">Run the page to verify that it still works as it did before.</span></span>

<span data-ttu-id="aca7b-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span></span>

<span data-ttu-id="aca7b-193">Aktualisieren Sie die folgenden Seiten, die Sie in früheren Lernprogramme erstellt haben, damit sie die neue verwenden `Student` und `Instructor` Entitäten anstelle von `Person` Entitäten, führen sie überprüfen, ob sie funktionieren wie vor:</span><span class="sxs-lookup"><span data-stu-id="aca7b-193">Update the following pages that you created in earlier tutorials so that they use the new `Student` and `Instructor` entities instead of `Person` entities, then run them to verify that they work as they did before:</span></span>

- <span data-ttu-id="aca7b-194">In *StudentsAdd.aspx*, hinzufügen `EntityTypeFilter="Student"` auf die `StudentsEntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="aca7b-194">In *StudentsAdd.aspx*, add `EntityTypeFilter="Student"` to the `StudentsEntityDataSource` control.</span></span> <span data-ttu-id="aca7b-195">Das Markup wird nun im folgende Beispiel aussehen:</span><span class="sxs-lookup"><span data-stu-id="aca7b-195">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample3.aspx)]

    <span data-ttu-id="aca7b-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span></span>
- <span data-ttu-id="aca7b-197">In *About.aspx*, hinzufügen `EntityTypeFilter="Student"` auf die `StudentStatisticsEntityDataSource` steuern und Entfernen von `Where="it.EnrollmentDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="aca7b-197">In *About.aspx*, add `EntityTypeFilter="Student"` to the `StudentStatisticsEntityDataSource` control and remove `Where="it.EnrollmentDate is not null"`.</span></span> <span data-ttu-id="aca7b-198">Das Markup wird nun im folgende Beispiel aussehen:</span><span class="sxs-lookup"><span data-stu-id="aca7b-198">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample4.aspx)]

    <span data-ttu-id="aca7b-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span></span>
- <span data-ttu-id="aca7b-200">In *Instructors.aspx* und *InstructorsCourses.aspx*, hinzufügen `EntityTypeFilter="Instructor"` auf die `InstructorsEntityDataSource` steuern und Entfernen von `Where="it.HireDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="aca7b-200">In *Instructors.aspx* and *InstructorsCourses.aspx*, add `EntityTypeFilter="Instructor"` to the `InstructorsEntityDataSource` control and remove `Where="it.HireDate is not null"`.</span></span> <span data-ttu-id="aca7b-201">Das Markup in *Instructors.aspx* jetzt etwa wie folgt:</span><span class="sxs-lookup"><span data-stu-id="aca7b-201">The markup in *Instructors.aspx* now resembles the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample5.aspx)]

    <span data-ttu-id="aca7b-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span></span>

    <span data-ttu-id="aca7b-203">Das Markup in *InstructorsCourses.aspx* wird nun im folgende Beispiel aussehen:</span><span class="sxs-lookup"><span data-stu-id="aca7b-203">The markup in *InstructorsCourses.aspx* will now resemble the following example:</span></span>

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample6.aspx)]

    <span data-ttu-id="aca7b-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="aca7b-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span></span>

<span data-ttu-id="aca7b-205">Als Ergebnis dieser Änderungen haben Sie die Contoso-University Anwendung Verwaltbarkeit auf unterschiedliche Weise verbessert.</span><span class="sxs-lookup"><span data-stu-id="aca7b-205">As a result of these changes, you've improved the Contoso University application's maintainability in several ways.</span></span> <span data-ttu-id="aca7b-206">Auswahl und Überprüfung Logik aus der Benutzeroberflächenebene verschoben haben (*aspx* Markup), und er einen wesentlicher Bestandteil der Datenzugriffsebene versucht.</span><span class="sxs-lookup"><span data-stu-id="aca7b-206">You've moved selection and validation logic out of the UI layer (*.aspx* markup) and made it an integral part of the data access layer.</span></span> <span data-ttu-id="aca7b-207">Dadurch wird um den Anwendungscode über Änderungen zu isolieren, die in der Zukunft an das Datenbankschema oder das Datenmodell vorgenommen werden können.</span><span class="sxs-lookup"><span data-stu-id="aca7b-207">This helps to isolate your application code from changes that you might make in the future to the database schema or the data model.</span></span> <span data-ttu-id="aca7b-208">Beispielsweise könnten Sie, dass Studenten als Hilfsmittel für Lehrkräfte eingestellt werden können und daher eine Einstellungsdatum abgerufen werden würde.</span><span class="sxs-lookup"><span data-stu-id="aca7b-208">For example, you could decide that students might be hired as teachers' aids and therefore would get a hire date.</span></span> <span data-ttu-id="aca7b-209">Sie können eine neue Eigenschaft, um Studenten von Lehrkräfte unterschieden, und aktualisieren Sie das Datenmodell hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="aca7b-209">You could then add a new property to differentiate students from instructors and update the data model.</span></span> <span data-ttu-id="aca7b-210">Kein Code in der Webanwendung müssten ändern, es sei denn, in dem Sie soll demonstriert werden, ein Einstellungsdatum für Studenten.</span><span class="sxs-lookup"><span data-stu-id="aca7b-210">No code in the web application would need to change except where you wanted to show a hire date for students.</span></span> <span data-ttu-id="aca7b-211">Ein weiterer Vorteil des Hinzufügens von `Instructor` und `Student` Entitäten ist, dass der Code ist leichter verständlich, als wenn sie bezeichnet `Person` Objekte, die tatsächlich Studenten wurden oder Lehrkräfte.</span><span class="sxs-lookup"><span data-stu-id="aca7b-211">Another benefit of adding `Instructor` and `Student` entities is that your code is more readily understandable than when it referred to `Person` objects that were actually students or instructors.</span></span>

<span data-ttu-id="aca7b-212">Sie haben nun gesehen, eine Möglichkeit, ein Vererbungsmuster im Entity Framework zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="aca7b-212">You've now seen one way to implement an inheritance pattern in the Entity Framework.</span></span> <span data-ttu-id="aca7b-213">Im folgenden Lernprogramm erfahren Sie, wie Sie gespeicherte Prozeduren verwenden, um besser steuern, wie das Entity Framework für die Datenbank zugreift.</span><span class="sxs-lookup"><span data-stu-id="aca7b-213">In the following tutorial, you'll learn how to use stored procedures in order to have more control over how the Entity Framework accesses the database.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="aca7b-214">[Zurück](the-entity-framework-and-aspnet-getting-started-part-5.md)
> [Weiter](the-entity-framework-and-aspnet-getting-started-part-7.md)</span><span class="sxs-lookup"><span data-stu-id="aca7b-214">[Previous](the-entity-framework-and-aspnet-getting-started-part-5.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-7.md)</span></span>
